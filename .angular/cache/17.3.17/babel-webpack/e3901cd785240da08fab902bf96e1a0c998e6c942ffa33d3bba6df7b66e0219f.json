{"ast":null,"code":"import _asyncToGenerator from \"D:/Project/github-teams/teams-app-new/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\n// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\nimport { stringToUint8Array, uint8ArrayToString } from \"../../util/bytesEncoding.js\";\nimport { ensureSecureConnection } from \"./checkInsecureConnection.js\";\n/**\n * Name of the Basic Authentication Policy\n */\nexport const basicAuthenticationPolicyName = \"bearerAuthenticationPolicy\";\n/**\n * Gets a pipeline policy that adds basic authentication to requests\n */\nexport function basicAuthenticationPolicy(options) {\n  return {\n    name: basicAuthenticationPolicyName,\n    sendRequest(request, next) {\n      return _asyncToGenerator(function* () {\n        var _a, _b;\n        // Ensure allowInsecureConnection is explicitly set when sending request to non-https URLs\n        ensureSecureConnection(request, options);\n        const scheme = (_b = (_a = request.authSchemes) !== null && _a !== void 0 ? _a : options.authSchemes) === null || _b === void 0 ? void 0 : _b.find(x => x.kind === \"http\" && x.scheme === \"basic\");\n        // Skip adding authentication header if no basic authentication scheme is found\n        if (!scheme) {\n          return next(request);\n        }\n        const {\n          username,\n          password\n        } = options.credential;\n        const headerValue = uint8ArrayToString(stringToUint8Array(`${username}:${password}`, \"utf-8\"), \"base64\");\n        request.headers.set(\"Authorization\", `Basic ${headerValue}`);\n        return next(request);\n      })();\n    }\n  };\n}\n//# sourceMappingURL=basicAuthenticationPolicy.js.map","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}