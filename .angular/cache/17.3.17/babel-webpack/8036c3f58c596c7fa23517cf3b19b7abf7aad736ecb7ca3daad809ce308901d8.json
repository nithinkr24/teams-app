{"ast":null,"code":"import { __awaiter as e } from \"../../../../node_modules/.pnpm/@rollup_plugin-typescript@11.1.6_rollup@4.24.4_tslib@2.6.3_typescript@4.9.5/node_modules/tslib/tslib.es6.js\";\nimport { errorNotSupportedOnPlatform as t } from \"../public/constants.js\";\nimport { EffectFailureReason as r } from \"../public/videoEffects.js\";\nimport { sendMessageToParent as i } from \"./communication.js\";\nimport { registerHandler as o } from \"./handlers.js\";\nimport { getApiVersionTag as a } from \"./telemetry.js\";\nimport { inServerSideRenderingEnvironment as n, ssrSafeWindow as s } from \"./utils.js\";\nconst d = \"v2\";\nfunction h(t, r, i, o) {\n  var a, s;\n  return e(this, void 0, void 0, function* () {\n    const e = f();\n    !n() && (null === (s = null === (a = window.chrome) || void 0 === a ? void 0 : a.webview) || void 0 === s || s.registerTextureStream(t, e)), l(yield u(t, i, o), new m(i, r), e.writable);\n  });\n}\nfunction c(t, r, i, o) {\n  var a, s;\n  return e(this, void 0, void 0, function* () {\n    const e = f();\n    !n() && (null === (s = null === (a = window.chrome) || void 0 === a ? void 0 : a.webview) || void 0 === s || s.registerTextureStream(t, e)), l(yield u(t, i, o), new v(i, r), e.writable);\n  });\n}\nfunction u(r, i, o) {\n  return e(this, void 0, void 0, function* () {\n    if (n()) throw t;\n    const e = s().chrome;\n    try {\n      null == o || o.reportGettingTextureStream(r);\n      const t = (yield e.webview.getTextureStream(r)).getVideoTracks();\n      if (0 === t.length) throw new Error(`No video track in stream ${r}`);\n      return null == o || o.reportTextureStreamAcquired(), t[0];\n    } catch (e) {\n      throw i(`Failed to get video track from stream ${r}, error: ${e}`), new Error(`Internal error: can't get video track from stream ${r}`);\n    }\n  });\n}\nfunction f() {\n  if (n()) throw t;\n  const e = window.MediaStreamTrackGenerator;\n  if (!e) throw t;\n  return new e({\n    kind: \"video\"\n  });\n}\nfunction l(e, t, r) {\n  new (0, s().MediaStreamTrackProcessor)({\n    track: e\n  }).readable.pipeThrough(new TransformStream(t)).pipeTo(r);\n}\nclass m {\n  constructor(t, r) {\n    this.notifyError = t, this.videoFrameHandler = r, this.transform = (t, r) => e(this, void 0, void 0, function* () {\n      const e = t.timestamp;\n      if (null !== e) try {\n        const i = yield this.videoFrameHandler({\n            videoFrame: t\n          }),\n          o = new VideoFrame(i, {\n            timestamp: e\n          });\n        r.enqueue(o), t.close(), i.close();\n      } catch (e) {\n        t.close(), this.notifyError(e);\n      } else this.notifyError(\"timestamp of the original video frame is null\");\n    });\n  }\n}\nclass w {\n  constructor(e, t) {\n    if (this.headerBuffer = e, this.notifyError = t, this.ONE_TEXTURE_INPUT_ID = 1869900081, this.INVALID_HEADER_ERROR = \"Invalid video frame header\", this.UNSUPPORTED_LAYOUT_ERROR = \"Unsupported texture layout\", this.headerDataView = new Uint32Array(e), this.headerDataView.length < 8) throw this.notifyError(this.INVALID_HEADER_ERROR), new Error(this.INVALID_HEADER_ERROR);\n    if (this.headerDataView[0] !== this.ONE_TEXTURE_INPUT_ID) throw this.notifyError(this.UNSUPPORTED_LAYOUT_ERROR), new Error(this.UNSUPPORTED_LAYOUT_ERROR);\n  }\n  get oneTextureLayoutId() {\n    return this.headerDataView[0];\n  }\n  get version() {\n    return this.headerDataView[1];\n  }\n  get frameRowOffset() {\n    return this.headerDataView[2];\n  }\n  get frameFormat() {\n    return this.headerDataView[3];\n  }\n  get frameWidth() {\n    return this.headerDataView[4];\n  }\n  get frameHeight() {\n    return this.headerDataView[5];\n  }\n  get multiStreamHeaderRowOffset() {\n    return this.headerDataView[6];\n  }\n  get multiStreamCount() {\n    return this.headerDataView[7];\n  }\n}\nclass E {\n  constructor(e, t) {\n    this.metadataMap = new Map(), this.AUDIO_INFERENCE_RESULT_STREAM_ID = 828664161, this.ATTRIBUTE_ID_MAP_STREAM_ID = 1296320833;\n    const r = new Uint32Array(e);\n    for (let i = 0, o = 0; i < t; i++) {\n      const t = r[o++],\n        i = r[o++],\n        a = r[o++],\n        n = new Uint8Array(e, i, a);\n      this.metadataMap.set(t, n);\n    }\n  }\n  get audioInferenceResult() {\n    return this.metadataMap.get(this.AUDIO_INFERENCE_RESULT_STREAM_ID);\n  }\n  get attributes() {\n    const e = this.metadataMap.get(this.ATTRIBUTE_ID_MAP_STREAM_ID);\n    if (void 0 === e) return;\n    const t = new Map(),\n      r = new TextDecoder(\"utf-8\");\n    let i = 0;\n    const o = e[i] + (e[++i] << 8) + (e[++i] << 16) + (e[++i] << 24);\n    for (let a = 0; a < o && i < e.length - 1; a++) {\n      const o = e[++i] + (e[++i] << 8) + (e[++i] << 16) + (e[++i] << 24),\n        a = e.findIndex((e, t, r) => 0 == e && t > i),\n        n = r.decode(e.slice(++i, a)),\n        s = this.metadataMap.get(o);\n      void 0 !== s && t.set(n, s);\n      i = a + (4 - (a - i) % 4 - 1);\n    }\n    return t;\n  }\n}\nclass v {\n  constructor(r, i) {\n    this.notifyError = r, this.videoFrameHandler = i, this.shouldDiscardAudioInferenceResult = !1, this.transform = (t, r) => e(this, void 0, void 0, function* () {\n      const e = t.timestamp;\n      if (null !== e) try {\n        const {\n            videoFrame: i,\n            metadata: {\n              audioInferenceResult: o,\n              attributes: a\n            } = {}\n          } = yield this.extractVideoFrameAndMetadata(t),\n          n = yield this.videoFrameHandler({\n            videoFrame: i,\n            audioInferenceResult: o,\n            attributes: a\n          }),\n          s = new VideoFrame(n, {\n            timestamp: e\n          });\n        r.enqueue(s), i.close(), t.close(), n.close();\n      } catch (e) {\n        t.close(), this.notifyError(e);\n      } else this.notifyError(\"timestamp of the original video frame is null\");\n    }), this.extractVideoFrameAndMetadata = r => e(this, void 0, void 0, function* () {\n      if (n()) throw t;\n      if (\"NV12\" !== r.format) throw this.notifyError(\"Unsupported video frame pixel format\"), new Error(\"Unsupported video frame pixel format\");\n      const e = {\n          x: 0,\n          y: 0,\n          width: r.codedWidth,\n          height: 2\n        },\n        i = new ArrayBuffer(e.width * e.height * 3 / 2);\n      yield r.copyTo(i, {\n        rect: e\n      });\n      const o = new w(i, this.notifyError),\n        a = {\n          x: 0,\n          y: o.multiStreamHeaderRowOffset,\n          width: r.codedWidth,\n          height: r.codedHeight - o.multiStreamHeaderRowOffset\n        },\n        s = new ArrayBuffer(a.width * a.height * 3 / 2);\n      yield r.copyTo(s, {\n        rect: a\n      });\n      const d = new E(s, o.multiStreamCount);\n      return {\n        videoFrame: new VideoFrame(r, {\n          timestamp: r.timestamp,\n          visibleRect: {\n            x: 0,\n            y: o.frameRowOffset,\n            width: o.frameWidth,\n            height: o.frameHeight\n          }\n        }),\n        metadata: {\n          audioInferenceResult: this.shouldDiscardAudioInferenceResult ? void 0 : d.audioInferenceResult,\n          attributes: d.attributes\n        }\n      };\n    }), o(a(d, \"videoEffectsUtils.transformerWithMetadata.constructor\"), \"video.mediaStream.audioInferenceDiscardStatusChange\", ({\n      discardAudioInferenceResult: e\n    }) => {\n      this.shouldDiscardAudioInferenceResult = e;\n    });\n  }\n}\nfunction p(e, t) {\n  return (o, n) => {\n    null == t || t.reportApplyingVideoEffect(o || \"\", n), e(o, n).then(() => {\n      null == t || t.reportVideoEffectChanged(o || \"\", n), i(a(d, \"videoEffectsUtils.reportVideoEffectChanged\"), \"video.videoEffectReadiness\", [!0, o, void 0, n]);\n    }).catch(e => {\n      const t = e in r ? e : r.InitializationFailure;\n      i(a(d, \"videoEffectsUtils.effectFailure\"), \"video.videoEffectReadiness\", [!1, o, t, n]);\n    });\n  };\n}\nexport { p as createEffectParameterChangeCallback, h as processMediaStream, c as processMediaStreamWithMetadata };","map":{"version":3,"names":["__awaiter","e","errorNotSupportedOnPlatform","t","EffectFailureReason","r","sendMessageToParent","i","registerHandler","o","getApiVersionTag","a","inServerSideRenderingEnvironment","n","ssrSafeWindow","s","d","h","f","window","chrome","webview","registerTextureStream","l","u","m","writable","c","v","reportGettingTextureStream","getTextureStream","getVideoTracks","length","Error","reportTextureStreamAcquired","MediaStreamTrackGenerator","kind","MediaStreamTrackProcessor","track","readable","pipeThrough","TransformStream","pipeTo","constructor","notifyError","videoFrameHandler","transform","timestamp","videoFrame","VideoFrame","enqueue","close","w","headerBuffer","ONE_TEXTURE_INPUT_ID","INVALID_HEADER_ERROR","UNSUPPORTED_LAYOUT_ERROR","headerDataView","Uint32Array","oneTextureLayoutId","version","frameRowOffset","frameFormat","frameWidth","frameHeight","multiStreamHeaderRowOffset","multiStreamCount","E","metadataMap","Map","AUDIO_INFERENCE_RESULT_STREAM_ID","ATTRIBUTE_ID_MAP_STREAM_ID","Uint8Array","set","audioInferenceResult","get","attributes","TextDecoder","findIndex","decode","slice","shouldDiscardAudioInferenceResult","metadata","extractVideoFrameAndMetadata","format","x","y","width","codedWidth","height","ArrayBuffer","copyTo","rect","codedHeight","visibleRect","discardAudioInferenceResult","p","reportApplyingVideoEffect","then","reportVideoEffectChanged","catch","InitializationFailure","createEffectParameterChangeCallback","processMediaStream","processMediaStreamWithMetadata"],"sources":["D:/Project/github-teams/teams-app-new/node_modules/@microsoft/teams-js/dist/esm/packages/teams-js/src/internal/videoEffectsUtils.js"],"sourcesContent":["import{__awaiter as e}from\"../../../../node_modules/.pnpm/@rollup_plugin-typescript@11.1.6_rollup@4.24.4_tslib@2.6.3_typescript@4.9.5/node_modules/tslib/tslib.es6.js\";import{errorNotSupportedOnPlatform as t}from\"../public/constants.js\";import{EffectFailureReason as r}from\"../public/videoEffects.js\";import{sendMessageToParent as i}from\"./communication.js\";import{registerHandler as o}from\"./handlers.js\";import{getApiVersionTag as a}from\"./telemetry.js\";import{inServerSideRenderingEnvironment as n,ssrSafeWindow as s}from\"./utils.js\";const d=\"v2\";function h(t,r,i,o){var a,s;return e(this,void 0,void 0,(function*(){const e=f();!n()&&(null===(s=null===(a=window.chrome)||void 0===a?void 0:a.webview)||void 0===s||s.registerTextureStream(t,e)),l(yield u(t,i,o),new m(i,r),e.writable)}))}function c(t,r,i,o){var a,s;return e(this,void 0,void 0,(function*(){const e=f();!n()&&(null===(s=null===(a=window.chrome)||void 0===a?void 0:a.webview)||void 0===s||s.registerTextureStream(t,e)),l(yield u(t,i,o),new v(i,r),e.writable)}))}function u(r,i,o){return e(this,void 0,void 0,(function*(){if(n())throw t;const e=s().chrome;try{null==o||o.reportGettingTextureStream(r);const t=(yield e.webview.getTextureStream(r)).getVideoTracks();if(0===t.length)throw new Error(`No video track in stream ${r}`);return null==o||o.reportTextureStreamAcquired(),t[0]}catch(e){throw i(`Failed to get video track from stream ${r}, error: ${e}`),new Error(`Internal error: can't get video track from stream ${r}`)}}))}function f(){if(n())throw t;const e=window.MediaStreamTrackGenerator;if(!e)throw t;return new e({kind:\"video\"})}function l(e,t,r){new(0,s().MediaStreamTrackProcessor)({track:e}).readable.pipeThrough(new TransformStream(t)).pipeTo(r)}class m{constructor(t,r){this.notifyError=t,this.videoFrameHandler=r,this.transform=(t,r)=>e(this,void 0,void 0,(function*(){const e=t.timestamp;if(null!==e)try{const i=yield this.videoFrameHandler({videoFrame:t}),o=new VideoFrame(i,{timestamp:e});r.enqueue(o),t.close(),i.close()}catch(e){t.close(),this.notifyError(e)}else this.notifyError(\"timestamp of the original video frame is null\")}))}}class w{constructor(e,t){if(this.headerBuffer=e,this.notifyError=t,this.ONE_TEXTURE_INPUT_ID=1869900081,this.INVALID_HEADER_ERROR=\"Invalid video frame header\",this.UNSUPPORTED_LAYOUT_ERROR=\"Unsupported texture layout\",this.headerDataView=new Uint32Array(e),this.headerDataView.length<8)throw this.notifyError(this.INVALID_HEADER_ERROR),new Error(this.INVALID_HEADER_ERROR);if(this.headerDataView[0]!==this.ONE_TEXTURE_INPUT_ID)throw this.notifyError(this.UNSUPPORTED_LAYOUT_ERROR),new Error(this.UNSUPPORTED_LAYOUT_ERROR)}get oneTextureLayoutId(){return this.headerDataView[0]}get version(){return this.headerDataView[1]}get frameRowOffset(){return this.headerDataView[2]}get frameFormat(){return this.headerDataView[3]}get frameWidth(){return this.headerDataView[4]}get frameHeight(){return this.headerDataView[5]}get multiStreamHeaderRowOffset(){return this.headerDataView[6]}get multiStreamCount(){return this.headerDataView[7]}}class E{constructor(e,t){this.metadataMap=new Map,this.AUDIO_INFERENCE_RESULT_STREAM_ID=828664161,this.ATTRIBUTE_ID_MAP_STREAM_ID=1296320833;const r=new Uint32Array(e);for(let i=0,o=0;i<t;i++){const t=r[o++],i=r[o++],a=r[o++],n=new Uint8Array(e,i,a);this.metadataMap.set(t,n)}}get audioInferenceResult(){return this.metadataMap.get(this.AUDIO_INFERENCE_RESULT_STREAM_ID)}get attributes(){const e=this.metadataMap.get(this.ATTRIBUTE_ID_MAP_STREAM_ID);if(void 0===e)return;const t=new Map,r=new TextDecoder(\"utf-8\");let i=0;const o=e[i]+(e[++i]<<8)+(e[++i]<<16)+(e[++i]<<24);for(let a=0;a<o&&i<e.length-1;a++){const o=e[++i]+(e[++i]<<8)+(e[++i]<<16)+(e[++i]<<24),a=e.findIndex(((e,t,r)=>0==e&&t>i)),n=r.decode(e.slice(++i,a)),s=this.metadataMap.get(o);void 0!==s&&t.set(n,s);i=a+(4-(a-i)%4-1)}return t}}class v{constructor(r,i){this.notifyError=r,this.videoFrameHandler=i,this.shouldDiscardAudioInferenceResult=!1,this.transform=(t,r)=>e(this,void 0,void 0,(function*(){const e=t.timestamp;if(null!==e)try{const{videoFrame:i,metadata:{audioInferenceResult:o,attributes:a}={}}=yield this.extractVideoFrameAndMetadata(t),n=yield this.videoFrameHandler({videoFrame:i,audioInferenceResult:o,attributes:a}),s=new VideoFrame(n,{timestamp:e});r.enqueue(s),i.close(),t.close(),n.close()}catch(e){t.close(),this.notifyError(e)}else this.notifyError(\"timestamp of the original video frame is null\")})),this.extractVideoFrameAndMetadata=r=>e(this,void 0,void 0,(function*(){if(n())throw t;if(\"NV12\"!==r.format)throw this.notifyError(\"Unsupported video frame pixel format\"),new Error(\"Unsupported video frame pixel format\");const e={x:0,y:0,width:r.codedWidth,height:2},i=new ArrayBuffer(e.width*e.height*3/2);yield r.copyTo(i,{rect:e});const o=new w(i,this.notifyError),a={x:0,y:o.multiStreamHeaderRowOffset,width:r.codedWidth,height:r.codedHeight-o.multiStreamHeaderRowOffset},s=new ArrayBuffer(a.width*a.height*3/2);yield r.copyTo(s,{rect:a});const d=new E(s,o.multiStreamCount);return{videoFrame:new VideoFrame(r,{timestamp:r.timestamp,visibleRect:{x:0,y:o.frameRowOffset,width:o.frameWidth,height:o.frameHeight}}),metadata:{audioInferenceResult:this.shouldDiscardAudioInferenceResult?void 0:d.audioInferenceResult,attributes:d.attributes}}})),o(a(d,\"videoEffectsUtils.transformerWithMetadata.constructor\"),\"video.mediaStream.audioInferenceDiscardStatusChange\",(({discardAudioInferenceResult:e})=>{this.shouldDiscardAudioInferenceResult=e}))}}function p(e,t){return(o,n)=>{null==t||t.reportApplyingVideoEffect(o||\"\",n),e(o,n).then((()=>{null==t||t.reportVideoEffectChanged(o||\"\",n),i(a(d,\"videoEffectsUtils.reportVideoEffectChanged\"),\"video.videoEffectReadiness\",[!0,o,void 0,n])})).catch((e=>{const t=e in r?e:r.InitializationFailure;i(a(d,\"videoEffectsUtils.effectFailure\"),\"video.videoEffectReadiness\",[!1,o,t,n])}))}}export{p as createEffectParameterChangeCallback,h as processMediaStream,c as processMediaStreamWithMetadata};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}