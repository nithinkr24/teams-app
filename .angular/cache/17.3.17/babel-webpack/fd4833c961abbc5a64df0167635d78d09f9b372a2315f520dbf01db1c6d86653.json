{"ast":null,"code":"// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\nimport { AbortError } from \"../abort-controller/AbortError.js\";\nconst StandardAbortMessage = \"The operation was aborted.\";\n/**\n * A wrapper for setTimeout that resolves a promise after delayInMs milliseconds.\n * @param delayInMs - The number of milliseconds to be delayed.\n * @param value - The value to be resolved with after a timeout of t milliseconds.\n * @param options - The options for delay - currently abort options\n *                  - abortSignal - The abortSignal associated with containing operation.\n *                  - abortErrorMsg - The abort error message associated with containing operation.\n * @returns Resolved promise\n */\nexport function delay(delayInMs, value, options) {\n  return new Promise((resolve, reject) => {\n    let timer = undefined;\n    let onAborted = undefined;\n    const rejectOnAbort = () => {\n      return reject(new AbortError((options === null || options === void 0 ? void 0 : options.abortErrorMsg) ? options === null || options === void 0 ? void 0 : options.abortErrorMsg : StandardAbortMessage));\n    };\n    const removeListeners = () => {\n      if ((options === null || options === void 0 ? void 0 : options.abortSignal) && onAborted) {\n        options.abortSignal.removeEventListener(\"abort\", onAborted);\n      }\n    };\n    onAborted = () => {\n      if (timer) {\n        clearTimeout(timer);\n      }\n      removeListeners();\n      return rejectOnAbort();\n    };\n    if ((options === null || options === void 0 ? void 0 : options.abortSignal) && options.abortSignal.aborted) {\n      return rejectOnAbort();\n    }\n    timer = setTimeout(() => {\n      removeListeners();\n      resolve(value);\n    }, delayInMs);\n    if (options === null || options === void 0 ? void 0 : options.abortSignal) {\n      options.abortSignal.addEventListener(\"abort\", onAborted);\n    }\n  });\n}\n/**\n * @internal\n * @returns the parsed value or undefined if the parsed value is invalid.\n */\nexport function parseHeaderValueAsNumber(response, headerName) {\n  const value = response.headers.get(headerName);\n  if (!value) return;\n  const valueAsNum = Number(value);\n  if (Number.isNaN(valueAsNum)) return;\n  return valueAsNum;\n}","map":{"version":3,"names":["AbortError","StandardAbortMessage","delay","delayInMs","value","options","Promise","resolve","reject","timer","undefined","onAborted","rejectOnAbort","abortErrorMsg","removeListeners","abortSignal","removeEventListener","clearTimeout","aborted","setTimeout","addEventListener","parseHeaderValueAsNumber","response","headerName","headers","get","valueAsNum","Number","isNaN"],"sources":["D:/Project/github-teams/teams-app-new/node_modules/@typespec/ts-http-runtime/dist/browser/util/helpers.js"],"sourcesContent":["// Copyright (c) Microsoft Corporation.\n// Licensed under the MIT License.\nimport { AbortError } from \"../abort-controller/AbortError.js\";\nconst StandardAbortMessage = \"The operation was aborted.\";\n/**\n * A wrapper for setTimeout that resolves a promise after delayInMs milliseconds.\n * @param delayInMs - The number of milliseconds to be delayed.\n * @param value - The value to be resolved with after a timeout of t milliseconds.\n * @param options - The options for delay - currently abort options\n *                  - abortSignal - The abortSignal associated with containing operation.\n *                  - abortErrorMsg - The abort error message associated with containing operation.\n * @returns Resolved promise\n */\nexport function delay(delayInMs, value, options) {\n    return new Promise((resolve, reject) => {\n        let timer = undefined;\n        let onAborted = undefined;\n        const rejectOnAbort = () => {\n            return reject(new AbortError((options === null || options === void 0 ? void 0 : options.abortErrorMsg) ? options === null || options === void 0 ? void 0 : options.abortErrorMsg : StandardAbortMessage));\n        };\n        const removeListeners = () => {\n            if ((options === null || options === void 0 ? void 0 : options.abortSignal) && onAborted) {\n                options.abortSignal.removeEventListener(\"abort\", onAborted);\n            }\n        };\n        onAborted = () => {\n            if (timer) {\n                clearTimeout(timer);\n            }\n            removeListeners();\n            return rejectOnAbort();\n        };\n        if ((options === null || options === void 0 ? void 0 : options.abortSignal) && options.abortSignal.aborted) {\n            return rejectOnAbort();\n        }\n        timer = setTimeout(() => {\n            removeListeners();\n            resolve(value);\n        }, delayInMs);\n        if (options === null || options === void 0 ? void 0 : options.abortSignal) {\n            options.abortSignal.addEventListener(\"abort\", onAborted);\n        }\n    });\n}\n/**\n * @internal\n * @returns the parsed value or undefined if the parsed value is invalid.\n */\nexport function parseHeaderValueAsNumber(response, headerName) {\n    const value = response.headers.get(headerName);\n    if (!value)\n        return;\n    const valueAsNum = Number(value);\n    if (Number.isNaN(valueAsNum))\n        return;\n    return valueAsNum;\n}\n"],"mappings":"AAAA;AACA;AACA,SAASA,UAAU,QAAQ,mCAAmC;AAC9D,MAAMC,oBAAoB,GAAG,4BAA4B;AACzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO,SAASC,KAAKA,CAACC,SAAS,EAAEC,KAAK,EAAEC,OAAO,EAAE;EAC7C,OAAO,IAAIC,OAAO,CAAC,CAACC,OAAO,EAAEC,MAAM,KAAK;IACpC,IAAIC,KAAK,GAAGC,SAAS;IACrB,IAAIC,SAAS,GAAGD,SAAS;IACzB,MAAME,aAAa,GAAGA,CAAA,KAAM;MACxB,OAAOJ,MAAM,CAAC,IAAIR,UAAU,CAAC,CAACK,OAAO,KAAK,IAAI,IAAIA,OAAO,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,OAAO,CAACQ,aAAa,IAAIR,OAAO,KAAK,IAAI,IAAIA,OAAO,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,OAAO,CAACQ,aAAa,GAAGZ,oBAAoB,CAAC,CAAC;IAC7M,CAAC;IACD,MAAMa,eAAe,GAAGA,CAAA,KAAM;MAC1B,IAAI,CAACT,OAAO,KAAK,IAAI,IAAIA,OAAO,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,OAAO,CAACU,WAAW,KAAKJ,SAAS,EAAE;QACtFN,OAAO,CAACU,WAAW,CAACC,mBAAmB,CAAC,OAAO,EAAEL,SAAS,CAAC;MAC/D;IACJ,CAAC;IACDA,SAAS,GAAGA,CAAA,KAAM;MACd,IAAIF,KAAK,EAAE;QACPQ,YAAY,CAACR,KAAK,CAAC;MACvB;MACAK,eAAe,CAAC,CAAC;MACjB,OAAOF,aAAa,CAAC,CAAC;IAC1B,CAAC;IACD,IAAI,CAACP,OAAO,KAAK,IAAI,IAAIA,OAAO,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,OAAO,CAACU,WAAW,KAAKV,OAAO,CAACU,WAAW,CAACG,OAAO,EAAE;MACxG,OAAON,aAAa,CAAC,CAAC;IAC1B;IACAH,KAAK,GAAGU,UAAU,CAAC,MAAM;MACrBL,eAAe,CAAC,CAAC;MACjBP,OAAO,CAACH,KAAK,CAAC;IAClB,CAAC,EAAED,SAAS,CAAC;IACb,IAAIE,OAAO,KAAK,IAAI,IAAIA,OAAO,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,OAAO,CAACU,WAAW,EAAE;MACvEV,OAAO,CAACU,WAAW,CAACK,gBAAgB,CAAC,OAAO,EAAET,SAAS,CAAC;IAC5D;EACJ,CAAC,CAAC;AACN;AACA;AACA;AACA;AACA;AACA,OAAO,SAASU,wBAAwBA,CAACC,QAAQ,EAAEC,UAAU,EAAE;EAC3D,MAAMnB,KAAK,GAAGkB,QAAQ,CAACE,OAAO,CAACC,GAAG,CAACF,UAAU,CAAC;EAC9C,IAAI,CAACnB,KAAK,EACN;EACJ,MAAMsB,UAAU,GAAGC,MAAM,CAACvB,KAAK,CAAC;EAChC,IAAIuB,MAAM,CAACC,KAAK,CAACF,UAAU,CAAC,EACxB;EACJ,OAAOA,UAAU;AACrB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}