{"ast":null,"code":"import { __awaiter as e } from \"../../../../node_modules/.pnpm/@rollup_plugin-typescript@11.1.6_rollup@4.24.4_tslib@2.6.3_typescript@4.9.5/node_modules/tslib/tslib.es6.js\";\nimport { getLogger as n, getApiVersionTag as r } from \"./telemetry.js\";\nimport { runtime as l } from \"../public/runtime.js\";\nimport { shouldEventBeRelayedToChild as a, sendMessageEventToChild as o } from \"./childCommunication.js\";\nimport { sendMessageToParent as t } from \"./communication.js\";\nimport { ensureInitialized as d } from \"./internalAPIs.js\";\nimport { initializeBackStackHelper as i } from \"./pagesHelpers.js\";\nimport { isNullOrUndefined as s } from \"./typeCheckUtilities.js\";\nconst u = n(\"handlers\");\nclass m {\n  static initializeHandlers() {\n    m.handlers.themeChange = C, m.handlers.load = O, m.handlers.beforeUnload = _, i();\n  }\n  static uninitializeHandlers() {\n    m.handlers = {}, m.themeChangeHandler = null, m.loadHandler = null, m.beforeUnloadHandler = null, m.beforeSuspendOrTerminateHandler = null, m.resumeHandler = null;\n  }\n}\nfunction f() {\n  m.initializeHandlers();\n}\nfunction c() {\n  m.uninitializeHandlers();\n}\nm.handlers = {}, m.themeChangeHandler = null, m.loadHandler = null, m.beforeUnloadHandler = null, m.beforeSuspendOrTerminateHandler = null, m.resumeHandler = null, m.hostToAppPerformanceMetricsHandler = null;\nconst H = u.extend(\"callHandler\");\nfunction h(e, n) {\n  const r = m.handlers[e];\n  if (r) {\n    H(\"Invoking the registered handler for message %s with arguments %o\", e, n);\n    return [!0, r.apply(this, n)];\n  }\n  return a() ? (o(e, n), [!1, void 0]) : (H(\"Handler for action message %s not found.\", e), [!1, void 0]);\n}\nfunction p(e, n, r, l = !0, a = []) {\n  r ? (m.handlers[n] = r, l && t(e, \"registerHandler\", [n, ...a])) : delete m.handlers[n];\n}\nfunction g(e) {\n  delete m.handlers[e];\n}\nfunction b(e) {\n  return null != m.handlers[e];\n}\nfunction U(e, n, r, a, o) {\n  r && d(l, ...a), o && o(), p(e, n, r);\n}\nfunction T(e, n) {\n  m.themeChangeHandler = n, !s(n) && t(e, \"registerHandler\", [\"themeChange\"]);\n}\nfunction C(e) {\n  m.themeChangeHandler && m.themeChangeHandler(e), a() && o(\"themeChange\", [e]);\n}\nfunction v(e) {\n  m.hostToAppPerformanceMetricsHandler = e;\n}\nfunction y(e) {\n  m.hostToAppPerformanceMetricsHandler && m.hostToAppPerformanceMetricsHandler(e);\n}\nfunction j(e, n) {\n  m.loadHandler = n, !s(n) && t(e, \"registerHandler\", [\"load\"]);\n}\nfunction O(e) {\n  const n = {\n    entityId: (r = e).entityId,\n    contentUrl: new URL(r.contentUrl)\n  };\n  var r;\n  m.resumeHandler ? (m.resumeHandler(n), a() && o(\"load\", [n])) : m.loadHandler && (m.loadHandler(e), a() && o(\"load\", [e]));\n}\nfunction S(e, n) {\n  m.beforeUnloadHandler = n, !s(n) && t(e, \"registerHandler\", [\"beforeUnload\"]);\n}\nfunction _() {\n  return e(this, void 0, void 0, function* () {\n    const e = () => {\n      t(r(\"v2\", \"handleBeforeUnload\"), \"readyToUnload\", []);\n    };\n    m.beforeSuspendOrTerminateHandler ? (yield m.beforeSuspendOrTerminateHandler(), a() ? o(\"beforeUnload\") : e()) : m.beforeUnloadHandler && m.beforeUnloadHandler(e) || (a() ? o(\"beforeUnload\") : e());\n  });\n}\nfunction A(e) {\n  m.beforeSuspendOrTerminateHandler = e, !s(e) && t(r(\"v2\", \"registerBeforeSuspendOrTerminateHandler\"), \"registerHandler\", [\"beforeUnload\"]);\n}\nfunction P(e) {\n  m.resumeHandler = e, !s(e) && t(r(\"v2\", \"registerOnResumeHandler\"), \"registerHandler\", [\"load\"]);\n}\nexport { h as callHandler, b as doesHandlerExist, y as handleHostToAppPerformanceMetrics, C as handleThemeChange, f as initializeHandlers, A as registerBeforeSuspendOrTerminateHandler, S as registerBeforeUnloadHandler, p as registerHandler, U as registerHandlerHelper, v as registerHostToAppPerformanceMetricsHandler, j as registerOnLoadHandler, P as registerOnResumeHandler, T as registerOnThemeChangeHandler, g as removeHandler, c as uninitializeHandlers };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}