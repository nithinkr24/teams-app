"use strict";var U0=(Xt,ft)=>(ft=Symbol[Xt])?ft:Symbol.for("Symbol."+Xt),DJ=function(Xt,ft){this[0]=Xt,this[1]=ft},gd=Xt=>{var je,ft=Xt[U0("asyncIterator")],Se=!1,nt={};return null==ft?(ft=Xt[U0("iterator")](),je=st=>nt[st]=Je=>ft[st](Je)):(ft=ft.call(Xt),je=st=>nt[st]=Je=>{if(Se){if(Se=!1,"throw"===st)throw Je;return Je}return Se=!0,{done:!1,value:new DJ(new Promise(ct=>{var Ue=ft[st](Je);if(!(Ue instanceof Object))throw TypeError("Object expected");ct(Ue)}),1)}}),nt[U0("iterator")]=()=>nt,je("next"),"throw"in ft?je("throw"):nt.throw=st=>{throw st},"return"in ft&&je("return"),nt};(self.webpackChunkbusiness_app_angular=self.webpackChunkbusiness_app_angular||[]).push([[792],{142:(Xt,ft,Se)=>{var je=Se(204),nt=Se(124),st=Se(114),Je=Se(458);function ct(Vt){return Vt&&"object"==typeof Vt&&"default"in Vt?Vt:{default:Vt}}var Ue=ct(je),se=ct(nt),pe=ct(st),yt=ct(Je),Ke=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Qe(Vt){return Vt&&Vt.__esModule&&Object.prototype.hasOwnProperty.call(Vt,"default")?Vt.default:Vt}function Be(Vt,Tt){return Vt(Tt={exports:{}},Tt.exports),Tt.exports}var _t=Be(function(Vt,Tt){Vt.exports=function(lt){function ke(De){if(de[De])return de[De].exports;var le=de[De]={i:De,l:!1,exports:{}};return lt[De].call(le.exports,le,le.exports,ke),le.l=!0,le.exports}var de={};return ke.m=lt,ke.c=de,ke.i=function(De){return De},ke.d=function(De,le,we){ke.o(De,le)||Object.defineProperty(De,le,{configurable:!1,enumerable:!0,get:we})},ke.n=function(De){var le=De&&De.__esModule?function(){return De.default}:function(){return De};return ke.d(le,"a",le),le},ke.o=function(De,le){return Object.prototype.hasOwnProperty.call(De,le)},ke.p="",ke(ke.s=1)}([function(lt,ke,de){Object.defineProperty(ke,"__esModule",{value:!0}),ke.Timespan=ke.toJson=ke.fetchWithTimeout=void 0,ke.fetchWithTimeout=function De(ye,Oe){var Y,K=new Promise(function(ie,oe){fetch(ye).then(function(F){void 0!==Y&&clearTimeout(Y),ie(F)}).catch(function(F){void 0!==Y&&clearTimeout(Y),oe(F)})});if(0!==Oe){var q=new Promise(function(ie,oe){Y=setTimeout(oe,Oe,new Error("Fetch for '".concat(ye.url,"' timed out")))});return Promise.race([K,q])}return K},ke.toJson=function le(ye){try{return JSON.stringify(ye)}catch(Oe){return"Unable to serialize object of type ".concat(typeof ye)}};var we=function(){function ye(){this.start=Date.now()}return Object.defineProperty(ye.prototype,"duration",{get:function(){return Date.now()-this.start},enumerable:!1,configurable:!0}),Object.defineProperty(ye.prototype,"startTime",{get:function(){return this.start},enumerable:!1,configurable:!0}),ye.prototype.reset=function(){this.start=Date.now()},ye}();ke.Timespan=we},function(lt,ke,de){var le=this&&this.__extends||function(){var F=function(z,J){return(F=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(fe,_e){fe.__proto__=_e}||function(fe,_e){for(var B in _e)Object.prototype.hasOwnProperty.call(_e,B)&&(fe[B]=_e[B])})(z,J)};return function(z,J){function fe(){this.constructor=z}if("function"!=typeof J&&null!==J)throw new TypeError("Class extends value "+String(J)+" is not a constructor or null");F(z,J),z.prototype=null===J?Object.create(J):(fe.prototype=J.prototype,new fe)}}(),we=this&&this.__assign||function(){return we=Object.assign||function(F){for(var z,J=1,fe=arguments.length;J<fe;J++)for(var _e in z=arguments[J])Object.prototype.hasOwnProperty.call(z,_e)&&(F[_e]=z[_e]);return F},we.apply(this,arguments)},ye=this&&this.__awaiter||function(F,z,J,fe){return new(J||(J=Promise))(function(B,W){function G(ee){try{Z(fe.next(ee))}catch(re){W(re)}}function ne(ee){try{Z(fe.throw(ee))}catch(re){W(re)}}function Z(ee){ee.done?B(ee.value):function _e(B){return B instanceof J?B:new J(function(W){W(B)})}(ee.value).then(G,ne)}Z((fe=fe.apply(F,z||[])).next())})},Oe=this&&this.__generator||function(F,z){function J(Z){return function(ee){return function fe(Z){if(_e)throw new TypeError("Generator is already executing.");for(;G&&(G=0,Z[0]&&(ne=0)),ne;)try{if(_e=1,B&&(W=2&Z[0]?B.return:Z[0]?B.throw||((W=B.return)&&W.call(B),0):B.next)&&!(W=W.call(B,Z[1])).done)return W;switch(B=0,W&&(Z=[2&Z[0],W.value]),Z[0]){case 0:case 1:W=Z;break;case 4:return ne.label++,{value:Z[1],done:!1};case 5:ne.label++,B=Z[1],Z=[0];continue;case 7:Z=ne.ops.pop(),ne.trys.pop();continue;default:if(!(W=(W=ne.trys).length>0&&W[W.length-1])&&(6===Z[0]||2===Z[0])){ne=0;continue}if(3===Z[0]&&(!W||Z[1]>W[0]&&Z[1]<W[3])){ne.label=Z[1];break}if(6===Z[0]&&ne.label<W[1]){ne.label=W[1],W=Z;break}if(W&&ne.label<W[2]){ne.label=W[2],ne.ops.push(Z);break}W[2]&&ne.ops.pop(),ne.trys.pop();continue}Z=z.call(F,ne)}catch(ee){Z=[6,ee],B=0}finally{_e=W=0}if(5&Z[0])throw Z[1];return{value:Z[0]?Z[1]:void 0,done:!0}}([Z,ee])}}var _e,B,W,G,ne={label:0,sent:function(){if(1&W[0])throw W[1];return W[1]},trys:[],ops:[]};return G={next:J(0),throw:J(1),return:J(2)},"function"==typeof Symbol&&(G[Symbol.iterator]=function(){return this}),G};Object.defineProperty(ke,"__esModule",{value:!0}),ke.createRegistrarClient=ke.RegistrarClient=void 0;var Y=de(0),K=["skype","aad","cae"],q=function(F){function z(J){var fe=F.call(this,J)||this;return fe.name="CancelationError",fe}return le(z,F),z}(Error),ie=function(){function F(z,J,fe){this.logger=z,this.maxBackoffInMs=J,this.initialDelay=fe,this.backoffCount=0,this.id=++F.idCounter}return F.prototype.delay=function(z){var J=this;if(void 0!==this.timerHandle)throw new Error("Retry sequence logical failure");if(-1===this.backoffCount)return new Promise(function(_e,B){B(new q("Cancelled"))});var fe=this.calculateNextBackoffMs();return this.backoffCount++,this.logger.info("[RegistrarClient] Backing off ".concat(z," for ").concat(fe," milliseconds with ID ").concat(this.id)),new Promise(function(_e,B){J.cancelFunc=B,J.timerHandle=setTimeout(function(){J.logger.info("[RegistrarClient] Back off for ".concat(z," with ID ").concat(J.id," complete")),J.timerHandle=void 0,_e()},fe)})},F.prototype.cancel=function(){void 0!==this.timerHandle&&(this.logger.debug("Resetting back off"),clearTimeout(this.timerHandle),void 0!==this.cancelFunc&&this.cancelFunc(new q("Cancelled"))),this.backoffCount=-1},F.prototype.calculateNextBackoffMs=function(){var z=1+.4*(Math.random()-.5),J=this.initialDelay*Math.pow(2,this.backoffCount)*z;return J=Math.round(J),Math.min(this.maxBackoffInMs,J)},F.idCounter=0,F}(),oe=function(){function F(z,J,fe){var _e;this.logger=z,this.tokenProvider=J,this.options=fe,this.DEFAULT_MAX_RETRIES_FOR_GET_TOKEN=15,this.DEFAULT_MAX_BACKOFF_TIME_IN_MS=3e5,this.backoffs={},this.maxBackOffTime=this.options.maxRetryDelayMs>0?this.options.maxRetryDelayMs:this.DEFAULT_MAX_BACKOFF_TIME_IN_MS,this.maxRetriesForGetToken=null==fe.maxRetriesForGetToken?this.DEFAULT_MAX_RETRIES_FOR_GET_TOKEN:fe.maxRetriesForGetToken,this.proxyUrlRewrite=null!==(_e=fe.proxyUrlRewrite)&&void 0!==_e?_e:function(B){return B}}return F.prototype.setTelemetryLogger=function(z){this.eventLogger=z},F.prototype.register=function(z,J){return ye(this,void 0,void 0,function(){return Oe(this,function(fe){switch(fe.label){case 0:return[4,this.performRegistration(z,J,"pr_set_registration")];case 1:return fe.sent(),this.cachedRegistrationParams=[z,J],[2]}})})},F.prototype.unregister=function(){return ye(this,void 0,void 0,function(){var z;return Oe(this,function(J){switch(J.label){case 0:return this.logger.info("[RegistrarClient] sending unregister request"),z=new Request(this.proxyUrlRewrite("".concat(this.options.registrarUrl,"/").concat(this.options.registrationId)),{method:"DELETE",mode:"cors",headers:new Headers(we(we({},this.options.extraRegistrationHeaders),{accept:"application/json, text/javascript"}))}),[4,this.callRegistrar(z,"pr_delete_registration")];case 1:return J.sent(),[2]}})})},F.prototype.cancelPendingRequests=function(){var z=this;Object.keys(this.backoffs).forEach(function(J){z.backoffs[J].cancel()}),this.backoffs={}},F.prototype.resendRegistration=function(){return ye(this,void 0,void 0,function(){return Oe(this,function(z){switch(z.label){case 0:if(!this.cachedRegistrationParams)throw new Error("Re-registration failed because there is no registration parameters cached");return[4,this.performRegistration(this.cachedRegistrationParams[0],this.cachedRegistrationParams[1],"pr_resend_registration")];case 1:return z.sent(),[2]}})})},F.prototype.performRegistration=function(z,J,fe){return ye(this,void 0,void 0,function(){var _e,B;return Oe(this,function(W){switch(W.label){case 0:return this.logger.info("[RegistrarClient] Sending register request"),_e={clientDescription:z,registrationId:this.options.registrationId,nodeId:"",transports:J},B=new Request(this.proxyUrlRewrite(this.options.registrarUrl),{method:"POST",mode:"cors",headers:new Headers(we(we({},this.options.extraRegistrationHeaders),{"content-type":"application/json",accept:"application/json, text/javascript"})),body:(0,Y.toJson)(_e)}),[4,this.callRegistrar(B,fe)];case 1:return W.sent(),[2]}})})},F.prototype.startBackoff=function(){var z=new ie(this.logger,this.maxBackOffTime,this.options.initialRetryDelayMs);return this.backoffs[z.id]=z,z},F.prototype.stopBackoff=function(z){z.cancel(),delete this.backoffs[z.id]},F.prototype.getToken=function(z){return ye(this,void 0,void 0,function(){var J,fe,_e,B,W,G,ne;return Oe(this,function(Z){switch(Z.label){case 0:J=this.startBackoff(),fe=0,Z.label=1;case 1:return Z.trys.push([1,3,,8]),this.logger.info("[RegistrarClient] Asking for a new token"),[4,this.tokenProvider({needFresh:!0,supportedTokenTypes:K,wwwAuthenticateHeader:z,purpose:"registrar"})];case 2:return _e=Z.sent(),this.stopBackoff(J),[2,_e];case 3:B=Z.sent(),Z.label=4;case 4:return Z.trys.push([4,6,,7]),fe++,W=JSON.stringify(B),fe>this.maxRetriesForGetToken?(G="[RegistrarClient] getToken retry limit hit. Will not retry now. Error: ".concat(W),this.logger.error(G),this.stopBackoff(J),[2,Promise.reject(G)]):(this.logger.warn("[RegistrarClient] Retrying for a new token. Retry Count: ".concat(fe," Error: ").concat(W)),[4,J.delay("Fetching a new token")]);case 5:return Z.sent(),[3,8];case 6:throw ne=Z.sent(),this.stopBackoff(J),ne;case 7:return[3,8];case 8:return[3,1];case 9:return[2]}})})},F.prototype.callRegistrar=function(z,J){var fe,_e,B;return ye(this,void 0,void 0,function(){var W,G,ne,Z,ee,re,We,Ge,qe,Ze,Wt,Gt,X,x,te,me;return Oe(this,function(ue){switch(ue.label){case 0:return W=this.startBackoff(),[4,this.tokenProvider({needFresh:!1,supportedTokenTypes:K,wwwAuthenticateHeader:void 0,purpose:"registrar"})];case 1:G=ue.sent(),this.setTokenHeader(z,G),ne=new Y.Timespan,Z=0,ue.label=2;case 2:ee=void 0,ue.label=3;case 3:return ue.trys.push([3,10,15,16]),re=z.clone(),[4,(0,Y.fetchWithTimeout)(re,this.options.requestTimeoutMs)];case 4:return 401!==(ee=ue.sent()).status?[3,8]:++Z>this.maxRetriesForGetToken?(We="[RegistrarClient] getSkypeToken retry limit hit. Will not retry now. Request '".concat(z.url,"' failed with ").concat(ee.status," ").concat(ee.statusText),this.logger.error(We),this.stopBackoff(W),[2,Promise.reject(We)]):(this.logger.warn("[RegistrarClient] Retry Count ".concat(Z,". Request '").concat(z.url,"' failed with ").concat(ee.status," ").concat(ee.statusText)),Ge=null!==(_e=null===(fe=ee.headers)||void 0===fe?void 0:fe.get("www-authenticate"))&&void 0!==_e?_e:void 0,qe=this.setTokenHeader,Ze=[z],[4,this.getToken(Ge)]);case 5:return qe.apply(this,Ze.concat([ue.sent()])),Z>1?[4,W.delay("Registrar call retry after 401")]:[3,7];case 6:ue.sent(),ue.label=7;case 7:return[3,22];case 8:if(ee.status>=500&&ee.status<600)throw new Error("Fetch for '".concat(z.url,"' failed with ").concat(ee.status," ").concat(ee.statusText));ue.label=9;case 9:return[3,16];case 10:Wt=ue.sent(),this.logger.error("[RegistrarClient] Request failed with ".concat(Wt)),ue.label=11;case 11:return ue.trys.push([11,13,,14]),[4,W.delay("Registrar call retry")];case 12:return ue.sent(),[3,22];case 13:throw Gt=ue.sent(),this.logger.error("[RegistrarClient] Request cancelled"),this.stopBackoff(W),Gt;case 14:return[3,16];case 15:return this.sendTelemetryEvent(J,z,ee,ne),[7];case 16:return this.stopBackoff(W),ee.ok?[2,ee]:[3,17];case 17:X=void 0,ue.label=18;case 18:return ue.trys.push([18,20,,21]),te=(x=JSON).stringify,[4,ee.json()];case 19:return X=te.apply(x,[ue.sent()]),[3,21];case 20:return ue.sent(),X="no details",[3,21];case 21:throw me="Fetch for '".concat(z.url,"' failed with ").concat(ee.status," ").concat(ee.statusText," (").concat(X,", MS-CV: ").concat(null===(B=ee.headers)||void 0===B?void 0:B.get("MS-CV"),")"),this.logger.error("[RegistrarClient] ".concat(me)),new Error(me);case 22:return[3,2];case 23:return[2]}})})},F.prototype.setTokenHeader=function(z,J){switch(z.headers.delete("X-Skypetoken"),z.headers.delete("Authorization"),z.headers.delete("X-MS-Migration"),J.tokenType.toLowerCase()){case"skype":z.headers.set("X-Skypetoken",J.token);break;case"aad":case"cae":z.headers.set("Authorization","Bearer ".concat(J.token));break;default:throw new Error("unsupported token type: ".concat(J.tokenType))}!1===this.options.usingLegacyTokenApi&&z.headers.set("X-MS-Migration","True")},F.prototype.sendTelemetryEvent=function(z,J,fe,_e){void 0!==this.eventLogger&&this.eventLogger.logEvent({name:z,properties:{url:{value:J.url},result_code:{value:void 0!==fe?fe.status:0},begin_timestamp:{value:_e.startTime},elapsed:{value:_e.duration}}})},F}();ke.RegistrarClient=oe,ke.createRegistrarClient=function De(F,z,J){return new oe(F,z,J)}}])});Qe(_t);var tt=Be(function(Vt,Tt){var lt;Vt.exports=(lt=_t,function(ke){function de(le){if(De[le])return De[le].exports;var we=De[le]={i:le,l:!1,exports:{}};return ke[le].call(we.exports,we,we.exports,de),we.l=!0,we.exports}var De={};return de.m=ke,de.c=De,de.i=function(le){return le},de.d=function(le,we,ye){de.o(le,we)||Object.defineProperty(le,we,{configurable:!1,enumerable:!0,get:ye})},de.n=function(le){var we=le&&le.__esModule?function(){return le.default}:function(){return le};return de.d(we,"a",we),we},de.o=function(le,we){return Object.prototype.hasOwnProperty.call(le,we)},de.p="",de(de.s=20)}([function(ke,de,De){Object.defineProperty(de,"__esModule",{value:!0}),de.Logger=void 0;var le=function(){function we(ye,Oe){this.name=ye,this.logger=Oe}return we.prototype.debug=function(ye){this.logger.debug("[".concat(this.name,"] ").concat(ye))},we.prototype.info=function(ye){this.logger.info("[".concat(this.name,"] ").concat(ye))},we.prototype.warn=function(ye){this.logger.warn("[".concat(this.name,"] ").concat(ye))},we.prototype.error=function(ye){this.logger.error("[".concat(this.name,"] ").concat(ye))},we}();de.Logger=le},function(ke,de,De){Object.defineProperty(de,"__esModule",{value:!0}),de.USER_AUTHENTICATE_EVENT_NAME=de.SUPPORTED_TOKEN_TYPES=de.FAILED_MESSAGE_ACK=de.UNHANDLED_MESSAGE_ACK=de.HANDLED_MESSAGE_ACK=de.CLIENT_VERSION=de.constants=void 0,de.constants={TROUTER_INIT:"trouterinit",TROUTER_READY_EVENT:"trouterReadyEvent",TROUTER_READY_TIMEOUT:"trouterReadyTimeout",TROUTER_TOKEN_REQUEST:"trouterTokenRequest",TROUTER_TOKEN_GET_SUCCEEDED:"trouterTokenGetSucceeded",TROUTER_TOKEN_GET_FAILED:"trouterTokenGetFailed",TROUTER_RECONNECTING:"trouterReconnecting",RENEWAL:"renewal",NEW_CONNECTION:"newConnection",ENDPOINT_REGISTRATION_FAILED:"endpointRegistrationFailed"},de.CLIENT_VERSION="2024.14.01.55",de.HANDLED_MESSAGE_ACK=200,de.UNHANDLED_MESSAGE_ACK=404,de.FAILED_MESSAGE_ACK=500,de.SUPPORTED_TOKEN_TYPES=["skype","aad","cae"],de.USER_AUTHENTICATE_EVENT_NAME="user.authenticate"},function(ke,de,De){var le,ye,we;Object.defineProperty(de,"__esModule",{value:!0}),de.TrouterState=de.UserActivityState=void 0,(ye=le||(de.UserActivityState=le={}))[ye.Unknown=0]="Unknown",ye[ye.Active=1]="Active",ye[ye.Inactive=2]="Inactive",function(ye){ye[ye.Unknown=0]="Unknown",ye[ye.Connected=2]="Connected",ye[ye.Disconnected=3]="Disconnected",ye[ye.Switching=9]="Switching"}(we||(de.TrouterState=we={}))},function(ke,de,De){var Y=this&&this.__awaiter||function(oe,F,z,J){return new(z||(z=Promise))(function(_e,B){function W(Z){try{ne(J.next(Z))}catch(ee){B(ee)}}function G(Z){try{ne(J.throw(Z))}catch(ee){B(ee)}}function ne(Z){Z.done?_e(Z.value):function fe(_e){return _e instanceof z?_e:new z(function(B){B(_e)})}(Z.value).then(W,G)}ne((J=J.apply(oe,F||[])).next())})},K=this&&this.__generator||function(oe,F){function z(ne){return function(Z){return function J(ne){if(fe)throw new TypeError("Generator is already executing.");for(;W&&(W=0,ne[0]&&(G=0)),G;)try{if(fe=1,_e&&(B=2&ne[0]?_e.return:ne[0]?_e.throw||((B=_e.return)&&B.call(_e),0):_e.next)&&!(B=B.call(_e,ne[1])).done)return B;switch(_e=0,B&&(ne=[2&ne[0],B.value]),ne[0]){case 0:case 1:B=ne;break;case 4:return G.label++,{value:ne[1],done:!1};case 5:G.label++,_e=ne[1],ne=[0];continue;case 7:ne=G.ops.pop(),G.trys.pop();continue;default:if(!(B=(B=G.trys).length>0&&B[B.length-1])&&(6===ne[0]||2===ne[0])){G=0;continue}if(3===ne[0]&&(!B||ne[1]>B[0]&&ne[1]<B[3])){G.label=ne[1];break}if(6===ne[0]&&G.label<B[1]){G.label=B[1],B=ne;break}if(B&&G.label<B[2]){G.label=B[2],G.ops.push(ne);break}B[2]&&G.ops.pop(),G.trys.pop();continue}ne=F.call(oe,G)}catch(Z){ne=[6,Z],_e=0}finally{fe=B=0}if(5&ne[0])throw ne[1];return{value:ne[0]?ne[1]:void 0,done:!0}}([ne,Z])}}var fe,_e,B,W,G={label:0,sent:function(){if(1&B[0])throw B[1];return B[1]},trys:[],ops:[]};return W={next:z(0),throw:z(1),return:z(2)},"function"==typeof Symbol&&(W[Symbol.iterator]=function(){return this}),W};Object.defineProperty(de,"__esModule",{value:!0}),de.Timespan=de.CorrelationVector=de.fetchWithTimeout=de.calculateExpireTsInSec=de.calculateTtlInSec=de.toJson=void 0,de.toJson=function le(oe){try{return JSON.stringify(oe)}catch(F){return"Unable to serialize object of type ".concat(typeof oe)}},de.calculateTtlInSec=function we(oe){var F=Math.round((new Date).getTime()/1e3);return void 0!==oe&&oe>F?oe-F:0},de.calculateExpireTsInSec=function ye(oe){return Math.round((new Date).getTime()/1e3)+oe},de.fetchWithTimeout=function Oe(oe,F){return Y(this,void 0,void 0,function(){var z,J,fe;return K(this,function(_e){return J=new Promise(function(B,W){fetch(oe).then(function(G){clearTimeout(z),B(G)}).catch(function(G){clearTimeout(z),W(G)})}),0!==F?(fe=new Promise(function(B,W){var G=new URL(oe.url),ne=new Error("".concat(oe.method," ").concat(G.origin).concat(G.pathname," timed out"));z=setTimeout(W,F,ne)}),[2,Promise.race([J,fe])]):[2,J]})})};var q=function(){function oe(F){this.base=void 0!==F?F:this.createCorrelationVectorBase(),this.extension=0}return oe.extend=function(F){return new oe(F)},oe.prototype.increase=function(){this.extension++},oe.prototype.value=function(){return"".concat(this.base,".").concat(this.extension)},oe.prototype.createCorrelationVectorBase=function(){for(var F="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0987654321/+",z="AQgw",J="",fe=0;fe<21;fe++)J+=F.charAt(Math.floor(64*Math.random()));return J+z.charAt(Math.floor(4*Math.random()))},oe}();de.CorrelationVector=q;var ie=function(){function oe(){this.start=Date.now()}return Object.defineProperty(oe.prototype,"duration",{get:function(){return Date.now()-this.start},enumerable:!1,configurable:!0}),Object.defineProperty(oe.prototype,"startTime",{get:function(){return this.start},enumerable:!1,configurable:!0}),oe.prototype.reset=function(){this.start=Date.now()},oe}();de.Timespan=ie},function(ke,de,De){Object.defineProperty(de,"__esModule",{value:!0}),de.TrouterManagerState=de.UserActivityEventReason=de.ServerState=void 0;var ye,Y,Oe,le=De(3),we=function(){function Y(K,q,ie,oe,F,z,J){this.connectionId=K,this.connectedClientId=q,this.domId=ie,this.unsecureUrl=oe,this.url=F,this.c2cUrlBase=z,this.expirationTsSec=J}return Y.prototype.getRemainingTtlInSec=function(){return(0,le.calculateTtlInSec)(this.expirationTsSec)},Y}();de.ServerState=we,(Y=ye||(de.UserActivityEventReason=ye={}))[Y.Unknown=0]="Unknown",Y[Y.Modified=1]="Modified",Y[Y.Snapshot=2]="Snapshot",Y[Y.Connected=3]="Connected",function(Y){Y[Y.Unknown=0]="Unknown",Y[Y.Connected=2]="Connected",Y[Y.Disconnected=3]="Disconnected",Y[Y.Switching=9]="Switching",Y[Y.TerminalError=10]="TerminalError"}(Oe||(de.TrouterManagerState=Oe={}))},function(ke,de,De){var oe=this&&this.__assign||function(){return oe=Object.assign||function(F){for(var z,J=1,fe=arguments.length;J<fe;J++)for(var _e in z=arguments[J])Object.prototype.hasOwnProperty.call(z,_e)&&(F[_e]=z[_e]);return F},oe.apply(this,arguments)};Object.defineProperty(de,"__esModule",{value:!0}),de.redirectUrlIfPresent=de.ensureNumber=de.reconnectParamsWithoutUrls=de.adaptUrl=de.isV4ConnectEvent=de.usedProtocolAfterFallback=de.usedProtocol=void 0,de.usedProtocol=function le(F,z){return"skype"===F&&"1"!==function we(F){return"string"==typeof F?F:"number"==typeof F?F.toString():void 0}(null==z?void 0:z.scae)?"v4a":"v4c"},de.usedProtocolAfterFallback=function ye(F,z){return"v4c-websocket-failure"===(null==z?void 0:z.kind)?"v4a":F},de.isV4ConnectEvent=function Oe(F){return Object.prototype.hasOwnProperty.call(F,"connectparams")},de.adaptUrl=function Y(F,z){return"v4a"===z?F.replace(/\/v4\/c\b/,"/v4/a").replace("wss://","https://").replace("ws://","http://"):F.replace(/\/v4\/a\b/,"/v4/c").replace("https://","wss://").replace("http://","ws://")},de.reconnectParamsWithoutUrls=function K(F){if(void 0!==F)return oe(oe({},F),{reconnectUrl:void 0,serviceUrl:void 0})},de.ensureNumber=function q(F){return"string"==typeof F?parseInt(F,10):F},de.redirectUrlIfPresent=function ie(F){if("redirect"===(null==F?void 0:F.kind)&&void 0!==F.host){var z=F.host;return z.endsWith("/")&&(z=z.substring(0,z.length-1)),z.endsWith("/v4/c")||z.endsWith("/v4/a")||(z+="/v4/c"),z}}},function(ke,de,De){Object.defineProperty(de,"__esModule",{value:!0}),de.TrouterFsm=de.State=void 0;var le,q,Y,we=De(4),ye=De(0),Oe=De(5);(q=le||(de.State=le={}))[q.Initial=0]="Initial",q[q.RetrievingToken=1]="RetrievingToken",q[q.Allocating=2]="Allocating",q[q.Handshaking=3]="Handshaking",q[q.Connecting=4]="Connecting",q[q.AnonymousConnecting=5]="AnonymousConnecting",q[q.WebsocketAuthenticating=6]="WebsocketAuthenticating",q[q.Connected=7]="Connected",q[q.Unregistering=8]="Unregistering",q[q.TerminalError=9]="TerminalError",function(q){q[q.Initial=0]="Initial",q[q.Registering=1]="Registering",q[q.RegisteringButResendPending=2]="RegisteringButResendPending",q[q.Retrying=3]="Retrying",q[q.Registered=4]="Registered",q[q.RegistrationDisabled=5]="RegistrationDisabled"}(Y||(Y={}));var K=function(){function q(ie,oe,F,z){this.worker=oe,this.incallModeEnabled=F,this.protocolSelector=z,this.state=le.Initial,this.autoReconnect=!0,this.logger=new ye.Logger("ConnectionFsm",ie),this.registrationState=Y.Initial}return q.prototype.getState=function(){return this.state},q.prototype.isActive=function(){return this.state===le.Allocating||this.state===le.Connected||this.state===le.Handshaking||this.state===le.Connecting||this.state===le.RetrievingToken||this.state===le.AnonymousConnecting||this.state===le.WebsocketAuthenticating},q.prototype.isConnecting=function(){return this.state===le.Allocating||this.state===le.Handshaking||this.state===le.Connecting||this.state===le.AnonymousConnecting},q.prototype.start=function(){return this.state===le.Initial?(this.setState(le.RetrievingToken),this.worker.getToken(!0,!1,void 0),!0):(this.showIgnored("start"),!1)},q.prototype.stop=function(ie,oe){ie&&(this.registrationState=Y.Initial),this.worker.isIncallMode()&&this.worker.exitIncallMode(),this.worker.resetTokenBackoff(),this.worker.cancelPendingRegistrationRequests(),this.worker.stopConnectionTimer(),this.worker.stopPingTimer(),this.worker.clearSentEventTimers(),this.worker.stopRegistrationTimer(),this.worker.stopSocketIo(),this.state===le.Connected&&this.worker.sendDisconnectTelemetryEvent("connection stopped"),this.registrationState!==Y.Registered&&this.registrationState!==Y.Registering&&this.registrationState!==Y.RegisteringButResendPending||this.state===le.Unregistering?oe?(this.setState(le.TerminalError),this.worker.dispatchTerminalError()):(this.setState(le.Initial),this.worker.dispatchDisconnected()):(this.registrationState=Y.Initial,this.setState(le.Unregistering),this.worker.sendUnregisterRequest())},q.prototype.onTokenReceived=function(ie,oe,F){this.state===le.RetrievingToken?"v4c"===(0,Oe.usedProtocolAfterFallback)(this.protocolSelector(ie.tokenType,F),oe)?(this.setState(le.AnonymousConnecting),this.worker.startConnectionTimer(),this.worker.connectV4c(ie,oe)):(this.setState(le.Allocating),this.worker.startConnectionTimer(),this.worker.sendAllocateRequest(ie)):this.showIgnored("onTokenReceived")},q.prototype.checkConnection=function(ie){ie&&this.onPingInterval()},q.prototype.onAllocationSucceed=function(ie){return this.state===le.Allocating&&this.registrationState===Y.Registered&&this.worker.dispatchUnregistered(),this.state===le.Allocating?(this.setState(le.Handshaking),this.registrationState=Y.Initial,this.worker.startSocketIo(ie),!0):(this.showIgnored("onAllocationSucceed"),!1)},q.prototype.onAllocationFailed=function(ie,oe){this.state===le.Allocating?this.cleanUpAndInitiateReconnect({backoff:!0,allowCachedToken:!ie,claimsChallenge:oe}):this.showIgnored("onAllocationFailed")},q.prototype.onV4cException=function(){this.state!==le.AnonymousConnecting&&this.state!==le.WebsocketAuthenticating||(this.logger.error("v4c exception, falling back to longpoll"),this.cleanUpAndInitiateReconnect({backoff:!0,allowCachedToken:!0,fallbackReason:{kind:"v4c-websocket-failure"}}))},q.prototype.onConnectingTimeout=function(){this.state===le.Allocating||this.state===le.Connecting||this.state===le.Handshaking||this.state===le.AnonymousConnecting||this.state===le.WebsocketAuthenticating?this.cleanUpAndInitiateReconnect({backoff:!1,allowCachedToken:!0}):this.showIgnored("onConnectingTimeout")},q.prototype.onConnecting=function(){this.state===le.Handshaking?this.setState(le.Connecting):this.showIgnored("onConnecting")},q.prototype.onSocketConnect=function(ie){this.state===le.AnonymousConnecting?(this.setState(le.WebsocketAuthenticating),this.worker.sendV4cAuthenticationEvent(ie)):this.showIgnored("onSocketConnect")},q.prototype.onConnectingFailed=function(){this.state===le.Connecting?this.onConnectingTimeout():this.state===le.Handshaking?(this.logger.error("Unexpected error in Socket.io - no valid transports"),this.onConnectingTimeout()):this.state===le.AnonymousConnecting||this.state===le.WebsocketAuthenticating?(this.logger.info("/v4/c falling back to longpoll"),this.cleanUpAndInitiateReconnect({backoff:!0,allowCachedToken:!0,fallbackReason:{kind:"v4c-websocket-failure"}})):this.showIgnored("onConnectingFailed")},q.prototype.onSocketDisconnect=function(ie){this.state===le.Handshaking||this.state===le.Connected||this.state===le.WebsocketAuthenticating?(this.state===le.Connected&&this.worker.sendDisconnectTelemetryEvent(null==ie?void 0:ie.toTelemetryString()),this.state===le.WebsocketAuthenticating&&this.worker.countDisconnectBeforeConnectionEstablishment(),"skypetoken-deprecated"===(null==ie?void 0:ie.reason)?(this.logger.error("Skypetoken deprecated response, not retrying any further"),this.onTerminalError()):this.cleanUpAndInitiateReconnect({backoff:this.state!==le.Connected&&"dup"!==(null==ie?void 0:ie.reason),allowCachedToken:"unauthorized"!==(null==ie?void 0:ie.reason),claimsChallenge:null==ie?void 0:ie.claims})):this.showIgnored("onSocketDisconnect")},q.prototype.onTrouterConnected=function(){this.state===le.Connecting||this.state===le.WebsocketAuthenticating?(this.setState(le.Connected),this.worker.resetTokenBackoff(),this.worker.stopConnectionTimer(),this.worker.sendUserActivityState(we.UserActivityEventReason.Connected,!0),this.worker.startPingTimer(),this.worker.dispatchConnected(),this.worker.shouldSkipRegistration()?(this.registrationState=Y.RegistrationDisabled,this.worker.dispatchRegistered()):(this.registrationState=Y.Registering,this.worker.sendRegisterRequest())):this.showIgnored("onTrouterConnected")},q.prototype.onReconnectRequired=function(ie,oe,F){this.state===le.AnonymousConnecting||this.state===le.WebsocketAuthenticating?void 0===F||"host"!==F.target||void 0===F.url||""===F.url?(this.logger.error("unexpected reconnect arguments: ".concat(null==F?void 0:F.target," ").concat(null==F?void 0:F.url,", reconnecting without cache")),this.cleanUpAndInitiateReconnect({backoff:!0,allowCachedToken:!0,fallbackReason:{kind:"redirect-no-host"}})):this.cleanUpAndInitiateReconnect({backoff:!0,allowCachedToken:!0,fallbackReason:{kind:"redirect",host:F.url}}):this.worker.dispatchReconnectIsRequired(ie,oe)},q.prototype.disableAutoReconnect=function(){this.autoReconnect=!1},q.prototype.onDownstreamRequest=function(ie){this.state===le.Connected?(this.switchToIncallModeIfEnabled(),this.worker.dispatchDownstreamRequest(ie)):this.showIgnored("onDownstreamRequest")},q.prototype.onTrouterMessageLost=function(ie){this.state===le.Connected?this.worker.dispatchTrouterMessageLost(ie):this.showIgnored("onTrouterMessageLost")},q.prototype.onPingInterval=function(){this.state===le.Connected?this.worker.sendPingRequest():this.showIgnored("onPingInterval")},q.prototype.onPingResponseTimeout=function(){this.onMissedResponse("onPingResponseTimeout")},q.prototype.onPingResponse=function(){this.state===le.Connected||this.showIgnored("onPingResponse")},q.prototype.onRegistrationFailed=function(){this.state===le.Connected&&this.registrationState===Y.Registering?(this.worker.dispatchUnregistered(),this.registrationState=Y.Retrying,this.worker.startRegistrationRetryTimer()):this.state===le.Connected&&this.registrationState===Y.RegisteringButResendPending?(this.registrationState=Y.Registering,this.worker.sendRegisterRequest()):this.showIgnored("onRegistrationFailed")},q.prototype.onRetryRegistration=function(){this.state===le.Connected&&this.registrationState===Y.Retrying?(this.registrationState=Y.Registering,this.worker.sendRegisterRequest()):this.showIgnored("onRetryRegistration")},q.prototype.onRegistrationSucceeded=function(){this.state===le.Connected&&this.registrationState===Y.Registering?(this.registrationState=Y.Registered,this.worker.dispatchRegistered(),this.worker.startRegistrationTimer()):this.state===le.Connected&&this.registrationState===Y.RegisteringButResendPending?(this.registrationState=Y.Registering,this.worker.sendRegisterRequest()):this.showIgnored("onRegistrationSucceeded")},q.prototype.onRegistrationNearExpiry=function(){this.state===le.Connected&&this.registrationState===Y.Registered?(this.registrationState=Y.Registering,this.worker.sendRegisterRequest()):this.showIgnored("onRegistrationNearExpiry")},q.prototype.onUnregistrationDone=function(){this.state===le.Unregistering?(this.setState(le.Initial),this.worker.dispatchUnregistered(),this.worker.dispatchDisconnected()):this.showIgnored("onUnregistrationDone")},q.prototype.onResendRegistration=function(){this.worker.dispatchUnregistered(),this.state===le.Connected&&this.registrationState===Y.Registered?(this.registrationState=Y.Registering,this.worker.stopRegistrationTimer(),this.worker.sendRegisterRequest()):this.state===le.Connected&&this.registrationState===Y.Registering&&(this.registrationState=Y.RegisteringButResendPending)},q.prototype.onIncallModeTimer=function(){this.worker.exitIncallMode(),this.state===le.Connected?(this.worker.stopPingTimer(),this.worker.startPingTimer()):this.showIgnored("onIncallModeTimer")},q.prototype.onSetNewUserActivityState=function(){this.worker.sendUserActivityState(we.UserActivityEventReason.Modified,this.state===le.Connected)},q.prototype.onActivityStateResponseTimeout=function(){this.onMissedResponse("onActivityStateResponseTimeout")},q.prototype.forceReconnect=function(ie){this.state===le.Connected&&this.worker.sendDisconnectTelemetryEvent(ie),this.worker.resetTokenBackoff(),this.cleanUpAndInitiateReconnect({backoff:!1,allowCachedToken:!0})},q.prototype.onTerminalError=function(){this.logger.error("Cannot proceed, reached terminal state. Switching from state '".concat(le[this.state],"' to ").concat(le[le.TerminalError])),this.stop(!0,!0),this.setState(le.TerminalError)},q.prototype.onMissedResponse=function(ie){this.state===le.Connected?(this.worker.sendDisconnectTelemetryEvent(ie),this.cleanUpAndInitiateReconnect({backoff:!1,allowCachedToken:!0})):this.showIgnored(ie)},q.prototype.showIgnored=function(ie){this.logger.debug("Ignoring event '".concat(ie,"' in state '").concat(le[this.state],"'"))},q.prototype.setState=function(ie){this.logger.info("Switching from state '".concat(le[this.state],"' to state '").concat(le[ie],"'")),this.state!==ie?this.state=ie:this.logger.error("Attempt to switch to the current state '".concat(le[ie],"'"))},q.prototype.switchToIncallModeIfEnabled=function(){this.incallModeEnabled&&(this.worker.isIncallMode()||(this.worker.enterIncallMode(),this.worker.stopPingTimer(),this.worker.startPingTimer()),this.worker.restartIncallModeTimer())},q.prototype.cleanUpAndInitiateReconnect=function(ie){if(!this.autoReconnect)return this.logger.info("Automatic reconnect is disabled, stopping this connection"),void this.stop(!0);this.worker.cancelPendingRegistrationRequests(),this.worker.stopConnectionTimer(),this.worker.stopPingTimer(),this.worker.clearSentEventTimers(),this.worker.stopRegistrationTimer(),this.worker.stopSocketIo(),this.setState(le.RetrievingToken),this.worker.dispatchReconnecting(),this.worker.getToken(ie.allowCachedToken,ie.backoff,ie.claimsChallenge,ie.fallbackReason)},q}();de.TrouterFsm=K},function(ke,de,De){function le(X,x){var te=x?void 0:{"X-MS-Migration":"True"};switch(X.tokenType.toLowerCase()){case"skype":return Y({"X-Skypetoken":X.token},te);case"aad":case"cae":return Y({Authorization:"Bearer ".concat(X.token)},te);default:throw new Error("unsupported token type: ".concat(X.tokenType))}}function ye(X){return"object"==typeof X&&null!==X&&void 0!==X.stack?(0,F.toJson)(X.stack):'"(no error.stack)"'}function Oe(X){return"object"==typeof X&&null!==X&&"string"==typeof X.message?X.message:"(no error.message)"}var Y=this&&this.__assign||function(){return Y=Object.assign||function(X){for(var x,te=1,me=arguments.length;te<me;te++)for(var ue in x=arguments[te])Object.prototype.hasOwnProperty.call(x,ue)&&(X[ue]=x[ue]);return X},Y.apply(this,arguments)},K=this&&this.__awaiter||function(X,x,te,me){return new(te||(te=Promise))(function(be,Le){function Pt(Ht){try{Ct(me.next(Ht))}catch(_n){Le(_n)}}function Et(Ht){try{Ct(me.throw(Ht))}catch(_n){Le(_n)}}function Ct(Ht){Ht.done?be(Ht.value):function ue(be){return be instanceof te?be:new te(function(Le){Le(be)})}(Ht.value).then(Pt,Et)}Ct((me=me.apply(X,x||[])).next())})},q=this&&this.__generator||function(X,x){function te(Ct){return function(Ht){return function me(Ct){if(ue)throw new TypeError("Generator is already executing.");for(;Pt&&(Pt=0,Ct[0]&&(Et=0)),Et;)try{if(ue=1,be&&(Le=2&Ct[0]?be.return:Ct[0]?be.throw||((Le=be.return)&&Le.call(be),0):be.next)&&!(Le=Le.call(be,Ct[1])).done)return Le;switch(be=0,Le&&(Ct=[2&Ct[0],Le.value]),Ct[0]){case 0:case 1:Le=Ct;break;case 4:return Et.label++,{value:Ct[1],done:!1};case 5:Et.label++,be=Ct[1],Ct=[0];continue;case 7:Ct=Et.ops.pop(),Et.trys.pop();continue;default:if(!(Le=(Le=Et.trys).length>0&&Le[Le.length-1])&&(6===Ct[0]||2===Ct[0])){Et=0;continue}if(3===Ct[0]&&(!Le||Ct[1]>Le[0]&&Ct[1]<Le[3])){Et.label=Ct[1];break}if(6===Ct[0]&&Et.label<Le[1]){Et.label=Le[1],Le=Ct;break}if(Le&&Et.label<Le[2]){Et.label=Le[2],Et.ops.push(Ct);break}Le[2]&&Et.ops.pop(),Et.trys.pop();continue}Ct=x.call(X,Et)}catch(Ht){Ct=[6,Ht],be=0}finally{ue=Le=0}if(5&Ct[0])throw Ct[1];return{value:Ct[0]?Ct[1]:void 0,done:!0}}([Ct,Ht])}}var ue,be,Le,Pt,Et={label:0,sent:function(){if(1&Le[0])throw Le[1];return Le[1]},trys:[],ops:[]};return Pt={next:te(0),throw:te(1),return:te(2)},"function"==typeof Symbol&&(Pt[Symbol.iterator]=function(){return this}),Pt};Object.defineProperty(de,"__esModule",{value:!0}),de.TrouterConnection=de.ReconnectReason=void 0;var ie,X,oe=De(21),F=De(3),z=De(15),J=De(1),fe=De(16),_e=De(17),B=De(2),W=De(4),G=De(0),ne=De(5),Z=De(6),ee=De(12),re=function(){return function X(){this.cv=J.CLIENT_VERSION,this.ua="",this.hr="",this.v=""}}(),We=function(){function X(){this["force new connection"]=!0,this.reconnect=!1,this.query="",this.ackTimeoutMs=5e3}return X.prototype.rewriteUrlForProxy=function(x){return x},X}(),Ge="MS-CV",qe=function(){function X(x,te){this.logger=te,this.cvCounter=0;var me=JSON.parse(x);this.startTS=this.safeJsonNumber(me,"startTS",0),this.url=this.safeJsonString(me,"url",""),this.shortUrl=this.safeJsonString(me,"shortUrl",""),this.body=this.safeJsonString(me,"body",""),this.headers=this.safeJsonRecord(me,"headers",{}),this.id=this.safeJsonNumber(me,"id",-1),this.method=this.safeJsonString(me,"method",""),this.replied=!1,this.timedout=!1,this.receivedCv=this.headers[Ge],this.updateCvHeader()}return Object.defineProperty(X.prototype,"correlationVector",{get:function(){return this.receivedCv?"".concat(this.receivedCv,".").concat(this.cvCounter):""},enumerable:!1,configurable:!0}),X.prototype.on=function(x,te){"data"===x?this.dataCallback=te:"end"===x&&("function"==typeof this.dataCallback&&this.dataCallback(this.body),te())},X.prototype.incrementCorrelationVector=function(){++this.cvCounter,this.updateCvHeader()},X.prototype.updateCvHeader=function(){var x=this.correlationVector;x&&(this.headers[Ge]=x)},X.prototype.safeJsonNumber=function(x,te,me){var ue;if(null!=x&&Object.prototype.hasOwnProperty.call(x,te)){var be=x;if("number"==typeof be[te])return be[te];if("string"==typeof be[te])return parseFloat(be[te]);null===(ue=this.logger)||void 0===ue||ue.warn("unexpected type of '".concat(te,"': ").concat(typeof be[te]))}return me},X.prototype.safeJsonString=function(x,te,me){var ue;if(null!=x&&Object.prototype.hasOwnProperty.call(x,te)){var be=x;if("string"==typeof be[te])return be[te];null===(ue=this.logger)||void 0===ue||ue.warn("unexpected type of '".concat(te,"': ").concat(typeof be[te]))}return me},X.prototype.safeJsonRecord=function(x,te,me){var ue;if(null!=x&&Object.prototype.hasOwnProperty.call(x,te)){var be=x;if("object"==typeof be[te])return be[te];null===(ue=this.logger)||void 0===ue||ue.warn("unexpected type of '".concat(te,"': ").concat(typeof be[te]))}return me},X}(),Ze=function(){function X(x,te,me){this.request=x,this.responseData=te,this.sendResponse=me}return X.prototype.writeHead=function(x,te){this.responseData.status=x,this.responseData.headers=te},X.prototype.write=function(x){this.responseData.body+=x},X.prototype.end=function(x){return x&&(this.responseData.body+=x),this.sendResponse(this.request,this.responseData)},X}(),Wt=function(){return function X(x){this.name=x,this.args={},this.timeoutTimerId=0}}();(X=ie||(de.ReconnectReason=ie={}))[X.Configuration=0]="Configuration",X[X.ServerInitiated=1]="ServerInitiated";var Gt=function(){function X(x,te,me,ue,be,Le,Pt,Et){var Ct,Ht=this;this.options=te,this.manager=me,this.tokenProvider=ue,this.usingLegacyTokenApi=be,this.protocolSelector=Pt,this.audienceSubscriptionState=Et,this.WEBSOCKET_TRANSPORT_NAME="websocket",this.XHR_POLLING_TRANSPORT_NAME="xhr-polling",this.AUDIENCE_SUBSCRIPTION_RESULT_ERROR="Error",this.AUDIENCE_SUBSCRIPTION_RESULT_UNSUBSCRIBED="Unsubscribed",this.AUDIENCE_SUBSCRIPTION_RESULT_TIMEOUT="Timeout",this.AUDIENCE_SUBSCRIPTION_RESULT_BAD_REQUEST="BadRequest",this.AUDIENCE_SUBSCRIPTION_STATE_QUERY_PARAM_REGEX=/&audienceSubscriptionState=[^&]*|^audienceSubscriptionState=[^&]*&?/,this.connectionId="",this.inIncallMode=!1,this.connectionAttempt=0,this.connectedClientId="",this.isNavigatorOnline=!0,this.onNavigatorOnlineStatusUpdateBound=this.onNavigatorOnlineStatusUpdate.bind(this),this.c2cUrlBase="",this.connectingErrorsInRow=0,this.unauthorizedErrorCount=0,this.pendingSentEventTimers={},this.lastDisconnectReason="",this.UNKNOWN_TRANSPORT="unknown_transport",this.connectingErrorsThreshold=3,this.pendingAudienceSubscription=void 0,this.logger=new G.Logger("Connection",x),this.timeoutOptions=this.options.timeoutOptions,this.tokenBackoff=new _e.ExponentialBackoff(this.logger,this.timeoutOptions.maxBackoffMs),this.clientID=Date.now(),typeof window<"u"&&window.location&&(this.domId=window.location.hostname);var _n=new re;_n.cv=J.CLIENT_VERSION,_n.ua="",!(null===(Ct=this.options)||void 0===Ct)&&Ct.clientInfo&&(_n.ua=this.safeString(this.options.clientInfo.ua),_n.v=this.safeString(this.options.clientInfo.v)),this.clientInfo=_n,this.connectionTracker=new z.ConnectionTracker(x,this.clientID,this.clientInfo,function(){return Ht.getServerState()},this.options.endpointId,this.options.clientCorrelationID,this.options.environment),this.applyConnectionTrackerOptions(te),this.fsm=new Z.TrouterFsm(x,this,this.options.incallModeTimeoutMs>0,this.protocolSelector),te.registration&&(this.registrarClient=(0,oe.createRegistrarClient)(x,this.tokenProvider,{registrarUrl:te.registration.registrarUrl,proxyUrlRewrite:te.rewriteUrlForProxy,registrationId:te.registration.registrationId,requestTimeoutMs:te.timeoutOptions.fetchTimeoutMs,initialRetryDelayMs:1e3,maxRetryDelayMs:te.timeoutOptions.maxBackoffMs,usingLegacyTokenApi:this.usingLegacyTokenApi,maxRetriesForGetToken:te.retryLimitOnTokenFetch,extraRegistrationHeaders:te.extraConnectionHeaders})),this.userActivityState=Le}return X.prototype.start=function(x){this.logger.info("Starting"),this.reconnectParams=x,typeof window<"u"&&window.navigator&&window.addEventListener?(this.isNavigatorOnline=window.navigator.onLine,window.addEventListener("online",this.onNavigatorOnlineStatusUpdateBound),window.addEventListener("offline",this.onNavigatorOnlineStatusUpdateBound),this.logger.debug("Registered for browser online notifications - current state: ".concat(this.isNavigatorOnline))):this.isNavigatorOnline=!0,this.fsm.start()},X.prototype.stop=function(x){this.logger.info("Stopping"),typeof window<"u"&&window.navigator&&(window.removeEventListener("online",this.onNavigatorOnlineStatusUpdateBound),window.removeEventListener("offline",this.onNavigatorOnlineStatusUpdateBound)),this.fsm.stop(x),this.connectionTracker.close()},X.prototype.configure=function(x){var te=this.options.trouterUrl!==x.trouterUrl;this.options=x,this.applyConnectionTrackerOptions(x),te&&(this.logger.info("Configuration changed. Reconnection required."),this.fsm.onReconnectRequired(!1,ie.Configuration))},X.prototype.checkConnection=function(x){this.logger.info("checkConnection called with ".concat(x)),this.fsm.checkConnection(x),x&&this.connectionTracker.sendTelemetry(z.ClientEventName.CheckConnection,{disconnectDetected:x},[])},X.prototype.disableRegistrationsAndAutoReconnect=function(){this.stopRegistrationTimer(),this.cancelPendingRegistrationRequests(),this.fsm.disableAutoReconnect()},X.prototype.getServerState=function(){return new W.ServerState(this.connectionId,this.connectedClientId,this.domId?this.domId:"",this.allocateResult?this.allocateResult.url:"",this.allocateResult?this.allocateResult.surl:"",this.c2cUrlBase,this.connectionExpireTimestampInSecs)},X.prototype.getState=function(){return this.fsm.getState()},X.prototype.getToken=function(x,te,me,ue,be){var Le=this;void 0===be&&(be=0),this.logger.info("Getting token ".concat(te?"with backoff":"without backoff"));var Pt=function(){Le.connectionTracker.trackStart("token");var Et={needFresh:!x,wwwAuthenticateHeader:me,supportedTokenTypes:J.SUPPORTED_TOKEN_TYPES,purpose:"trouter"};Le.logger.info("Requesting token: needFresh=".concat(Et.needFresh," ")+"types=[".concat(J.SUPPORTED_TOKEN_TYPES,"], ")+"wwwAuthenticateHeader is ".concat(Et.wwwAuthenticateHeader?"non empty":"empty")),Le.tokenProvider(Et).then(function(Ct){Le.logger.debug("".concat(Ct.tokenType," token is received")),Le.connectionTracker.trackEnd("token"),Le.fsm.onTokenReceived(Ct,ue,Le.reconnectParams)}).catch(function(Ct){var Ht=(0,F.toJson)(Ct.stack);if(Le.logger.error("Getting token failed, will retry after timeout. Error: ".concat(Ht)),Le.connectionTracker.trackError("token",Ht),!Le.canRetryTokenFetchRequest(be+Le.unauthorizedErrorCount))return Le.connectionTracker.trackError("token","getToken retry limit hit, reached terminal error state"),Le.resetTokenBackoff(),void Le.fsm.onTerminalError();Le.getToken(x,!0,me,ue,be+1)})};te?this.tokenBackoff.backoff("getting token",Pt):(this.resetTokenBackoff(),Pt())},X.prototype.startConnectionTimer=function(){var x=this;this.stopConnectionTimer(),this.logger.debug("Starting connection timeout for ".concat(this.timeoutOptions.connectionTimeoutMs," ms")),this.connectionTimeoutId=setTimeout(function(){x.logger.info("Connection timeout is fired"),x.fsm.onConnectingTimeout()},this.timeoutOptions.connectionTimeoutMs)},X.prototype.stopConnectionTimer=function(){this.connectionTimeoutId&&(this.logger.debug("Stopping connection timeout"),clearTimeout(this.connectionTimeoutId),this.connectionTimeoutId=void 0)},X.prototype.startPingTimer=function(){var x=this;"websocket"===this.transportTypeName?(this.logger.debug("Starting ping timeout for ".concat(this.timeoutOptions.pingTimeoutMs," ms")),this.pingTimerId=setInterval(function(){x.logger.info("Ping interval fired"),x.fsm.onPingInterval()},this.timeoutOptions.pingTimeoutMs)):this.logger.debug("Not starting ping for transport ".concat(this.transportTypeName))},X.prototype.stopPingTimer=function(){this.pingTimerId&&(this.logger.debug("Stopping ping timeout"),this.clearPingResponseTimer(),clearInterval(this.pingTimerId),this.pingTimerId=void 0)},X.prototype.shouldSkipRegistration=function(){return void 0===this.options.registration},X.prototype.hasCustomRegistrationTtl=function(){var x,te;return void 0!==(null===(x=this.options.registration)||void 0===x?void 0:x.registrarTtlSec)&&0!==(null===(te=this.options.registration)||void 0===te?void 0:te.registrarTtlSec)},X.prototype.startRegistrationTimer=function(){var x=this;this.stopRegistrationTimer();var te=this.getRegistrationTtl(),me=te[0];if(me<=30||!te[1])return this.logger.debug("Starting registration expiration timer (TTL ".concat(me," sec)")),void(this.registrationTimerId=setTimeout(function(){x.registrationTimerId=void 0,x.logger.warn("Registration expired but the connection is still alive. Should never happen"),x.dispatchUnregistered()},1e3*me));var be=me-30;this.logger.debug("Starting registration extension timer for ".concat(be," sec")),this.registrationTimerId=setTimeout(function(){x.logger.info("Registration extension timer fired"),x.registrationTimerId=setTimeout(function(){x.registrationTimerId=void 0,x.logger.debug("Registration extension did not happen in time"),x.dispatchUnregistered()},3e4),x.fsm.onRegistrationNearExpiry()},1e3*be)},X.prototype.startRegistrationRetryTimer=function(){var x=this;this.stopRegistrationTimer(),this.registrationTimerId=setTimeout(function(){x.registrationTimerId=void 0,x.fsm.onRetryRegistration()},123e3)},X.prototype.stopRegistrationTimer=function(){this.registrationTimerId&&(this.logger.debug("Stopping registration timeout"),clearTimeout(this.registrationTimerId),this.registrationTimerId=void 0)},X.prototype.resendRegistration=function(){if(!this.registrarClient)throw new Error("Trouter Client not configured to handle registrations");return this.fsm.onResendRegistration(),Promise.resolve()},X.prototype.buildSocketIoUrlParams=function(x,te){if(!this.allocateResult)throw new Error("Allocate result is undefined in buildSocketIoUrlParams()");for(var me={},ue=this.allocateResult.connectparams,be=0,Le=Object.keys(ue);be<Le.length;be++){var Pt=Le[be];if(void 0!==ue[Pt]){var Et=ue[Pt];"string"==typeof Et||"number"==typeof Et?me[Pt]=Et:this.logger.error("signatureData[".concat(Pt,"] has unsupported type ").concat(typeof Et))}}return me.v="v4",me.tc=encodeURI((0,F.toJson)(this.clientInfo)),me.timeout=this.timeoutOptions.pingTimeoutMs/1e3,me.auth="true",this.options.endpointId&&(me.epid=this.options.endpointId),x&&(me.userActivity=encodeURI((0,F.toJson)(x))),te&&(me.audienceSubscriptionState=encodeURIComponent((0,F.toJson)(te))),this.appendConnectedClientIds(this.buildQuery(me),!0)},X.prototype.startSocketIo=function(x){var te,me;if(this.logger.debug("Starting socket io"),this.connectionTracker.trackStart("connectSocket"),!this.allocateResult)throw new Error("Allocate result is undefined in startSocketIo()");var ue=this.options.ioOptions?Y({},this.options.ioOptions):new We,be=this.userActivityState.state!==B.UserActivityState.Unknown?this.userActivityState.increaseCvAndGetEventObject():void 0,Le=null===(te=this.audienceSubscriptionState)||void 0===te?void 0:te.increaseCvAndGetEventObject();if(ue["force new connection"]=!0,ue.reconnect=!1,ue.rewriteUrlForProxy=this.options.rewriteUrlForProxy,ue.requestHeaders=Y(Y({},this.options.extraConnectionHeaders),le(x,this.usingLegacyTokenApi)),ue.query=this.buildSocketIoUrlParams(be,Le),this.logger.info("connecting to ".concat(this.allocateResult.socketio,"?").concat(ue.query)),this.stopSocketIo(),this.socket=(null!==(me=this.options.io)&&void 0!==me?me:ee).connect(this.allocateResult.socketio,ue),void 0===this.socket)throw new Error("Can't create Socket.io object");this.attachSocketIoHandlers(this.socket,x,be,Le)},X.prototype.stopSocketIo=function(){if(this.socket){this.logger.debug("clearing socket.io");try{for(var x=0,te=["connecting","connect","connect_failed","close_during_connecting","disconnect","reconnect","reconnect_failed","reconnecting","error","message","trouter.connected","trouter.reconnect","trouter.message_loss"];x<te.length;x++)this.socket.removeAllListeners(te[x]);this.socket.disconnect(),this.logger.debug("cleared socket"),this.socket=void 0}catch(ue){this.logger.error("exception in disconnecting previous socket. Error: ".concat(ye(ue)))}}},X.prototype.dispatchConnected=function(){this.logger.info("dispatching connected"),this.manager.onConnected(this)},X.prototype.dispatchRegistered=function(){this.logger.info("dispatching registered"),this.manager.onRegistered(this)},X.prototype.dispatchUnregistered=function(){this.logger.info("dispatching unregistered"),this.manager.onUnregistered(this)},X.prototype.dispatchDownstreamRequest=function(x){var te=this;this.logger.debug("dispatching downstream request");try{var me=new Ze(x,new z.ResponseData(x.id),function(ue,be){return te.logger.debug("sending response to downstream"),te.sendResponse(ue,be)});this.manager.onDownstreamRequest(this,x,me)}catch(ue){this.logger.error("exception in socket.on message. Error : ".concat(ye(ue)))}},X.prototype.dispatchReconnecting=function(){this.logger.info("dispatching reconnecting"),this.manager.onReconnecting(this)},X.prototype.dispatchReconnectIsRequired=function(x,te){this.logger.info("dispatching reconnect is required by server"),this.manager.onReconnectIsRequired(this,x,te)},X.prototype.dispatchDisconnected=function(){this.logger.info("dispatching disconnected"),this.manager.onDisconnected(this)},X.prototype.dispatchTerminalError=function(){this.logger.info("dispatching terminal error"),this.manager.onTerminalError(this)},X.prototype.dispatchTrouterMessageLost=function(x){this.logger.info("dispatching trouter message lost"),this.manager.onTrouterMessageLost(x)},X.prototype.countDisconnectBeforeConnectionEstablishment=function(){this.logger.warn("counting disconnect before connection was fully established as a connection failure"),++this.connectingErrorsInRow>=this.connectingErrorsThreshold&&this.resetReconnectParamsOnErrorThreshold()},X.prototype.sendProcessedDroppedIndicators=function(x){var te=this;try{this.logger.debug("emitting processed flow tags to the server");var me=new Wt("trouter.processed_message_loss");me.args={droppedIndicators:x},this.sendDownstreamEvent(me,function(){te.logger.info("emitted processed flow tags to the server")})}catch(be){var ue=ye(be);this.logger.error("unable to send processed message loss event. Error: ".concat(ue)),this.connectionTracker.trackError("trouter.processed_message_loss",ue,!1)}},X.prototype.sendAllocateRequest=function(x){var te=this;this.connectionAttempt++,this.connectionTracker.trackNewConnection();var me,ue=this.options.trouterUrl,be=this.reconnectParams,Le="string"==typeof(null==be?void 0:be.se)?parseInt(be.se,10):"number"==typeof(null==be?void 0:be.se)?be.se:void 0;Le&&Le<=Date.now()+36e5&&(this.logger.warn("Dropping expired cached connection parameters: ".concat(new Date(Le))),this.reconnectParams=be=void 0),be&&be.serviceUrl!==ue&&(this.logger.warn("Dropping cached connection parameters for a different environment (".concat(be.serviceUrl,", now ").concat(ue,")")),this.reconnectParams=be=void 0),null!=be&&be.reconnectUrl&&(ue=be.reconnectUrl),me=be?Y(Y({},be),{serviceUrl:void 0,reconnectUrl:void 0}):null,ue=(0,ne.adaptUrl)(ue,"v4a"),ue=this.appendCorrelationIds(ue,!1),ue=this.appendEndpointId(ue,!1),me&&(ue+="&".concat(this.buildQuery(me)),me.v||(ue+="&v=".concat("v4"))),ue=this.options.rewriteUrlForProxy(ue);var Pt=new Request(ue,{method:"POST",mode:"cors",headers:new Headers(Y(Y({"Content-Type":"text/plain"},this.options.extraConnectionHeaders),le(x,this.usingLegacyTokenApi)))});this.logger.info("sendAllocateRequest: POST ".concat(ue)),this.connectionTracker.trackStart("allocation");var Et,Ct=Date.now(),Ht=-1,_n=!1;(0,F.fetchWithTimeout)(Pt,this.timeoutOptions.fetchTimeoutMs).then(function(Ln){var Jn;if(Ht=Ln.status,!Ln.ok)throw Et=null!==(Jn=Ln.headers.get("www-authenticate"))&&void 0!==Jn?Jn:void 0,_n="1"===Ln.headers.get("x-trouter-skypetoken-deprecated"),te.logger.warn("Allocation request got response status ".concat(Ln.status,", www-authenticate header was ").concat(Et?"not empty":"empty")),new Error(Ln.statusText);var or=Ln.headers.get("content-type");if(!or||"application/json"!==or&&!or.startsWith("application/json;"))throw new Error("Content-type '".concat(or,"' is unexpected"));return te.connectionTracker.trackEnd("allocation"),Ln.json()}).then(function(Ln){te.unauthorizedErrorCount=0,te.onAllocationResponse(Ln,x)}).catch(function(Ln){te.connectingErrorsInRow++;var or,Jn="".concat(Ln).concat(Ht>=0?", status code ".concat(Ht):"");if(te.logger.error("".concat(te.connectingErrorsInRow," failed connecting attempt(s) in a row. ").concat(Jn)),te.connectionTracker.trackError("allocation",Jn),_n)return te.logger.error(or="Skypetoken deprecated response, not retrying any further"),te.connectionTracker.trackError("allocation",or),void te.fsm.onTerminalError();if(401===Ht&&te.unauthorizedErrorCount++,!te.canRetryTokenFetchRequest(te.unauthorizedErrorCount))return te.connectionTracker.trackError("allocation",or="getToken retry limit hit, reached terminal error state"),void te.fsm.onTerminalError();if(-1!==Ht||te.isNavigatorOnline){if(te.reconnectParams&&te.connectingErrorsInRow>=te.connectingErrorsThreshold)if(Ht>=400&&Ht<=599)te.resetReconnectParamsOnErrorThreshold();else if(te.reconnectParams.reconnectUrl&&te.connectingErrorsInRow%3==0){te.logger.warn("".concat(te.connectingErrorsInRow," connection attempts, testing nominal service URL"));var $i=Math.min(te.timeoutOptions.connectionTimeoutMs-(Date.now()-Ct)-500,te.timeoutOptions.fetchTimeoutMs);return void te.testNominalUrlConnectivity($i).then(function(Ro){te.connectionTracker.trackProgress("nomcheck",Ro?"ok":"failed"),Ro?(te.logger.warn("Nominal service URL is reachable, erasing cached reconnect URL"),te.reconnectParams&&delete te.reconnectParams.reconnectUrl):te.logger.warn("Nominal service URL is not reachable either, keeping cached reconnect URL"),te.fsm.onAllocationFailed(!1,void 0)},function(){te.fsm.onAllocationFailed(!1,void 0)})}}else te.logger.info("Expected failure, the browser says it is not online at the moment");te.fsm.onAllocationFailed(401===Ht,Et)})},X.prototype.testNominalUrlConnectivity=function(x){var me,te=this;if(x<1e3)return this.logger.warn("There is no time left to reasonably perform the nominal service URL connectivity check (".concat(x," ms), falling back to assuming that the connectivity is fine")),Promise.resolve(!0);try{var ue=new URL(this.options.trouterUrl);ue.pathname="/",ue.search="?"+this.buildQuery({check:Date.now(),cor_id:encodeURIComponent(this.options.clientCorrelationID),epid:encodeURIComponent(this.options.endpointId?this.options.endpointId:""),tc:encodeURIComponent((0,F.toJson)(this.clientInfo))}),me=new Request(this.options.rewriteUrlForProxy(ue.toString()),{method:"GET",headers:{Accept:"text/plain"}})}catch(be){return this.logger.warn("Nominal service URL connectivity test request could not be created (".concat(be,"), falling back to assuming that the connectivity is fine")),Promise.resolve(!0)}return(0,F.fetchWithTimeout)(me,x).then(function(be){if(200!==be.status)throw new Error("Not 200 OK: ".concat(be.status," ").concat(be.statusText));return be.text()}).then(function(be){if("Trouter"!==be)throw new Error('Not "Trouter": '.concat(be.substring(0,16)).concat(be.length>16?"...":""));return!0}).catch(function(be){return te.logger.error("Nominal service URL connectivity test failed: ".concat(be)),!1})},X.prototype.sendPingRequest=function(){var x=this;if(this.socket&&void 0===this.pingResponseTimerId)try{this.logger.debug("emitting ping event");var te=!1;this.socket.emit("ping",function(){!0!==te&&x.onPingResponse()}),this.pingResponseTimerId=setTimeout(function(){x.logger.error("Ping response timeout is fired"),te=!0,x.clearPingResponseTimer(),x.fsm.onPingResponseTimeout()},this.timeoutOptions.pongTimeoutMs)}catch(ue){var me=ye(ue);this.logger.error("unable to send ping. Error: ".concat(me)),this.connectionTracker.trackError("ping",me,!1)}},X.prototype.connectV4c=function(x,te){var me,ue,be,Le,Pt,Et,Ct=this.options.ioOptions?Y({},this.options.ioOptions):new We;Ct["force new connection"]=!0,Ct.reconnect=!1,null!==(me=this.reconnectParams)&&void 0!==me&&me.serviceUrl&&(0,ne.adaptUrl)(this.reconnectParams.serviceUrl,"v4c")!==(0,ne.adaptUrl)(this.options.trouterUrl,"v4c")&&(this.logger.warn("Dropping cached connection parameters for a different environment (".concat(this.reconnectParams.serviceUrl,", now ").concat(this.options.trouterUrl,")")),this.reconnectParams=void 0);var Ht=null!==(Le=null!==(ue=(0,ne.redirectUrlIfPresent)(te))&&void 0!==ue?ue:"redirect-no-host"!==(null==te?void 0:te.kind)?null===(be=this.reconnectParams)||void 0===be?void 0:be.reconnectUrl:void 0)&&void 0!==Le?Le:this.options.trouterUrl,_n=(0,ne.adaptUrl)(Ht,"v4c");Ct["skipped handshake data"]={timeout:70,websocketUrl:_n},Ct.query=this.buildV4cUrlParams(),Ct.rewriteUrlForProxy=this.options.rewriteUrlForProxy;try{if(this.stopSocketIo(),this.transportTypeName="websocket",this.socket=(null!==(Pt=this.options.io)&&void 0!==Pt?Pt:ee).connect(this.options.trouterUrl,Ct),void 0===this.socket)throw new Error("failed to create Socket.io object");var Ln=null===(Et=this.audienceSubscriptionState)||void 0===Et?void 0:Et.increaseCvAndGetEventObject();this.attachSocketIoHandlers(this.socket,x,void 0,Ln)}catch(Jn){this.logger.error("".concat(Jn)),this.connectionTracker.trackError("v4c","".concat(Jn)),this.fsm.onV4cException()}},X.prototype.sendV4cAuthenticationEvent=function(x){var te,me={headers:Y(Y({},this.options.extraConnectionHeaders),le(x,this.usingLegacyTokenApi)),connectparams:(0,ne.reconnectParamsWithoutUrls)(this.reconnectParams)};null===(te=this.socket)||void 0===te||te.emit(J.USER_AUTHENTICATE_EVENT_NAME,me)},X.prototype.setUserActivityState=function(x){var te=x.state!==this.userActivityState.state;this.userActivityState=x,te?(this.logger.info("Changing user activity state to '".concat(x.toEventJSON(),"'")),this.fsm.onSetNewUserActivityState()):(this.logger.debug("Not changing the same user activity state '".concat(x.toEventJSON(),"'")),this.manager.onUserActivityStateAccepted(x.correlationVector.value()))},X.prototype.sendUserActivityState=function(x,te){this.userActivityState.state!==B.UserActivityState.Unknown&&("websocket"===this.transportTypeName&&te?this.sendUserActivityStateMultiple(x===W.UserActivityEventReason.Connected?2:1):"xhr-polling"===this.transportTypeName&&x===W.UserActivityEventReason.Modified&&this.fsm.forceReconnect("user activity/force reconnect"))},X.prototype.setAudienceSubscriptionsAsync=function(x,te){var me=this.audienceSubscriptionState;if(this.audienceSubscriptionState=x,this.transportTypeName===this.WEBSOCKET_TRANSPORT_NAME)return this.setAudienceSubscriptionsInternalAsync(x.increaseCvAndGetEventObject(),te);if(this.transportTypeName===this.XHR_POLLING_TRANSPORT_NAME){var ue=this.setAudienceSubscriptionsLongpollInternalAsync(x.increaseCvAndGetEventObject(),te,me);return this.fsm.forceReconnect("set audience subscription force reconnect"),ue}throw new Error("set audience subscription executed on an unknown transport")},X.prototype.setAudienceSubscriptionsUnsafeAsync=function(x){if(x)return this.transportTypeName===this.WEBSOCKET_TRANSPORT_NAME?this.setAudienceSubscriptionsInternalAsync(x,15e3):void 0},X.prototype.setAudienceSubscriptionsInternalAsync=function(x,te){return K(this,void 0,void 0,function(){var me,ue,be=this;return q(this,function(Le){switch(Le.label){case 0:return this.logger.info("[WebSocket] Audience subscription set requested."),(me=new Wt("audience.subscribe")).args=x,[4,new Promise(function(Pt){var Et=!1,Ct=setTimeout(function(){return Et=!0,Pt(be.buildAudienceSubscriptionsTimeoutResponse(x))},te);be.sendDownstreamEvent(me,function(Ht,_n){Et||(clearTimeout(Ct),be.logger.debug("[Websocket] Audience subscription response: ".concat(_n)),be.pendingAudienceSubscription&&be.onAudienceSubscriptionResult(_n),Pt(_n))})})];case 1:return ue=Le.sent(),this.manager.onAudiencesSetResolved(ue,x.cv),[2,ue]}})})},X.prototype.setAudienceSubscriptionsLongpollInternalAsync=function(x,te,me){var ue;return K(this,void 0,void 0,function(){var be,Le,Pt,Et,Ct,Ht,_n=this;return q(this,function(Ln){switch(Ln.label){case 0:return this.logger.info("[XHR Polling] Audience subscription set requested."),this.pendingAudienceSubscription&&(this.logger.error("Racing audience subscriptions occured. This situation resolves into undefined scenario and/or nasal demons."),clearTimeout(this.pendingAudienceSubscription.timeoutId)),0===x.audiences.length?[2,this.handleAudienceUnsubscribeLongpoll(x.cv,me)]:[4,new Promise(function(Jn){var or=setTimeout(function(){return _n.pendingAudienceSubscription=void 0,Jn(_n.buildAudienceSubscriptionsTimeoutResponse(x))},te);_n.pendingAudienceSubscription={audienceSetResolve:Jn,timeoutId:or}})];case 1:return be=Ln.sent(),this.manager.getState()===B.TrouterState.Unknown||this.transportTypeName===this.WEBSOCKET_TRANSPORT_NAME?[2,be]:(null==(Le=be.responses[0])?void 0:Le.result.audienceSubscriptionState)===this.AUDIENCE_SUBSCRIPTION_RESULT_BAD_REQUEST||(null==(Pt=be.responses.find(function(Jn){return Jn.audienceId===x.audiences[0].id}))?void 0:Pt.result.audienceSubscriptionState)===this.AUDIENCE_SUBSCRIPTION_RESULT_ERROR?(this.clearAudienceSubscriptionStateQueryParam(),this.manager.onAudiencesSetResolved(be,x.cv),[2,be]):(Et=(null===(ue=null==me?void 0:me.audienceSubscriptionModel.audienceSubscriptions[0])||void 0===ue?void 0:ue.id)!==(null==Le?void 0:Le.audienceId),me&&Et&&(Ct=this.mapToSyntheticAudienceSubscriptionResponses(me.audienceSubscriptionModel.audienceSubscriptions,this.AUDIENCE_SUBSCRIPTION_RESULT_UNSUBSCRIBED,200),(Ht=be.responses).push.apply(Ht,Ct)),this.manager.onAudiencesSetResolved(be,x.cv),[2,be])}})})},X.prototype.clearAudienceSubscriptionStateQueryParam=function(){var x,te,me;null!==(me=null===(te=null===(x=this.socket)||void 0===x?void 0:x.socket)||void 0===te?void 0:te.options)&&void 0!==me&&me.query&&(this.socket.socket.options.query=this.socket.socket.options.query.replace(this.AUDIENCE_SUBSCRIPTION_STATE_QUERY_PARAM_REGEX,""))},X.prototype.handleAudienceUnsubscribeLongpoll=function(x,te){var me;this.audienceSubscriptionState=void 0;var ue={responses:[]};if(te){var be=this.mapToSyntheticAudienceSubscriptionResponses(te.audienceSubscriptionModel.audienceSubscriptions,this.AUDIENCE_SUBSCRIPTION_RESULT_UNSUBSCRIBED,200);(me=ue.responses).push.apply(me,be)}return this.manager.onAudiencesSetResolved(ue,x),ue},X.prototype.buildAudienceSubscriptionsTimeoutResponse=function(x){return this.logger.error("Audience subscription attempt has timed out."),{responses:this.mapToSyntheticAudienceSubscriptionResponses(x.audiences,this.AUDIENCE_SUBSCRIPTION_RESULT_TIMEOUT)}},X.prototype.mapToSyntheticAudienceSubscriptionResponses=function(x,te,me){return x.map(function(ue){return{audienceId:ue.id,result:{audienceSubscriptionState:te,responseStatus:me}}})},X.prototype.expediteBackoff=function(){this.tokenBackoff.expediteIfPending()},X.prototype.sendRegisterRequest=function(){var x=this;if(!this.options.registration||!this.registrarClient)throw new Error("Internal error - options.registration is undefined");if(!this.allocateResult)throw new Error("Allocate result is undefined in sendRegisterRequest()");this.logger.info("sending register request");var te=new F.Timespan;this.connectionTracker.trackStart("registration");var me=this.getRegistrationTtl()[0];this.registrarClient.register({appId:this.options.registration.pnhAppId,aesKey:"",languageId:"en-US",platform:this.options.registration.platform,templateKey:this.options.registration.pnhTemplateKey,platformUIVersion:this.options.registration.platformUIVersion,productContext:this.options.registration.productContext},{TROUTER:[{context:this.options.registration.context,path:this.allocateResult.surl,ttl:me}]}).then(function(){x.logger.info("Register request successful"),x.connectionTracker.trackEnd("registration"),x.fsm.onRegistrationSucceeded(),x.connectionTracker.sendTelemetry(z.ClientEventName.Registration,{duration:te.duration},[])}).catch(function(ue){x.logger.error("Register request failed. Error: ".concat(ue)),x.connectionTracker.trackError("registration",Oe(ue)),x.fsm.onRegistrationFailed(),x.connectionTracker.sendTelemetry(z.ClientEventName.Registration,{duration:te.duration},[])})},X.prototype.sendUnregisterRequest=function(){var x=this;this.logger.info("sending unregister request");var te=new F.Timespan;if(!this.options.registration||!this.registrarClient)throw new Error("Internal error - options.registration is undefined");this.connectionTracker.trackStart("unregistration"),this.registrarClient.unregister().then(function(){x.logger.info("Unregister request successful"),x.connectionTracker.trackEnd("unregistration"),x.fsm.onUnregistrationDone(),x.connectionTracker.sendTelemetry(z.ClientEventName.Unregistration,{duration:te.duration},[])}).catch(function(me){x.logger.error("Unregister request failed. Error: ".concat(me)),x.connectionTracker.trackError("unregistration",Oe(me)),x.fsm.onUnregistrationDone(),x.connectionTracker.sendTelemetry(z.ClientEventName.Unregistration,{duration:te.duration},[])})},X.prototype.resetTokenBackoff=function(){this.tokenBackoff.reset()},X.prototype.cancelPendingRegistrationRequests=function(){this.registrarClient&&this.registrarClient.cancelPendingRequests()},X.prototype.clearSentEventTimers=function(){var x=Object.keys(this.pendingSentEventTimers);if(x.length>0){this.logger.debug("Clearing all pending downstream events related timers");for(var te=0,me=x;te<me.length;te++)this.clearSentEventTimer(Number(me[te]))}},X.prototype.restartIncallModeTimer=function(){var x=this;this.clearIncallModeTimerId(),this.logger.debug("Restarting incall mode timer"),this.incallModeTimerId=setTimeout(function(){x.logger.info("Call mode timer fired"),x.fsm.onIncallModeTimer()},this.options.incallModeTimeoutMs)},X.prototype.enterIncallMode=function(){this.logger.info("Entering incall mode"),this.timeoutOptions=this.options.incallTimeoutOptions,this.tokenBackoff.setMaxBackoffMs(this.timeoutOptions.maxBackoffMs),this.inIncallMode=!0},X.prototype.exitIncallMode=function(){this.logger.info("Exiting incall mode"),this.clearIncallModeTimerId(),this.timeoutOptions=this.options.timeoutOptions,this.tokenBackoff.setMaxBackoffMs(this.timeoutOptions.maxBackoffMs),this.inIncallMode=!1},X.prototype.isIncallMode=function(){return this.inIncallMode},X.prototype.sendDisconnectTelemetryEvent=function(x){var te={reason:x,serverClosed:!this.fsm.isActive()};this.connectionTracker.trackDisconnected(te),this.connectionTracker.clearConnectedInfo()},X.prototype.forceReconnectDueToNoRegistration=function(){this.fsm.forceReconnect("force reconnect due to no registration")},X.prototype.resetReconnectParamsOnErrorThreshold=function(){this.logger.warn("".concat(this.connectingErrorsInRow," connection attempts, server-side failure: erasing cached connection parameters")),this.reconnectParams=void 0},X.prototype.onSocketConnecting=function(x){this.logger.info("onSocketConnecting(".concat(x,")")),this.transportTypeName=x,this.connectionTracker.trackProgress("connecting",this.transportTypeName),this.fsm.onConnecting()},X.prototype.onSocketConnect=function(x){this.logger.info("onSocketConnect"),this.fsm.onSocketConnect(x)},X.prototype.onSocketConnectFailed=function(x){this.logger.error("onSocketConnectFailed"),this.connectionTracker.trackError("connect_failed",x,!0,this.transportTypeName?this.transportTypeName:this.UNKNOWN_TRANSPORT),this.fsm.onConnectingFailed()},X.prototype.onSocketDisconnect=function(x){var te=this.connectionTracker.getSessionLength()||0,me=fe.DisconnectReason.fromRawReason(x);this.logger.error("onSocketDisconnect, reason: ".concat(me.reason)),"dup"===me.reason&&"dup"===this.lastDisconnectReason&&te<this.options.duplicateDisconnectThresholdMs&&(this.logger.warn("Socket was closed by server as Duplicate for the second time in a row "+"after ".concat(te," ms which is below the threshold of ")+"".concat(this.options.duplicateDisconnectThresholdMs," ms. Resetting cached ")+"connection parameters and making a new allocation."),this.reconnectParams=void 0),this.lastDisconnectReason=me.reason,this.fsm.onSocketDisconnect(me),this.connectionExpireTimestampInSecs=void 0},X.prototype.onSocketReconnect=function(){this.logger.error("onSocketReconnect"),this.fsm.onTrouterConnected()},X.prototype.onSocketReconnectFailed=function(x){this.logger.error("onSocketReconnectFailed with '".concat(x,"'")),this.fsm.onSocketDisconnect(fe.DisconnectReason.fromSocketIoEventData("reconnecterror",x))},X.prototype.onSocketReconnecting=function(){this.logger.error("onSocketReconnecting")},X.prototype.onSocketError=function(x){this.logger.error("onSocketError with '".concat((0,F.toJson)(x),"'")),this.fsm.isConnecting()&&++this.connectingErrorsInRow>=this.connectingErrorsThreshold&&this.resetReconnectParamsOnErrorThreshold(),this.connectionTracker.trackError("connectSocket",function we(X){return null!=X&&"function"==typeof X.toString?X.toString():"[".concat(typeof X,"]")}(x)),this.fsm.onSocketDisconnect(fe.DisconnectReason.fromSocketIoEventData("socketerror",x))},X.prototype.onSocketMessage=function(x){var te,ue,me=this;this.logger.debug("onSocketMessage");try{var be=null===(te=(ue=new qe(x,this.logger)).headers)||void 0===te?void 0:te["X-Microsoft-Skype-Chain-ID"],Le=be?" Chain-Id ".concat(be):"";this.logger.info("Received request N ".concat(ue.id).concat(Le," CV ").concat(ue.correlationVector," to '").concat(ue.url,"'")),ue.startTS=Date.now(),ue.url&&this.urlPath&&ue.url.startsWith(this.urlPath)&&(ue.shortUrl=ue.url.substring(this.urlPath.length))}catch(Et){var Pt=ye(Et);return this.logger.error("unable to parse request. Error: ".concat(Pt)),this.connectionTracker.trackRequest(void 0,Pt),void this.connectionTracker.sendResponseError("unable to parse request, error: ".concat(Et))}ue.timeoutTimerId=setTimeout(function(){if(!ue.replied){me.logger.error("Request ".concat(ue.id," timed out"));var Et=new z.ResponseData(ue.id);Et.status=504,Et.headers={"Trouter-Responder":"ClientLib"},me.sendResponse(ue,Et),ue.timedout=!0}},this.timeoutOptions.requestTimeoutMs);try{this.connectionTracker.trackRequest(ue),this.fsm.onDownstreamRequest(ue)}catch(Et){this.logger.error("exception in socket.on message. Error: ".concat(ye(Et))),this.connectionTracker.sendResponseError(Oe(Et),ue,void 0)}},X.prototype.onTrouterConnected=function(x,te,me){var ue,be,Le,Pt,Et=this;if((0,ne.isV4ConnectEvent)(x)){var Ct=x;this.allocateResult=Y(Y({},Ct),{ttl:x.ttl.toString()}),this.populateAndCacheReconnectParams(Ct,Ct.reconnectUrl),this.populateConnectionStateFields(Ct)}else if(!this.allocateResult)return void this.logger.error("Invalid internal state - received onTrouterConnected while allocateResult is not set");this.connectingErrorsInRow=0,this.logger.info("onTrouterConnected: ".concat(this.allocateResult.url)),"xhr-polling"===this.transportTypeName&&te&&this.manager.onUserActivityStateAccepted(te.cv),!(null===(Le=null===(be=null===(ue=this.socket)||void 0===ue?void 0:ue.socket)||void 0===be?void 0:be.options)||void 0===Le)&&Le.query&&(this.socket.socket.options.query+="&connected=true"),this.urlPath=this.allocateResult.url.replace(/https?:\/\/([A-z0-9\:\$\-\_\.\+\!\*\"\(\)\,]*)\//,"/");var Ht=this.connectedUrl!==this.allocateResult.url;this.connectedUrl=this.allocateResult.url,this.connectionExpireTimestampInSecs=(0,F.calculateExpireTsInSec)((0,ne.ensureNumber)(x.ttl)),this.connectionTracker.trackEnd("connectSocket"),this.connectionTracker.trackConnected(Ht,this.transportTypeName?this.transportTypeName:this.UNKNOWN_TRANSPORT),null===(Pt=this.setAudienceSubscriptionsUnsafeAsync(me))||void 0===Pt||Pt.catch(function(_n){return Et.logger.error("Re-subscribe to audiences has failed with ".concat(_n))}),this.fsm.onTrouterConnected()},X.prototype.onTrouterReconnect=function(x){var te=x.target;this.logger.info("onTrouterReconnect target: ".concat(te)),"self"===te?this.fsm.onReconnectRequired(!0,ie.ServerInitiated):this.fsm.onReconnectRequired(!1,ie.ServerInitiated,x)},X.prototype.onTrouterMessageLoss=function(x){this.logger.debug("onTrouterMessageLoss"),this.fsm.onTrouterMessageLost(x.droppedIndicators)},X.prototype.onAudienceSubscriptionResult=function(x){this.logger.info("onAudienceSubscriptionResult"),this.pendingAudienceSubscription&&(clearTimeout(this.pendingAudienceSubscription.timeoutId),this.pendingAudienceSubscription.audienceSetResolve(x),this.pendingAudienceSubscription=void 0)},X.prototype.buildV4cUrlParams=function(){var x={};return x.tc=encodeURI((0,F.toJson)(this.clientInfo)),x.timeout=Math.floor(this.timeoutOptions.pingTimeoutMs/1e3),this.options.endpointId&&(x.epid=this.options.endpointId),this.appendConnectedClientIds(this.buildQuery(x),!0)},X.prototype.attachSocketIoHandlers=function(x,te,me,ue){var be=this;x.on("connecting",function(Le){be.onSocketConnecting(Le)}),x.on("connect",function(){be.onSocketConnect(te)}),x.on("connect_failed",function(Le){be.onSocketConnectFailed(Le)}),x.on("close_during_connecting",function(Le){be.onSocketConnectFailed(Le)}),x.on("disconnect",function(Le){be.onSocketDisconnect(Le)}),x.on("reconnect",function(){be.onSocketReconnect()}),x.on("reconnect_failed",function(Le){be.onSocketReconnectFailed(Le)}),x.on("reconnecting",function(){be.onSocketReconnecting()}),x.on("error",function(Le){be.onSocketError(Le)}),x.on("message",function(Le){be.onSocketMessage(Le)}),x.on("trouter.connected",function(Le){be.onTrouterConnected(Le,me,ue)}),x.on("trouter.reconnect",function(Le){be.onTrouterReconnect(Le)}),x.on("trouter.message_loss",function(Le){be.onTrouterMessageLoss(Le)}),x.on("audience.subscriptionresult",function(Le,Pt){be.onAudienceSubscriptionResult(Pt)})},X.prototype.onNavigatorOnlineStatusUpdate=function(){var x=window.navigator.onLine;this.logger.debug("Browser online status update - new state: ".concat(x,", previously: ").concat(this.isNavigatorOnline)),x&&!this.isNavigatorOnline?(this.isNavigatorOnline=!0,this.tokenBackoff.expediteIfPending(),this.connectionTracker.trackProgress("browserNet","online")):!x&&this.isNavigatorOnline&&(this.isNavigatorOnline=!1,this.connectionTracker.trackProgress("browserNet","offline"))},X.prototype.onAllocationResponse=function(x,te){this.logger.info("Received allocation response ".concat(JSON.stringify(x))),this.allocateResult=x,this.populateAndCacheReconnectParams(this.allocateResult,"".concat(this.allocateResult.socketio,"v4/a")),this.populateConnectionStateFields(this.allocateResult),this.fsm.onAllocationSucceed(te)},X.prototype.populateAndCacheReconnectParams=function(x,te){this.reconnectParams=Y({serviceUrl:this.options.trouterUrl,reconnectUrl:te},x.connectparams),this.manager.onConnectionParametersUpdated(this.reconnectParams)},X.prototype.populateConnectionStateFields=function(x){var te,me,ue="string"==typeof x.ttl?parseInt(x.ttl,10):x.ttl;if(this.connectionExpireTimestampInSecs=(0,F.calculateExpireTsInSec)(ue),this.connectionId=null!==(te=x.id)&&void 0!==te?te:"",this.connectedClientId=x.ccid,this.logger.debug("connected client id set {connectedClientId:".concat(this.connectedClientId,"}")),this.c2cUrlBase=null!==(me=x.curlb)&&void 0!==me?me:"",""===this.c2cUrlBase){var be=x.surl.indexOf("://");be>=0&&(be=x.surl.indexOf("/",be+3))>=5&&":3443"===x.surl.substr(be-5,5)&&(this.c2cUrlBase=x.surl.substr(0,be-5))}},X.prototype.onPingResponse=function(){this.logger.debug("onPingResponse"),this.connectionTracker.increasePingResponseCount(),this.clearPingResponseTimer(),this.fsm.onPingResponse()},X.prototype.clearPingResponseTimer=function(){void 0!==this.pingResponseTimerId&&(clearTimeout(this.pingResponseTimerId),this.pingResponseTimerId=void 0)},X.prototype.buildQuery=function(x){for(var te=[],me=0,ue=Object.keys(x);me<ue.length;me++){var be=ue[me];void 0!==x[be]&&te.push("".concat(be,"=").concat(x[be]))}return te.join("&")},X.prototype.appendConnectedClientIds=function(x,te){var me="";x.includes("ccid=")||(me="ccid=".concat(this.connectedClientId,"&")),this.domId&&(me+="dom=".concat(this.domId,"&")),me.length>0&&(me=me.slice(0,-1));var ue=te||x.includes("?")?"&":"?";return this.appendCorrelationIds(x+ue+me,te)},X.prototype.appendEndpointId=function(x,te){var me=te||x.includes("?")?"&":"?";return!x.includes("epid")&&this.options.endpointId?"".concat(x).concat(me,"epid=").concat(this.options.endpointId):x},X.prototype.appendCorrelationIds=function(x,te){var me=te||x.includes("?")?"&":"?";return x.includes("cor_id")?x:"".concat(x).concat(me,"cor_id=").concat(this.options.clientCorrelationID)+"&con_num=".concat(this.clientID,"_").concat(this.connectionAttempt)},X.prototype.safeString=function(x){return"string"==typeof x?x:""},X.prototype.sendResponse=function(x,te){var me,ue,be;if(x.timedout)return this.logger.error("Request ".concat(x.id," already timed out")),1;if(x.replied)return this.logger.error("Response for request ".concat(x.id," already sent")),2;clearTimeout(x.timeoutTimerId),x.timeoutTimerId=void 0,x.replied=!0,te.headers=null!==(me=te.headers)&&void 0!==me?me:{};var Le=x.correlationVector;this.logger.info("Sending response N ".concat(x.id," CV ").concat(Le," with status ").concat(te.status)),Le&&(te.headers[Ge]=Le),null!==(ue=x.headers)&&void 0!==ue&&ue["trouter-request"]&&(te.headers["trouter-request"]=x.headers["trouter-request"]);var Pt=Date.now()-x.startTS;if(te.headers["trouter-client"]=(0,F.toJson)({cd:Pt}),!(null===(be=x.headers)||void 0===be)&&be["trouter-is-broadcast"]&&(te.headers["trouter-is-broadcast"]=x.headers["trouter-is-broadcast"]),this.logger.debug("response: ".concat((0,F.toJson)(te))),!this.socket)return this.connectionTracker.sendResponseError("no socket",x,te),4;try{return this.socket.send((0,F.toJson)(te)),te.sentTS=Date.now(),x.incrementCorrelationVector(),this.connectionTracker.trackResponse(x,Pt,te),"websocket"===this.transportTypeName&&this.sendPingRequest(),0}catch(Ct){var Et="unable to send data on response.end. Error: ".concat(ye(Ct));return this.logger.error(Et),this.connectionTracker.sendResponseError(Et,x,te),4}},X.prototype.sendUserActivityStateMultiple=function(x){var te=this,me=new Wt("user.activity"),ue=this.userActivityState.increaseCvAndGetEventObject();me.args=ue,this.logger.debug("Sending user activity '".concat(this.userActivityState.toEventJSON(),"', remaining ").concat(x-1));var be=!1;this.sendDownstreamEvent(me,function(){if(!0!==be&&(te.logger.info("User activity state: ".concat(ue.state,", cv: ").concat(ue.cv," accepted")),te.manager.onUserActivityStateAccepted(ue.cv),te.clearSentEventTimer(me.timeoutTimerId),x>1)){var Le=setTimeout(function(){te.clearSentEventTimer(Le),te.sendUserActivityStateMultiple(x-1)},te.options.userActivitySecondResendDelayMs);te.registerSentEventTimer(Le,"user.activity/resend")}}),me.timeoutTimerId=setTimeout(function(){te.logger.error("Activity state response timeout is fired"),be=!0,te.fsm.onActivityStateResponseTimeout(),te.clearSentEventTimer(me.timeoutTimerId)},this.timeoutOptions.userActivityResponseTimeoutMs),this.registerSentEventTimer(me.timeoutTimerId,"user.activity/response")},X.prototype.sendDownstreamEvent=function(x,te){this.logger.debug("Sending downstream event ".concat(x.name)),this.socket&&this.socket.emit(x.name,x.args,te)},X.prototype.registerSentEventTimer=function(x,te){this.logger.debug("registering timer ".concat(x," -> ").concat(te)),this.pendingSentEventTimers[x]=te},X.prototype.clearSentEventTimer=function(x){var te=this.pendingSentEventTimers[x];this.logger.debug("clearing timer ".concat(x," -> ").concat(te)),delete this.pendingSentEventTimers[x],clearTimeout(x)},X.prototype.getRegistrationTtl=function(){var x,te,me=(0,F.calculateTtlInSec)(this.connectionExpireTimestampInSecs);if(this.logger.debug("Current connectionID will expire in ".concat(me," seconds")),(null===(x=this.options.registration)||void 0===x?void 0:x.registrarTtlSec)&&me>0){var ue=this.options.registration.registrarTtlSec<me;return[Math.min(this.options.registration.registrarTtlSec,me),ue]}return null!==(te=this.options.registration)&&void 0!==te&&te.registrarTtlSec?[this.options.registration.registrarTtlSec,!1]:me>0?[me,!1]:[3600,!1]},X.prototype.clearIncallModeTimerId=function(){void 0!==this.incallModeTimerId&&(this.logger.debug("Clearing in-call mode timer"),clearTimeout(this.incallModeTimerId),this.incallModeTimerId=void 0)},X.prototype.applyConnectionTrackerOptions=function(x){try{x.eventLogger&&"function"==typeof x.eventLogger.logEvent?(this.connectionTracker.mergeSettings(x.telemetrySettings),this.connectionTracker.enable(x.eventLogger)):this.logger.warn("Trouter client event logging disabled due to invalid configuration.")}catch(te){this.logger.warn("Trouter client event logging disabled. Error: ".concat(ye(te))),this.connectionTracker.disable()}},X.prototype.canRetryTokenFetchRequest=function(x){var te=this.options.retryLimitOnTokenFetch;return null==te||x<te||(this.logger.warn("Reached limit on maximum number of token fetch request. Current count: ".concat(x,", retry limit: ").concat(te)),!1)},X}();de.TrouterConnection=Gt},function(ke,de,De){Object.defineProperty(de,"__esModule",{value:!0}),de.MessageHandlerRegistry=void 0;var le=De(1),we=De(0),ye=function(){function Oe(Y){this.messageHandlers=[],this.logger=new we.Logger("MessageHandlers",Y)}return Oe.prototype.register=function(Y){if(this.messageHandlers.some(function(K){return K===Y}))throw new Error("Registering the same handler twice is not allowed");this.messageHandlers.push(Y)},Oe.prototype.clear=function(){this.logger.debug("Clearing message handlers"),this.messageHandlers=[]},Oe.prototype.active=function(){return this.messageHandlers.length>0},Oe.prototype.handleMessage=function(Y){for(var K={resultCode:le.UNHANDLED_MESSAGE_ACK,isHandled:!1},q=0,ie=this.messageHandlers;q<ie.length;q++){var F=this.safeExecuteHandle(ie[q],Y);if(void 0!==F&&(void 0===F.isHandled||F.isHandled))return void 0===F.resultCode&&(F.resultCode=le.HANDLED_MESSAGE_ACK),F}return K},Oe.prototype.safeExecuteHandle=function(Y,K){try{return Y.handleMessage(K)}catch(q){return void this.logger.warn("Trouter message handler threw an exception: ".concat(q))}},Oe}();de.MessageHandlerRegistry=ye},function(ke,de,De){var we=this&&this.__awaiter||function(Oe,Y,K,q){return new(K||(K=Promise))(function(oe,F){function z(_e){try{fe(q.next(_e))}catch(B){F(B)}}function J(_e){try{fe(q.throw(_e))}catch(B){F(B)}}function fe(_e){_e.done?oe(_e.value):function ie(oe){return oe instanceof K?oe:new K(function(F){F(oe)})}(_e.value).then(z,J)}fe((q=q.apply(Oe,Y||[])).next())})},ye=this&&this.__generator||function(Oe,Y){function K(fe){return function(_e){return function q(fe){if(ie)throw new TypeError("Generator is already executing.");for(;z&&(z=0,fe[0]&&(J=0)),J;)try{if(ie=1,oe&&(F=2&fe[0]?oe.return:fe[0]?oe.throw||((F=oe.return)&&F.call(oe),0):oe.next)&&!(F=F.call(oe,fe[1])).done)return F;switch(oe=0,F&&(fe=[2&fe[0],F.value]),fe[0]){case 0:case 1:F=fe;break;case 4:return J.label++,{value:fe[1],done:!1};case 5:J.label++,oe=fe[1],fe=[0];continue;case 7:fe=J.ops.pop(),J.trys.pop();continue;default:if(!(F=(F=J.trys).length>0&&F[F.length-1])&&(6===fe[0]||2===fe[0])){J=0;continue}if(3===fe[0]&&(!F||fe[1]>F[0]&&fe[1]<F[3])){J.label=fe[1];break}if(6===fe[0]&&J.label<F[1]){J.label=F[1],F=fe;break}if(F&&J.label<F[2]){J.label=F[2],J.ops.push(fe);break}F[2]&&J.ops.pop(),J.trys.pop();continue}fe=Y.call(Oe,J)}catch(_e){fe=[6,_e],oe=0}finally{ie=F=0}if(5&fe[0])throw fe[1];return{value:fe[0]?fe[1]:void 0,done:!0}}([fe,_e])}}var ie,oe,F,z,J={label:0,sent:function(){if(1&F[0])throw F[1];return F[1]},trys:[],ops:[]};return z={next:K(0),throw:K(1),return:K(2)},"function"==typeof Symbol&&(z[Symbol.iterator]=function(){return this}),z};Object.defineProperty(de,"__esModule",{value:!0}),de.addCacheAsBackupTo=void 0,de.addCacheAsBackupTo=function le(Oe){var Y,K=this;return function(q){return we(K,void 0,void 0,function(){return ye(this,function(ie){return q&&(Y=void 0),[2,new Promise(function(oe,F){Oe(q).then(function(z){Y=z,oe(z)}).catch(function(z){void 0!==Y&&Y.length>0&&oe(Y),F(z)})})]})})}}},function(ke,de,De){var le=this&&this.__awaiter||function(B,W,G,ne){return new(G||(G=Promise))(function(ee,re){function We(Ze){try{qe(ne.next(Ze))}catch(Wt){re(Wt)}}function Ge(Ze){try{qe(ne.throw(Ze))}catch(Wt){re(Wt)}}function qe(Ze){Ze.done?ee(Ze.value):function Z(ee){return ee instanceof G?ee:new G(function(re){re(ee)})}(Ze.value).then(We,Ge)}qe((ne=ne.apply(B,W||[])).next())})},we=this&&this.__generator||function(B,W){function G(qe){return function(Ze){return function ne(qe){if(Z)throw new TypeError("Generator is already executing.");for(;We&&(We=0,qe[0]&&(Ge=0)),Ge;)try{if(Z=1,ee&&(re=2&qe[0]?ee.return:qe[0]?ee.throw||((re=ee.return)&&re.call(ee),0):ee.next)&&!(re=re.call(ee,qe[1])).done)return re;switch(ee=0,re&&(qe=[2&qe[0],re.value]),qe[0]){case 0:case 1:re=qe;break;case 4:return Ge.label++,{value:qe[1],done:!1};case 5:Ge.label++,ee=qe[1],qe=[0];continue;case 7:qe=Ge.ops.pop(),Ge.trys.pop();continue;default:if(!(re=(re=Ge.trys).length>0&&re[re.length-1])&&(6===qe[0]||2===qe[0])){Ge=0;continue}if(3===qe[0]&&(!re||qe[1]>re[0]&&qe[1]<re[3])){Ge.label=qe[1];break}if(6===qe[0]&&Ge.label<re[1]){Ge.label=re[1],re=qe;break}if(re&&Ge.label<re[2]){Ge.label=re[2],Ge.ops.push(qe);break}re[2]&&Ge.ops.pop(),Ge.trys.pop();continue}qe=W.call(B,Ge)}catch(Ze){qe=[6,Ze],ee=0}finally{Z=re=0}if(5&qe[0])throw qe[1];return{value:qe[0]?qe[1]:void 0,done:!0}}([qe,Ze])}}var Z,ee,re,We,Ge={label:0,sent:function(){if(1&re[0])throw re[1];return re[1]},trys:[],ops:[]};return We={next:G(0),throw:G(1),return:G(2)},"function"==typeof Symbol&&(We[Symbol.iterator]=function(){return this}),We};Object.defineProperty(de,"__esModule",{value:!0}),de.TrouterManager=de.AudienceSubscriptionState=de.UserActivityObject=void 0;var ye=De(3),Oe=De(2),Y=De(4),K=De(0),q=De(5),ie=De(18),oe=De(7),F=De(6),z=De(19),J=function(){function B(W,G){this.state=W,this.correlationVector=void 0!==G?G:ye.CorrelationVector.extend()}return B.prototype.getStateString=function(){switch(this.state){case Oe.UserActivityState.Active:return"active";case Oe.UserActivityState.Inactive:return"inactive";case Oe.UserActivityState.Unknown:return"unknown";default:return"undefined"}},B.prototype.increaseCvAndGetEventObject=function(){return this.correlationVector.increase(),this.toEventObject()},B.prototype.toEventObject=function(){return{state:this.getStateString(),cv:this.correlationVector.value()}},B.prototype.toEventJSON=function(){return(0,ye.toJson)(this.toEventObject())},B}();de.UserActivityObject=J;var fe=function(){function B(W,G){void 0===G&&(G=ye.CorrelationVector.extend()),this.audienceSubscriptionModel=W,this.correlationVector=G}return B.prototype.increaseCvAndGetEventObject=function(){return this.correlationVector.increase(),this.toEventObject()},B.prototype.toEventObject=function(){return{audiences:this.audienceSubscriptionModel.audienceSubscriptions,cv:this.correlationVector.value()}},B.prototype.toEventJSON=function(){return(0,ye.toJson)(this.toEventObject())},B}();de.AudienceSubscriptionState=fe;var _e=function(){function B(W,G,ne,Z,ee,re){var We=this;this.logFunc=W,this.options=G,this.tokenProvider=ne,this.usingLegacyTokenApi=Z,this.listener=ee,this.tokenTypeProtocolSelector=function(Ge,qe){return We.options.forceV4aProtocol?"v4a":(0,q.usedProtocol)(Ge,qe)},this.logger=new K.Logger("Manager",W),this.logger.info("Created TrouterManager with options ".concat((0,ye.toJson)(this.options))),this.fsm=new z.TrouterManagerFsm(W,this),this.baseEndpointUrl="",this.processedMessageLoss={},this.userActivityObject=new J(Oe.UserActivityState.Unknown),this.protocolSelector=null!=re?re:this.tokenTypeProtocolSelector.bind(this)}return B.prototype.start=function(){this.fsm.start()},B.prototype.stop=function(W){this.fsm.stop(W)},B.prototype.configure=function(W){this.options=W,void 0!==this.firstConnection&&this.firstConnection.configure(W),void 0!==this.secondConnection&&this.secondConnection.configure(W),this.logger.info("Reconfigured TrouterManager with options ".concat((0,ye.toJson)(this.options)))},B.prototype.checkConnection=function(W){void 0!==this.firstConnection&&this.firstConnection.checkConnection(W),void 0!==this.secondConnection&&this.secondConnection.checkConnection(W)},B.prototype.resendRegistration=function(){return le(this,void 0,void 0,function(){return we(this,function(W){return void 0!==this.secondConnection?(this.logger.info("Resending registration on the second/new connection"),[2,this.secondConnection.resendRegistration()]):void 0!==this.firstConnection?(this.logger.info("Resending registration on the first/current connection"),[2,this.firstConnection.resendRegistration()]):(this.logger.info("No connection to resend registration on, will be done upon (re)connect"),[2])})})},B.prototype.getServerState=function(){if(void 0!==this.firstConnection)return this.firstConnection.getServerState()},B.prototype.getState=function(){return this.fsm.getState()},B.prototype.isInTerminalState=function(){return this.fsm.getInternalState()===Y.TrouterManagerState.TerminalError},B.prototype.reportStateInfo=function(){var W=this.firstConnection?F.State[this.firstConnection.getState()]:"Unknown",G=Y.TrouterManagerState[this.fsm.getInternalState()];if(this.secondConnection){var ne=F.State[this.secondConnection.getState()];return"Manager ".concat(G,"; 1st ").concat(W,"; 2nd ").concat(ne)}return"Manager ".concat(G,"; Connection ").concat(W)},B.prototype.startFirstConnection=function(){var W=new oe.TrouterConnection(this.logFunc,this.options,this.configuredTrouterManager(),this.tokenProvider,this.usingLegacyTokenApi,this.userActivityObject,this.protocolSelector,this.audienceSubscriptionState);this.firstConnection=W,this.getConnectionCache().then(function(G){W.start(G)}).catch(function(){})},B.prototype.startSecondConnection=function(W){var G=new oe.TrouterConnection(this.logFunc,this.options,this.configuredTrouterManager(),this.tokenProvider,this.usingLegacyTokenApi,this.userActivityObject,this.protocolSelector,this.audienceSubscriptionState);this.secondConnection=G,void 0!==this.firstConnection&&this.firstConnection.disableRegistrationsAndAutoReconnect(),W?this.getConnectionCache().then(function(ne){G.start(ne)}).catch(function(){}):G.start()},B.prototype.stopFirstConnection=function(W){void 0!==this.firstConnection&&(this.storedFirstConnection=this.firstConnection,this.firstConnection.stop(W),this.firstConnection=void 0)},B.prototype.stopSecondConnection=function(W){void 0!==this.secondConnection&&(this.secondConnection.stop(W),this.secondConnection=void 0)},B.prototype.stopSecondConnectionDelayed=function(){if(void 0!==this.secondConnection){var W=this.secondConnection;this.secondConnection=void 0,this.logger.info("Closing an inactive connection in ".concat(Math.round(this.options.lingeringConnectionDelayMs/1e3),"s")),setTimeout(function(){W.stop(!0)},this.options.lingeringConnectionDelayMs)}},B.prototype.forceStopLingeringConnection=function(){this.storedFirstConnection&&(this.storedFirstConnection.stop(!1),this.storedFirstConnection=void 0)},B.prototype.switchConnections=function(){var W=this.firstConnection;this.firstConnection=this.secondConnection,this.secondConnection=W},B.prototype.doesSecondConnectionExist=function(){return void 0!==this.secondConnection},B.prototype.dispatchConnected=function(){if(void 0!==this.firstConnection){var W=this.firstConnection.getServerState(),G=W.url.endsWith("/")?W.url.slice(0,-1):W.url,ne={baseEndpointUrl:G,newEndpointUrl:G!==this.baseEndpointUrl,c2cUrlBase:W.c2cUrlBase,clientId:W.connectedClientId,connectionId:W.connectionId,connectionTtlSec:W.getRemainingTtlInSec()};this.baseEndpointUrl=G,this.listener.onTrouterConnected(W.url,ne)}},B.prototype.dispatchDisconnected=function(){this.listener.onTrouterDisconnected&&this.listener.onTrouterDisconnected()},B.prototype.dispatchTerminalError=function(){this.listener.onTrouterDisconnected&&this.listener.onTrouterDisconnected()},B.prototype.dispatchRegistrationState=function(W){this.options.registrationStateCallback&&this.options.registrationStateCallback(W)},B.prototype.expediteBackoffOnConnections=function(){var W;void 0!==this.lastExpediteBackoffCallAt&&Date.now()-this.lastExpediteBackoffCallAt<(null!==(W=this.options.expediteBackoffOnStartMinimumDelayMs)&&void 0!==W?W:1e4)?this.logger.info("Expedite backoff due to start() too frequent, skipping"):(this.lastExpediteBackoffCallAt=Date.now(),void 0!==this.firstConnection&&this.firstConnection.expediteBackoff(),void 0!==this.secondConnection&&this.secondConnection.expediteBackoff())},B.prototype.onDownstreamRequest=function(W,G,ne){var Z={id:G.id,method:G.method,path:"/".concat(G.shortUrl),body:G.body,headers:G.headers},ee={id:G.id,status:0,headers:{},body:"",send:function(){return ee.status<=100||ee.status>=999?3:(ne.writeHead(ee.status,ee.headers),ne.end(ee.body))}};this.listener.onTrouterRequest(Z,ee)},B.prototype.onConnected=function(W){this.fsm.onConnected(W===this.firstConnection)},B.prototype.onRegistered=function(W){this.fsm.onRegistered(W===this.firstConnection)},B.prototype.onUnregistered=function(W){this.fsm.onUnregistered(W===this.firstConnection||W===this.storedFirstConnection)},B.prototype.onReconnecting=function(W){this.fsm.onReconnecting(W===this.firstConnection)},B.prototype.onReconnectIsRequired=function(W,G,ne){this.fsm.onReconnectionRequired(W===this.firstConnection,G,ne)},B.prototype.onDisconnected=function(W){this.fsm.onDisconnected(W===this.firstConnection||W==this.storedFirstConnection),this.storedFirstConnection=void 0},B.prototype.onTerminalError=function(){this.fsm.onTerminalError(),this.storedFirstConnection=void 0},B.prototype.onUserActivityStateAccepted=function(W){this.listener.onTrouterUserActivityStateAccepted&&this.listener.onTrouterUserActivityStateAccepted(W)},B.prototype.onAudiencesSetResolved=function(W,G){var ne,Z;null===(Z=(ne=this.listener).onAudiencesSetResolved)||void 0===Z||Z.call(ne,W,G)},B.prototype.onConnectionParametersUpdated=function(W){this.setConnectionCache(W)},B.prototype.setUserActivityState=function(W,G){return this.userActivityObject=new J(W,ye.CorrelationVector.extend(G)),void 0!==this.secondConnection?(this.logger.info("Setting user activity ".concat(this.userActivityObject.toEventJSON()," on the second/new connection")),void this.secondConnection.setUserActivityState(this.userActivityObject)):void 0!==this.firstConnection?(this.logger.info("Setting user activity ".concat(this.userActivityObject.toEventJSON()," on the first/current connection")),void this.firstConnection.setUserActivityState(this.userActivityObject)):void 0},B.prototype.setAudienceSubscriptionsAsync=function(W,G,ne){if(this.audienceSubscriptionState=new fe(W,ye.CorrelationVector.extend(ne)),this.secondConnection)return this.logger.info("Setting audience subscriptions ".concat(this.audienceSubscriptionState.toEventJSON()," on second/new connection")),this.secondConnection.setAudienceSubscriptionsAsync(this.audienceSubscriptionState,G);if(this.firstConnection)return this.logger.info("Setting audience subscriptions ".concat(this.audienceSubscriptionState.toEventJSON()," on first/current connection")),this.firstConnection.setAudienceSubscriptionsAsync(this.audienceSubscriptionState,G);throw new Error("No connection found")},B.prototype.onTrouterMessageLost=function(W){var G=this;if(this.listener.onTrouterMessageLoss)if(null!=W&&W.length){var ne=W.filter(function(ee){return void 0!==G.processedMessageLoss["".concat(ee.tag,"-").concat(ee.etag)]});if(ne.length&&(this.logger.info("onTrouterMessageLoss - immediately acknowledging ".concat(ne.length," seen dropped indicators")),this.sendProcessedDroppedIndicators(ne),!(W=W.filter(function(ee){return void 0===G.processedMessageLoss["".concat(ee.tag,"-").concat(ee.etag)]})).length))return void this.logger.info("onTrouterMessageLoss - all declared dropped indicators have been seen before");if(!this.listener.onTrouterMessageLoss(W.map(function(ee){return ee.tag})))return void this.logger.warn("onTrouterMessageLoss - some flow tag(s) have not been processed by listeners");W.forEach(function(ee){G.processedMessageLoss["".concat(ee.tag,"-").concat(ee.etag)]=""}),this.sendProcessedDroppedIndicators(W)}else this.logger.warn("onTrouterMessageLoss - no flow tags have been provided")},B.prototype.getConnectionCache=function(){var W=this;return this.options.connectionCache?(this.logger.debug("Querying host's connection cache"),this.options.connectionCache.onGetTrouterConnectionCache().then(function(G){var ne=G?JSON.parse(G):void 0;return"object"==typeof ne?ne:void 0}).catch(function(G){return W.logger.warn("Invalid connection cache content provided: ".concat(G)),W.connectionCache})):Promise.resolve(this.connectionCache)},B.prototype.setConnectionCache=function(W){if(this.connectionCache=W,this.options.connectionCache)try{this.options.connectionCache.onSetTrouterConnectionCache(JSON.stringify(W))}catch(G){this.logger.warn("Error setting external connection cache: ".concat(G))}},B.prototype.sendProcessedDroppedIndicators=function(W){return void 0!==this.firstConnection?void this.firstConnection.sendProcessedDroppedIndicators(W):void 0!==this.secondConnection?void this.secondConnection.sendProcessedDroppedIndicators(W):void 0},B.prototype.configuredTrouterManager=function(){return new ie.RegistrationEnforcer(this,this.options.connectionDependsOnRegistration,this.options.delayEventsUntilRegistered)},B}();de.TrouterManager=_e},function(ke,de,De){Object.defineProperty(de,"__esModule",{value:!0}),de.TrouterUrlPromise=void 0;var le=De(0),we=function(){function ye(Oe){this.logger=new le.Logger("UrlPromise",Oe)}return ye.prototype.getPromise=function(){var Oe=this;return void 0!==this.url?(this.logger.debug("returning previously resolved url: ".concat(this.url)),Promise.resolve(this.url)):(void 0===this.pendingPromise?(this.logger.debug("creating and returning promise"),this.pendingPromise=new Promise(function(Y,K){Oe.pendingPromiseResolveRef=Y,Oe.pendingPromiseRejectRef=K})):this.logger.debug("returning existing promise"),this.pendingPromise)},ye.prototype.resolveUrl=function(Oe){this.url=Oe,this.logger.debug("got url: ".concat(this.url));var Y=this.pendingPromiseResolveRef;this.pendingPromise=void 0,this.pendingPromiseResolveRef=void 0,this.pendingPromiseRejectRef=void 0,void 0!==Y&&(this.logger.debug("resolving promise"),Y(Oe))},ye.prototype.rejectUrl=function(Oe){this.logger.debug("aborting");var Y=this.pendingPromiseRejectRef;this.url=void 0,this.pendingPromise=void 0,this.pendingPromiseResolveRef=void 0,this.pendingPromiseRejectRef=void 0,void 0!==Y&&(this.logger.debug("rejecting promise"),Y(Oe))},ye.prototype.resetUrl=function(){this.logger.debug("resetting url"),this.url=void 0},ye}();de.TrouterUrlPromise=we},function(ke,de,De){(function(le,we){var Y,K;Y=void 0===le?window:le,(K=we.exports).version="0.9.6",K.protocol=1,K.transports=[],K.j=[],K.sockets={},K.connect=function(q,ie){var oe,F,z=K.util.parseUri(q);Y&&Y.location&&(z.protocol=z.protocol||Y.location.protocol.slice(0,-1),z.host=z.host||(Y.document?Y.document.domain:Y.location.hostname),z.port=z.port||Y.location.port),oe=K.util.uniqueUri(z);var J={host:z.host,secure:"https"==z.protocol,port:z.port||("https"==z.protocol?443:80),query:z.query||""};return K.util.merge(J,ie),!J["force new connection"]&&K.sockets[oe]||(F=new K.Socket(J)),!J["force new connection"]&&F&&(K.sockets[oe]=F),(F=F||K.sockets[oe]).of(J["skipped handshake data"]?"":z.path.length>1?z.path:"")};var ye=we.exports;(function(Oe,Y){var K=Oe.util={},q=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,ie=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];K.parseUri=function(F){for(var z=q.exec(F||""),J={},fe=14;fe--;)J[ie[fe]]=z[fe]||"";return J},K.uniqueUri=function(F){var z=F.protocol,J=F.host,fe=F.port;return"document"in Y?(J=J||document.domain,fe=fe||("https"==z&&"https:"!==document.location.protocol?443:document.location.port)):(J=J||"localhost",fe||"https"!=z||(fe=443)),(z||"http")+"://"+J+":"+(fe||80)},K.query=function(F,z){var J=K.chunkQuery(F||""),fe=[];for(var _e in K.merge(J,K.chunkQuery(z||"")),J)J.hasOwnProperty(_e)&&fe.push(_e+"="+J[_e]);return fe.length?"?"+fe.join("&"):""},K.chunkQuery=function(F){for(var z,J={},fe=F.split("&"),_e=0,B=fe.length;_e<B;++_e)(z=fe[_e].split("="))[0]&&(J[z[0]]=z[1]);return J};var oe=!1;K.load=function(F){if("document"in Y&&"complete"===document.readyState||oe)return F();K.on(Y,"load",F,!1)},K.on=function(F,z,J,fe){F.attachEvent?F.attachEvent("on"+z,J):F.addEventListener&&F.addEventListener(z,J,fe)},K.request=function(F){if(F&&typeof XDomainRequest<"u")return new XDomainRequest;if(typeof XMLHttpRequest<"u"&&(!F||K.ua.hasCORS))return new XMLHttpRequest;if(!F)try{return new(window[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(z){}return null},typeof window<"u"&&K.load(function(){oe=!0}),K.defer=function(F){if(!K.ua.webkit||typeof importScripts<"u")return F();K.load(function(){setTimeout(F,100)})},K.merge=function(F,z,J,fe){var _e,B=fe||[],W=void 0===J?2:J;for(_e in z)z.hasOwnProperty(_e)&&K.indexOf(B,_e)<0&&("object"==typeof F[_e]&&W?K.merge(F[_e],z[_e],W-1,B):(F[_e]=z[_e],B.push(z[_e])));return F},K.mixin=function(F,z){K.merge(F.prototype,z.prototype)},K.inherit=function(F,z){function J(){}J.prototype=z.prototype,F.prototype=new J},K.isArray=Array.isArray||function(F){return"[object Array]"===Object.prototype.toString.call(F)},K.intersect=function(F,z){for(var J=[],fe=F.length>z.length?F:z,_e=F.length>z.length?z:F,B=0,W=_e.length;B<W;B++)~K.indexOf(fe,_e[B])&&J.push(_e[B]);return J},K.indexOf=function(F,z,J){var fe=F.length;for(J=J<0?J+fe<0?0:J+fe:J||0;J<fe&&F[J]!==z;J++);return fe<=J?-1:J},K.toArray=function(F){for(var z=[],J=0,fe=F.length;J<fe;J++)z.push(F[J]);return z},K.ua={},K.ua.hasCORS=typeof XMLHttpRequest<"u"&&function(){try{var F=new XMLHttpRequest}catch(z){return!1}return null!=F.withCredentials}(),K.ua.webkit=typeof navigator<"u"&&/webkit/i.test(navigator.userAgent)})(void 0!==ye?ye:we.exports,void 0===le?window:le),function(Oe,Y){function K(){}Oe.EventEmitter=K,K.prototype.addListener=K.prototype.on=function(q,ie){return this.$events||(this.$events={}),this.$events[q]?Y.util.isArray(this.$events[q])?this.$events[q].push(ie):this.$events[q]=[this.$events[q],ie]:this.$events[q]=ie,this},K.prototype.once=function(q,ie){function oe(){F.removeListener(q,oe),ie.apply(this,arguments)}var F=this;return oe.listener=ie,this.on(q,oe),this},K.prototype.removeListener=function(q,ie){if(this.$events&&this.$events[q]){var oe=this.$events[q];if(Y.util.isArray(oe)){for(var F=-1,z=0,J=oe.length;z<J;z++)if(oe[z]===ie||oe[z].listener&&oe[z].listener===ie){F=z;break}if(F<0)return this;oe.splice(F,1),oe.length||delete this.$events[q]}else(oe===ie||oe.listener&&oe.listener===ie)&&delete this.$events[q]}return this},K.prototype.removeAllListeners=function(q){return this.$events&&this.$events[q]&&(this.$events[q]=null),this},K.prototype.listeners=function(q){return this.$events||(this.$events={}),this.$events[q]||(this.$events[q]=[]),Y.util.isArray(this.$events[q])||(this.$events[q]=[this.$events[q]]),this.$events[q]},K.prototype.emit=function(q){if(!this.$events)return!1;var ie=this.$events[q];if(!ie)return!1;var oe=Array.prototype.slice.call(arguments,1);if("function"==typeof ie)ie.apply(this,oe);else{if(!Y.util.isArray(ie))return!1;for(var F=ie.slice(),z=0,J=F.length;z<J;z++)F[z].apply(this,oe)}return!0}}(void 0!==ye?ye:we.exports,void 0!==ye?ye:we.parent.exports),function(Oe,Y){if(Y&&Y.parse)return Oe.JSON={parse:Y.parse,stringify:Y.stringify};throw new Error("JSON not available")}(void 0!==ye?ye:we.exports,typeof JSON<"u"?JSON:void 0),function(Oe,Y){var K=Oe.parser={},q=K.packets=["disconnect","connect","heartbeat","message","json","event","ack","error","noop"],ie=K.reasons=["transport not supported","client not handshaken","unauthorized"],oe=K.advice=["reconnect"],F=Y.JSON,z=Y.util.indexOf;K.encodePacket=function(fe){var _e=z(q,fe.type),B=fe.id||"",W=fe.endpoint||"",G=fe.ack,ne=null;switch(fe.type){case"error":var Z=fe.reason?z(ie,fe.reason):"",ee=fe.advice?z(oe,fe.advice):"";""===Z&&""===ee||(ne=Z+(""!==ee?"+"+ee:""));break;case"message":""!==fe.data&&(ne=fe.data);break;case"event":var re={name:fe.name};fe.args&&fe.args.length&&(re.args=fe.args),ne=F.stringify(re);break;case"json":ne=F.stringify(fe.data);break;case"connect":fe.qs&&(ne=fe.qs);break;case"ack":ne=fe.ackId+(fe.args&&fe.args.length?"+"+F.stringify(fe.args):"")}var We=[_e,B+("data"==G?"+":""),W];return null!=ne&&We.push(ne),We.join(":")},K.encodePayload=function(fe){var _e="";if(1==fe.length)return fe[0];for(var B=0,W=fe.length;B<W;B++)_e+="\ufffd"+fe[B].length+"\ufffd"+fe[B];return _e};var J=/([^:]+):([0-9]+)?(\+)?:([^:]+)?:?([\s\S]*)?/;K.decodePacket=function(W){if(!(_e=W.match(J)))return{};var B=_e[2]||"",G=(W=_e[5]||"",{type:q[_e[1]],endpoint:_e[4]||""});switch(B&&(G.id=B,G.ack=!_e[3]||"data"),G.type){case"error":var _e=W.split("+");G.reason=ie[_e[0]]||"",G.advice=oe[_e[1]]||"";break;case"message":G.data=W||"";break;case"event":try{var ne=F.parse(W);G.name=ne.name,G.args=ne.args}catch(ee){}G.args=G.args||[];break;case"json":try{G.data=F.parse(W)}catch(ee){}break;case"connect":G.qs=W||"";break;case"ack":if((_e=W.match(/^([0-9]+)(\+)?(.*)/))&&(G.ackId=_e[1],G.args=[],_e[3]))try{G.args=_e[3]?F.parse(_e[3]):[]}catch(ee){}break;case"disconnect":G.reason=W}return G},K.decodePayload=function(fe){if("\ufffd"==fe.charAt(0)){for(var _e=[],B=1,W="";B<fe.length;B++)"\ufffd"==fe.charAt(B)?(_e.push(K.decodePacket(fe.substr(B+1).substr(0,W))),B+=Number(W)+1,W=""):W+=fe.charAt(B);return _e}return[K.decodePacket(fe)]}}(void 0!==ye?ye:we.exports,void 0!==ye?ye:we.parent.exports),function(Oe,Y){function K(q,ie){this.socket=q,this.sessid=ie,this.connectErrorCallback=void 0,this.isOpened=!1}Oe.Transport=K,Y.util.mixin(K,Y.EventEmitter),K.prototype.onData=function(q){if(this.clearCloseTimeout(),(this.socket.connected||this.socket.connecting||this.socket.reconnecting)&&this.setCloseTimeout(),""!==q){var ie=Y.parser.decodePayload(q);if(ie&&ie.length)for(var oe=0,F=ie.length;oe<F;oe++)this.onPacket(ie[oe])}return this},K.prototype.onPacket=function(q){return this.socket.setHeartbeatTimeout(),"heartbeat"==q.type?this.onHeartbeat():("connect"==q.type&&""==q.endpoint&&this.onConnect(),"error"==q.type&&"reconnect"==q.advice&&(this.isOpened=!1),this.socket.onPacket(q),this)},K.prototype.setCloseTimeout=function(){if(!this.closeTimeout){var q=this;this.closeTimeout=setTimeout(function(){q.onDisconnect()},this.socket.closeTimeout)}},K.prototype.onDisconnect=function(){return this.close&&this.isOpened&&this.close(),this.clearTimeouts(),this.socket.onDisconnect(),this},K.prototype.onConnect=function(){return this.socket.onConnect(),this.connectErrorCallback=void 0,this},K.prototype.clearCloseTimeout=function(){this.closeTimeout&&(clearTimeout(this.closeTimeout),this.closeTimeout=null)},K.prototype.clearTimeouts=function(){this.clearCloseTimeout(),this.reopenTimeout&&clearTimeout(this.reopenTimeout)},K.prototype.packet=function(q){this.send(Y.parser.encodePacket(q))},K.prototype.onHeartbeat=function(q){this.packet({type:"heartbeat"})},K.prototype.onOpen=function(){this.isOpened=!0,this.clearCloseTimeout(),this.socket.onOpen()},K.prototype.onClose=function(){this.isOpened=!1,this.socket.onClose(),this.onDisconnect()},K.prototype.prepareUrl=function(q){var ie=this.socket.options;if(ie["skipped handshake data"])return ie.rewriteUrlForProxy(ie["skipped handshake data"].websocketUrl+(q||""));var oe=this.scheme()+"://"+ie.host+":"+ie.port+"/"+ie.resource+"/"+Y.protocol+"/"+this.name+"/"+this.sessid+(q||"");return ie.rewriteUrlForProxy(oe)},K.prototype.ready=function(q,ie){ie.call(this)},K.prototype.clearEventHandlers=function(){return this}}(void 0!==ye?ye:we.exports,void 0!==ye?ye:we.parent.exports),function(Oe,Y,K){function q(oe){if(this.options={port:80,secure:!1,document:"document"in K&&document,resource:"socket.io",transports:Y.transports.slice(),"connect timeout":1e4,"try multiple transports":!0,reconnect:!0,"reconnection delay":500,"reconnection limit":1/0,"reopen delay":3e3,"max reconnection attempts":10,"sync disconnect on unload":!0,"auto connect":!0,"flash policy port":10843},Y.util.merge(this.options,oe),this.connected=!1,this.open=!1,this.connecting=!1,this.reconnecting=!1,this.namespaces={},this.buffer=[],this.doBuffer=!1,this.disconnected=!1,this.options["sync disconnect on unload"]&&(!this.isXDomain()||Y.util.ua.hasCORS)){var F=this;Y.util.on(K,"unload",function(){F.disconnectSync()},!1)}this.options["auto connect"]&&this.connect()}function ie(){}Oe.Socket=q,Y.util.mixin(q,Y.EventEmitter),q.prototype.of=function(oe){return this.namespaces[oe]||(this.namespaces[oe]=new Y.SocketNamespace(this,oe),""!==oe&&this.namespaces[oe].packet({type:"connect"})),this.namespaces[oe]},q.prototype.publish=function(){var oe;for(var F in this.emit.apply(this,arguments),this.namespaces)this.namespaces.hasOwnProperty(F)&&(oe=this.of(F)).$emit.apply(oe,arguments)},q.prototype.handshake=function(oe){function F(ne){ne instanceof Error?z.onError(ne.message):oe.apply(null,ne.split(":"))}var z=this,J=this.options;if(!z.disconnected){var fe=J.rewriteUrlForProxy(["http"+(J.secure?"s":"")+":/",J.host+":"+J.port,J.resource,Y.protocol,Y.util.query(this.options.query,"t="+ +new Date)].join("/"));if(this.isXDomain()&&!Y.util.ua.hasCORS){var _e=document.getElementsByTagName("script")[0],B=document.createElement("script");B.src=fe+"&jsonp="+Y.j.length,_e.parentNode.insertBefore(B,_e),Y.j.push(function(ne){F(ne),B.parentNode.removeChild(B)})}else{var W=Y.util.request();W.open("GET",fe,!0);var G=this.options.requestHeaders;void 0!==G&&Object.keys(G).forEach(function(ne){W.setRequestHeader(ne,G[ne])}),W.onreadystatechange=function(){4==W.readyState&&(W.onreadystatechange=ie,200==W.status?F(W.responseText):!z.reconnecting&&z.onError(W.responseText))},W.send(null)}}},q.prototype.getTransport=function(oe){for(var F,z=oe||this.transports,J=0;F=z[J];J++)if(Y.Transport[F]&&Y.Transport[F].check(this)&&(!this.isXDomain()||Y.Transport[F].xdomainCheck()))return new Y.Transport[F](this,this.sessionid);return null},q.prototype.connect=function(oe){if(this.connecting||this.disconnected)return this;var F=this,z=function(fe,_e,B,W){function G(){if(!F.connected&&!F.disconnected)if(F.connecting=!1,clearTimeout(F.connectTimeoutTimer),F.options["try multiple transports"]){for(;F.remainingTransports.length>0&&F.remainingTransports.splice(0,1)[0]!=F.transport.name;);F.remainingTransports.length?ne(F.remainingTransports):F.publish("connect_failed")}else F.publish("connect_failed")}function ne(Z){if(F.transport&&(F.transport.clearTimeouts(),F.transport.clearEventHandlers()),F.transport=F.getTransport(Z),!F.transport||F.disconnected)return F.publish("connect_failed");F.transport.ready(F,function(){F.connecting=!0,F.publish("connecting",F.transport.name),F.transport.open(G),F.options["connect timeout"]&&(F.connectTimeoutTimer=setTimeout(function(){G()},F.options["connect timeout"]))})}F.sessionid=fe,F.closeTimeout=1e3*B+2e3,F.heartbeatTimeout=1e3*_e+2e3,F.transports=W?Y.util.intersect(W.split(","),F.options.transports):F.options.transports,F.setHeartbeatTimeout(),F.remainingTransports=F.transports.slice(0),ne(F.transports),F.once("connect",function(){clearTimeout(F.connectTimeoutTimer),oe&&"function"==typeof oe&&oe()})};if(this.options["skipped handshake data"]){var J=this.options["skipped handshake data"];z("v4c-"+(new Date).getTime(),J.timeout,J.timeout,"websocket")}else this.handshake(z);return this},q.prototype.setHeartbeatTimeout=function(){clearTimeout(this.heartbeatTimeoutTimer);var oe=this;this.heartbeatTimeoutTimer=setTimeout(function(){oe.transport.onClose()},this.heartbeatTimeout)},q.prototype.packet=function(oe){return this.connected&&!this.doBuffer?this.transport.packet(oe):this.buffer.push(oe),this},q.prototype.setBuffer=function(oe){this.doBuffer=oe,!oe&&this.connected&&this.buffer.length&&(this.transport.payload(this.buffer),this.buffer=[])},q.prototype.disconnect=function(){return(this.connected||this.connecting)&&(this.open&&this.of("").packet({type:"disconnect"}),this.onDisconnect("booted")),this.disconnected=!0,this},q.prototype.disconnectSync=function(){Y.util.request().open("GET",this.resource+"/"+Y.protocol+"/"+this.sessionid,!0),this.onDisconnect("booted")},q.prototype.isXDomain=function(){return this.options.host!==K.location.hostname||this.options.port!=(K.location.port||("https:"==K.location.protocol?443:80))},q.prototype.onConnect=function(){this.connected||(this.connected=!0,this.connecting=!1,this.doBuffer||this.setBuffer(!1),this.emit("connect"))},q.prototype.onOpen=function(){this.open=!0},q.prototype.onClose=function(){this.open=!1,clearTimeout(this.heartbeatTimeoutTimer)},q.prototype.onPacket=function(oe){this.of(oe.endpoint).onPacket(oe)},q.prototype.onError=function(oe){oe&&oe.advice&&"reconnect"===oe.advice&&(this.connected||this.connecting)&&(this.disconnect(),this.options.reconnect&&this.reconnect()),this.publish("error",oe&&oe.reason?oe.reason:oe)},q.prototype.onDisconnect=function(oe){var F=this.connected,z=this.connecting;this.connected=!1,this.connecting=!1,this.open=!1,(F||z)&&(this.transport.close(),this.transport.clearTimeouts(),F?(this.publish("disconnect",oe),"booted"!=oe&&this.options.reconnect&&!this.reconnecting&&this.reconnect()):this.publish("close_during_connecting",oe))},q.prototype.reconnect=function(){function oe(){if(z.connected){for(var B in z.namespaces)z.namespaces.hasOwnProperty(B)&&""!==B&&z.namespaces[B].packet({type:"connect"});z.publish("reconnect",z.transport.name,z.reconnectionAttempts)}clearTimeout(z.reconnectionTimer),z.removeListener("connect_failed",F),z.removeListener("connect",F),z.reconnecting=!1,delete z.reconnectionAttempts,delete z.reconnectionDelay,delete z.reconnectionTimer,delete z.redoTransports,z.options["try multiple transports"]=fe}function F(){if(z.reconnecting)return z.connected?oe():z.connecting&&z.reconnecting?z.reconnectionTimer=setTimeout(F,1e3):void(z.reconnectionAttempts++>=J?z.redoTransports?(z.publish("reconnect_failed"),oe()):(z.on("connect_failed",F),z.options["try multiple transports"]=!0,z.transport=z.getTransport(),z.redoTransports=!0,z.connect()):(z.reconnectionDelay<_e&&(z.reconnectionDelay*=2),z.connect(),z.publish("reconnecting",z.reconnectionDelay,z.reconnectionAttempts),z.reconnectionTimer=setTimeout(F,z.reconnectionDelay)))}this.reconnecting=!0,this.reconnectionAttempts=0,this.reconnectionDelay=this.options["reconnection delay"];var z=this,J=this.options["max reconnection attempts"],fe=this.options["try multiple transports"],_e=this.options["reconnection limit"];this.options["try multiple transports"]=!1,this.reconnectionTimer=setTimeout(F,this.reconnectionDelay),this.on("connect",F)}}(void 0!==ye?ye:we.exports,void 0!==ye?ye:we.parent.exports,void 0===le?window:le),function(Oe,Y){function K(ie,oe){this.socket=ie,this.name=oe||"",this.flags={},this.json=new q(this,"json"),this.ackPackets=0,this.acks={}}function q(ie,oe){this.namespace=ie,this.name=oe}Oe.SocketNamespace=K,Y.util.mixin(K,Y.EventEmitter),K.prototype.$emit=Y.EventEmitter.prototype.emit,K.prototype.of=function(){return this.socket.of.apply(this.socket,arguments)},K.prototype.packet=function(ie){return ie.endpoint=this.name,this.socket.packet(ie),this.flags={},this},K.prototype.send=function(ie,oe){var F={type:this.flags.json?"json":"message",data:ie};return"function"==typeof oe&&(F.id=++this.ackPackets,F.ack=!0,this.acks[F.id]=oe),this.packet(F)},K.prototype.emit=function(ie){var oe=Array.prototype.slice.call(arguments,1),F=oe[oe.length-1],z={type:"event",name:ie};return"function"==typeof F&&(z.id=++this.ackPackets,z.ack="data",this.acks[z.id]=F,oe=oe.slice(0,oe.length-1)),z.args=oe,this.packet(z)},K.prototype.disconnect=function(){return""===this.name?this.socket.disconnect():(this.packet({type:"disconnect"}),this.$emit("disconnect")),this},K.prototype.onPacket=function(ie){function oe(){F.packet({type:"ack",args:Y.util.toArray(arguments),ackId:ie.id})}var F=this;switch(ie.type){case"connect":this.$emit("connect");break;case"disconnect":""===this.name?this.socket.onDisconnect(ie.reason||"booted"):this.$emit("disconnect",ie.reason||"");break;case"message":case"json":var z=["message",ie.data];"data"==ie.ack?z.push(oe):ie.ack&&this.packet({type:"ack",ackId:ie.id}),this.$emit.apply(this,z);break;case"event":z=[ie.name].concat(ie.args),"data"==ie.ack&&z.push(oe),this.$emit.apply(this,z);break;case"ack":this.acks[ie.ackId]&&(this.acks[ie.ackId].apply(this,ie.args),delete this.acks[ie.ackId]);break;case"error":ie.advice?this.socket.onError(ie):this.$emit("unauthorized"==ie.reason?"connect_failed":"error",ie.reason)}},q.prototype.send=function(){this.namespace.flags[this.name]=!0,this.namespace.send.apply(this.namespace,arguments)},q.prototype.emit=function(){this.namespace.flags[this.name]=!0,this.namespace.emit.apply(this.namespace,arguments)}}(void 0!==ye?ye:we.exports,void 0!==ye?ye:we.parent.exports),function(Oe,Y,K){function q(oe){Y.Transport.apply(this,arguments)}function ie(){}Oe.websocket=q,Y.util.inherit(q,Y.Transport),q.prototype.name="websocket",q.prototype.open=function(oe){var F,z=Y.util.query(this.socket.options.query),J=this;return this.connectErrorCallback=oe,F||(F=K.MozWebSocket||K.WebSocket),this.websocket=new F(this.prepareUrl(z)),this.websocket.onopen=function(){J.onOpen(),J.socket.setBuffer(!1)},this.websocket.onmessage=function(fe){J.onData(fe.data)},this.websocket.onclose=function(){J.onClose(),J.socket.setBuffer(!0)},this.websocket.onerror=function(fe){J.onError(fe)},this},q.prototype.send=function(oe){return this.websocket.send(oe),this},q.prototype.payload=function(oe){for(var F=0,z=oe.length;F<z;F++)this.packet(oe[F]);return this},q.prototype.close=function(){return this.websocket.close(),this},q.prototype.onError=function(oe){void 0!==this.connectErrorCallback&&(this.connectErrorCallback(),this.connectErrorCallback=void 0),this.socket.onError(oe)},q.prototype.scheme=function(){return this.socket.options.secure?"wss":"ws"},q.check=function(){return"WebSocket"in K&&!("__addTask"in WebSocket)||"MozWebSocket"in K},q.xdomainCheck=function(){return!0},q.prototype.clearEventHandlers=function(){return this.websocket&&(this.websocket.onopen=this.websocket.onmessage=this.websocket.onclose=this.websocket.onerror=ie),this},Y.transports.push("websocket")}(void 0!==ye?ye.Transport:we.exports,void 0!==ye?ye:we.parent.exports,void 0===le?window:le),function(Oe,Y,K){function q(oe){oe&&Y.Transport.apply(this,arguments)}function ie(){}Oe.XHR=q,Y.util.inherit(q,Y.Transport),q.prototype.open=function(){return this.socket.setBuffer(!1),this.onOpen(),this.get(),this.setCloseTimeout(),this},q.prototype.payload=function(oe){for(var F=[],z=0,J=oe.length;z<J;z++)F.push(Y.parser.encodePacket(oe[z]));this.send(Y.parser.encodePayload(F))},q.prototype.send=function(oe){return this.post(oe),this},q.prototype.post=function(oe){var J=this;this.socket.setBuffer(!0),this.sendXHR=this.request("POST"),K.XDomainRequest&&this.sendXHR instanceof XDomainRequest?this.sendXHR.onload=this.sendXHR.onerror=function z(){this.onload=ie,J.socket.setBuffer(!1)}:this.sendXHR.onreadystatechange=function F(){4==this.readyState&&(this.onreadystatechange=ie,200==this.status?(clearTimeout(this.ackTimeoutTimer),J.socket.setBuffer(!1)):J.onClose())},this.sendXHR.send(oe),J.sendXHR.ackTimeoutTimer=setTimeout(function(){J.onClose()},J.socket.options.ackTimeoutMs)},q.prototype.close=function(){return this.onClose(),this},q.prototype.request=function(oe){var F=Y.util.request(this.socket.isXDomain()),z=Y.util.query(this.socket.options.query,"t="+ +new Date);F.open(oe||"GET",this.prepareUrl(z),!0);var J=this.socket.options.requestHeaders;if(void 0!==J&&Object.keys(J).forEach(function(fe){F.setRequestHeader(fe,J[fe])}),"POST"==oe)try{F.setRequestHeader?F.setRequestHeader("Content-type","text/plain;charset=UTF-8"):F.contentType="text/plain"}catch(fe){}return F},q.prototype.scheme=function(){return this.socket.options.secure?"https":"http"},q.check=function(oe,F){try{var z=Y.util.request(F),J=K.XDomainRequest&&z instanceof XDomainRequest;if(z&&(!J||(oe&&oe.options&&oe.options.secure?"https:":"http:")==K.location.protocol))return!0}catch(B){}return!1},q.xdomainCheck=function(){return q.check(null,!0)},q.prototype.clearEventHandlers=function(){return this.sendXHR&&(this.sendXHR.onreadystatechange=this.sendXHR.onload=ie),this}}(void 0!==ye?ye.Transport:we.exports,void 0!==ye?ye:we.parent.exports,void 0===le?window:le),function(Oe,Y,K){function q(){Y.Transport.XHR.apply(this,arguments)}function ie(){}Oe["xhr-polling"]=q,Y.util.inherit(q,Y.Transport.XHR),Y.util.merge(q,Y.Transport.XHR),q.prototype.name="xhr-polling",q.prototype.open=function(oe){return this.connectErrorCallback=oe,Y.Transport.XHR.prototype.open.call(this),!1},q.prototype.get=function(){if(this.isOpened){var J=this;this.xhr=this.request(),K.XDomainRequest&&this.xhr instanceof XDomainRequest?(this.xhr.onload=function F(){J.connectErrorCallback=void 0,this.onload=ie,this.onerror=ie,J.onData(this.responseText),J.get()},this.xhr.onerror=function z(){J.onClose(),void 0!==J.connectErrorCallback&&(J.connectErrorCallback(),J.connectErrorCallback=void 0)}):this.xhr.onreadystatechange=function oe(){4==this.readyState&&(this.onreadystatechange=ie,200==this.status?(J.connectErrorCallback=void 0,J.onData(this.responseText),J.get()):(J.onClose(),void 0!==J.connectErrorCallback&&(J.connectErrorCallback(),J.connectErrorCallback=void 0)))},this.xhr.send(null)}},q.prototype.onClose=function(){if(Y.Transport.XHR.prototype.onClose.call(this),this.xhr){this.xhr.onreadystatechange=this.xhr.onload=this.xhr.onerror=ie;try{this.xhr.abort()}catch(oe){}this.xhr=null}},q.prototype.ready=function(oe,F){var z=this;Y.util.defer(function(){F.call(z)})},q.prototype.clearEventHandlers=function(){return Y.Transport.XHR.prototype.clearEventHandlers.call(this),this.xhr&&(this.xhr.onreadystatechange=this.xhr.onload=this.xhr.onerror=ie),this},Y.transports.push("xhr-polling")}(void 0!==ye?ye.Transport:we.exports,void 0!==ye?ye:we.parent.exports,void 0===le?window:le),de.io=ye}).call(de,De(13),De(14)(ke))},function(ke,de){var De;De=function(){return this}();try{De=De||Function("return this")()||(0,eval)("this")}catch(le){"object"==typeof window&&(De=window)}ke.exports=De},function(ke,de){ke.exports=function(De){return De.webpackPolyfill||(De.deprecate=function(){},De.paths=[],De.children||(De.children=[]),Object.defineProperty(De,"loaded",{enumerable:!0,get:function(){return De.l}}),Object.defineProperty(De,"id",{enumerable:!0,get:function(){return De.i}}),De.webpackPolyfill=1),De}},function(ke,de,De){Object.defineProperty(de,"__esModule",{value:!0}),de.ConnectionTracker=de.Properties=de.TrackerStep=de.ClientEventName=de.ResponseData=void 0;var Y,z,le=De(3),we=De(1),ye=De(0);de.ResponseData=function(){return function z(J){this.id=J,this.status=200,this.headers={},this.body=""}}(),(z=Y||(de.ClientEventName=Y={})).Connected="trouter_js_client_connected",z.Disconnected="trouter_js_client_disconnected",z.Error="trouter_js_client_error",z.Progress="trouter_js_client_progress",z.Response="trouter_js_client_response",z.Request="trouter_js_client_request",z.CheckConnection="trouter_js_client_check_connection",z.Registration="trouter_js_client_registration",z.Unregistration="trouter_js_client_unregistration";var K=function(){return function z(J,fe,_e,B,W){this.stepName=J,this.operation=fe,this.delta=_e,this.ts=B,this.error=W}}();de.TrackerStep=K,de.Properties=function(){return function z(){}}();var ie=function(){return function z(){this.numberOfPingReplies=0,this.connectedTimestamp=0,this.isNewUrl=!1,this.transportType="",this.connectionNumber=0}}(),oe=function(){return function z(){this.enabled=!1,this.numberOfStepsToMaintain=40,this.logHealthCheckError=!1,this.sendProgressTimeoutSecs=55,this.logSendPingError=!1,this.maxBackoffInMs=12e4,this.trouter_js_client_connected=!1,this.trouter_js_client_disconnected=!1,this.trouter_js_client_error=!1,this.trouter_js_client_progress=!1,this.trouter_js_client_response=!1,this.trouter_js_client_request=!1,this.trouter_js_client_registration=!1,this.trouter_js_client_unregistration=!1,this.trouter_js_client_check_connection=!0}}(),F=function(){function z(J,fe,_e,B,W,G,ne){this.clientId=fe,this.clientInfo=_e,this.getServerState=B,this.endpointId=W,this.clientCorrelationID=G,this.environment=ne,this.logger=new ye.Logger("ConnectionTracker",J),this.clientCorrelationID=void 0!==G?G:"",this.steps=[],this.connectionAttempt=0,this.totalStepCount=0,this.beginTimestamp=new le.Timespan,this.eventLogSettings=new oe,this.connectedInfo=new ie}return z.prototype.enable=function(J){this.eventLogSettings.enabled=!0,this.eventLogger=J},z.prototype.disable=function(){this.eventLogSettings.enabled=!1},z.prototype.sendProgress=function(J){this.steps.length>0&&this.sendTelemetry(Y.Progress,J,this.steps)},z.prototype.cancelProgressTimer=function(){void 0!==this.progressTimeout&&(clearTimeout(this.progressTimeout),this.progressTimeout=void 0)},z.prototype.resetProgressSendTimer=function(){var J=this;this.cancelProgressTimer(),void 0!==this.eventLogSettings.sendProgressTimeoutSecs&&this.eventLogSettings.sendProgressTimeoutSecs>0&&(this.progressTimeout=setTimeout(function(){J.sendProgress({reason:"timeout",timeoutSecs:J.eventLogSettings.sendProgressTimeoutSecs})},1e3*this.eventLogSettings.sendProgressTimeoutSecs))},z.prototype.setConnectedInfo=function(J,fe){this.connectedInfo.numberOfPingReplies=0,this.connectedInfo.connectedTimestamp=Date.now(),this.connectedInfo.isNewUrl=J,this.connectedInfo.transportType=fe,++this.connectedInfo.connectionNumber},z.prototype.clearConnectedInfo=function(){this.connectedInfo.numberOfPingReplies=0,this.connectedInfo.connectedTimestamp=0,this.connectedInfo.isNewUrl=!0,this.connectedInfo.transportType=""},z.prototype.copyProperties=function(J,fe){for(var _e=0,B=Object.keys(fe);_e<B.length;_e++){var W=B[_e];void 0!==fe[W]&&(J[W.replace(/-/g,"_")]={value:fe[W]})}},z.prototype.increasePingResponseCount=function(){++this.connectedInfo.numberOfPingReplies},z.prototype.sendTelemetry=function(J,fe,_e){try{if(!0===this.eventLogSettings.enabled&&!0===this.eventLogSettings[J]&&void 0!==this.eventLogger){var B=this.getServerState(),W={name:J,properties:{connectionAttempt:{value:this.connectionAttempt},epid:{value:this.endpointId},clientCorrelationID:{value:this.clientCorrelationID},steps:{value:(0,le.toJson)(_e)},clientID:{value:this.clientId},eventVersion:{value:3},environment:{value:this.environment},cv:{value:we.CLIENT_VERSION},ua:{value:this.clientInfo.ua},connectionId:{value:B.connectionId},connectedClientId:{value:B.connectedClientId},domId:{value:B.domId},url:{value:B.unsecureUrl},surl:{value:B.url},ttlInSecs:{value:B.getRemainingTtlInSec()},numberOfPingReplies:{value:this.connectedInfo.numberOfPingReplies},connectedTimestamp:{value:this.connectedInfo.connectedTimestamp},isNewUrl:{value:this.connectedInfo.isNewUrl},transportType:{value:this.connectedInfo.transportType},connectionNumber:{value:this.connectedInfo.connectionNumber}}};this.copyProperties(W.properties,fe),this.eventLogger.logEvent(W)}}catch(G){this.logger.warn("error in sending event ".concat(J,": ").concat((0,le.toJson)(G)))}},z.prototype.createStep=function(J,fe,_e){return new K(J,fe,this.beginTimestamp.duration,Date.now(),_e)},z.prototype.addStep=function(J,fe,_e){if(!1!==this.eventLogSettings.enabled&&(0===this.steps.length&&this.beginTimestamp.reset(),this.steps.push(this.createStep(J,fe,_e)),++this.totalStepCount,void 0!==this.eventLogSettings.numberOfStepsToMaintain&&this.steps.length>this.eventLogSettings.numberOfStepsToMaintain)){var B=this.steps.slice(0);this.steps.length=0,this.sendTelemetry(Y.Progress,{reason:"flush"},B)}},z.prototype.trackStart=function(J){this.addStep(J,"start")},z.prototype.trackEnd=function(J){this.addStep(J,"end")},z.prototype.trackError=function(J,fe,_e,B){void 0===_e&&(_e=!0),"health"===J&&!0!==this.eventLogSettings.logHealthCheckError||"ping"===J&&!1===this.eventLogSettings.logSendPingError||(void 0===B&&(B="error"),!0===_e&&this.addStep(J,B,fe),this.sendTelemetry(Y.Error,{},[this.createStep(J,B,fe)]))},z.prototype.trackProgress=function(J,fe){this.addStep(J,fe)},z.prototype.trackConnected=function(J,fe){this.setConnectedInfo(J,fe);var _e=this.steps.slice(0),B=this.totalStepCount,W=this.beginTimestamp.duration;this.steps.length=0,this.totalStepCount=0,this.sendTelemetry(Y.Connected,{stepCount:_e.length,totalStepCount:B,connectionEstablishmentMs_Total:W},_e),this.cancelProgressTimer()},z.prototype.getSessionLength=function(){return Date.now()-this.connectedInfo.connectedTimestamp},z.prototype.trackDisconnected=function(J){J.sessionLengthMS=this.getSessionLength(),this.sendTelemetry(Y.Disconnected,J,[]),this.resetProgressSendTimer()},z.prototype.trackNewConnection=function(){++this.connectionAttempt},z.prototype.trackRequest=function(J,fe){var _e={};void 0!==fe&&(_e.hasError=!0,_e.error=fe);try{if(J){_e.requestID=J.id,_e.httpMethod=J.method,_e.url=J.url,_e.bodyLength=J.body.length,_e.shortUrl=J.shortUrl,_e.requestTimeStamp=J.startTS,_e.correlationVector=J.correlationVector;for(var B=J.headers,W=0,G=Object.keys(B);W<G.length;W++){var ne=G[W];_e[ne]=B[ne]}}}catch(Z){_e.hasError=!0,_e.error="".concat(_e.error," error creating request context ").concat((0,le.toJson)(Z))}this.sendTelemetry(Y.Request,_e,[])},z.prototype.trackResponse=function(J,fe,_e,B){var W={};void 0!==B&&(W.hasError=!0,W.error=B);try{if(W.responseTimestamp=void 0!==_e?_e.sentTS:Date.now(),J){W.requestID=J.id,W.httpMethod=J.method,W.shortUrl=J.shortUrl,W.correlationVector=J.correlationVector;for(var G=J.headers,ne=0,Z=Object.keys(G);ne<Z.length;ne++){var ee=Z[ne];W[ee]=G[ee]}}_e&&(W.latencyMS=fe,W.responseCode=_e.status,W.responseLength=_e.body.length)}catch(re){W.hasError=!0,W.error="".concat(W.error," error creating response context ").concat((0,le.toJson)(re))}this.sendTelemetry(Y.Response,W,[])},z.prototype.sendResponseError=function(J,fe,_e){this.trackResponse(fe,void 0,_e,J)},z.prototype.close=function(){this.sendProgress({reason:"closed"}),this.steps.length=0,this.cancelProgressTimer()},z.prototype.mergeSettings=function(J){if(J){this.eventLogSettings.numberOfStepsToMaintain=Math.min(40,Math.max(10,void 0!==J.numberOfStepsToMaintain?J.numberOfStepsToMaintain:0));var fe=Math.min(3600,Math.max(55,void 0!==J.sendProgressTimeoutSecs?J.sendProgressTimeoutSecs:0));this.eventLogSettings.logHealthCheckError=J.logHealthCheckError,this.eventLogSettings.logSendPingError=J.logSendPingError;for(var _e=0,B=Object.keys(Y).map(function(G){return Y[G]});_e<B.length;_e++){var W=B[_e];void 0!==J[W]&&(this.eventLogSettings[W]=J[W])}this.eventLogSettings.sendProgressTimeoutSecs!==fe&&(this.eventLogSettings.sendProgressTimeoutSecs=fe,this.resetProgressSendTimer())}},z}();de.ConnectionTracker=F},function(ke,de,De){Object.defineProperty(de,"__esModule",{value:!0}),de.DisconnectReason=void 0;var le=function(){function we(ye,Oe,Y){this.reason=ye,this.claims=Oe,this.details=Y}return we.fromRawReason=function(ye,Oe){if(""===ye||"dup"===ye)return new we(ye);try{var Y=JSON.parse(ye);return"object"!=typeof Y||void 0===Y.reason?(null==Oe||Oe.error("invalid disconnect reason format"),new we("unknown",void 0,ye)):new we(Y.reason,Y.claims,Y.details)}catch(K){return new we("disconnect",void 0,ye)}},we.fromSocketIoEventData=function(ye,Oe){return"string"==typeof Oe?new we(ye,void 0,Oe):void 0},we.prototype.toTelemetryString=function(){return"socketerror"===this.reason||"reconnecterror"===this.reason||"disconnect"===this.reason?this.details:this.reason},we}();de.DisconnectReason=le},function(ke,de,De){Object.defineProperty(de,"__esModule",{value:!0}),de.ExponentialBackoff=void 0;var we=function(){function ye(Oe,Y,K){void 0===K&&(K={tolerance:2,minimumWaitMs:1e4}),this.logger=Oe,this.maxBackoffInMs=Y,this.gapDetectionSettings=K,this.backoffId=0,this.backoffCount=0}return ye.calculateNextBackoffMs=function(Oe,Y){var K=1+.4*(Math.random()-.5),q=1e3*Math.pow(2,Oe)*K;return q=Math.round(q),Math.min(Y,q)},ye.prototype.setMaxBackoffMs=function(Oe){this.maxBackoffInMs=Oe},ye.prototype.backoff=function(Oe,Y){var K=this;if(void 0!==this.timerHandle&&(this.logger.debug("Clearing current back off"),clearTimeout(this.timerHandle),this.timerHandle=void 0),void 0!==this.previousCompleteTime){var q=Date.now()-this.previousCompleteTime;q>this.maxBackoffInMs*this.gapDetectionSettings.tolerance&&q>this.gapDetectionSettings.minimumWaitMs&&(this.logger.info("Back off for ".concat(Oe," with ID ").concat(this.backoffId," will be reset due to a lot of time having passed since the previous backoff (").concat(q," ms)")),this.backoffCount=0,this.previousCompleteTime=void 0)}var ie=ye.calculateNextBackoffMs(this.backoffCount,this.maxBackoffInMs);this.backoffId++,this.backoffCount++,this.logger.info("Backing off ".concat(Oe," for ").concat(ie," milliseconds with ID ").concat(this.backoffId)),this.callback=function(F,z){(function le(ye,Oe,Y){if(void 0===ye||void 0===Oe)return!1;var K=Date.now()-ye;return K>Oe*Y.tolerance&&K>Y.minimumWaitMs})(F,z,K.gapDetectionSettings)&&(K.logger.info("Back off for ".concat(Oe," with ID ").concat(K.backoffId," will be reset due to the wait (").concat(Date.now()-(null!=F?F:0)," ms) being longer than expected (").concat(z," ms)")),K.backoffCount=0),K.logger.info("Back off for ".concat(Oe," with ID ").concat(K.backoffId," complete, invoking handler")),K.timerHandle=void 0,K.callback=void 0,K.previousCompleteTime=Date.now(),Y()};var oe=Date.now();this.timerHandle=setTimeout(function(){var F;return null===(F=K.callback)||void 0===F?void 0:F.call(K,oe,ie)},ie)},ye.prototype.reset=function(){void 0!==this.timerHandle&&(this.logger.debug("Resetting back off with ID ".concat(this.backoffId)),clearTimeout(this.timerHandle),this.timerHandle=void 0,this.callback=void 0),this.backoffCount=0},ye.prototype.expediteIfPending=function(){if(this.backoffCount=0,void 0!==this.timerHandle){this.logger.debug("Expediting back off with ID ".concat(this.backoffId)),clearTimeout(this.timerHandle),this.timerHandle=void 0;var Oe=this.callback;this.callback=void 0,Oe&&Oe()}},ye}();de.ExponentialBackoff=we},function(ke,de,De){var le=this&&this.__spreadArray||function(Y,K,q){if(q||2===arguments.length)for(var ie,oe=0,F=K.length;oe<F;oe++)!ie&&oe in K||(ie||(ie=Array.prototype.slice.call(K,0,oe)),ie[oe]=K[oe]);return Y.concat(ie||Array.prototype.slice.call(K))};Object.defineProperty(de,"__esModule",{value:!0}),de.LoggingManagerConsumer=de.RegistrationEnforcer=void 0;var we=De(6),ye=function(){function Y(K,q,ie){this.wrapped=K,this.shouldConnectionDependOnRegistration=q,this.shouldHoldBackEvents=ie,this.isRegistered=!1,this.heldBackEvents=[]}return Y.prototype.onDownstreamRequest=function(K,q,ie){this.passIfRegisteredOrNotNeeded("onDownstreamRequest",K,q,ie)},Y.prototype.onConnected=function(K){this.passIfRegisteredOrNotNeeded("onConnected",K)},Y.prototype.onRegistered=function(K){this.isRegistered=!0,this.wrapped.onRegistered(K),this.fireHeldBackEvents()},Y.prototype.onUnregistered=function(K){this.isRegistered=!1,this.wrapped.onUnregistered(K),K.getState()===we.State.Connected&&this.shouldConnectionDependOnRegistration()&&K.forceReconnectDueToNoRegistration()},Y.prototype.onReconnecting=function(K){this.wrapped.onReconnecting(K)},Y.prototype.onReconnectIsRequired=function(K,q,ie){this.wrapped.onReconnectIsRequired(K,q,ie)},Y.prototype.onDisconnected=function(K){this.isRegistered=!1,this.dropHeldBackEvents(),this.wrapped.onDisconnected(K)},Y.prototype.onTerminalError=function(K){this.wrapped.onTerminalError(K)},Y.prototype.onConnectionParametersUpdated=function(K){this.wrapped.onConnectionParametersUpdated(K)},Y.prototype.onTrouterMessageLost=function(K){this.passIfRegisteredOrNotNeeded("onTrouterMessageLost",K)},Y.prototype.onUserActivityStateAccepted=function(K){this.passIfRegisteredOrNotNeeded("onUserActivityStateAccepted",K)},Y.prototype.onAudiencesSetResolved=function(K,q){this.passIfRegisteredOrNotNeeded("onAudiencesSetResolved",K,q)},Y.prototype.getState=function(){return this.wrapped.getState()},Y.prototype.holdBackEvent=function(K){for(var q=[],ie=1;ie<arguments.length;ie++)q[ie-1]=arguments[ie];this.heldBackEvents.push({kind:K,args:q})},Y.prototype.passIfRegisteredOrNotNeeded=function(K){for(var q,ie=[],oe=1;oe<arguments.length;oe++)ie[oe-1]=arguments[oe];var F=this.shouldConnectionDependOnRegistration(),z=this.shouldHoldBackEvents();F&&z||this.fireHeldBackEvents(F?function(J){return"onConnected"!==J.kind}:void 0),this.isRegistered||!F||!1===z&&"onConnected"!==K?(q=this.wrapped)[K].apply(q,ie):this.holdBackEvent.apply(this,le([K],ie,!1))},Y.prototype.fireHeldBackEvents=function(K){for(var q,ie=0,oe=this.heldBackEvents;ie<oe.length;ie++){var F=oe[ie];(void 0===K||K(F))&&(q=this.wrapped)[F.kind].apply(q,F.args)}this.heldBackEvents=void 0===K?[]:this.heldBackEvents.filter(function(z){return!K(z)})},Y.prototype.dropHeldBackEvents=function(){this.heldBackEvents=[]},Y}();de.RegistrationEnforcer=ye;var Oe=function(){function Y(K,q,ie,oe){this.wrapped=K,this.prefix=q,this.logger=ie,this.onEventAction=oe}return Y.prototype.onEvent=function(K,q){var ie;void 0!==this.onEventAction?this.onEventAction(K,q):(null!==(ie=this.logger)&&void 0!==ie?ie:console).log("".concat(this.prefix," TracingEnforcer: ").concat(K,"(").concat(q,")"))},Y.prototype.onDownstreamRequest=function(K,q,ie){this.onEvent("onDownstreamRequest",JSON.stringify({request:q,response:ie})),this.wrapped.onDownstreamRequest(K,q,ie)},Y.prototype.onConnected=function(K){this.onEvent("onConnected",K.getState().toString()),this.wrapped.onConnected(K)},Y.prototype.onRegistered=function(K){this.onEvent("onRegistered",K.getState().toString()),this.wrapped.onRegistered(K)},Y.prototype.onUnregistered=function(K){this.onEvent("onUnregistered",K.getState().toString()),this.wrapped.onUnregistered(K)},Y.prototype.onReconnecting=function(K){this.onEvent("onReconnecting",K.getState().toString()),this.wrapped.onReconnecting(K)},Y.prototype.onReconnectIsRequired=function(K,q,ie){this.onEvent("onReconnectIsRequired",JSON.stringify({connection:K.getState().toString(),useConnectParamsFromCache:q,reason:ie})),this.wrapped.onReconnectIsRequired(K,q,ie)},Y.prototype.onDisconnected=function(K){this.onEvent("onDisconnected",K.getState().toString()),this.wrapped.onDisconnected(K)},Y.prototype.onTerminalError=function(K){this.onEvent("onTerminalError",JSON.stringify({connection:K})),this.wrapped.onTerminalError(K)},Y.prototype.onConnectionParametersUpdated=function(K){this.onEvent("onConnectionParametersUpdated",JSON.stringify({connectParams:K})),this.wrapped.onConnectionParametersUpdated(K)},Y.prototype.onTrouterMessageLost=function(K){this.onEvent("onTrouterMessageLost",JSON.stringify({flowTags:K})),this.wrapped.onTrouterMessageLost(K)},Y.prototype.onUserActivityStateAccepted=function(K){this.onEvent("onUserActivityStateAccepted",JSON.stringify({cv:K})),this.wrapped.onUserActivityStateAccepted(K)},Y.prototype.onAudiencesSetResolved=function(K,q){this.onEvent("onAudiencesSetResolved",JSON.stringify({audienceSubscriptionsResponse:K,cv:q})),this.wrapped.onAudiencesSetResolved(K,q)},Y.prototype.getState=function(){return this.wrapped.getState()},Y}();de.LoggingManagerConsumer=Oe},function(ke,de,De){Object.defineProperty(de,"__esModule",{value:!0}),de.TrouterManagerFsm=void 0;var le=De(2),we=De(4),ye=De(0),Oe=De(7),Y=function(){function K(q,ie){this.worker=ie,this.state=we.TrouterManagerState.Unknown,this.logger=new ye.Logger("ManagerFsm",q)}return K.prototype.start=function(){this.state===we.TrouterManagerState.Unknown?(this.setState(we.TrouterManagerState.Disconnected),this.worker.forceStopLingeringConnection(),this.worker.startFirstConnection()):(this.logger.info("start called in state '".concat(we.TrouterManagerState[this.state],"', expediting pending backoffs, if any")),this.worker.expediteBackoffOnConnections())},K.prototype.stop=function(q){this.state!==we.TrouterManagerState.Unknown?(this.setState(we.TrouterManagerState.Unknown),this.worker.stopFirstConnection(!0===q),this.worker.stopSecondConnection(!0===q)):this.showIgnored("stop")},K.prototype.getState=function(){switch(this.state){case we.TrouterManagerState.Unknown:case we.TrouterManagerState.Connected:case we.TrouterManagerState.Disconnected:case we.TrouterManagerState.Switching:return this.state;case we.TrouterManagerState.TerminalError:return le.TrouterState.Disconnected}},K.prototype.getInternalState=function(){return this.state},K.prototype.onConnected=function(q){this.state===we.TrouterManagerState.Disconnected&&q?this.worker.doesSecondConnectionExist()?this.setState(we.TrouterManagerState.Switching):(this.setState(we.TrouterManagerState.Connected),this.worker.dispatchConnected()):this.showIgnored("onConnected(".concat(q,")"))},K.prototype.onRegistered=function(q){this.state!==we.TrouterManagerState.Disconnected||q?this.state!==we.TrouterManagerState.Switching||q?this.state===we.TrouterManagerState.Disconnected&&q&&(this.setState(we.TrouterManagerState.Connected),this.worker.dispatchConnected()):(this.setState(we.TrouterManagerState.Connected),this.worker.switchConnections(),this.worker.stopSecondConnectionDelayed(),this.worker.dispatchConnected()):(this.setState(we.TrouterManagerState.Connected),this.worker.switchConnections(),this.worker.stopSecondConnection(!0),this.worker.dispatchConnected()),this.worker.dispatchRegistrationState(!0)},K.prototype.onUnregistered=function(q){q&&this.worker.dispatchRegistrationState(!1)},K.prototype.onReconnecting=function(q){this.state!==we.TrouterManagerState.Connected&&this.state!==we.TrouterManagerState.Switching||!q?this.showIgnored("onReconnecting(".concat(q,")")):(this.setState(we.TrouterManagerState.Disconnected),this.worker.dispatchDisconnected())},K.prototype.onReconnectionRequired=function(q,ie,oe){this.state===we.TrouterManagerState.Connected&&q?(this.setState(we.TrouterManagerState.Switching),this.worker.startSecondConnection(ie)):this.state===we.TrouterManagerState.Disconnected&&q?this.worker.startSecondConnection(ie):this.state===we.TrouterManagerState.Switching&&q&&oe===Oe.ReconnectReason.Configuration?(this.logger.debug("onReconnectionRequired: switch requested while already in Switching state"),this.worker.stopSecondConnection(!0),this.worker.startSecondConnection(ie)):this.showIgnored("onReconnectionRequired(".concat(q,")"))},K.prototype.onDisconnected=function(q){this.state==we.TrouterManagerState.Unknown&&q?this.worker.dispatchDisconnected():this.state==we.TrouterManagerState.Switching&&q?(this.worker.switchConnections(),this.worker.stopSecondConnection(!1),this.setState(we.TrouterManagerState.Disconnected),this.worker.dispatchDisconnected()):this.showIgnored("onDisconnected(".concat(q,")"))},K.prototype.onTerminalError=function(){this.setState(we.TrouterManagerState.TerminalError),this.worker.dispatchTerminalError()},K.prototype.showIgnored=function(q){this.logger.info("Ignoring event '".concat(q,"' in state '").concat(we.TrouterManagerState[this.state],"'"))},K.prototype.setState=function(q){this.logger.info("Switching from state '".concat(we.TrouterManagerState[this.state],"' to state '").concat(we.TrouterManagerState[q],"'")),this.state!==q?this.state=q:this.logger.error("Attempt to switch to the current state '".concat(we.TrouterManagerState[q],"'"))},K}();de.TrouterManagerFsm=Y},function(ke,de,De){function le(Z,ee){if(!ee)return Z;var re=ie(ie({},Z),{enabled:ee.TelemetryEnabled});return void 0!==ee.ClientTelemetryEventEnabled&&(re=ie(ie({},re),ee.ClientTelemetryEventEnabled)),re}function we(Z,ee,re){var We,Ge,qe,Ze,Wt,Gt,X,x,te,me,ue=function(be){return Z.proxyUrlRewrite?(ee.info("Using rewritten URL for proxy"),Z.proxyUrlRewrite(be)):be};return{clientInfo:{ua:Z.trouterSettings.productName,v:Z.trouterSettings.version},ioOptions:{ackTimeoutMs:5e3,rewriteUrlForProxy:ue},clientCorrelationID:Z.trouterSettings.sessionId,environment:Z.trouterSettings.environment,telemetrySettings:le(Z.telemetryConfig.settings,re),eventLogger:Z.telemetryConfig.eventLogger,endpointId:Z.trouterSettings.registrationId,trouterUrl:(null==re?void 0:re.TrouterConnectionUrl)||Z.trouterSettings.trouterServiceUrl,registration:Z.trouterSettings.registrarServiceUrl?{registrarUrl:Z.trouterSettings.registrarServiceUrl,registrationId:null!==(We=Z.trouterSettings.registrationId)&&void 0!==We?We:"",pnhAppId:null!==(Ge=Z.trouterSettings.pnhAppId)&&void 0!==Ge?Ge:"",platform:null!==(qe=Z.trouterSettings.platform)&&void 0!==qe?qe:"",pnhTemplateKey:null!==(Ze=Z.trouterSettings.pnhTemplate)&&void 0!==Ze?Ze:"",platformUIVersion:null!==(Wt=Z.trouterSettings.platformUIVersion)&&void 0!==Wt?Wt:"",productContext:Z.trouterSettings.pnhProductContext||void 0,context:null!==(Gt=Z.trouterSettings.pnhContext)&&void 0!==Gt?Gt:"",registrarTtlSec:(null!==(X=Z.trouterSettings.maxRegistrationTimeInMs)&&void 0!==X?X:0)/1e3}:void 0,connectionDependsOnRegistration:void 0===Z.trouterSettings.registrarServiceUrl?function(){return!1}:null!==(x=Z.trouterSettings.connectionDependsOnRegistration)&&void 0!==x?x:function(){return!1},delayEventsUntilRegistered:null!==(te=Z.trouterSettings.delayEventsUntilRegistered)&&void 0!==te?te:function(){return!1},timeoutOptions:ie({connectionTimeoutMs:Z.trouterSettings.trouterConnectTimeoutInMs||3e4,fetchTimeoutMs:1e4,pingTimeoutMs:4e4,pongTimeoutMs:5e3,maxBackoffMs:"TeamsCDL"===Z.trouterSettings.productName?3e5:3e4,requestTimeoutMs:5e3,userActivityResponseTimeoutMs:1e4},Z.trouterSettings.timeoutOptions),incallTimeoutOptions:ie({connectionTimeoutMs:1e4,fetchTimeoutMs:5e3,pingTimeoutMs:5e3,pongTimeoutMs:2e3,maxBackoffMs:"TeamsCDL"===Z.trouterSettings.productName?3e5:1e4,requestTimeoutMs:5e3,userActivityResponseTimeoutMs:1e4},Z.trouterSettings.incallTimeoutOptions),incallModeTimeoutMs:null!==(me=Z.trouterSettings.incallModeTimeoutMs)&&void 0!==me?me:0,lingeringConnectionDelayMs:6e4,userActivitySecondResendDelayMs:Z.trouterSettings.userActivitySecondResendDelayMs||1e4,duplicateDisconnectThresholdMs:1e4,connectionCache:Z.connectionCache,registrationStateCallback:Z.registrationStateCallbackForAcsDoNotUse,rewriteUrlForProxy:ue,retryLimitOnTokenFetch:Z.trouterSettings.retryLimitOnTokenFetch,extraConnectionHeaders:Z.trouterSettings.extraConnectionHeaders,expediteBackoffOnStartMinimumDelayMs:1e4,toJSON:function(){return ie(ie({},this),{connectionCache:this.connectionCache?{}:this.connectionCache})}}}var ie=this&&this.__assign||function(){return ie=Object.assign||function(Z){for(var ee,re=1,We=arguments.length;re<We;re++)for(var Ge in ee=arguments[re])Object.prototype.hasOwnProperty.call(ee,Ge)&&(Z[Ge]=ee[Ge]);return Z},ie.apply(this,arguments)},oe=this&&this.__awaiter||function(Z,ee,re,We){return new(re||(re=Promise))(function(qe,Ze){function Wt(x){try{X(We.next(x))}catch(te){Ze(te)}}function Gt(x){try{X(We.throw(x))}catch(te){Ze(te)}}function X(x){x.done?qe(x.value):function Ge(qe){return qe instanceof re?qe:new re(function(Ze){Ze(qe)})}(x.value).then(Wt,Gt)}X((We=We.apply(Z,ee||[])).next())})},F=this&&this.__generator||function(Z,ee){function re(X){return function(x){return function We(X){if(Ge)throw new TypeError("Generator is already executing.");for(;Wt&&(Wt=0,X[0]&&(Gt=0)),Gt;)try{if(Ge=1,qe&&(Ze=2&X[0]?qe.return:X[0]?qe.throw||((Ze=qe.return)&&Ze.call(qe),0):qe.next)&&!(Ze=Ze.call(qe,X[1])).done)return Ze;switch(qe=0,Ze&&(X=[2&X[0],Ze.value]),X[0]){case 0:case 1:Ze=X;break;case 4:return Gt.label++,{value:X[1],done:!1};case 5:Gt.label++,qe=X[1],X=[0];continue;case 7:X=Gt.ops.pop(),Gt.trys.pop();continue;default:if(!(Ze=(Ze=Gt.trys).length>0&&Ze[Ze.length-1])&&(6===X[0]||2===X[0])){Gt=0;continue}if(3===X[0]&&(!Ze||X[1]>Ze[0]&&X[1]<Ze[3])){Gt.label=X[1];break}if(6===X[0]&&Gt.label<Ze[1]){Gt.label=Ze[1],Ze=X;break}if(Ze&&Gt.label<Ze[2]){Gt.label=Ze[2],Gt.ops.push(X);break}Ze[2]&&Gt.ops.pop(),Gt.trys.pop();continue}X=ee.call(Z,Gt)}catch(x){X=[6,x],qe=0}finally{Ge=Ze=0}if(5&X[0])throw X[1];return{value:X[0]?X[1]:void 0,done:!0}}([X,x])}}var Ge,qe,Ze,Wt,Gt={label:0,sent:function(){if(1&Ze[0])throw Ze[1];return Ze[1]},trys:[],ops:[]};return Wt={next:re(0),throw:re(1),return:re(2)},"function"==typeof Symbol&&(Wt[Symbol.iterator]=function(){return this}),Wt};Object.defineProperty(de,"__esModule",{value:!0}),de.replaceTrouterUrlBase=de.getTrouterServiceVersion=de.createTrouterService=de.TrouterService=de.UserActivityState=de.TrouterState=void 0;var z=De(1),J=De(2);Object.defineProperty(de,"TrouterState",{enumerable:!0,get:function(){return J.TrouterState}}),Object.defineProperty(de,"UserActivityState",{enumerable:!0,get:function(){return J.UserActivityState}});var fe=De(0),_e=De(8),B=De(9),W=De(10),G=De(11),ne=function(){function Z(ee){this.logProvider=ee,this.stateChangedListeners=[],this.logger=new fe.Logger("Trouter",ee),this.trouterUrlPromise=new G.TrouterUrlPromise(ee),this.messageHandlers=new _e.MessageHandlerRegistry(ee),this.listeners={},this.connectionInfo=null,this.logger.info("Created TrouterService version ".concat(z.CLIENT_VERSION))}return Z.prototype.start=function(ee){var re;if(this.logger.info("Start"),!ee.skypeTokenProvider&&!ee.authTokenProvider)throw new Error("no token provider has been configured, either skypeTokenProvider or authTokenProvider must be populated");ee.skypeTokenProvider&&!ee.trouterSettings.disableInternalSkypeTokenCache&&(ee.skypeTokenProvider=(0,B.addCacheAsBackupTo)(ee.skypeTokenProvider)),this.trouterCfg=ee;var We=we(ee,this.logger,this.ecsCfg);!1===ee.internalEnableV4cProtocol&&(We.forceV4aProtocol=!0);var Ge=function q(Z,ee){var re,We=this;return function(Ge){return oe(We,void 0,void 0,function(){var qe,Ze,Wt;return F(this,function(Gt){switch(Gt.label){case 0:qe=new Date,Ze=setInterval(function(){var X=Math.round((Date.now()-qe.getTime())/6e4);Z.warn("Note: Trouter auth token request promise from ".concat(qe.toISOString()," has not been resolved for ").concat(X," minutes. The client is blocked from operating properly"))},3e5),Gt.label=1;case 1:return Gt.trys.push([1,,3,4]),[4,ee(Ge)];case 2:return Wt=Gt.sent(),Ge.needFresh&&Wt.token===re&&Z.error("API violation: Trouter auth token provider got a request with needRefresh=true, but returned the same token as last time anyway. Please fix the host app"),re=Wt.token,[2,Wt];case 3:return clearInterval(Ze),[7];case 4:return[2]}})})}}(this.logger,null!==(re=ee.authTokenProvider)&&void 0!==re?re:function K(Z){var ee=this;return function(re){return oe(ee,void 0,void 0,function(){var We;return F(this,function(Ge){switch(Ge.label){case 0:return We={},[4,Z(re.needFresh)];case 1:return[2,(We.token=Ge.sent(),We.tokenType="skype",We)]}})})}}(ee.skypeTokenProvider));void 0===this.trouterServer&&(this.trouterServer=new W.TrouterManager(this.logProvider,We,Ge,void 0===ee.authTokenProvider,this)),void 0!==this.pendingActivityState&&(this.trouterServer.setUserActivityState(this.pendingActivityState[0],this.pendingActivityState[1]),this.pendingActivityState=void 0),this.trouterServer.start()},Z.prototype.stop=function(ee){this.logger.info("close connection"),this.trouterUrlPromise.rejectUrl(new Error("TrouterService is stopped")),void 0!==this.trouterServer&&this.trouterServer.stop(ee)},Z.prototype.setEcsConfig=function(ee){return oe(this,void 0,void 0,function(){var re=this;return F(this,function(We){return[2,new Promise(function(Ge){if(re.ecsCfg=ee.TrouterJScriptClient,re.logger.info("Setting ECS configuration to ".concat(JSON.stringify(re.ecsCfg))),void 0!==re.trouterServer&&void 0!==re.trouterCfg){var qe=we(re.trouterCfg,re.logger,re.ecsCfg);re.trouterServer.configure(qe)}Ge()})]})})},Z.prototype.checkConnection=function(ee){void 0!==this.trouterServer&&this.trouterServer.checkConnection(null!=ee&&ee)},Z.prototype.resendRegistration=function(){return oe(this,void 0,void 0,function(){return F(this,function(ee){if(!this.trouterServer)throw new Error("resendRegistration called too early");return[2,this.trouterServer.resendRegistration()]})})},Z.prototype.registerListener=function(ee,re){return""===re||!re.startsWith("/")||re.includes("?")||re.includes("#")?(this.logger.error("Listener path '".concat(re,"' is not valid")),!1):this.listeners[re]?(this.logger.error("Another listener is already registered for path '".concat(re,"'")),!1):(this.listeners[re]=ee,this.logger.debug("Listener for path '".concat(re,"' registered")),this.connectionInfo&&ee.onTrouterConnected(this.connectionInfo.baseEndpointUrl+re,this.connectionInfo),!0)},Z.prototype.unregisterListener=function(ee){for(var re=[],We=0,Ge=Object.keys(this.listeners);We<Ge.length;We++)this.listeners[qe=Ge[We]]===ee&&re.push(qe);if(0===re.length)return!1;for(var Ze=0,Wt=re;Ze<Wt.length;Ze++){var qe;delete this.listeners[qe=Wt[Ze]]}return this.logger.debug("Listener for path(s) '".concat(re.join("', '"),"' unregistered")),!0},Z.prototype.onTrouterConnected=function(ee,re){this.logger.debug("Trouter is now connected");for(var We=0,Ge=Object.keys(this.listeners);We<Ge.length;We++){var qe=Ge[We];try{this.listeners[qe].onTrouterConnected(re.baseEndpointUrl+qe,re)}catch(Ze){this.logger.error("Listener '".concat(qe,"' threw an exception from onTrouterConnected(): ").concat(Ze))}}this.connectionInfo=re,this.trouterUrlPromise.resolveUrl(ee),this.notifyStateChanged(J.TrouterState.Connected,{url:ee,getRemainingTtlInSec:function(){return re.connectionTtlSec}})},Z.prototype.onTrouterDisconnected=function(){this.logger.debug("Trouter is now disconnected"),this.connectionInfo=null;for(var ee=0,re=Object.keys(this.listeners);ee<re.length;ee++){var We=re[ee],Ge=this.listeners[We];if(Ge.onTrouterDisconnected)try{Ge.onTrouterDisconnected()}catch(qe){this.logger.error("Listener '".concat(We,"' threw an exception from onTrouterDisconnected(): ").concat(qe))}}this.notifyStateChanged(J.TrouterState.Disconnected)},Z.prototype.onTrouterRequest=function(ee,re){for(var We="",Ge=0,qe=Object.keys(this.listeners);Ge<qe.length;Ge++){var Ze=qe[Ge];ee.path.startsWith(Ze)&&Ze.length>We.length&&(We=Ze)}if(""===We)this.tryMessageHandlers(ee,re)||(re.status=404,re.headers={"Trouter-Responder":"ClientLib"},re.send());else try{this.listeners[We].onTrouterRequest(ee,re)}catch(Wt){this.logger.error("Listener '".concat(We,"' threw an exception from onTrouterRequest(): ").concat(Wt)),re.status=500,re.headers={"Trouter-Responder":"ClientLib"},re.send()}},Z.prototype.onTrouterMessageLoss=function(ee){this.logger.info("onTrouterMessageLoss called with tags [".concat(ee,"]"));for(var re=!0,We=0,Ge=Object.keys(this.listeners);We<Ge.length;We++){var qe=Ge[We],Ze=this.listeners[qe];if(Ze.onTrouterMessageLoss)try{void 0===(re=Ze.onTrouterMessageLoss(ee)&&re)&&(this.logger.error("Listener '".concat(qe,"' did not return a boolean value from onTrouterMessageLoss()")),re=!1)}catch(Wt){this.logger.error("Listener '".concat(qe,"' threw an exception from onTrouterMessageLoss(): ").concat(Wt)),re=!1}}return re},Z.prototype.onTrouterUserActivityStateAccepted=function(ee){this.logger.debug("onTrouterUserActivityStateAccepted cv: ".concat(ee));for(var re=0,We=Object.keys(this.listeners);re<We.length;re++){var Ge=We[re],qe=this.listeners[Ge];if(qe.onTrouterUserActivityStateAccepted)try{qe.onTrouterUserActivityStateAccepted(ee)}catch(Ze){this.logger.error("Listener '".concat(Ge,"' threw an exception from onTrouterUserActivityStateAccepted(): ").concat(Ze))}}},Z.prototype.onAudiencesSetResolved=function(ee,re){this.logger.debug("onAudiencesSetResolved cv: ".concat(re));for(var We=0,Ge=Object.keys(this.listeners);We<Ge.length;We++){var qe=Ge[We],Ze=this.listeners[qe];if(Ze.onAudiencesSetResolved)try{Ze.onAudiencesSetResolved(ee,re)}catch(Wt){this.logger.error("Listener '".concat(qe,"' threw an exception from onAudienceSubscribed(): ").concat(Wt))}}},Z.prototype.setUserActivityState=function(ee,re){if(ee!==J.UserActivityState.Active&&ee!==J.UserActivityState.Inactive)throw new Error("setUserActivityState called with unsupported value ".concat(ee));this.logger.info("setUserActivityState called with value ".concat(J.UserActivityState[ee])),this.trouterServer&&this.state()!==J.TrouterState.Unknown?this.trouterServer.setUserActivityState(ee,re):(this.pendingActivityState=[ee,re],this.logger.warn("setUserActivityState called before start() or after stop()"))},Z.prototype.setAudienceSubscriptions=function(ee,re){if(ee.audienceSubscriptions.length>1)throw new Error("Only singular audience subscription is supported");if(this.trouterServer&&this.state()!==J.TrouterState.Unknown)return this.trouterServer.setAudienceSubscriptionsAsync(ee,15e3,re);throw new Error("audience subscribe called before start() or after stop()")},Z.prototype.state=function(){return void 0!==this.trouterServer?this.trouterServer.getState():J.TrouterState.Unknown},Z.prototype.isInTerminalState=function(){return void 0!==this.trouterServer&&this.trouterServer.isInTerminalState()},Z.prototype.reportStateInfo=function(){return void 0===this.trouterServer?"":this.trouterServer.reportStateInfo()},Z.prototype.getServerState=function(){if(void 0!==this.trouterServer)return this.trouterServer.getServerState()},Z.prototype.getTrouterUrlAsync=function(){return void 0!==this.trouterServer?this.trouterUrlPromise.getPromise():Promise.reject(new Error("TrouterService has not been started"))},Z.prototype.onStateChanged=function(ee){if(this.logger.info("onStateChanged called"),void 0===ee)this.stateChangedListeners=this.stateChangedListeners.filter(function(We){return void 0===We.wrappedCallback});else{this.offStateChanged(ee);var re=function(We,Ge){ee(We,Ge?Ge.url:"")};re.wrappedCallback=ee,this.stateChangedListeners.push(re)}},Z.prototype.offStateChanged=function(ee){this.logger.info("offStateChanged called");var re=this.stateChangedListeners.length;return this.stateChangedListeners=this.stateChangedListeners.filter(function(We){return We.wrappedCallback!==ee}),re>this.stateChangedListeners.length},Z.prototype.addCallback=function(ee){this.logger.info("addListener called"),-1===this.stateChangedListeners.indexOf(ee,0)&&void 0!==ee&&this.stateChangedListeners.push(ee)},Z.prototype.removeCallback=function(ee){this.logger.info("removeListener called");var re=this.stateChangedListeners.indexOf(ee,0);return re>-1&&(this.stateChangedListeners.splice(re,1),!0)},Z.prototype.registerMessageHandler=function(ee){this.logger.info("registerMessageHandler is called"),this.messageHandlers.register(ee)},Z.prototype.clearMessageHandlers=function(){this.logger.info("clearMessageHandlers is called"),this.messageHandlers.clear()},Z.prototype.notifyStateChanged=function(ee,re){var We=this;this.logger.info("notifyStateChanged called, will forward to ".concat(this.stateChangedListeners.length," listeners")),this.stateChangedListeners.forEach(function(Ge){try{Ge(ee,re)}catch(qe){We.logger.error("Error in callback ".concat(qe))}})},Z.prototype.tryMessageHandlers=function(ee,re){if(!this.messageHandlers.active())return!1;var We,Ge=null;try{Ge=(We=JSON.parse(ee.body))&&(We.evt||We.eventId)||null}catch(Wt){}var Ze=this.messageHandlers.handleMessage({eventId:Ge,url:(this.connectionInfo?this.connectionInfo.baseEndpointUrl:"")+ee.path,body:We,rawBody:ee.body,headers:ee.headers});return!!Ze.isHandled&&(re.status=Ze.resultCode,Ze.responseHeaders&&(re.headers=Ze.responseHeaders),Ze.responseBody&&(re.body=Ze.responseBody),re.send(),!0)},Z}();de.TrouterService=ne,de.createTrouterService=function ye(Z){return new ne(Z)},de.getTrouterServiceVersion=function Oe(){return z.CLIENT_VERSION},de.replaceTrouterUrlBase=function Y(Z,ee){var re=Z.indexOf("://");if(re>=0){var We=Z.indexOf("/",re+3);if(We>=0)return ee+Z.substr(We)}return""}},function(ke,de){ke.exports=lt}]))});Qe(tt);var Nt=Be(function(Vt,Tt){Object.defineProperty(Tt,"__esModule",{value:!0}),Tt.DeleteReason=void 0;var lt=function(ke){return ke.DeletedByPolicy="deletedByPolicy",ke.DeletedByUser="deletedByUser",ke}(lt||(Tt.DeleteReason=lt={}))});Qe(Nt);var bt=Be(function(Vt,Tt){Object.defineProperty(Tt,"__esModule",{value:!0}),Tt.PACKAGE_VERSION=Tt.CONFIG_API_VERSION=Tt.EudbCountries=Tt.CloudPrefix=Tt.CloudType=Tt.MAX_NUMBER_OF_TOKEN_FETCH_RETRIES=void 0,Tt.MAX_NUMBER_OF_TOKEN_FETCH_RETRIES=3;var lt=function(de){return de.Public="Public",de.GccHigh="GCC High",de.Dod="DoD",de}(lt||(Tt.CloudType=lt={})),ke=function(de){return de.OrgId="orgid",de.Acs="acs",de.Spool="spool",de.GccHigh="gcch",de.GccHighAcs="gcch-acs",de.Dod="dod",de.DodAcs="dod-acs",de}(ke||(Tt.CloudPrefix=ke={}));Tt.EudbCountries=["europe","france","germany","norway","switzerland","sweden"],Tt.CONFIG_API_VERSION="2024-09-01",Tt.PACKAGE_VERSION="1.0.0-beta.34"});Qe(bt);var Mt=Nt,pt=bt,Ve=Be(function(Vt,Tt){var lt=Ke&&Ke.__awaiter||function(X,x,te,me){return new(te||(te=Promise))(function(be,Le){function Pt(Ht){try{Ct(me.next(Ht))}catch(_n){Le(_n)}}function Et(Ht){try{Ct(me.throw(Ht))}catch(_n){Le(_n)}}function Ct(Ht){Ht.done?be(Ht.value):function ue(be){return be instanceof te?be:new te(function(Le){Le(be)})}(Ht.value).then(Pt,Et)}Ct((me=me.apply(X,x||[])).next())})};Object.defineProperty(Tt,"__esModule",{value:!0}),Tt.isEudbLocation=Tt.parseTokenCredential=Tt.base64decode=Tt.toTelemetrySender=Tt.toLogProvider=Tt.toMessageHandler=void 0,Tt.generateUuid=function Ze(){return(0,Ue.default.v4)()};const ke=new Map([["chatMessageReceived",200],["typingIndicatorReceived",245],["readReceiptReceived",246],["chatMessageEdited",247],["chatMessageDeleted",248],["chatThreadCreated",257],["chatThreadPropertiesUpdated",258],["chatThreadDeleted",259],["participantsAdded",260],["participantsRemoved",261]]);function oe(X,x,te){return{threadId:X.groupId,sender:G(X.senderId),senderDisplayName:X.senderDisplayName,recipient:G(X.recipientMri),id:X.messageId,createdOn:new Date(X.originalArrivalTime),version:X.version,type:X.messageType,message:X.messageBody,metadata:ne(X.acsChatMessageMetadata)||{},attachments:re(ne(X.attachments)||[],x,te)}}Tt.toMessageHandler=(X,x,te,me)=>{const ue=ke.get(X);return{handleMessage(be){let Le=null;if(null!=be&&be.rawBody&&(Le=JSON.parse(be.rawBody)),null===Le||Le.eventId!==ue)return;const Pt=z(X,Le,te,me);return null!==Pt?(x(Pt),{isHandled:!0,resultCode:200}):void 0}}};const z=(X,x,te,me)=>{if("chatMessageReceived"===X)return oe(x,te,me);if("chatMessageEdited"===X)return function F(X,x,te){return Object.assign(Object.assign({},oe(X,x,te)),{editedOn:new Date(X.edittime)})}(x,te,me);if("chatMessageDeleted"===X){const ue=x;return{threadId:ue.groupId,sender:G(ue.senderId),senderDisplayName:ue.senderDisplayName,recipient:G(ue.recipientMri),id:ue.messageId,createdOn:new Date(ue.originalArrivalTime),version:ue.version,deletedOn:new Date(ue.deletetime),type:ue.messageType}}if("typingIndicatorReceived"===X){const ue=x;return{threadId:ue.groupId,sender:G(ue.senderId),senderDisplayName:ue.senderDisplayName,recipient:G(ue.recipientMri),version:ue.version,receivedOn:new Date(ue.originalArrivalTime)}}if("readReceiptReceived"===X){const ue=x,Le=JSON.parse(ue.messageBody).consumptionhorizon.split(";");return{threadId:ue.groupId,sender:G(ue.senderId),senderDisplayName:"",recipient:G(ue.recipientMri),chatMessageId:ue.messageId,readOn:new Date(+Le[1])}}if("chatThreadCreated"===X){const ue=x,be=JSON.parse(unescape(ue.createdBy)),Le=JSON.parse(unescape(ue.members)),Pt=J(be),Et=Le.map(Ht=>J(Ht));return{threadId:ue.threadId,createdOn:new Date(ue.createTime),createdBy:Pt,version:ue.version,participants:Et,properties:fe(JSON.parse(unescape(ue.properties))),retentionPolicy:_e(JSON.parse(unescape(ue.properties)))}}if("chatThreadPropertiesUpdated"===X){const ue=x,be=JSON.parse(unescape(ue.editedBy)),Le=J(be);return{threadId:ue.threadId,updatedOn:new Date(ue.editTime),updatedBy:Le,version:ue.version,properties:fe(JSON.parse(unescape(ue.properties))),retentionPolicy:_e(JSON.parse(unescape(ue.properties)))}}if("chatThreadDeleted"===X){const ue=x,be=x.reason==Mt.DeleteReason.DeletedByPolicy?null:J(JSON.parse(unescape(ue.deletedBy)));return{threadId:ue.threadId,deletedOn:new Date(ue.deleteTime),deletedBy:be,version:ue.version,reason:ue.reason}}if("participantsAdded"===X){const ue=x,be=JSON.parse(unescape(ue.addedBy)),Le=JSON.parse(unescape(ue.participantsAdded)),Pt=J(be),Et=Le.map(Ht=>J(Ht));return{threadId:ue.threadId,addedOn:new Date(ue.time),addedBy:Pt,version:ue.version,participantsAdded:Et}}if("participantsRemoved"===X){const ue=x,be=JSON.parse(unescape(ue.removedBy)),Le=JSON.parse(unescape(ue.participantsRemoved)),Pt=J(be),Et=Le.map(Ht=>J(Ht));return{threadId:ue.threadId,removedOn:new Date(ue.time),removedBy:Pt,version:ue.version,participantsRemoved:Et}}return null},J=X=>{var x;const te={id:G(X.participantId),displayName:X.displayName,metadata:ne(null!==(x=X.memberMetaData)&&void 0!==x?x:"")||{}};return X.shareHistoryTime&&(te.shareHistoryTime=new Date(X.shareHistoryTime)),te},fe=X=>{var x;return{topic:X.topic,metadata:ne(null!==(x=X.acsChatThreadMetadata)&&void 0!==x?x:"")||{}}},_e=X=>{const x=X.retentionPolicy;if(!x)return{kind:"none"};let te;try{te=JSON.parse(x)}catch(me){return{kind:"none"}}if("DeleteAfterCreationTime"===te.retentionPolicyType&&"string"==typeof te.executeAfter){const me=te.executeAfter.trim().replace(/^[+-]/,""),ue=me.includes(".")?me.split(".")[0]:"0",be=parseInt(ue,10);return{kind:"threadCreationDate",deleteThreadAfterDays:isNaN(be)?0:be}}return{kind:"none"}};Tt.toLogProvider=X=>({log:(...x)=>X.info(x),warn:(...x)=>X.warning(x),error:(...x)=>X.error(x),debug:(...x)=>X.verbose(x),info:(...x)=>X.verbose(x)}),Tt.toTelemetrySender=X=>({logEvent:x=>X.info(x)});const G=X=>X.startsWith("8:orgid:")?{kind:"microsoftTeamsUser",rawId:X,microsoftTeamsUserId:X.substring(8),isAnonymous:!1,cloud:"public"}:X.startsWith("8:dod:")?{kind:"microsoftTeamsUser",rawId:X,microsoftTeamsUserId:X.substring(6),isAnonymous:!1,cloud:"dod"}:X.startsWith("8:gcch:")?{kind:"microsoftTeamsUser",rawId:X,microsoftTeamsUserId:X.substring(7),isAnonymous:!1,cloud:"gcch"}:X.startsWith("8:teamsvisitor:")?{kind:"microsoftTeamsUser",rawId:X,microsoftTeamsUserId:X.substring(15),isAnonymous:!0}:X.startsWith("4:")?{kind:"phoneNumber",rawId:X,phoneNumber:X.substring(2)}:X.startsWith("8:acs:")||X.startsWith("8:gcch-acs:")||X.startsWith("8:dod-acs:")||X.startsWith("8:spool:")?{kind:"communicationUser",communicationUserId:X}:{kind:"unknown",id:X},ne=X=>{if(null!=X&&""!==X&&"null"!==X&&"{}"!==X&&"[]"!==X)return JSON.parse(X)},Z=(X,x,te)=>{let me;try{me=new URL(X),("http:"===me.protocol||"https:"===me.protocol)&&(me=new URL(me.pathname,x))}catch(ue){try{me=new URL(X,x)}catch(be){return X}}return me.searchParams.set("api-version",te),me.toString()},re=(X,x,te)=>(null==x||""===x||!(X=>{let x;try{x=new URL(X)}catch(te){return!1}return"http:"===x.protocol||"https:"===x.protocol})(x)||X.filter(me=>me.attachmentType.toLowerCase()==="image".toLowerCase()).map(me=>{me.previewUrl&&(me.previewUrl=Z(me.previewUrl,x,te)),me.url&&(me.url=Z(me.url,x,te))}),X);Tt.base64decode=X=>se.default.isNodeLike?Buffer.from(X,"base64").toString():atob(X),Tt.parseTokenCredential=X=>lt(void 0,void 0,void 0,function*(){const x=yield X.getToken(),te=null==x?void 0:x.token,me=(X=>{let[,x]=null==X?void 0:X.split(".");if(void 0===x)throw new Error("Invalid token");return x=x.replace(/-/g,"+").replace(/_/g,"/"),JSON.parse(decodeURIComponent(escape((0,Tt.base64decode)(x))))})(te),ue=me.skypeid,be=me.resourceId,Le=function Gt(X){switch(X.substring(0,X.indexOf(":"))){case pt.CloudPrefix.OrgId:case pt.CloudPrefix.Acs:case pt.CloudPrefix.Spool:return pt.CloudType.Public;case pt.CloudPrefix.GccHigh:case pt.CloudPrefix.GccHighAcs:return pt.CloudType.GccHigh;case pt.CloudPrefix.Dod:case pt.CloudPrefix.DodAcs:return pt.CloudType.Dod;default:return pt.CloudType.Public}}(ue);return{jwtToken:te,acsResourceId:be,identityMri:ue,cloudType:Le,resourceLocation:me.resourceLocation||""}}),Tt.isEudbLocation=X=>!!X&&!!pt.EudbCountries.find(x=>x===X)});Qe(Ve);var Xe=Be(function(Vt,Tt){var lt=Ke&&Ke.__createBinding||(Object.create?function(Oe,Y,K,q){void 0===q&&(q=K);var ie=Object.getOwnPropertyDescriptor(Y,K);(!ie||("get"in ie?!Y.__esModule:ie.writable||ie.configurable))&&(ie={enumerable:!0,get:function(){return Y[K]}}),Object.defineProperty(Oe,q,ie)}:function(Oe,Y,K,q){void 0===q&&(q=K),Oe[q]=Y[K]}),ke=Ke&&Ke.__setModuleDefault||(Object.create?function(Oe,Y){Object.defineProperty(Oe,"default",{enumerable:!0,value:Y})}:function(Oe,Y){Oe.default=Y}),de=Ke&&Ke.__importStar||function(Oe){if(Oe&&Oe.__esModule)return Oe;var Y={};if(null!=Oe)for(var K in Oe)"default"!==K&&Object.prototype.hasOwnProperty.call(Oe,K)&&lt(Y,Oe,K);return ke(Y,Oe),Y},De=Ke&&Ke.__awaiter||function(Oe,Y,K,q){return new(K||(K=Promise))(function(oe,F){function z(_e){try{fe(q.next(_e))}catch(B){F(B)}}function J(_e){try{fe(q.throw(_e))}catch(B){F(B)}}function fe(_e){_e.done?oe(_e.value):function ie(oe){return oe instanceof K?oe:new K(function(F){F(oe)})}(_e.value).then(z,J)}fe((q=q.apply(Oe,Y||[])).next())})};Object.defineProperty(Tt,"__esModule",{value:!0}),Tt.RealTimeNotificationConfiguration=Tt.TrouterConfigClient=void 0;const le=de(pe.default);Tt.TrouterConfigClient=class we extends le.ServiceClient{constructor(Y,K){K||(K={});const q="azsdk-js-communication-signaling/".concat(pt.PACKAGE_VERSION),ie=K.userAgentOptions&&K.userAgentOptions.userAgentPrefix?"".concat(K.userAgentOptions.userAgentPrefix," ").concat(q):"".concat(q);super(Object.assign(Object.assign({},K),{userAgentOptions:{userAgentPrefix:ie},additionalPolicies:K.additionalPolicies})),this.apiVersion=pt.CONFIG_API_VERSION,this.endpoint=Y,this.httpClient=(0,yt.default.createDefaultHttpClient)()}fetchServiceUrls(Y){return De(this,void 0,void 0,function*(){try{const K=(yield Y.getToken()).token,q=(0,yt.default.createPipelineRequest)({url:"".concat(this.endpoint,"/chat/config/realTimeNotifications?api-version=").concat(this.apiVersion),method:"GET",headers:(0,yt.default.createHttpHeaders)({Authorization:"Bearer ".concat(K)})}),ie=yield this.pipeline.sendRequest(this.httpClient,q);if(200!==ie.status||!ie.bodyAsText)throw new Error("Failed to fetch service URLs. Status: ".concat(ie.status,", Body: ").concat(ie.bodyAsText||"No response body"));const oe=JSON.parse(ie.bodyAsText);if(!oe.trouterServiceUrl||!oe.registrarServiceUrl||!oe.cloudType)throw new Error("One or more required fields are missing in the response data");return new ye(oe.trouterServiceUrl,oe.registrarServiceUrl,oe.cloudType)}catch(K){throw new Error("Error fetching real-time notification configuration from Chat Gateway: ".concat(K.message))}})}};class ye{constructor(Y,K,q){this.trouterServiceUrl=Y,this.registrarServiceUrl=K,this.cloudType=q}}Tt.RealTimeNotificationConfiguration=ye});Qe(Xe);var xe=Ve,it=Xe,gt=Be(function(Vt,Tt){var lt=Ke&&Ke.__awaiter||function(De,le,we,ye){return new(we||(we=Promise))(function(Y,K){function q(F){try{oe(ye.next(F))}catch(z){K(z)}}function ie(F){try{oe(ye.throw(F))}catch(z){K(z)}}function oe(F){F.done?Y(F.value):function Oe(Y){return Y instanceof we?Y:new we(function(K){K(Y)})}(F.value).then(q,ie)}oe((ye=ye.apply(De,le||[])).next())})};Object.defineProperty(Tt,"__esModule",{value:!0}),Tt.defaultTelemetrySettings=Tt.createSettings=void 0;const ke={version:"1.0.0",registrationId:"",sessionId:"",pnhAppId:"AcsWeb",pnhTemplate:"AcsWeb_Chat_2.1",platform:"SPOOL",platformUIVersion:"0.0.0",environment:"",productName:"acs-chat-web",trouterServiceUrl:"",registrarServiceUrl:"",registrarRefreshTimeoutInMs:35e4,timeoutOptions:{connectionTimeoutMs:2e4,fetchTimeoutMs:1e4,pingTimeoutMs:4e4,pongTimeoutMs:5e3,maxBackoffMs:5e4,requestTimeoutMs:5e3},maxRegistrationTimeInMs:72e5};Tt.createSettings=(De,le)=>lt(void 0,void 0,void 0,function*(){var we;const ye=null==le?void 0:le.resourceEndpoint;if(void 0===ye)throw new Error("'endpoint' cannot be null");const Oe=Object.assign({},ke);Oe.registrationId=(0,xe.generateUuid)(),Oe.sessionId=(0,xe.generateUuid)();const K=yield new it.TrouterConfigClient(ye,le).fetchServiceUrls(De);return Oe.trouterServiceUrl="".concat(K.trouterServiceUrl,"/v4/a"),Oe.registrarServiceUrl="".concat(K.registrarServiceUrl,"/v3/registrations"),"int"===K.cloudType&&(Oe.pnhAppId="cns-e2e-test",Oe.pnhTemplate="cns-e2e-test:1.8"),Oe.maxRegistrationTimeInMs=null!==(we=null==le?void 0:le.registrationTimeInMs)&&void 0!==we?we:ke.maxRegistrationTimeInMs,Oe}),Tt.defaultTelemetrySettings={enabled:!1}});Qe(gt);var At=gt,ot=Be(function(Vt,Tt){var lt=Ke&&Ke.__awaiter||function(De,le,we,ye){return new(we||(we=Promise))(function(Y,K){function q(F){try{oe(ye.next(F))}catch(z){K(z)}}function ie(F){try{oe(ye.throw(F))}catch(z){K(z)}}function oe(F){F.done?Y(F.value):function Oe(Y){return Y instanceof we?Y:new we(function(K){K(Y)})}(F.value).then(q,ie)}oe((ye=ye.apply(De,le||[])).next())})};Object.defineProperty(Tt,"__esModule",{value:!0}),Tt.CommunicationSignalingClient=Tt.ConnectionState=void 0;var ke=function(De){return De[De.Unknown=0]="Unknown",De[De.Connected=2]="Connected",De[De.Disconnected=3]="Disconnected",De[De.Switching=9]="Switching",De}(ke||(Tt.ConnectionState=ke={}));Tt.CommunicationSignalingClient=class de{constructor(le,we,ye){this.credential=le,this.logger=we,this.options=ye,this.stateChangedListener=null,this.tokenFetchRetries=0,this.trouter=(0,tt.createTrouterService)((0,xe.toLogProvider)(we))}start(){return lt(this,void 0,void 0,function*(){var le,we;if(this.resourceEndpoint=null===(le=this.options)||void 0===le?void 0:le.resourceEndpoint,void 0===this.resourceEndpoint)throw new Error("'endpoint' cannot be null");this.gatewayApiVersion=(null===(we=this.options)||void 0===we?void 0:we.gatewayApiVersion)||"2024-03-07",void 0===this.config&&(this.config={trouterSettings:yield(0,At.createSettings)(this.credential,this.options),skypeTokenProvider:ye=>lt(this,void 0,void 0,function*(){if(ye){if(this.tokenFetchRetries+=1,this.tokenFetchRetries>pt.MAX_NUMBER_OF_TOKEN_FETCH_RETRIES)throw yield this.stop(!0),new Error("Access token is expired and failed to fetch a valid one after ".concat(pt.MAX_NUMBER_OF_TOKEN_FETCH_RETRIES," retries"))}else this.tokenFetchRetries=0;return Promise.resolve((yield this.credential.getToken()).token)}),telemetryConfig:{eventLogger:(0,xe.toTelemetrySender)(this.logger),settings:At.defaultTelemetrySettings}}),this.trouter.start(this.config),this.trouter.setUserActivityState(tt.UserActivityState.Active)})}stop(le){return lt(this,void 0,void 0,function*(){this.trouter.offStateChanged(this.stateChangedListener),this.trouter.clearMessageHandlers(),this.trouter.stop(null!=le?le:this.tokenFetchRetries>pt.MAX_NUMBER_OF_TOKEN_FETCH_RETRIES)})}on(le,we){if("connectionChanged"===le)return this.trouter.offStateChanged(this.stateChangedListener),this.stateChangedListener=(ye,Oe)=>we(ye),void this.trouter.onStateChanged(this.stateChangedListener);this.trouter.registerMessageHandler((0,xe.toMessageHandler)(le,we,this.resourceEndpoint,this.gatewayApiVersion))}}});Qe(ot);var kt=ot,Yt=Qe(Be(function(Vt,Tt){var lt=Ke&&Ke.__createBinding||(Object.create?function(de,De,le,we){void 0===we&&(we=le);var ye=Object.getOwnPropertyDescriptor(De,le);(!ye||("get"in ye?!De.__esModule:ye.writable||ye.configurable))&&(ye={enumerable:!0,get:function(){return De[le]}}),Object.defineProperty(de,we,ye)}:function(de,De,le,we){void 0===we&&(we=le),de[we]=De[le]}),ke=Ke&&Ke.__exportStar||function(de,De){for(var le in de)"default"!==le&&!Object.prototype.hasOwnProperty.call(De,le)&&lt(De,de,le)};Object.defineProperty(Tt,"__esModule",{value:!0}),ke(kt,Tt)}));Xt.exports=Yt},305:(Xt,ft,Se)=>{var je={};function nt(y){return(nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(_){return typeof _}:function(_){return _&&"function"==typeof Symbol&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _})(y)}function ct(y,_,S){return(_=function Je(y){var _=function st(y,_){if("object"!=nt(y)||!y)return y;var S=y[Symbol.toPrimitive];if(void 0!==S){var C=S.call(y,_||"default");if("object"!=nt(C))return C;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===_?String:Number)(y)}(y,"string");return"symbol"==nt(_)?_:_+""}(_))in y?Object.defineProperty(y,_,{value:S,enumerable:!0,configurable:!0,writable:!0}):y[_]=S,y}function Ue(y,_){var S=Object.keys(y);if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(y);_&&(C=C.filter(function(T){return Object.getOwnPropertyDescriptor(y,T).enumerable})),S.push.apply(S,C)}return S}function se(y){for(var _=1;_<arguments.length;_++){var S=null!=arguments[_]?arguments[_]:{};_%2?Ue(Object(S),!0).forEach(function(C){ct(y,C,S[C])}):Object.getOwnPropertyDescriptors?Object.defineProperties(y,Object.getOwnPropertyDescriptors(S)):Ue(Object(S)).forEach(function(C){Object.defineProperty(y,C,Object.getOwnPropertyDescriptor(S,C))})}return y}Se.r(je),Se.d(je,{AddChatParticipantsRequest:()=>oO,AddChatParticipantsResult:()=>iO,ChatAttachment:()=>tK,ChatError:()=>Y7,ChatMessage:()=>nO,ChatMessageContent:()=>Z7,ChatMessageReadReceipt:()=>G7,ChatMessageReadReceiptsCollection:()=>N0,ChatMessagesCollection:()=>O0,ChatParticipant:()=>eK,ChatParticipantsCollection:()=>k0,ChatRetentionPolicy:()=>tl,ChatThreadItem:()=>nK,ChatThreadProperties:()=>cO,ChatThreadsItemCollection:()=>x0,CommunicationErrorResponse:()=>It,CommunicationIdentifierModel:()=>YN,CommunicationUserIdentifierModel:()=>K7,CreateChatThreadRequest:()=>sO,CreateChatThreadResult:()=>aO,MicrosoftTeamsAppIdentifierModel:()=>X7,MicrosoftTeamsUserIdentifierModel:()=>Q7,NoneRetentionPolicy:()=>fO,PhoneNumberIdentifierModel:()=>J7,SendChatMessageRequest:()=>eO,SendChatMessageResult:()=>tO,SendReadReceiptRequest:()=>ZN,SendTypingNotificationRequest:()=>uO,ThreadCreationDateRetentionPolicy:()=>dO,UpdateChatMessageRequest:()=>rO,UpdateChatThreadRequest:()=>lO,discriminators:()=>rK});var pe=Se(467);let Ke=null,Be=1;const _t=Symbol("SIGNAL");function tt(y){const _=Ke;return Ke=y,_}const pt={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function xe(y){if((!lt(y)||y.dirty)&&(y.dirty||y.lastCleanEpoch!==Be)){if(!y.producerMustRecompute(y)&&!fn(y))return y.dirty=!1,void(y.lastCleanEpoch=Be);y.producerRecomputeValue(y),y.dirty=!1,y.lastCleanEpoch=Be}}function fn(y){ke(y);for(let _=0;_<y.producerNode.length;_++){const S=y.producerNode[_],C=y.producerLastReadVersion[_];if(C!==S.version||(xe(S),C!==S.version))return!0}return!1}function Tt(y,_){if(function de(y){var _,S;null!==(_=y.liveConsumerNode)&&void 0!==_||(y.liveConsumerNode=[]),null!==(S=y.liveConsumerIndexOfThis)&&void 0!==S||(y.liveConsumerIndexOfThis=[])}(y),ke(y),1===y.liveConsumerNode.length)for(let C=0;C<y.producerNode.length;C++)Tt(y.producerNode[C],y.producerIndexOfThis[C]);const S=y.liveConsumerNode.length-1;if(y.liveConsumerNode[_]=y.liveConsumerNode[S],y.liveConsumerIndexOfThis[_]=y.liveConsumerIndexOfThis[S],y.liveConsumerNode.length--,y.liveConsumerIndexOfThis.length--,_<y.liveConsumerNode.length){const C=y.liveConsumerIndexOfThis[_],T=y.liveConsumerNode[_];ke(T),T.producerIndexOfThis[C]=_}}function lt(y){var _,S;return y.consumerIsAlwaysLive||(null!==(_=null==y||null===(S=y.liveConsumerNode)||void 0===S?void 0:S.length)&&void 0!==_?_:0)>0}function ke(y){var _,S,C;null!==(_=y.producerNode)&&void 0!==_||(y.producerNode=[]),null!==(S=y.producerIndexOfThis)&&void 0!==S||(y.producerIndexOfThis=[]),null!==(C=y.producerLastReadVersion)&&void 0!==C||(y.producerLastReadVersion=[])}let K=null;function re(y){return"function"==typeof y}function We(y){const S=y(C=>{Error.call(C),C.stack=(new Error).stack});return S.prototype=Object.create(Error.prototype),S.prototype.constructor=S,S}const Ge=We(y=>function(S){y(this),this.message=S?"".concat(S.length," errors occurred during unsubscription:\n").concat(S.map((C,T)=>"".concat(T+1,") ").concat(C.toString())).join("\n  ")):"",this.name="UnsubscriptionError",this.errors=S});function qe(y,_){if(y){const S=y.indexOf(_);0<=S&&y.splice(S,1)}}class Ze{constructor(_){this.initialTeardown=_,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let _;if(!this.closed){this.closed=!0;const{_parentage:S}=this;if(S)if(this._parentage=null,Array.isArray(S))for(const D of S)D.remove(this);else S.remove(this);const{initialTeardown:C}=this;if(re(C))try{C()}catch(D){_=D instanceof Ge?D.errors:[D]}const{_finalizers:T}=this;if(T){this._finalizers=null;for(const D of T)try{X(D)}catch(I){_=null!=_?_:[],I instanceof Ge?_=[..._,...I.errors]:_.push(I)}}if(_)throw new Ge(_)}}add(_){var S;if(_&&_!==this)if(this.closed)X(_);else{if(_ instanceof Ze){if(_.closed||_._hasParent(this))return;_._addParent(this)}(this._finalizers=null!==(S=this._finalizers)&&void 0!==S?S:[]).push(_)}}_hasParent(_){const{_parentage:S}=this;return S===_||Array.isArray(S)&&S.includes(_)}_addParent(_){const{_parentage:S}=this;this._parentage=Array.isArray(S)?(S.push(_),S):S?[S,_]:_}_removeParent(_){const{_parentage:S}=this;S===_?this._parentage=null:Array.isArray(S)&&qe(S,_)}remove(_){const{_finalizers:S}=this;S&&qe(S,_),_ instanceof Ze&&_._removeParent(this)}}Ze.EMPTY=(()=>{const y=new Ze;return y.closed=!0,y})();const Wt=Ze.EMPTY;function Gt(y){return y instanceof Ze||y&&"closed"in y&&re(y.remove)&&re(y.add)&&re(y.unsubscribe)}function X(y){re(y)?y():y.unsubscribe()}const x={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},te={setTimeout(y,_,...S){const{delegate:C}=te;return null!=C&&C.setTimeout?C.setTimeout(y,_,...S):setTimeout(y,_,...S)},clearTimeout(y){const{delegate:_}=te;return((null==_?void 0:_.clearTimeout)||clearTimeout)(y)},delegate:void 0};function me(y){te.setTimeout(()=>{const{onUnhandledError:_}=x;if(!_)throw y;_(y)})}function ue(){}const be=Et("C",void 0,void 0);function Et(y,_,S){return{kind:y,value:_,error:S}}let Ct=null;function Ht(y){if(x.useDeprecatedSynchronousErrorHandling){const _=!Ct;if(_&&(Ct={errorThrown:!1,error:null}),y(),_){const{errorThrown:S,error:C}=Ct;if(Ct=null,S)throw C}}else y()}class Ln extends Ze{constructor(_){super(),this.isStopped=!1,_?(this.destination=_,Gt(_)&&_.add(this)):this.destination=Xs}static create(_,S,C){return new Ro(_,S,C)}next(_){this.isStopped?Hi(function Pt(y){return Et("N",y,void 0)}(_),this):this._next(_)}error(_){this.isStopped?Hi(function Le(y){return Et("E",void 0,y)}(_),this):(this.isStopped=!0,this._error(_))}complete(){this.isStopped?Hi(be,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(_){this.destination.next(_)}_error(_){try{this.destination.error(_)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Jn=Function.prototype.bind;function or(y,_){return Jn.call(y,_)}class $i{constructor(_){this.partialObserver=_}next(_){const{partialObserver:S}=this;if(S.next)try{S.next(_)}catch(C){$o(C)}}error(_){const{partialObserver:S}=this;if(S.error)try{S.error(_)}catch(C){$o(C)}else $o(_)}complete(){const{partialObserver:_}=this;if(_.complete)try{_.complete()}catch(S){$o(S)}}}class Ro extends Ln{constructor(_,S,C){let T;if(super(),re(_)||!_)T={next:null!=_?_:void 0,error:null!=S?S:void 0,complete:null!=C?C:void 0};else{let D;this&&x.useDeprecatedNextContext?(D=Object.create(_),D.unsubscribe=()=>this.unsubscribe(),T={next:_.next&&or(_.next,D),error:_.error&&or(_.error,D),complete:_.complete&&or(_.complete,D)}):T=_}this.destination=new $i(T)}}function $o(y){x.useDeprecatedSynchronousErrorHandling?function _n(y){x.useDeprecatedSynchronousErrorHandling&&Ct&&(Ct.errorThrown=!0,Ct.error=y)}(y):me(y)}function Hi(y,_){const{onStoppedNotification:S}=x;S&&te.setTimeout(()=>S(y,_))}const Xs={closed:!0,next:ue,error:function Qs(y){throw y},complete:ue},zi="function"==typeof Symbol&&Symbol.observable||"@@observable";function ao(y){return y}function gs(y){return 0===y.length?ao:1===y.length?y[0]:function(S){return y.reduce((C,T)=>T(C),S)}}let Qn=(()=>{class y{constructor(S){S&&(this._subscribe=S)}lift(S){const C=new y;return C.source=this,C.operator=S,C}subscribe(S,C,T){const D=function Wi(y){return y&&y instanceof Ln||function Ys(y){return y&&re(y.next)&&re(y.error)&&re(y.complete)}(y)&&Gt(y)}(S)?S:new Ro(S,C,T);return Ht(()=>{const{operator:I,source:M}=this;D.add(I?I.call(D,M):M?this._subscribe(D):this._trySubscribe(D))}),D}_trySubscribe(S){try{return this._subscribe(S)}catch(C){S.error(C)}}forEach(S,C){return new(C=ms(C))((T,D)=>{const I=new Ro({next:M=>{try{S(M)}catch(A){D(A),I.unsubscribe()}},error:D,complete:T});this.subscribe(I)})}_subscribe(S){var C;return null===(C=this.source)||void 0===C?void 0:C.subscribe(S)}[zi](){return this}pipe(...S){return gs(S)(this)}toPromise(S){return new(S=ms(S))((C,T)=>{let D;this.subscribe(I=>D=I,I=>T(I),()=>C(D))})}}return y.create=_=>new y(_),y})();function ms(y){var _;return null!==(_=null!=y?y:x.Promise)&&void 0!==_?_:Promise}const Qr=We(y=>function(){y(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let hr=(()=>{class y extends Qn{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(S){const C=new ys(this,this);return C.operator=S,C}_throwIfClosed(){if(this.closed)throw new Qr}next(S){Ht(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const C of this.currentObservers)C.next(S)}})}error(S){Ht(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=S;const{observers:C}=this;for(;C.length;)C.shift().error(S)}})}complete(){Ht(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:S}=this;for(;S.length;)S.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var S;return(null===(S=this.observers)||void 0===S?void 0:S.length)>0}_trySubscribe(S){return this._throwIfClosed(),super._trySubscribe(S)}_subscribe(S){return this._throwIfClosed(),this._checkFinalizedStatuses(S),this._innerSubscribe(S)}_innerSubscribe(S){const{hasError:C,isStopped:T,observers:D}=this;return C||T?Wt:(this.currentObservers=null,D.push(S),new Ze(()=>{this.currentObservers=null,qe(D,S)}))}_checkFinalizedStatuses(S){const{hasError:C,thrownError:T,isStopped:D}=this;C?S.error(T):D&&S.complete()}asObservable(){const S=new Qn;return S.source=this,S}}return y.create=(_,S)=>new ys(_,S),y})();class ys extends hr{constructor(_,S){super(),this.destination=_,this.source=S}next(_){var S,C;null===(C=null===(S=this.destination)||void 0===S?void 0:S.next)||void 0===C||C.call(S,_)}error(_){var S,C;null===(C=null===(S=this.destination)||void 0===S?void 0:S.error)||void 0===C||C.call(S,_)}complete(){var _,S;null===(S=null===(_=this.destination)||void 0===_?void 0:_.complete)||void 0===S||S.call(_)}_subscribe(_){var S,C;return null!==(C=null===(S=this.source)||void 0===S?void 0:S.subscribe(_))&&void 0!==C?C:Wt}}class ir extends hr{constructor(_){super(),this._value=_}get value(){return this.getValue()}_subscribe(_){const S=super._subscribe(_);return!S.closed&&_.next(this._value),S}getValue(){const{hasError:_,thrownError:S,_value:C}=this;if(_)throw S;return this._throwIfClosed(),C}next(_){super.next(this._value=_)}}function ce(y){return re(null==y?void 0:y.lift)}function he(y){return _=>{if(ce(_))return _.lift(function(S){try{return y(S,this)}catch(C){this.error(C)}});throw new TypeError("Unable to lift unknown Observable type")}}function Te(y,_,S,C,T){return new $e(y,_,S,C,T)}class $e extends Ln{constructor(_,S,C,T,D,I){super(_),this.onFinalize=D,this.shouldUnsubscribe=I,this._next=S?function(M){try{S(M)}catch(A){_.error(A)}}:super._next,this._error=T?function(M){try{T(M)}catch(A){_.error(A)}finally{this.unsubscribe()}}:super._error,this._complete=C?function(){try{C()}catch(M){_.error(M)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var _;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:S}=this;super.unsubscribe(),!S&&(null===(_=this.onFinalize)||void 0===_||_.call(this))}}}function k(y,_){return he((S,C)=>{let T=0;S.subscribe(Te(C,D=>{C.next(y.call(_,D,T++))}))})}const H="https://g.co/ng/security#xss";class j extends Error{constructor(_,S){super(function ge(y,_){const S="NG0".concat(Math.abs(y));return"".concat(S).concat(_?": "+_:"")}(_,S)),this.code=_}}function Fe(y){return{toString:y}.toString()}const mt="__parameters__";function mn(y,_,S){return Fe(()=>{const C=function Tn(y){return function(...S){if(y){const C=y(...S);for(const T in C)this[T]=C[T]}}}(_);function T(...D){if(this instanceof T)return C.apply(this,D),this;const I=new T(...D);return M.annotation=I,M;function M(A,R,N){const O=A.hasOwnProperty(mt)?A[mt]:Object.defineProperty(A,mt,{value:[]})[mt];for(;O.length<=N;)O.push(null);return(O[N]=O[N]||[]).push(I),A}}return S&&(T.prototype=Object.create(S.prototype)),T.prototype.ngMetadataName=y,T.annotationCls=T,T})}const Pe=globalThis;function rt(y){for(let _ in y)if(y[_]===rt)return _;throw Error("Could not find renamed property on target object.")}function zt(y,_){for(const S in _)_.hasOwnProperty(S)&&!y.hasOwnProperty(S)&&(y[S]=_[S])}function Ut(y){if("string"==typeof y)return y;if(Array.isArray(y))return"["+y.map(Ut).join(", ")+"]";if(null==y)return""+y;if(y.overriddenName)return"".concat(y.overriddenName);if(y.name)return"".concat(y.name);const _=y.toString();if(null==_)return""+_;const S=_.indexOf("\n");return-1===S?_:_.substring(0,S)}function In(y,_){return null==y||""===y?null===_?"":_:null==_||""===_?y:y+" "+_}const $n=rt({__forward_ref__:rt});function Kt(y){return y.__forward_ref__=Kt,y.toString=function(){return Ut(this())},y}function Ft(y){return nr(y)?y():y}function nr(y){return"function"==typeof y&&y.hasOwnProperty($n)&&y.__forward_ref__===Kt}function Ot(y){return{token:y.token,providedIn:y.providedIn||null,factory:y.factory,value:void 0}}function Po(y){return{providers:y.providers||[],imports:y.imports||[]}}function md(y){return V0(y,vd)||V0(y,j0)}function V0(y,_){return y.hasOwnProperty(_)?y[_]:null}function yd(y){return y&&(y.hasOwnProperty(Mp)||y.hasOwnProperty(AO))?y[Mp]:null}const vd=rt({\u0275prov:rt}),Mp=rt({\u0275inj:rt}),j0=rt({ngInjectableDef:rt}),AO=rt({ngInjectorDef:rt});class Rt{constructor(_,S){this._desc=_,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof S?this.__NG_ELEMENT_ID__=S:void 0!==S&&(this.\u0275prov=Ot({token:this,providedIn:S.providedIn||"root",factory:S.factory}))}get multi(){return this}toString(){return"InjectionToken ".concat(this._desc)}}function Op(y){return y&&!!y.\u0275providers}const rl=rt({\u0275cmp:rt}),kp=rt({\u0275dir:rt}),xp=rt({\u0275pipe:rt}),$0=rt({\u0275mod:rt}),Ki=rt({\u0275fac:rt}),ol=rt({__NG_ELEMENT_ID__:rt}),H0=rt({__NG_ENV_ID__:rt});function ln(y){return"string"==typeof y?y:null==y?"":String(y)}function Fp(y,_){throw new j(-201,!1)}var Cn=function(y){return y[y.Default=0]="Default",y[y.Host=1]="Host",y[y.Self=2]="Self",y[y.SkipSelf=4]="SkipSelf",y[y.Optional=8]="Optional",y}(Cn||{});let Lp;function z0(){return Lp}function co(y){const _=Lp;return Lp=y,_}function q0(y,_,S){const C=md(y);return C&&"root"==C.providedIn?void 0===C.value?C.value=C.factory():C.value:S&Cn.Optional?null:void 0!==_?_:void Fp()}const il={},Up="__NG_DI_FLAG__",_d="ngTempTokenPath",xO=/\n/gm,W0="__source";let Oa;function vs(y){const _=Oa;return Oa=y,_}function UO(y,_=Cn.Default){if(void 0===Oa)throw new j(-203,!1);return null===Oa?q0(y,void 0,_):Oa.get(y,_&Cn.Optional?null:void 0,_)}function $t(y,_=Cn.Default){return(z0()||UO)(Ft(y),_)}function at(y,_=Cn.Default){return $t(y,Cd(_))}function Cd(y){return typeof y>"u"||"number"==typeof y?y:(y.optional&&8)|(y.host&&1)|(y.self&&2)|(y.skipSelf&&4)}function Vp(y){const _=[];for(let S=0;S<y.length;S++){const C=Ft(y[S]);if(Array.isArray(C)){if(0===C.length)throw new j(900,!1);let T,D=Cn.Default;for(let I=0;I<C.length;I++){const M=C[I],A=VO(M);"number"==typeof A?-1===A?T=M.token:D|=A:T=M}_.push($t(T,D))}else _.push($t(C))}return _}function sl(y,_){return y[Up]=_,y.prototype[Up]=_,y}function VO(y){return y[Up]}const wd=sl(mn("Optional"),8),bd=sl(mn("SkipSelf"),4);function ea(y,_){return y.hasOwnProperty(Ki)?y[Ki]:null}function ka(y,_){y.forEach(S=>Array.isArray(S)?ka(S,_):_(S))}function K0(y,_,S){_>=y.length?y.push(S):y.splice(_,0,S)}function Sd(y,_){return _>=y.length-1?y.pop():y.splice(_,1)[0]}function yo(y,_,S){let C=xa(y,_);return C>=0?y[1|C]=S:(C=~C,function J0(y,_,S,C){let T=y.length;if(T==_)y.push(S,C);else if(1===T)y.push(C,y[0]),y[0]=S;else{for(T--,y.push(y[T-1],y[T]);T>_;)y[T]=y[T-2],T--;y[_]=S,y[_+1]=C}}(y,C,_,S)),C}function Bp(y,_){const S=xa(y,_);if(S>=0)return y[1|S]}function xa(y,_){return function Q0(y,_,S){let C=0,T=y.length>>S;for(;T!==C;){const D=C+(T-C>>1),I=y[D<<S];if(_===I)return D<<S;I>_?T=D:C=D+1}return~(T<<S)}(y,_,1)}const li={},Rn=[],ta=new Rt(""),X0=new Rt("",-1),$p=new Rt("");class Ed{get(_,S=il){if(S===il){const C=new Error("NullInjectorError: No provider for ".concat(Ut(_),"!"));throw C.name="NullInjectorError",C}return S}}var Dd=function(y){return y[y.OnPush=0]="OnPush",y[y.Default=1]="Default",y}(Dd||{}),Ho=function(y){return y[y.Emulated=0]="Emulated",y[y.None=2]="None",y[y.ShadowDom=3]="ShadowDom",y}(Ho||{}),rr=function(y){return y[y.None=0]="None",y[y.SignalBased=1]="SignalBased",y[y.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",y}(rr||{});function WO(y,_,S){let C=y.length;for(;;){const T=y.indexOf(_,S);if(-1===T)return T;if(0===T||y.charCodeAt(T-1)<=32){const D=_.length;if(T+D===C||y.charCodeAt(T+D)<=32)return T}S=T+1}}function Hp(y,_,S){let C=0;for(;C<S.length;){const T=S[C];if("number"==typeof T){if(0!==T)break;C++;const D=S[C++],I=S[C++],M=S[C++];y.setAttribute(_,I,M,D)}else{const D=T,I=S[++C];Z0(D)?y.setProperty(_,D,I):y.setAttribute(_,D,I),C++}}return C}function Y0(y){return 3===y||4===y||6===y}function Z0(y){return 64===y.charCodeAt(0)}function al(y,_){if(null!==_&&0!==_.length)if(null===y||0===y.length)y=_.slice();else{let S=-1;for(let C=0;C<_.length;C++){const T=_[C];"number"==typeof T?S=T:0===S||eC(y,S,T,null,-1===S||2===S?_[++C]:null)}}return y}function eC(y,_,S,C,T){let D=0,I=y.length;if(-1===_)I=-1;else for(;D<y.length;){const M=y[D++];if("number"==typeof M){if(M===_){I=-1;break}if(M>_){I=D-1;break}}}for(;D<y.length;){const M=y[D];if("number"==typeof M)break;if(M===S){if(null===C)return void(null!==T&&(y[D+1]=T));if(C===y[D+1])return void(y[D+2]=T)}D++,null!==C&&D++,null!==T&&D++}-1!==I&&(y.splice(I,0,_),D=I+1),y.splice(D++,0,S),null!==C&&y.splice(D++,0,C),null!==T&&y.splice(D++,0,T)}const tC="ng-template";function GO(y,_,S,C){let T=0;if(C){for(;T<_.length&&"string"==typeof _[T];T+=2)if("class"===_[T]&&-1!==WO(_[T+1].toLowerCase(),S,0))return!0}else if(zp(y))return!1;if(T=_.indexOf(1,T),T>-1){let D;for(;++T<_.length&&"string"==typeof(D=_[T]);)if(D.toLowerCase()===S)return!0}return!1}function zp(y){return 4===y.type&&y.value!==tC}function KO(y,_,S){return _===(4!==y.type||S?y.value:tC)}function JO(y,_,S){let C=4;const T=y.attrs,D=null!==T?function YO(y){for(let _=0;_<y.length;_++)if(Y0(y[_]))return _;return y.length}(T):0;let I=!1;for(let M=0;M<_.length;M++){const A=_[M];if("number"!=typeof A){if(!I)if(4&C){if(C=2|1&C,""!==A&&!KO(y,A,S)||""===A&&1===_.length){if(zo(C))return!1;I=!0}}else if(8&C){if(null===T||!GO(y,T,A,S)){if(zo(C))return!1;I=!0}}else{const R=_[++M],N=QO(A,T,zp(y),S);if(-1===N){if(zo(C))return!1;I=!0;continue}if(""!==R){let O;if(O=N>D?"":T[N+1].toLowerCase(),2&C&&R!==O){if(zo(C))return!1;I=!0}}}}else{if(!I&&!zo(C)&&!zo(A))return!1;if(I&&zo(A))continue;I=!1,C=A|1&C}}return zo(C)||I}function zo(y){return!(1&y)}function QO(y,_,S,C){if(null===_)return-1;let T=0;if(C||!S){let D=!1;for(;T<_.length;){const I=_[T];if(I===y)return T;if(3===I||6===I)D=!0;else{if(1===I||2===I){let M=_[++T];for(;"string"==typeof M;)M=_[++T];continue}if(4===I)break;if(0===I){T+=4;continue}}T+=D?1:2}return-1}return function ZO(y,_){let S=y.indexOf(4);if(S>-1)for(S++;S<y.length;){const C=y[S];if("number"==typeof C)return-1;if(C===_)return S;S++}return-1}(_,y)}function nC(y,_,S=!1){for(let C=0;C<_.length;C++)if(JO(y,_[C],S))return!0;return!1}function rC(y,_){return y?":not("+_.trim()+")":_}function tk(y){let _=y[0],S=1,C=2,T="",D=!1;for(;S<y.length;){let I=y[S];if("string"==typeof I)if(2&C){const M=y[++S];T+="["+I+(M.length>0?'="'+M+'"':"")+"]"}else 8&C?T+="."+I:4&C&&(T+=" "+I);else""!==T&&!zo(I)&&(_+=rC(D,T),T=""),C=I,D=D||!zo(C);S++}return""!==T&&(_+=rC(D,T)),_}function Lr(y){return Fe(()=>{var _;const S=iC(y),C=se(se({},S),{},{decls:y.decls,vars:y.vars,template:y.template,consts:y.consts||null,ngContentSelectors:y.ngContentSelectors,onPush:y.changeDetection===Dd.OnPush,directiveDefs:null,pipeDefs:null,dependencies:S.standalone&&y.dependencies||null,getStandaloneInjector:null,signals:null!==(_=y.signals)&&void 0!==_&&_,data:y.data||{},encapsulation:y.encapsulation||Ho.Emulated,styles:y.styles||Rn,_:null,schemas:y.schemas||null,tView:null,id:""});sC(C);const T=y.dependencies;return C.directiveDefs=Id(T,!1),C.pipeDefs=Id(T,!0),C.id=function ak(y){let _=0;const S=[y.selectors,y.ngContentSelectors,y.hostVars,y.hostAttrs,y.consts,y.vars,y.decls,y.encapsulation,y.standalone,y.signals,y.exportAs,JSON.stringify(y.inputs),JSON.stringify(y.outputs),Object.getOwnPropertyNames(y.type.prototype),!!y.contentQueries,!!y.viewQuery].join("|");for(const T of S)_=Math.imul(31,_)+T.charCodeAt(0)|0;return _+=2147483648,"c"+_}(C),C})}function ok(y){return yn(y)||Dr(y)}function ik(y){return null!==y}function qo(y){return Fe(()=>({type:y.type,bootstrap:y.bootstrap||Rn,declarations:y.declarations||Rn,imports:y.imports||Rn,exports:y.exports||Rn,transitiveCompileScopes:null,schemas:y.schemas||null,id:y.id||null}))}function oC(y,_){if(null==y)return li;const S={};for(const T in y)if(y.hasOwnProperty(T)){const D=y[T];let I,M,A=rr.None;var C;Array.isArray(D)?(A=D[0],I=D[1],M=null!==(C=D[2])&&void 0!==C?C:I):(I=D,M=D),_?(S[I]=A!==rr.None?[T,A]:T,_[I]=M):S[I]=T}return S}function an(y){return Fe(()=>{const _=iC(y);return sC(_),_})}function yn(y){return y[rl]||null}function Dr(y){return y[kp]||null}function kr(y){return y[xp]||null}function Ur(y,_){const S=y[$0]||null;if(!S&&!0===_)throw new Error("Type ".concat(Ut(y)," does not have '\u0275mod' property."));return S}function iC(y){const _={};return{type:y.type,providersResolver:null,factory:null,hostBindings:y.hostBindings||null,hostVars:y.hostVars||0,hostAttrs:y.hostAttrs||null,contentQueries:y.contentQueries||null,declaredInputs:_,inputTransforms:null,inputConfig:y.inputs||li,exportAs:y.exportAs||null,standalone:!0===y.standalone,signals:!0===y.signals,selectors:y.selectors||Rn,viewQuery:y.viewQuery||null,features:y.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:oC(y.inputs,_),outputs:oC(y.outputs),debugInfo:null}}function sC(y){var _;null===(_=y.features)||void 0===_||_.forEach(S=>S(y))}function Id(y,_){if(!y)return null;const S=_?kr:ok;return()=>("function"==typeof y?y():y).map(C=>S(C)).filter(ik)}function ck(...y){return{\u0275providers:qp(0,y),\u0275fromNgModule:!0}}function qp(y,..._){const S=[],C=new Set;let T;const D=I=>{S.push(I)};return ka(_,I=>{const M=I;Md(M,D,[],C)&&(T||(T=[]),T.push(M))}),void 0!==T&&aC(T,D),S}function aC(y,_){for(let S=0;S<y.length;S++){const{ngModule:C,providers:T}=y[S];Wp(T,D=>{_(D,C)})}}function Md(y,_,S,C){if(!(y=Ft(y)))return!1;let T=null,D=yd(y);const I=!D&&yn(y);if(D||I){if(I&&!I.standalone)return!1;T=y}else{const A=y.ngModule;if(D=yd(A),!D)return!1;T=A}const M=C.has(T);if(I){if(M)return!1;if(C.add(T),I.dependencies){const A="function"==typeof I.dependencies?I.dependencies():I.dependencies;for(const R of A)Md(R,_,S,C)}}else{if(!D)return!1;{if(null!=D.imports&&!M){let R;C.add(T);try{ka(D.imports,N=>{Md(N,_,S,C)&&(R||(R=[]),R.push(N))})}finally{}void 0!==R&&aC(R,_)}if(!M){const R=ea(T)||(()=>new T);_({provide:T,useFactory:R,deps:Rn},T),_({provide:$p,useValue:T,multi:!0},T),_({provide:ta,useValue:()=>$t(T),multi:!0},T)}const A=D.providers;if(null!=A&&!M){const R=y;Wp(A,N=>{_(N,R)})}}}return T!==y&&void 0!==y.providers}function Wp(y,_){for(let S of y)Op(S)&&(S=S.\u0275providers),Array.isArray(S)?Wp(S,_):_(S)}const lk=rt({provide:String,useValue:rt});function Gp(y){return null!==y&&"object"==typeof y&&lk in y}function na(y){return"function"==typeof y}const Kp=new Rt(""),Ad={},dk={};let Jp;function Rd(){return void 0===Jp&&(Jp=new Ed),Jp}class Xr{}class Fa extends Xr{get destroyed(){return this._destroyed}constructor(_,S,C,T){super(),this.parent=S,this.source=C,this.scopes=T,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Xp(_,I=>this.processProvider(I)),this.records.set(X0,La(void 0,this)),T.has("environment")&&this.records.set(Xr,La(void 0,this));const D=this.records.get(Kp);null!=D&&"string"==typeof D.value&&this.scopes.add(D.value),this.injectorDefTypes=new Set(this.get($p,Rn,Cn.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;const _=tt(null);try{for(const C of this._ngOnDestroyHooks)C.ngOnDestroy();const S=this._onDestroyHooks;this._onDestroyHooks=[];for(const C of S)C()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),tt(_)}}onDestroy(_){return this.assertNotDestroyed(),this._onDestroyHooks.push(_),()=>this.removeOnDestroy(_)}runInContext(_){this.assertNotDestroyed();const S=vs(this),C=co(void 0);try{return _()}finally{vs(S),co(C)}}get(_,S=il,C=Cn.Default){if(this.assertNotDestroyed(),_.hasOwnProperty(H0))return _[H0](this);C=Cd(C);const D=vs(this),I=co(void 0);try{if(!(C&Cn.SkipSelf)){let A=this.records.get(_);if(void 0===A){const R=function mk(y){return"function"==typeof y||"object"==typeof y&&y instanceof Rt}(_)&&md(_);A=R&&this.injectableDefInScope(R)?La(Qp(_),Ad):null,this.records.set(_,A)}if(null!=A)return this.hydrate(_,A)}return(C&Cn.Self?Rd():this.parent).get(_,S=C&Cn.Optional&&S===il?null:S)}catch(M){if("NullInjectorError"===M.name){if((M[_d]=M[_d]||[]).unshift(Ut(_)),D)throw M;return function jO(y,_,S,C){const T=y[_d];throw _[W0]&&T.unshift(_[W0]),y.message=function BO(y,_,S,C=null){y=y&&"\n"===y.charAt(0)&&"\u0275"==y.charAt(1)?y.slice(2):y;let T=Ut(_);if(Array.isArray(_))T=_.map(Ut).join(" -> ");else if("object"==typeof _){let D=[];for(let I in _)if(_.hasOwnProperty(I)){let M=_[I];D.push(I+":"+("string"==typeof M?JSON.stringify(M):Ut(M)))}T="{".concat(D.join(", "),"}")}return"".concat(S).concat(C?"("+C+")":"","[").concat(T,"]: ").concat(y.replace(xO,"\n  "))}("\n"+y.message,T,S,C),y.ngTokenPath=T,y[_d]=null,y}(M,_,"R3InjectorError",this.source)}throw M}finally{co(I),vs(D)}}resolveInjectorInitializers(){const _=tt(null),S=vs(this),C=co(void 0);try{const D=this.get(ta,Rn,Cn.Self);for(const I of D)I()}finally{vs(S),co(C),tt(_)}}toString(){const _=[],S=this.records;for(const C of S.keys())_.push(Ut(C));return"R3Injector[".concat(_.join(", "),"]")}assertNotDestroyed(){if(this._destroyed)throw new j(205,!1)}processProvider(_){let S=na(_=Ft(_))?_:Ft(_&&_.provide);const C=function hk(y){return Gp(y)?La(void 0,y.useValue):La(uC(y),Ad)}(_);if(!na(_)&&!0===_.multi){let T=this.records.get(S);T||(T=La(void 0,Ad,!0),T.factory=()=>Vp(T.multi),this.records.set(S,T)),S=_,T.multi.push(_)}this.records.set(S,C)}hydrate(_,S){const C=tt(null);try{return S.value===Ad&&(S.value=dk,S.value=S.factory()),"object"==typeof S.value&&S.value&&function gk(y){return null!==y&&"object"==typeof y&&"function"==typeof y.ngOnDestroy}(S.value)&&this._ngOnDestroyHooks.add(S.value),S.value}finally{tt(C)}}injectableDefInScope(_){if(!_.providedIn)return!1;const S=Ft(_.providedIn);return"string"==typeof S?"any"===S||this.scopes.has(S):this.injectorDefTypes.has(S)}removeOnDestroy(_){const S=this._onDestroyHooks.indexOf(_);-1!==S&&this._onDestroyHooks.splice(S,1)}}function Qp(y){const _=md(y),S=null!==_?_.factory:ea(y);if(null!==S)return S;if(y instanceof Rt)throw new j(204,!1);if(y instanceof Function)return function fk(y){if(y.length>0)throw new j(204,!1);const S=function MO(y){return y&&(y[vd]||y[j0])||null}(y);return null!==S?()=>S.factory(y):()=>new y}(y);throw new j(204,!1)}function uC(y,_,S){let C;if(na(y)){const T=Ft(y);return ea(T)||Qp(T)}if(Gp(y))C=()=>Ft(y.useValue);else if(function lC(y){return!(!y||!y.useFactory)}(y))C=()=>y.useFactory(...Vp(y.deps||[]));else if(function cC(y){return!(!y||!y.useExisting)}(y))C=()=>$t(Ft(y.useExisting));else{const T=Ft(y&&(y.useClass||y.provide));if(!function pk(y){return!!y.deps}(y))return ea(T)||Qp(T);C=()=>new T(...Vp(y.deps))}return C}function La(y,_,S=!1){return{factory:y,value:_,multi:S?[]:void 0}}function Xp(y,_){for(const S of y)Array.isArray(S)?Xp(S,_):S&&Op(S)?Xp(S.\u0275providers,_):_(S)}function ui(y,_){y instanceof Fa&&y.assertNotDestroyed();const C=vs(y),T=co(void 0);try{return _()}finally{vs(C),co(T)}}function dC(){return void 0!==z0()||null!=function LO(){return Oa}()}const sr=0,wt=1,Jt=2,gr=3,Wo=4,Vr=5,vo=6,Va=7,Xn=8,Cr=9,Go=10,nn=11,ul=12,hC=13,ja=14,cr=15,dl=16,Ba=17,di=18,fl=19,pC=20,Cs=21,hl=22,ra=23,un=25,Zp=1,fi=7,$a=9,mr=10;var eg=function(y){return y[y.None=0]="None",y[y.HasTransplantedViews=2]="HasTransplantedViews",y}(eg||{});function jr(y){return Array.isArray(y)&&"object"==typeof y[Zp]}function Br(y){return Array.isArray(y)&&!0===y[Zp]}function tg(y){return!!(4&y.flags)}function oa(y){return y.componentOffset>-1}function kd(y){return!(1&~y.flags)}function Ko(y){return!!y.template}function ng(y){return!!(512&y[Jt])}class Ak{constructor(_,S,C){this.previousValue=_,this.currentValue=S,this.firstChange=C}isFirstChange(){return this.firstChange}}function vC(y,_,S,C){null!==_?_.applyValueToInputSignal(_,C):y[S]=C}function No(){return _C}function _C(y){return y.type.prototype.ngOnChanges&&(y.setInput=Pk),Rk}function Rk(){const y=wC(this),_=null==y?void 0:y.current;if(_){const S=y.previous;if(S===li)y.previous=_;else for(let C in _)S[C]=_[C];y.current=null,this.ngOnChanges(_)}}function Pk(y,_,S,C,T){const D=this.declaredInputs[C],I=wC(y)||function Nk(y,_){return y[CC]=_}(y,{previous:li,current:null}),M=I.current||(I.current={}),A=I.previous,R=A[D];M[D]=new Ak(R&&R.currentValue,S,A===li),vC(y,_,T,S)}No.ngInherit=!0;const CC="__ngSimpleChanges__";function wC(y){return y[CC]||null}const hi=function(y,_,S){};let TC=!1;function Hn(y){for(;Array.isArray(y);)y=y[sr];return y}function gl(y,_){return Hn(_[y])}function Yr(y,_){return Hn(_[y.index])}function ml(y,_){return y.data[_]}function _o(y,_){const S=_[y];return jr(S)?S:S[sr]}function ag(y){return!(128&~y[Jt])}function pi(y,_){return null==_?null:y[_]}function EC(y){y[Ba]=0}function Uk(y){1024&y[Jt]||(y[Jt]|=1024,ag(y)&&yl(y))}function cg(y){var _;return!!(9216&y[Jt]||null!==(_=y[ra])&&void 0!==_&&_.dirty)}function lg(y){var _;if(null===(_=y[Go].changeDetectionScheduler)||void 0===_||_.notify(1),cg(y))yl(y);else if(64&y[Jt])if(function kk(){return TC}())y[Jt]|=1024,yl(y);else{var S;null===(S=y[Go].changeDetectionScheduler)||void 0===S||S.notify()}}function yl(y){var _;null===(_=y[Go].changeDetectionScheduler)||void 0===_||_.notify();let S=ia(y);for(;null!==S&&!(8192&S[Jt])&&(S[Jt]|=8192,ag(S));)S=ia(S)}function xd(y,_){if(!(256&~y[Jt]))throw new j(911,!1);null===y[Cs]&&(y[Cs]=[]),y[Cs].push(_)}function ia(y){const _=y[gr];return Br(_)?_[gr]:_}const rn={lFrame:xC(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function MC(){return rn.bindingsEnabled}function ze(){return rn.lFrame.lView}function wn(){return rn.lFrame.tView}function Oo(y){return rn.lFrame.contextLView=y,y[Xn]}function ko(y){return rn.lFrame.contextLView=null,y}function Vn(){let y=AC();for(;null!==y&&64===y.type;)y=y.parent;return y}function AC(){return rn.lFrame.currentTNode}function gi(y,_){const S=rn.lFrame;S.currentTNode=y,S.isParent=_}function dg(){return rn.lFrame.isParent}function fg(){rn.lFrame.isParent=!1}function Jo(){return rn.lFrame.bindingIndex++}function Jk(y,_){const S=rn.lFrame;S.bindingIndex=S.bindingRootIndex=y,hg(_)}function hg(y){rn.lFrame.currentDirectiveIndex=y}function Fd(y){rn.lFrame.currentQueryIndex=y}function Xk(y){const _=y[wt];return 2===_.type?_.declTNode:1===_.type?y[Vr]:null}function OC(y,_,S){if(S&Cn.SkipSelf){let T=_,D=y;for(;!(T=T.parent,null!==T||S&Cn.Host||(T=Xk(D),null===T||(D=D[ja],10&T.type))););if(null===T)return!1;_=T,y=D}const C=rn.lFrame=kC();return C.currentTNode=_,C.lView=y,!0}function mg(y){const _=kC(),S=y[wt];rn.lFrame=_,_.currentTNode=S.firstChild,_.lView=y,_.tView=S,_.contextLView=y,_.bindingIndex=S.bindingStartIndex,_.inI18n=!1}function kC(){const y=rn.lFrame,_=null===y?null:y.child;return null===_?xC(y):_}function xC(y){const _={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:y,child:null,inI18n:!1};return null!==y&&(y.child=_),_}function FC(){const y=rn.lFrame;return rn.lFrame=y.parent,y.currentTNode=null,y.lView=null,y}const LC=FC;function yg(){const y=FC();y.isParent=!0,y.tView=null,y.selectedIndex=-1,y.contextLView=null,y.elementDepthCount=0,y.currentDirectiveIndex=-1,y.currentNamespace=null,y.bindingRootIndex=-1,y.bindingIndex=-1,y.currentQueryIndex=0}function $r(){return rn.lFrame.selectedIndex}function sa(y){rn.lFrame.selectedIndex=y}function Yn(){const y=rn.lFrame;return ml(y.tView,y.selectedIndex)}let VC=!0;function _l(){return VC}function mi(y){VC=y}function Ld(y,_){for(let R=_.directiveStart,N=_.directiveEnd;R<N;R++){const L=y.data[R].type.prototype,{ngAfterContentInit:$,ngAfterContentChecked:Q,ngAfterViewInit:ae,ngAfterViewChecked:Ce,ngOnDestroy:Ee}=L;var S,C,T,D,I,M,A;$&&(null!==(S=y.contentHooks)&&void 0!==S?S:y.contentHooks=[]).push(-R,$),Q&&((null!==(C=y.contentHooks)&&void 0!==C?C:y.contentHooks=[]).push(R,Q),(null!==(T=y.contentCheckHooks)&&void 0!==T?T:y.contentCheckHooks=[]).push(R,Q)),ae&&(null!==(D=y.viewHooks)&&void 0!==D?D:y.viewHooks=[]).push(-R,ae),Ce&&((null!==(I=y.viewHooks)&&void 0!==I?I:y.viewHooks=[]).push(R,Ce),(null!==(M=y.viewCheckHooks)&&void 0!==M?M:y.viewCheckHooks=[]).push(R,Ce)),null!=Ee&&(null!==(A=y.destroyHooks)&&void 0!==A?A:y.destroyHooks=[]).push(R,Ee)}}function Ud(y,_,S){jC(y,_,3,S)}function Vd(y,_,S,C){(3&y[Jt])===S&&jC(y,_,S,C)}function vg(y,_){let S=y[Jt];(3&S)===_&&(S&=16383,S+=1,y[Jt]=S)}function jC(y,_,S,C){const D=null!=C?C:-1,I=_.length-1;let M=0;for(let A=void 0!==C?65535&y[Ba]:0;A<I;A++)if("number"==typeof _[A+1]){if(M=_[A],null!=C&&M>=C)break}else _[A]<0&&(y[Ba]+=65536),(M<D||-1==D)&&(ox(y,S,_,A),y[Ba]=(4294901760&y[Ba])+A+2),A++}function BC(y,_){hi(4,y,_);const S=tt(null);try{_.call(y)}finally{tt(S),hi(5,y,_)}}function ox(y,_,S,C){const T=S[C]<0,D=S[C+1],M=y[T?-S[C]:S[C]];T?y[Jt]>>14<y[Ba]>>16&&(3&y[Jt])===_&&(y[Jt]+=16384,BC(M,D)):BC(M,D)}const qa=-1;class Cl{constructor(_,S,C){this.factory=_,this.resolving=!1,this.canSeeViewProviders=S,this.injectImpl=C}}function Cg(y){return y!==qa}function wl(y){return 32767&y}function bl(y,_){let S=function lx(y){return y>>16}(y),C=_;for(;S>0;)C=C[ja],S--;return C}let wg=!0;function jd(y){const _=wg;return wg=y,_}const $C=255,HC=5;let ux=0;const yi={};function Bd(y,_){const S=zC(y,_);if(-1!==S)return S;const C=_[wt];C.firstCreatePass&&(y.injectorIndex=_.length,bg(C.data,y),bg(_,null),bg(C.blueprint,null));const T=$d(y,_),D=y.injectorIndex;if(Cg(T)){const I=wl(T),M=bl(T,_),A=M[wt].data;for(let R=0;R<8;R++)_[D+R]=M[I+R]|A[I+R]}return _[D+8]=T,D}function bg(y,_){y.push(0,0,0,0,0,0,0,0,_)}function zC(y,_){return-1===y.injectorIndex||y.parent&&y.parent.injectorIndex===y.injectorIndex||null===_[y.injectorIndex+8]?-1:y.injectorIndex}function $d(y,_){if(y.parent&&-1!==y.parent.injectorIndex)return y.parent.injectorIndex;let S=0,C=null,T=_;for(;null!==T;){if(C=XC(T),null===C)return qa;if(S++,T=T[ja],-1!==C.injectorIndex)return C.injectorIndex|S<<16}return qa}function Sg(y,_,S){!function dx(y,_,S){let C;"string"==typeof S?C=S.charCodeAt(0)||0:S.hasOwnProperty(ol)&&(C=S[ol]),null==C&&(C=S[ol]=ux++);const T=C&$C;_.data[y+(T>>HC)]|=1<<T}(y,_,S)}function qC(y,_,S){if(S&Cn.Optional||void 0!==y)return y;Fp()}function WC(y,_,S,C){if(S&Cn.Optional&&void 0===C&&(C=null),!(S&(Cn.Self|Cn.Host))){const T=y[Cr],D=co(void 0);try{return T?T.get(_,C,S&Cn.Optional):q0(_,C,S&Cn.Optional)}finally{co(D)}}return qC(C,0,S)}function GC(y,_,S,C=Cn.Default,T){if(null!==y){if(2048&_[Jt]&&!(C&Cn.Self)){const I=function mx(y,_,S,C,T){let D=y,I=_;for(;null!==D&&null!==I&&2048&I[Jt]&&!(512&I[Jt]);){const M=KC(D,I,S,C|Cn.Self,yi);if(M!==yi)return M;let A=D.parent;if(!A){const R=I[pC];if(R){const N=R.get(S,yi,C);if(N!==yi)return N}A=XC(I),I=I[ja]}D=A}return T}(y,_,S,C,yi);if(I!==yi)return I}const D=KC(y,_,S,C,yi);if(D!==yi)return D}return WC(_,S,C,T)}function KC(y,_,S,C,T){const D=function px(y){if("string"==typeof y)return y.charCodeAt(0)||0;const _=y.hasOwnProperty(ol)?y[ol]:void 0;return"number"==typeof _?_>=0?_&$C:gx:_}(S);if("function"==typeof D){if(!OC(_,y,C))return C&Cn.Host?qC(T,0,C):WC(_,S,C,T);try{let I;if(I=D(C),null!=I||C&Cn.Optional)return I;Fp()}finally{LC()}}else if("number"==typeof D){let I=null,M=zC(y,_),A=qa,R=C&Cn.Host?_[cr][Vr]:null;for((-1===M||C&Cn.SkipSelf)&&(A=-1===M?$d(y,_):_[M+8],A!==qa&&QC(C,!1)?(I=_[wt],M=wl(A),_=bl(A,_)):M=-1);-1!==M;){const N=_[wt];if(JC(D,M,N.data)){const O=hx(M,_,S,I,C,R);if(O!==yi)return O}A=_[M+8],A!==qa&&QC(C,_[wt].data[M+8]===R)&&JC(D,M,_)?(I=N,M=wl(A),_=bl(A,_)):M=-1}}return T}function hx(y,_,S,C,T,D){const I=_[wt],M=I.data[y+8],N=function Hd(y,_,S,C,T){const D=y.providerIndexes,I=_.data,M=1048575&D,A=y.directiveStart,N=D>>20,L=T?M+N:y.directiveEnd;for(let $=C?M:M+N;$<L;$++){const Q=I[$];if($<A&&S===Q||$>=A&&Q.type===S)return $}if(T){const $=I[A];if($&&Ko($)&&$.type===S)return A}return null}(M,I,S,null==C?oa(M)&&wg:C!=I&&!!(3&M.type),T&Cn.Host&&D===M);return null!==N?aa(_,I,N,M):yi}function aa(y,_,S,C){let T=y[S];const D=_.data;if(function ix(y){return y instanceof Cl}(T)){const I=T;I.resolving&&function NO(y,_){throw _&&". Dependency path: ".concat(_.join(" > ")," > ").concat(y),new j(-200,y)}(function On(y){return"function"==typeof y?y.name||y.toString():"object"==typeof y&&null!=y&&"function"==typeof y.type?y.type.name||y.type.toString():ln(y)}(D[S]));const M=jd(I.canSeeViewProviders);I.resolving=!0;const R=I.injectImpl?co(I.injectImpl):null;OC(y,C,Cn.Default);try{T=y[S]=I.factory(void 0,D,y,C),_.firstCreatePass&&S>=C.directiveStart&&function rx(y,_,S){const{ngOnChanges:C,ngOnInit:T,ngDoCheck:D}=_.type.prototype;if(C){var I,M;const O=_C(_);(null!==(I=S.preOrderHooks)&&void 0!==I?I:S.preOrderHooks=[]).push(y,O),(null!==(M=S.preOrderCheckHooks)&&void 0!==M?M:S.preOrderCheckHooks=[]).push(y,O)}var A,R,N;T&&(null!==(A=S.preOrderHooks)&&void 0!==A?A:S.preOrderHooks=[]).push(0-y,T),D&&((null!==(R=S.preOrderHooks)&&void 0!==R?R:S.preOrderHooks=[]).push(y,D),(null!==(N=S.preOrderCheckHooks)&&void 0!==N?N:S.preOrderCheckHooks=[]).push(y,D))}(S,D[S],_)}finally{null!==R&&co(R),jd(M),I.resolving=!1,LC()}}return T}function JC(y,_,S){return!!(S[_+(y>>HC)]&1<<y)}function QC(y,_){return!(y&Cn.Self||y&Cn.Host&&_)}class Mr{constructor(_,S){this._tNode=_,this._lView=S}get(_,S,C){return GC(this._tNode,this._lView,_,Cd(C),S)}}function gx(){return new Mr(Vn(),ze())}function Or(y){return Fe(()=>{const _=y.prototype.constructor,S=_[Ki]||Tg(_),C=Object.prototype;let T=Object.getPrototypeOf(y.prototype).constructor;for(;T&&T!==C;){const D=T[Ki]||Tg(T);if(D&&D!==S)return D;T=Object.getPrototypeOf(T)}return D=>new D})}function Tg(y){return nr(y)?()=>{const _=Tg(Ft(y));return _&&_()}:ea(y)}function XC(y){const _=y[wt],S=_.type;return 2===S?_.declTNode:1===S?y[Vr]:null}function nw(y,_=null,S=null,C){const T=rw(y,_,S,C);return T.resolveInjectorInitializers(),T}function rw(y,_=null,S=null,C,T=new Set){const D=[S||Rn,ck(y)];return C=C||("object"==typeof y?void 0:Ut(y)),new Fa(D,_||Rd(),C||null,T)}let eo=(()=>{var y;class _{static create(C,T){if(Array.isArray(C))return nw({name:""},T,C,"");{var D;const I=null!==(D=C.name)&&void 0!==D?D:"";return nw({name:I},C.parent,C.providers,I)}}}return(y=_).THROW_IF_NOT_FOUND=il,y.NULL=new Ed,y.\u0275prov=Ot({token:y,providedIn:"any",factory:()=>$t(X0)}),y.__NG_ELEMENT_ID__=-1,_})();function Dg(y){return y.ngOriginalError}class vi{constructor(){this._console=console}handleError(_){const S=this._findOriginalError(_);this._console.error("ERROR",_),S&&this._console.error("ORIGINAL ERROR",S)}_findOriginalError(_){let S=_&&Dg(_);for(;S&&Dg(S);)S=Dg(S);return S||null}}const iw=new Rt("",{providedIn:"root",factory:()=>at(vi).handleError.bind(void 0)});let Ka=(()=>{var y;class _{}return(y=_).__NG_ELEMENT_ID__=Ex,y.__NG_ENV_ID__=S=>S,_})();class Tx extends Ka{constructor(_){super(),this._lView=_}onDestroy(_){return xd(this._lView,_),()=>function ug(y,_){if(null===y[Cs])return;const S=y[Cs].indexOf(_);-1!==S&&y[Cs].splice(S,1)}(this._lView,_)}}function Ex(){return new Tx(ze())}function Dx(){return Ja(Vn(),ze())}function Ja(y,_){return new Co(Yr(y,_))}let Co=(()=>{class _{constructor(C){this.nativeElement=C}}return _.__NG_ELEMENT_ID__=Dx,_})();function Ig(y){return _=>{setTimeout(y,void 0,_)}}const zn=class Ix extends hr{constructor(_=!1){var S;super(),this.destroyRef=void 0,this.__isAsync=_,dC()&&(this.destroyRef=null!==(S=at(Ka,{optional:!0}))&&void 0!==S?S:void 0)}emit(_){const S=tt(null);try{super.next(_)}finally{tt(S)}}subscribe(_,S,C){let T=_,D=S||(()=>null),I=C;if(_&&"object"==typeof _){var M,A,R;const O=_;T=null===(M=O.next)||void 0===M?void 0:M.bind(O),D=null===(A=O.error)||void 0===A?void 0:A.bind(O),I=null===(R=O.complete)||void 0===R?void 0:R.bind(O)}this.__isAsync&&(D=Ig(D),T&&(T=Ig(T)),I&&(I=Ig(I)));const N=super.subscribe({next:T,error:D,complete:I});return _ instanceof Ze&&_.add(N),N}};function qd(y){return!(128&~y.flags)}const Ag=new Map;let Rx=0;const Pg="__ngContext__";function Hr(y,_){jr(_)?(y[Pg]=_[fl],function Nx(y){Ag.set(y[fl],y)}(_)):y[Pg]=_}function yw(y){return _w(y[ul])}function vw(y){return _w(y[Wo])}function _w(y){for(;null!==y&&!Br(y);)y=y[Wo];return y}let Ng;function ws(){if(void 0!==Ng)return Ng;if(typeof document<"u")return document;throw new j(210,!1)}const Kd=new Rt("",{providedIn:"root",factory:()=>Qx}),Qx="ng",Iw=new Rt(""),bs=new Rt("",{providedIn:"platform",factory:()=>"unknown"}),Mw=new Rt(""),Aw=new Rt("",{providedIn:"root",factory:()=>{var y;return(null===(y=ws().body)||void 0===y||null===(y=y.querySelector("[ngCspNonce]"))||void 0===y?void 0:y.getAttribute("ngCspNonce"))||null}});let Rw=()=>null;function Lg(y,_,S=!1){return Rw(y,_,S)}const xw=new Rt("",{providedIn:"root",factory:()=>!1});let nf,rf;function Za(y){var _;return(null===(_=function Bg(){if(void 0===nf&&(nf=null,Pe.trustedTypes))try{nf=Pe.trustedTypes.createPolicy("angular",{createHTML:y=>y,createScript:y=>y,createScriptURL:y=>y})}catch(y){}return nf}())||void 0===_?void 0:_.createHTML(y))||y}function Lw(y){var _;return(null===(_=function $g(){if(void 0===rf&&(rf=null,Pe.trustedTypes))try{rf=Pe.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:y=>y,createScript:y=>y,createScriptURL:y=>y})}catch(y){}return rf}())||void 0===_?void 0:_.createHTML(y))||y}class jw{constructor(_){this.changingThisBreaksApplicationSecurity=_}toString(){return"SafeValue must use [property]=binding: ".concat(this.changingThisBreaksApplicationSecurity)+" (see ".concat(H,")")}}function Ss(y){return y instanceof jw?y.changingThisBreaksApplicationSecurity:y}class m1{constructor(_){this.inertDocumentHelper=_}getInertBodyElement(_){_="<body><remove></remove>"+_;try{const S=(new window.DOMParser).parseFromString(Za(_),"text/html").body;return null===S?this.inertDocumentHelper.getInertBodyElement(_):(S.removeChild(S.firstChild),S)}catch(S){return null}}}class y1{constructor(_){this.defaultDoc=_,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(_){const S=this.inertDocument.createElement("template");return S.innerHTML=Za(_),S}}const _1=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Hg(y){return(y=String(y)).match(_1)?y:"unsafe:"+y}function Xi(y){const _={};for(const S of y.split(","))_[S]=!0;return _}function Nl(...y){const _={};for(const S of y)for(const C in S)S.hasOwnProperty(C)&&(_[C]=!0);return _}const $w=Xi("area,br,col,hr,img,wbr"),Hw=Xi("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),zw=Xi("rp,rt"),zg=Nl($w,Nl(Hw,Xi("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Nl(zw,Xi("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Nl(zw,Hw)),qg=Xi("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),qw=Nl(qg,Xi("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Xi("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),C1=Xi("script,style,template");class w1{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(_){let S=_.firstChild,C=!0,T=[];for(;S;)if(S.nodeType===Node.ELEMENT_NODE?C=this.startElement(S):S.nodeType===Node.TEXT_NODE?this.chars(S.nodeValue):this.sanitizedSomething=!0,C&&S.firstChild)T.push(S),S=T1(S);else for(;S;){S.nodeType===Node.ELEMENT_NODE&&this.endElement(S);let D=S1(S);if(D){S=D;break}S=T.pop()}return this.buf.join("")}startElement(_){const S=Ww(_).toLowerCase();if(!zg.hasOwnProperty(S))return this.sanitizedSomething=!0,!C1.hasOwnProperty(S);this.buf.push("<"),this.buf.push(S);const C=_.attributes;for(let T=0;T<C.length;T++){const D=C.item(T),I=D.name,M=I.toLowerCase();if(!qw.hasOwnProperty(M)){this.sanitizedSomething=!0;continue}let A=D.value;qg[M]&&(A=Hg(A)),this.buf.push(" ",I,'="',Kw(A),'"')}return this.buf.push(">"),!0}endElement(_){const S=Ww(_).toLowerCase();zg.hasOwnProperty(S)&&!$w.hasOwnProperty(S)&&(this.buf.push("</"),this.buf.push(S),this.buf.push(">"))}chars(_){this.buf.push(Kw(_))}}function S1(y){const _=y.nextSibling;if(_&&y!==_.previousSibling)throw Gw(_);return _}function T1(y){const _=y.firstChild;if(_&&function b1(y,_){return(y.compareDocumentPosition(_)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}(y,_))throw Gw(_);return _}function Ww(y){const _=y.nodeName;return"string"==typeof _?_:"FORM"}function Gw(y){return new Error("Failed to sanitize html because the element is clobbered: ".concat(y.outerHTML))}const E1=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,D1=/([^\#-~ |!])/g;function Kw(y){return y.replace(/&/g,"&amp;").replace(E1,function(_){return"&#"+(1024*(_.charCodeAt(0)-55296)+(_.charCodeAt(1)-56320)+65536)+";"}).replace(D1,function(_){return"&#"+_.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let sf;function Wg(y){return"content"in y&&function M1(y){return y.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===y.nodeName}(y)?y.content:null}var ec=function(y){return y[y.NONE=0]="NONE",y[y.HTML=1]="HTML",y[y.STYLE=2]="STYLE",y[y.SCRIPT=3]="SCRIPT",y[y.URL=4]="URL",y[y.RESOURCE_URL=5]="RESOURCE_URL",y}(ec||{});function Jw(y){const _=function Ol(){const y=ze();return y&&y[Go].sanitizer}();return _?Lw(_.sanitize(ec.HTML,y)||""):function Pl(y,_){const S=function g1(y){return y instanceof jw&&y.getTypeName()||null}(y);if(null!=S&&S!==_){if("ResourceURL"===S&&"URL"===_)return!0;throw new Error("Required a safe ".concat(_,", got a ").concat(S," (see ").concat(H,")"))}return S===_}(y,"HTML")?Lw(Ss(y)):function I1(y,_){let S=null;try{sf=sf||function Bw(y){const _=new y1(y);return function v1(){try{return!!(new window.DOMParser).parseFromString(Za(""),"text/html")}catch(y){return!1}}()?new m1(_):_}(y);let C=_?String(_):"";S=sf.getInertBodyElement(C);let T=5,D=C;do{if(0===T)throw new Error("Failed to sanitize html because the input is unstable");T--,C=D,D=S.innerHTML,S=sf.getInertBodyElement(C)}while(C!==D);return Za((new w1).sanitizeChildren(Wg(S)||S))}finally{if(S){const C=Wg(S)||S;for(;C.firstChild;)C.removeChild(C.firstChild)}}}(ws(),ln(y))}const k1=/^>|^->|<!--|-->|--!>|<!-$/g,x1=/(<|>)/g,F1="\u200b$1\u200b";function wo(y){return y instanceof Function?y():y}var Ts=function(y){return y[y.Important=1]="Important",y[y.DashCase=2]="DashCase",y}(Ts||{});let Qg;function Xg(y,_){return Qg(y,_)}function nc(y,_,S,C,T){if(null!=C){let D,I=!1;Br(C)?D=C:jr(C)&&(I=!0,C=C[sr]);const M=Hn(C);0===y&&null!==S?null==T?ub(_,S,M):ca(_,S,M,T||null,!0):1===y&&null!==S?ca(_,S,M,T||null,!0):2===y?function Fl(y,_,S){const C=df(y,_);C&&function tF(y,_,S,C){y.removeChild(_,S,C)}(y,C,_,S)}(_,M,I):3===y&&_.destroyNode(M),null!=D&&function oF(y,_,S,C,T){const D=S[fi];D!==Hn(S)&&nc(_,y,C,D,T);for(let M=mr;M<S.length;M++){const A=S[M];hf(A[wt],A,y,_,C,D)}}(_,y,D,S,T)}}function Zg(y,_){return y.createComment(function Zw(y){return y.replace(k1,_=>_.replace(x1,F1))}(_))}function lf(y,_,S){return y.createElement(_,S)}function ab(y,_){var S;null===(S=_[Go].changeDetectionScheduler)||void 0===S||S.notify(1),hf(y,_,_[nn],2,null,null)}function cb(y,_){const S=y[$a],C=S.indexOf(_);S.splice(C,1)}function kl(y,_){if(y.length<=mr)return;const S=mr+_,C=y[S];if(C){const T=C[dl];null!==T&&T!==y&&cb(T,C),_>0&&(y[S-1][Wo]=C[Wo]);const D=Sd(y,mr+_);!function K1(y,_){ab(y,_),_[sr]=null,_[Vr]=null}(C[wt],C);const I=D[di];null!==I&&I.detachView(D[wt]),C[gr]=null,C[Wo]=null,C[Jt]&=-129}return C}function uf(y,_){if(!(256&_[Jt])){const S=_[nn];S.destroyNode&&hf(y,_,S,3,null,null),function Q1(y){let _=y[ul];if(!_)return em(y[wt],y);for(;_;){let S=null;if(jr(_))S=_[ul];else{const C=_[mr];C&&(S=C)}if(!S){for(;_&&!_[Wo]&&_!==y;)jr(_)&&em(_[wt],_),_=_[gr];null===_&&(_=y),jr(_)&&em(_[wt],_),S=_&&_[Wo]}_=S}}(_)}}function em(y,_){if(256&_[Jt])return;const S=tt(null);try{_[Jt]&=-129,_[Jt]|=256,_[ra]&&function Yt(y){if(ke(y),lt(y))for(let _=0;_<y.producerNode.length;_++)Tt(y.producerNode[_],y.producerIndexOfThis[_]);y.producerNode.length=y.producerLastReadVersion.length=y.producerIndexOfThis.length=0,y.liveConsumerNode&&(y.liveConsumerNode.length=y.liveConsumerIndexOfThis.length=0)}(_[ra]),function eF(y,_){let S;if(null!=y&&null!=(S=y.destroyHooks))for(let C=0;C<S.length;C+=2){const T=_[S[C]];if(!(T instanceof Cl)){const D=S[C+1];if(Array.isArray(D))for(let I=0;I<D.length;I+=2){const M=T[D[I]],A=D[I+1];hi(4,M,A);try{A.call(M)}finally{hi(5,M,A)}}else{hi(4,T,D);try{D.call(T)}finally{hi(5,T,D)}}}}}(y,_),function Z1(y,_){const S=y.cleanup,C=_[Va];if(null!==S)for(let D=0;D<S.length-1;D+=2)if("string"==typeof S[D]){const I=S[D+3];I>=0?C[I]():C[-I].unsubscribe(),D+=2}else S[D].call(C[S[D+1]]);null!==C&&(_[Va]=null);const T=_[Cs];if(null!==T){_[Cs]=null;for(let D=0;D<T.length;D++)(0,T[D])()}}(y,_),1===_[wt].type&&_[nn].destroy();const C=_[dl];if(null!==C&&Br(_[gr])){C!==_[gr]&&cb(C,_);const T=_[di];null!==T&&T.detachView(y)}!function Ox(y){Ag.delete(y[fl])}(_)}finally{tt(S)}}function tm(y,_,S){return function lb(y,_,S){let C=_;for(;null!==C&&40&C.type;)C=(_=C).parent;if(null===C)return S[sr];{const{componentOffset:T}=C;if(T>-1){const{encapsulation:D}=y.data[C.directiveStart+T];if(D===Ho.None||D===Ho.Emulated)return null}return Yr(C,S)}}(y,_.parent,S)}function ca(y,_,S,C,T){y.insertBefore(_,S,C,T)}function ub(y,_,S){y.appendChild(_,S)}function db(y,_,S,C,T){null!==C?ca(y,_,S,C,T):ub(y,_,S)}function df(y,_){return y.parentNode(_)}let nm,pb=function hb(y,_,S){return 40&y.type?Yr(y,S):null};function ff(y,_,S,C){const T=tm(y,C,_),D=_[nn],M=function fb(y,_,S){return pb(y,_,S)}(C.parent||_[Vr],C,_);if(null!=T)if(Array.isArray(S))for(let A=0;A<S.length;A++)db(D,T,S[A],M,!1);else db(D,T,S,M,!1);void 0!==nm&&nm(D,C,_,S,T)}function xl(y,_){if(null!==_){const S=_.type;if(3&S)return Yr(_,y);if(4&S)return rm(-1,y[_.index]);if(8&S){const C=_.child;if(null!==C)return xl(y,C);{const T=y[_.index];return Br(T)?rm(-1,T):Hn(T)}}if(32&S)return Xg(_,y)()||Hn(y[_.index]);{const C=mb(y,_);return null!==C?Array.isArray(C)?C[0]:xl(ia(y[cr]),C):xl(y,_.next)}}return null}function mb(y,_){return null!==_?y[cr][Vr].projection[_.projection]:null}function rm(y,_){const S=mr+y+1;if(S<_.length){const C=_[S],T=C[wt].firstChild;if(null!==T)return xl(C,T)}return _[fi]}function om(y,_,S,C,T,D,I){for(;null!=S;){const M=C[S.index],A=S.type;if(I&&0===_&&(M&&Hr(Hn(M),C),S.flags|=2),32&~S.flags)if(8&A)om(y,_,S.child,C,T,D,!1),nc(_,y,T,M,D);else if(32&A){const R=Xg(S,C);let N;for(;N=R();)nc(_,y,T,N,D);nc(_,y,T,M,D)}else 16&A?vb(y,_,C,S,T,D):nc(_,y,T,M,D);S=I?S.projectionNext:S.next}}function hf(y,_,S,C,T,D){om(S,C,y.firstChild,_,T,D,!1)}function vb(y,_,S,C,T,D){const I=S[cr],A=I[Vr].projection[C.projection];if(Array.isArray(A))for(let R=0;R<A.length;R++)nc(_,y,T,A[R],D);else{let R=A;const N=I[gr];qd(C)&&(R.flags|=128),om(y,_,R,N,T,D,!0)}}function _b(y,_,S){""===S?y.removeAttribute(_,"class"):y.setAttribute(_,"class",S)}function Cb(y,_,S){const{mergedAttrs:C,classes:T,styles:D}=S;null!==C&&Hp(y,_,C),null!==T&&_b(y,_,T),null!==D&&function sF(y,_,S){y.setAttribute(_,"style",S)}(y,_,D)}const dn={};function cn(y=1){wb(wn(),ze(),$r()+y,!1)}function wb(y,_,S,C){if(!C)if(3&~_[Jt]){const D=y.preOrderHooks;null!==D&&Vd(_,D,0,S)}else{const D=y.preOrderCheckHooks;null!==D&&Ud(_,D,S)}sa(S)}function dt(y,_=Cn.Default){const S=ze();return null===S?$t(y,_):GC(Vn(),S,Ft(y),_)}function Sb(y,_,S,C,T,D){const I=tt(null);try{let M=null;T&rr.SignalBased&&(M=_[C][_t]),null!==M&&void 0!==M.transformFn&&(D=M.transformFn(D)),T&rr.HasDecoratorInputTransform&&(D=y.inputTransforms[C].call(_,D)),null!==y.setInput?y.setInput(_,M,D,S,C):vC(_,M,C,D)}finally{tt(I)}}function pf(y,_,S,C,T,D,I,M,A,R,N){const O=_.blueprint.slice();return O[sr]=T,O[Jt]=204|C,(null!==R||y&&2048&y[Jt])&&(O[Jt]|=2048),EC(O),O[gr]=O[ja]=y,O[Xn]=S,O[Go]=I||y&&y[Go],O[nn]=M||y&&y[nn],O[Cr]=A||y&&y[Cr]||null,O[Vr]=D,O[fl]=function Px(){return Rx++}(),O[vo]=N,O[pC]=R,O[cr]=2==_.type?y[cr]:O,O}function rc(y,_,S,C,T){let D=y.data[_];if(null===D)D=function im(y,_,S,C,T){const D=AC(),I=dg(),A=y.data[_]=function pF(y,_,S,C,T,D){let I=_?_.injectorIndex:-1,M=0;return function za(){return null!==rn.skipHydrationRootTNode}()&&(M|=128),{type:S,index:C,insertBeforeIndex:null,injectorIndex:I,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:M,providerIndexes:0,value:T,attrs:D,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:_,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,I?D:D&&D.parent,S,_,C,T);return null===y.firstChild&&(y.firstChild=A),null!==D&&(I?null==D.child&&null!==A.parent&&(D.child=A):null===D.next&&(D.next=A,A.prev=D)),A}(y,_,S,C,T),function Kk(){return rn.lFrame.inI18n}()&&(D.flags|=32);else if(64&D.type){D.type=S,D.value=C,D.attrs=T;const I=function vl(){const y=rn.lFrame,_=y.currentTNode;return y.isParent?_:_.parent}();D.injectorIndex=null===I?-1:I.injectorIndex}return gi(D,!0),D}function Ll(y,_,S,C){if(0===S)return-1;const T=_.length;for(let D=0;D<S;D++)_.push(C),y.blueprint.push(C),y.data.push(null);return T}function Tb(y,_,S,C,T){const D=$r(),I=2&C;try{sa(-1),I&&_.length>un&&wb(y,_,un,!1),hi(I?2:0,T),S(C,T)}finally{sa(D),hi(I?3:1,T)}}function sm(y,_,S){if(tg(_)){const C=tt(null);try{const D=_.directiveEnd;for(let I=_.directiveStart;I<D;I++){const M=y.data[I];M.contentQueries&&M.contentQueries(1,S[I],I)}}finally{tt(C)}}}function am(y,_,S){MC()&&(function wF(y,_,S,C){const T=S.directiveStart,D=S.directiveEnd;oa(S)&&function MF(y,_,S){const C=Yr(_,y),T=Eb(S);let I=16;S.signals?I=4096:S.onPush&&(I=64);const M=gf(y,pf(y,T,null,I,C,_,null,y[Go].rendererFactory.createRenderer(C,S),null,null,null));y[_.index]=M}(_,S,y.data[T+S.componentOffset]),y.firstCreatePass||Bd(S,_),Hr(C,_);const I=S.initialInputs;for(let M=T;M<D;M++){const A=y.data[M],R=aa(_,y,M,S);Hr(R,_),null!==I&&AF(0,M-T,R,A,0,I),Ko(A)&&(_o(S.index,_)[Xn]=aa(_,y,M,S))}}(y,_,S,Yr(S,_)),!(64&~S.flags)&&Rb(y,_,S))}function cm(y,_,S=Yr){const C=_.localNames;if(null!==C){let T=_.index+1;for(let D=0;D<C.length;D+=2){const I=C[D+1],M=-1===I?S(_,y):y[I];y[T++]=M}}}function Eb(y){const _=y.tView;return null===_||_.incompleteFirstPass?y.tView=lm(1,null,y.template,y.decls,y.vars,y.directiveDefs,y.pipeDefs,y.viewQuery,y.schemas,y.consts,y.id):_}function lm(y,_,S,C,T,D,I,M,A,R,N){const O=un+C,L=O+T,$=function cF(y,_){const S=[];for(let C=0;C<_;C++)S.push(C<y?null:dn);return S}(O,L),Q="function"==typeof R?R():R;return $[wt]={type:y,blueprint:$,template:S,queries:null,viewQuery:M,declTNode:_,data:$.slice().fill(null,O),bindingStartIndex:O,expandoStartIndex:L,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof D?D():D,pipeRegistry:"function"==typeof I?I():I,firstChild:null,schemas:A,consts:Q,incompleteFirstPass:!1,ssrId:N}}let Db=()=>null;function Ib(y,_,S,C,T){for(let D in _){if(!_.hasOwnProperty(D))continue;const I=_[D];if(void 0===I)continue;null!=C||(C={});let M,A=rr.None;Array.isArray(I)?(M=I[0],A=I[1]):M=I;let R=D;if(null!==T){if(!T.hasOwnProperty(D))continue;R=T[D]}0===y?Mb(C,S,R,M,A):Mb(C,S,R,M)}return C}function Mb(y,_,S,C,T){let D;y.hasOwnProperty(S)?(D=y[S]).push(_,C):D=y[S]=[_,C],void 0!==T&&D.push(T)}function ho(y,_,S,C,T,D,I,M){const A=Yr(_,S);let N,R=_.inputs;!M&&null!=R&&(N=R[C])?(pm(y,S,N,C,T),oa(_)&&function yF(y,_){const S=_o(_,y);16&S[Jt]||(S[Jt]|=64)}(S,_.index)):3&_.type&&(C=function mF(y){return"class"===y?"className":"for"===y?"htmlFor":"formaction"===y?"formAction":"innerHtml"===y?"innerHTML":"readonly"===y?"readOnly":"tabindex"===y?"tabIndex":y}(C),T=null!=I?I(T,_.value||"",C):T,D.setProperty(A,C,T))}function um(y,_,S,C){if(MC()){const T=null===C?null:{"":-1},D=function SF(y,_){const S=y.directiveRegistry;let C=null,T=null;if(S)for(let I=0;I<S.length;I++){const M=S[I];if(nC(_,M.selectors,!1))if(C||(C=[]),Ko(M))if(null!==M.findHostDirectiveDefs){const A=[];T=T||new Map,M.findHostDirectiveDefs(M,A,T),C.unshift(...A,M),dm(y,_,A.length)}else C.unshift(M),dm(y,_,0);else{var D;T=T||new Map,null===(D=M.findHostDirectiveDefs)||void 0===D||D.call(M,M,C,T),C.push(M)}}return null===C?null:[C,T]}(y,S);let I,M;null===D?I=M=null:[I,M]=D,null!==I&&Ab(y,_,S,I,T,M),T&&function TF(y,_,S){if(_){const C=y.localNames=[];for(let T=0;T<_.length;T+=2){const D=S[_[T+1]];if(null==D)throw new j(-301,!1);C.push(_[T],D)}}}(S,C,T)}S.mergedAttrs=al(S.mergedAttrs,S.attrs)}function Ab(y,_,S,C,T,D){for(let O=0;O<C.length;O++)Sg(Bd(S,_),y,C[O].type);!function DF(y,_,S){y.flags|=1,y.directiveStart=_,y.directiveEnd=_+S,y.providerIndexes=_}(S,y.data.length,C.length);for(let O=0;O<C.length;O++){const L=C[O];L.providersResolver&&L.providersResolver(L)}let I=!1,M=!1,A=Ll(y,_,C.length,null);for(let O=0;O<C.length;O++){const L=C[O];S.mergedAttrs=al(S.mergedAttrs,L.hostAttrs),IF(y,S,_,A,L),EF(A,L,T),null!==L.contentQueries&&(S.flags|=4),(null!==L.hostBindings||null!==L.hostAttrs||0!==L.hostVars)&&(S.flags|=64);const $=L.type.prototype;var R,N;!I&&($.ngOnChanges||$.ngOnInit||$.ngDoCheck)&&((null!==(R=y.preOrderHooks)&&void 0!==R?R:y.preOrderHooks=[]).push(S.index),I=!0),M||!$.ngOnChanges&&!$.ngDoCheck||((null!==(N=y.preOrderCheckHooks)&&void 0!==N?N:y.preOrderCheckHooks=[]).push(S.index),M=!0),A++}!function gF(y,_,S){const T=_.directiveEnd,D=y.data,I=_.attrs,M=[];let A=null,R=null;for(let N=_.directiveStart;N<T;N++){const O=D[N],L=S?S.get(O):null,Q=L?L.outputs:null;A=Ib(0,O.inputs,N,A,L?L.inputs:null),R=Ib(1,O.outputs,N,R,Q);const ae=null===A||null===I||zp(_)?null:RF(A,N,I);M.push(ae)}null!==A&&(A.hasOwnProperty("class")&&(_.flags|=8),A.hasOwnProperty("style")&&(_.flags|=16)),_.initialInputs=M,_.inputs=A,_.outputs=R}(y,S,D)}function Rb(y,_,S){const C=S.directiveStart,T=S.directiveEnd,D=S.index,I=function Qk(){return rn.lFrame.currentDirectiveIndex}();try{sa(D);for(let M=C;M<T;M++){const A=y.data[M],R=_[M];hg(M),(null!==A.hostBindings||0!==A.hostVars||null!==A.hostAttrs)&&bF(A,R)}}finally{sa(-1),hg(I)}}function bF(y,_){null!==y.hostBindings&&y.hostBindings(1,_)}function dm(y,_,S){var C;_.componentOffset=S,(null!==(C=y.components)&&void 0!==C?C:y.components=[]).push(_.index)}function EF(y,_,S){if(S){if(_.exportAs)for(let C=0;C<_.exportAs.length;C++)S[_.exportAs[C]]=y;Ko(_)&&(S[""]=y)}}function IF(y,_,S,C,T){y.data[C]=T;const D=T.factory||(T.factory=ea(T.type)),I=new Cl(D,Ko(T),dt);y.blueprint[C]=I,S[C]=I,function _F(y,_,S,C,T){const D=T.hostBindings;if(D){let I=y.hostBindingOpCodes;null===I&&(I=y.hostBindingOpCodes=[]);const M=~_.index;(function CF(y){let _=y.length;for(;_>0;){const S=y[--_];if("number"==typeof S&&S<0)return S}return 0})(I)!=M&&I.push(M),I.push(S,C,D)}}(y,_,C,Ll(y,S,T.hostVars,dn),T)}function AF(y,_,S,C,T,D){const I=D[_];if(null!==I)for(let M=0;M<I.length;)Sb(C,S,I[M++],I[M++],I[M++],I[M++])}function RF(y,_,S){let C=null,T=0;for(;T<S.length;){const D=S[T];if(0!==D)if(5!==D){if("number"==typeof D)break;if(y.hasOwnProperty(D)){null===C&&(C=[]);const I=y[D];for(let M=0;M<I.length;M+=3)if(I[M]===_){C.push(D,I[M+1],I[M+2],S[T+1]);break}}T+=2}else T+=2;else T+=4}return C}function Pb(y,_,S,C){return[y,!0,0,_,null,C,null,S,null,null]}function Nb(y,_){const S=y.contentQueries;if(null!==S){const C=tt(null);try{for(let T=0;T<S.length;T+=2){const I=S[T+1];if(-1!==I){const M=y.data[I];Fd(S[T]),M.contentQueries(2,_[I],I)}}}finally{tt(C)}}}function gf(y,_){return y[ul]?y[hC][Wo]=_:y[ul]=_,y[hC]=_,_}function hm(y,_,S){Fd(0);const C=tt(null);try{_(y,S)}finally{tt(C)}}function mf(y,_){const S=y[Cr],C=S?S.get(vi,null):null;C&&C.handleError(_)}function pm(y,_,S,C,T){for(let D=0;D<S.length;){const I=S[D++],M=S[D++],A=S[D++];Sb(y.data[I],_[I],C,M,A,T)}}function PF(y,_){const S=_o(_,y),C=S[wt];!function NF(y,_){for(let S=_.length;S<y.blueprint.length;S++)_.push(y.blueprint[S])}(C,S);const T=S[sr];null!==T&&null===S[vo]&&(S[vo]=Lg(T,S[Cr])),gm(C,S,S[Xn])}function gm(y,_,S){mg(_);try{var C;const T=y.viewQuery;null!==T&&hm(1,T,S);const D=y.template;null!==D&&Tb(y,_,D,1,S),y.firstCreatePass&&(y.firstCreatePass=!1),null===(C=_[di])||void 0===C||C.finishViewCreation(y),y.staticContentQueries&&Nb(y,_),y.staticViewQueries&&hm(2,y.viewQuery,S);const I=y.components;null!==I&&function OF(y,_){for(let S=0;S<_.length;S++)PF(y,_[S])}(_,I)}catch(T){throw y.firstCreatePass&&(y.incompleteFirstPass=!0,y.firstCreatePass=!1),T}finally{_[Jt]&=-5,yg()}}function oc(y,_){return!_||null===_.firstChild||qd(y)}function Vl(y,_,S,C=!0){const T=_[wt];if(function X1(y,_,S,C){const T=mr+C,D=S.length;C>0&&(S[T-1][Wo]=_),C<D-mr?(_[Wo]=S[T],K0(S,mr+C,_)):(S.push(_),_[Wo]=null),_[gr]=S;const I=_[dl];null!==I&&S!==I&&function Y1(y,_){const S=y[$a];_[cr]!==_[gr][gr][cr]&&(y[Jt]|=eg.HasTransplantedViews),null===S?y[$a]=[_]:S.push(_)}(I,_);const M=_[di];null!==M&&M.insertView(y),lg(_),_[Jt]|=128}(T,_,y,S),C){const I=rm(S,y),M=_[nn],A=df(M,y[fi]);null!==A&&function J1(y,_,S,C,T,D){C[sr]=T,C[Vr]=_,hf(y,C,S,1,T,D)}(T,y[Vr],M,_,A,I)}const D=_[vo];null!==D&&null!==D.firstChild&&(D.firstChild=null)}function jl(y,_,S,C,T=!1){for(;null!==S;){const D=_[S.index];null!==D&&C.push(Hn(D)),Br(D)&&Lb(D,C);const I=S.type;if(8&I)jl(y,_,S.child,C);else if(32&I){const M=Xg(S,_);let A;for(;A=M();)C.push(A)}else if(16&I){const M=mb(_,S);if(Array.isArray(M))C.push(...M);else{const A=ia(_[cr]);jl(A[wt],A,M,C,!0)}}S=T?S.projectionNext:S.next}return C}function Lb(y,_){for(let S=mr;S<y.length;S++){const C=y[S],T=C[wt].firstChild;null!==T&&jl(C[wt],C,T,_)}y[fi]!==y[sr]&&_.push(y[fi])}let Ub=[];const LF=se(se({},pt),{},{consumerIsAlwaysLive:!0,consumerMarkedDirty:y=>{yl(y.lView)},consumerOnSignalRead(){this.lView[ra]=this}}),Vb=100;function yf(y,_=!0,S=0){const C=y[Go],T=C.rendererFactory;var I;null===(I=T.begin)||void 0===I||I.call(T);try{!function UF(y,_){ym(y,_);let S=0;for(;cg(y);){if(S===Vb)throw new j(103,!1);S++,ym(y,1)}}(y,S)}catch(R){throw _&&mf(y,R),R}finally{var M,A;null===(M=T.end)||void 0===M||M.call(T),null===(A=C.inlineEffectRunner)||void 0===A||A.flush()}}function VF(y,_,S,C){var T;const D=_[Jt];if(!(256&~D))return;null===(T=_[Go].inlineEffectRunner)||void 0===T||T.flush(),mg(_);let M=null,A=null;(function jF(y){return 2!==y.type})(y)&&(A=function kF(y){var _;return null!==(_=y[ra])&&void 0!==_?_:function xF(y){var _;const S=null!==(_=Ub.pop())&&void 0!==_?_:Object.create(LF);return S.lView=y,S}(y)}(_),M=function ot(y){return y&&(y.nextProducerIndex=0),tt(y)}(A));try{EC(_),function PC(y){return rn.lFrame.bindingIndex=y}(y.bindingStartIndex),null!==S&&Tb(y,_,S,2,C);const R=!(3&~D);if(R){const L=y.preOrderCheckHooks;null!==L&&Ud(_,L,null)}else{const L=y.preOrderHooks;null!==L&&Vd(_,L,0,null),vg(_,0)}if(function BF(y){for(let _=yw(y);null!==_;_=vw(_)){if(!(_[Jt]&eg.HasTransplantedViews))continue;const S=_[$a];for(let C=0;C<S.length;C++){Uk(S[C])}}}(_),jb(_,0),null!==y.contentQueries&&Nb(y,_),R){const L=y.contentCheckHooks;null!==L&&Ud(_,L)}else{const L=y.contentHooks;null!==L&&Vd(_,L,1),vg(_,1)}!function aF(y,_){const S=y.hostBindingOpCodes;if(null!==S)try{for(let C=0;C<S.length;C++){const T=S[C];if(T<0)sa(~T);else{const D=T,I=S[++C],M=S[++C];Jk(I,D),M(2,_[D])}}}finally{sa(-1)}}(y,_);const N=y.components;null!==N&&$b(_,N,0);const O=y.viewQuery;if(null!==O&&hm(2,O,C),R){const L=y.viewCheckHooks;null!==L&&Ud(_,L)}else{const L=y.viewHooks;null!==L&&Vd(_,L,2),vg(_,2)}if(!0===y.firstUpdatePass&&(y.firstUpdatePass=!1),_[hl]){for(const L of _[hl])L();_[hl]=null}_[Jt]&=-73}catch(R){throw yl(_),R}finally{null!==A&&(function kt(y,_){if(tt(_),y&&void 0!==y.producerNode&&void 0!==y.producerIndexOfThis&&void 0!==y.producerLastReadVersion){if(lt(y))for(let S=y.nextProducerIndex;S<y.producerNode.length;S++)Tt(y.producerNode[S],y.producerIndexOfThis[S]);for(;y.producerNode.length>y.nextProducerIndex;)y.producerNode.pop(),y.producerLastReadVersion.pop(),y.producerIndexOfThis.pop()}}(A,M),function FF(y){y.lView[ra]!==y&&(y.lView=null,Ub.push(y))}(A)),yg()}}function jb(y,_){for(let S=yw(y);null!==S;S=vw(S))for(let C=mr;C<S.length;C++)Bb(S[C],_)}function $F(y,_,S){Bb(_o(_,y),S)}function Bb(y,_){ag(y)&&ym(y,_)}function ym(y,_){const C=y[wt],T=y[Jt],D=y[ra];let I=!!(0===_&&16&T);if(I||(I=!!(64&T&&0===_)),I||(I=!!(1024&T)),I||(I=!(null==D||!D.dirty||!fn(D))),D&&(D.dirty=!1),y[Jt]&=-9217,I)VF(C,y,C.template,y[Xn]);else if(8192&T){jb(y,1);const M=C.components;null!==M&&$b(y,M,1)}}function $b(y,_,S){for(let C=0;C<_.length;C++)$F(y,_[C],S)}function Bl(y){var _;for(null===(_=y[Go].changeDetectionScheduler)||void 0===_||_.notify();y;){y[Jt]|=64;const S=ia(y);if(ng(y)&&!S)return y;y=S}return null}class $l{get rootNodes(){const _=this._lView,S=_[wt];return jl(S,_,S.firstChild,[])}constructor(_,S,C=!0){this._lView=_,this._cdRefInjectingView=S,this.notifyErrorHandler=C,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Xn]}set context(_){this._lView[Xn]=_}get destroyed(){return!(256&~this._lView[Jt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const _=this._lView[gr];if(Br(_)){const S=_[8],C=S?S.indexOf(this):-1;C>-1&&(kl(_,C),Sd(S,C))}this._attachedToViewContainer=!1}uf(this._lView[wt],this._lView)}onDestroy(_){xd(this._lView,_)}markForCheck(){Bl(this._cdRefInjectingView||this._lView)}detach(){this._lView[Jt]&=-129}reattach(){lg(this._lView),this._lView[Jt]|=128}detectChanges(){this._lView[Jt]|=1024,yf(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new j(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,ab(this._lView[wt],this._lView)}attachToAppRef(_){if(this._attachedToViewContainer)throw new j(902,!1);this._appRef=_,lg(this._lView)}}let Zi=(()=>{class _{}return _.__NG_ELEMENT_ID__=qF,_})();const HF=Zi,zF=class extends HF{constructor(_,S,C){super(),this._declarationLView=_,this._declarationTContainer=S,this.elementRef=C}get ssrId(){var _;return(null===(_=this._declarationTContainer.tView)||void 0===_?void 0:_.ssrId)||null}createEmbeddedView(_,S){return this.createEmbeddedViewImpl(_,S)}createEmbeddedViewImpl(_,S,C){const T=function Ul(y,_,S,C){const T=tt(null);try{var D,I,M;const A=_.tView,O=pf(y,A,S,4096&y[Jt]?4096:16,null,_,null,null,null!==(D=null==C?void 0:C.injector)&&void 0!==D?D:null,null!==(I=null==C?void 0:C.embeddedViewInjector)&&void 0!==I?I:null,null!==(M=null==C?void 0:C.dehydratedView)&&void 0!==M?M:null);O[dl]=y[_.index];const $=y[di];return null!==$&&(O[di]=$.createEmbeddedView(A)),gm(A,O,S),O}finally{tt(T)}}(this._declarationLView,this._declarationTContainer,_,{embeddedViewInjector:S,dehydratedView:C});return new $l(T)}};function qF(){return vf(Vn(),ze())}function vf(y,_){return 4&y.type?new zF(_,y,Ja(y,_)):null}"^(\\d+)*(".concat("b","|").concat("h",")*(.*)");class Sf{}class gL{}class Jb{}class yL{resolveComponentFactory(_){throw function mL(y){const _=Error("No component factory found for ".concat(Ut(y),"."));return _.ngComponent=y,_}(_)}}let Tf=(()=>{class _{}return _.NULL=new yL,_})();class Sm{}let es=(()=>{class _{constructor(){this.destroyNode=null}}return _.__NG_ELEMENT_ID__=()=>function vL(){const y=ze(),S=_o(Vn().index,y);return(jr(S)?S:y)[nn]}(),_})(),_L=(()=>{var y;class _{}return(y=_).\u0275prov=Ot({token:y,providedIn:"root",factory:()=>null}),_})();const Tm={},Xb=new Set;function Ci(y){var _,S;Xb.has(y)||(Xb.add(y),null===(_=performance)||void 0===_||null===(S=_.mark)||void 0===S||S.call(_,"mark_feature_usage",{detail:{feature:y}}))}function Yb(...y){}class kn{constructor({enableLongStackTrace:_=!1,shouldCoalesceEventChangeDetection:S=!1,shouldCoalesceRunChangeDetection:C=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new zn(!1),this.onMicrotaskEmpty=new zn(!1),this.onStable=new zn(!1),this.onError=new zn(!1),typeof Zone>"u")throw new j(908,!1);Zone.assertZonePatched();const T=this;T._nesting=0,T._outer=T._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(T._inner=T._inner.fork(new Zone.TaskTrackingZoneSpec)),_&&Zone.longStackTraceZoneSpec&&(T._inner=T._inner.fork(Zone.longStackTraceZoneSpec)),T.shouldCoalesceEventChangeDetection=!C&&S,T.shouldCoalesceRunChangeDetection=C,T.lastRequestAnimationFrameId=-1,T.nativeRequestAnimationFrame=function CL(){const y="function"==typeof Pe.requestAnimationFrame;let _=Pe[y?"requestAnimationFrame":"setTimeout"],S=Pe[y?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&_&&S){const C=_[Zone.__symbol__("OriginalDelegate")];C&&(_=C);const T=S[Zone.__symbol__("OriginalDelegate")];T&&(S=T)}return{nativeRequestAnimationFrame:_,nativeCancelAnimationFrame:S}}().nativeRequestAnimationFrame,function SL(y){const _=()=>{!function bL(y){y.isCheckStableRunning||-1!==y.lastRequestAnimationFrameId||(y.lastRequestAnimationFrameId=y.nativeRequestAnimationFrame.call(Pe,()=>{y.fakeTopEventTask||(y.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{y.lastRequestAnimationFrameId=-1,Dm(y),y.isCheckStableRunning=!0,Em(y),y.isCheckStableRunning=!1},void 0,()=>{},()=>{})),y.fakeTopEventTask.invoke()}),Dm(y))}(y)};y._inner=y._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(S,C,T,D,I,M)=>{if(function TL(y){var _;return!(!Array.isArray(y)||1!==y.length)&&!0===(null===(_=y[0].data)||void 0===_?void 0:_.__ignore_ng_zone__)}(M))return S.invokeTask(T,D,I,M);try{return Zb(y),S.invokeTask(T,D,I,M)}finally{(y.shouldCoalesceEventChangeDetection&&"eventTask"===D.type||y.shouldCoalesceRunChangeDetection)&&_(),eS(y)}},onInvoke:(S,C,T,D,I,M,A)=>{try{return Zb(y),S.invoke(T,D,I,M,A)}finally{y.shouldCoalesceRunChangeDetection&&_(),eS(y)}},onHasTask:(S,C,T,D)=>{S.hasTask(T,D),C===T&&("microTask"==D.change?(y._hasPendingMicrotasks=D.microTask,Dm(y),Em(y)):"macroTask"==D.change&&(y.hasPendingMacrotasks=D.macroTask))},onHandleError:(S,C,T,D)=>(S.handleError(T,D),y.runOutsideAngular(()=>y.onError.emit(D)),!1)})}(T)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!kn.isInAngularZone())throw new j(909,!1)}static assertNotInAngularZone(){if(kn.isInAngularZone())throw new j(909,!1)}run(_,S,C){return this._inner.run(_,S,C)}runTask(_,S,C,T){const D=this._inner,I=D.scheduleEventTask("NgZoneEvent: "+T,_,wL,Yb,Yb);try{return D.runTask(I,S,C)}finally{D.cancelTask(I)}}runGuarded(_,S,C){return this._inner.runGuarded(_,S,C)}runOutsideAngular(_){return this._outer.run(_)}}const wL={};function Em(y){if(0==y._nesting&&!y.hasPendingMicrotasks&&!y.isStable)try{y._nesting++,y.onMicrotaskEmpty.emit(null)}finally{if(y._nesting--,!y.hasPendingMicrotasks)try{y.runOutsideAngular(()=>y.onStable.emit(null))}finally{y.isStable=!0}}}function Dm(y){y.hasPendingMicrotasks=!!(y._hasPendingMicrotasks||(y.shouldCoalesceEventChangeDetection||y.shouldCoalesceRunChangeDetection)&&-1!==y.lastRequestAnimationFrameId)}function Zb(y){y._nesting++,y.isStable&&(y.isStable=!1,y.onUnstable.emit(null))}function eS(y){y._nesting--,Em(y)}class tS{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new zn,this.onMicrotaskEmpty=new zn,this.onStable=new zn,this.onError=new zn}run(_,S,C){return _.apply(S,C)}runGuarded(_,S,C){return _.apply(S,C)}runOutsideAngular(_){return _()}runTask(_,S,C,T){return _.apply(S,C)}}var la=function(y){return y[y.EarlyRead=0]="EarlyRead",y[y.Write=1]="Write",y[y.MixedReadWrite=2]="MixedReadWrite",y[y.Read=3]="Read",y}(la||{});const nS={destroy(){}};function Mm(y,_){var S,C,T;!_&&function Pd(y){if(!dC())throw new j(-203,!1)}();const D=null!==(S=null==_?void 0:_.injector)&&void 0!==S?S:at(eo);if(!function Qo(y){return"browser"===(null!=y?y:at(eo)).get(bs)}(D))return nS;Ci("NgAfterNextRender");const I=D.get(Gl),M=null!==(C=I.handler)&&void 0!==C?C:I.handler=new oS,A=null!==(T=null==_?void 0:_.phase)&&void 0!==T?T:la.MixedReadWrite,R=()=>{M.unregister(O),N()},N=D.get(Ka).onDestroy(R),O=ui(D,()=>new rS(A,()=>{R(),y()}));return M.register(O),{destroy:R}}class rS{constructor(_,S){var C;this.phase=_,this.callbackFn=S,this.zone=at(kn),this.errorHandler=at(vi,{optional:!0}),null===(C=at(Sf,{optional:!0}))||void 0===C||C.notify(1)}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(S){var _;null===(_=this.errorHandler)||void 0===_||_.handleError(S)}}}class oS{constructor(){this.executingCallbacks=!1,this.buckets={[la.EarlyRead]:new Set,[la.Write]:new Set,[la.MixedReadWrite]:new Set,[la.Read]:new Set},this.deferredCallbacks=new Set}register(_){(this.executingCallbacks?this.deferredCallbacks:this.buckets[_.phase]).add(_)}unregister(_){this.buckets[_.phase].delete(_),this.deferredCallbacks.delete(_)}execute(){this.executingCallbacks=!0;for(const _ of Object.values(this.buckets))for(const S of _)S.invoke();this.executingCallbacks=!1;for(const _ of this.deferredCallbacks)this.buckets[_.phase].add(_);this.deferredCallbacks.clear()}destroy(){for(const _ of Object.values(this.buckets))_.clear();this.deferredCallbacks.clear()}}let Gl=(()=>{var y;class _{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){var C;this.executeInternalCallbacks(),null===(C=this.handler)||void 0===C||C.execute()}executeInternalCallbacks(){const C=[...this.internalCallbacks];this.internalCallbacks.length=0;for(const T of C)T()}ngOnDestroy(){var C;null===(C=this.handler)||void 0===C||C.destroy(),this.handler=null,this.internalCallbacks.length=0}}return(y=_).\u0275prov=Ot({token:y,providedIn:"root",factory:()=>new y}),_})();function Df(y,_,S){let C=S?y.styles:null,T=S?y.classes:null,D=0;if(null!==_)for(let I=0;I<_.length;I++){const M=_[I];"number"==typeof M?D=M:1==D?T=In(T,M):2==D&&(C=In(C,M+": "+_[++I]+";"))}S?y.styles=C:y.stylesWithoutHost=C,S?y.classes=T:y.classesWithoutHost=T}class aS extends Tf{constructor(_){super(),this.ngModule=_}resolveComponentFactory(_){const S=yn(_);return new Ql(S,this.ngModule)}}function cS(y){const _=[];for(const S in y){if(!y.hasOwnProperty(S))continue;const C=y[S];void 0!==C&&_.push({propName:Array.isArray(C)?C[0]:C,templateName:S})}return _}class If{constructor(_,S){this.injector=_,this.parentInjector=S}get(_,S,C){C=Cd(C);const T=this.injector.get(_,Tm,C);return T!==Tm||S===Tm?T:this.parentInjector.get(_,S,C)}}class Ql extends Jb{get inputs(){const _=this.componentDef,S=_.inputTransforms,C=cS(_.inputs);if(null!==S)for(const T of C)S.hasOwnProperty(T.propName)&&(T.transform=S[T.propName]);return C}get outputs(){return cS(this.componentDef.outputs)}constructor(_,S){super(),this.componentDef=_,this.ngModule=S,this.componentType=_.type,this.selector=function nk(y){return y.map(tk).join(",")}(_.selectors),this.ngContentSelectors=_.ngContentSelectors?_.ngContentSelectors:[],this.isBoundToModule=!!S}create(_,S,C,T){const D=tt(null);try{var M;let A=(T=T||this.ngModule)instanceof Xr?T:null===(M=T)||void 0===M?void 0:M.injector;A&&null!==this.componentDef.getStandaloneInjector&&(A=this.componentDef.getStandaloneInjector(A)||A);const R=A?new If(_,A):_,N=R.get(Sm,null);if(null===N)throw new j(407,!1);const O=R.get(_L,null),Q={rendererFactory:N,sanitizer:O,inlineEffectRunner:null,afterRenderEventManager:R.get(Gl,null),changeDetectionScheduler:R.get(Sf,null)},ae=N.createRenderer(null,this.componentDef),Ce=this.componentDef.selectors[0][0]||"div",Ee=C?function lF(y,_,S,C){const D=C.get(xw,!1)||S===Ho.ShadowDom,I=y.selectRootElement(_,D);return function uF(y){Db(y)}(I),I}(ae,C,this.componentDef.encapsulation,R):lf(ae,Ce,function AL(y){const _=y.toLowerCase();return"svg"===_?"svg":"math"===_?"math":null}(Ce));let Ae=512;this.componentDef.signals?Ae|=4096:this.componentDef.onPush||(Ae|=16);let ht=null;null!==Ee&&(ht=Lg(Ee,R,!0));const vt=lm(0,null,null,1,0,null,null,null,null,null,null),qt=pf(null,vt,null,Ae,null,null,Q,ae,R,null,ht);let Nn,An;mg(qt);try{const Un=this.componentDef;let Er,so=null;Un.findHostDirectiveDefs?(Er=[],so=new Map,Un.findHostDirectiveDefs(Un,Er,so),Er.push(Un)):Er=[Un];const Vi=function PL(y,_){const S=y[wt],C=un;return y[C]=_,rc(S,C,2,"#host",null)}(qt,Ee),ai=function NL(y,_,S,C,T,D,I){const M=T[wt];!function OL(y,_,S,C){for(const T of y)_.mergedAttrs=al(_.mergedAttrs,T.hostAttrs);null!==_.mergedAttrs&&(Df(_,_.mergedAttrs,!0),null!==S&&Cb(C,S,_))}(C,y,_,I);let A=null;null!==_&&(A=Lg(_,T[Cr]));const R=D.rendererFactory.createRenderer(_,S);let N=16;S.signals?N=4096:S.onPush&&(N=64);const O=pf(T,Eb(S),null,N,T[y.index],y,D,R,null,null,A);return M.firstCreatePass&&dm(M,y,C.length-1),gf(T,O),T[y.index]=O}(Vi,Ee,Un,Er,qt,Q,ae);An=ml(vt,un),Ee&&function xL(y,_,S,C){if(C)Hp(y,S,["ng-version","17.3.12"]);else{const{attrs:T,classes:D}=function rk(y){const _=[],S=[];let C=1,T=2;for(;C<y.length;){let D=y[C];if("string"==typeof D)2===T?""!==D&&_.push(D,y[++C]):8===T&&S.push(D);else{if(!zo(T))break;T=D}C++}return{attrs:_,classes:S}}(_.selectors[0]);T&&Hp(y,S,T),D&&D.length>0&&_b(y,S,D.join(" "))}}(ae,Un,Ee,C),void 0!==S&&function FL(y,_,S){const C=y.projection=[];for(let T=0;T<_.length;T++){const D=S[T];C.push(null!=D?Array.from(D):null)}}(An,this.ngContentSelectors,S),Nn=function kL(y,_,S,C,T,D){const I=Vn(),M=T[wt],A=Yr(I,T);Ab(M,T,I,S,null,C);for(let N=0;N<S.length;N++)Hr(aa(T,M,I.directiveStart+N,I),T);Rb(M,T,I),A&&Hr(A,T);const R=aa(T,M,I.directiveStart+I.componentOffset,I);if(y[Xn]=T[Xn]=R,null!==D)for(const N of D)N(R,_);return sm(M,I,T),R}(ai,Un,Er,so,qt,[LL]),gm(vt,qt,null)}finally{yg()}return new RL(this.componentType,Nn,Ja(An,qt),qt,An)}finally{tt(D)}}}class RL extends gL{constructor(_,S,C,T,D){super(),this.location=C,this._rootLView=T,this._tNode=D,this.previousInputValues=null,this.instance=S,this.hostView=this.changeDetectorRef=new $l(T,void 0,!1),this.componentType=_}setInput(_,S){const C=this._tNode.inputs;let T;if(null!==C&&(T=C[_])){var D;if(null!==(D=this.previousInputValues)&&void 0!==D||(this.previousInputValues=new Map),this.previousInputValues.has(_)&&Object.is(this.previousInputValues.get(_),S))return;const I=this._rootLView;pm(I[wt],I,T,_,S),this.previousInputValues.set(_,S),Bl(_o(this._tNode.index,I))}}get injector(){return new Mr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(_){this.hostView.onDestroy(_)}}function LL(){const y=Vn();Ld(ze()[wt],y)}let Xo=(()=>{class _{}return _.__NG_ELEMENT_ID__=UL,_})();function UL(){return function dS(y,_){let S;const C=_[y.index];return Br(C)?S=C:(S=Pb(C,_,null,y),_[y.index]=S,gf(_,S)),fS(S,_,y,C),new lS(S,y,_)}(Vn(),ze())}const VL=Xo,lS=class extends VL{constructor(_,S,C){super(),this._lContainer=_,this._hostTNode=S,this._hostLView=C}get element(){return Ja(this._hostTNode,this._hostLView)}get injector(){return new Mr(this._hostTNode,this._hostLView)}get parentInjector(){const _=$d(this._hostTNode,this._hostLView);if(Cg(_)){const S=bl(_,this._hostLView),C=wl(_);return new Mr(S[wt].data[C+8],S)}return new Mr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(_){const S=uS(this._lContainer);return null!==S&&S[_]||null}get length(){return this._lContainer.length-mr}createEmbeddedView(_,S,C){let T,D;"number"==typeof C?T=C:null!=C&&(T=C.index,D=C.injector);const M=_.createEmbeddedViewImpl(S||{},D,null);return this.insertImpl(M,T,oc(this._hostTNode,null)),M}createComponent(_,S,C,T,D){var I,A;const R=_&&!function ll(y){return"function"==typeof y}(_);let N;if(R)N=S;else{const Ee=S||{};N=Ee.index,C=Ee.injector,T=Ee.projectableNodes,D=Ee.environmentInjector||Ee.ngModuleRef}const O=R?_:new Ql(yn(_)),L=C||this.parentInjector;if(!D&&null==O.ngModule){const Ae=(R?L:this.parentInjector).get(Xr,null);Ae&&(D=Ae)}const $=yn(null!==(I=O.componentType)&&void 0!==I?I:{}),Q=(null==$?void 0:$.id,null),ae=null!==(A=null==Q?void 0:Q.firstChild)&&void 0!==A?A:null,Ce=O.create(L,T,ae,D);return this.insertImpl(Ce.hostView,N,oc(this._hostTNode,Q)),Ce}insert(_,S){return this.insertImpl(_,S,!0)}insertImpl(_,S,C){const T=_._lView;if(function Lk(y){return Br(y[gr])}(T)){const M=this.indexOf(_);if(-1!==M)this.detach(M);else{const A=T[gr],R=new lS(A,A[Vr],A[gr]);R.detach(R.indexOf(_))}}const D=this._adjustIndex(S),I=this._lContainer;return Vl(I,T,D,C),_.attachToViewContainerRef(),K0(Pm(I),D,_),_}move(_,S){return this.insert(_,S)}indexOf(_){const S=uS(this._lContainer);return null!==S?S.indexOf(_):-1}remove(_){const S=this._adjustIndex(_,-1),C=kl(this._lContainer,S);C&&(Sd(Pm(this._lContainer),S),uf(C[wt],C))}detach(_){const S=this._adjustIndex(_,-1),C=kl(this._lContainer,S);return C&&null!=Sd(Pm(this._lContainer),S)?new $l(C):null}_adjustIndex(_,S=0){return null==_?this.length+S:_}};function uS(y){return y[8]}function Pm(y){return y[8]||(y[8]=[])}let fS=function pS(y,_,S,C){if(y[fi])return;let T;T=8&S.type?Hn(C):function jL(y,_){const S=y[nn],C=S.createComment(""),T=Yr(_,y);return ca(S,df(S,T),C,function nF(y,_){return y.nextSibling(_)}(S,T),!1),C}(_,S),y[fi]=T},Nm=()=>!1;function TS(y){return function bS(y){return"function"==typeof y&&void 0!==y[_t]}(y)&&"function"==typeof y.set}function jn(y){let _=function xS(y){return Object.getPrototypeOf(y.prototype).constructor}(y.type),S=!0;const C=[y];for(;_;){let T;if(Ko(y))T=_.\u0275cmp||_.\u0275dir;else{if(_.\u0275cmp)throw new j(903,!1);T=_.\u0275dir}if(T){if(S){C.push(T);const I=y;I.inputs=Af(y.inputs),I.inputTransforms=Af(y.inputTransforms),I.declaredInputs=Af(y.declaredInputs),I.outputs=Af(y.outputs);const M=T.hostBindings;M&&uU(y,M);const A=T.viewQuery,R=T.contentQueries;if(A&&cU(y,A),R&&lU(y,R),sU(y,T),zt(y.outputs,T.outputs),Ko(T)&&T.data.animation){const N=y.data;N.animation=(N.animation||[]).concat(T.data.animation)}}const D=T.features;if(D)for(let I=0;I<D.length;I++){const M=D[I];M&&M.ngInherit&&M(y),M===jn&&(S=!1)}}_=Object.getPrototypeOf(_)}!function aU(y){let _=0,S=null;for(let C=y.length-1;C>=0;C--){const T=y[C];T.hostVars=_+=T.hostVars,T.hostAttrs=al(T.hostAttrs,S=al(S,T.hostAttrs))}}(C)}function sU(y,_){for(const C in _.inputs){if(!_.inputs.hasOwnProperty(C)||y.inputs.hasOwnProperty(C))continue;const T=_.inputs[C];if(void 0!==T&&(y.inputs[C]=T,y.declaredInputs[C]=_.declaredInputs[C],null!==_.inputTransforms)){var S;const D=Array.isArray(T)?T[0]:T;if(!_.inputTransforms.hasOwnProperty(D))continue;null!==(S=y.inputTransforms)&&void 0!==S||(y.inputTransforms={}),y.inputTransforms[D]=_.inputTransforms[D]}}}function Af(y){return y===li?{}:y===Rn?[]:y}function cU(y,_){const S=y.viewQuery;y.viewQuery=S?(C,T)=>{_(C,T),S(C,T)}:_}function lU(y,_){const S=y.contentQueries;y.contentQueries=S?(C,T,D)=>{_(C,T,D),S(C,T,D)}:_}function uU(y,_){const S=y.hostBindings;y.hostBindings=S?(C,T)=>{_(C,T),S(C,T)}:_}class ua{}class jS{}class Bm extends ua{constructor(_,S,C){super(),this._parent=S,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new aS(this);const T=Ur(_);this._bootstrapComponents=wo(T.bootstrap),this._r3Injector=rw(_,S,[{provide:ua,useValue:this},{provide:Tf,useValue:this.componentFactoryResolver},...C],Ut(_),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(_)}get injector(){return this._r3Injector}destroy(){const _=this._r3Injector;!_.destroyed&&_.destroy(),this.destroyCbs.forEach(S=>S()),this.destroyCbs=null}onDestroy(_){this.destroyCbs.push(_)}}class $m extends jS{constructor(_){super(),this.moduleType=_}create(_){return new Bm(this.moduleType,_,[])}}class BS extends ua{constructor(_){super(),this.componentFactoryResolver=new aS(this),this.instance=null;const S=new Fa([..._.providers,{provide:ua,useValue:this},{provide:Tf,useValue:this.componentFactoryResolver}],_.parent||Rd(),_.debugName,new Set(["environment"]));this.injector=S,_.runEnvironmentInitializers&&S.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(_){this.injector.onDestroy(_)}}function Rf(y,_,S=null){return new BS({providers:y,parent:_,debugName:S,runEnvironmentInitializers:!0}).injector}let Is=(()=>{var y;class _{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ir(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const C=this.taskId++;return this.pendingTasks.add(C),C}remove(C){this.pendingTasks.delete(C),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}}return(y=_).\u0275fac=function(C){return new(C||y)},y.\u0275prov=Ot({token:y,factory:y.\u0275fac,providedIn:"root"}),_})();function Nf(y){return!!function Hm(y){return null!==y&&("function"==typeof y||"object"==typeof y)}(y)&&(Array.isArray(y)||!(y instanceof Map)&&Symbol.iterator in y)}function yr(y,_,S){return!Object.is(y[_],S)&&(y[_]=S,!0)}function Ar(y,_,S,C,T,D,I,M){const A=ze(),R=wn(),N=y+un,O=R.firstCreatePass?function SU(y,_,S,C,T,D,I,M,A){const R=_.consts,N=rc(_,y,4,I||null,pi(R,M));um(_,S,N,pi(R,A)),Ld(_,N);const O=N.tView=lm(2,N,C,T,D,_.directiveRegistry,_.pipeRegistry,null,_.schemas,R,null);return null!==_.queries&&(_.queries.template(_,N),O.queries=_.queries.embeddedTView(N)),N}(N,R,A,_,S,C,T,D,I):R.data[N];gi(O,!1);const L=$S(R,A,O,y);_l()&&ff(R,A,L,O),Hr(L,A);const $=Pb(L,A,L,O);return A[N]=$,gf(A,$),function hS(y,_,S){return Nm(y,_,S)}($,O,A),kd(O)&&am(R,A,O),null!=I&&cm(A,O,M),Ar}let $S=function HS(y,_,S,C){return mi(!0),_[nn].createComment("")};function Vf(y,_){return y<<17|_<<2}function As(y){return y>>17&32767}function Zm(y){return 2|y}function ha(y){return(131068&y)>>2}function ey(y,_){return-131069&y|_<<2}function ty(y){return 1|y}function CT(y,_,S,C){const T=y[S+1],D=null===_;let I=C?As(T):ha(T),M=!1;for(;0!==I&&(!1===M||D);){const R=y[I+1];lV(y[I],_)&&(M=!0,y[I+1]=C?ty(R):Zm(R)),I=C?As(R):ha(R)}M&&(y[S+1]=C?Zm(T):ty(T))}function lV(y,_){return null===y||null==_||(Array.isArray(y)?y[1]:y)===_||!(!Array.isArray(y)||"string"!=typeof _)&&xa(y,_)>=0}function En(y,_,S){const C=ze();return yr(C,Jo(),_)&&ho(wn(),Yn(),C,y,_,C[nn],S,!1),En}function ny(y,_,S,C,T){const I=T?"class":"style";pm(y,S,_.inputs[I],I,C)}function jf(y,_){return function Yo(y,_,S,C){const T=ze(),D=wn(),I=function Qi(y){const _=rn.lFrame,S=_.bindingIndex;return _.bindingIndex=_.bindingIndex+y,S}(2);D.firstUpdatePass&&function AT(y,_,S,C){const T=y.data;if(null===T[S+1]){const D=T[$r()],I=function MT(y,_){return _>=y.expandoStartIndex}(y,S);(function OT(y,_){return!!(y.flags&(_?8:16))})(D,C)&&null===_&&!I&&(_=!1),_=function vV(y,_,S,C){const T=function pg(y){const _=rn.lFrame.currentDirectiveIndex;return-1===_?null:y[_]}(y);let D=C?_.residualClasses:_.residualStyles;if(null===T)0===(C?_.classBindings:_.styleBindings)&&(S=ru(S=ry(null,y,_,S,C),_.attrs,C),D=null);else{const I=_.directiveStylingLast;if(-1===I||y[I]!==T)if(S=ry(T,y,_,S,C),null===D){let A=function _V(y,_,S){const C=S?_.classBindings:_.styleBindings;if(0!==ha(C))return y[As(C)]}(y,_,C);void 0!==A&&Array.isArray(A)&&(A=ry(null,y,_,A[1],C),A=ru(A,_.attrs,C),function CV(y,_,S,C){y[As(S?_.classBindings:_.styleBindings)]=C}(y,_,C,A))}else D=function wV(y,_,S){let C;const T=_.directiveEnd;for(let D=1+_.directiveStylingLast;D<T;D++)C=ru(C,y[D].hostAttrs,S);return ru(C,_.attrs,S)}(y,_,C)}return void 0!==D&&(C?_.residualClasses=D:_.residualStyles=D),S}(T,D,_,C),function aV(y,_,S,C,T,D){let I=D?_.classBindings:_.styleBindings,M=As(I),A=ha(I);y[C]=S;let N,R=!1;if(Array.isArray(S)?(N=S[1],(null===N||xa(S,N)>0)&&(R=!0)):N=S,T)if(0!==A){const L=As(y[M+1]);y[C+1]=Vf(L,M),0!==L&&(y[L+1]=ey(y[L+1],C)),y[M+1]=function iV(y,_){return 131071&y|_<<17}(y[M+1],C)}else y[C+1]=Vf(M,0),0!==M&&(y[M+1]=ey(y[M+1],C)),M=C;else y[C+1]=Vf(A,0),0===M?M=C:y[A+1]=ey(y[A+1],C),A=C;R&&(y[C+1]=Zm(y[C+1])),CT(y,N,C,!0),CT(y,N,C,!1),function cV(y,_,S,C,T){const D=T?y.residualClasses:y.residualStyles;null!=D&&"string"==typeof _&&xa(D,_)>=0&&(S[C+1]=ty(S[C+1]))}(_,N,y,C,D),I=Vf(M,A),D?_.classBindings=I:_.styleBindings=I}(T,D,_,S,I,C)}}(D,y,I,C),_!==dn&&yr(T,I,_)&&function PT(y,_,S,C,T,D,I,M){if(!(3&_.type))return;const A=y.data,R=A[M+1],N=function sV(y){return!(1&~y)}(R)?NT(A,_,S,T,ha(R),I):void 0;Bf(N)||(Bf(D)||function oV(y){return!(2&~y)}(R)&&(D=NT(A,null,S,T,M,I)),function iF(y,_,S,C,T){if(_)T?y.addClass(S,C):y.removeClass(S,C);else{let D=-1===C.indexOf("-")?void 0:Ts.DashCase;null==T?y.removeStyle(S,C,D):("string"==typeof T&&T.endsWith("!important")&&(T=T.slice(0,-10),D|=Ts.Important),y.setStyle(S,C,T,D))}}(C,I,gl($r(),S),T,D))}(D,D.data[$r()],T,T[nn],y,T[I+1]=function EV(y,_){return null==y||""===y||("string"==typeof _?y+=_:"object"==typeof y&&(y=Ut(Ss(y)))),y}(_,S),C,I)}(y,_,null,!0),jf}function ry(y,_,S,C,T){let D=null;const I=S.directiveEnd;let M=S.directiveStylingLast;for(-1===M?M=S.directiveStart:M++;M<I&&(D=_[M],C=ru(C,D.hostAttrs,T),D!==y);)M++;return null!==y&&(S.directiveStylingLast=M),C}function ru(y,_,S){const C=S?1:2;let T=-1;if(null!==_)for(let D=0;D<_.length;D++){const I=_[D];"number"==typeof I?T=I:T===C&&(Array.isArray(y)||(y=void 0===y?[]:["",y]),yo(y,I,!!S||_[++D]))}return void 0===y?null:y}function NT(y,_,S,C,T,D){const I=null===_;let M;for(;T>0;){const A=y[T],R=Array.isArray(A),N=R?A[1]:A,O=null===N;let L=S[T+1];L===dn&&(L=O?Rn:void 0);let $=O?Bp(L,C):N===C?L:void 0;if(R&&!Bf($)&&($=Bp(A,C)),Bf($)&&(M=$,I))return M;const Q=y[T+1];T=I?As(Q):ha(Q)}if(null!==_){let A=D?_.residualClasses:_.residualStyles;null!=A&&(M=Bp(A,C))}return M}function Bf(y){return void 0!==y}function Dt(y,_,S,C){const T=ze(),D=wn(),I=un+y,M=T[nn],A=D.firstCreatePass?function KV(y,_,S,C,T,D){const I=_.consts,A=rc(_,y,2,C,pi(I,T));return um(_,S,A,pi(I,D)),null!==A.attrs&&Df(A,A.attrs,!1),null!==A.mergedAttrs&&Df(A,A.mergedAttrs,!0),null!==_.queries&&_.queries.elementStart(_,A),A}(I,D,T,_,S,C):D.data[I],R=LT(D,T,A,M,_,y);T[I]=R;const N=kd(A);return gi(A,!0),Cb(M,R,A),!function Zl(y){return!(32&~y.flags)}(A)&&_l()&&ff(D,T,R,A),0===function Vk(){return rn.lFrame.elementDepthCount}()&&Hr(R,T),function jk(){rn.lFrame.elementDepthCount++}(),N&&(am(D,T,A),sm(D,A,T)),null!==C&&cm(T,A),Dt}function St(){let y=Vn();dg()?fg():(y=y.parent,gi(y,!1));const _=y;(function $k(y){return rn.skipHydrationRootTNode===y})(_)&&function Wk(){rn.skipHydrationRootTNode=null}(),function Bk(){rn.lFrame.elementDepthCount--}();const S=wn();return S.firstCreatePass&&(Ld(S,y),tg(y)&&S.queries.elementEnd(y)),null!=_.classesWithoutHost&&function ax(y){return!!(8&y.flags)}(_)&&ny(S,_,ze(),_.classesWithoutHost,!0),null!=_.stylesWithoutHost&&function cx(y){return!!(16&y.flags)}(_)&&ny(S,_,ze(),_.stylesWithoutHost,!1),St}function ei(y,_,S,C){return Dt(y,_,S,C),St(),ei}let LT=(y,_,S,C,T,D)=>(mi(!0),lf(C,T,function UC(){return rn.lFrame.currentNamespace}()));function Sc(y,_,S){const C=ze(),T=wn(),D=y+un,I=T.firstCreatePass?function XV(y,_,S,C,T){const D=_.consts,I=pi(D,C),M=rc(_,y,8,"ng-container",I);return null!==I&&Df(M,I,!0),um(_,S,M,pi(D,T)),null!==_.queries&&_.queries.elementStart(_,M),M}(D,T,C,_,S):T.data[D];gi(I,!0);const M=VT(T,C,I,y);return C[D]=M,_l()&&ff(T,C,M,I),Hr(M,C),kd(I)&&(am(T,C,I),sm(T,I,C)),null!=S&&cm(C,I),Sc}function Tc(){let y=Vn();const _=wn();return dg()?fg():(y=y.parent,gi(y,!1)),_.firstCreatePass&&(Ld(_,y),tg(y)&&_.queries.elementEnd(y)),Tc}let VT=(y,_,S,C)=>(mi(!0),Zg(_[nn],""));function Ei(){return ze()}const Dc="en-US";let zT=Dc;function qn(y,_,S,C){const T=ze(),D=wn(),I=Vn();return uy(D,T,T[nn],I,y,_,C),qn}function uy(y,_,S,C,T,D,I){const M=kd(C),R=y.firstCreatePass&&function kb(y){return y.cleanup||(y.cleanup=[])}(y),N=_[Xn],O=function Ob(y){return y[Va]||(y[Va]=[])}(_);let L=!0;if(3&C.type||I){const ae=Yr(C,_),Ce=I?I(ae):ae,Ee=O.length,Ae=I?vt=>I(Hn(vt[C.index])):C.index;let ht=null;if(!I&&M&&(ht=function Yj(y,_,S,C){const T=y.cleanup;if(null!=T)for(let D=0;D<T.length-1;D+=2){const I=T[D];if(I===S&&T[D+1]===C){const M=_[Va],A=T[D+2];return M.length>A?M[A]:null}"string"==typeof I&&(D+=2)}return null}(y,_,T,C.index)),null!==ht)(ht.__ngLastListenerFn__||ht).__ngNextListenerFn__=D,ht.__ngLastListenerFn__=D,L=!1;else{D=vE(C,_,N,D,!1);const vt=S.listen(Ce,T,D);O.push(D,vt),R&&R.push(T,Ae,Ee,Ee+1)}}else D=vE(C,_,N,D,!1);const $=C.outputs;let Q;if(L&&null!==$&&(Q=$[T])){const ae=Q.length;if(ae)for(let Ce=0;Ce<ae;Ce+=2){const qt=_[Q[Ce]][Q[Ce+1]].subscribe(D),Nn=O.length;O.push(D,qt),R&&R.push(T,C.index,Nn,-(Nn+1))}}}function yE(y,_,S,C){const T=tt(null);try{return hi(6,_,S),!1!==S(C)}catch(D){return mf(y,D),!1}finally{hi(7,_,S),tt(T)}}function vE(y,_,S,C,T){return function D(I){if(I===Function)return C;Bl(y.componentOffset>-1?_o(y.index,_):_);let A=yE(_,S,C,I),R=D.__ngNextListenerFn__;for(;R;)A=yE(_,S,R,I)&&A,R=R.__ngNextListenerFn__;return T&&!1===A&&I.preventDefault(),A}}function lr(y=1){return function Yk(y){return(rn.lFrame.contextLView=function DC(y,_){for(;y>0;)_=_[ja],y--;return _}(y,rn.lFrame.contextLView))[Xn]}(y)}function Wf(y){return function Ha(y,_){return y[_]}(function Gk(){return rn.lFrame.contextLView}(),un+y)}function Lt(y,_=""){const S=ze(),C=wn(),T=y+un,D=C.firstCreatePass?rc(C,T,1,_,null):C.data[T],I=jE(C,S,D,_,y);S[T]=I,_l()&&ff(C,S,I,D),gi(D,!1)}let jE=(y,_,S,C,T)=>(mi(!0),function Yg(y,_){return y.createText(_)}(_[nn],C));function ti(y){return So("",y,""),ti}function So(y,_,S){const C=ze(),T=function pc(y,_,S,C){return yr(y,Jo(),S)?_+ln(S)+C:dn}(C,y,_,S);return T!==dn&&function Yi(y,_,S){const C=gl(_,y);!function sb(y,_,S){y.setValue(_,S)}(y[nn],C,S)}(C,$r(),T),So}function fy(y,_,S){TS(_)&&(_=_());const C=ze();return yr(C,Jo(),_)&&ho(wn(),Yn(),C,y,_,C[nn],S,!1),fy}function hy(y,_){const S=ze(),C=wn(),T=Vn();return uy(C,S,S[nn],T,y,_),hy}function py(y,_,S,C,T){if(y=Ft(y),Array.isArray(y))for(let D=0;D<y.length;D++)py(y[D],_,S,C,T);else{const D=wn(),I=ze(),M=Vn();let A=na(y)?y:Ft(y.provide);const R=uC(y),N=1048575&M.providerIndexes,O=M.directiveStart,L=M.providerIndexes>>20;if(na(y)||!y.multi){const $=new Cl(R,T,dt),Q=my(A,_,T?N:N+L,O);-1===Q?(Sg(Bd(M,I),D,A),gy(D,y,_.length),_.push(A),M.directiveStart++,M.directiveEnd++,T&&(M.providerIndexes+=1048576),S.push($),I.push($)):(S[Q]=$,I[Q]=$)}else{const $=my(A,_,N+L,O),Q=my(A,_,N,N+L),Ce=Q>=0&&S[Q];if(T&&!Ce||!T&&!($>=0&&S[$])){Sg(Bd(M,I),D,A);const Ee=function w2(y,_,S,C,T){const D=new Cl(y,S,dt);return D.multi=[],D.index=_,D.componentProviders=0,QE(D,T,C&&!S),D}(T?C2:_2,S.length,T,C,R);!T&&Ce&&(S[Q].providerFactory=Ee),gy(D,y,_.length,0),_.push(A),M.directiveStart++,M.directiveEnd++,T&&(M.providerIndexes+=1048576),S.push(Ee),I.push(Ee)}else gy(D,y,$>-1?$:Q,QE(S[T?Q:$],R,!T&&C));!T&&C&&Ce&&S[Q].componentProviders++}}}function gy(y,_,S,C){const T=na(_),D=function uk(y){return!!y.useClass}(_);if(T||D){const A=(D?Ft(_.useClass):_).prototype.ngOnDestroy;if(A){const R=y.destroyHooks||(y.destroyHooks=[]);if(!T&&_.multi){const N=R.indexOf(S);-1===N?R.push(S,[C,A]):R[N+1].push(C,A)}else R.push(S,A)}}}function QE(y,_,S){return S&&y.componentProviders++,y.multi.push(_)-1}function my(y,_,S,C){for(let T=S;T<C;T++)if(_[T]===y)return T;return-1}function _2(y,_,S,C){return yy(this.multi,[])}function C2(y,_,S,C){const T=this.multi;let D;if(this.providerFactory){const I=this.providerFactory.componentProviders,M=aa(S,S[wt],this.providerFactory.index,C);D=M.slice(0,I),yy(T,D);for(let A=I;A<M.length;A++)D.push(M[A])}else D=[],yy(T,D);return D}function yy(y,_){for(let S=0;S<y.length;S++)_.push((0,y[S])());return _}function ar(y,_=[]){return S=>{S.providersResolver=(C,T)=>function v2(y,_,S){const C=wn();if(C.firstCreatePass){const T=Ko(y);py(S,C.data,C.blueprint,T,!0),py(_,C.data,C.blueprint,T,!1)}}(C,T?T(y):y,_)}}let b2=(()=>{var y;class _{constructor(C){this._injector=C,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(C){if(!C.standalone)return null;if(!this.cachedInjectors.has(C)){const T=qp(0,C.type),D=T.length>0?Rf([T],this._injector,"Standalone[".concat(C.type.name,"]")):null;this.cachedInjectors.set(C,D)}return this.cachedInjectors.get(C)}ngOnDestroy(){try{for(const C of this.cachedInjectors.values())null!==C&&C.destroy()}finally{this.cachedInjectors.clear()}}}return(y=_).\u0275prov=Ot({token:y,providedIn:"environment",factory:()=>new y($t(Xr))}),_})();function XE(y){Ci("NgStandalone"),y.getStandaloneInjector=_=>_.get(b2).getOrCreateStandaloneInjector(y)}function Kf(y,_,S,C){return function ZE(y,_,S,C,T,D){const I=_+S;return yr(y,I,T)?function wi(y,_,S){return y[_]=S}(y,I+1,D?C.call(D,T):C(T)):function uu(y,_){const S=y[_];return S===dn?void 0:S}(y,I+1)}(ze(),function Zr(){const y=rn.lFrame;let _=y.bindingRootIndex;return-1===_&&(_=y.bindingRootIndex=y.tView.bindingStartIndex),_}(),y,_,S,C)}function Jf(y,_){return vf(y,_)}let _D=(()=>{var y;class _{log(C){console.log(C)}warn(C){console.warn(C)}}return(y=_).\u0275fac=function(C){return new(C||y)},y.\u0275prov=Ot({token:y,factory:y.\u0275fac,providedIn:"platform"}),_})();const SD=new Rt(""),Yf=new Rt("");let Dy,Ty=(()=>{var y;class _{constructor(C,T,D){this._ngZone=C,this.registry=T,this._pendingCount=0,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,Dy||(function OB(y){Dy=y}(D),D.addToWindow(T)),this._watchAngularEvents(),C.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{kn.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let C=this._callbacks.pop();clearTimeout(C.timeoutId),C.doneCb()}});else{let C=this.getPendingTasks();this._callbacks=this._callbacks.filter(T=>!T.updateCb||!T.updateCb(C)||(clearTimeout(T.timeoutId),!1))}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(C=>({source:C.source,creationLocation:C.creationLocation,data:C.data})):[]}addCallback(C,T,D){let I=-1;T&&T>0&&(I=setTimeout(()=>{this._callbacks=this._callbacks.filter(M=>M.timeoutId!==I),C()},T)),this._callbacks.push({doneCb:C,timeoutId:I,updateCb:D})}whenStable(C,T,D){if(D&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(C,T,D),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(C){this.registry.registerApplication(C,this)}unregisterApplication(C){this.registry.unregisterApplication(C)}findProviders(C,T,D){return[]}}return(y=_).\u0275fac=function(C){return new(C||y)($t(kn),$t(Ey),$t(Yf))},y.\u0275prov=Ot({token:y,factory:y.\u0275fac}),_})(),Ey=(()=>{var y;class _{constructor(){this._applications=new Map}registerApplication(C,T){this._applications.set(C,T)}unregisterApplication(C){this._applications.delete(C)}unregisterAllApplications(){this._applications.clear()}getTestability(C){return this._applications.get(C)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(C,T=!0){var D,I;return null!==(D=null===(I=Dy)||void 0===I?void 0:I.findTestabilityInTree(this,C,T))&&void 0!==D?D:null}}return(y=_).\u0275fac=function(C){return new(C||y)},y.\u0275prov=Ot({token:y,factory:y.\u0275fac,providedIn:"platform"}),_})();function gu(y){return!!y&&"function"==typeof y.then}function TD(y){return!!y&&"function"==typeof y.subscribe}const Iy=new Rt("");let My=(()=>{var y;class _{constructor(){var C;this.initialized=!1,this.done=!1,this.donePromise=new Promise((T,D)=>{this.resolve=T,this.reject=D}),this.appInits=null!==(C=at(Iy,{optional:!0}))&&void 0!==C?C:[]}runInitializers(){if(this.initialized)return;const C=[];for(const D of this.appInits){const I=D();if(gu(I))C.push(I);else if(TD(I)){const M=new Promise((A,R)=>{I.subscribe({complete:A,error:R})});C.push(M)}}const T=()=>{this.done=!0,this.resolve()};Promise.all(C).then(()=>{T()}).catch(D=>{this.reject(D)}),0===C.length&&T(),this.initialized=!0}}return(y=_).\u0275fac=function(C){return new(C||y)},y.\u0275prov=Ot({token:y,factory:y.\u0275fac,providedIn:"root"}),_})();const Ay=new Rt("");function ID(y,_){return Array.isArray(_)?_.reduce(ID,y):se(se({},y),_)}let Rs=(()=>{var y;class _{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=at(iw),this.afterRenderEffectManager=at(Gl),this.externalTestViews=new Set,this.beforeRender=new hr,this.afterTick=new hr,this.componentTypes=[],this.components=[],this.isStable=at(Is).hasPendingTasks.pipe(k(C=>!C)),this._injector=at(Xr)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(C,T){const D=C instanceof Jb;if(!this._injector.get(My).done)throw!D&&function _s(y){const _=yn(y)||Dr(y)||kr(y);return null!==_&&_.standalone}(C),new j(405,!1);let M;M=D?C:this._injector.get(Tf).resolveComponentFactory(C),this.componentTypes.push(M.componentType);const A=function kB(y){return y.isBoundToModule}(M)?void 0:this._injector.get(ua),N=M.create(eo.NULL,[],T||M.selector,A),O=N.location.nativeElement,L=N.injector.get(SD,null);return null==L||L.registerApplication(O),N.onDestroy(()=>{this.detachView(N.hostView),Zf(this.components,N),null==L||L.unregisterApplication(O)}),this._loadComponent(N),N}tick(){this._tick(!0)}_tick(C){if(this._runningTick)throw new j(101,!1);const T=tt(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(C)}catch(D){this.internalErrorHandler(D)}finally{this.afterTick.next(),this._runningTick=!1,tt(T)}}detectChangesInAttachedViews(C){let T=0;const D=this.afterRenderEffectManager;for(;;){if(T===Vb)throw new j(103,!1);if(C){const I=0===T;this.beforeRender.next(I);for(let{_lView:M,notifyErrorHandler:A}of this._views)FB(M,I,A)}if(T++,D.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:I})=>Ry(I))&&(D.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:I})=>Ry(I))))break}}attachView(C){const T=C;this._views.push(T),T.attachToAppRef(this)}detachView(C){const T=C;Zf(this._views,T),T.detachFromAppRef()}_loadComponent(C){this.attachView(C.hostView),this.tick(),this.components.push(C);const T=this._injector.get(Ay,[]);[...this._bootstrapListeners,...T].forEach(D=>D(C))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(C=>C()),this._views.slice().forEach(C=>C.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(C){return this._destroyListeners.push(C),()=>Zf(this._destroyListeners,C)}destroy(){if(this._destroyed)throw new j(406,!1);const C=this._injector;C.destroy&&!C.destroyed&&C.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return(y=_).\u0275fac=function(C){return new(C||y)},y.\u0275prov=Ot({token:y,factory:y.\u0275fac,providedIn:"root"}),_})();function Zf(y,_){const S=y.indexOf(_);S>-1&&y.splice(S,1)}function FB(y,_,S){!_&&!Ry(y)||function LB(y,_,S){let C;S?(C=0,y[Jt]|=1024):C=64&y[Jt]?0:1,yf(y,_,C)}(y,S,_)}function Ry(y){return cg(y)}class UB{constructor(_,S){this.ngModuleFactory=_,this.componentFactories=S}}let MD=(()=>{var y;class _{compileModuleSync(C){return new $m(C)}compileModuleAsync(C){return Promise.resolve(this.compileModuleSync(C))}compileModuleAndAllComponentsSync(C){const T=this.compileModuleSync(C),I=wo(Ur(C).declarations).reduce((M,A)=>{const R=yn(A);return R&&M.push(new Ql(R)),M},[]);return new UB(T,I)}compileModuleAndAllComponentsAsync(C){return Promise.resolve(this.compileModuleAndAllComponentsSync(C))}clearCache(){}clearCacheFor(C){}getModuleId(C){}}return(y=_).\u0275fac=function(C){return new(C||y)},y.\u0275prov=Ot({token:y,factory:y.\u0275fac,providedIn:"root"}),_})(),BB=(()=>{var y;class _{constructor(){this.zone=at(kn),this.applicationRef=at(Rs)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){var C;null===(C=this._onMicrotaskEmptySubscription)||void 0===C||C.unsubscribe()}}return(y=_).\u0275fac=function(C){return new(C||y)},y.\u0275prov=Ot({token:y,factory:y.\u0275fac,providedIn:"root"}),_})();function $B(){const y=at(kn),_=at(vi);return S=>y.runOutsideAngular(()=>_.handleError(S))}let zB=(()=>{var y;class _{constructor(){this.subscription=new Ze,this.initialized=!1,this.zone=at(kn),this.pendingTasks=at(Is)}initialize(){if(this.initialized)return;this.initialized=!0;let C=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(C=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{kn.assertNotInAngularZone(),queueMicrotask(()=>{null!==C&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(C),C=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{kn.assertInAngularZone(),null!=C||(C=this.pendingTasks.add())}))}ngOnDestroy(){this.subscription.unsubscribe()}}return(y=_).\u0275fac=function(C){return new(C||y)},y.\u0275prov=Ot({token:y,factory:y.\u0275fac,providedIn:"root"}),_})();const ts=new Rt("",{providedIn:"root",factory:()=>at(ts,Cn.Optional|Cn.SkipSelf)||function qB(){return typeof $localize<"u"&&$localize.locale||Dc}()}),Py=new Rt("");let ND=(()=>{var y;class _{constructor(C){this._injector=C,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(C,T){const D=function EL(y="zone.js",_){return"noop"===y?new tS:"zone.js"===y?new kn(_):y}(null==T?void 0:T.ngZone,function PD(y){var _,S;return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:null!==(_=null==y?void 0:y.eventCoalescing)&&void 0!==_&&_,shouldCoalesceRunChangeDetection:null!==(S=null==y?void 0:y.runCoalescing)&&void 0!==S&&S}}({eventCoalescing:null==T?void 0:T.ngZoneEventCoalescing,runCoalescing:null==T?void 0:T.ngZoneRunCoalescing}));return D.run(()=>{const I=function yU(y,_,S){return new Bm(y,_,S)}(C.moduleType,this.injector,function RD(y){return[{provide:kn,useFactory:y},{provide:ta,multi:!0,useFactory:()=>{const _=at(BB,{optional:!0});return()=>_.initialize()}},{provide:ta,multi:!0,useFactory:()=>{const _=at(zB);return()=>{_.initialize()}}},{provide:iw,useFactory:$B}]}(()=>D)),M=I.injector.get(vi,null);return D.runOutsideAngular(()=>{const A=D.onError.subscribe({next:R=>{M.handleError(R)}});I.onDestroy(()=>{Zf(this._modules,I),A.unsubscribe()})}),function DD(y,_,S){try{const C=S();return gu(C)?C.catch(T=>{throw _.runOutsideAngular(()=>y.handleError(T)),T}):C}catch(C){throw _.runOutsideAngular(()=>y.handleError(C)),C}}(M,D,()=>{const A=I.injector.get(My);return A.runInitializers(),A.donePromise.then(()=>(function qT(y){"string"==typeof y&&(zT=y.toLowerCase().replace(/_/g,"-"))}(I.injector.get(ts,Dc)||Dc),this._moduleDoBootstrap(I),I))})})}bootstrapModule(C,T=[]){const D=ID({},T);return function jB(y,_,S){const C=new $m(S);return Promise.resolve(C)}(0,0,C).then(I=>this.bootstrapModuleFactory(I,D))}_moduleDoBootstrap(C){const T=C.injector.get(Rs);if(C._bootstrapComponents.length>0)C._bootstrapComponents.forEach(D=>T.bootstrap(D));else{if(!C.instance.ngDoBootstrap)throw new j(-403,!1);C.instance.ngDoBootstrap(T)}this._modules.push(C)}onDestroy(C){this._destroyListeners.push(C)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new j(404,!1);this._modules.slice().forEach(T=>T.destroy()),this._destroyListeners.forEach(T=>T());const C=this._injector.get(Py,null);C&&(C.forEach(T=>T()),C.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return(y=_).\u0275fac=function(C){return new(C||y)($t(eo))},y.\u0275prov=Ot({token:y,factory:y.\u0275fac,providedIn:"platform"}),_})(),Ps=null;const OD=new Rt("");function kD(y,_,S=[]){const C="Platform: ".concat(_),T=new Rt(C);return(D=[])=>{let I=Ny();if(!I||I.injector.get(OD,!1)){const M=[...S,...D,{provide:T,useValue:!0}];y?y(M):function KB(y){if(Ps&&!Ps.get(OD,!1))throw new j(400,!1);(function ED(){!function ie(y){K=y}(()=>{throw new j(600,!1)})})(),Ps=y;const _=y.get(ND);(function FD(y){const _=y.get(Iw,null);null==_||_.forEach(S=>S())})(y)}(function xD(y=[],_){return eo.create({name:_,providers:[{provide:Kp,useValue:"platform"},{provide:Py,useValue:new Set([()=>Ps=null])},...y]})}(M,C))}return function JB(y){const _=Ny();if(!_)throw new j(401,!1);return _}()}}function Ny(){var y,_;return null!==(y=null===(_=Ps)||void 0===_?void 0:_.get(ND))&&void 0!==y?y:null}let mu=(()=>{class _{}return _.__NG_ELEMENT_ID__=XB,_})();function XB(y){return function YB(y,_,S){if(oa(y)&&!S){const C=_o(y.index,_);return new $l(C,C)}return 47&y.type?new $l(_[cr],_):null}(Vn(),ze(),!(16&~y))}class BD{constructor(){}supports(_){return Nf(_)}create(_){return new r$(_)}}const n$=(y,_)=>_;class r${constructor(_){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=_||n$}forEachItem(_){let S;for(S=this._itHead;null!==S;S=S._next)_(S)}forEachOperation(_){let S=this._itHead,C=this._removalsHead,T=0,D=null;for(;S||C;){const I=!C||S&&S.currentIndex<HD(C,T,D)?S:C,M=HD(I,T,D),A=I.currentIndex;if(I===C)T--,C=C._nextRemoved;else if(S=S._next,null==I.previousIndex)T++;else{D||(D=[]);const R=M-T,N=A-T;if(R!=N){for(let L=0;L<R;L++){const $=L<D.length?D[L]:D[L]=0,Q=$+L;N<=Q&&Q<R&&(D[L]=$+1)}D[I.previousIndex]=N-R}}M!==A&&_(I,M,A)}}forEachPreviousItem(_){let S;for(S=this._previousItHead;null!==S;S=S._nextPrevious)_(S)}forEachAddedItem(_){let S;for(S=this._additionsHead;null!==S;S=S._nextAdded)_(S)}forEachMovedItem(_){let S;for(S=this._movesHead;null!==S;S=S._nextMoved)_(S)}forEachRemovedItem(_){let S;for(S=this._removalsHead;null!==S;S=S._nextRemoved)_(S)}forEachIdentityChange(_){let S;for(S=this._identityChangesHead;null!==S;S=S._nextIdentityChange)_(S)}diff(_){if(null==_&&(_=[]),!Nf(_))throw new j(900,!1);return this.check(_)?this:null}onDestroy(){}check(_){this._reset();let T,D,I,S=this._itHead,C=!1;if(Array.isArray(_)){this.length=_.length;for(let M=0;M<this.length;M++)D=_[M],I=this._trackByFn(M,D),null!==S&&Object.is(S.trackById,I)?(C&&(S=this._verifyReinsertion(S,D,I,M)),Object.is(S.item,D)||this._addIdentityChange(S,D)):(S=this._mismatch(S,D,I,M),C=!0),S=S._next}else T=0,function wU(y,_){if(Array.isArray(y))for(let S=0;S<y.length;S++)_(y[S]);else{const S=y[Symbol.iterator]();let C;for(;!(C=S.next()).done;)_(C.value)}}(_,M=>{I=this._trackByFn(T,M),null!==S&&Object.is(S.trackById,I)?(C&&(S=this._verifyReinsertion(S,M,I,T)),Object.is(S.item,M)||this._addIdentityChange(S,M)):(S=this._mismatch(S,M,I,T),C=!0),S=S._next,T++}),this.length=T;return this._truncate(S),this.collection=_,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let _;for(_=this._previousItHead=this._itHead;null!==_;_=_._next)_._nextPrevious=_._next;for(_=this._additionsHead;null!==_;_=_._nextAdded)_.previousIndex=_.currentIndex;for(this._additionsHead=this._additionsTail=null,_=this._movesHead;null!==_;_=_._nextMoved)_.previousIndex=_.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(_,S,C,T){let D;return null===_?D=this._itTail:(D=_._prev,this._remove(_)),null!==(_=null===this._unlinkedRecords?null:this._unlinkedRecords.get(C,null))?(Object.is(_.item,S)||this._addIdentityChange(_,S),this._reinsertAfter(_,D,T)):null!==(_=null===this._linkedRecords?null:this._linkedRecords.get(C,T))?(Object.is(_.item,S)||this._addIdentityChange(_,S),this._moveAfter(_,D,T)):_=this._addAfter(new o$(S,C),D,T),_}_verifyReinsertion(_,S,C,T){let D=null===this._unlinkedRecords?null:this._unlinkedRecords.get(C,null);return null!==D?_=this._reinsertAfter(D,_._prev,T):_.currentIndex!=T&&(_.currentIndex=T,this._addToMoves(_,T)),_}_truncate(_){for(;null!==_;){const S=_._next;this._addToRemovals(this._unlink(_)),_=S}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(_,S,C){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(_);const T=_._prevRemoved,D=_._nextRemoved;return null===T?this._removalsHead=D:T._nextRemoved=D,null===D?this._removalsTail=T:D._prevRemoved=T,this._insertAfter(_,S,C),this._addToMoves(_,C),_}_moveAfter(_,S,C){return this._unlink(_),this._insertAfter(_,S,C),this._addToMoves(_,C),_}_addAfter(_,S,C){return this._insertAfter(_,S,C),this._additionsTail=null===this._additionsTail?this._additionsHead=_:this._additionsTail._nextAdded=_,_}_insertAfter(_,S,C){const T=null===S?this._itHead:S._next;return _._next=T,_._prev=S,null===T?this._itTail=_:T._prev=_,null===S?this._itHead=_:S._next=_,null===this._linkedRecords&&(this._linkedRecords=new $D),this._linkedRecords.put(_),_.currentIndex=C,_}_remove(_){return this._addToRemovals(this._unlink(_))}_unlink(_){null!==this._linkedRecords&&this._linkedRecords.remove(_);const S=_._prev,C=_._next;return null===S?this._itHead=C:S._next=C,null===C?this._itTail=S:C._prev=S,_}_addToMoves(_,S){return _.previousIndex===S||(this._movesTail=null===this._movesTail?this._movesHead=_:this._movesTail._nextMoved=_),_}_addToRemovals(_){return null===this._unlinkedRecords&&(this._unlinkedRecords=new $D),this._unlinkedRecords.put(_),_.currentIndex=null,_._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=_,_._prevRemoved=null):(_._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=_),_}_addIdentityChange(_,S){return _.item=S,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=_:this._identityChangesTail._nextIdentityChange=_,_}}class o${constructor(_,S){this.item=_,this.trackById=S,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class i${constructor(){this._head=null,this._tail=null}add(_){null===this._head?(this._head=this._tail=_,_._nextDup=null,_._prevDup=null):(this._tail._nextDup=_,_._prevDup=this._tail,_._nextDup=null,this._tail=_)}get(_,S){let C;for(C=this._head;null!==C;C=C._nextDup)if((null===S||S<=C.currentIndex)&&Object.is(C.trackById,_))return C;return null}remove(_){const S=_._prevDup,C=_._nextDup;return null===S?this._head=C:S._nextDup=C,null===C?this._tail=S:C._prevDup=S,null===this._head}}class $D{constructor(){this.map=new Map}put(_){const S=_.trackById;let C=this.map.get(S);C||(C=new i$,this.map.set(S,C)),C.add(_)}get(_,S){const T=this.map.get(_);return T?T.get(_,S):null}remove(_){const S=_.trackById;return this.map.get(S).remove(_)&&this.map.delete(S),_}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function HD(y,_,S){const C=y.previousIndex;if(null===C)return C;let T=0;return S&&C<S.length&&(T=S[C]),C+_+T}function qD(){return new Ly([new BD])}let Ly=(()=>{var y;class _{constructor(C){this.factories=C}static create(C,T){if(null!=T){const D=T.factories.slice();C=C.concat(D)}return new _(C)}static extend(C){return{provide:_,useFactory:T=>_.create(C,T||qD()),deps:[[_,new bd,new wd]]}}find(C){const T=this.factories.find(D=>D.supports(C));if(null!=T)return T;throw new j(901,!1)}}return(y=_).\u0275prov=Ot({token:y,providedIn:"root",factory:qD}),_})();const u$=kD(null,"core",[]);let d$=(()=>{var y;class _{constructor(C){}}return(y=_).\u0275fac=function(C){return new(C||y)($t(Rs))},y.\u0275mod=qo({type:y}),y.\u0275inj=Po({}),_})();let _u=null;function Ns(){return _u}class K${}const go=new Rt("");let jy=(()=>{var y;class _{historyGo(C){throw new Error("")}}return(y=_).\u0275fac=function(C){return new(C||y)},y.\u0275prov=Ot({token:y,factory:()=>at(Q$),providedIn:"platform"}),_})();const J$=new Rt("");let Q$=(()=>{var y;class _ extends jy{constructor(){super(),this._doc=at(go),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ns().getBaseHref(this._doc)}onPopState(C){const T=Ns().getGlobalEventTarget(this._doc,"window");return T.addEventListener("popstate",C,!1),()=>T.removeEventListener("popstate",C)}onHashChange(C){const T=Ns().getGlobalEventTarget(this._doc,"window");return T.addEventListener("hashchange",C,!1),()=>T.removeEventListener("hashchange",C)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(C){this._location.pathname=C}pushState(C,T,D){this._history.pushState(C,T,D)}replaceState(C,T,D){this._history.replaceState(C,T,D)}forward(){this._history.forward()}back(){this._history.back()}historyGo(C=0){this._history.go(C)}getState(){return this._history.state}}return(y=_).\u0275fac=function(C){return new(C||y)},y.\u0275prov=Ot({token:y,factory:()=>new y,providedIn:"platform"}),_})();function By(y,_){if(0==y.length)return _;if(0==_.length)return y;let S=0;return y.endsWith("/")&&S++,_.startsWith("/")&&S++,2==S?y+_.substring(1):1==S?y+_:y+"/"+_}function gI(y){const _=y.match(/#|\?|$/),S=_&&_.index||y.length;return y.slice(0,S-("/"===y[S-1]?1:0))+y.slice(S)}function ns(y){return y&&"?"!==y[0]?"?"+y:y}let ya=(()=>{var y;class _{historyGo(C){throw new Error("")}}return(y=_).\u0275fac=function(C){return new(C||y)},y.\u0275prov=Ot({token:y,factory:()=>at(yI),providedIn:"root"}),_})();const mI=new Rt("");let yI=(()=>{var y;class _ extends ya{constructor(C,T){var D,I,M;super(),this._platformLocation=C,this._removeListenerFns=[],this._baseHref=null!==(D=null!==(I=null!=T?T:this._platformLocation.getBaseHrefFromDOM())&&void 0!==I?I:null===(M=at(go).location)||void 0===M?void 0:M.origin)&&void 0!==D?D:""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(C){this._removeListenerFns.push(this._platformLocation.onPopState(C),this._platformLocation.onHashChange(C))}getBaseHref(){return this._baseHref}prepareExternalUrl(C){return By(this._baseHref,C)}path(C=!1){const T=this._platformLocation.pathname+ns(this._platformLocation.search),D=this._platformLocation.hash;return D&&C?"".concat(T).concat(D):T}pushState(C,T,D,I){const M=this.prepareExternalUrl(D+ns(I));this._platformLocation.pushState(C,T,M)}replaceState(C,T,D,I){const M=this.prepareExternalUrl(D+ns(I));this._platformLocation.replaceState(C,T,M)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(C=0){var T,D;null===(T=(D=this._platformLocation).historyGo)||void 0===T||T.call(D,C)}}return(y=_).\u0275fac=function(C){return new(C||y)($t(jy),$t(mI,8))},y.\u0275prov=Ot({token:y,factory:y.\u0275fac,providedIn:"root"}),_})(),X$=(()=>{var y;class _ extends ya{constructor(C,T){super(),this._platformLocation=C,this._baseHref="",this._removeListenerFns=[],null!=T&&(this._baseHref=T)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(C){this._removeListenerFns.push(this._platformLocation.onPopState(C),this._platformLocation.onHashChange(C))}getBaseHref(){return this._baseHref}path(C=!1){var T;const D=null!==(T=this._platformLocation.hash)&&void 0!==T?T:"#";return D.length>0?D.substring(1):D}prepareExternalUrl(C){const T=By(this._baseHref,C);return T.length>0?"#"+T:T}pushState(C,T,D,I){let M=this.prepareExternalUrl(D+ns(I));0==M.length&&(M=this._platformLocation.pathname),this._platformLocation.pushState(C,T,M)}replaceState(C,T,D,I){let M=this.prepareExternalUrl(D+ns(I));0==M.length&&(M=this._platformLocation.pathname),this._platformLocation.replaceState(C,T,M)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(C=0){var T,D;null===(T=(D=this._platformLocation).historyGo)||void 0===T||T.call(D,C)}}return(y=_).\u0275fac=function(C){return new(C||y)($t(jy),$t(mI,8))},y.\u0275prov=Ot({token:y,factory:y.\u0275fac}),_})(),Cu=(()=>{var y;class _{constructor(C){this._subject=new zn,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=C;const T=this._locationStrategy.getBaseHref();this._basePath=function eH(y){if(new RegExp("^(https?:)?//").test(y)){const[,S]=y.split(/\/\/[^\/]+/);return S}return y}(gI(vI(T))),this._locationStrategy.onPopState(D=>{this._subject.emit({url:this.path(!0),pop:!0,state:D.state,type:D.type})})}ngOnDestroy(){var C;null===(C=this._urlChangeSubscription)||void 0===C||C.unsubscribe(),this._urlChangeListeners=[]}path(C=!1){return this.normalize(this._locationStrategy.path(C))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(C,T=""){return this.path()==this.normalize(C+ns(T))}normalize(C){return _.stripTrailingSlash(function Z$(y,_){if(!y||!_.startsWith(y))return _;const S=_.substring(y.length);return""===S||["/",";","?","#"].includes(S[0])?S:_}(this._basePath,vI(C)))}prepareExternalUrl(C){return C&&"/"!==C[0]&&(C="/"+C),this._locationStrategy.prepareExternalUrl(C)}go(C,T="",D=null){this._locationStrategy.pushState(D,"",C,T),this._notifyUrlChangeListeners(this.prepareExternalUrl(C+ns(T)),D)}replaceState(C,T="",D=null){this._locationStrategy.replaceState(D,"",C,T),this._notifyUrlChangeListeners(this.prepareExternalUrl(C+ns(T)),D)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(C=0){var T,D;null===(T=(D=this._locationStrategy).historyGo)||void 0===T||T.call(D,C)}onUrlChange(C){var T;return this._urlChangeListeners.push(C),null!==(T=this._urlChangeSubscription)&&void 0!==T||(this._urlChangeSubscription=this.subscribe(D=>{this._notifyUrlChangeListeners(D.url,D.state)})),()=>{const D=this._urlChangeListeners.indexOf(C);var I;this._urlChangeListeners.splice(D,1),0===this._urlChangeListeners.length&&(null===(I=this._urlChangeSubscription)||void 0===I||I.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(C="",T){this._urlChangeListeners.forEach(D=>D(C,T))}subscribe(C,T,D){return this._subject.subscribe({next:C,error:T,complete:D})}}return(y=_).normalizeQueryParams=ns,y.joinWithSlash=By,y.stripTrailingSlash=gI,y.\u0275fac=function(C){return new(C||y)($t(ya))},y.\u0275prov=Ot({token:y,factory:()=>function Y$(){return new Cu($t(ya))}(),providedIn:"root"}),_})();function vI(y){return y.replace(/\/index.html$/,"")}function II(y,_){_=encodeURIComponent(_);for(const S of y.split(";")){const C=S.indexOf("="),[T,D]=-1==C?[S,""]:[S.slice(0,C),S.slice(C+1)];if(T.trim()===_)return decodeURIComponent(D)}return null}const Xy=/\s+/,MI=[];let Nc=(()=>{var y;class _{constructor(C,T){this._ngEl=C,this._renderer=T,this.initialClasses=MI,this.stateMap=new Map}set klass(C){this.initialClasses=null!=C?C.trim().split(Xy):MI}set ngClass(C){this.rawClass="string"==typeof C?C.trim().split(Xy):C}ngDoCheck(){for(const T of this.initialClasses)this._updateState(T,!0);const C=this.rawClass;if(Array.isArray(C)||C instanceof Set)for(const T of C)this._updateState(T,!0);else if(null!=C)for(const T of Object.keys(C))this._updateState(T,!!C[T]);this._applyStateDiff()}_updateState(C,T){const D=this.stateMap.get(C);void 0!==D?(D.enabled!==T&&(D.changed=!0,D.enabled=T),D.touched=!0):this.stateMap.set(C,{enabled:T,changed:!0,touched:!0})}_applyStateDiff(){for(const C of this.stateMap){const T=C[0],D=C[1];D.changed?(this._toggleClass(T,D.enabled),D.changed=!1):D.touched||(D.enabled&&this._toggleClass(T,!1),this.stateMap.delete(T)),D.touched=!1}}_toggleClass(C,T){(C=C.trim()).length>0&&C.split(Xy).forEach(D=>{T?this._renderer.addClass(this._ngEl.nativeElement,D):this._renderer.removeClass(this._ngEl.nativeElement,D)})}}return(y=_).\u0275fac=function(C){return new(C||y)(dt(Co),dt(es))},y.\u0275dir=an({type:y,selectors:[["","ngClass",""]],inputs:{klass:[rr.None,"class","klass"],ngClass:"ngClass"},standalone:!0}),_})();class VH{constructor(_,S,C,T){this.$implicit=_,this.ngForOf=S,this.index=C,this.count=T}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let vh=(()=>{var y;class _{set ngForOf(C){this._ngForOf=C,this._ngForOfDirty=!0}set ngForTrackBy(C){this._trackByFn=C}get ngForTrackBy(){return this._trackByFn}constructor(C,T,D){this._viewContainer=C,this._template=T,this._differs=D,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(C){C&&(this._template=C)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const C=this._ngForOf;!this._differ&&C&&(this._differ=this._differs.find(C).create(this.ngForTrackBy))}if(this._differ){const C=this._differ.diff(this._ngForOf);C&&this._applyChanges(C)}}_applyChanges(C){const T=this._viewContainer;C.forEachOperation((D,I,M)=>{if(null==D.previousIndex)T.createEmbeddedView(this._template,new VH(D.item,this._ngForOf,-1,-1),null===M?void 0:M);else if(null==M)T.remove(null===I?void 0:I);else if(null!==I){const A=T.get(I);T.move(A,M),RI(A,D)}});for(let D=0,I=T.length;D<I;D++){const A=T.get(D).context;A.index=D,A.count=I,A.ngForOf=this._ngForOf}C.forEachIdentityChange(D=>{RI(T.get(D.currentIndex),D)})}static ngTemplateContextGuard(C,T){return!0}}return(y=_).\u0275fac=function(C){return new(C||y)(dt(Xo),dt(Zi),dt(Ly))},y.\u0275dir=an({type:y,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),_})();function RI(y,_){y.context.$implicit=_.item}let Os=(()=>{var y;class _{constructor(C,T){this._viewContainer=C,this._context=new jH,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=T}set ngIf(C){this._context.$implicit=this._context.ngIf=C,this._updateView()}set ngIfThen(C){PI("ngIfThen",C),this._thenTemplateRef=C,this._thenViewRef=null,this._updateView()}set ngIfElse(C){PI("ngIfElse",C),this._elseTemplateRef=C,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(C,T){return!0}}return(y=_).\u0275fac=function(C){return new(C||y)(dt(Xo),dt(Zi))},y.\u0275dir=an({type:y,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),_})();class jH{constructor(){this.$implicit=null,this.ngIf=null}}function PI(y,_){if(_&&!_.createEmbeddedView)throw new Error("".concat(y," must be a TemplateRef, but received '").concat(Ut(_),"'."))}let f3=(()=>{var y;class _{}return(y=_).\u0275fac=function(C){return new(C||y)},y.\u0275mod=qo({type:y}),y.\u0275inj=Po({}),_})();const kI="browser";function xI(y){return"server"===y}let y3=(()=>{var y;class _{}return(y=_).\u0275prov=Ot({token:y,providedIn:"root",factory:()=>function m3(y){return y===kI}(at(bs))?new v3(at(go),window):new C3}),_})();class v3{constructor(_,S){this.document=_,this.window=S,this.offset=()=>[0,0]}setOffset(_){this.offset=Array.isArray(_)?()=>_:_}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(_){this.window.scrollTo(_[0],_[1])}scrollToAnchor(_){const S=function _3(y,_){const S=y.getElementById(_)||y.getElementsByName(_)[0];if(S)return S;if("function"==typeof y.createTreeWalker&&y.body&&"function"==typeof y.body.attachShadow){const C=y.createTreeWalker(y.body,NodeFilter.SHOW_ELEMENT);let T=C.currentNode;for(;T;){const D=T.shadowRoot;if(D){const I=D.getElementById(_)||D.querySelector('[name="'.concat(_,'"]'));if(I)return I}T=C.nextNode()}}return null}(this.document,_);S&&(this.scrollToElement(S),S.focus())}setHistoryScrollRestoration(_){this.window.history.scrollRestoration=_}scrollToElement(_){const S=_.getBoundingClientRect(),C=S.left+this.window.pageXOffset,T=S.top+this.window.pageYOffset,D=this.offset();this.window.scrollTo(C-D[0],T-D[1])}}class C3{setOffset(_){}getScrollPosition(){return[0,0]}scrollToPosition(_){}scrollToAnchor(_){}setHistoryScrollRestoration(_){}}class FI{}class K3 extends K${constructor(){super(...arguments),this.supportsDOMEvents=!0}}class rv extends K3{static makeCurrent(){!function G$(y){null!=_u||(_u=y)}(new rv)}onAndCancel(_,S,C){return _.addEventListener(S,C),()=>{_.removeEventListener(S,C)}}dispatchEvent(_,S){_.dispatchEvent(S)}remove(_){_.parentNode&&_.parentNode.removeChild(_)}createElement(_,S){return(S=S||this.getDefaultDocument()).createElement(_)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(_){return _.nodeType===Node.ELEMENT_NODE}isShadowRoot(_){return _ instanceof DocumentFragment}getGlobalEventTarget(_,S){return"window"===S?window:"document"===S?_:"body"===S?_.body:null}getBaseHref(_){const S=function J3(){return Eu=Eu||document.querySelector("base"),Eu?Eu.getAttribute("href"):null}();return null==S?null:function Q3(y){return new URL(y,document.baseURI).pathname}(S)}resetBaseElement(){Eu=null}getUserAgent(){return window.navigator.userAgent}getCookie(_){return II(document.cookie,_)}}let Eu=null,Y3=(()=>{var y;class _{build(){return new XMLHttpRequest}}return(y=_).\u0275fac=function(C){return new(C||y)},y.\u0275prov=Ot({token:y,factory:y.\u0275fac}),_})();const ov=new Rt("");let qI=(()=>{var y;class _{constructor(C,T){this._zone=T,this._eventNameToPlugin=new Map,C.forEach(D=>{D.manager=this}),this._plugins=C.slice().reverse()}addEventListener(C,T,D){return this._findPluginFor(T).addEventListener(C,T,D)}getZone(){return this._zone}_findPluginFor(C){let T=this._eventNameToPlugin.get(C);if(T)return T;if(T=this._plugins.find(I=>I.supports(C)),!T)throw new j(5101,!1);return this._eventNameToPlugin.set(C,T),T}}return(y=_).\u0275fac=function(C){return new(C||y)($t(ov),$t(kn))},y.\u0275prov=Ot({token:y,factory:y.\u0275fac}),_})();class WI{constructor(_){this._doc=_}}const iv="ng-app-id";let GI=(()=>{var y;class _{constructor(C,T,D,I={}){this.doc=C,this.appId=T,this.nonce=D,this.platformId=I,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=xI(I),this.resetHostNodes()}addStyles(C){for(const T of C)1===this.changeUsageCount(T,1)&&this.onStyleAdded(T)}removeStyles(C){for(const T of C)this.changeUsageCount(T,-1)<=0&&this.onStyleRemoved(T)}ngOnDestroy(){const C=this.styleNodesInDOM;C&&(C.forEach(T=>T.remove()),C.clear());for(const T of this.getAllStyles())this.onStyleRemoved(T);this.resetHostNodes()}addHost(C){this.hostNodes.add(C);for(const T of this.getAllStyles())this.addStyleToHost(C,T)}removeHost(C){this.hostNodes.delete(C)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(C){for(const T of this.hostNodes)this.addStyleToHost(T,C)}onStyleRemoved(C){var T;const D=this.styleRef;null===(T=D.get(C))||void 0===T||null===(T=T.elements)||void 0===T||T.forEach(I=>I.remove()),D.delete(C)}collectServerRenderedStyles(){var C;const T=null===(C=this.doc.head)||void 0===C?void 0:C.querySelectorAll("style[".concat(iv,'="').concat(this.appId,'"]'));if(null!=T&&T.length){const D=new Map;return T.forEach(I=>{null!=I.textContent&&D.set(I.textContent,I)}),D}return null}changeUsageCount(C,T){const D=this.styleRef;if(D.has(C)){const I=D.get(C);return I.usage+=T,I.usage}return D.set(C,{usage:T,elements:[]}),T}getStyleElement(C,T){const D=this.styleNodesInDOM,I=null==D?void 0:D.get(T);if((null==I?void 0:I.parentNode)===C)return D.delete(T),I.removeAttribute(iv),I;{const M=this.doc.createElement("style");return this.nonce&&M.setAttribute("nonce",this.nonce),M.textContent=T,this.platformIsServer&&M.setAttribute(iv,this.appId),C.appendChild(M),M}}addStyleToHost(C,T){var D;const I=this.getStyleElement(C,T),M=this.styleRef,A=null===(D=M.get(T))||void 0===D?void 0:D.elements;A?A.push(I):M.set(T,{elements:[I],usage:1})}resetHostNodes(){const C=this.hostNodes;C.clear(),C.add(this.doc.head)}}return(y=_).\u0275fac=function(C){return new(C||y)($t(go),$t(Kd),$t(Aw,8),$t(bs))},y.\u0275prov=Ot({token:y,factory:y.\u0275fac}),_})();const sv={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},av=/%COMP%/g,Z3="_nghost-".concat("%COMP%"),e4="_ngcontent-".concat("%COMP%"),n4=new Rt("",{providedIn:"root",factory:()=>!0});function JI(y,_){return _.map(S=>S.replace(av,y))}let cv=(()=>{var y;class _{constructor(C,T,D,I,M,A,R,N=null){this.eventManager=C,this.sharedStylesHost=T,this.appId=D,this.removeStylesOnCompDestroy=I,this.doc=M,this.platformId=A,this.ngZone=R,this.nonce=N,this.rendererByCompId=new Map,this.platformIsServer=xI(A),this.defaultRenderer=new lv(C,M,R,this.platformIsServer)}createRenderer(C,T){if(!C||!T)return this.defaultRenderer;this.platformIsServer&&T.encapsulation===Ho.ShadowDom&&(T=se(se({},T),{},{encapsulation:Ho.Emulated}));const D=this.getOrCreateRenderer(C,T);return D instanceof XI?D.applyToHost(C):D instanceof uv&&D.applyStyles(),D}getOrCreateRenderer(C,T){const D=this.rendererByCompId;let I=D.get(T.id);if(!I){const M=this.doc,A=this.ngZone,R=this.eventManager,N=this.sharedStylesHost,O=this.removeStylesOnCompDestroy,L=this.platformIsServer;switch(T.encapsulation){case Ho.Emulated:I=new XI(R,N,T,this.appId,O,M,A,L);break;case Ho.ShadowDom:return new s4(R,N,C,T,M,A,this.nonce,L);default:I=new uv(R,N,T,O,M,A,L)}D.set(T.id,I)}return I}ngOnDestroy(){this.rendererByCompId.clear()}}return(y=_).\u0275fac=function(C){return new(C||y)($t(qI),$t(GI),$t(Kd),$t(n4),$t(go),$t(bs),$t(kn),$t(Aw))},y.\u0275prov=Ot({token:y,factory:y.\u0275fac}),_})();class lv{constructor(_,S,C,T){this.eventManager=_,this.doc=S,this.ngZone=C,this.platformIsServer=T,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(_,S){return S?this.doc.createElementNS(sv[S]||S,_):this.doc.createElement(_)}createComment(_){return this.doc.createComment(_)}createText(_){return this.doc.createTextNode(_)}appendChild(_,S){(QI(_)?_.content:_).appendChild(S)}insertBefore(_,S,C){_&&(QI(_)?_.content:_).insertBefore(S,C)}removeChild(_,S){_&&_.removeChild(S)}selectRootElement(_,S){let C="string"==typeof _?this.doc.querySelector(_):_;if(!C)throw new j(-5104,!1);return S||(C.textContent=""),C}parentNode(_){return _.parentNode}nextSibling(_){return _.nextSibling}setAttribute(_,S,C,T){if(T){S=T+":"+S;const D=sv[T];D?_.setAttributeNS(D,S,C):_.setAttribute(S,C)}else _.setAttribute(S,C)}removeAttribute(_,S,C){if(C){const T=sv[C];T?_.removeAttributeNS(T,S):_.removeAttribute("".concat(C,":").concat(S))}else _.removeAttribute(S)}addClass(_,S){_.classList.add(S)}removeClass(_,S){_.classList.remove(S)}setStyle(_,S,C,T){T&(Ts.DashCase|Ts.Important)?_.style.setProperty(S,C,T&Ts.Important?"important":""):_.style[S]=C}removeStyle(_,S,C){C&Ts.DashCase?_.style.removeProperty(S):_.style[S]=""}setProperty(_,S,C){null!=_&&(_[S]=C)}setValue(_,S){_.nodeValue=S}listen(_,S,C){if("string"==typeof _&&!(_=Ns().getGlobalEventTarget(this.doc,_)))throw new Error("Unsupported event target ".concat(_," for event ").concat(S));return this.eventManager.addEventListener(_,S,this.decoratePreventDefault(C))}decoratePreventDefault(_){return S=>{if("__ngUnwrap__"===S)return _;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>_(S)):_(S))&&S.preventDefault()}}}function QI(y){return"TEMPLATE"===y.tagName&&void 0!==y.content}class s4 extends lv{constructor(_,S,C,T,D,I,M,A){super(_,D,I,A),this.sharedStylesHost=S,this.hostEl=C,this.shadowRoot=C.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const R=JI(T.id,T.styles);for(const N of R){const O=document.createElement("style");M&&O.setAttribute("nonce",M),O.textContent=N,this.shadowRoot.appendChild(O)}}nodeOrShadowRoot(_){return _===this.hostEl?this.shadowRoot:_}appendChild(_,S){return super.appendChild(this.nodeOrShadowRoot(_),S)}insertBefore(_,S,C){return super.insertBefore(this.nodeOrShadowRoot(_),S,C)}removeChild(_,S){return super.removeChild(this.nodeOrShadowRoot(_),S)}parentNode(_){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(_)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class uv extends lv{constructor(_,S,C,T,D,I,M,A){super(_,D,I,M),this.sharedStylesHost=S,this.removeStylesOnCompDestroy=T,this.styles=A?JI(A,C.styles):C.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class XI extends uv{constructor(_,S,C,T,D,I,M,A){const R=T+"-"+C.id;super(_,S,C,D,I,M,A,R),this.contentAttr=function r4(y){return e4.replace(av,y)}(R),this.hostAttr=function o4(y){return Z3.replace(av,y)}(R)}applyToHost(_){this.applyStyles(),this.setAttribute(_,this.hostAttr,"")}createElement(_,S){const C=super.createElement(_,S);return super.setAttribute(C,this.contentAttr,""),C}}let a4=(()=>{var y;class _ extends WI{constructor(C){super(C)}supports(C){return!0}addEventListener(C,T,D){return C.addEventListener(T,D,!1),()=>this.removeEventListener(C,T,D)}removeEventListener(C,T,D){return C.removeEventListener(T,D)}}return(y=_).\u0275fac=function(C){return new(C||y)($t(go))},y.\u0275prov=Ot({token:y,factory:y.\u0275fac}),_})();const YI=["alt","control","meta","shift"],c4={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},l4={alt:y=>y.altKey,control:y=>y.ctrlKey,meta:y=>y.metaKey,shift:y=>y.shiftKey};let u4=(()=>{var y;class _ extends WI{constructor(C){super(C)}supports(C){return null!=_.parseEventName(C)}addEventListener(C,T,D){const I=_.parseEventName(T),M=_.eventCallback(I.fullKey,D,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ns().onAndCancel(C,I.domEventName,M))}static parseEventName(C){const T=C.toLowerCase().split("."),D=T.shift();if(0===T.length||"keydown"!==D&&"keyup"!==D)return null;const I=_._normalizeKey(T.pop());let M="",A=T.indexOf("code");if(A>-1&&(T.splice(A,1),M="code."),YI.forEach(N=>{const O=T.indexOf(N);O>-1&&(T.splice(O,1),M+=N+".")}),M+=I,0!=T.length||0===I.length)return null;const R={};return R.domEventName=D,R.fullKey=M,R}static matchEventFullKeyCode(C,T){let D=c4[C.key]||C.key,I="";return T.indexOf("code.")>-1&&(D=C.code,I="code."),!(null==D||!D)&&(D=D.toLowerCase()," "===D?D="space":"."===D&&(D="dot"),YI.forEach(M=>{M!==D&&(0,l4[M])(C)&&(I+=M+".")}),I+=D,I===T)}static eventCallback(C,T,D){return I=>{_.matchEventFullKeyCode(I,C)&&D.runGuarded(()=>T(I))}}static _normalizeKey(C){return"esc"===C?"escape":C}}return(y=_).\u0275fac=function(C){return new(C||y)($t(go))},y.\u0275prov=Ot({token:y,factory:y.\u0275fac}),_})();const eM=[{provide:bs,useValue:kI},{provide:Iw,useValue:function d4(){rv.makeCurrent()},multi:!0},{provide:go,useFactory:function h4(){return function Jx(y){Ng=y}(document),document},deps:[]}],p4=kD(u$,"browser",eM),g4=new Rt(""),tM=[{provide:Yf,useClass:class X3{addToWindow(_){Pe.getAngularTestability=(C,T=!0)=>{const D=_.findTestabilityInTree(C,T);if(null==D)throw new j(5103,!1);return D},Pe.getAllAngularTestabilities=()=>_.getAllTestabilities(),Pe.getAllAngularRootElements=()=>_.getAllRootElements(),Pe.frameworkStabilizers||(Pe.frameworkStabilizers=[]),Pe.frameworkStabilizers.push(C=>{const T=Pe.getAllAngularTestabilities();let D=T.length;const I=function(){D--,0==D&&C()};T.forEach(M=>{M.whenStable(I)})})}findTestabilityInTree(_,S,C){if(null==S)return null;const T=_.getTestability(S);return null!=T?T:C?Ns().isShadowRoot(S)?this.findTestabilityInTree(_,S.host,!0):this.findTestabilityInTree(_,S.parentElement,!0):null}},deps:[]},{provide:SD,useClass:Ty,deps:[kn,Ey,Yf]},{provide:Ty,useClass:Ty,deps:[kn,Ey,Yf]}],nM=[{provide:Kp,useValue:"root"},{provide:vi,useFactory:function f4(){return new vi},deps:[]},{provide:ov,useClass:a4,multi:!0,deps:[go,kn,bs]},{provide:ov,useClass:u4,multi:!0,deps:[go]},cv,GI,qI,{provide:Sm,useExisting:cv},{provide:FI,useClass:Y3,deps:[]},[]];let rM=(()=>{var y;class _{constructor(C){}static withServerTransition(C){return{ngModule:_,providers:[{provide:Kd,useValue:C.appId}]}}}return(y=_).\u0275fac=function(C){return new(C||y)($t(g4,12))},y.\u0275mod=qo({type:y}),y.\u0275inj=Po({providers:[...nM,...tM],imports:[f3,d$]}),_})(),m4=(()=>{var y;class _{constructor(C){this._doc=C}getTitle(){return this._doc.title}setTitle(C){this._doc.title=C||""}}return(y=_).\u0275fac=function(C){return new(C||y)($t(go))},y.\u0275prov=Ot({token:y,factory:y.\u0275fac,providedIn:"root"}),_})();var on=function(y){return y[y.State=0]="State",y[y.Transition=1]="Transition",y[y.Sequence=2]="Sequence",y[y.Group=3]="Group",y[y.Animate=4]="Animate",y[y.Keyframes=5]="Keyframes",y[y.Style=6]="Style",y[y.Trigger=7]="Trigger",y[y.Reference=8]="Reference",y[y.AnimateChild=9]="AnimateChild",y[y.AnimateRef=10]="AnimateRef",y[y.Query=11]="Query",y[y.Stagger=12]="Stagger",y}(on||{});const is="*";function aM(y){return{type:on.Style,styles:y,offset:null}}class Iu{constructor(_=0,S=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=_+S}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(_=>_()),this._onDoneFns=[])}onStart(_){this._originalOnStartFns.push(_),this._onStartFns.push(_)}onDone(_){this._originalOnDoneFns.push(_),this._onDoneFns.push(_)}onDestroy(_){this._onDestroyFns.push(_)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(_=>_()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(_=>_()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(_){this._position=this.totalTime?_*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(_){const S="start"==_?this._onStartFns:this._onDoneFns;S.forEach(C=>C()),S.length=0}}class cM{constructor(_){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=_;let S=0,C=0,T=0;const D=this.players.length;0==D?queueMicrotask(()=>this._onFinish()):this.players.forEach(I=>{I.onDone(()=>{++S==D&&this._onFinish()}),I.onDestroy(()=>{++C==D&&this._onDestroy()}),I.onStart(()=>{++T==D&&this._onStart()})}),this.totalTime=this.players.reduce((I,M)=>Math.max(I,M.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(_=>_()),this._onDoneFns=[])}init(){this.players.forEach(_=>_.init())}onStart(_){this._onStartFns.push(_)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(_=>_()),this._onStartFns=[])}onDone(_){this._onDoneFns.push(_)}onDestroy(_){this._onDestroyFns.push(_)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(_=>_.play())}pause(){this.players.forEach(_=>_.pause())}restart(){this.players.forEach(_=>_.restart())}finish(){this._onFinish(),this.players.forEach(_=>_.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(_=>_.destroy()),this._onDestroyFns.forEach(_=>_()),this._onDestroyFns=[])}reset(){this.players.forEach(_=>_.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(_){const S=_*this.totalTime;this.players.forEach(C=>{const T=C.totalTime?Math.min(1,S/C.totalTime):1;C.setPosition(T)})}getPosition(){const _=this.players.reduce((S,C)=>null===S||C.totalTime>S.totalTime?C:S,null);return null!=_?_.getPosition():0}beforeDestroy(){this.players.forEach(_=>{_.beforeDestroy&&_.beforeDestroy()})}triggerCallback(_){const S="start"==_?this._onStartFns:this._onDoneFns;S.forEach(C=>C()),S.length=0}}const I4=["value"];function dM(y){return new j(3e3,!1)}function ks(y){switch(y.length){case 0:return new Iu;case 1:return y[0];default:return new cM(y)}}function fM(y,_,S=new Map,C=new Map){const T=[],D=[];let I=-1,M=null;if(_.forEach(A=>{const R=A.get("offset"),N=R==I,O=N&&M||new Map;A.forEach((L,$)=>{let Q=$,ae=L;if("offset"!==$)switch(Q=y.normalizePropertyName(Q,T),ae){case"!":ae=S.get($);break;case is:ae=C.get($);break;default:ae=y.normalizeStyleValue($,Q,ae,T)}O.set(Q,ae)}),N||D.push(O),M=O,I=R}),T.length)throw function Q4(y){return new j(3502,!1)}();return D}function fv(y,_,S,C){switch(_){case"start":y.onStart(()=>C(S&&hv(S,"start",y)));break;case"done":y.onDone(()=>C(S&&hv(S,"done",y)));break;case"destroy":y.onDestroy(()=>C(S&&hv(S,"destroy",y)))}}function hv(y,_,S){const C=S.totalTime,D=pv(y.element,y.triggerName,y.fromState,y.toState,_||y.phaseName,null==C?y.totalTime:C,!!S.disabled),I=y._data;return null!=I&&(D._data=I),D}function pv(y,_,S,C,T="",D=0,I){return{element:y,triggerName:_,fromState:S,toState:C,phaseName:T,totalTime:D,disabled:!!I}}function Eo(y,_,S){let C=y.get(_);return C||y.set(_,C=S),C}function hM(y){const _=y.indexOf(":");return[y.substring(1,_),y.slice(_+1)]}const cz=typeof document>"u"?null:document.documentElement;function gv(y){const _=y.parentNode||y.host||null;return _===cz?null:_}let va=null,pM=!1;function gM(y,_){for(;_;){if(_===y)return!0;_=gv(_)}return!1}function mM(y,_,S){if(S)return Array.from(y.querySelectorAll(_));const C=y.querySelector(_);return C?[C]:[]}let mv=(()=>{var y;class _{validateStyleProperty(C){return function uz(y){va||(va=function dz(){return typeof document<"u"?document.body:null}()||{},pM=!!va.style&&"WebkitAppearance"in va.style);let _=!0;return va.style&&!function lz(y){return"ebkit"==y.substring(1,6)}(y)&&(_=y in va.style,!_&&pM&&(_="Webkit"+y.charAt(0).toUpperCase()+y.slice(1)in va.style)),_}(C)}matchesElement(C,T){return!1}containsElement(C,T){return gM(C,T)}getParentElement(C){return gv(C)}query(C,T,D){return mM(C,T,D)}computeStyle(C,T,D){return D||""}animate(C,T,D,I,M,A=[],R){return new Iu(D,I)}}return(y=_).\u0275fac=function(C){return new(C||y)},y.\u0275prov=Ot({token:y,factory:y.\u0275fac}),_})();class bh{}bh.NOOP=new mv;class yv{}const hz=1e3,vv="ng-enter",Sh="ng-leave",Th="ng-trigger",Eh=".ng-trigger",vM="ng-animating",_v=".ng-animating";function ss(y){if("number"==typeof y)return y;const _=y.match(/^(-?[\.\d]+)(m?s)/);return!_||_.length<2?0:Cv(parseFloat(_[1]),_[2])}function Cv(y,_){return"s"===_?y*hz:y}function Dh(y,_,S){return y.hasOwnProperty("duration")?y:function gz(y,_,S){let T,D=0,I="";if("string"==typeof y){const M=y.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===M)return _.push(dM()),{duration:0,delay:0,easing:""};T=Cv(parseFloat(M[1]),M[2]);const A=M[3];null!=A&&(D=Cv(parseFloat(A),M[4]));const R=M[5];R&&(I=R)}else T=y;if(!S){let M=!1,A=_.length;T<0&&(_.push(function M4(){return new j(3100,!1)}()),M=!0),D<0&&(_.push(function A4(){return new j(3101,!1)}()),M=!0),M&&_.splice(A,0,dM())}return{duration:T,delay:D,easing:I}}(y,_,S)}function Di(y,_,S){_.forEach((C,T)=>{const D=bv(T);S&&!S.has(T)&&S.set(T,y.style[D]),y.style[D]=C})}function _a(y,_){_.forEach((S,C)=>{const T=bv(C);y.style[T]=""})}function Mu(y){return Array.isArray(y)?1==y.length?y[0]:function b4(y,_=null){return{type:on.Sequence,steps:y,options:_}}(y):y}const wv=new RegExp("".concat("{{","\\s*(.+?)\\s*").concat("}}"),"g");function CM(y){let _=[];if("string"==typeof y){let S;for(;S=wv.exec(y);)_.push(S[1]);wv.lastIndex=0}return _}function Au(y,_,S){const C="".concat(y),T=C.replace(wv,(D,I)=>{let M=_[I];return null==M&&(S.push(function P4(y){return new j(3003,!1)}()),M=""),M.toString()});return T==C?y:T}const vz=/-+([a-z0-9])/g;function bv(y){return y.replace(vz,(..._)=>_[1].toUpperCase())}function Do(y,_,S){switch(_.type){case on.Trigger:return y.visitTrigger(_,S);case on.State:return y.visitState(_,S);case on.Transition:return y.visitTransition(_,S);case on.Sequence:return y.visitSequence(_,S);case on.Group:return y.visitGroup(_,S);case on.Animate:return y.visitAnimate(_,S);case on.Keyframes:return y.visitKeyframes(_,S);case on.Style:return y.visitStyle(_,S);case on.Reference:return y.visitReference(_,S);case on.AnimateChild:return y.visitAnimateChild(_,S);case on.AnimateRef:return y.visitAnimateRef(_,S);case on.Query:return y.visitQuery(_,S);case on.Stagger:return y.visitStagger(_,S);default:throw function N4(y){return new j(3004,!1)}()}}function Sv(y,_){return window.getComputedStyle(y)[_]}const wz=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class wM extends yv{normalizePropertyName(_,S){return bv(_)}normalizeStyleValue(_,S,C,T){let D="";const I=C.toString().trim();if(wz.has(S)&&0!==C&&"0"!==C)if("number"==typeof C)D="px";else{const M=C.match(/^[+-]?[\d\.]+([a-z]*)$/);M&&0==M[1].length&&T.push(function O4(y,_){return new j(3005,!1)}())}return I+D}}const Ih="*";const Mh=new Set(["true","1"]),Ah=new Set(["false","0"]);function bM(y,_){const S=Mh.has(y)||Ah.has(y),C=Mh.has(_)||Ah.has(_);return(T,D)=>{let I=y==Ih||y==T,M=_==Ih||_==D;return!I&&S&&"boolean"==typeof T&&(I=T?Mh.has(y):Ah.has(y)),!M&&C&&"boolean"==typeof D&&(M=D?Mh.has(_):Ah.has(_)),I&&M}}const Ez=new RegExp("s*".concat(":self","s*,?"),"g");function Tv(y,_,S,C){return new Dz(y).build(_,S,C)}class Dz{constructor(_){this._driver=_}build(_,S,C){const T=new Az(S);return this._resetContextStyleTimingState(T),Do(this,Mu(_),T)}_resetContextStyleTimingState(_){_.currentQuerySelector="",_.collectedStyles=new Map,_.collectedStyles.set("",new Map),_.currentTime=0}visitTrigger(_,S){let C=S.queryCount=0,T=S.depCount=0;const D=[],I=[];return"@"==_.name.charAt(0)&&S.errors.push(function k4(){return new j(3006,!1)}()),_.definitions.forEach(M=>{if(this._resetContextStyleTimingState(S),M.type==on.State){const A=M,R=A.name;R.toString().split(/\s*,\s*/).forEach(N=>{A.name=N,D.push(this.visitState(A,S))}),A.name=R}else if(M.type==on.Transition){const A=this.visitTransition(M,S);C+=A.queryCount,T+=A.depCount,I.push(A)}else S.errors.push(function x4(){return new j(3007,!1)}())}),{type:on.Trigger,name:_.name,states:D,transitions:I,queryCount:C,depCount:T,options:null}}visitState(_,S){const C=this.visitStyle(_.styles,S),T=_.options&&_.options.params||null;if(C.containsDynamicStyles){const D=new Set,I=T||{};C.styles.forEach(M=>{M instanceof Map&&M.forEach(A=>{CM(A).forEach(R=>{I.hasOwnProperty(R)||D.add(R)})})}),D.size&&S.errors.push(function F4(y,_){return new j(3008,!1)}(0,D.values()))}return{type:on.State,name:_.name,style:C,options:T?{params:T}:null}}visitTransition(_,S){S.queryCount=0,S.depCount=0;const C=Do(this,Mu(_.animation),S),T=function bz(y,_){const S=[];return"string"==typeof y?y.split(/\s*,\s*/).forEach(C=>function Sz(y,_,S){if(":"==y[0]){const A=function Tz(y,_){switch(y){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(S,C)=>parseFloat(C)>parseFloat(S);case":decrement":return(S,C)=>parseFloat(C)<parseFloat(S);default:return _.push(function W4(y){return new j(3016,!1)}()),"* => *"}}(y,S);if("function"==typeof A)return void _.push(A);y=A}const C=y.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==C||C.length<4)return S.push(function q4(y){return new j(3015,!1)}()),_;const T=C[1],D=C[2],I=C[3];_.push(bM(T,I)),"<"==D[0]&&(T!=Ih||I!=Ih)&&_.push(bM(I,T))}(C,S,_)):S.push(y),S}(_.expr,S.errors);return{type:on.Transition,matchers:T,animation:C,queryCount:S.queryCount,depCount:S.depCount,options:Ca(_.options)}}visitSequence(_,S){return{type:on.Sequence,steps:_.steps.map(C=>Do(this,C,S)),options:Ca(_.options)}}visitGroup(_,S){const C=S.currentTime;let T=0;const D=_.steps.map(I=>{S.currentTime=C;const M=Do(this,I,S);return T=Math.max(T,S.currentTime),M});return S.currentTime=T,{type:on.Group,steps:D,options:Ca(_.options)}}visitAnimate(_,S){const C=function Pz(y,_){if(y.hasOwnProperty("duration"))return y;if("number"==typeof y)return Ev(Dh(y,_).duration,0,"");const S=y;if(S.split(/\s+/).some(D=>"{"==D.charAt(0)&&"{"==D.charAt(1))){const D=Ev(0,0,"");return D.dynamic=!0,D.strValue=S,D}const T=Dh(S,_);return Ev(T.duration,T.delay,T.easing)}(_.timings,S.errors);S.currentAnimateTimings=C;let T,D=_.styles?_.styles:aM({});if(D.type==on.Keyframes)T=this.visitKeyframes(D,S);else{let I=_.styles,M=!1;if(!I){M=!0;const R={};C.easing&&(R.easing=C.easing),I=aM(R)}S.currentTime+=C.duration+C.delay;const A=this.visitStyle(I,S);A.isEmptyStep=M,T=A}return S.currentAnimateTimings=null,{type:on.Animate,timings:C,style:T,options:null}}visitStyle(_,S){const C=this._makeStyleAst(_,S);return this._validateStyleAst(C,S),C}_makeStyleAst(_,S){const C=[],T=Array.isArray(_.styles)?_.styles:[_.styles];for(let M of T)"string"==typeof M?M===is?C.push(M):S.errors.push(new j(3002,!1)):C.push(new Map(Object.entries(M)));let D=!1,I=null;return C.forEach(M=>{if(M instanceof Map&&(M.has("easing")&&(I=M.get("easing"),M.delete("easing")),!D))for(let A of M.values())if(A.toString().indexOf("{{")>=0){D=!0;break}}),{type:on.Style,styles:C,easing:I,offset:_.offset,containsDynamicStyles:D,options:null}}_validateStyleAst(_,S){const C=S.currentAnimateTimings;let T=S.currentTime,D=S.currentTime;C&&D>0&&(D-=C.duration+C.delay),_.styles.forEach(I=>{"string"!=typeof I&&I.forEach((M,A)=>{const R=S.collectedStyles.get(S.currentQuerySelector),N=R.get(A);let O=!0;N&&(D!=T&&D>=N.startTime&&T<=N.endTime&&(S.errors.push(function U4(y,_,S,C,T){return new j(3010,!1)}()),O=!1),D=N.startTime),O&&R.set(A,{startTime:D,endTime:T}),S.options&&function yz(y,_,S){const C=_.params||{},T=CM(y);T.length&&T.forEach(D=>{C.hasOwnProperty(D)||S.push(function R4(y){return new j(3001,!1)}())})}(M,S.options,S.errors)})})}visitKeyframes(_,S){const C={type:on.Keyframes,styles:[],options:null};if(!S.currentAnimateTimings)return S.errors.push(function V4(){return new j(3011,!1)}()),C;let D=0;const I=[];let M=!1,A=!1,R=0;const N=_.steps.map(Ee=>{const Ae=this._makeStyleAst(Ee,S);let ht=null!=Ae.offset?Ae.offset:function Rz(y){if("string"==typeof y)return null;let _=null;if(Array.isArray(y))y.forEach(S=>{if(S instanceof Map&&S.has("offset")){const C=S;_=parseFloat(C.get("offset")),C.delete("offset")}});else if(y instanceof Map&&y.has("offset")){const S=y;_=parseFloat(S.get("offset")),S.delete("offset")}return _}(Ae.styles),vt=0;return null!=ht&&(D++,vt=Ae.offset=ht),A=A||vt<0||vt>1,M=M||vt<R,R=vt,I.push(vt),Ae});A&&S.errors.push(function j4(){return new j(3012,!1)}()),M&&S.errors.push(function B4(){return new j(3200,!1)}());const O=_.steps.length;let L=0;D>0&&D<O?S.errors.push(function $4(){return new j(3202,!1)}()):0==D&&(L=1/(O-1));const $=O-1,Q=S.currentTime,ae=S.currentAnimateTimings,Ce=ae.duration;return N.forEach((Ee,Ae)=>{const ht=L>0?Ae==$?1:L*Ae:I[Ae],vt=ht*Ce;S.currentTime=Q+ae.delay+vt,ae.duration=vt,this._validateStyleAst(Ee,S),Ee.offset=ht,C.styles.push(Ee)}),C}visitReference(_,S){return{type:on.Reference,animation:Do(this,Mu(_.animation),S),options:Ca(_.options)}}visitAnimateChild(_,S){return S.depCount++,{type:on.AnimateChild,options:Ca(_.options)}}visitAnimateRef(_,S){return{type:on.AnimateRef,animation:this.visitReference(_.animation,S),options:Ca(_.options)}}visitQuery(_,S){const C=S.currentQuerySelector,T=_.options||{};S.queryCount++,S.currentQuery=_;const[D,I]=function Iz(y){const _=!!y.split(/\s*,\s*/).find(S=>":self"==S);return _&&(y=y.replace(Ez,"")),y=y.replace(/@\*/g,Eh).replace(/@\w+/g,S=>Eh+"-"+S.slice(1)).replace(/:animating/g,_v),[y,_]}(_.selector);S.currentQuerySelector=C.length?C+" "+D:D,Eo(S.collectedStyles,S.currentQuerySelector,new Map);const M=Do(this,Mu(_.animation),S);return S.currentQuery=null,S.currentQuerySelector=C,{type:on.Query,selector:D,limit:T.limit||0,optional:!!T.optional,includeSelf:I,animation:M,originalSelector:_.selector,options:Ca(_.options)}}visitStagger(_,S){S.currentQuery||S.errors.push(function H4(){return new j(3013,!1)}());const C="full"===_.timings?{duration:0,delay:0,easing:"full"}:Dh(_.timings,S.errors,!0);return{type:on.Stagger,animation:Do(this,Mu(_.animation),S),timings:C,options:null}}}class Az{constructor(_){this.errors=_,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function Ca(y){return y?(y=se({},y)).params&&(y.params=function Mz(y){return y?se({},y):null}(y.params)):y={},y}function Ev(y,_,S){return{duration:y,delay:_,easing:S}}function Dv(y,_,S,C,T,D,I=null,M=!1){return{type:1,element:y,keyframes:_,preStyleProps:S,postStyleProps:C,duration:T,delay:D,totalTime:T+D,easing:I,subTimeline:M}}class Rh{constructor(){this._map=new Map}get(_){return this._map.get(_)||[]}append(_,S){let C=this._map.get(_);C||this._map.set(_,C=[]),C.push(...S)}has(_){return this._map.has(_)}clear(){this._map.clear()}}const kz=new RegExp(":enter","g"),Fz=new RegExp(":leave","g");function Iv(y,_,S,C,T,D=new Map,I=new Map,M,A,R=[]){return(new Lz).buildKeyframes(y,_,S,C,T,D,I,M,A,R)}class Lz{buildKeyframes(_,S,C,T,D,I,M,A,R,N=[]){R=R||new Rh;const O=new Mv(_,S,R,T,D,N,[]);O.options=A;const L=A.delay?ss(A.delay):0;O.currentTimeline.delayNextStep(L),O.currentTimeline.setStyles([I],null,O.errors,A),Do(this,C,O);const $=O.timelines.filter(Q=>Q.containsAnimation());if($.length&&M.size){let Q;for(let ae=$.length-1;ae>=0;ae--){const Ce=$[ae];if(Ce.element===S){Q=Ce;break}}Q&&!Q.allowOnlyTimelineStyles()&&Q.setStyles([M],null,O.errors,A)}return $.length?$.map(Q=>Q.buildKeyframes()):[Dv(S,[],[],[],0,L,"",!1)]}visitTrigger(_,S){}visitState(_,S){}visitTransition(_,S){}visitAnimateChild(_,S){const C=S.subInstructions.get(S.element);if(C){const T=S.createSubContext(_.options),D=S.currentTimeline.currentTime,I=this._visitSubInstructions(C,T,T.options);D!=I&&S.transformIntoNewTimeline(I)}S.previousNode=_}visitAnimateRef(_,S){const C=S.createSubContext(_.options);C.transformIntoNewTimeline(),this._applyAnimationRefDelays([_.options,_.animation.options],S,C),this.visitReference(_.animation,C),S.transformIntoNewTimeline(C.currentTimeline.currentTime),S.previousNode=_}_applyAnimationRefDelays(_,S,C){for(const D of _){const I=null==D?void 0:D.delay;if(I){var T;const M="number"==typeof I?I:ss(Au(I,null!==(T=null==D?void 0:D.params)&&void 0!==T?T:{},S.errors));C.delayNextStep(M)}}}_visitSubInstructions(_,S,C){let D=S.currentTimeline.currentTime;const I=null!=C.duration?ss(C.duration):null,M=null!=C.delay?ss(C.delay):null;return 0!==I&&_.forEach(A=>{const R=S.appendInstructionToTimeline(A,I,M);D=Math.max(D,R.duration+R.delay)}),D}visitReference(_,S){S.updateOptions(_.options,!0),Do(this,_.animation,S),S.previousNode=_}visitSequence(_,S){const C=S.subContextCount;let T=S;const D=_.options;if(D&&(D.params||D.delay)&&(T=S.createSubContext(D),T.transformIntoNewTimeline(),null!=D.delay)){T.previousNode.type==on.Style&&(T.currentTimeline.snapshotCurrentStyles(),T.previousNode=Ph);const I=ss(D.delay);T.delayNextStep(I)}_.steps.length&&(_.steps.forEach(I=>Do(this,I,T)),T.currentTimeline.applyStylesToKeyframe(),T.subContextCount>C&&T.transformIntoNewTimeline()),S.previousNode=_}visitGroup(_,S){const C=[];let T=S.currentTimeline.currentTime;const D=_.options&&_.options.delay?ss(_.options.delay):0;_.steps.forEach(I=>{const M=S.createSubContext(_.options);D&&M.delayNextStep(D),Do(this,I,M),T=Math.max(T,M.currentTimeline.currentTime),C.push(M.currentTimeline)}),C.forEach(I=>S.currentTimeline.mergeTimelineCollectedStyles(I)),S.transformIntoNewTimeline(T),S.previousNode=_}_visitTiming(_,S){if(_.dynamic){const C=_.strValue;return Dh(S.params?Au(C,S.params,S.errors):C,S.errors)}return{duration:_.duration,delay:_.delay,easing:_.easing}}visitAnimate(_,S){const C=S.currentAnimateTimings=this._visitTiming(_.timings,S),T=S.currentTimeline;C.delay&&(S.incrementTime(C.delay),T.snapshotCurrentStyles());const D=_.style;D.type==on.Keyframes?this.visitKeyframes(D,S):(S.incrementTime(C.duration),this.visitStyle(D,S),T.applyStylesToKeyframe()),S.currentAnimateTimings=null,S.previousNode=_}visitStyle(_,S){const C=S.currentTimeline,T=S.currentAnimateTimings;!T&&C.hasCurrentStyleProperties()&&C.forwardFrame();const D=T&&T.easing||_.easing;_.isEmptyStep?C.applyEmptyStep(D):C.setStyles(_.styles,D,S.errors,S.options),S.previousNode=_}visitKeyframes(_,S){const C=S.currentAnimateTimings,T=S.currentTimeline.duration,D=C.duration,M=S.createSubContext().currentTimeline;M.easing=C.easing,_.styles.forEach(A=>{M.forwardTime((A.offset||0)*D),M.setStyles(A.styles,A.easing,S.errors,S.options),M.applyStylesToKeyframe()}),S.currentTimeline.mergeTimelineCollectedStyles(M),S.transformIntoNewTimeline(T+D),S.previousNode=_}visitQuery(_,S){const C=S.currentTimeline.currentTime,T=_.options||{},D=T.delay?ss(T.delay):0;D&&(S.previousNode.type===on.Style||0==C&&S.currentTimeline.hasCurrentStyleProperties())&&(S.currentTimeline.snapshotCurrentStyles(),S.previousNode=Ph);let I=C;const M=S.invokeQuery(_.selector,_.originalSelector,_.limit,_.includeSelf,!!T.optional,S.errors);S.currentQueryTotal=M.length;let A=null;M.forEach((R,N)=>{S.currentQueryIndex=N;const O=S.createSubContext(_.options,R);D&&O.delayNextStep(D),R===S.element&&(A=O.currentTimeline),Do(this,_.animation,O),O.currentTimeline.applyStylesToKeyframe(),I=Math.max(I,O.currentTimeline.currentTime)}),S.currentQueryIndex=0,S.currentQueryTotal=0,S.transformIntoNewTimeline(I),A&&(S.currentTimeline.mergeTimelineCollectedStyles(A),S.currentTimeline.snapshotCurrentStyles()),S.previousNode=_}visitStagger(_,S){const C=S.parentContext,T=S.currentTimeline,D=_.timings,I=Math.abs(D.duration),M=I*(S.currentQueryTotal-1);let A=I*S.currentQueryIndex;switch(D.duration<0?"reverse":D.easing){case"reverse":A=M-A;break;case"full":A=C.currentStaggerTime}const N=S.currentTimeline;A&&N.delayNextStep(A);const O=N.currentTime;Do(this,_.animation,S),S.previousNode=_,C.currentStaggerTime=T.currentTime-O+(T.startTime-C.currentTimeline.startTime)}}const Ph={};class Mv{constructor(_,S,C,T,D,I,M,A){this._driver=_,this.element=S,this.subInstructions=C,this._enterClassName=T,this._leaveClassName=D,this.errors=I,this.timelines=M,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Ph,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=A||new Nh(this._driver,S,0),M.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(_,S){if(!_)return;const C=_;let T=this.options;null!=C.duration&&(T.duration=ss(C.duration)),null!=C.delay&&(T.delay=ss(C.delay));const D=C.params;if(D){let I=T.params;I||(I=this.options.params={}),Object.keys(D).forEach(M=>{(!S||!I.hasOwnProperty(M))&&(I[M]=Au(D[M],I,this.errors))})}}_copyOptions(){const _={};if(this.options){const S=this.options.params;if(S){const C=_.params={};Object.keys(S).forEach(T=>{C[T]=S[T]})}}return _}createSubContext(_=null,S,C){const T=S||this.element,D=new Mv(this._driver,T,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(T,C||0));return D.previousNode=this.previousNode,D.currentAnimateTimings=this.currentAnimateTimings,D.options=this._copyOptions(),D.updateOptions(_),D.currentQueryIndex=this.currentQueryIndex,D.currentQueryTotal=this.currentQueryTotal,D.parentContext=this,this.subContextCount++,D}transformIntoNewTimeline(_){return this.previousNode=Ph,this.currentTimeline=this.currentTimeline.fork(this.element,_),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(_,S,C){const T={duration:null!=S?S:_.duration,delay:this.currentTimeline.currentTime+(null!=C?C:0)+_.delay,easing:""},D=new Uz(this._driver,_.element,_.keyframes,_.preStyleProps,_.postStyleProps,T,_.stretchStartingKeyframe);return this.timelines.push(D),T}incrementTime(_){this.currentTimeline.forwardTime(this.currentTimeline.duration+_)}delayNextStep(_){_>0&&this.currentTimeline.delayNextStep(_)}invokeQuery(_,S,C,T,D,I){let M=[];if(T&&M.push(this.element),_.length>0){_=(_=_.replace(kz,"."+this._enterClassName)).replace(Fz,"."+this._leaveClassName);let R=this._driver.query(this.element,_,1!=C);0!==C&&(R=C<0?R.slice(R.length+C,R.length):R.slice(0,C)),M.push(...R)}return!D&&0==M.length&&I.push(function z4(y){return new j(3014,!1)}()),M}}class Nh{constructor(_,S,C,T){this._driver=_,this.element=S,this.startTime=C,this._elementTimelineStylesLookup=T,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(S),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(S,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(_){const S=1===this._keyframes.size&&this._pendingStyles.size;this.duration||S?(this.forwardTime(this.currentTime+_),S&&this.snapshotCurrentStyles()):this.startTime+=_}fork(_,S){return this.applyStylesToKeyframe(),new Nh(this._driver,_,S||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(_){this.applyStylesToKeyframe(),this.duration=_,this._loadKeyframe()}_updateStyle(_,S){this._localTimelineStyles.set(_,S),this._globalTimelineStyles.set(_,S),this._styleSummary.set(_,{time:this.currentTime,value:S})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(_){_&&this._previousKeyframe.set("easing",_);for(let[S,C]of this._globalTimelineStyles)this._backFill.set(S,C||is),this._currentKeyframe.set(S,is);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(_,S,C,T){S&&this._previousKeyframe.set("easing",S);const D=T&&T.params||{},I=function Vz(y,_){const S=new Map;let C;return y.forEach(T=>{if("*"===T){null!=C||(C=_.keys());for(let D of C)S.set(D,is)}else for(let[D,I]of T)S.set(D,I)}),S}(_,this._globalTimelineStyles);for(let[A,R]of I){const N=Au(R,D,C);var M;this._pendingStyles.set(A,N),this._localTimelineStyles.has(A)||this._backFill.set(A,null!==(M=this._globalTimelineStyles.get(A))&&void 0!==M?M:is),this._updateStyle(A,N)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((_,S)=>{this._currentKeyframe.set(S,_)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((_,S)=>{this._currentKeyframe.has(S)||this._currentKeyframe.set(S,_)}))}snapshotCurrentStyles(){for(let[_,S]of this._localTimelineStyles)this._pendingStyles.set(_,S),this._updateStyle(_,S)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const _=[];for(let S in this._currentKeyframe)_.push(S);return _}mergeTimelineCollectedStyles(_){_._styleSummary.forEach((S,C)=>{const T=this._styleSummary.get(C);(!T||S.time>T.time)&&this._updateStyle(C,S.value)})}buildKeyframes(){this.applyStylesToKeyframe();const _=new Set,S=new Set,C=1===this._keyframes.size&&0===this.duration;let T=[];this._keyframes.forEach((M,A)=>{const R=new Map([...this._backFill,...M]);R.forEach((N,O)=>{"!"===N?_.add(O):N===is&&S.add(O)}),C||R.set("offset",A/this.duration),T.push(R)});const D=[..._.values()],I=[...S.values()];if(C){const M=T[0],A=new Map(M);M.set("offset",0),A.set("offset",1),T=[M,A]}return Dv(this.element,T,D,I,this.duration,this.startTime,this.easing,!1)}}class Uz extends Nh{constructor(_,S,C,T,D,I,M=!1){super(_,S,I.delay),this.keyframes=C,this.preStyleProps=T,this.postStyleProps=D,this._stretchStartingKeyframe=M,this.timings={duration:I.duration,delay:I.delay,easing:I.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let _=this.keyframes,{delay:S,duration:C,easing:T}=this.timings;if(this._stretchStartingKeyframe&&S){const D=[],I=C+S,M=S/I,A=new Map(_[0]);A.set("offset",0),D.push(A);const R=new Map(_[0]);R.set("offset",EM(M)),D.push(R);const N=_.length-1;for(let O=1;O<=N;O++){let L=new Map(_[O]);const $=L.get("offset");L.set("offset",EM((S+$*C)/I)),D.push(L)}C=I,S=0,T="",_=D}return Dv(this.element,_,this.preStyleProps,this.postStyleProps,C,S,T,!0)}}function EM(y,_=3){const S=Math.pow(10,_-1);return Math.round(y*S)/S}function DM(y,_,S,C,T,D,I,M,A,R,N,O,L){return{type:0,element:y,triggerName:_,isRemovalTransition:T,fromState:S,fromStyles:D,toState:C,toStyles:I,timelines:M,queriedElements:A,preStyleProps:R,postStyleProps:N,totalTime:O,errors:L}}const Av={};class IM{constructor(_,S,C){this._triggerName=_,this.ast=S,this._stateStyles=C}match(_,S,C,T){return function jz(y,_,S,C,T){return y.some(D=>D(_,S,C,T))}(this.ast.matchers,_,S,C,T)}buildStyles(_,S,C){let T=this._stateStyles.get("*");return void 0!==_&&(T=this._stateStyles.get(null==_?void 0:_.toString())||T),T?T.buildStyles(S,C):new Map}build(_,S,C,T,D,I,M,A,R,N){var O;const L=[],$=this.ast.options&&this.ast.options.params||Av,ae=this.buildStyles(C,M&&M.params||Av,L),Ce=A&&A.params||Av,Ee=this.buildStyles(T,Ce,L),Ae=new Set,ht=new Map,vt=new Map,qt="void"===T,Nn={params:MM(Ce,$),delay:null===(O=this.ast.options)||void 0===O?void 0:O.delay},An=N?[]:Iv(_,S,this.ast.animation,D,I,ae,Ee,Nn,R,L);let Un=0;return An.forEach(Er=>{Un=Math.max(Er.duration+Er.delay,Un)}),L.length?DM(S,this._triggerName,C,T,qt,ae,Ee,[],[],ht,vt,Un,L):(An.forEach(Er=>{const so=Er.element,Vi=Eo(ht,so,new Set);Er.preStyleProps.forEach(ji=>Vi.add(ji));const ai=Eo(vt,so,new Set);Er.postStyleProps.forEach(ji=>ai.add(ji)),so!==S&&Ae.add(so)}),DM(S,this._triggerName,C,T,qt,ae,Ee,An,[...Ae.values()],ht,vt,Un))}}function MM(y,_){const S=se({},_);return Object.entries(y).forEach(([C,T])=>{null!=T&&(S[C]=T)}),S}class Bz{constructor(_,S,C){this.styles=_,this.defaultParams=S,this.normalizer=C}buildStyles(_,S){const C=new Map,T=MM(_,this.defaultParams);return this.styles.styles.forEach(D=>{"string"!=typeof D&&D.forEach((I,M)=>{I&&(I=Au(I,T,S));const A=this.normalizer.normalizePropertyName(M,S);I=this.normalizer.normalizeStyleValue(M,A,I,S),C.set(M,I)})}),C}}class Hz{constructor(_,S,C){this.name=_,this.ast=S,this._normalizer=C,this.transitionFactories=[],this.states=new Map,S.states.forEach(T=>{this.states.set(T.name,new Bz(T.style,T.options&&T.options.params||{},C))}),AM(this.states,"true","1"),AM(this.states,"false","0"),S.transitions.forEach(T=>{this.transitionFactories.push(new IM(_,T,this.states))}),this.fallbackTransition=function zz(y,_,S){return new IM(y,{type:on.Transition,animation:{type:on.Sequence,steps:[],options:null},matchers:[(I,M)=>!0],options:null,queryCount:0,depCount:0},_)}(_,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(_,S,C,T){return this.transitionFactories.find(I=>I.match(_,S,C,T))||null}matchStyles(_,S,C){return this.fallbackTransition.buildStyles(_,S,C)}}function AM(y,_,S){y.has(_)?y.has(S)||y.set(S,y.get(_)):y.has(S)&&y.set(_,y.get(S))}const qz=new Rh;class Wz{constructor(_,S,C){this.bodyNode=_,this._driver=S,this._normalizer=C,this._animations=new Map,this._playersById=new Map,this.players=[]}register(_,S){const C=[],D=Tv(this._driver,S,C,[]);if(C.length)throw function X4(y){return new j(3503,!1)}();this._animations.set(_,D)}_buildPlayer(_,S,C){const T=_.element,D=fM(this._normalizer,_.keyframes,S,C);return this._driver.animate(T,D,_.duration,_.delay,_.easing,[],!0)}create(_,S,C={}){const T=[],D=this._animations.get(_);let I;const M=new Map;if(D?(I=Iv(this._driver,S,D,vv,Sh,new Map,new Map,C,qz,T),I.forEach(N=>{const O=Eo(M,N.element,new Map);N.postStyleProps.forEach(L=>O.set(L,null))})):(T.push(function Y4(){return new j(3300,!1)}()),I=[]),T.length)throw function Z4(y){return new j(3504,!1)}();M.forEach((N,O)=>{N.forEach((L,$)=>{N.set($,this._driver.computeStyle(O,$,is))})});const R=ks(I.map(N=>{const O=M.get(N.element);return this._buildPlayer(N,new Map,O)}));return this._playersById.set(_,R),R.onDestroy(()=>this.destroy(_)),this.players.push(R),R}destroy(_){const S=this._getPlayer(_);S.destroy(),this._playersById.delete(_);const C=this.players.indexOf(S);C>=0&&this.players.splice(C,1)}_getPlayer(_){const S=this._playersById.get(_);if(!S)throw function ez(y){return new j(3301,!1)}();return S}listen(_,S,C,T){const D=pv(S,"","","");return fv(this._getPlayer(_),C,D,T),()=>{}}command(_,S,C,T){if("register"==C)return void this.register(_,T[0]);if("create"==C)return void this.create(_,S,T[0]||{});const D=this._getPlayer(_);switch(C){case"play":D.play();break;case"pause":D.pause();break;case"reset":D.reset();break;case"restart":D.restart();break;case"finish":D.finish();break;case"init":D.init();break;case"setPosition":D.setPosition(parseFloat(T[0]));break;case"destroy":this.destroy(_)}}}const RM="ng-animate-queued",Rv="ng-animate-disabled",Xz=[],PM={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Yz={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},oi="__ng_removed";class Pv{get params(){return this.options.params}constructor(_,S=""){this.namespaceId=S;const C=_&&_.hasOwnProperty("value");if(this.value=function n8(y){return null!=y?y:null}(C?_.value:_),C){const I=function w4(y,_){if(null==y)return{};var S,C,T=function C4(y,_){if(null==y)return{};var S={};for(var C in y)if({}.hasOwnProperty.call(y,C)){if(-1!==_.indexOf(C))continue;S[C]=y[C]}return S}(y,_);if(Object.getOwnPropertySymbols){var D=Object.getOwnPropertySymbols(y);for(C=0;C<D.length;C++)-1===_.indexOf(S=D[C])&&{}.propertyIsEnumerable.call(y,S)&&(T[S]=y[S])}return T}(_,I4);this.options=I}else this.options={};this.options.params||(this.options.params={})}absorbOptions(_){const S=_.params;if(S){const C=this.options.params;Object.keys(S).forEach(T=>{null==C[T]&&(C[T]=S[T])})}}}const Ru="void",Nv=new Pv(Ru);class Zz{constructor(_,S,C){this.id=_,this.hostElement=S,this._engine=C,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+_,Uo(S,this._hostClassName)}listen(_,S,C,T){if(!this._triggers.has(S))throw function tz(y,_){return new j(3302,!1)}();if(null==C||0==C.length)throw function nz(y){return new j(3303,!1)}();if(!function r8(y){return"start"==y||"done"==y}(C))throw function rz(y,_){return new j(3400,!1)}();const D=Eo(this._elementListeners,_,[]),I={name:S,phase:C,callback:T};D.push(I);const M=Eo(this._engine.statesByElement,_,new Map);return M.has(S)||(Uo(_,Th),Uo(_,Th+"-"+S),M.set(S,Nv)),()=>{this._engine.afterFlush(()=>{const A=D.indexOf(I);A>=0&&D.splice(A,1),this._triggers.has(S)||M.delete(S)})}}register(_,S){return!this._triggers.has(_)&&(this._triggers.set(_,S),!0)}_getTrigger(_){const S=this._triggers.get(_);if(!S)throw function oz(y){return new j(3401,!1)}();return S}trigger(_,S,C,T=!0){const D=this._getTrigger(S),I=new Ov(this.id,S,_);let M=this._engine.statesByElement.get(_);M||(Uo(_,Th),Uo(_,Th+"-"+S),this._engine.statesByElement.set(_,M=new Map));let A=M.get(S);const R=new Pv(C,this.id);if(!(C&&C.hasOwnProperty("value"))&&A&&R.absorbOptions(A.options),M.set(S,R),A||(A=Nv),R.value!==Ru&&A.value===R.value){if(!function s8(y,_){const S=Object.keys(y),C=Object.keys(_);if(S.length!=C.length)return!1;for(let T=0;T<S.length;T++){const D=S[T];if(!_.hasOwnProperty(D)||y[D]!==_[D])return!1}return!0}(A.params,R.params)){const ae=[],Ce=D.matchStyles(A.value,A.params,ae),Ee=D.matchStyles(R.value,R.params,ae);ae.length?this._engine.reportError(ae):this._engine.afterFlush(()=>{_a(_,Ce),Di(_,Ee)})}return}const L=Eo(this._engine.playersByElement,_,[]);L.forEach(ae=>{ae.namespaceId==this.id&&ae.triggerName==S&&ae.queued&&ae.destroy()});let $=D.matchTransition(A.value,R.value,_,R.params),Q=!1;if(!$){if(!T)return;$=D.fallbackTransition,Q=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:_,triggerName:S,transition:$,fromState:A,toState:R,player:I,isFallbackTransition:Q}),Q||(Uo(_,RM),I.onStart(()=>{Oc(_,RM)})),I.onDone(()=>{let ae=this.players.indexOf(I);ae>=0&&this.players.splice(ae,1);const Ce=this._engine.playersByElement.get(_);if(Ce){let Ee=Ce.indexOf(I);Ee>=0&&Ce.splice(Ee,1)}}),this.players.push(I),L.push(I),I}deregister(_){this._triggers.delete(_),this._engine.statesByElement.forEach(S=>S.delete(_)),this._elementListeners.forEach((S,C)=>{this._elementListeners.set(C,S.filter(T=>T.name!=_))})}clearElementCache(_){this._engine.statesByElement.delete(_),this._elementListeners.delete(_);const S=this._engine.playersByElement.get(_);S&&(S.forEach(C=>C.destroy()),this._engine.playersByElement.delete(_))}_signalRemovalForInnerTriggers(_,S){const C=this._engine.driver.query(_,Eh,!0);C.forEach(T=>{if(T[oi])return;const D=this._engine.fetchNamespacesByElement(T);D.size?D.forEach(I=>I.triggerLeaveAnimation(T,S,!1,!0)):this.clearElementCache(T)}),this._engine.afterFlushAnimationsDone(()=>C.forEach(T=>this.clearElementCache(T)))}triggerLeaveAnimation(_,S,C,T){const D=this._engine.statesByElement.get(_),I=new Map;if(D){const M=[];if(D.forEach((A,R)=>{if(I.set(R,A.value),this._triggers.has(R)){const N=this.trigger(_,R,Ru,T);N&&M.push(N)}}),M.length)return this._engine.markElementAsRemoved(this.id,_,!0,S,I),C&&ks(M).onDone(()=>this._engine.processLeaveNode(_)),!0}return!1}prepareLeaveAnimationListeners(_){const S=this._elementListeners.get(_),C=this._engine.statesByElement.get(_);if(S&&C){const T=new Set;S.forEach(D=>{const I=D.name;if(T.has(I))return;T.add(I);const A=this._triggers.get(I).fallbackTransition,R=C.get(I)||Nv,N=new Pv(Ru),O=new Ov(this.id,I,_);this._engine.totalQueuedPlayers++,this._queue.push({element:_,triggerName:I,transition:A,fromState:R,toState:N,player:O,isFallbackTransition:!0})})}}removeNode(_,S){const C=this._engine;if(_.childElementCount&&this._signalRemovalForInnerTriggers(_,S),this.triggerLeaveAnimation(_,S,!0))return;let T=!1;if(C.totalAnimations){const D=C.players.length?C.playersByQueriedElement.get(_):[];if(D&&D.length)T=!0;else{let I=_;for(;I=I.parentNode;)if(C.statesByElement.get(I)){T=!0;break}}}if(this.prepareLeaveAnimationListeners(_),T)C.markElementAsRemoved(this.id,_,!1,S);else{const D=_[oi];(!D||D===PM)&&(C.afterFlush(()=>this.clearElementCache(_)),C.destroyInnerAnimations(_),C._onRemovalComplete(_,S))}}insertNode(_,S){Uo(_,this._hostClassName)}drainQueuedTransitions(_){const S=[];return this._queue.forEach(C=>{const T=C.player;if(T.destroyed)return;const D=C.element,I=this._elementListeners.get(D);I&&I.forEach(M=>{if(M.name==C.triggerName){const A=pv(D,C.triggerName,C.fromState.value,C.toState.value);A._data=_,fv(C.player,M.phase,A,M.callback)}}),T.markedForDestroy?this._engine.afterFlush(()=>{T.destroy()}):S.push(C)}),this._queue=[],S.sort((C,T)=>{const D=C.transition.ast.depCount,I=T.transition.ast.depCount;return 0==D||0==I?D-I:this._engine.driver.containsElement(C.element,T.element)?1:-1})}destroy(_){this.players.forEach(S=>S.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,_)}}class e8{_onRemovalComplete(_,S){this.onRemovalComplete(_,S)}constructor(_,S,C,T){this.bodyNode=_,this.driver=S,this._normalizer=C,this.scheduler=T,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(D,I)=>{}}get queuedPlayers(){const _=[];return this._namespaceList.forEach(S=>{S.players.forEach(C=>{C.queued&&_.push(C)})}),_}createNamespace(_,S){const C=new Zz(_,S,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,S)?this._balanceNamespaceList(C,S):(this.newHostElements.set(S,C),this.collectEnterElement(S)),this._namespaceLookup[_]=C}_balanceNamespaceList(_,S){const C=this._namespaceList,T=this.namespacesByHostElement;if(C.length-1>=0){let I=!1,M=this.driver.getParentElement(S);for(;M;){const A=T.get(M);if(A){const R=C.indexOf(A);C.splice(R+1,0,_),I=!0;break}M=this.driver.getParentElement(M)}I||C.unshift(_)}else C.push(_);return T.set(S,_),_}register(_,S){let C=this._namespaceLookup[_];return C||(C=this.createNamespace(_,S)),C}registerTrigger(_,S,C){let T=this._namespaceLookup[_];T&&T.register(S,C)&&this.totalAnimations++}destroy(_,S){_&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const C=this._fetchNamespace(_);this.namespacesByHostElement.delete(C.hostElement);const T=this._namespaceList.indexOf(C);T>=0&&this._namespaceList.splice(T,1),C.destroy(S),delete this._namespaceLookup[_]}))}_fetchNamespace(_){return this._namespaceLookup[_]}fetchNamespacesByElement(_){const S=new Set,C=this.statesByElement.get(_);if(C)for(let T of C.values())if(T.namespaceId){const D=this._fetchNamespace(T.namespaceId);D&&S.add(D)}return S}trigger(_,S,C,T){if(Oh(S)){const D=this._fetchNamespace(_);if(D)return D.trigger(S,C,T),!0}return!1}insertNode(_,S,C,T){if(!Oh(S))return;const D=S[oi];if(D&&D.setForRemoval){D.setForRemoval=!1,D.setForMove=!0;const I=this.collectedLeaveElements.indexOf(S);I>=0&&this.collectedLeaveElements.splice(I,1)}if(_){const I=this._fetchNamespace(_);I&&I.insertNode(S,C)}T&&this.collectEnterElement(S)}collectEnterElement(_){this.collectedEnterElements.push(_)}markElementAsDisabled(_,S){S?this.disabledNodes.has(_)||(this.disabledNodes.add(_),Uo(_,Rv)):this.disabledNodes.has(_)&&(this.disabledNodes.delete(_),Oc(_,Rv))}removeNode(_,S,C){if(Oh(S)){var T;null===(T=this.scheduler)||void 0===T||T.notify();const D=_?this._fetchNamespace(_):null;D?D.removeNode(S,C):this.markElementAsRemoved(_,S,!1,C);const I=this.namespacesByHostElement.get(S);I&&I.id!==_&&I.removeNode(S,C)}else this._onRemovalComplete(S,C)}markElementAsRemoved(_,S,C,T,D){this.collectedLeaveElements.push(S),S[oi]={namespaceId:_,setForRemoval:T,hasAnimation:C,removedBeforeQueried:!1,previousTriggersValues:D}}listen(_,S,C,T,D){return Oh(S)?this._fetchNamespace(_).listen(S,C,T,D):()=>{}}_buildInstruction(_,S,C,T,D){return _.transition.build(this.driver,_.element,_.fromState.value,_.toState.value,C,T,_.fromState.options,_.toState.options,S,D)}destroyInnerAnimations(_){let S=this.driver.query(_,Eh,!0);S.forEach(C=>this.destroyActiveAnimationsForElement(C)),0!=this.playersByQueriedElement.size&&(S=this.driver.query(_,_v,!0),S.forEach(C=>this.finishActiveQueriedAnimationOnElement(C)))}destroyActiveAnimationsForElement(_){const S=this.playersByElement.get(_);S&&S.forEach(C=>{C.queued?C.markedForDestroy=!0:C.destroy()})}finishActiveQueriedAnimationOnElement(_){const S=this.playersByQueriedElement.get(_);S&&S.forEach(C=>C.finish())}whenRenderingDone(){return new Promise(_=>{if(this.players.length)return ks(this.players).onDone(()=>_());_()})}processLeaveNode(_){var S;const C=_[oi];if(C&&C.setForRemoval){if(_[oi]=PM,C.namespaceId){this.destroyInnerAnimations(_);const T=this._fetchNamespace(C.namespaceId);T&&T.clearElementCache(_)}this._onRemovalComplete(_,C.setForRemoval)}null!==(S=_.classList)&&void 0!==S&&S.contains(Rv)&&this.markElementAsDisabled(_,!1),this.driver.query(_,".ng-animate-disabled",!0).forEach(T=>{this.markElementAsDisabled(T,!1)})}flush(_=-1){let S=[];if(this.newHostElements.size&&(this.newHostElements.forEach((C,T)=>this._balanceNamespaceList(C,T)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let C=0;C<this.collectedEnterElements.length;C++)Uo(this.collectedEnterElements[C],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const C=[];try{S=this._flushAnimations(C,_)}finally{for(let T=0;T<C.length;T++)C[T]()}}else for(let C=0;C<this.collectedLeaveElements.length;C++)this.processLeaveNode(this.collectedLeaveElements[C]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(C=>C()),this._flushFns=[],this._whenQuietFns.length){const C=this._whenQuietFns;this._whenQuietFns=[],S.length?ks(S).onDone(()=>{C.forEach(T=>T())}):C.forEach(T=>T())}}reportError(_){throw function iz(y){return new j(3402,!1)}()}_flushAnimations(_,S){const C=new Rh,T=[],D=new Map,I=[],M=new Map,A=new Map,R=new Map,N=new Set;this.disabledNodes.forEach(Bt=>{N.add(Bt);const Qt=this.driver.query(Bt,".ng-animate-queued",!0);for(let en=0;en<Qt.length;en++)N.add(Qt[en])});const O=this.bodyNode,L=Array.from(this.statesByElement.keys()),$=kM(L,this.collectedEnterElements),Q=new Map;let ae=0;$.forEach((Bt,Qt)=>{const en=vv+ae++;Q.set(Qt,en),Bt.forEach(Sn=>Uo(Sn,en))});const Ce=[],Ee=new Set,Ae=new Set;for(let Bt=0;Bt<this.collectedLeaveElements.length;Bt++){const Qt=this.collectedLeaveElements[Bt],en=Qt[oi];en&&en.setForRemoval&&(Ce.push(Qt),Ee.add(Qt),en.hasAnimation?this.driver.query(Qt,".ng-star-inserted",!0).forEach(Sn=>Ee.add(Sn)):Ae.add(Qt))}const ht=new Map,vt=kM(L,Array.from(Ee));vt.forEach((Bt,Qt)=>{const en=Sh+ae++;ht.set(Qt,en),Bt.forEach(Sn=>Uo(Sn,en))}),_.push(()=>{$.forEach((Bt,Qt)=>{const en=Q.get(Qt);Bt.forEach(Sn=>Oc(Sn,en))}),vt.forEach((Bt,Qt)=>{const en=ht.get(Qt);Bt.forEach(Sn=>Oc(Sn,en))}),Ce.forEach(Bt=>{this.processLeaveNode(Bt)})});const qt=[],Nn=[];for(let Bt=this._namespaceList.length-1;Bt>=0;Bt--)this._namespaceList[Bt].drainQueuedTransitions(S).forEach(en=>{const Sn=en.player,fr=en.element;if(qt.push(Sn),this.collectedEnterElements.length){const Jr=fr[oi];if(Jr&&Jr.setForMove){if(Jr.previousTriggersValues&&Jr.previousTriggersValues.has(en.triggerName)){const Pa=Jr.previousTriggersValues.get(en.triggerName),Bo=this.statesByElement.get(en.element);if(Bo&&Bo.has(en.triggerName)){const Ip=Bo.get(en.triggerName);Ip.value=Pa,Bo.set(en.triggerName,Ip)}}return void Sn.destroy()}}const Bi=!O||!this.driver.containsElement(O,fr),Ao=ht.get(fr),Js=Q.get(fr),ur=this._buildInstruction(en,C,Js,Ao,Bi);if(ur.errors&&ur.errors.length)return void Nn.push(ur);if(Bi)return Sn.onStart(()=>_a(fr,ur.fromStyles)),Sn.onDestroy(()=>Di(fr,ur.toStyles)),void T.push(Sn);if(en.isFallbackTransition)return Sn.onStart(()=>_a(fr,ur.fromStyles)),Sn.onDestroy(()=>Di(fr,ur.toStyles)),void T.push(Sn);const TO=[];ur.timelines.forEach(Jr=>{Jr.stretchStartingKeyframe=!0,this.disabledNodes.has(Jr.element)||TO.push(Jr)}),ur.timelines=TO,C.append(fr,ur.timelines),I.push({instruction:ur,player:Sn,element:fr}),ur.queriedElements.forEach(Jr=>Eo(M,Jr,[]).push(Sn)),ur.preStyleProps.forEach((Jr,Pa)=>{if(Jr.size){let Bo=A.get(Pa);Bo||A.set(Pa,Bo=new Set),Jr.forEach((Ip,L0)=>Bo.add(L0))}}),ur.postStyleProps.forEach((Jr,Pa)=>{let Bo=R.get(Pa);Bo||R.set(Pa,Bo=new Set),Jr.forEach((Ip,L0)=>Bo.add(L0))})});if(Nn.length){const Bt=[];Nn.forEach(Qt=>{Bt.push(function sz(y,_){return new j(3505,!1)}())}),qt.forEach(Qt=>Qt.destroy()),this.reportError(Bt)}const An=new Map,Un=new Map;I.forEach(Bt=>{const Qt=Bt.element;C.has(Qt)&&(Un.set(Qt,Qt),this._beforeAnimationBuild(Bt.player.namespaceId,Bt.instruction,An))}),T.forEach(Bt=>{const Qt=Bt.element;this._getPreviousPlayers(Qt,!1,Bt.namespaceId,Bt.triggerName,null).forEach(Sn=>{Eo(An,Qt,[]).push(Sn),Sn.destroy()})});const Er=Ce.filter(Bt=>FM(Bt,A,R)),so=new Map;OM(so,this.driver,Ae,R,is).forEach(Bt=>{FM(Bt,A,R)&&Er.push(Bt)});const ai=new Map;$.forEach((Bt,Qt)=>{OM(ai,this.driver,new Set(Bt),A,"!")}),Er.forEach(Bt=>{var Qt,en;const Sn=so.get(Bt),fr=ai.get(Bt);so.set(Bt,new Map([...null!==(Qt=null==Sn?void 0:Sn.entries())&&void 0!==Qt?Qt:[],...null!==(en=null==fr?void 0:fr.entries())&&void 0!==en?en:[]]))});const ji=[],bO=[],SO={};I.forEach(Bt=>{const{element:Qt,player:en,instruction:Sn}=Bt;if(C.has(Qt)){if(N.has(Qt))return en.onDestroy(()=>Di(Qt,Sn.toStyles)),en.disabled=!0,en.overrideTotalTime(Sn.totalTime),void T.push(en);let fr=SO;if(Un.size>1){let Ao=Qt;const Js=[];for(;Ao=Ao.parentNode;){const ur=Un.get(Ao);if(ur){fr=ur;break}Js.push(Ao)}Js.forEach(ur=>Un.set(ur,fr))}const Bi=this._buildAnimation(en.namespaceId,Sn,An,D,ai,so);if(en.setRealPlayer(Bi),fr===SO)ji.push(en);else{const Ao=this.playersByElement.get(fr);Ao&&Ao.length&&(en.parentPlayer=ks(Ao)),T.push(en)}}else _a(Qt,Sn.fromStyles),en.onDestroy(()=>Di(Qt,Sn.toStyles)),bO.push(en),N.has(Qt)&&T.push(en)}),bO.forEach(Bt=>{const Qt=D.get(Bt.element);if(Qt&&Qt.length){const en=ks(Qt);Bt.setRealPlayer(en)}}),T.forEach(Bt=>{Bt.parentPlayer?Bt.syncPlayerEvents(Bt.parentPlayer):Bt.destroy()});for(let Bt=0;Bt<Ce.length;Bt++){const Qt=Ce[Bt],en=Qt[oi];if(Oc(Qt,Sh),en&&en.hasAnimation)continue;let Sn=[];if(M.size){let Bi=M.get(Qt);Bi&&Bi.length&&Sn.push(...Bi);let Ao=this.driver.query(Qt,_v,!0);for(let Js=0;Js<Ao.length;Js++){let ur=M.get(Ao[Js]);ur&&ur.length&&Sn.push(...ur)}}const fr=Sn.filter(Bi=>!Bi.destroyed);fr.length?o8(this,Qt,fr):this.processLeaveNode(Qt)}return Ce.length=0,ji.forEach(Bt=>{this.players.push(Bt),Bt.onDone(()=>{Bt.destroy();const Qt=this.players.indexOf(Bt);this.players.splice(Qt,1)}),Bt.play()}),ji}afterFlush(_){this._flushFns.push(_)}afterFlushAnimationsDone(_){this._whenQuietFns.push(_)}_getPreviousPlayers(_,S,C,T,D){let I=[];if(S){const M=this.playersByQueriedElement.get(_);M&&(I=M)}else{const M=this.playersByElement.get(_);if(M){const A=!D||D==Ru;M.forEach(R=>{R.queued||!A&&R.triggerName!=T||I.push(R)})}}return(C||T)&&(I=I.filter(M=>!(C&&C!=M.namespaceId||T&&T!=M.triggerName))),I}_beforeAnimationBuild(_,S,C){const D=S.element,I=S.isRemovalTransition?void 0:_,M=S.isRemovalTransition?void 0:S.triggerName;for(const A of S.timelines){const R=A.element,N=R!==D,O=Eo(C,R,[]);this._getPreviousPlayers(R,N,I,M,S.toState).forEach($=>{const Q=$.getRealPlayer();Q.beforeDestroy&&Q.beforeDestroy(),$.destroy(),O.push($)})}_a(D,S.fromStyles)}_buildAnimation(_,S,C,T,D,I){const M=S.triggerName,A=S.element,R=[],N=new Set,O=new Set,L=S.timelines.map(Q=>{const ae=Q.element;N.add(ae);const Ce=ae[oi];if(Ce&&Ce.removedBeforeQueried)return new Iu(Q.duration,Q.delay);const Ee=ae!==A,Ae=function i8(y){const _=[];return xM(y,_),_}((C.get(ae)||Xz).map(An=>An.getRealPlayer())).filter(An=>!!An.element&&An.element===ae),ht=D.get(ae),vt=I.get(ae),qt=fM(this._normalizer,Q.keyframes,ht,vt),Nn=this._buildPlayer(Q,qt,Ae);if(Q.subTimeline&&T&&O.add(ae),Ee){const An=new Ov(_,M,ae);An.setRealPlayer(Nn),R.push(An)}return Nn});R.forEach(Q=>{Eo(this.playersByQueriedElement,Q.element,[]).push(Q),Q.onDone(()=>function t8(y,_,S){let C=y.get(_);if(C){if(C.length){const T=C.indexOf(S);C.splice(T,1)}0==C.length&&y.delete(_)}return C}(this.playersByQueriedElement,Q.element,Q))}),N.forEach(Q=>Uo(Q,vM));const $=ks(L);return $.onDestroy(()=>{N.forEach(Q=>Oc(Q,vM)),Di(A,S.toStyles)}),O.forEach(Q=>{Eo(T,Q,[]).push($)}),$}_buildPlayer(_,S,C){return S.length>0?this.driver.animate(_.element,S,_.duration,_.delay,_.easing,C):new Iu(_.duration,_.delay)}}class Ov{constructor(_,S,C){this.namespaceId=_,this.triggerName=S,this.element=C,this._player=new Iu,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(_){this._containsRealPlayer||(this._player=_,this._queuedCallbacks.forEach((S,C)=>{S.forEach(T=>fv(_,C,void 0,T))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(_.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(_){this.totalTime=_}syncPlayerEvents(_){const S=this._player;S.triggerCallback&&_.onStart(()=>S.triggerCallback("start")),_.onDone(()=>this.finish()),_.onDestroy(()=>this.destroy())}_queueEvent(_,S){Eo(this._queuedCallbacks,_,[]).push(S)}onDone(_){this.queued&&this._queueEvent("done",_),this._player.onDone(_)}onStart(_){this.queued&&this._queueEvent("start",_),this._player.onStart(_)}onDestroy(_){this.queued&&this._queueEvent("destroy",_),this._player.onDestroy(_)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(_){this.queued||this._player.setPosition(_)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(_){const S=this._player;S.triggerCallback&&S.triggerCallback(_)}}function Oh(y){return y&&1===y.nodeType}function NM(y,_){const S=y.style.display;return y.style.display=null!=_?_:"none",S}function OM(y,_,S,C,T){const D=[];S.forEach(A=>D.push(NM(A)));const I=[];C.forEach((A,R)=>{const N=new Map;A.forEach(O=>{const L=_.computeStyle(R,O,T);N.set(O,L),(!L||0==L.length)&&(R[oi]=Yz,I.push(R))}),y.set(R,N)});let M=0;return S.forEach(A=>NM(A,D[M++])),I}function kM(y,_){const S=new Map;if(y.forEach(M=>S.set(M,[])),0==_.length)return S;const T=new Set(_),D=new Map;function I(M){if(!M)return 1;let A=D.get(M);if(A)return A;const R=M.parentNode;return A=S.has(R)?R:T.has(R)?1:I(R),D.set(M,A),A}return _.forEach(M=>{const A=I(M);1!==A&&S.get(A).push(M)}),S}function Uo(y,_){var S;null===(S=y.classList)||void 0===S||S.add(_)}function Oc(y,_){var S;null===(S=y.classList)||void 0===S||S.remove(_)}function o8(y,_,S){ks(S).onDone(()=>y.processLeaveNode(_))}function xM(y,_){for(let S=0;S<y.length;S++){const C=y[S];C instanceof cM?xM(C.players,_):_.push(C)}}function FM(y,_,S){const C=S.get(y);if(!C)return!1;let T=_.get(y);return T?C.forEach(D=>T.add(D)):_.set(y,C),S.delete(y),!0}class Pu{constructor(_,S,C,T){this._driver=S,this._normalizer=C,this._triggerCache={},this.onRemovalComplete=(D,I)=>{},this._transitionEngine=new e8(_.body,S,C,T),this._timelineEngine=new Wz(_.body,S,C),this._transitionEngine.onRemovalComplete=(D,I)=>this.onRemovalComplete(D,I)}registerTrigger(_,S,C,T,D){const I=_+"-"+T;let M=this._triggerCache[I];if(!M){const A=[],N=Tv(this._driver,D,A,[]);if(A.length)throw function J4(y,_){return new j(3404,!1)}();M=function $z(y,_,S){return new Hz(y,_,S)}(T,N,this._normalizer),this._triggerCache[I]=M}this._transitionEngine.registerTrigger(S,T,M)}register(_,S){this._transitionEngine.register(_,S)}destroy(_,S){this._transitionEngine.destroy(_,S)}onInsert(_,S,C,T){this._transitionEngine.insertNode(_,S,C,T)}onRemove(_,S,C){this._transitionEngine.removeNode(_,S,C)}disableAnimations(_,S){this._transitionEngine.markElementAsDisabled(_,S)}process(_,S,C,T){if("@"==C.charAt(0)){const[D,I]=hM(C);this._timelineEngine.command(D,S,I,T)}else this._transitionEngine.trigger(_,S,C,T)}listen(_,S,C,T,D){if("@"==C.charAt(0)){const[I,M]=hM(C);return this._timelineEngine.listen(I,S,M,D)}return this._transitionEngine.listen(_,S,C,T,D)}flush(_=-1){this._transitionEngine.flush(_)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(_){this._transitionEngine.afterFlushAnimationsDone(_)}}class kc{constructor(_,S,C){this._element=_,this._startStyles=S,this._endStyles=C,this._state=0;let T=kc.initialStylesByElement.get(_);T||kc.initialStylesByElement.set(_,T=new Map),this._initialStyles=T}start(){this._state<1&&(this._startStyles&&Di(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Di(this._element,this._initialStyles),this._endStyles&&(Di(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(kc.initialStylesByElement.delete(this._element),this._startStyles&&(_a(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(_a(this._element,this._endStyles),this._endStyles=null),Di(this._element,this._initialStyles),this._state=3)}}function kv(y){let _=null;return y.forEach((S,C)=>{(function c8(y){return"display"===y||"position"===y})(C)&&(_=_||new Map,_.set(C,S))}),_}kc.initialStylesByElement=new WeakMap;class LM{constructor(_,S,C,T){this.element=_,this.keyframes=S,this.options=C,this._specialStyles=T,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=C.duration,this._delay=C.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(_=>_()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const _=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,_,this.options),this._finalKeyframe=_.length?_[_.length-1]:new Map;const S=()=>this._onFinish();this.domPlayer.addEventListener("finish",S),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",S)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(_){const S=[];return _.forEach(C=>{S.push(Object.fromEntries(C))}),S}_triggerWebAnimation(_,S,C){return _.animate(this._convertKeyframesToObject(S),C)}onStart(_){this._originalOnStartFns.push(_),this._onStartFns.push(_)}onDone(_){this._originalOnDoneFns.push(_),this._onDoneFns.push(_)}onDestroy(_){this._onDestroyFns.push(_)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(_=>_()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(_=>_()),this._onDestroyFns=[])}setPosition(_){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=_*this.time}getPosition(){var _;return+(null!==(_=this.domPlayer.currentTime)&&void 0!==_?_:0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const _=new Map;this.hasStarted()&&this._finalKeyframe.forEach((C,T)=>{"offset"!==T&&_.set(T,this._finished?C:Sv(this.element,T))}),this.currentSnapshot=_}triggerCallback(_){const S="start"===_?this._onStartFns:this._onDoneFns;S.forEach(C=>C()),S.length=0}}class UM{validateStyleProperty(_){return!0}validateAnimatableStyleProperty(_){return!0}matchesElement(_,S){return!1}containsElement(_,S){return gM(_,S)}getParentElement(_){return gv(_)}query(_,S,C){return mM(_,S,C)}computeStyle(_,S,C){return Sv(_,S)}animate(_,S,C,T,D,I=[]){const A={duration:C,delay:T,fill:0==T?"both":"forwards"};D&&(A.easing=D);const R=new Map,N=I.filter($=>$ instanceof LM);(function _z(y,_){return 0===y||0===_})(C,T)&&N.forEach($=>{$.currentSnapshot.forEach((Q,ae)=>R.set(ae,Q))});let O=function mz(y){return y.length?y[0]instanceof Map?y:y.map(_=>new Map(Object.entries(_))):[]}(S).map($=>new Map($));O=function Cz(y,_,S){if(S.size&&_.length){let C=_[0],T=[];if(S.forEach((D,I)=>{C.has(I)||T.push(I),C.set(I,D)}),T.length)for(let D=1;D<_.length;D++){let I=_[D];T.forEach(M=>I.set(M,Sv(y,M)))}}return _}(_,O,R);const L=function a8(y,_){let S=null,C=null;return Array.isArray(_)&&_.length?(S=kv(_[0]),_.length>1&&(C=kv(_[_.length-1]))):_ instanceof Map&&(S=kv(_)),S||C?new kc(y,S,C):null}(_,O);return new LM(_,O,A,L)}}const VM="@.disabled";class jM{constructor(_,S,C,T){this.namespaceId=_,this.delegate=S,this.engine=C,this._onDestroy=T,this.\u0275type=0}get data(){return this.delegate.data}destroyNode(_){var S,C;null===(S=(C=this.delegate).destroyNode)||void 0===S||S.call(C,_)}destroy(){var _;this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),null===(_=this._onDestroy)||void 0===_||_.call(this)}createElement(_,S){return this.delegate.createElement(_,S)}createComment(_){return this.delegate.createComment(_)}createText(_){return this.delegate.createText(_)}appendChild(_,S){this.delegate.appendChild(_,S),this.engine.onInsert(this.namespaceId,S,_,!1)}insertBefore(_,S,C,T=!0){this.delegate.insertBefore(_,S,C),this.engine.onInsert(this.namespaceId,S,_,T)}removeChild(_,S,C){this.engine.onRemove(this.namespaceId,S,this.delegate)}selectRootElement(_,S){return this.delegate.selectRootElement(_,S)}parentNode(_){return this.delegate.parentNode(_)}nextSibling(_){return this.delegate.nextSibling(_)}setAttribute(_,S,C,T){this.delegate.setAttribute(_,S,C,T)}removeAttribute(_,S,C){this.delegate.removeAttribute(_,S,C)}addClass(_,S){this.delegate.addClass(_,S)}removeClass(_,S){this.delegate.removeClass(_,S)}setStyle(_,S,C,T){this.delegate.setStyle(_,S,C,T)}removeStyle(_,S,C){this.delegate.removeStyle(_,S,C)}setProperty(_,S,C){"@"==S.charAt(0)&&S==VM?this.disableAnimations(_,!!C):this.delegate.setProperty(_,S,C)}setValue(_,S){this.delegate.setValue(_,S)}listen(_,S,C){return this.delegate.listen(_,S,C)}disableAnimations(_,S){this.engine.disableAnimations(_,S)}}class l8 extends jM{constructor(_,S,C,T,D){super(S,C,T,D),this.factory=_,this.namespaceId=S}setProperty(_,S,C){"@"==S.charAt(0)?"."==S.charAt(1)&&S==VM?this.disableAnimations(_,C=void 0===C||!!C):this.engine.process(this.namespaceId,_,S.slice(1),C):this.delegate.setProperty(_,S,C)}listen(_,S,C){if("@"==S.charAt(0)){const T=function u8(y){switch(y){case"body":return document.body;case"document":return document;case"window":return window;default:return y}}(_);let D=S.slice(1),I="";return"@"!=D.charAt(0)&&([D,I]=function d8(y){const _=y.indexOf(".");return[y.substring(0,_),y.slice(_+1)]}(D)),this.engine.listen(this.namespaceId,T,D,I,M=>{this.factory.scheduleListenerCallback(M._data||-1,C,M)})}return this.delegate.listen(_,S,C)}}class f8{constructor(_,S,C){this.delegate=_,this.engine=S,this._zone=C,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,S.onRemovalComplete=(T,D)=>{const I=null==D?void 0:D.parentNode(T);I&&D.removeChild(I,T)}}createRenderer(_,S){var C;const D=this.delegate.createRenderer(_,S);if(!_||null==S||null===(C=S.data)||void 0===C||!C.animation){const N=this._rendererCache;let O=N.get(D);return O||(O=new jM("",D,this.engine,()=>N.delete(D)),N.set(D,O)),O}const I=S.id,M=S.id+"-"+this._currentId;this._currentId++,this.engine.register(M,_);const A=N=>{Array.isArray(N)?N.forEach(A):this.engine.registerTrigger(I,M,_,N.name,N)};return S.data.animation.forEach(A),new l8(this,M,D,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(_,S,C){if(_>=0&&_<this._microtaskId)return void this._zone.run(()=>S(C));const T=this._animationCallbacksBuffer;0==T.length&&queueMicrotask(()=>{this._zone.run(()=>{T.forEach(D=>{const[I,M]=D;I(M)}),this._animationCallbacksBuffer=[]})}),T.push([S,C])}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}let h8=(()=>{var y;class _ extends Pu{constructor(C,T,D){super(C,T,D,at(Sf,{optional:!0}))}ngOnDestroy(){this.flush()}}return(y=_).\u0275fac=function(C){return new(C||y)($t(go),$t(bh),$t(yv))},y.\u0275prov=Ot({token:y,factory:y.\u0275fac}),_})();const BM=[{provide:yv,useFactory:function p8(){return new wM}},{provide:Pu,useClass:h8},{provide:Sm,useFactory:function g8(y,_,S){return new f8(y,_,S)},deps:[cv,Pu,kn]}],xv=[{provide:bh,useFactory:()=>new UM},{provide:Mw,useValue:"BrowserAnimations"},...BM],$M=[{provide:bh,useClass:mv},{provide:Mw,useValue:"NoopAnimations"},...BM];let m8=(()=>{var y;class _{static withConfig(C){return{ngModule:_,providers:C.disableAnimations?$M:xv}}}return(y=_).\u0275fac=function(C){return new(C||y)},y.\u0275mod=qo({type:y}),y.\u0275inj=Po({providers:xv,imports:[rM]}),_})();function Ii(y,_){var S={};for(var C in y)Object.prototype.hasOwnProperty.call(y,C)&&_.indexOf(C)<0&&(S[C]=y[C]);if(null!=y&&"function"==typeof Object.getOwnPropertySymbols){var T=0;for(C=Object.getOwnPropertySymbols(y);T<C.length;T++)_.indexOf(C[T])<0&&Object.prototype.propertyIsEnumerable.call(y,C[T])&&(S[C[T]]=y[C[T]])}return S}function Dn(y){return this instanceof Dn?(this.v=y,this):new Dn(y)}function Mi(y,_,S){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var T,C=S.apply(y,_||[]),D=[];return T=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),M("next"),M("throw"),M("return",function I($){return function(Q){return Promise.resolve(Q).then($,O)}}),T[Symbol.asyncIterator]=function(){return this},T;function M($,Q){C[$]&&(T[$]=function(ae){return new Promise(function(Ce,Ee){D.push([$,ae,Ce,Ee])>1||A($,ae)})},Q&&(T[$]=Q(T[$])))}function A($,Q){try{!function R($){$.value instanceof Dn?Promise.resolve($.value.v).then(N,O):L(D[0][2],$)}(C[$](Q))}catch(ae){L(D[0][3],ae)}}function N($){A("next",$)}function O($){A("throw",$)}function L($,Q){$(Q),D.shift(),D.length&&A(D[0][0],D[0][1])}}function Nu(y){var _,S;return _={},C("next"),C("throw",function(T){throw T}),C("return"),_[Symbol.iterator]=function(){return this},_;function C(T,D){_[T]=y[T]?function(I){return(S=!S)?{value:Dn(y[T](I)),done:!1}:D?D(I):I}:D}}function Ai(y){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var S,_=y[Symbol.asyncIterator];return _?_.call(y):(y=function Vv(y){var _="function"==typeof Symbol&&Symbol.iterator,S=_&&y[_],C=0;if(S)return S.call(y);if(y&&"number"==typeof y.length)return{next:function(){return y&&C>=y.length&&(y=void 0),{value:y&&y[C++],done:!y}}};throw new TypeError(_?"Object is not iterable.":"Symbol.iterator is not defined.")}(y),S={},C("next"),C("throw"),C("return"),S[Symbol.asyncIterator]=function(){return this},S);function C(D){S[D]=y[D]&&function(I){return new Promise(function(M,A){!function T(D,I,M,A){Promise.resolve(A).then(function(R){D({value:R,done:M})},I)}(M,A,(I=y[D](I)).done,I.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const qM=y=>y&&"number"==typeof y.length&&"function"!=typeof y;function WM(y){return re(null==y?void 0:y.then)}function GM(y){return re(y[zi])}function KM(y){return Symbol.asyncIterator&&re(null==y?void 0:y[Symbol.asyncIterator])}function JM(y){return new TypeError("You provided ".concat(null!==y&&"object"==typeof y?"an invalid object":"'".concat(y,"'")," where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable."))}const QM=function $8(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function XM(y){return re(null==y?void 0:y[QM])}function YM(y){return Mi(this,arguments,function*(){const S=y.getReader();try{for(;;){const{value:C,done:T}=yield Dn(S.read());if(T)return yield Dn(void 0);yield yield Dn(C)}}finally{S.releaseLock()}})}function ZM(y){return re(null==y?void 0:y.getReader)}function Ri(y){if(y instanceof Qn)return y;if(null!=y){if(GM(y))return function H8(y){return new Qn(_=>{const S=y[zi]();if(re(S.subscribe))return S.subscribe(_);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(y);if(qM(y))return function z8(y){return new Qn(_=>{for(let S=0;S<y.length&&!_.closed;S++)_.next(y[S]);_.complete()})}(y);if(WM(y))return function q8(y){return new Qn(_=>{y.then(S=>{_.closed||(_.next(S),_.complete())},S=>_.error(S)).then(null,me)})}(y);if(KM(y))return eA(y);if(XM(y))return function W8(y){return new Qn(_=>{for(const S of y)if(_.next(S),_.closed)return;_.complete()})}(y);if(ZM(y))return function G8(y){return eA(YM(y))}(y)}throw JM(y)}function eA(y){return new Qn(_=>{(function K8(y,_){var S,C,T,D;return function HM(y,_,S,C){return new(S||(S=Promise))(function(D,I){function M(N){try{R(C.next(N))}catch(O){I(O)}}function A(N){try{R(C.throw(N))}catch(O){I(O)}}function R(N){N.done?D(N.value):function T(D){return D instanceof S?D:new S(function(I){I(D)})}(N.value).then(M,A)}R((C=C.apply(y,_||[])).next())})}(this,void 0,void 0,function*(){try{for(S=Ai(y);!(C=yield S.next()).done;)if(_.next(C.value),_.closed)return}catch(I){T={error:I}}finally{try{C&&!C.done&&(D=S.return)&&(yield D.call(S))}finally{if(T)throw T.error}}_.complete()})})(y,_).catch(S=>_.error(S))})}function as(y,_,S,C=0,T=!1){const D=_.schedule(function(){S(),T?y.add(this.schedule(null,C)):this.unsubscribe()},C);if(y.add(D),!T)return D}function tA(y,_=0){return he((S,C)=>{S.subscribe(Te(C,T=>as(C,y,()=>C.next(T),_),()=>as(C,y,()=>C.complete(),_),T=>as(C,y,()=>C.error(T),_)))})}function nA(y,_=0){return he((S,C)=>{C.add(y.schedule(()=>S.subscribe(C),_))})}function rA(y,_){if(!y)throw new Error("Iterable cannot be null");return new Qn(S=>{as(S,_,()=>{const C=y[Symbol.asyncIterator]();as(S,_,()=>{C.next().then(T=>{T.done?S.complete():S.next(T.value)})},0,!0)})})}function Nr(y,_){return _?function eq(y,_){if(null!=y){if(GM(y))return function J8(y,_){return Ri(y).pipe(nA(_),tA(_))}(y,_);if(qM(y))return function X8(y,_){return new Qn(S=>{let C=0;return _.schedule(function(){C===y.length?S.complete():(S.next(y[C++]),S.closed||this.schedule())})})}(y,_);if(WM(y))return function Q8(y,_){return Ri(y).pipe(nA(_),tA(_))}(y,_);if(KM(y))return rA(y,_);if(XM(y))return function Y8(y,_){return new Qn(S=>{let C;return as(S,_,()=>{C=y[QM](),as(S,_,()=>{let T,D;try{({value:T,done:D}=C.next())}catch(I){return void S.error(I)}D?S.complete():S.next(T)},0,!0)}),()=>re(null==C?void 0:C.return)&&C.return()})}(y,_);if(ZM(y))return function Z8(y,_){return rA(YM(y),_)}(y,_)}throw JM(y)}(y,_):Ri(y)}function Bv(y){return y[y.length-1]}function oA(y){return re(Bv(y))?y.pop():void 0}function xh(y){return function tq(y){return y&&re(y.schedule)}(Bv(y))?y.pop():void 0}function sn(...y){return Nr(y,xh(y))}const{isArray:nq}=Array,{getPrototypeOf:rq,prototype:oq,keys:iq}=Object;function iA(y){if(1===y.length){const _=y[0];if(nq(_))return{args:_,keys:null};if(function sq(y){return y&&"object"==typeof y&&rq(y)===oq}(_)){const S=iq(_);return{args:S.map(C=>_[C]),keys:S}}}return{args:y,keys:null}}const{isArray:aq}=Array;function sA(y){return k(_=>function cq(y,_){return aq(_)?y(..._):y(_)}(y,_))}function aA(y,_){return y.reduce((S,C,T)=>(S[C]=_[T],S),{})}function $v(...y){const _=xh(y),S=oA(y),{args:C,keys:T}=iA(y);if(0===C.length)return Nr([],_);const D=new Qn(function lq(y,_,S=ao){return C=>{cA(_,()=>{const{length:T}=y,D=new Array(T);let I=T,M=T;for(let A=0;A<T;A++)cA(_,()=>{const R=Nr(y[A],_);let N=!1;R.subscribe(Te(C,O=>{D[A]=O,N||(N=!0,M--),M||C.next(S(D.slice()))},()=>{--I||C.complete()}))},C)},C)}}(C,_,T?I=>aA(T,I):ao));return S?D.pipe(sA(S)):D}function cA(y,_,S){y?as(S,y,_):_()}const Fh=We(y=>function(){y(this),this.name="EmptyError",this.message="no elements in sequence"});function zr(y,_,S=1/0){return re(_)?zr((C,T)=>k((D,I)=>_(C,D,T,I))(Ri(y(C,T))),S):("number"==typeof _&&(S=_),he((C,T)=>function uq(y,_,S,C,T,D,I,M){const A=[];let R=0,N=0,O=!1;const L=()=>{O&&!A.length&&!R&&_.complete()},$=ae=>R<C?Q(ae):A.push(ae),Q=ae=>{D&&_.next(ae),R++;let Ce=!1;Ri(S(ae,N++)).subscribe(Te(_,Ee=>{null==T||T(Ee),D?$(Ee):_.next(Ee)},()=>{Ce=!0},void 0,()=>{if(Ce)try{for(R--;A.length&&R<C;){const Ee=A.shift();I?as(_,I,()=>Q(Ee)):Q(Ee)}L()}catch(Ee){_.error(Ee)}}))};return y.subscribe(Te(_,$,()=>{O=!0,L()})),()=>{null==M||M()}}(C,T,y,S)))}function Ou(y=1/0){return zr(ao,y)}function Hv(...y){return function dq(){return Ou(1)}()(Nr(y,xh(y)))}function lA(y){return new Qn(_=>{Ri(y()).subscribe(_)})}function Lh(y,_){const S=re(y)?y:()=>y,C=T=>T.error(S());return new Qn(_?T=>_.schedule(C,0,T):C)}const Pi=new Qn(y=>y.complete());function zv(){return he((y,_)=>{let S=null;y._refCount++;const C=Te(_,void 0,void 0,void 0,()=>{if(!y||y._refCount<=0||0<--y._refCount)return void(S=null);const T=y._connection,D=S;S=null,T&&(!D||T===D)&&T.unsubscribe(),_.unsubscribe()});y.subscribe(C),C.closed||(S=y.connect())})}class uA extends Qn{constructor(_,S){super(),this.source=_,this.subjectFactory=S,this._subject=null,this._refCount=0,this._connection=null,ce(_)&&(this.lift=_.lift)}_subscribe(_){return this.getSubject().subscribe(_)}getSubject(){const _=this._subject;return(!_||_.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:_}=this;this._subject=this._connection=null,null==_||_.unsubscribe()}connect(){let _=this._connection;if(!_){_=this._connection=new Ze;const S=this.getSubject();_.add(this.source.subscribe(Te(S,void 0,()=>{this._teardown(),S.complete()},C=>{this._teardown(),S.error(C)},()=>this._teardown()))),_.closed&&(this._connection=null,_=Ze.EMPTY)}return _}refCount(){return zv()(this)}}function ii(y,_){return he((S,C)=>{let T=null,D=0,I=!1;const M=()=>I&&!T&&C.complete();S.subscribe(Te(C,A=>{null==T||T.unsubscribe();let R=0;const N=D++;Ri(y(A,N)).subscribe(T=Te(C,O=>C.next(_?_(A,O,N,R++):O),()=>{T=null,M()}))},()=>{I=!0,M()}))})}function xc(y){return y<=0?()=>Pi:he((_,S)=>{let C=0;_.subscribe(Te(S,T=>{++C<=y&&(S.next(T),y<=C&&S.complete())}))})}function cs(y,_){return he((S,C)=>{let T=0;S.subscribe(Te(C,D=>y.call(_,D,T++)&&C.next(D)))})}function Uh(y){return he((_,S)=>{let C=!1;_.subscribe(Te(S,T=>{C=!0,S.next(T)},()=>{C||S.next(y),S.complete()}))})}function dA(y=pq){return he((_,S)=>{let C=!1;_.subscribe(Te(S,T=>{C=!0,S.next(T)},()=>C?S.complete():S.error(y())))})}function pq(){return new Fh}function wa(y,_){const S=arguments.length>=2;return C=>C.pipe(y?cs((T,D)=>y(T,D,C)):ao,xc(1),S?Uh(_):dA(()=>new Fh))}function Fc(y,_){return re(_)?zr(y,_,1):zr(y,1)}function oo(y,_,S){const C=re(y)||_||S?{next:y,error:_,complete:S}:y;return C?he((T,D)=>{var I;null===(I=C.subscribe)||void 0===I||I.call(C);let M=!0;T.subscribe(Te(D,A=>{var R;null===(R=C.next)||void 0===R||R.call(C,A),D.next(A)},()=>{var A;M=!1,null===(A=C.complete)||void 0===A||A.call(C),D.complete()},A=>{var R;M=!1,null===(R=C.error)||void 0===R||R.call(C,A),D.error(A)},()=>{var A,R;M&&(null===(A=C.unsubscribe)||void 0===A||A.call(C)),null===(R=C.finalize)||void 0===R||R.call(C)}))}):ao}function Lc(y){return he((_,S)=>{let D,C=null,T=!1;C=_.subscribe(Te(S,void 0,void 0,I=>{D=Ri(y(I,Lc(y)(_))),C?(C.unsubscribe(),C=null,D.subscribe(S)):T=!0})),T&&(C.unsubscribe(),C=null,D.subscribe(S))})}function qv(y){return y<=0?()=>Pi:he((_,S)=>{let C=[];_.subscribe(Te(S,T=>{C.push(T),y<C.length&&C.shift()},()=>{for(const T of C)S.next(T);S.complete()},void 0,()=>{C=null}))})}function ku(y){return he((_,S)=>{try{_.subscribe(S)}finally{S.add(y)}})}function xu(y){return he((_,S)=>{Ri(y).subscribe(Te(S,()=>S.complete(),ue)),!S.closed&&_.subscribe(S)})}const pn="primary",Fu=Symbol("RouteTitle");class _q{constructor(_){this.params=_||{}}has(_){return Object.prototype.hasOwnProperty.call(this.params,_)}get(_){if(this.has(_)){const S=this.params[_];return Array.isArray(S)?S[0]:S}return null}getAll(_){if(this.has(_)){const S=this.params[_];return Array.isArray(S)?S:[S]}return[]}get keys(){return Object.keys(this.params)}}function Uc(y){return new _q(y)}function Cq(y,_,S){const C=S.path.split("/");if(C.length>y.length||"full"===S.pathMatch&&(_.hasChildren()||C.length<y.length))return null;const T={};for(let D=0;D<C.length;D++){const I=C[D],M=y[D];if(I.startsWith(":"))T[I.substring(1)]=M;else if(I!==M.path)return null}return{consumed:y.slice(0,C.length),posParams:T}}function Ni(y,_){const S=y?Wv(y):void 0,C=_?Wv(_):void 0;if(!S||!C||S.length!=C.length)return!1;let T;for(let D=0;D<S.length;D++)if(T=S[D],!fA(y[T],_[T]))return!1;return!0}function Wv(y){return[...Object.keys(y),...Object.getOwnPropertySymbols(y)]}function fA(y,_){if(Array.isArray(y)&&Array.isArray(_)){if(y.length!==_.length)return!1;const S=[...y].sort(),C=[..._].sort();return S.every((T,D)=>C[D]===T)}return y===_}function hA(y){return y.length>0?y[y.length-1]:null}function xs(y){return function y8(y){return!!y&&(y instanceof Qn||re(y.lift)&&re(y.subscribe))}(y)?y:gu(y)?Nr(Promise.resolve(y)):sn(y)}const bq={exact:function mA(y,_,S){if(!ba(y.segments,_.segments)||!Vh(y.segments,_.segments,S)||y.numberOfChildren!==_.numberOfChildren)return!1;for(const C in _.children)if(!y.children[C]||!mA(y.children[C],_.children[C],S))return!1;return!0},subset:yA},pA={exact:function Sq(y,_){return Ni(y,_)},subset:function Tq(y,_){return Object.keys(_).length<=Object.keys(y).length&&Object.keys(_).every(S=>fA(y[S],_[S]))},ignored:()=>!0};function gA(y,_,S){return bq[S.paths](y.root,_.root,S.matrixParams)&&pA[S.queryParams](y.queryParams,_.queryParams)&&!("exact"===S.fragment&&y.fragment!==_.fragment)}function yA(y,_,S){return vA(y,_,_.segments,S)}function vA(y,_,S,C){if(y.segments.length>S.length){const T=y.segments.slice(0,S.length);return!(!ba(T,S)||_.hasChildren()||!Vh(T,S,C))}if(y.segments.length===S.length){if(!ba(y.segments,S)||!Vh(y.segments,S,C))return!1;for(const T in _.children)if(!y.children[T]||!yA(y.children[T],_.children[T],C))return!1;return!0}{const T=S.slice(0,y.segments.length),D=S.slice(y.segments.length);return!!(ba(y.segments,T)&&Vh(y.segments,T,C)&&y.children[pn])&&vA(y.children[pn],_,D,C)}}function Vh(y,_,S){return _.every((C,T)=>pA[S](y[T].parameters,C.parameters))}class Vc{constructor(_=new Wn([],{}),S={},C=null){this.root=_,this.queryParams=S,this.fragment=C}get queryParamMap(){var _;return null!==(_=this._queryParamMap)&&void 0!==_||(this._queryParamMap=Uc(this.queryParams)),this._queryParamMap}toString(){return Iq.serialize(this)}}class Wn{constructor(_,S){this.segments=_,this.children=S,this.parent=null,Object.values(S).forEach(C=>C.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return jh(this)}}class Lu{constructor(_,S){this.path=_,this.parameters=S}get parameterMap(){var _;return null!==(_=this._parameterMap)&&void 0!==_||(this._parameterMap=Uc(this.parameters)),this._parameterMap}toString(){return wA(this)}}function ba(y,_){return y.length===_.length&&y.every((S,C)=>S.path===_[C].path)}let jc=(()=>{var y;class _{}return(y=_).\u0275fac=function(C){return new(C||y)},y.\u0275prov=Ot({token:y,factory:()=>new Gv,providedIn:"root"}),_})();class Gv{parse(_){const S=new Uq(_);return new Vc(S.parseRootSegment(),S.parseQueryParams(),S.parseFragment())}serialize(_){const S="/".concat(Uu(_.root,!0)),C=function Rq(y){const _=Object.entries(y).map(([S,C])=>Array.isArray(C)?C.map(T=>"".concat(Bh(S),"=").concat(Bh(T))).join("&"):"".concat(Bh(S),"=").concat(Bh(C))).filter(S=>S);return _.length?"?".concat(_.join("&")):""}(_.queryParams),T="string"==typeof _.fragment?"#".concat(function Mq(y){return encodeURI(y)}(_.fragment)):"";return"".concat(S).concat(C).concat(T)}}const Iq=new Gv;function jh(y){return y.segments.map(_=>wA(_)).join("/")}function Uu(y,_){if(!y.hasChildren())return jh(y);if(_){const S=y.children[pn]?Uu(y.children[pn],!1):"",C=[];return Object.entries(y.children).forEach(([T,D])=>{T!==pn&&C.push("".concat(T,":").concat(Uu(D,!1)))}),C.length>0?"".concat(S,"(").concat(C.join("//"),")"):S}{const S=function Dq(y,_){let S=[];return Object.entries(y.children).forEach(([C,T])=>{C===pn&&(S=S.concat(_(T,C)))}),Object.entries(y.children).forEach(([C,T])=>{C!==pn&&(S=S.concat(_(T,C)))}),S}(y,(C,T)=>T===pn?[Uu(y.children[pn],!1)]:["".concat(T,":").concat(Uu(C,!1))]);return 1===Object.keys(y.children).length&&null!=y.children[pn]?"".concat(jh(y),"/").concat(S[0]):"".concat(jh(y),"/(").concat(S.join("//"),")")}}function _A(y){return encodeURIComponent(y).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Bh(y){return _A(y).replace(/%3B/gi,";")}function Kv(y){return _A(y).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function $h(y){return decodeURIComponent(y)}function CA(y){return $h(y.replace(/\+/g,"%20"))}function wA(y){return"".concat(Kv(y.path)).concat(function Aq(y){return Object.entries(y).map(([_,S])=>";".concat(Kv(_),"=").concat(Kv(S))).join("")}(y.parameters))}const Pq=/^[^\/()?;#]+/;function Jv(y){const _=y.match(Pq);return _?_[0]:""}const Nq=/^[^\/()?;=#]+/,kq=/^[^=?&#]+/,Fq=/^[^&#]+/;class Uq{constructor(_){this.url=_,this.remaining=_}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Wn([],{}):new Wn([],this.parseChildren())}parseQueryParams(){const _={};if(this.consumeOptional("?"))do{this.parseQueryParam(_)}while(this.consumeOptional("&"));return _}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const _=[];for(this.peekStartsWith("(")||_.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),_.push(this.parseSegment());let S={};this.peekStartsWith("/(")&&(this.capture("/"),S=this.parseParens(!0));let C={};return this.peekStartsWith("(")&&(C=this.parseParens(!1)),(_.length>0||Object.keys(S).length>0)&&(C[pn]=new Wn(_,S)),C}parseSegment(){const _=Jv(this.remaining);if(""===_&&this.peekStartsWith(";"))throw new j(4009,!1);return this.capture(_),new Lu($h(_),this.parseMatrixParams())}parseMatrixParams(){const _={};for(;this.consumeOptional(";");)this.parseParam(_);return _}parseParam(_){const S=function Oq(y){const _=y.match(Nq);return _?_[0]:""}(this.remaining);if(!S)return;this.capture(S);let C="";if(this.consumeOptional("=")){const T=Jv(this.remaining);T&&(C=T,this.capture(C))}_[$h(S)]=$h(C)}parseQueryParam(_){const S=function xq(y){const _=y.match(kq);return _?_[0]:""}(this.remaining);if(!S)return;this.capture(S);let C="";if(this.consumeOptional("=")){const I=function Lq(y){const _=y.match(Fq);return _?_[0]:""}(this.remaining);I&&(C=I,this.capture(C))}const T=CA(S),D=CA(C);if(_.hasOwnProperty(T)){let I=_[T];Array.isArray(I)||(I=[I],_[T]=I),I.push(D)}else _[T]=D}parseParens(_){const S={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const C=Jv(this.remaining),T=this.remaining[C.length];if("/"!==T&&")"!==T&&";"!==T)throw new j(4010,!1);let D;C.indexOf(":")>-1?(D=C.slice(0,C.indexOf(":")),this.capture(D),this.capture(":")):_&&(D=pn);const I=this.parseChildren();S[D]=1===Object.keys(I).length?I[pn]:new Wn([],I),this.consumeOptional("//")}return S}peekStartsWith(_){return this.remaining.startsWith(_)}consumeOptional(_){return!!this.peekStartsWith(_)&&(this.remaining=this.remaining.substring(_.length),!0)}capture(_){if(!this.consumeOptional(_))throw new j(4011,!1)}}function bA(y){return y.segments.length>0?new Wn([],{[pn]:y}):y}function SA(y){const _={};for(const[C,T]of Object.entries(y.children)){const D=SA(T);if(C===pn&&0===D.segments.length&&D.hasChildren())for(const[I,M]of Object.entries(D.children))_[I]=M;else(D.segments.length>0||D.hasChildren())&&(_[C]=D)}return function Vq(y){if(1===y.numberOfChildren&&y.children[pn]){const _=y.children[pn];return new Wn(y.segments.concat(_.segments),_.children)}return y}(new Wn(y.segments,_))}function Bc(y){return y instanceof Vc}function TA(y){let _;const T=bA(function S(D){const I={};for(const A of D.children){const R=S(A);I[A.outlet]=R}const M=new Wn(D.url,I);return D===y&&(_=M),M}(y.root));return null!=_?_:T}function EA(y,_,S,C){let T=y;for(;T.parent;)T=T.parent;if(0===_.length)return Qv(T,T,T,S,C);const D=function Bq(y){if("string"==typeof y[0]&&1===y.length&&"/"===y[0])return new IA(!0,0,y);let _=0,S=!1;const C=y.reduce((T,D,I)=>{if("object"==typeof D&&null!=D){if(D.outlets){const M={};return Object.entries(D.outlets).forEach(([A,R])=>{M[A]="string"==typeof R?R.split("/"):R}),[...T,{outlets:M}]}if(D.segmentPath)return[...T,D.segmentPath]}return"string"!=typeof D?[...T,D]:0===I?(D.split("/").forEach((M,A)=>{0==A&&"."===M||(0==A&&""===M?S=!0:".."===M?_++:""!=M&&T.push(M))}),T):[...T,D]},[]);return new IA(S,_,C)}(_);if(D.toRoot())return Qv(T,T,new Wn([],{}),S,C);const I=function $q(y,_,S){if(y.isAbsolute)return new zh(_,!0,0);if(!S)return new zh(_,!1,NaN);if(null===S.parent)return new zh(S,!0,0);const C=Hh(y.commands[0])?0:1;return function Hq(y,_,S){let C=y,T=_,D=S;for(;D>T;){if(D-=T,C=C.parent,!C)throw new j(4005,!1);T=C.segments.length}return new zh(C,!1,T-D)}(S,S.segments.length-1+C,y.numberOfDoubleDots)}(D,T,y),M=I.processChildren?ju(I.segmentGroup,I.index,D.commands):MA(I.segmentGroup,I.index,D.commands);return Qv(T,I.segmentGroup,M,S,C)}function Hh(y){return"object"==typeof y&&null!=y&&!y.outlets&&!y.segmentPath}function Vu(y){return"object"==typeof y&&null!=y&&y.outlets}function Qv(y,_,S,C,T){let I,D={};C&&Object.entries(C).forEach(([A,R])=>{D[A]=Array.isArray(R)?R.map(N=>"".concat(N)):"".concat(R)}),I=y===_?S:DA(y,_,S);const M=bA(SA(I));return new Vc(M,D,T)}function DA(y,_,S){const C={};return Object.entries(y.children).forEach(([T,D])=>{C[T]=D===_?S:DA(D,_,S)}),new Wn(y.segments,C)}class IA{constructor(_,S,C){if(this.isAbsolute=_,this.numberOfDoubleDots=S,this.commands=C,_&&C.length>0&&Hh(C[0]))throw new j(4003,!1);const T=C.find(Vu);if(T&&T!==hA(C))throw new j(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class zh{constructor(_,S,C){this.segmentGroup=_,this.processChildren=S,this.index=C}}function MA(y,_,S){if(null!=y||(y=new Wn([],{})),0===y.segments.length&&y.hasChildren())return ju(y,_,S);const C=function qq(y,_,S){let C=0,T=_;const D={match:!1,pathIndex:0,commandIndex:0};for(;T<y.segments.length;){if(C>=S.length)return D;const I=y.segments[T],M=S[C];if(Vu(M))break;const A="".concat(M),R=C<S.length-1?S[C+1]:null;if(T>0&&void 0===A)break;if(A&&R&&"object"==typeof R&&void 0===R.outlets){if(!RA(A,R,I))return D;C+=2}else{if(!RA(A,{},I))return D;C++}T++}return{match:!0,pathIndex:T,commandIndex:C}}(y,_,S),T=S.slice(C.commandIndex);if(C.match&&C.pathIndex<y.segments.length){const D=new Wn(y.segments.slice(0,C.pathIndex),{});return D.children[pn]=new Wn(y.segments.slice(C.pathIndex),y.children),ju(D,0,T)}return C.match&&0===T.length?new Wn(y.segments,{}):C.match&&!y.hasChildren()?Xv(y,_,S):C.match?ju(y,0,T):Xv(y,_,S)}function ju(y,_,S){if(0===S.length)return new Wn(y.segments,{});{const C=function zq(y){return Vu(y[0])?y[0].outlets:{[pn]:y}}(S),T={};if(Object.keys(C).some(D=>D!==pn)&&y.children[pn]&&1===y.numberOfChildren&&0===y.children[pn].segments.length){const D=ju(y.children[pn],_,S);return new Wn(y.segments,D.children)}return Object.entries(C).forEach(([D,I])=>{"string"==typeof I&&(I=[I]),null!==I&&(T[D]=MA(y.children[D],_,I))}),Object.entries(y.children).forEach(([D,I])=>{void 0===C[D]&&(T[D]=I)}),new Wn(y.segments,T)}}function Xv(y,_,S){const C=y.segments.slice(0,_);let T=0;for(;T<S.length;){const D=S[T];if(Vu(D)){const A=Wq(D.outlets);return new Wn(C,A)}if(0===T&&Hh(S[0])){C.push(new Lu(y.segments[_].path,AA(S[0]))),T++;continue}const I=Vu(D)?D.outlets[pn]:"".concat(D),M=T<S.length-1?S[T+1]:null;I&&M&&Hh(M)?(C.push(new Lu(I,AA(M))),T+=2):(C.push(new Lu(I,{})),T++)}return new Wn(C,{})}function Wq(y){const _={};return Object.entries(y).forEach(([S,C])=>{"string"==typeof C&&(C=[C]),null!==C&&(_[S]=Xv(new Wn([],{}),0,C))}),_}function AA(y){const _={};return Object.entries(y).forEach(([S,C])=>_[S]="".concat(C)),_}function RA(y,_,S){return y==S.path&&Ni(_,S.parameters)}const Bu="imperative";var Mn=function(y){return y[y.NavigationStart=0]="NavigationStart",y[y.NavigationEnd=1]="NavigationEnd",y[y.NavigationCancel=2]="NavigationCancel",y[y.NavigationError=3]="NavigationError",y[y.RoutesRecognized=4]="RoutesRecognized",y[y.ResolveStart=5]="ResolveStart",y[y.ResolveEnd=6]="ResolveEnd",y[y.GuardsCheckStart=7]="GuardsCheckStart",y[y.GuardsCheckEnd=8]="GuardsCheckEnd",y[y.RouteConfigLoadStart=9]="RouteConfigLoadStart",y[y.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",y[y.ChildActivationStart=11]="ChildActivationStart",y[y.ChildActivationEnd=12]="ChildActivationEnd",y[y.ActivationStart=13]="ActivationStart",y[y.ActivationEnd=14]="ActivationEnd",y[y.Scroll=15]="Scroll",y[y.NavigationSkipped=16]="NavigationSkipped",y}(Mn||{});class Oi{constructor(_,S){this.id=_,this.url=S}}class qh extends Oi{constructor(_,S,C="imperative",T=null){super(_,S),this.type=Mn.NavigationStart,this.navigationTrigger=C,this.restoredState=T}toString(){return"NavigationStart(id: ".concat(this.id,", url: '").concat(this.url,"')")}}class ls extends Oi{constructor(_,S,C){super(_,S),this.urlAfterRedirects=C,this.type=Mn.NavigationEnd}toString(){return"NavigationEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"')")}}var Io=function(y){return y[y.Redirect=0]="Redirect",y[y.SupersededByNewNavigation=1]="SupersededByNewNavigation",y[y.NoDataFromResolver=2]="NoDataFromResolver",y[y.GuardRejected=3]="GuardRejected",y}(Io||{}),Wh=function(y){return y[y.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",y[y.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",y}(Wh||{});class $c extends Oi{constructor(_,S,C,T){super(_,S),this.reason=C,this.code=T,this.type=Mn.NavigationCancel}toString(){return"NavigationCancel(id: ".concat(this.id,", url: '").concat(this.url,"')")}}class Hc extends Oi{constructor(_,S,C,T){super(_,S),this.reason=C,this.code=T,this.type=Mn.NavigationSkipped}}class Gh extends Oi{constructor(_,S,C,T){super(_,S),this.error=C,this.target=T,this.type=Mn.NavigationError}toString(){return"NavigationError(id: ".concat(this.id,", url: '").concat(this.url,"', error: ").concat(this.error,")")}}class PA extends Oi{constructor(_,S,C,T){super(_,S),this.urlAfterRedirects=C,this.state=T,this.type=Mn.RoutesRecognized}toString(){return"RoutesRecognized(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}class Gq extends Oi{constructor(_,S,C,T){super(_,S),this.urlAfterRedirects=C,this.state=T,this.type=Mn.GuardsCheckStart}toString(){return"GuardsCheckStart(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}class Kq extends Oi{constructor(_,S,C,T,D){super(_,S),this.urlAfterRedirects=C,this.state=T,this.shouldActivate=D,this.type=Mn.GuardsCheckEnd}toString(){return"GuardsCheckEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,", shouldActivate: ").concat(this.shouldActivate,")")}}class Jq extends Oi{constructor(_,S,C,T){super(_,S),this.urlAfterRedirects=C,this.state=T,this.type=Mn.ResolveStart}toString(){return"ResolveStart(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}class Qq extends Oi{constructor(_,S,C,T){super(_,S),this.urlAfterRedirects=C,this.state=T,this.type=Mn.ResolveEnd}toString(){return"ResolveEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}class Xq{constructor(_){this.route=_,this.type=Mn.RouteConfigLoadStart}toString(){return"RouteConfigLoadStart(path: ".concat(this.route.path,")")}}class Yq{constructor(_){this.route=_,this.type=Mn.RouteConfigLoadEnd}toString(){return"RouteConfigLoadEnd(path: ".concat(this.route.path,")")}}class Zq{constructor(_){this.snapshot=_,this.type=Mn.ChildActivationStart}toString(){return"ChildActivationStart(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}class e6{constructor(_){this.snapshot=_,this.type=Mn.ChildActivationEnd}toString(){return"ChildActivationEnd(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}class t6{constructor(_){this.snapshot=_,this.type=Mn.ActivationStart}toString(){return"ActivationStart(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}class n6{constructor(_){this.snapshot=_,this.type=Mn.ActivationEnd}toString(){return"ActivationEnd(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}class NA{constructor(_,S,C){this.routerEvent=_,this.position=S,this.anchor=C,this.type=Mn.Scroll}toString(){const _=this.position?"".concat(this.position[0],", ").concat(this.position[1]):null;return"Scroll(anchor: '".concat(this.anchor,"', position: '").concat(_,"')")}}class Yv{}class Zv{constructor(_){this.url=_}}class r6{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new $u,this.attachRef=null}}let $u=(()=>{var y;class _{constructor(){this.contexts=new Map}onChildOutletCreated(C,T){const D=this.getOrCreateContext(C);D.outlet=T,this.contexts.set(C,D)}onChildOutletDestroyed(C){const T=this.getContext(C);T&&(T.outlet=null,T.attachRef=null)}onOutletDeactivated(){const C=this.contexts;return this.contexts=new Map,C}onOutletReAttached(C){this.contexts=C}getOrCreateContext(C){let T=this.getContext(C);return T||(T=new r6,this.contexts.set(C,T)),T}getContext(C){return this.contexts.get(C)||null}}return(y=_).\u0275fac=function(C){return new(C||y)},y.\u0275prov=Ot({token:y,factory:y.\u0275fac,providedIn:"root"}),_})();class OA{constructor(_){this._root=_}get root(){return this._root.value}parent(_){const S=this.pathFromRoot(_);return S.length>1?S[S.length-2]:null}children(_){const S=e_(_,this._root);return S?S.children.map(C=>C.value):[]}firstChild(_){const S=e_(_,this._root);return S&&S.children.length>0?S.children[0].value:null}siblings(_){const S=t_(_,this._root);return S.length<2?[]:S[S.length-2].children.map(T=>T.value).filter(T=>T!==_)}pathFromRoot(_){return t_(_,this._root).map(S=>S.value)}}function e_(y,_){if(y===_.value)return _;for(const S of _.children){const C=e_(y,S);if(C)return C}return null}function t_(y,_){if(y===_.value)return[_];for(const S of _.children){const C=t_(y,S);if(C.length)return C.unshift(_),C}return[]}class si{constructor(_,S){this.value=_,this.children=S}toString(){return"TreeNode(".concat(this.value,")")}}function zc(y){const _={};return y&&y.children.forEach(S=>_[S.value.outlet]=S),_}class kA extends OA{constructor(_,S){super(_),this.snapshot=S,o_(this,_)}toString(){return this.snapshot.toString()}}function xA(y){const _=function o6(y){const D=new r_([],{},{},"",{},pn,y,null,{});return new FA("",new si(D,[]))}(y),S=new ir([new Lu("",{})]),C=new ir({}),T=new ir({}),D=new ir({}),I=new ir(""),M=new qc(S,C,D,I,T,pn,y,_.root);return M.snapshot=_.root,new kA(new si(M,[]),_)}class qc{constructor(_,S,C,T,D,I,M,A){var R,N;this.urlSubject=_,this.paramsSubject=S,this.queryParamsSubject=C,this.fragmentSubject=T,this.dataSubject=D,this.outlet=I,this.component=M,this._futureSnapshot=A,this.title=null!==(R=null===(N=this.dataSubject)||void 0===N?void 0:N.pipe(k(O=>O[Fu])))&&void 0!==R?R:sn(void 0),this.url=_,this.params=S,this.queryParams=C,this.fragment=T,this.data=D}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){var _;return null!==(_=this._paramMap)&&void 0!==_||(this._paramMap=this.params.pipe(k(S=>Uc(S)))),this._paramMap}get queryParamMap(){var _;return null!==(_=this._queryParamMap)&&void 0!==_||(this._queryParamMap=this.queryParams.pipe(k(S=>Uc(S)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():"Future(".concat(this._futureSnapshot,")")}}function n_(y,_,S="emptyOnly"){var C;let T;const{routeConfig:D}=y;var I;return T=null===_||"always"!==S&&""!==(null==D?void 0:D.path)&&(_.component||null!==(C=_.routeConfig)&&void 0!==C&&C.loadComponent)?{params:se({},y.params),data:se({},y.data),resolve:se(se({},y.data),null!==(I=y._resolvedData)&&void 0!==I?I:{})}:{params:se(se({},_.params),y.params),data:se(se({},_.data),y.data),resolve:se(se(se(se({},y.data),_.data),null==D?void 0:D.data),y._resolvedData)},D&&UA(D)&&(T.resolve[Fu]=D.title),T}class r_{get title(){var _;return null===(_=this.data)||void 0===_?void 0:_[Fu]}constructor(_,S,C,T,D,I,M,A,R){this.url=_,this.params=S,this.queryParams=C,this.fragment=T,this.data=D,this.outlet=I,this.component=M,this.routeConfig=A,this._resolve=R}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){var _;return null!==(_=this._paramMap)&&void 0!==_||(this._paramMap=Uc(this.params)),this._paramMap}get queryParamMap(){var _;return null!==(_=this._queryParamMap)&&void 0!==_||(this._queryParamMap=Uc(this.queryParams)),this._queryParamMap}toString(){const _=this.url.map(C=>C.toString()).join("/"),S=this.routeConfig?this.routeConfig.path:"";return"Route(url:'".concat(_,"', path:'").concat(S,"')")}}class FA extends OA{constructor(_,S){super(S),this.url=_,o_(this,S)}toString(){return LA(this._root)}}function o_(y,_){_.value._routerState=y,_.children.forEach(S=>o_(y,S))}function LA(y){const _=y.children.length>0?" { ".concat(y.children.map(LA).join(", ")," } "):"";return"".concat(y.value).concat(_)}function i_(y){if(y.snapshot){const _=y.snapshot,S=y._futureSnapshot;y.snapshot=S,Ni(_.queryParams,S.queryParams)||y.queryParamsSubject.next(S.queryParams),_.fragment!==S.fragment&&y.fragmentSubject.next(S.fragment),Ni(_.params,S.params)||y.paramsSubject.next(S.params),function wq(y,_){if(y.length!==_.length)return!1;for(let S=0;S<y.length;++S)if(!Ni(y[S],_[S]))return!1;return!0}(_.url,S.url)||y.urlSubject.next(S.url),Ni(_.data,S.data)||y.dataSubject.next(S.data)}else y.snapshot=y._futureSnapshot,y.dataSubject.next(y._futureSnapshot.data)}function s_(y,_){const S=Ni(y.params,_.params)&&function Eq(y,_){return ba(y,_)&&y.every((S,C)=>Ni(S.parameters,_[C].parameters))}(y.url,_.url);return S&&!(!y.parent!=!_.parent)&&(!y.parent||s_(y.parent,_.parent))}function UA(y){return"string"==typeof y.title||null===y.title}let Kh=(()=>{var y;class _{constructor(){this.activated=null,this._activatedRoute=null,this.name=pn,this.activateEvents=new zn,this.deactivateEvents=new zn,this.attachEvents=new zn,this.detachEvents=new zn,this.parentContexts=at($u),this.location=at(Xo),this.changeDetector=at(mu),this.environmentInjector=at(Xr),this.inputBinder=at(Jh,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(C){if(C.name){const{firstChange:T,previousValue:D}=C.name;if(T)return;this.isTrackedInParentContexts(D)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(D)),this.initializeOutletWithName()}}ngOnDestroy(){var C;this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),null===(C=this.inputBinder)||void 0===C||C.unsubscribeFromRouteData(this)}isTrackedInParentContexts(C){var T;return(null===(T=this.parentContexts.getContext(C))||void 0===T?void 0:T.outlet)===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const C=this.parentContexts.getContext(this.name);null!=C&&C.route&&(C.attachRef?this.attach(C.attachRef,C.route):this.activateWith(C.route,C.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new j(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new j(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new j(4012,!1);this.location.detach();const C=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(C.instance),C}attach(C,T){var D;this.activated=C,this._activatedRoute=T,this.location.insert(C.hostView),null===(D=this.inputBinder)||void 0===D||D.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(C.instance)}deactivate(){if(this.activated){const C=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(C)}}activateWith(C,T){var D;if(this.isActivated)throw new j(4013,!1);this._activatedRoute=C;const I=this.location,A=C.snapshot.component,R=this.parentContexts.getOrCreateContext(this.name).children,N=new a_(C,R,I.injector);this.activated=I.createComponent(A,{index:I.length,injector:N,environmentInjector:null!=T?T:this.environmentInjector}),this.changeDetector.markForCheck(),null===(D=this.inputBinder)||void 0===D||D.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}}return(y=_).\u0275fac=function(C){return new(C||y)},y.\u0275dir=an({type:y,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[No]}),_})();class a_{__ngOutletInjector(_){return new a_(this.route,this.childContexts,_)}constructor(_,S,C){this.route=_,this.childContexts=S,this.parent=C}get(_,S){return _===qc?this.route:_===$u?this.childContexts:this.parent.get(_,S)}}const Jh=new Rt("");let VA=(()=>{var y;class _{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(C){this.unsubscribeFromRouteData(C),this.subscribeToRouteData(C)}unsubscribeFromRouteData(C){var T;null===(T=this.outletDataSubscriptions.get(C))||void 0===T||T.unsubscribe(),this.outletDataSubscriptions.delete(C)}subscribeToRouteData(C){const{activatedRoute:T}=C,D=$v([T.queryParams,T.params,T.data]).pipe(ii(([I,M,A],R)=>(A=se(se(se({},I),M),A),0===R?sn(A):Promise.resolve(A)))).subscribe(I=>{if(!C.isActivated||!C.activatedComponentRef||C.activatedRoute!==T||null===T.component)return void this.unsubscribeFromRouteData(C);const M=function W$(y){const _=yn(y);if(!_)return null;const S=new Ql(_);return{get selector(){return S.selector},get type(){return S.componentType},get inputs(){return S.inputs},get outputs(){return S.outputs},get ngContentSelectors(){return S.ngContentSelectors},get isStandalone(){return _.standalone},get isSignal(){return _.signals}}}(T.component);if(M)for(const{templateName:A}of M.inputs)C.activatedComponentRef.setInput(A,I[A]);else this.unsubscribeFromRouteData(C)});this.outletDataSubscriptions.set(C,D)}}return(y=_).\u0275fac=function(C){return new(C||y)},y.\u0275prov=Ot({token:y,factory:y.\u0275fac}),_})();function Hu(y,_,S){if(S&&y.shouldReuseRoute(_.value,S.value.snapshot)){const C=S.value;C._futureSnapshot=_.value;const T=function s6(y,_,S){return _.children.map(C=>{for(const T of S.children)if(y.shouldReuseRoute(C.value,T.value.snapshot))return Hu(y,C,T);return Hu(y,C)})}(y,_,S);return new si(C,T)}{if(y.shouldAttach(_.value)){const D=y.retrieve(_.value);if(null!==D){const I=D.route;return I.value._futureSnapshot=_.value,I.children=_.children.map(M=>Hu(y,M)),I}}const C=function a6(y){return new qc(new ir(y.url),new ir(y.params),new ir(y.queryParams),new ir(y.fragment),new ir(y.data),y.outlet,y.component,y)}(_.value),T=_.children.map(D=>Hu(y,D));return new si(C,T)}}const jA="ngNavigationCancelingError";function BA(y,_){const{redirectTo:S,navigationBehaviorOptions:C}=Bc(_)?{redirectTo:_,navigationBehaviorOptions:void 0}:_,T=$A(!1,Io.Redirect);return T.url=S,T.navigationBehaviorOptions=C,T}function $A(y,_){const S=new Error("NavigationCancelingError: ".concat(y||""));return S[jA]=!0,S.cancellationCode=_,S}function HA(y){return!!y&&y[jA]}let zA=(()=>{var y;class _{}return(y=_).\u0275fac=function(C){return new(C||y)},y.\u0275cmp=Lr({type:y,selectors:[["ng-component"]],standalone:!0,features:[XE],decls:1,vars:0,template:function(C,T){1&C&&ei(0,"router-outlet")},dependencies:[Kh],encapsulation:2}),_})();function c_(y){const _=y.children&&y.children.map(c_),S=_?se(se({},y),{},{children:_}):se({},y);return!S.component&&!S.loadComponent&&(_||S.loadChildren)&&S.outlet&&S.outlet!==pn&&(S.component=zA),S}function ki(y){return y.outlet||pn}function zu(y){var _;if(!y)return null;if(null!==(_=y.routeConfig)&&void 0!==_&&_._injector)return y.routeConfig._injector;for(let S=y.parent;S;S=S.parent){const C=S.routeConfig;if(null!=C&&C._loadedInjector)return C._loadedInjector;if(null!=C&&C._injector)return C._injector}return null}class g6{constructor(_,S,C,T,D){this.routeReuseStrategy=_,this.futureState=S,this.currState=C,this.forwardEvent=T,this.inputBindingEnabled=D}activate(_){const S=this.futureState._root,C=this.currState?this.currState._root:null;this.deactivateChildRoutes(S,C,_),i_(this.futureState.root),this.activateChildRoutes(S,C,_)}deactivateChildRoutes(_,S,C){const T=zc(S);_.children.forEach(D=>{const I=D.value.outlet;this.deactivateRoutes(D,T[I],C),delete T[I]}),Object.values(T).forEach(D=>{this.deactivateRouteAndItsChildren(D,C)})}deactivateRoutes(_,S,C){const T=_.value,D=S?S.value:null;if(T===D)if(T.component){const I=C.getContext(T.outlet);I&&this.deactivateChildRoutes(_,S,I.children)}else this.deactivateChildRoutes(_,S,C);else D&&this.deactivateRouteAndItsChildren(S,C)}deactivateRouteAndItsChildren(_,S){_.value.component&&this.routeReuseStrategy.shouldDetach(_.value.snapshot)?this.detachAndStoreRouteSubtree(_,S):this.deactivateRouteAndOutlet(_,S)}detachAndStoreRouteSubtree(_,S){const C=S.getContext(_.value.outlet),T=C&&_.value.component?C.children:S,D=zc(_);for(const I of Object.values(D))this.deactivateRouteAndItsChildren(I,T);if(C&&C.outlet){const I=C.outlet.detach(),M=C.children.onOutletDeactivated();this.routeReuseStrategy.store(_.value.snapshot,{componentRef:I,route:_,contexts:M})}}deactivateRouteAndOutlet(_,S){const C=S.getContext(_.value.outlet),T=C&&_.value.component?C.children:S,D=zc(_);for(const I of Object.values(D))this.deactivateRouteAndItsChildren(I,T);C&&(C.outlet&&(C.outlet.deactivate(),C.children.onOutletDeactivated()),C.attachRef=null,C.route=null)}activateChildRoutes(_,S,C){const T=zc(S);_.children.forEach(D=>{this.activateRoutes(D,T[D.value.outlet],C),this.forwardEvent(new n6(D.value.snapshot))}),_.children.length&&this.forwardEvent(new e6(_.value.snapshot))}activateRoutes(_,S,C){const T=_.value,D=S?S.value:null;if(i_(T),T===D)if(T.component){const I=C.getOrCreateContext(T.outlet);this.activateChildRoutes(_,S,I.children)}else this.activateChildRoutes(_,S,C);else if(T.component){const I=C.getOrCreateContext(T.outlet);if(this.routeReuseStrategy.shouldAttach(T.snapshot)){const M=this.routeReuseStrategy.retrieve(T.snapshot);this.routeReuseStrategy.store(T.snapshot,null),I.children.onOutletReAttached(M.contexts),I.attachRef=M.componentRef,I.route=M.route.value,I.outlet&&I.outlet.attach(M.componentRef,M.route.value),i_(M.route.value),this.activateChildRoutes(_,null,I.children)}else{const M=zu(T.snapshot);I.attachRef=null,I.route=T,I.injector=M,I.outlet&&I.outlet.activateWith(T,I.injector),this.activateChildRoutes(_,null,I.children)}}else this.activateChildRoutes(_,null,C)}}class qA{constructor(_){this.path=_,this.route=this.path[this.path.length-1]}}class Qh{constructor(_,S){this.component=_,this.route=S}}function m6(y,_,S){const C=y._root;return qu(C,_?_._root:null,S,[C.value])}function Wc(y,_){const S=Symbol(),C=_.get(y,S);return C===S?"function"!=typeof y||function IO(y){return null!==md(y)}(y)?_.get(y):y:C}function qu(y,_,S,C,T={canDeactivateChecks:[],canActivateChecks:[]}){const D=zc(_);return y.children.forEach(I=>{(function v6(y,_,S,C,T={canDeactivateChecks:[],canActivateChecks:[]}){const D=y.value,I=_?_.value:null,M=S?S.getContext(y.value.outlet):null;if(I&&D.routeConfig===I.routeConfig){const A=function _6(y,_,S){if("function"==typeof S)return S(y,_);switch(S){case"pathParamsChange":return!ba(y.url,_.url);case"pathParamsOrQueryParamsChange":return!ba(y.url,_.url)||!Ni(y.queryParams,_.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!s_(y,_)||!Ni(y.queryParams,_.queryParams);default:return!s_(y,_)}}(I,D,D.routeConfig.runGuardsAndResolvers);A?T.canActivateChecks.push(new qA(C)):(D.data=I.data,D._resolvedData=I._resolvedData),qu(y,_,D.component?M?M.children:null:S,C,T),A&&M&&M.outlet&&M.outlet.isActivated&&T.canDeactivateChecks.push(new Qh(M.outlet.component,I))}else I&&Wu(_,M,T),T.canActivateChecks.push(new qA(C)),qu(y,null,D.component?M?M.children:null:S,C,T)})(I,D[I.value.outlet],S,C.concat([I.value]),T),delete D[I.value.outlet]}),Object.entries(D).forEach(([I,M])=>Wu(M,S.getContext(I),T)),T}function Wu(y,_,S){const C=zc(y),T=y.value;Object.entries(C).forEach(([D,I])=>{Wu(I,T.component?_?_.children.getContext(D):null:_,S)}),S.canDeactivateChecks.push(new Qh(T.component&&_&&_.outlet&&_.outlet.isActivated?_.outlet.component:null,T))}function Gu(y){return"function"==typeof y}function WA(y){return y instanceof Fh||"EmptyError"===(null==y?void 0:y.name)}const Xh=Symbol("INITIAL_VALUE");function Gc(){return ii(y=>$v(y.map(_=>_.pipe(xc(1),function hq(...y){const _=xh(y);return he((S,C)=>{(_?Hv(y,S,_):Hv(y,S)).subscribe(C)})}(Xh)))).pipe(k(_=>{for(const S of _)if(!0!==S){if(S===Xh)return Xh;if(!1===S||S instanceof Vc)return S}return!0}),cs(_=>_!==Xh),xc(1)))}function GA(y){return function qi(...y){return gs(y)}(oo(_=>{if(Bc(_))throw BA(0,_)}),k(_=>!0===_))}class l_{constructor(_){this.segmentGroup=_||null}}class u_ extends Error{constructor(_){super(),this.urlTree=_}}function Kc(y){return Lh(new l_(y))}class U6{constructor(_,S){this.urlSerializer=_,this.urlTree=S}lineralizeSegments(_,S){let C=[],T=S.root;for(;;){if(C=C.concat(T.segments),0===T.numberOfChildren)return sn(C);if(T.numberOfChildren>1||!T.children[pn])return Lh(new j(4e3,!1));T=T.children[pn]}}applyRedirectCommands(_,S,C){const T=this.applyRedirectCreateUrlTree(S,this.urlSerializer.parse(S),_,C);if(S.startsWith("/"))throw new u_(T);return T}applyRedirectCreateUrlTree(_,S,C,T){const D=this.createSegmentGroup(_,S.root,C,T);return new Vc(D,this.createQueryParams(S.queryParams,this.urlTree.queryParams),S.fragment)}createQueryParams(_,S){const C={};return Object.entries(_).forEach(([T,D])=>{if("string"==typeof D&&D.startsWith(":")){const M=D.substring(1);C[T]=S[M]}else C[T]=D}),C}createSegmentGroup(_,S,C,T){const D=this.createSegments(_,S.segments,C,T);let I={};return Object.entries(S.children).forEach(([M,A])=>{I[M]=this.createSegmentGroup(_,A,C,T)}),new Wn(D,I)}createSegments(_,S,C,T){return S.map(D=>D.path.startsWith(":")?this.findPosParam(_,D,T):this.findOrReturn(D,C))}findPosParam(_,S,C){const T=C[S.path.substring(1)];if(!T)throw new j(4001,!1);return T}findOrReturn(_,S){let C=0;for(const T of S){if(T.path===_.path)return S.splice(C),T;C++}return _}}const d_={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function V6(y,_,S,C,T){const D=f_(y,_,S);return D.matched?(C=function l6(y,_){var S;return y.providers&&!y._injector&&(y._injector=Rf(y.providers,_,"Route: ".concat(y.path))),null!==(S=y._injector)&&void 0!==S?S:_}(_,C),function x6(y,_,S,C){const T=_.canMatch;return T&&0!==T.length?sn(T.map(I=>{const M=Wc(I,y);return xs(function E6(y){return y&&Gu(y.canMatch)}(M)?M.canMatch(_,S):ui(y,()=>M(_,S)))})).pipe(Gc(),GA()):sn(!0)}(C,_,S).pipe(k(I=>!0===I?D:se({},d_)))):sn(D)}function f_(y,_,S){var C,T;if("**"===_.path)return function j6(y){return{matched:!0,parameters:y.length>0?hA(y).parameters:{},consumedSegments:y,remainingSegments:[],positionalParamSegments:{}}}(S);if(""===_.path)return"full"===_.pathMatch&&(y.hasChildren()||S.length>0)?se({},d_):{matched:!0,consumedSegments:[],remainingSegments:S,parameters:{},positionalParamSegments:{}};const I=(_.matcher||Cq)(S,y,_);if(!I)return se({},d_);const M={};Object.entries(null!==(C=I.posParams)&&void 0!==C?C:{}).forEach(([R,N])=>{M[R]=N.path});const A=I.consumed.length>0?se(se({},M),I.consumed[I.consumed.length-1].parameters):M;return{matched:!0,consumedSegments:I.consumed,remainingSegments:S.slice(I.consumed.length),parameters:A,positionalParamSegments:null!==(T=I.posParams)&&void 0!==T?T:{}}}function KA(y,_,S,C){return S.length>0&&function H6(y,_,S){return S.some(C=>Yh(y,_,C)&&ki(C)!==pn)}(y,S,C)?{segmentGroup:new Wn(_,$6(C,new Wn(S,y.children))),slicedSegments:[]}:0===S.length&&function z6(y,_,S){return S.some(C=>Yh(y,_,C))}(y,S,C)?{segmentGroup:new Wn(y.segments,B6(y,S,C,y.children)),slicedSegments:S}:{segmentGroup:new Wn(y.segments,y.children),slicedSegments:S}}function B6(y,_,S,C){const T={};for(const D of S)if(Yh(y,_,D)&&!C[ki(D)]){const I=new Wn([],{});T[ki(D)]=I}return se(se({},C),T)}function $6(y,_){const S={};S[pn]=_;for(const C of y)if(""===C.path&&ki(C)!==pn){const T=new Wn([],{});S[ki(C)]=T}return S}function Yh(y,_,S){return(!(y.hasChildren()||_.length>0)||"full"!==S.pathMatch)&&""===S.path}class G6{}class Q6{constructor(_,S,C,T,D,I,M){this.injector=_,this.configLoader=S,this.rootComponentType=C,this.config=T,this.urlTree=D,this.paramsInheritanceStrategy=I,this.urlSerializer=M,this.applyRedirects=new U6(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(_){return new j(4002,"'".concat(_.segmentGroup,"'"))}recognize(){const _=KA(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(_).pipe(k(S=>{const C=new r_([],Object.freeze({}),Object.freeze(se({},this.urlTree.queryParams)),this.urlTree.fragment,{},pn,this.rootComponentType,null,{}),T=new si(C,S),D=new FA("",T),I=function jq(y,_,S=null,C=null){return EA(TA(y),_,S,C)}(C,[],this.urlTree.queryParams,this.urlTree.fragment);return I.queryParams=this.urlTree.queryParams,D.url=this.urlSerializer.serialize(I),this.inheritParamsAndData(D._root,null),{state:D,tree:I}}))}match(_){return this.processSegmentGroup(this.injector,this.config,_,pn).pipe(Lc(C=>{if(C instanceof u_)return this.urlTree=C.urlTree,this.match(C.urlTree.root);throw C instanceof l_?this.noMatchError(C):C}))}inheritParamsAndData(_,S){const C=_.value,T=n_(C,S,this.paramsInheritanceStrategy);C.params=Object.freeze(T.params),C.data=Object.freeze(T.data),_.children.forEach(D=>this.inheritParamsAndData(D,C))}processSegmentGroup(_,S,C,T){return 0===C.segments.length&&C.hasChildren()?this.processChildren(_,S,C):this.processSegment(_,S,C,C.segments,T,!0).pipe(k(D=>D instanceof si?[D]:[]))}processChildren(_,S,C){const T=[];for(const D of Object.keys(C.children))"primary"===D?T.unshift(D):T.push(D);return Nr(T).pipe(Fc(D=>{const I=C.children[D],M=function h6(y,_){const S=y.filter(C=>ki(C)===_);return S.push(...y.filter(C=>ki(C)!==_)),S}(S,D);return this.processSegmentGroup(_,M,I,D)}),function mq(y,_){return he(function gq(y,_,S,C,T){return(D,I)=>{let M=S,A=_,R=0;D.subscribe(Te(I,N=>{const O=R++;A=M?y(A,N,O):(M=!0,N),C&&I.next(A)},T&&(()=>{M&&I.next(A),I.complete()})))}}(y,_,arguments.length>=2,!0))}((D,I)=>(D.push(...I),D)),Uh(null),function yq(y,_){const S=arguments.length>=2;return C=>C.pipe(y?cs((T,D)=>y(T,D,C)):ao,qv(1),S?Uh(_):dA(()=>new Fh))}(),zr(D=>{if(null===D)return Kc(C);const I=JA(D);return function X6(y){y.sort((_,S)=>_.value.outlet===pn?-1:S.value.outlet===pn?1:_.value.outlet.localeCompare(S.value.outlet))}(I),sn(I)}))}processSegment(_,S,C,T,D,I){return Nr(S).pipe(Fc(M=>{var A;return this.processSegmentAgainstRoute(null!==(A=M._injector)&&void 0!==A?A:_,S,M,C,T,D,I).pipe(Lc(R=>{if(R instanceof l_)return sn(null);throw R}))}),wa(M=>!!M),Lc(M=>{if(WA(M))return function W6(y,_,S){return 0===_.length&&!y.children[S]}(C,T,D)?sn(new G6):Kc(C);throw M}))}processSegmentAgainstRoute(_,S,C,T,D,I,M){return function q6(y,_,S,C){return!!(ki(y)===C||C!==pn&&Yh(_,S,y))&&f_(_,y,S).matched}(C,T,D,I)?void 0===C.redirectTo?this.matchSegmentAgainstRoute(_,T,C,D,I):this.allowRedirects&&M?this.expandSegmentAgainstRouteUsingRedirect(_,T,S,C,D,I):Kc(T):Kc(T)}expandSegmentAgainstRouteUsingRedirect(_,S,C,T,D,I){const{matched:M,consumedSegments:A,positionalParamSegments:R,remainingSegments:N}=f_(S,T,D);if(!M)return Kc(S);T.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const O=this.applyRedirects.applyRedirectCommands(A,T.redirectTo,R);return this.applyRedirects.lineralizeSegments(T,O).pipe(zr(L=>this.processSegment(_,C,S,L.concat(N),I,!1)))}matchSegmentAgainstRoute(_,S,C,T,D){const I=V6(S,C,T,_);return"**"===C.path&&(S.children={}),I.pipe(ii(M=>{var A;return M.matched?(_=null!==(A=C._injector)&&void 0!==A?A:_,this.getChildConfig(_,C,T).pipe(ii(({routes:R})=>{var N,O,L;const $=null!==(N=C._loadedInjector)&&void 0!==N?N:_,{consumedSegments:Q,remainingSegments:ae,parameters:Ce}=M,Ee=new r_(Q,Ce,Object.freeze(se({},this.urlTree.queryParams)),this.urlTree.fragment,function Z6(y){return y.data||{}}(C),ki(C),null!==(O=null!==(L=C.component)&&void 0!==L?L:C._loadedComponent)&&void 0!==O?O:null,C,function e5(y){return y.resolve||{}}(C)),{segmentGroup:Ae,slicedSegments:ht}=KA(S,Q,ae,R);if(0===ht.length&&Ae.hasChildren())return this.processChildren($,R,Ae).pipe(k(qt=>null===qt?null:new si(Ee,qt)));if(0===R.length&&0===ht.length)return sn(new si(Ee,[]));const vt=ki(C)===D;return this.processSegment($,R,Ae,ht,vt?pn:D,!0).pipe(k(qt=>new si(Ee,qt instanceof si?[qt]:[])))}))):Kc(S)}))}getChildConfig(_,S,C){return S.children?sn({routes:S.children,injector:_}):S.loadChildren?void 0!==S._loadedRoutes?sn({routes:S._loadedRoutes,injector:S._loadedInjector}):function k6(y,_,S,C){const T=_.canLoad;return void 0===T||0===T.length?sn(!0):sn(T.map(I=>{const M=Wc(I,y);return xs(function w6(y){return y&&Gu(y.canLoad)}(M)?M.canLoad(_,S):ui(y,()=>M(_,S)))})).pipe(Gc(),GA())}(_,S,C).pipe(zr(T=>T?this.configLoader.loadChildren(_,S).pipe(oo(D=>{S._loadedRoutes=D.routes,S._loadedInjector=D.injector})):function L6(y){return Lh($A(!1,Io.GuardRejected))}())):sn({routes:[],injector:_})}}function Y6(y){const _=y.value.routeConfig;return _&&""===_.path}function JA(y){const _=[],S=new Set;for(const C of y){if(!Y6(C)){_.push(C);continue}const T=_.find(D=>C.value.routeConfig===D.value.routeConfig);void 0!==T?(T.children.push(...C.children),S.add(T)):_.push(C)}for(const C of S){const T=JA(C.children);_.push(new si(C.value,T))}return _.filter(C=>!S.has(C))}function QA(y){const _=y.children.map(S=>QA(S)).flat();return[y,..._]}function h_(y){return ii(_=>{const S=y(_);return S?Nr(S).pipe(k(()=>_)):sn(_)})}let XA=(()=>{var y;class _{buildTitle(C){let T,D=C.root;for(;void 0!==D;){var I;T=null!==(I=this.getResolvedTitleForRoute(D))&&void 0!==I?I:T,D=D.children.find(M=>M.outlet===pn)}return T}getResolvedTitleForRoute(C){return C.data[Fu]}}return(y=_).\u0275fac=function(C){return new(C||y)},y.\u0275prov=Ot({token:y,factory:()=>at(s5),providedIn:"root"}),_})(),s5=(()=>{var y;class _ extends XA{constructor(C){super(),this.title=C}updateTitle(C){const T=this.buildTitle(C);void 0!==T&&this.title.setTitle(T)}}return(y=_).\u0275fac=function(C){return new(C||y)($t(m4))},y.\u0275prov=Ot({token:y,factory:y.\u0275fac,providedIn:"root"}),_})();const Jc=new Rt("",{providedIn:"root",factory:()=>({})}),Qc=new Rt("");let p_=(()=>{var y;class _{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=at(MD)}loadComponent(C){if(this.componentLoaders.get(C))return this.componentLoaders.get(C);if(C._loadedComponent)return sn(C._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(C);const T=xs(C.loadComponent()).pipe(k(YA),oo(I=>{this.onLoadEndListener&&this.onLoadEndListener(C),C._loadedComponent=I}),ku(()=>{this.componentLoaders.delete(C)})),D=new uA(T,()=>new hr).pipe(zv());return this.componentLoaders.set(C,D),D}loadChildren(C,T){if(this.childrenLoaders.get(T))return this.childrenLoaders.get(T);if(T._loadedRoutes)return sn({routes:T._loadedRoutes,injector:T._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(T);const I=function a5(y,_,S,C){return xs(y.loadChildren()).pipe(k(YA),zr(T=>T instanceof jS||Array.isArray(T)?sn(T):Nr(_.compileModuleAsync(T))),k(T=>{C&&C(y);let D,I,M=!1;return Array.isArray(T)?(I=T,!0):(D=T.create(S).injector,I=D.get(Qc,[],{optional:!0,self:!0}).flat()),{routes:I.map(c_),injector:D}}))}(T,this.compiler,C,this.onLoadEndListener).pipe(ku(()=>{this.childrenLoaders.delete(T)})),M=new uA(I,()=>new hr).pipe(zv());return this.childrenLoaders.set(T,M),M}}return(y=_).\u0275fac=function(C){return new(C||y)},y.\u0275prov=Ot({token:y,factory:y.\u0275fac,providedIn:"root"}),_})();function YA(y){return function c5(y){return y&&"object"==typeof y&&"default"in y}(y)?y.default:y}let g_=(()=>{var y;class _{}return(y=_).\u0275fac=function(C){return new(C||y)},y.\u0275prov=Ot({token:y,factory:()=>at(l5),providedIn:"root"}),_})(),l5=(()=>{var y;class _{shouldProcessUrl(C){return!0}extract(C){return C}merge(C,T){return C}}return(y=_).\u0275fac=function(C){return new(C||y)},y.\u0275prov=Ot({token:y,factory:y.\u0275fac,providedIn:"root"}),_})();const ZA=new Rt(""),eR=new Rt("");function u5(y,_,S){const C=y.get(eR),T=y.get(go);return y.get(kn).runOutsideAngular(()=>{if(!T.startViewTransition||C.skipNextTransition)return C.skipNextTransition=!1,new Promise(R=>setTimeout(R));let D;const I=new Promise(R=>{D=R}),M=T.startViewTransition(()=>(D(),function d5(y){return new Promise(_=>{Mm(_,{injector:y})})}(y))),{onViewTransitionCreated:A}=C;return A&&ui(y,()=>A({transition:M,from:_,to:S})),I})}let Zh=(()=>{var y;class _{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new hr,this.transitionAbortSubject=new hr,this.configLoader=at(p_),this.environmentInjector=at(Xr),this.urlSerializer=at(jc),this.rootContexts=at($u),this.location=at(Cu),this.inputBindingEnabled=null!==at(Jh,{optional:!0}),this.titleStrategy=at(XA),this.options=at(Jc,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=at(g_),this.createViewTransition=at(ZA,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>sn(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=D=>this.events.next(new Yq(D)),this.configLoader.onLoadStartListener=D=>this.events.next(new Xq(D))}complete(){var C;null===(C=this.transitions)||void 0===C||C.complete()}handleNavigationRequest(C){var T;const D=++this.navigationId;null===(T=this.transitions)||void 0===T||T.next(se(se(se({},this.transitions.value),C),{},{id:D}))}setupNavigations(C,T,D){return this.transitions=new ir({id:0,currentUrlTree:T,currentRawUrl:T,extractedUrl:this.urlHandlingStrategy.extract(T),urlAfterRedirects:this.urlHandlingStrategy.extract(T),rawUrl:T,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Bu,restoredState:null,currentSnapshot:D.snapshot,targetSnapshot:null,currentRouterState:D,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(cs(I=>0!==I.id),k(I=>se(se({},I),{},{extractedUrl:this.urlHandlingStrategy.extract(I.rawUrl)})),ii(I=>{let M=!1,A=!1;return sn(I).pipe(ii(R=>{var N;if(this.navigationId>I.id)return this.cancelNavigationTransition(I,"",Io.SupersededByNewNavigation),Pi;this.currentTransition=I,this.currentNavigation={id:R.id,initialUrl:R.rawUrl,extractedUrl:R.extractedUrl,trigger:R.source,extras:R.extras,previousNavigation:this.lastSuccessfulNavigation?se(se({},this.lastSuccessfulNavigation),{},{previousNavigation:null}):null};const O=!C.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),L=null!==(N=R.extras.onSameUrlNavigation)&&void 0!==N?N:C.onSameUrlNavigation;if(!O&&"reload"!==L){const $="";return this.events.next(new Hc(R.id,this.urlSerializer.serialize(R.rawUrl),$,Wh.IgnoredSameUrlNavigation)),R.resolve(null),Pi}if(this.urlHandlingStrategy.shouldProcessUrl(R.rawUrl))return sn(R).pipe(ii($=>{var Q,ae;const Ce=null===(Q=this.transitions)||void 0===Q?void 0:Q.getValue();return this.events.next(new qh($.id,this.urlSerializer.serialize($.extractedUrl),$.source,$.restoredState)),Ce!==(null===(ae=this.transitions)||void 0===ae?void 0:ae.getValue())?Pi:Promise.resolve($)}),function t5(y,_,S,C,T,D){return zr(I=>function K6(y,_,S,C,T,D,I="emptyOnly"){return new Q6(y,_,S,C,T,I,D).recognize()}(y,_,S,C,I.extractedUrl,T,D).pipe(k(({state:M,tree:A})=>se(se({},I),{},{targetSnapshot:M,urlAfterRedirects:A}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,C.config,this.urlSerializer,this.paramsInheritanceStrategy),oo($=>{I.targetSnapshot=$.targetSnapshot,I.urlAfterRedirects=$.urlAfterRedirects,this.currentNavigation=se(se({},this.currentNavigation),{},{finalUrl:$.urlAfterRedirects});const Q=new PA($.id,this.urlSerializer.serialize($.extractedUrl),this.urlSerializer.serialize($.urlAfterRedirects),$.targetSnapshot);this.events.next(Q)}));if(O&&this.urlHandlingStrategy.shouldProcessUrl(R.currentRawUrl)){const{id:$,extractedUrl:Q,source:ae,restoredState:Ce,extras:Ee}=R,Ae=new qh($,this.urlSerializer.serialize(Q),ae,Ce);this.events.next(Ae);const ht=xA(this.rootComponentType).snapshot;return this.currentTransition=I=se(se({},R),{},{targetSnapshot:ht,urlAfterRedirects:Q,extras:se(se({},Ee),{},{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=Q,sn(I)}{const $="";return this.events.next(new Hc(R.id,this.urlSerializer.serialize(R.extractedUrl),$,Wh.IgnoredByUrlHandlingStrategy)),R.resolve(null),Pi}}),oo(R=>{const N=new Gq(R.id,this.urlSerializer.serialize(R.extractedUrl),this.urlSerializer.serialize(R.urlAfterRedirects),R.targetSnapshot);this.events.next(N)}),k(R=>(this.currentTransition=I=se(se({},R),{},{guards:m6(R.targetSnapshot,R.currentSnapshot,this.rootContexts)}),I)),function D6(y,_){return zr(S=>{const{targetSnapshot:C,currentSnapshot:T,guards:{canActivateChecks:D,canDeactivateChecks:I}}=S;return 0===I.length&&0===D.length?sn(se(se({},S),{},{guardsResult:!0})):function I6(y,_,S,C){return Nr(y).pipe(zr(T=>function O6(y,_,S,C,T){const D=_&&_.routeConfig?_.routeConfig.canDeactivate:null;return D&&0!==D.length?sn(D.map(M=>{var A;const R=null!==(A=zu(_))&&void 0!==A?A:T,N=Wc(M,R);return xs(function T6(y){return y&&Gu(y.canDeactivate)}(N)?N.canDeactivate(y,_,S,C):ui(R,()=>N(y,_,S,C))).pipe(wa())})).pipe(Gc()):sn(!0)}(T.component,T.route,S,_,C)),wa(T=>!0!==T,!0))}(I,C,T,y).pipe(zr(M=>M&&function C6(y){return"boolean"==typeof y}(M)?function M6(y,_,S,C){return Nr(_).pipe(Fc(T=>Hv(function R6(y,_){return null!==y&&_&&_(new Zq(y)),sn(!0)}(T.route.parent,C),function A6(y,_){return null!==y&&_&&_(new t6(y)),sn(!0)}(T.route,C),function N6(y,_,S){const C=_[_.length-1],D=_.slice(0,_.length-1).reverse().map(I=>function y6(y){const _=y.routeConfig?y.routeConfig.canActivateChild:null;return _&&0!==_.length?{node:y,guards:_}:null}(I)).filter(I=>null!==I).map(I=>lA(()=>sn(I.guards.map(A=>{var R;const N=null!==(R=zu(I.node))&&void 0!==R?R:S,O=Wc(A,N);return xs(function S6(y){return y&&Gu(y.canActivateChild)}(O)?O.canActivateChild(C,y):ui(N,()=>O(C,y))).pipe(wa())})).pipe(Gc())));return sn(D).pipe(Gc())}(y,T.path,S),function P6(y,_,S){const C=_.routeConfig?_.routeConfig.canActivate:null;if(!C||0===C.length)return sn(!0);const T=C.map(D=>lA(()=>{var I;const M=null!==(I=zu(_))&&void 0!==I?I:S,A=Wc(D,M);return xs(function b6(y){return y&&Gu(y.canActivate)}(A)?A.canActivate(_,y):ui(M,()=>A(_,y))).pipe(wa())}));return sn(T).pipe(Gc())}(y,T.route,S))),wa(T=>!0!==T,!0))}(C,D,y,_):sn(M)),k(M=>se(se({},S),{},{guardsResult:M})))})}(this.environmentInjector,R=>this.events.next(R)),oo(R=>{if(I.guardsResult=R.guardsResult,Bc(R.guardsResult))throw BA(0,R.guardsResult);const N=new Kq(R.id,this.urlSerializer.serialize(R.extractedUrl),this.urlSerializer.serialize(R.urlAfterRedirects),R.targetSnapshot,!!R.guardsResult);this.events.next(N)}),cs(R=>!!R.guardsResult||(this.cancelNavigationTransition(R,"",Io.GuardRejected),!1)),h_(R=>{if(R.guards.canActivateChecks.length)return sn(R).pipe(oo(N=>{const O=new Jq(N.id,this.urlSerializer.serialize(N.extractedUrl),this.urlSerializer.serialize(N.urlAfterRedirects),N.targetSnapshot);this.events.next(O)}),ii(N=>{let O=!1;return sn(N).pipe(function n5(y,_){return zr(S=>{const{targetSnapshot:C,guards:{canActivateChecks:T}}=S;if(!T.length)return sn(S);const D=new Set(T.map(A=>A.route)),I=new Set;for(const A of D)if(!I.has(A))for(const R of QA(A))I.add(R);let M=0;return Nr(I).pipe(Fc(A=>D.has(A)?function r5(y,_,S,C){const T=y.routeConfig,D=y._resolve;return void 0!==(null==T?void 0:T.title)&&!UA(T)&&(D[Fu]=T.title),function o5(y,_,S,C){const T=Wv(y);if(0===T.length)return sn({});const D={};return Nr(T).pipe(zr(I=>function i5(y,_,S,C){var T;const D=null!==(T=zu(_))&&void 0!==T?T:C,I=Wc(y,D);return xs(I.resolve?I.resolve(_,S):ui(D,()=>I(_,S)))}(y[I],_,S,C).pipe(wa(),oo(M=>{D[I]=M}))),qv(1),function vq(y){return k(()=>y)}(D),Lc(I=>WA(I)?Pi:Lh(I)))}(D,y,_,C).pipe(k(I=>(y._resolvedData=I,y.data=n_(y,y.parent,S).resolve,null)))}(A,C,y,_):(A.data=n_(A,A.parent,y).resolve,sn(void 0))),oo(()=>M++),qv(1),zr(A=>M===I.size?sn(S):Pi))})}(this.paramsInheritanceStrategy,this.environmentInjector),oo({next:()=>O=!0,complete:()=>{O||this.cancelNavigationTransition(N,"",Io.NoDataFromResolver)}}))}),oo(N=>{const O=new Qq(N.id,this.urlSerializer.serialize(N.extractedUrl),this.urlSerializer.serialize(N.urlAfterRedirects),N.targetSnapshot);this.events.next(O)}))}),h_(R=>{const N=O=>{var L;const $=[];null!==(L=O.routeConfig)&&void 0!==L&&L.loadComponent&&!O.routeConfig._loadedComponent&&$.push(this.configLoader.loadComponent(O.routeConfig).pipe(oo(Q=>{O.component=Q}),k(()=>{})));for(const Q of O.children)$.push(...N(Q));return $};return $v(N(R.targetSnapshot.root)).pipe(Uh(null),xc(1))}),h_(()=>this.afterPreactivation()),ii(()=>{var R;const{currentSnapshot:N,targetSnapshot:O}=I,L=null===(R=this.createViewTransition)||void 0===R?void 0:R.call(this,this.environmentInjector,N.root,O.root);return L?Nr(L).pipe(k(()=>I)):sn(I)}),k(R=>{const N=function i6(y,_,S){const C=Hu(y,_._root,S?S._root:void 0);return new kA(C,_)}(C.routeReuseStrategy,R.targetSnapshot,R.currentRouterState);return this.currentTransition=I=se(se({},R),{},{targetRouterState:N}),this.currentNavigation.targetRouterState=N,I}),oo(()=>{this.events.next(new Yv)}),((y,_,S,C)=>k(T=>(new g6(_,T.targetRouterState,T.currentRouterState,S,C).activate(y),T)))(this.rootContexts,C.routeReuseStrategy,R=>this.events.next(R),this.inputBindingEnabled),xc(1),oo({next:R=>{var N;M=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new ls(R.id,this.urlSerializer.serialize(R.extractedUrl),this.urlSerializer.serialize(R.urlAfterRedirects))),null===(N=this.titleStrategy)||void 0===N||N.updateTitle(R.targetRouterState.snapshot),R.resolve(!0)},complete:()=>{M=!0}}),xu(this.transitionAbortSubject.pipe(oo(R=>{throw R}))),ku(()=>{var R;!M&&!A&&this.cancelNavigationTransition(I,"",Io.SupersededByNewNavigation),(null===(R=this.currentTransition)||void 0===R?void 0:R.id)===I.id&&(this.currentNavigation=null,this.currentTransition=null)}),Lc(R=>{if(A=!0,HA(R))this.events.next(new $c(I.id,this.urlSerializer.serialize(I.extractedUrl),R.message,R.cancellationCode)),function c6(y){return HA(y)&&Bc(y.url)}(R)?this.events.next(new Zv(R.url)):I.resolve(!1);else{var N;this.events.next(new Gh(I.id,this.urlSerializer.serialize(I.extractedUrl),R,null!==(N=I.targetSnapshot)&&void 0!==N?N:void 0));try{I.resolve(C.errorHandler(R))}catch(O){this.options.resolveNavigationPromiseOnError?I.resolve(!1):I.reject(O)}}return Pi}))}))}cancelNavigationTransition(C,T,D){const I=new $c(C.id,this.urlSerializer.serialize(C.extractedUrl),T,D);this.events.next(I),C.resolve(!1)}isUpdatingInternalState(){var C,T;return(null===(C=this.currentTransition)||void 0===C?void 0:C.extractedUrl.toString())!==(null===(T=this.currentTransition)||void 0===T?void 0:T.currentUrlTree.toString())}isUpdatedBrowserUrl(){var C,T;return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==(null===(C=this.currentTransition)||void 0===C?void 0:C.extractedUrl.toString())&&!(null!==(T=this.currentTransition)&&void 0!==T&&T.extras.skipLocationChange)}}return(y=_).\u0275fac=function(C){return new(C||y)},y.\u0275prov=Ot({token:y,factory:y.\u0275fac,providedIn:"root"}),_})();function f5(y){return y!==Bu}let h5=(()=>{var y;class _{}return(y=_).\u0275fac=function(C){return new(C||y)},y.\u0275prov=Ot({token:y,factory:()=>at(g5),providedIn:"root"}),_})();class p5{shouldDetach(_){return!1}store(_,S){}shouldAttach(_){return!1}retrieve(_){return null}shouldReuseRoute(_,S){return _.routeConfig===S.routeConfig}}let g5=(()=>{var y;class _ extends p5{}return(y=_).\u0275fac=(()=>{let S;return function(T){return(S||(S=Or(y)))(T||y)}})(),y.\u0275prov=Ot({token:y,factory:y.\u0275fac,providedIn:"root"}),_})(),tR=(()=>{var y;class _{}return(y=_).\u0275fac=function(C){return new(C||y)},y.\u0275prov=Ot({token:y,factory:()=>at(m5),providedIn:"root"}),_})(),m5=(()=>{var y;class _ extends tR{constructor(){super(...arguments),this.location=at(Cu),this.urlSerializer=at(jc),this.options=at(Jc,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=at(g_),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Vc,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=xA(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){var C,T;return"computed"!==this.canceledNavigationResolution?this.currentPageId:null!==(C=null===(T=this.restoredState())||void 0===T?void 0:T.\u0275routerPageId)&&void 0!==C?C:this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(C){return this.location.subscribe(T=>{"popstate"===T.type&&C(T.url,T.state)})}handleRouterEvent(C,T){if(C instanceof qh)this.stateMemento=this.createStateMemento();else if(C instanceof Hc)this.rawUrlTree=T.initialUrl;else if(C instanceof PA){if("eager"===this.urlUpdateStrategy&&!T.extras.skipLocationChange){const D=this.urlHandlingStrategy.merge(T.finalUrl,T.initialUrl);this.setBrowserUrl(D,T)}}else C instanceof Yv?(this.currentUrlTree=T.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(T.finalUrl,T.initialUrl),this.routerState=T.targetRouterState,"deferred"===this.urlUpdateStrategy&&(T.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,T))):C instanceof $c&&(C.code===Io.GuardRejected||C.code===Io.NoDataFromResolver)?this.restoreHistory(T):C instanceof Gh?this.restoreHistory(T,!0):C instanceof ls&&(this.lastSuccessfulId=C.id,this.currentPageId=this.browserPageId)}setBrowserUrl(C,T){const D=this.urlSerializer.serialize(C);if(this.location.isCurrentPathEqualTo(D)||T.extras.replaceUrl){const I=this.browserPageId,M=se(se({},T.extras.state),this.generateNgRouterState(T.id,I));this.location.replaceState(D,"",M)}else{const I=se(se({},T.extras.state),this.generateNgRouterState(T.id,this.browserPageId+1));this.location.go(D,"",I)}}restoreHistory(C,T=!1){if("computed"===this.canceledNavigationResolution){const I=this.currentPageId-this.browserPageId;0!==I?this.location.historyGo(I):this.currentUrlTree===C.finalUrl&&0===I&&(this.resetState(C),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(T&&this.resetState(C),this.resetUrlToCurrentUrlTree())}resetState(C){var T;this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,null!==(T=C.finalUrl)&&void 0!==T?T:this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(C,T){return"computed"===this.canceledNavigationResolution?{navigationId:C,\u0275routerPageId:T}:{navigationId:C}}}return(y=_).\u0275fac=(()=>{let S;return function(T){return(S||(S=Or(y)))(T||y)}})(),y.\u0275prov=Ot({token:y,factory:y.\u0275fac,providedIn:"root"}),_})();var Ku=function(y){return y[y.COMPLETE=0]="COMPLETE",y[y.FAILED=1]="FAILED",y[y.REDIRECTING=2]="REDIRECTING",y}(Ku||{});function nR(y,_){y.events.pipe(cs(S=>S instanceof ls||S instanceof $c||S instanceof Gh||S instanceof Hc),k(S=>S instanceof ls||S instanceof Hc?Ku.COMPLETE:S instanceof $c&&(S.code===Io.Redirect||S.code===Io.SupersededByNewNavigation)?Ku.REDIRECTING:Ku.FAILED),cs(S=>S!==Ku.REDIRECTING),xc(1)).subscribe(()=>{_()})}function y5(y){throw y}const v5={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},_5={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Mo=(()=>{var y;class _{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){var C,T;this.disposed=!1,this.isNgZoneEnabled=!1,this.console=at(_D),this.stateManager=at(tR),this.options=at(Jc,{optional:!0})||{},this.pendingTasks=at(Is),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=at(Zh),this.urlSerializer=at(jc),this.location=at(Cu),this.urlHandlingStrategy=at(g_),this._events=new hr,this.errorHandler=this.options.errorHandler||y5,this.navigated=!1,this.routeReuseStrategy=at(h5),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=null!==(C=null===(T=at(Qc,{optional:!0}))||void 0===T?void 0:T.flat())&&void 0!==C?C:[],this.componentInputBindingEnabled=!!at(Jh,{optional:!0}),this.eventsSubscription=new Ze,this.isNgZoneEnabled=at(kn)instanceof kn&&kn.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:D=>{this.console.warn(D)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const C=this.navigationTransitions.events.subscribe(T=>{try{const D=this.navigationTransitions.currentTransition,I=this.navigationTransitions.currentNavigation;if(null!==D&&null!==I)if(this.stateManager.handleRouterEvent(T,I),T instanceof $c&&T.code!==Io.Redirect&&T.code!==Io.SupersededByNewNavigation)this.navigated=!0;else if(T instanceof ls)this.navigated=!0;else if(T instanceof Zv){const M=this.urlHandlingStrategy.merge(T.url,D.currentRawUrl),A={info:D.extras.info,skipLocationChange:D.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||f5(D.source)};this.scheduleNavigation(M,Bu,null,A,{resolve:D.resolve,reject:D.reject,promise:D.promise})}(function w5(y){return!(y instanceof Yv||y instanceof Zv)})(T)&&this._events.next(T)}catch(D){this.navigationTransitions.transitionAbortSubject.next(D)}});this.eventsSubscription.add(C)}resetRootComponentType(C){this.routerState.root.component=C,this.navigationTransitions.rootComponentType=C}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Bu,this.stateManager.restoredState())}setUpLocationChangeListener(){var C;null!==(C=this.nonRouterCurrentEntryChangeSubscription)&&void 0!==C||(this.nonRouterCurrentEntryChangeSubscription=this.stateManager.registerNonRouterCurrentEntryChangeListener((T,D)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(T,"popstate",D)},0)}))}navigateToSyncWithBrowser(C,T,D){const I={replaceUrl:!0},M=null!=D&&D.navigationId?D:null;if(D){const R=se({},D);delete R.navigationId,delete R.\u0275routerPageId,0!==Object.keys(R).length&&(I.state=R)}const A=this.parseUrl(C);this.scheduleNavigation(A,T,M,I)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(C){this.config=C.map(c_),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(C,T={}){const{relativeTo:D,queryParams:I,fragment:M,queryParamsHandling:A,preserveFragment:R}=T,N=R?this.currentUrlTree.fragment:M;let L,O=null;switch(A){case"merge":O=se(se({},this.currentUrlTree.queryParams),I);break;case"preserve":O=this.currentUrlTree.queryParams;break;default:O=I||null}null!==O&&(O=this.removeEmptyProps(O));try{L=TA(D?D.snapshot:this.routerState.snapshot.root)}catch($){("string"!=typeof C[0]||!C[0].startsWith("/"))&&(C=[]),L=this.currentUrlTree.root}return EA(L,C,O,null!=N?N:null)}navigateByUrl(C,T={skipLocationChange:!1}){const D=Bc(C)?C:this.parseUrl(C),I=this.urlHandlingStrategy.merge(D,this.rawUrlTree);return this.scheduleNavigation(I,Bu,null,T)}navigate(C,T={skipLocationChange:!1}){return function C5(y){for(let _=0;_<y.length;_++)if(null==y[_])throw new j(4008,!1)}(C),this.navigateByUrl(this.createUrlTree(C,T),T)}serializeUrl(C){return this.urlSerializer.serialize(C)}parseUrl(C){try{return this.urlSerializer.parse(C)}catch(T){return this.urlSerializer.parse("/")}}isActive(C,T){let D;if(D=!0===T?se({},v5):!1===T?se({},_5):T,Bc(C))return gA(this.currentUrlTree,C,D);const I=this.parseUrl(C);return gA(this.currentUrlTree,I,D)}removeEmptyProps(C){return Object.entries(C).reduce((T,[D,I])=>(null!=I&&(T[D]=I),T),{})}scheduleNavigation(C,T,D,I,M){if(this.disposed)return Promise.resolve(!1);let A,R,N;M?(A=M.resolve,R=M.reject,N=M.promise):N=new Promise((L,$)=>{A=L,R=$});const O=this.pendingTasks.add();return nR(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(O))}),this.navigationTransitions.handleNavigationRequest({source:T,restoredState:D,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:C,extras:I,resolve:A,reject:R,promise:N,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),N.catch(L=>Promise.reject(L))}}return(y=_).\u0275fac=function(C){return new(C||y)},y.\u0275prov=Ot({token:y,factory:y.\u0275fac,providedIn:"root"}),_})();class rR{}let T5=(()=>{var y;class _{constructor(C,T,D,I,M){this.router=C,this.injector=D,this.preloadingStrategy=I,this.loader=M}setUpPreloading(){this.subscription=this.router.events.pipe(cs(C=>C instanceof ls),Fc(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(C,T){const D=[];for(const R of T){var I,M;R.providers&&!R._injector&&(R._injector=Rf(R.providers,C,"Route: ".concat(R.path)));const N=null!==(I=R._injector)&&void 0!==I?I:C,O=null!==(M=R._loadedInjector)&&void 0!==M?M:N;var A;(R.loadChildren&&!R._loadedRoutes&&void 0===R.canLoad||R.loadComponent&&!R._loadedComponent)&&D.push(this.preloadConfig(N,R)),(R.children||R._loadedRoutes)&&D.push(this.processRoutes(O,null!==(A=R.children)&&void 0!==A?A:R._loadedRoutes))}return Nr(D).pipe(Ou())}preloadConfig(C,T){return this.preloadingStrategy.preload(T,()=>{let D;D=T.loadChildren&&void 0===T.canLoad?this.loader.loadChildren(C,T):sn(null);const I=D.pipe(zr(M=>{var A;return null===M?sn(void 0):(T._loadedRoutes=M.routes,T._loadedInjector=M.injector,this.processRoutes(null!==(A=M.injector)&&void 0!==A?A:C,M.routes))}));return T.loadComponent&&!T._loadedComponent?Nr([I,this.loader.loadComponent(T)]).pipe(Ou()):I})}}return(y=_).\u0275fac=function(C){return new(C||y)($t(Mo),$t(MD),$t(Xr),$t(rR),$t(p_))},y.\u0275prov=Ot({token:y,factory:y.\u0275fac,providedIn:"root"}),_})();const y_=new Rt("");let oR=(()=>{var y;class _{constructor(C,T,D,I,M={}){this.urlSerializer=C,this.transitions=T,this.viewportScroller=D,this.zone=I,this.options=M,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},this.environmentInjector=at(Xr),M.scrollPositionRestoration||(M.scrollPositionRestoration="disabled"),M.anchorScrolling||(M.anchorScrolling="disabled")}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(C=>{C instanceof qh?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=C.navigationTrigger,this.restoredId=C.restoredState?C.restoredState.navigationId:0):C instanceof ls?(this.lastId=C.id,this.scheduleScrollEvent(C,this.urlSerializer.parse(C.urlAfterRedirects).fragment)):C instanceof Hc&&C.code===Wh.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(C,this.urlSerializer.parse(C.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(C=>{C instanceof NA&&(C.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(C.position):C.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(C.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(C,T){var D=this;this.zone.runOutsideAngular((0,pe.A)(function*(){yield new Promise(I=>{setTimeout(()=>{I()}),Mm(()=>{I()},{injector:D.environmentInjector})}),D.zone.run(()=>{D.transitions.events.next(new NA(C,"popstate"===D.lastSource?D.store[D.restoredId]:null,T))})}))}ngOnDestroy(){var C,T;null===(C=this.routerEventsSubscription)||void 0===C||C.unsubscribe(),null===(T=this.scrollEventsSubscription)||void 0===T||T.unsubscribe()}}return(y=_).\u0275fac=function(C){!function bb(){throw new Error("invalid")}()},y.\u0275prov=Ot({token:y,factory:y.\u0275fac}),_})();function xi(y,_){return{\u0275kind:y,\u0275providers:_}}function sR(){const y=at(eo);return _=>{var S,C;const T=y.get(Rs);if(_!==T.components[0])return;const D=y.get(Mo),I=y.get(aR);1===y.get(v_)&&D.initialNavigation(),null===(S=y.get(cR,null,Cn.Optional))||void 0===S||S.setUpPreloading(),null===(C=y.get(y_,null,Cn.Optional))||void 0===C||C.init(),D.resetRootComponentType(T.componentTypes[0]),I.closed||(I.next(),I.complete(),I.unsubscribe())}}const aR=new Rt("",{factory:()=>new hr}),v_=new Rt("",{providedIn:"root",factory:()=>1}),cR=new Rt("");function M5(y){return xi(0,[{provide:cR,useExisting:T5},{provide:rR,useExisting:y}])}function R5(y){return xi(9,[{provide:ZA,useValue:u5},{provide:eR,useValue:se({skipNextTransition:!(null==y||!y.skipInitialTransition)},y)}])}const lR=new Rt("ROUTER_FORROOT_GUARD"),P5=[Cu,{provide:jc,useClass:Gv},Mo,$u,{provide:qc,useFactory:function iR(y){return y.routerState.root},deps:[Mo]},p_,[]];let N5=(()=>{var y;class _{constructor(C){}static forRoot(C,T){return{ngModule:_,providers:[P5,[],{provide:Qc,multi:!0,useValue:C},{provide:lR,useFactory:F5,deps:[[Mo,new wd,new bd]]},{provide:Jc,useValue:T||{}},null!=T&&T.useHash?{provide:ya,useClass:X$}:{provide:ya,useClass:yI},{provide:y_,useFactory:()=>{const y=at(y3),_=at(kn),S=at(Jc),C=at(Zh),T=at(jc);return S.scrollOffset&&y.setOffset(S.scrollOffset),new oR(T,C,y,_,S)}},null!=T&&T.preloadingStrategy?M5(T.preloadingStrategy).\u0275providers:[],null!=T&&T.initialNavigation?L5(T):[],null!=T&&T.bindToComponentInputs?xi(8,[VA,{provide:Jh,useExisting:VA}]).\u0275providers:[],null!=T&&T.enableViewTransitions?R5().\u0275providers:[],[{provide:uR,useFactory:sR},{provide:Ay,multi:!0,useExisting:uR}]]}}static forChild(C){return{ngModule:_,providers:[{provide:Qc,multi:!0,useValue:C}]}}}return(y=_).\u0275fac=function(C){return new(C||y)($t(lR,8))},y.\u0275mod=qo({type:y}),y.\u0275inj=Po({}),_})();function F5(y){return"guarded"}function L5(y){return["disabled"===y.initialNavigation?xi(3,[{provide:Iy,multi:!0,useFactory:()=>{const _=at(Mo);return()=>{_.setUpLocationChangeListener()}}},{provide:v_,useValue:2}]).\u0275providers:[],"enabledBlocking"===y.initialNavigation?xi(2,[{provide:v_,useValue:0},{provide:Iy,multi:!0,deps:[eo],useFactory:_=>{const S=_.get(J$,Promise.resolve());return()=>S.then(()=>new Promise(C=>{const T=_.get(Mo),D=_.get(aR);nR(T,()=>{C(!0)}),_.get(Zh).afterPreactivation=()=>(C(!0),D.closed?sn(void 0):D),T.initialNavigation()}))}}]).\u0275providers:[]]}const uR=new Rt("");class ep{}class tp{}class Vo{constructor(_){this.normalizedNames=new Map,this.lazyUpdate=null,_?"string"==typeof _?this.lazyInit=()=>{this.headers=new Map,_.split("\n").forEach(S=>{const C=S.indexOf(":");if(C>0){const T=S.slice(0,C),D=T.toLowerCase(),I=S.slice(C+1).trim();this.maybeSetNormalizedName(T,D),this.headers.has(D)?this.headers.get(D).push(I):this.headers.set(D,[I])}})}:typeof Headers<"u"&&_ instanceof Headers?(this.headers=new Map,_.forEach((S,C)=>{this.setHeaderEntries(C,S)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(_).forEach(([S,C])=>{this.setHeaderEntries(S,C)})}:this.headers=new Map}has(_){return this.init(),this.headers.has(_.toLowerCase())}get(_){this.init();const S=this.headers.get(_.toLowerCase());return S&&S.length>0?S[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(_){return this.init(),this.headers.get(_.toLowerCase())||null}append(_,S){return this.clone({name:_,value:S,op:"a"})}set(_,S){return this.clone({name:_,value:S,op:"s"})}delete(_,S){return this.clone({name:_,value:S,op:"d"})}maybeSetNormalizedName(_,S){this.normalizedNames.has(S)||this.normalizedNames.set(S,_)}init(){this.lazyInit&&(this.lazyInit instanceof Vo?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(_=>this.applyUpdate(_)),this.lazyUpdate=null))}copyFrom(_){_.init(),Array.from(_.headers.keys()).forEach(S=>{this.headers.set(S,_.headers.get(S)),this.normalizedNames.set(S,_.normalizedNames.get(S))})}clone(_){const S=new Vo;return S.lazyInit=this.lazyInit&&this.lazyInit instanceof Vo?this.lazyInit:this,S.lazyUpdate=(this.lazyUpdate||[]).concat([_]),S}applyUpdate(_){const S=_.name.toLowerCase();switch(_.op){case"a":case"s":let C=_.value;if("string"==typeof C&&(C=[C]),0===C.length)return;this.maybeSetNormalizedName(_.name,S);const T=("a"===_.op?this.headers.get(S):void 0)||[];T.push(...C),this.headers.set(S,T);break;case"d":const D=_.value;if(D){let I=this.headers.get(S);if(!I)return;I=I.filter(M=>-1===D.indexOf(M)),0===I.length?(this.headers.delete(S),this.normalizedNames.delete(S)):this.headers.set(S,I)}else this.headers.delete(S),this.normalizedNames.delete(S)}}setHeaderEntries(_,S){const C=(Array.isArray(S)?S:[S]).map(D=>D.toString()),T=_.toLowerCase();this.headers.set(T,C),this.maybeSetNormalizedName(_,T)}forEach(_){this.init(),Array.from(this.normalizedNames.keys()).forEach(S=>_(this.normalizedNames.get(S),this.headers.get(S)))}}class j5{encodeKey(_){return dR(_)}encodeValue(_){return dR(_)}decodeKey(_){return decodeURIComponent(_)}decodeValue(_){return decodeURIComponent(_)}}const $5=/%(\d[a-f0-9])/gi,H5={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function dR(y){return encodeURIComponent(y).replace($5,(_,S)=>{var C;return null!==(C=H5[S])&&void 0!==C?C:_})}function np(y){return"".concat(y)}class Fs{constructor(_={}){if(this.updates=null,this.cloneFrom=null,this.encoder=_.encoder||new j5,_.fromString){if(_.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function B5(y,_){const S=new Map;return y.length>0&&y.replace(/^\?/,"").split("&").forEach(T=>{const D=T.indexOf("="),[I,M]=-1==D?[_.decodeKey(T),""]:[_.decodeKey(T.slice(0,D)),_.decodeValue(T.slice(D+1))],A=S.get(I)||[];A.push(M),S.set(I,A)}),S}(_.fromString,this.encoder)}else _.fromObject?(this.map=new Map,Object.keys(_.fromObject).forEach(S=>{const C=_.fromObject[S],T=Array.isArray(C)?C.map(np):[np(C)];this.map.set(S,T)})):this.map=null}has(_){return this.init(),this.map.has(_)}get(_){this.init();const S=this.map.get(_);return S?S[0]:null}getAll(_){return this.init(),this.map.get(_)||null}keys(){return this.init(),Array.from(this.map.keys())}append(_,S){return this.clone({param:_,value:S,op:"a"})}appendAll(_){const S=[];return Object.keys(_).forEach(C=>{const T=_[C];Array.isArray(T)?T.forEach(D=>{S.push({param:C,value:D,op:"a"})}):S.push({param:C,value:T,op:"a"})}),this.clone(S)}set(_,S){return this.clone({param:_,value:S,op:"s"})}delete(_,S){return this.clone({param:_,value:S,op:"d"})}toString(){return this.init(),this.keys().map(_=>{const S=this.encoder.encodeKey(_);return this.map.get(_).map(C=>S+"="+this.encoder.encodeValue(C)).join("&")}).filter(_=>""!==_).join("&")}clone(_){const S=new Fs({encoder:this.encoder});return S.cloneFrom=this.cloneFrom||this,S.updates=(this.updates||[]).concat(_),S}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(_=>this.map.set(_,this.cloneFrom.map.get(_))),this.updates.forEach(_=>{switch(_.op){case"a":case"s":const S=("a"===_.op?this.map.get(_.param):void 0)||[];S.push(np(_.value)),this.map.set(_.param,S);break;case"d":if(void 0===_.value){this.map.delete(_.param);break}{let C=this.map.get(_.param)||[];const T=C.indexOf(np(_.value));-1!==T&&C.splice(T,1),C.length>0?this.map.set(_.param,C):this.map.delete(_.param)}}}),this.cloneFrom=this.updates=null)}}class z5{constructor(){this.map=new Map}set(_,S){return this.map.set(_,S),this}get(_){return this.map.has(_)||this.map.set(_,_.defaultValue()),this.map.get(_)}delete(_){return this.map.delete(_),this}has(_){return this.map.has(_)}keys(){return this.map.keys()}}function fR(y){return typeof ArrayBuffer<"u"&&y instanceof ArrayBuffer}function hR(y){return typeof Blob<"u"&&y instanceof Blob}function pR(y){return typeof FormData<"u"&&y instanceof FormData}class Ju{constructor(_,S,C,T){var D,I;let M;if(this.url=S,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=_.toUpperCase(),function q5(y){switch(y){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||T?(this.body=void 0!==C?C:null,M=T):M=C,M&&(this.reportProgress=!!M.reportProgress,this.withCredentials=!!M.withCredentials,M.responseType&&(this.responseType=M.responseType),M.headers&&(this.headers=M.headers),M.context&&(this.context=M.context),M.params&&(this.params=M.params),this.transferCache=M.transferCache),null!==(D=this.headers)&&void 0!==D||(this.headers=new Vo),null!==(I=this.context)&&void 0!==I||(this.context=new z5),this.params){const A=this.params.toString();if(0===A.length)this.urlWithParams=S;else{const R=S.indexOf("?");this.urlWithParams=S+(-1===R?"?":R<S.length-1?"&":"")+A}}else this.params=new Fs,this.urlWithParams=S}serializeBody(){return null===this.body?null:"string"==typeof this.body||fR(this.body)||hR(this.body)||pR(this.body)||function W5(y){return typeof URLSearchParams<"u"&&y instanceof URLSearchParams}(this.body)?this.body:this.body instanceof Fs?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||pR(this.body)?null:hR(this.body)?this.body.type||null:fR(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Fs?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(_={}){var S,C,T,D;const I=_.method||this.method,M=_.url||this.url,A=_.responseType||this.responseType,R=null!==(S=_.transferCache)&&void 0!==S?S:this.transferCache,N=void 0!==_.body?_.body:this.body,O=null!==(C=_.withCredentials)&&void 0!==C?C:this.withCredentials,L=null!==(T=_.reportProgress)&&void 0!==T?T:this.reportProgress;let $=_.headers||this.headers,Q=_.params||this.params;const ae=null!==(D=_.context)&&void 0!==D?D:this.context;return void 0!==_.setHeaders&&($=Object.keys(_.setHeaders).reduce((Ce,Ee)=>Ce.set(Ee,_.setHeaders[Ee]),$)),_.setParams&&(Q=Object.keys(_.setParams).reduce((Ce,Ee)=>Ce.set(Ee,_.setParams[Ee]),Q)),new Ju(I,M,N,{params:Q,headers:$,context:ae,reportProgress:L,responseType:A,withCredentials:O,transferCache:R})}}var Ls=function(y){return y[y.Sent=0]="Sent",y[y.UploadProgress=1]="UploadProgress",y[y.ResponseHeader=2]="ResponseHeader",y[y.DownloadProgress=3]="DownloadProgress",y[y.Response=4]="Response",y[y.User=5]="User",y}(Ls||{});class __{constructor(_,S=Qu.Ok,C="OK"){this.headers=_.headers||new Vo,this.status=void 0!==_.status?_.status:S,this.statusText=_.statusText||C,this.url=_.url||null,this.ok=this.status>=200&&this.status<300}}class rp extends __{constructor(_={}){super(_),this.type=Ls.ResponseHeader}clone(_={}){return new rp({headers:_.headers||this.headers,status:void 0!==_.status?_.status:this.status,statusText:_.statusText||this.statusText,url:_.url||this.url||void 0})}}class Sa extends __{constructor(_={}){super(_),this.type=Ls.Response,this.body=void 0!==_.body?_.body:null}clone(_={}){return new Sa({body:void 0!==_.body?_.body:this.body,headers:_.headers||this.headers,status:void 0!==_.status?_.status:this.status,statusText:_.statusText||this.statusText,url:_.url||this.url||void 0})}}class Xc extends __{constructor(_){super(_,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?"Http failure during parsing for ".concat(_.url||"(unknown url)"):"Http failure response for ".concat(_.url||"(unknown url)",": ").concat(_.status," ").concat(_.statusText),this.error=_.error||null}}var Qu=function(y){return y[y.Continue=100]="Continue",y[y.SwitchingProtocols=101]="SwitchingProtocols",y[y.Processing=102]="Processing",y[y.EarlyHints=103]="EarlyHints",y[y.Ok=200]="Ok",y[y.Created=201]="Created",y[y.Accepted=202]="Accepted",y[y.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",y[y.NoContent=204]="NoContent",y[y.ResetContent=205]="ResetContent",y[y.PartialContent=206]="PartialContent",y[y.MultiStatus=207]="MultiStatus",y[y.AlreadyReported=208]="AlreadyReported",y[y.ImUsed=226]="ImUsed",y[y.MultipleChoices=300]="MultipleChoices",y[y.MovedPermanently=301]="MovedPermanently",y[y.Found=302]="Found",y[y.SeeOther=303]="SeeOther",y[y.NotModified=304]="NotModified",y[y.UseProxy=305]="UseProxy",y[y.Unused=306]="Unused",y[y.TemporaryRedirect=307]="TemporaryRedirect",y[y.PermanentRedirect=308]="PermanentRedirect",y[y.BadRequest=400]="BadRequest",y[y.Unauthorized=401]="Unauthorized",y[y.PaymentRequired=402]="PaymentRequired",y[y.Forbidden=403]="Forbidden",y[y.NotFound=404]="NotFound",y[y.MethodNotAllowed=405]="MethodNotAllowed",y[y.NotAcceptable=406]="NotAcceptable",y[y.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",y[y.RequestTimeout=408]="RequestTimeout",y[y.Conflict=409]="Conflict",y[y.Gone=410]="Gone",y[y.LengthRequired=411]="LengthRequired",y[y.PreconditionFailed=412]="PreconditionFailed",y[y.PayloadTooLarge=413]="PayloadTooLarge",y[y.UriTooLong=414]="UriTooLong",y[y.UnsupportedMediaType=415]="UnsupportedMediaType",y[y.RangeNotSatisfiable=416]="RangeNotSatisfiable",y[y.ExpectationFailed=417]="ExpectationFailed",y[y.ImATeapot=418]="ImATeapot",y[y.MisdirectedRequest=421]="MisdirectedRequest",y[y.UnprocessableEntity=422]="UnprocessableEntity",y[y.Locked=423]="Locked",y[y.FailedDependency=424]="FailedDependency",y[y.TooEarly=425]="TooEarly",y[y.UpgradeRequired=426]="UpgradeRequired",y[y.PreconditionRequired=428]="PreconditionRequired",y[y.TooManyRequests=429]="TooManyRequests",y[y.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",y[y.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",y[y.InternalServerError=500]="InternalServerError",y[y.NotImplemented=501]="NotImplemented",y[y.BadGateway=502]="BadGateway",y[y.ServiceUnavailable=503]="ServiceUnavailable",y[y.GatewayTimeout=504]="GatewayTimeout",y[y.HttpVersionNotSupported=505]="HttpVersionNotSupported",y[y.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",y[y.InsufficientStorage=507]="InsufficientStorage",y[y.LoopDetected=508]="LoopDetected",y[y.NotExtended=510]="NotExtended",y[y.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",y}(Qu||{});function C_(y,_){return{body:_,headers:y.headers,context:y.context,observe:y.observe,params:y.params,reportProgress:y.reportProgress,responseType:y.responseType,withCredentials:y.withCredentials,transferCache:y.transferCache}}let w_=(()=>{var y;class _{constructor(C){this.handler=C}request(C,T,D={}){let I;if(C instanceof Ju)I=C;else{let R,N;R=D.headers instanceof Vo?D.headers:new Vo(D.headers),D.params&&(N=D.params instanceof Fs?D.params:new Fs({fromObject:D.params})),I=new Ju(C,T,void 0!==D.body?D.body:null,{headers:R,context:D.context,params:N,reportProgress:D.reportProgress,responseType:D.responseType||"json",withCredentials:D.withCredentials,transferCache:D.transferCache})}const M=sn(I).pipe(Fc(R=>this.handler.handle(R)));if(C instanceof Ju||"events"===D.observe)return M;const A=M.pipe(cs(R=>R instanceof Sa));switch(D.observe||"body"){case"body":switch(I.responseType){case"arraybuffer":return A.pipe(k(R=>{if(null!==R.body&&!(R.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return R.body}));case"blob":return A.pipe(k(R=>{if(null!==R.body&&!(R.body instanceof Blob))throw new Error("Response is not a Blob.");return R.body}));case"text":return A.pipe(k(R=>{if(null!==R.body&&"string"!=typeof R.body)throw new Error("Response is not a string.");return R.body}));default:return A.pipe(k(R=>R.body))}case"response":return A;default:throw new Error("Unreachable: unhandled observe type ".concat(D.observe,"}"))}}delete(C,T={}){return this.request("DELETE",C,T)}get(C,T={}){return this.request("GET",C,T)}head(C,T={}){return this.request("HEAD",C,T)}jsonp(C,T){return this.request("JSONP",C,{params:(new Fs).append(T,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(C,T={}){return this.request("OPTIONS",C,T)}patch(C,T,D={}){return this.request("PATCH",C,C_(D,T))}post(C,T,D={}){return this.request("POST",C,C_(D,T))}put(C,T,D={}){return this.request("PUT",C,C_(D,T))}}return(y=_).\u0275fac=function(C){return new(C||y)($t(ep))},y.\u0275prov=Ot({token:y,factory:y.\u0275fac}),_})();function mR(y,_){return _(y)}function X5(y,_){return(S,C)=>_.intercept(S,{handle:T=>y(T,C)})}const Z5=new Rt(""),Xu=new Rt(""),yR=new Rt(""),vR=new Rt("");function eW(){let y=null;return(_,S)=>{var C;null===y&&(y=(null!==(C=at(Z5,{optional:!0}))&&void 0!==C?C:[]).reduceRight(X5,mR));const T=at(Is),D=T.add();return y(_,S).pipe(ku(()=>T.remove(D)))}}let _R=(()=>{var y;class _ extends ep{constructor(C,T){super(),this.backend=C,this.injector=T,this.chain=null,this.pendingTasks=at(Is);const D=at(vR,{optional:!0});this.backend=null!=D?D:C}handle(C){if(null===this.chain){const D=Array.from(new Set([...this.injector.get(Xu),...this.injector.get(yR,[])]));this.chain=D.reduceRight((I,M)=>function Y5(y,_,S){return(C,T)=>ui(S,()=>_(C,D=>y(D,T)))}(I,M,this.injector),mR)}const T=this.pendingTasks.add();return this.chain(C,D=>this.backend.handle(D)).pipe(ku(()=>this.pendingTasks.remove(T)))}}return(y=_).\u0275fac=function(C){return new(C||y)($t(tp),$t(Xr))},y.\u0275prov=Ot({token:y,factory:y.\u0275fac}),_})();const iW=/^\)\]\}',?\n/;let wR=(()=>{var y;class _{constructor(C){this.xhrFactory=C}handle(C){if("JSONP"===C.method)throw new j(-2800,!1);const T=this.xhrFactory;return(T.\u0275loadImpl?Nr(T.\u0275loadImpl()):sn(null)).pipe(ii(()=>new Qn(I=>{const M=T.build();if(M.open(C.method,C.urlWithParams),C.withCredentials&&(M.withCredentials=!0),C.headers.forEach((Ce,Ee)=>M.setRequestHeader(Ce,Ee.join(","))),C.headers.has("Accept")||M.setRequestHeader("Accept","application/json, text/plain, */*"),!C.headers.has("Content-Type")){const Ce=C.detectContentTypeHeader();null!==Ce&&M.setRequestHeader("Content-Type",Ce)}if(C.responseType){const Ce=C.responseType.toLowerCase();M.responseType="json"!==Ce?Ce:"text"}const A=C.serializeBody();let R=null;const N=()=>{if(null!==R)return R;const Ce=M.statusText||"OK",Ee=new Vo(M.getAllResponseHeaders()),Ae=function sW(y){return"responseURL"in y&&y.responseURL?y.responseURL:/^X-Request-URL:/m.test(y.getAllResponseHeaders())?y.getResponseHeader("X-Request-URL"):null}(M)||C.url;return R=new rp({headers:Ee,status:M.status,statusText:Ce,url:Ae}),R},O=()=>{let{headers:Ce,status:Ee,statusText:Ae,url:ht}=N(),vt=null;Ee!==Qu.NoContent&&(vt=typeof M.response>"u"?M.responseText:M.response),0===Ee&&(Ee=vt?Qu.Ok:0);let qt=Ee>=200&&Ee<300;if("json"===C.responseType&&"string"==typeof vt){const Nn=vt;vt=vt.replace(iW,"");try{vt=""!==vt?JSON.parse(vt):null}catch(An){vt=Nn,qt&&(qt=!1,vt={error:An,text:vt})}}qt?(I.next(new Sa({body:vt,headers:Ce,status:Ee,statusText:Ae,url:ht||void 0})),I.complete()):I.error(new Xc({error:vt,headers:Ce,status:Ee,statusText:Ae,url:ht||void 0}))},L=Ce=>{const{url:Ee}=N(),Ae=new Xc({error:Ce,status:M.status||0,statusText:M.statusText||"Unknown Error",url:Ee||void 0});I.error(Ae)};let $=!1;const Q=Ce=>{$||(I.next(N()),$=!0);let Ee={type:Ls.DownloadProgress,loaded:Ce.loaded};Ce.lengthComputable&&(Ee.total=Ce.total),"text"===C.responseType&&M.responseText&&(Ee.partialText=M.responseText),I.next(Ee)},ae=Ce=>{let Ee={type:Ls.UploadProgress,loaded:Ce.loaded};Ce.lengthComputable&&(Ee.total=Ce.total),I.next(Ee)};return M.addEventListener("load",O),M.addEventListener("error",L),M.addEventListener("timeout",L),M.addEventListener("abort",L),C.reportProgress&&(M.addEventListener("progress",Q),null!==A&&M.upload&&M.upload.addEventListener("progress",ae)),M.send(A),I.next({type:Ls.Sent}),()=>{M.removeEventListener("error",L),M.removeEventListener("abort",L),M.removeEventListener("load",O),M.removeEventListener("timeout",L),C.reportProgress&&(M.removeEventListener("progress",Q),null!==A&&M.upload&&M.upload.removeEventListener("progress",ae)),M.readyState!==M.DONE&&M.abort()}})))}}return(y=_).\u0275fac=function(C){return new(C||y)($t(FI))},y.\u0275prov=Ot({token:y,factory:y.\u0275fac}),_})();const T_=new Rt(""),bR=new Rt("",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),SR=new Rt("",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class TR{}let lW=(()=>{var y;class _{constructor(C,T,D){this.doc=C,this.platform=T,this.cookieName=D,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const C=this.doc.cookie||"";return C!==this.lastCookieString&&(this.parseCount++,this.lastToken=II(C,this.cookieName),this.lastCookieString=C),this.lastToken}}return(y=_).\u0275fac=function(C){return new(C||y)($t(go),$t(bs),$t(bR))},y.\u0275prov=Ot({token:y,factory:y.\u0275fac}),_})();function uW(y,_){const S=y.url.toLowerCase();if(!at(T_)||"GET"===y.method||"HEAD"===y.method||S.startsWith("http://")||S.startsWith("https://"))return _(y);const C=at(TR).getToken(),T=at(SR);return null!=C&&!y.headers.has(T)&&(y=y.clone({headers:y.headers.set(T,C)})),_(y)}var Us=function(y){return y[y.Interceptors=0]="Interceptors",y[y.LegacyInterceptors=1]="LegacyInterceptors",y[y.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",y[y.NoXsrfProtection=3]="NoXsrfProtection",y[y.JsonpSupport=4]="JsonpSupport",y[y.RequestsMadeViaParent=5]="RequestsMadeViaParent",y[y.Fetch=6]="Fetch",y}(Us||{});function Ta(y,_){return{\u0275kind:y,\u0275providers:_}}function dW(...y){const _=[w_,wR,_R,{provide:ep,useExisting:_R},{provide:tp,useExisting:wR},{provide:Xu,useValue:uW,multi:!0},{provide:T_,useValue:!0},{provide:TR,useClass:lW}];for(const S of y)_.push(...S.\u0275providers);return function cl(y){return{\u0275providers:y}}(_)}const ER=new Rt("");let hW=(()=>{var y;class _{}return(y=_).\u0275fac=function(C){return new(C||y)},y.\u0275mod=qo({type:y}),y.\u0275inj=Po({providers:[dW(Ta(Us.LegacyInterceptors,[{provide:ER,useFactory:eW},{provide:Xu,useExisting:ER,multi:!0}]))]}),_})(),OR=(()=>{var y;class _{constructor(C,T){this._renderer=C,this._elementRef=T,this.onChange=D=>{},this.onTouched=()=>{}}setProperty(C,T){this._renderer.setProperty(this._elementRef.nativeElement,C,T)}registerOnTouched(C){this.onTouched=C}registerOnChange(C){this.onChange=C}setDisabledState(C){this.setProperty("disabled",C)}}return(y=_).\u0275fac=function(C){return new(C||y)(dt(es),dt(Co))},y.\u0275dir=an({type:y}),_})(),Ea=(()=>{var y;class _ extends OR{}return(y=_).\u0275fac=(()=>{let S;return function(T){return(S||(S=Or(y)))(T||y)}})(),y.\u0275dir=an({type:y,features:[jn]}),_})();const Fi=new Rt(""),wW={provide:Fi,useExisting:Kt(()=>ip),multi:!0},SW=new Rt("");let ip=(()=>{var y;class _ extends OR{constructor(C,T,D){super(C,T),this._compositionMode=D,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function bW(){const y=Ns()?Ns().getUserAgent():"";return/android (\d+)/.test(y.toLowerCase())}())}writeValue(C){this.setProperty("value",null==C?"":C)}_handleInput(C){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(C)}_compositionStart(){this._composing=!0}_compositionEnd(C){this._composing=!1,this._compositionMode&&this.onChange(C)}}return(y=_).\u0275fac=function(C){return new(C||y)(dt(es),dt(Co),dt(SW,8))},y.\u0275dir=an({type:y,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(C,T){1&C&&qn("input",function(I){return T._handleInput(I.target.value)})("blur",function(){return T.onTouched()})("compositionstart",function(){return T._compositionStart()})("compositionend",function(I){return T._compositionEnd(I.target.value)})},features:[ar([wW]),jn]}),_})();const qr=new Rt(""),js=new Rt("");function zR(y){return null!=y}function qR(y){return gu(y)?Nr(y):y}function WR(y){let _={};return y.forEach(S=>{_=null!=S?se(se({},_),S):_}),0===Object.keys(_).length?null:_}function GR(y,_){return _.map(S=>S(y))}function KR(y){return y.map(_=>function EW(y){return!y.validate}(_)?_:S=>_.validate(S))}function E_(y){return null!=y?function JR(y){if(!y)return null;const _=y.filter(zR);return 0==_.length?null:function(S){return WR(GR(S,_))}}(KR(y)):null}function D_(y){return null!=y?function QR(y){if(!y)return null;const _=y.filter(zR);return 0==_.length?null:function(S){return function _W(...y){const _=oA(y),{args:S,keys:C}=iA(y),T=new Qn(D=>{const{length:I}=S;if(!I)return void D.complete();const M=new Array(I);let A=I,R=I;for(let N=0;N<I;N++){let O=!1;Ri(S[N]).subscribe(Te(D,L=>{O||(O=!0,R--),M[N]=L},()=>A--,void 0,()=>{(!A||!O)&&(R||D.next(C?aA(C,M):M),D.complete())}))}});return _?T.pipe(sA(_)):T}(GR(S,_).map(qR)).pipe(k(WR))}}(KR(y)):null}function XR(y,_){return null===y?[_]:Array.isArray(y)?[...y,_]:[y,_]}function I_(y){return y?Array.isArray(y)?y:[y]:[]}function ap(y,_){return Array.isArray(y)?y.includes(_):y===_}function eP(y,_){const S=I_(_);return I_(y).forEach(T=>{ap(S,T)||S.push(T)}),S}function tP(y,_){return I_(_).filter(S=>!ap(y,S))}class nP{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(_){this._rawValidators=_||[],this._composedValidatorFn=E_(this._rawValidators)}_setAsyncValidators(_){this._rawAsyncValidators=_||[],this._composedAsyncValidatorFn=D_(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(_){this._onDestroyCallbacks.push(_)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(_=>_()),this._onDestroyCallbacks=[]}reset(_=void 0){this.control&&this.control.reset(_)}hasError(_,S){return!!this.control&&this.control.hasError(_,S)}getError(_,S){return this.control?this.control.getError(_,S):null}}class io extends nP{get formDirective(){return null}get path(){return null}}class Bs extends nP{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class rP{constructor(_){this._cd=_}get isTouched(){var _;return!(null===(_=this._cd)||void 0===_||null===(_=_.control)||void 0===_||!_.touched)}get isUntouched(){var _;return!(null===(_=this._cd)||void 0===_||null===(_=_.control)||void 0===_||!_.untouched)}get isPristine(){var _;return!(null===(_=this._cd)||void 0===_||null===(_=_.control)||void 0===_||!_.pristine)}get isDirty(){var _;return!(null===(_=this._cd)||void 0===_||null===(_=_.control)||void 0===_||!_.dirty)}get isValid(){var _;return!(null===(_=this._cd)||void 0===_||null===(_=_.control)||void 0===_||!_.valid)}get isInvalid(){var _;return!(null===(_=this._cd)||void 0===_||null===(_=_.control)||void 0===_||!_.invalid)}get isPending(){var _;return!(null===(_=this._cd)||void 0===_||null===(_=_.control)||void 0===_||!_.pending)}get isSubmitted(){var _;return!(null===(_=this._cd)||void 0===_||!_.submitted)}}let oP=(()=>{var y;class _ extends rP{constructor(C){super(C)}}return(y=_).\u0275fac=function(C){return new(C||y)(dt(Bs,2))},y.\u0275dir=an({type:y,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(C,T){2&C&&jf("ng-untouched",T.isUntouched)("ng-touched",T.isTouched)("ng-pristine",T.isPristine)("ng-dirty",T.isDirty)("ng-valid",T.isValid)("ng-invalid",T.isInvalid)("ng-pending",T.isPending)},features:[jn]}),_})();const Yu="VALID",lp="INVALID",Yc="PENDING",Zu="DISABLED";function up(y){return null!=y&&!Array.isArray(y)&&"object"==typeof y}class N_{constructor(_,S){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(_),this._assignAsyncValidators(S)}get validator(){return this._composedValidatorFn}set validator(_){this._rawValidators=this._composedValidatorFn=_}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(_){this._rawAsyncValidators=this._composedAsyncValidatorFn=_}get parent(){return this._parent}get valid(){return this.status===Yu}get invalid(){return this.status===lp}get pending(){return this.status==Yc}get disabled(){return this.status===Zu}get enabled(){return this.status!==Zu}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(_){this._assignValidators(_)}setAsyncValidators(_){this._assignAsyncValidators(_)}addValidators(_){this.setValidators(eP(_,this._rawValidators))}addAsyncValidators(_){this.setAsyncValidators(eP(_,this._rawAsyncValidators))}removeValidators(_){this.setValidators(tP(_,this._rawValidators))}removeAsyncValidators(_){this.setAsyncValidators(tP(_,this._rawAsyncValidators))}hasValidator(_){return ap(this._rawValidators,_)}hasAsyncValidator(_){return ap(this._rawAsyncValidators,_)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(_={}){this.touched=!0,this._parent&&!_.onlySelf&&this._parent.markAsTouched(_)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(_=>_.markAllAsTouched())}markAsUntouched(_={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(S=>{S.markAsUntouched({onlySelf:!0})}),this._parent&&!_.onlySelf&&this._parent._updateTouched(_)}markAsDirty(_={}){this.pristine=!1,this._parent&&!_.onlySelf&&this._parent.markAsDirty(_)}markAsPristine(_={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(S=>{S.markAsPristine({onlySelf:!0})}),this._parent&&!_.onlySelf&&this._parent._updatePristine(_)}markAsPending(_={}){this.status=Yc,!1!==_.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!_.onlySelf&&this._parent.markAsPending(_)}disable(_={}){const S=this._parentMarkedDirty(_.onlySelf);this.status=Zu,this.errors=null,this._forEachChild(C=>{C.disable(se(se({},_),{},{onlySelf:!0}))}),this._updateValue(),!1!==_.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(se(se({},_),{},{skipPristineCheck:S})),this._onDisabledChange.forEach(C=>C(!0))}enable(_={}){const S=this._parentMarkedDirty(_.onlySelf);this.status=Yu,this._forEachChild(C=>{C.enable(se(se({},_),{},{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:_.emitEvent}),this._updateAncestors(se(se({},_),{},{skipPristineCheck:S})),this._onDisabledChange.forEach(C=>C(!1))}_updateAncestors(_){this._parent&&!_.onlySelf&&(this._parent.updateValueAndValidity(_),_.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(_){this._parent=_}getRawValue(){return this.value}updateValueAndValidity(_={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Yu||this.status===Yc)&&this._runAsyncValidator(_.emitEvent)),!1!==_.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!_.onlySelf&&this._parent.updateValueAndValidity(_)}_updateTreeValidity(_={emitEvent:!0}){this._forEachChild(S=>S._updateTreeValidity(_)),this.updateValueAndValidity({onlySelf:!0,emitEvent:_.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Zu:Yu}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(_){if(this.asyncValidator){this.status=Yc,this._hasOwnPendingAsyncValidator=!0;const S=qR(this.asyncValidator(this));this._asyncValidationSubscription=S.subscribe(C=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(C,{emitEvent:_})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(_,S={}){this.errors=_,this._updateControlsErrors(!1!==S.emitEvent)}get(_){let S=_;return null==S||(Array.isArray(S)||(S=S.split(".")),0===S.length)?null:S.reduce((C,T)=>C&&C._find(T),this)}getError(_,S){const C=S?this.get(S):this;return C&&C.errors?C.errors[_]:null}hasError(_,S){return!!this.getError(_,S)}get root(){let _=this;for(;_._parent;)_=_._parent;return _}_updateControlsErrors(_){this.status=this._calculateStatus(),_&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(_)}_initObservables(){this.valueChanges=new zn,this.statusChanges=new zn}_calculateStatus(){return this._allControlsDisabled()?Zu:this.errors?lp:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Yc)?Yc:this._anyControlsHaveStatus(lp)?lp:Yu}_anyControlsHaveStatus(_){return this._anyControls(S=>S.status===_)}_anyControlsDirty(){return this._anyControls(_=>_.dirty)}_anyControlsTouched(){return this._anyControls(_=>_.touched)}_updatePristine(_={}){this.pristine=!this._anyControlsDirty(),this._parent&&!_.onlySelf&&this._parent._updatePristine(_)}_updateTouched(_={}){this.touched=this._anyControlsTouched(),this._parent&&!_.onlySelf&&this._parent._updateTouched(_)}_registerOnCollectionChange(_){this._onCollectionChange=_}_setUpdateStrategy(_){up(_)&&null!=_.updateOn&&(this._updateOn=_.updateOn)}_parentMarkedDirty(_){return!_&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(_){return null}_assignValidators(_){this._rawValidators=Array.isArray(_)?_.slice():_,this._composedValidatorFn=function RW(y){return Array.isArray(y)?E_(y):y||null}(this._rawValidators)}_assignAsyncValidators(_){this._rawAsyncValidators=Array.isArray(_)?_.slice():_,this._composedAsyncValidatorFn=function PW(y){return Array.isArray(y)?D_(y):y||null}(this._rawAsyncValidators)}}const Da=new Rt("CallSetDisabledState",{providedIn:"root",factory:()=>ed}),ed="always";function td(y,_,S=ed){var C,T;(function k_(y,_){const S=function YR(y){return y._rawValidators}(y);null!==_.validator?y.setValidators(XR(S,_.validator)):"function"==typeof S&&y.setValidators([S]);const C=function ZR(y){return y._rawAsyncValidators}(y);null!==_.asyncValidator?y.setAsyncValidators(XR(C,_.asyncValidator)):"function"==typeof C&&y.setAsyncValidators([C]);const T=()=>y.updateValueAndValidity();hp(_._rawValidators,T),hp(_._rawAsyncValidators,T)})(y,_),_.valueAccessor.writeValue(y.value),(y.disabled||"always"===S)&&(null===(C=(T=_.valueAccessor).setDisabledState)||void 0===C||C.call(T,y.disabled)),function kW(y,_){_.valueAccessor.registerOnChange(S=>{y._pendingValue=S,y._pendingChange=!0,y._pendingDirty=!0,"change"===y.updateOn&&cP(y,_)})}(y,_),function FW(y,_){const S=(C,T)=>{_.valueAccessor.writeValue(C),T&&_.viewToModelUpdate(C)};y.registerOnChange(S),_._registerOnDestroy(()=>{y._unregisterOnChange(S)})}(y,_),function xW(y,_){_.valueAccessor.registerOnTouched(()=>{y._pendingTouched=!0,"blur"===y.updateOn&&y._pendingChange&&cP(y,_),"submit"!==y.updateOn&&y.markAsTouched()})}(y,_),function OW(y,_){if(_.valueAccessor.setDisabledState){const S=C=>{_.valueAccessor.setDisabledState(C)};y.registerOnDisabledChange(S),_._registerOnDestroy(()=>{y._unregisterOnDisabledChange(S)})}}(y,_)}function hp(y,_){y.forEach(S=>{S.registerOnValidatorChange&&S.registerOnValidatorChange(_)})}function cP(y,_){y._pendingDirty&&y.markAsDirty(),y.setValue(y._pendingValue,{emitModelToViewChange:!1}),_.viewToModelUpdate(y._pendingValue),y._pendingChange=!1}function dP(y,_){const S=y.indexOf(_);S>-1&&y.splice(S,1)}function fP(y){return"object"==typeof y&&null!==y&&2===Object.keys(y).length&&"value"in y&&"disabled"in y}Promise.resolve();const hP=class extends N_{constructor(_=null,S,C){super(function R_(y){return(up(y)?y.validators:y)||null}(S),function P_(y,_){return(up(_)?_.asyncValidators:y)||null}(C,S)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(_),this._setUpdateStrategy(S),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),up(S)&&(S.nonNullable||S.initialValueIsDefault)&&(this.defaultValue=fP(_)?_.value:_)}setValue(_,S={}){this.value=this._pendingValue=_,this._onChange.length&&!1!==S.emitModelToViewChange&&this._onChange.forEach(C=>C(this.value,!1!==S.emitViewToModelChange)),this.updateValueAndValidity(S)}patchValue(_,S={}){this.setValue(_,S)}reset(_=this.defaultValue,S={}){this._applyFormState(_),this.markAsPristine(S),this.markAsUntouched(S),this.setValue(this.value,S),this._pendingChange=!1}_updateValue(){}_anyControls(_){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(_){this._onChange.push(_)}_unregisterOnChange(_){dP(this._onChange,_)}registerOnDisabledChange(_){this._onDisabledChange.push(_)}_unregisterOnDisabledChange(_){dP(this._onDisabledChange,_)}_forEachChild(_){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(_){fP(_)?(this.value=this._pendingValue=_.value,_.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=_}},zW={provide:Bs,useExisting:Kt(()=>V_)},mP=Promise.resolve();let V_=(()=>{var y;class _ extends Bs{constructor(C,T,D,I,M,A){super(),this._changeDetectorRef=M,this.callSetDisabledState=A,this.control=new hP,this._registered=!1,this.name="",this.update=new zn,this._parent=C,this._setValidators(T),this._setAsyncValidators(D),this.valueAccessor=function L_(y,_){if(!_)return null;let S,C,T;return Array.isArray(_),_.forEach(D=>{D.constructor===ip?S=D:function VW(y){return Object.getPrototypeOf(y.constructor)===Ea}(D)?C=D:T=D}),T||C||S||null}(0,I)}ngOnChanges(C){if(this._checkForErrors(),!this._registered||"name"in C){if(this._registered&&(this._checkName(),this.formDirective)){const T=C.name.previousValue;this.formDirective.removeControl({name:T,path:this._getPath(T)})}this._setUpControl()}"isDisabled"in C&&this._updateDisabled(C),function F_(y,_){if(!y.hasOwnProperty("model"))return!1;const S=y.model;return!!S.isFirstChange()||!Object.is(_,S.currentValue)}(C,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(C){this.viewModel=C,this.update.emit(C)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){td(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(C){mP.then(()=>{var T;this.control.setValue(C,{emitViewToModelChange:!1}),null===(T=this._changeDetectorRef)||void 0===T||T.markForCheck()})}_updateDisabled(C){const T=C.isDisabled.currentValue,D=0!==T&&function Rc(y){return"boolean"==typeof y?y:null!=y&&"false"!==y}(T);mP.then(()=>{var I;D&&!this.control.disabled?this.control.disable():!D&&this.control.disabled&&this.control.enable(),null===(I=this._changeDetectorRef)||void 0===I||I.markForCheck()})}_getPath(C){return this._parent?function dp(y,_){return[..._.path,y]}(C,this._parent):[C]}}return(y=_).\u0275fac=function(C){return new(C||y)(dt(io,9),dt(qr,10),dt(js,10),dt(Fi,10),dt(mu,8),dt(Da,8))},y.\u0275dir=an({type:y,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[rr.None,"disabled","isDisabled"],model:[rr.None,"ngModel","model"],options:[rr.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[ar([zW]),jn,No]}),_})();const j_=new Rt("");let kP=(()=>{var y;class _{}return(y=_).\u0275fac=function(C){return new(C||y)},y.\u0275mod=qo({type:y}),y.\u0275inj=Po({}),_})(),mG=(()=>{var y;class _{static withConfig(C){var T;return{ngModule:_,providers:[{provide:Da,useValue:null!==(T=C.callSetDisabledState)&&void 0!==T?T:ed}]}}}return(y=_).\u0275fac=function(C){return new(C||y)},y.\u0275mod=qo({type:y}),y.\u0275inj=Po({imports:[kP]}),_})(),yG=(()=>{var y;class _{static withConfig(C){var T,D;return{ngModule:_,providers:[{provide:j_,useValue:null!==(T=C.warnOnNgModelWithFormControl)&&void 0!==T?T:"always"},{provide:Da,useValue:null!==(D=C.callSetDisabledState)&&void 0!==D?D:ed}]}}}return(y=_).\u0275fac=function(C){return new(C||y)},y.\u0275mod=qo({type:y}),y.\u0275inj=Po({imports:[kP]}),_})();function rd(y,_){var S={};for(var C in y)Object.prototype.hasOwnProperty.call(y,C)&&_.indexOf(C)<0&&(S[C]=y[C]);if(null!=y&&"function"==typeof Object.getOwnPropertySymbols){var T=0;for(C=Object.getOwnPropertySymbols(y);T<C.length;T++)_.indexOf(C[T])<0&&Object.prototype.propertyIsEnumerable.call(y,C[T])&&(S[C[T]]=y[C[T]])}return S}function Zc(y,_,S,C){return new(S||(S=Promise))(function(T,D){function I(R){try{A(C.next(R))}catch(N){D(N)}}function M(R){try{A(C.throw(R))}catch(N){D(N)}}function A(R){var N;R.done?T(R.value):(N=R.value,N instanceof S?N:new S(function(O){O(N)})).then(I,M)}A((C=C.apply(y,_||[])).next())})}"function"==typeof SuppressedError&&SuppressedError;const FP="2.0.1",gp=["teams.microsoft.com","teams.microsoft.us","gov.teams.microsoft.us","dod.teams.microsoft.us","int.teams.microsoft.com","outlook.office.com","outlook-sdf.office.com","outlook.office365.com","outlook-sdf.office365.com","outlook.office365.us","outlook-dod.office365.us","webmail.apps.mil","outlook.live.com","outlook-sdf.live.com","teams.live.com","local.teams.live.com","local.teams.live.com:8080","local.teams.office.com","local.teams.office.com:8080","devspaces.skype.com","*.www.office.com","www.office.com","word.office.com","excel.office.com","powerpoint.office.com","www.officeppe.com","*.www.microsoft365.com","www.microsoft365.com","bing.com","edgeservices.bing.com","work.bing.com","www.bing.com","www.staging-bing-int.com","*.cloud.microsoft","*.m365.cloud.microsoft","*.outlook.cloud.microsoft","chatuxmanager.svc.cloud.microsoft","copilot.microsoft.com","windows.msn.com","fa000000125.resources.office.net","fa000000129.resources.office.net","fa000000124.resources.office.net","fa000000128.resources.office.net","fa000000136.resources.office.net","fa000000125.officeapps.live.com","fa000000129.officeapps.live.com","fa000000124.officeapps.live.com","fa000000128.officeapps.live.com"],LP=1500,vG=new URL("https://res.cdn.office.net/teams-js/validDomains/json/validDomains.json"),_G=/^https:\/\//,mp="The library has not yet been initialized",CG="The runtime has not yet been initialized",wG="The runtime version is not supported";var UP,VP,jP,G_,BP,$P,HP,K_,zP,qP,y;(y=UP||(UP={})).Inline="inline",y.Desktop="desktop",y.Web="web",function(y){y.M365Content="m365content"}(VP||(VP={})),function(y){y.DriveId="driveId",y.GroupId="groupId",y.SiteId="siteId",y.UserId="userId"}(jP||(jP={})),function(y){y[y.NOT_SUPPORTED_ON_PLATFORM=100]="NOT_SUPPORTED_ON_PLATFORM",y[y.INTERNAL_ERROR=500]="INTERNAL_ERROR",y[y.NOT_SUPPORTED_IN_CURRENT_CONTEXT=501]="NOT_SUPPORTED_IN_CURRENT_CONTEXT",y[y.PERMISSION_DENIED=1e3]="PERMISSION_DENIED",y[y.NETWORK_ERROR=2e3]="NETWORK_ERROR",y[y.NO_HW_SUPPORT=3e3]="NO_HW_SUPPORT",y[y.INVALID_ARGUMENTS=4e3]="INVALID_ARGUMENTS",y[y.UNAUTHORIZED_USER_OPERATION=5e3]="UNAUTHORIZED_USER_OPERATION",y[y.INSUFFICIENT_RESOURCES=6e3]="INSUFFICIENT_RESOURCES",y[y.THROTTLE=7e3]="THROTTLE",y[y.USER_ABORT=8e3]="USER_ABORT",y[y.OPERATION_TIMED_OUT=8001]="OPERATION_TIMED_OUT",y[y.OLD_PLATFORM=9e3]="OLD_PLATFORM",y[y.FILE_NOT_FOUND=404]="FILE_NOT_FOUND",y[y.SIZE_EXCEEDED=1e4]="SIZE_EXCEEDED"}(G_||(G_={})),function(y){y.GeoLocation="geolocation",y.Media="media"}(BP||(BP={})),function(y){y.BCAIS="bcais",y.BCWAF="bcwaf",y.BCWBF="bcwbf"}($P||($P={})),function(y){y.Faculty="faculty",y.Student="student",y.Other="other"}(HP||(HP={})),function(y){y.Adult="adult",y.MinorNoParentalConsentRequired="minorNoParentalConsentRequired",y.MinorWithoutParentalConsent="minorWithoutParentalConsent",y.MinorWithParentalConsent="minorWithParentalConsent",y.NotAdult="notAdult",y.NonAdult="notAdult"}(K_||(K_={})),function(y){y.HigherEducation="higherEducation",y.K12="k12",y.Other="other"}(zP||(zP={})),function(y){y.TextPlain="text/plain",y.TextHtml="text/html",y.ImagePNG="image/png",y.ImageJPEG="image/jpeg"}(qP||(qP={}));var WP={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let yp;const bG=new Uint8Array(16);function SG(){if(!yp&&(yp=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!yp))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return yp(bG)}const xr=[];for(let y=0;y<256;++y)xr.push((y+256).toString(16).slice(1));function EG(y,_,S){if(WP.randomUUID&&!_&&!y)return WP.randomUUID();const C=(y=y||{}).random||(y.rng||SG)();return C[6]=15&C[6]|64,C[8]=63&C[8]|128,function TG(y,_=0){return xr[y[_+0]]+xr[y[_+1]]+xr[y[_+2]]+xr[y[_+3]]+"-"+xr[y[_+4]]+xr[y[_+5]]+"-"+xr[y[_+6]]+xr[y[_+7]]+"-"+xr[y[_+8]]+xr[y[_+9]]+"-"+xr[y[_+10]]+xr[y[_+11]]+xr[y[_+12]]+xr[y[_+13]]+xr[y[_+14]]+xr[y[_+15]]}(C)}var DG=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function J_(y,_){if("string"!=typeof y||"string"!=typeof _)return NaN;const S=y.split("."),C=_.split(".");function T(D){return/^\d+$/.test(D)}if(!S.every(T)||!C.every(T))return NaN;for(;S.length<C.length;)S.push("0");for(;C.length<S.length;)C.push("0");for(let D=0;D<S.length;++D)if(Number(S[D])!=Number(C[D]))return Number(S[D])>Number(C[D])?1:-1;return 0}function GP(y){return Object.keys(y).forEach(_=>{null!=y[_]&&"object"==typeof y[_]&&GP(y[_])}),Object.freeze(y)}function vp(){return typeof window>"u"}const NG=!!performance&&"now"in performance;function X_(){return NG?performance.now()+performance.timeOrigin:void 0}function QP(y){var _,S;if(null===(S=null===(_=y.hostVersionsInfo)||void 0===_?void 0:_.appEligibilityInformation)||void 0===S||!S.ageGroup)return y;const C=y.hostVersionsInfo.appEligibilityInformation.ageGroup;return"nonadult"!==(null==C?void 0:C.toLowerCase())?y:Object.assign(Object.assign({},y),{hostVersionsInfo:Object.assign(Object.assign({},y.hostVersionsInfo),{appEligibilityInformation:Object.assign(Object.assign({},y.hostVersionsInfo.appEligibilityInformation),{ageGroup:K_.NotAdult})})})}class Ma{constructor(_=function MG(){return EG()}()){this.uuid=_,function PG(y){if(!y)throw new Error("id must not be empty");if(!1===function IG(y){return"string"==typeof y&&DG.test(y)}(y))throw new Error("id must be a valid UUID")}(_)}toString(){return this.uuid}serialize(){return this.toString()}}class vn{}vn.initializeCalled=!1,vn.initializeCompleted=!1,vn.additionalValidOrigins=[],vn.initializePromise=void 0,vn.isFramelessWindow=!1,vn.frameContext=void 0,vn.hostClientType=void 0,vn.printCapabilityEnabled=!1,vn.teamsJsInstanceId=(new Ma).toString();var XP,YP,Y_={exports:{}};!function(y,_){_.formatArgs=function(C){if(C[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+C[0]+(this.useColors?"%c ":" ")+"+"+y.exports.humanize(this.diff),!this.useColors)return;const T="color: "+this.color;C.splice(1,0,T,"color: inherit");let D=0,I=0;C[0].replace(/%[a-zA-Z%]/g,M=>{"%%"!==M&&(D++,"%c"===M&&(I=D))}),C.splice(I,0,T)},_.save=function(C){try{C?_.storage.setItem("debug",C):_.storage.removeItem("debug")}catch(T){}},_.load=function(){let C;try{C=_.storage.getItem("debug")}catch(T){}return!C&&typeof process<"u"&&"env"in process&&(C=process.env.DEBUG),C},_.useColors=function(){return!(!(typeof window<"u"&&window.process)||"renderer"!==window.process.type&&!window.process.__nwjs)||!(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&(typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},_.storage=function(){try{return localStorage}catch(C){}}(),_.destroy=(()=>{let C=!1;return()=>{C||(C=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),_.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],_.log=console.debug||console.log||(()=>{}),y.exports=function(y){function _(T){let D,I,M,A=null;function R(...N){if(!R.enabled)return;const O=R,L=Number(new Date);O.diff=L-(D||L),O.prev=D,O.curr=L,D=L,N[0]=_.coerce(N[0]),"string"!=typeof N[0]&&N.unshift("%O");let Q=0;N[0]=N[0].replace(/%([a-zA-Z%])/g,(ae,Ce)=>{if("%%"===ae)return"%";Q++;const Ee=_.formatters[Ce];return"function"==typeof Ee&&(ae=Ee.call(O,N[Q]),N.splice(Q,1),Q--),ae}),_.formatArgs.call(O,N),(O.log||_.log).apply(O,N)}return R.namespace=T,R.useColors=_.useColors(),R.color=_.selectColor(T),R.extend=S,R.destroy=_.destroy,Object.defineProperty(R,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==A?A:(I!==_.namespaces&&(I=_.namespaces,M=_.enabled(T)),M),set:N=>{A=N}}),"function"==typeof _.init&&_.init(R),R}function S(T,D){const I=_(this.namespace+(void 0===D?":":D)+T);return I.log=this.log,I}function C(T){return T.toString().substring(2,T.toString().length-2).replace(/\.\*\?$/,"*")}return _.debug=_,_.default=_,_.coerce=function(T){return T instanceof Error?T.stack||T.message:T},_.disable=function(){const T=[..._.names.map(C),..._.skips.map(C).map(D=>"-"+D)].join(",");return _.enable(""),T},_.enable=function(T){let D;_.save(T),_.namespaces=T,_.names=[],_.skips=[];const I=("string"==typeof T?T:"").split(/[\s,]+/),M=I.length;for(D=0;D<M;D++)I[D]&&("-"===(T=I[D].replace(/\*/g,".*?"))[0]?_.skips.push(new RegExp("^"+T.slice(1)+"$")):_.names.push(new RegExp("^"+T+"$")))},_.enabled=function(T){if("*"===T[T.length-1])return!0;let D,I;for(D=0,I=_.skips.length;D<I;D++)if(_.skips[D].test(T))return!1;for(D=0,I=_.names.length;D<I;D++)if(_.names[D].test(T))return!0;return!1},_.humanize=function OG(){if(YP)return XP;YP=1;var y=1e3,_=60*y,S=60*_,C=24*S;function I(M,A,R,N){var O=A>=1.5*R;return Math.round(M/R)+" "+N+(O?"s":"")}return XP=function(M,A){A=A||{};var N,O,R=typeof M;if("string"===R&&M.length>0)return function(N){if(!((N=String(N)).length>100)){var O=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(N);if(O){var L=parseFloat(O[1]);switch((O[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*L;case"weeks":case"week":case"w":return 6048e5*L;case"days":case"day":case"d":return L*C;case"hours":case"hour":case"hrs":case"hr":case"h":return L*S;case"minutes":case"minute":case"mins":case"min":case"m":return L*_;case"seconds":case"second":case"secs":case"sec":case"s":return L*y;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return L;default:return}}}}(M);if("number"===R&&isFinite(M))return A.long?(N=M,(O=Math.abs(N))>=C?I(N,O,C,"day"):O>=S?I(N,O,S,"hour"):O>=_?I(N,O,_,"minute"):O>=y?I(N,O,y,"second"):N+" ms"):function(N){var O=Math.abs(N);return O>=C?Math.round(N/C)+"d":O>=S?Math.round(N/S)+"h":O>=_?Math.round(N/_)+"m":O>=y?Math.round(N/y)+"s":N+"ms"}(M);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(M))}}(),_.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(y).forEach(T=>{_[T]=y[T]}),_.names=[],_.skips=[],_.formatters={},_.selectColor=function(T){let D=0;for(let I=0;I<T.length;I++)D=(D<<5)-D+T.charCodeAt(I),D|=0;return _.colors[Math.abs(D)%_.colors.length]},_.enable(_.load()),_}(_);const{formatters:S}=y.exports;S.j=function(C){try{return JSON.stringify(C)}catch(T){return"[UnexpectedJSONParseError]: "+T.message}}}(Y_,Y_.exports);var Z_=Y_.exports;const xG=new Ma,FG=Z_.debug.formatArgs;Z_.debug.formatArgs=function(y){y[0]="(".concat((new Date).toISOString(),"): ").concat(y[0]," [").concat(xG.toString(),"]"),FG.call(this,y)};const LG=Z_.debug("teamsJs");function Li(y){return LG.extend(y)}function dr(y,_){return"".concat(y,"_").concat(_)}function ZP(y){return/^v\d+_[\w.]+$/.test(y)}var Pn,e0,t0,eN,tN,nN,rN,oN;(function(y){y.desktop="desktop",y.web="web",y.android="android",y.ios="ios",y.ipados="ipados",y.macos="macos",y.visionOS="visionOS",y.rigel="rigel",y.surfaceHub="surfaceHub",y.teamsRoomsWindows="teamsRoomsWindows",y.teamsRoomsAndroid="teamsRoomsAndroid",y.teamsPhones="teamsPhones",y.teamsDisplays="teamsDisplays"})(Pn||(Pn={})),function(y){y.office="Office",y.outlook="Outlook",y.outlookWin32="OutlookWin32",y.orange="Orange",y.places="Places",y.teams="Teams",y.teamsModern="TeamsModern"}(e0||(e0={})),function(y){y.settings="settings",y.content="content",y.authentication="authentication",y.remove="remove",y.task="task",y.sidePanel="sidePanel",y.stage="stage",y.meetingStage="meetingStage"}(t0||(t0={})),function(y){y.copilotSidePanel="copilotSidePanel",y.copilotMainPane="copilotMainPane",y.copilotFullScreen="copilotFullScreen"}(eN||(eN={})),function(y){y[y.Standard=0]="Standard",y[y.Edu=1]="Edu",y[y.Class=2]="Class",y[y.Plc=3]="Plc",y[y.Staff=4]="Staff"}(tN||(tN={})),function(y){y[y.Admin=0]="Admin",y[y.User=1]="User",y[y.Guest=2]="Guest"}(nN||(nN={})),function(y){y.Large="large",y.Medium="medium",y.Small="small"}(rN||(rN={})),function(y){y.Regular="Regular",y.Private="Private",y.Shared="Shared"}(oN||(oN={}));const UG={errorCode:G_.NOT_SUPPORTED_ON_PLATFORM},iN={adaptiveCardSchemaVersion:{majorVersion:1,minorVersion:5}},sN=(new Error("Invalid input count: Must supply a valid image count (limit of 10)."),new Error("Invalid response: Received more images than the specified max limit in the response."),Li("runtime")),_p=4;function aN(y){return y.apiVersion===_p}let $s={apiVersion:-1,supports:{}};const jG={apiVersion:4,isNAAChannelRecommended:!1,isDeeplyNestedAuthSupported:!1,hostVersionsInfo:iN,isLegacyTeams:!0,supports:{appInstallDialog:{},appEntity:{},call:{},chat:{},conversations:{},dialog:{card:{bot:{}},url:{bot:{},parentCommunication:{}},update:{}},interactive:{},logs:{},meetingRoom:{},menus:{},monetization:{},notifications:{},pages:{config:{},backStack:{},fullTrust:{}},remoteCamera:{},teams:{fullTrust:{}},teamsCore:{},video:{sharedFrame:{}}}},cN=[Pn.desktop,Pn.web,Pn.rigel,Pn.surfaceHub,Pn.teamsRoomsWindows,Pn.teamsRoomsAndroid,Pn.teamsPhones,Pn.teamsDisplays],BG=[Pn.android,Pn.ios,Pn.ipados,Pn.visionOS],lN=[...cN,...BG],HG=[{versionToUpgradeFrom:1,upgradeToNextVersion:y=>{var _;return{apiVersion:2,hostVersionsInfo:void 0,isLegacyTeams:y.isLegacyTeams,supports:Object.assign(Object.assign({},y.supports),{dialog:y.supports.dialog?{card:void 0,url:y.supports.dialog,update:null===(_=y.supports.dialog)||void 0===_?void 0:_.update}:void 0})}}},{versionToUpgradeFrom:2,upgradeToNextVersion:y=>{const S=rd(y.supports,["appNotification"]);return Object.assign(Object.assign({},y),{apiVersion:3,supports:S})}},{versionToUpgradeFrom:3,upgradeToNextVersion:y=>{var _,S,C,T,D;return{apiVersion:4,hostVersionsInfo:y.hostVersionsInfo,isNAAChannelRecommended:y.isNAAChannelRecommended,isLegacyTeams:y.isLegacyTeams,supports:Object.assign(Object.assign({},y.supports),{dialog:y.supports.dialog?{card:null===(_=y.supports.dialog)||void 0===_?void 0:_.card,url:{bot:null===(C=null===(S=y.supports.dialog)||void 0===S?void 0:S.url)||void 0===C?void 0:C.bot,parentCommunication:null!==(T=y.supports.dialog)&&void 0!==T&&T.url?{}:void 0},update:null===(D=y.supports.dialog)||void 0===D?void 0:D.update}:void 0})}}}],zG={"1.0.0":[{capability:{pages:{appButton:{},tabs:{}},stageView:{}},hostClientTypes:cN}],"1.9.0":[{capability:{location:{}},hostClientTypes:lN}],"2.0.0":[{capability:{people:{}},hostClientTypes:lN},{capability:{sharing:{}},hostClientTypes:[Pn.desktop,Pn.web]}],"2.0.1":[{capability:{teams:{fullTrust:{joinedTeams:{}}}},hostClientTypes:[Pn.android,Pn.desktop,Pn.ios,Pn.teamsRoomsAndroid,Pn.teamsPhones,Pn.teamsDisplays,Pn.web]},{capability:{webStorage:{}},hostClientTypes:[Pn.desktop]}],"2.0.5":[{capability:{webStorage:{}},hostClientTypes:[Pn.android,Pn.ios]}],"2.0.8":[{capability:{sharing:{}},hostClientTypes:[Pn.android,Pn.ios]}],"2.1.1":[{capability:{nestedAppAuth:{}},hostClientTypes:[Pn.android,Pn.ios,Pn.ipados,Pn.visionOS]}],"2.1.2":[]},n0=sN.extend("generateBackCompatRuntimeConfig");function uN(y,_){const S=Object.assign({},y);for(const C in _)Object.prototype.hasOwnProperty.call(_,C)&&("object"!=typeof _[C]||Array.isArray(_[C])?C in y||(S[C]=_[C]):S[C]=uN(y[C]||{},_[C]));return S}function qG(y,_,S){n0("generating back compat runtime config for %s",y);let C=Object.assign({},_.supports);n0("Supported capabilities in config before updating based on highestSupportedVersion: %o",C),Object.keys(S).forEach(D=>{J_(y,D)>=0&&S[D].forEach(I=>{void 0!==vn.hostClientType&&I.hostClientTypes.includes(vn.hostClientType)&&(C=uN(C,I.capability))})});const T={apiVersion:_p,hostVersionsInfo:iN,isLegacyTeams:!0,supports:C};return n0("Runtime config after updating based on highestSupportedVersion: %o",T),T}const r0=sN.extend("applyRuntimeConfig");function o0(y){"string"==typeof y.apiVersion&&(r0("Trying to apply runtime with string apiVersion, processing as v1: %o",y),y=Object.assign(Object.assign({},y),{apiVersion:1})),r0("Fast-forwarding runtime %o",y);const _=function $G(y){let _=y;if(_.apiVersion<_p&&HG.forEach(S=>{_.apiVersion===S.versionToUpgradeFrom&&(_=S.upgradeToNextVersion(_))}),aN(_))return _;throw new Error("Received a runtime that could not be upgraded to the latest version")}(y);r0("Applying runtime %o",_),$s=GP(_)}const dN="2.43.0",fN={childProxyingCommunication:!1};function hN(){return fN.childProxyingCommunication}let s0={disableEnforceOriginMatchForChildResponses:!1};const gN=y=>{const{uuid:_}=y,S=rd(y,["uuid"]),C=null==_?void 0:_.toString();return Object.assign(Object.assign({},S),{uuidAsString:C})},GG=y=>{const{uuidAsString:_}=y,S=rd(y,["uuidAsString"]);return Object.assign(Object.assign({},S),{uuid:_?new Ma(_):void 0})},KG=y=>{const{uuidAsString:_}=y,S=rd(y,["uuidAsString"]);return Object.assign(Object.assign({},S),{uuid:_?new Ma(_):void 0})},JG=y=>{const{uuid:_}=y,S=rd(y,["uuid"]),C=null==_?void 0:_.toString();return Object.assign(Object.assign({},S),{uuidAsString:C})};function jo(y){return void 0!==y.uuidAsString?"".concat(y.uuidAsString," (legacy id: ").concat(y.id,")"):void 0!==y.uuid?"".concat(y.uuid.toString()," (legacy id: ").concat(y.id,")"):"legacy id: ".concat(y.id," (no uuid)")}const QG=Li("flushMessageQueue");function a0(y,_,S,C){if(y&&_&&0!==S.length)for(;S.length>0;){const T=S.shift();if(T){const D=gN(T);QG("Flushing message %s from %s message queue via postMessage.",jo(D),C),y.postMessage(D,_)}}}const mN=Li("internal"),XG=mN.extend("ensureInitializeCalled"),YG=mN.extend("ensureInitialized");function yN(){if(!vn.initializeCalled)throw XG(mp),new Error(mp)}function od(y,..._){if(!vn.initializeCompleted)throw YG("%s. initializeCalled: %s",mp,vn.initializeCalled.toString()),new Error(mp);if(_&&_.length>0){let S=!1;for(let C=0;C<_.length;C++)if(_[C]===vn.frameContext){S=!0;break}if(!S)throw new Error("This call is only allowed in following contexts: ".concat(JSON.stringify(_),'. Current context: "').concat(vn.frameContext,'".'))}return function VG(y){if(aN(y))return!0;throw-1===y.apiVersion?new Error(CG):new Error(wG)}(y)}function n9(){return function o9(y){return new Promise(_=>{if(od($s),!function vN(){return!(!od($s)||!$s.supports.pages||!$s.supports.pages.backStack)}())throw UG;_(function T9(y,_,S,...C){return Ws(y,_,C).then(([T,D])=>{if(!T)throw new Error(D||S)})}(y,"navigateBack","Back navigation is not supported in the current client or context."))})}(dr(Aa,"pages.backStack.navigateBack"))}const Aa="v2";function s9(){us()?ds("backButtonPress",[]):n9()}const a9=Li("handlers");class hn{static initializeHandlers(){hn.handlers.themeChange=u9,hn.handlers.load=d9,hn.handlers.beforeUnload=f9,function i9(){Hs(dr("v2","pages.backStack.registerBackButtonPressHandler"),"backButtonPress",s9,!1)}()}static uninitializeHandlers(){hn.handlers={},hn.themeChangeHandler=null,hn.loadHandler=null,hn.beforeUnloadHandler=null,hn.beforeSuspendOrTerminateHandler=null,hn.resumeHandler=null}}hn.handlers={},hn.themeChangeHandler=null,hn.loadHandler=null,hn.beforeUnloadHandler=null,hn.beforeSuspendOrTerminateHandler=null,hn.resumeHandler=null,hn.hostToAppPerformanceMetricsHandler=null;const _N=a9.extend("callHandler");function CN(y,_){const S=hn.handlers[y];return S?(_N("Invoking the registered handler for message %s with arguments %o",y,_),[!0,S.apply(this,_)]):us()?(ds(y,_),[!1,void 0]):(_N("Handler for action message %s not found.",y),[!1,void 0])}function Hs(y,_,S,C=!0,T=[]){S?(hn.handlers[_]=S,C&&fs(y,"registerHandler",[_,...T])):delete hn.handlers[_]}function u9(y){hn.themeChangeHandler&&hn.themeChangeHandler(y),us()&&ds("themeChange",[y])}function wN(y){hn.hostToAppPerformanceMetricsHandler&&hn.hostToAppPerformanceMetricsHandler(y)}function d9(y){const _={entityId:(S=y).entityId,contentUrl:new URL(S.contentUrl)};var S;hn.resumeHandler?(hn.resumeHandler(_),us()&&ds("load",[_])):hn.loadHandler&&(hn.loadHandler(y),us()&&ds("load",[y]))}function f9(){return Zc(this,void 0,void 0,function*(){const y=()=>{fs(dr("v2","handleBeforeUnload"),"readyToUnload",[])};hn.beforeSuspendOrTerminateHandler?(yield hn.beforeSuspendOrTerminateHandler(),us()?ds("beforeUnload"):y()):hn.beforeUnloadHandler&&hn.beforeUnloadHandler(y)||(us()?ds("beforeUnload"):y())})}const h9=Li("childProxyingCommunication");class Kn{}function us(){return!!hN()&&!!Kn.window}Kn.messageQueue=[];const id=h9.extend("handleIncomingMessageFromChild");function bN(y,_,S,C){const T=Kn.window,I=JG(function(A,R,N,O){return{id:A,uuid:R,args:N||[],isPartialResponse:O}}(y,_,S,C)),M=Kn.origin;T&&M&&(id("Sending message %s to %s via postMessage, args = %o",jo(I),"child",I.args),T.postMessage(I,M))}function ds(y,_){const S=Kn.window,C=function(D,I){return{func:D,args:I||[]}}(y,_),T=Kn.origin;S&&T?S.postMessage(C,T):Kn.messageQueue.push(C)}class Ui{static storeCallbackInformation(_,S){Ui.callbackInformation.set(_,S)}static clearMessages(){Ui.callbackInformation.clear()}static deleteMessageInformation(_){Ui.callbackInformation.delete(_)}static handleOneWayPerformanceMetrics(_,S,C){const T=_.monotonicTimestamp;T&&C?wN({actionName:_.func,messageDelay:C-T,requestStartedAt:T}):S("Unable to send performance metrics for event %s",_.func)}static handlePerformanceMetrics(_,S,C,T){const D=Ui.callbackInformation.get(_);D&&S.monotonicTimestamp&&T?(wN({actionName:D.name,messageDelay:T-S.monotonicTimestamp,requestStartedAt:D.calledAt}),Ui.deleteMessageInformation(_)):C("Unable to send performance metrics for callback %s with arguments %o",_.toString(),S.args)}}Ui.callbackInformation=new Map;const SN=Li("nestedAppAuthUtils"),m9=SN.extend("tryPolyfillWithNestedAppAuthBridge"),y9="v2",_9=SN.extend("createNestedAppAuthBridge");let zs=[];const qs=Li("validateOrigin");let sd;function TN(){return 0===zs.length}function EN(y=!1){return Zc(this,void 0,void 0,function*(){if(!TN()&&!y)return zs;if(sd)return sd;if(vp())return zs=gp,gp;{qs("Initiating fetch call to acquire valid origins list from CDN");const _=new AbortController,S=setTimeout(()=>_.abort(),LP);return sd=fetch(vG,{signal:_.signal}).then(C=>{if(clearTimeout(S),!C.ok)throw new Error("Invalid Response from Fetch Call");return qs("Fetch call completed and retrieved valid origins list from CDN"),C.json().then(T=>{if(function(D){let I=JSON.parse(D);try{I=JSON.parse(D)}catch(M){return!1}if(!I.validOrigins)return!1;for(const M of I.validOrigins)try{new URL("https://"+M)}catch(A){return qs("isValidOriginsFromCDN call failed to validate origin: %s",M),!1}return!0}(JSON.stringify(T)))return zs=T.validOrigins,zs;throw new Error("Valid origins list retrieved from CDN is invalid")})}).catch(C=>("AbortError"===C.name?qs("validOrigins fetch call to CDN failed due to Timeout of ".concat(LP," ms. Defaulting to fallback list")):qs("validOrigins fetch call to CDN failed with error: %s. Defaulting to fallback list",C),zs=gp,zs)),sd}})}function DN(y,_){if("*."===y.substring(0,2)){const S=y.substring(1);if(_.length>S.length&&_.split(".").length===S.split(".").length&&_.substring(_.length-S.length)===S)return!0}else if(y===_)return!0;return!1}function IN(y,_){if(!function KP(y){return"https:"===y.protocol}(y))return qs("Origin %s is invalid because it is not using https protocol. Protocol being used: %s",y,y.protocol),!1;const S=y.host;if(_.some(C=>DN(C,S)))return!0;for(const C of vn.additionalValidOrigins)if(DN("https://"===C.substring(0,8)?C.substring(8):C,S))return!0;return qs("Origin %s is invalid because it is not an origin approved by this library or included in the call to app.initialize.\nOrigins approved by this library: %o\nOrigins included in app.initialize: %o",y,_,vn.additionalValidOrigins),!1}!function C9(){Zc(this,void 0,void 0,function*(){sd||(yield EN())})}();const Ra=Li("communication");class xt{}class gn{}function b9(y,_){if(gn.messageListener=S=>function(C){return Zc(this,void 0,void 0,function*(){if(!C||!C.data||"object"!=typeof C.data)return void RN("Unrecognized message format received by app, message being ignored. Message: %o",C);const T=C.source||C.originalEvent&&C.originalEvent.source,D=C.origin||C.originalEvent&&C.originalEvent.origin;return PN(T,D).then(I=>{var M,A;I?(M=T,A=D,vn.isFramelessWindow||xt.parentWindow&&!xt.parentWindow.closed&&M!==xt.parentWindow||(xt.parentWindow=M,xt.parentOrigin=A),xt.parentWindow&&xt.parentWindow.closed&&(xt.parentWindow=null,xt.parentOrigin=null),a0(xt.parentWindow,xt.parentOrigin,gn.parentMessageQueue,"parent"),T!==xt.parentWindow?function p9(y,_){return!!hN()&&(Kn.window&&!Kn.window.closed&&y!==Kn.window||(Kn.window=y,Kn.origin=_),Kn.window&&Kn.window.closed?(Kn.window=null,Kn.origin=null,!1):Kn.window===y)}(T,D)&&function g9(y,_,S,C){Zc(this,void 0,void 0,function*(){Kn.window===_&&(a0(Kn.window,Kn.origin,Kn.messageQueue,"child"),function(T,D,I){if(void 0===T.data.id||void 0===T.data.func)return;const M=GG(T.data),[A,R]=CN(M.func,M.args);if(A&&void 0!==R)return id("Handler called in response to message %s from child. Returning response from handler to child, action: %s.",jo(M),M.func),void bN(M.id,M.uuid,Array.isArray(R)?R:[R]);id("No handler for message %s from child found; relaying message on to parent, action: %s. Relayed message will have a new id.",jo(M),M.func),function(N,O,L){const $=O(dr("v2","tasks.startTask"),N.func,N.args,!0,N.teamsJsInstanceId),Q=Kn.origin;L($.uuid,(...ae)=>{if(!Kn.window)return;if(!function pN(){return s0}().disableEnforceOriginMatchForChildResponses&&Q!==Kn.origin)return void id("Origin of child window has changed, not sending response back to child window");const Ce=ae.pop();id("Message from parent being relayed to child, id: %s",jo(N)),bN(N.id,N.uuid,ae,Ce)})}(M,D,I)}(y,S,C))})}(C,T,Cp,(M,A)=>gn.callbacks.set(M,A)):ON(C)):RN("Message being ignored by app because it is either coming from the current window or a different window with an invalid origin, message: %o, source: %o, origin: %o",C,T,D)})})}(S),xt.currentWindow=xt.currentWindow||function RG(){if(vp())throw new Error("window object undefined at SSR check");return window}(),xt.parentWindow=xt.currentWindow.parent!==xt.currentWindow.self?xt.currentWindow.parent:xt.currentWindow.opener,xt.topWindow=xt.currentWindow.top,(xt.parentWindow||y)&&xt.currentWindow.addEventListener("message",gn.messageListener,!1),!xt.parentWindow){const S=xt.currentWindow;if(!S.nativeInterface)return Promise.reject(new Error("Initialization Failed. No Parent window found."));vn.isFramelessWindow=!0,S.onNativeMessage=ON}try{return xt.parentOrigin="*",Ws(_,"initialize",[dN,_p,y]).then(([S,C,T,D])=>(function v9(y,_,S){var C;const T=m9;if(vn.isFramelessWindow)return void T("Cannot polyfill nestedAppAuthBridge as current window is frameless");if(!_)return void T("Cannot polyfill nestedAppAuthBridge as current window does not exist");if(_.parent!==_.top)return void T("Default NAA bridge injection not supported in nested iframe. Use standalone NAA bridge instead.");const D=(()=>{try{return JSON.parse(y)}catch(A){return null}})();if(!D||null===(C=D.supports)||void 0===C||!C.nestedAppAuth)return void T("Cannot polyfill nestedAppAuthBridge as current hub does not support nested app auth");const I=_;if(I.nestedAppAuthBridge)return void T("nestedAppAuthBridge already exists on current window, skipping polyfill");const M=function(A,R){const N=_9;if(!A)return N("nestedAppAuthBridge cannot be created as current window does not exist"),null;const{onMessage:O,sendPostMessage:L}=R,$=Q=>ae=>O(ae,Q);return{addEventListener:(Q,ae)=>{"message"===Q?A.addEventListener(Q,$(ae)):N("Event ".concat(Q," is not supported by nestedAppAuthBridge"))},postMessage:Q=>{const ae=(()=>{try{return JSON.parse(Q)}catch(Ee){return null}})();if(!ae||"object"!=typeof ae||"NestedAppAuthRequest"!==ae.messageType)return void N("Unrecognized data format received by app, message being ignored. Message: %o",Q);const Ce=dr(y9,"nestedAppAuth.execute");L(Q,Ce)},removeEventListener:(Q,ae)=>{A.removeEventListener(Q,$(ae))}}}(I,S);M&&(I.nestedAppAuthBridge=M)}(D,xt.currentWindow,{onMessage:R9,sendPostMessage:D9}),{context:S,clientType:C,runtimeConfig:T,clientSupportedSDKVersion:D}))}finally{xt.parentOrigin=null}}function Ws(y,_,S=void 0){if(!ZP(y))throw Error("apiVersionTag: ".concat(y," passed in doesn't follow the pattern starting with 'v' followed by digits, then underscore with words, please check."));return new Promise(C=>{const T=Cp(y,_,S);var D;C((D=T.uuid,new Promise(I=>{gn.promiseCallbacks.set(D,I)})))})}function fs(y,_,S,C){let T;if(S instanceof Function?C=S:S instanceof Array&&(T=S),!ZP(y))throw Error("apiVersionTag: ".concat(y," passed in doesn't follow the pattern starting with 'v' followed by digits, then underscore with words, please check."));const D=Cp(y,_,T);C&&gn.callbacks.set(D.uuid,C)}gn.parentMessageQueue=[],gn.topMessageQueue=[],gn.nextMessageId=0,gn.callbacks=new Map,gn.promiseCallbacks=new Map,gn.portCallbacks=new Map,gn.legacyMessageIdsToUuidMap={};const E9=Ra.extend("sendNestedAuthRequestToTopWindow");function D9(y,_){const S=E9,C=xt.topWindow,T=function(D,I){const M=gn.nextMessageId++,A=new Ma;return gn.legacyMessageIdsToUuidMap[M]=A,{id:M,uuid:A,func:"nestedAppAuth.execute",timestamp:Date.now(),monotonicTimestamp:X_(),apiVersionTag:I,args:[],data:D}}(y,_);return S("Message %s information: %o",jo(T),{actionName:T.func}),AN(C,T)}const I9=Ra.extend("sendRequestToTargetWindowHelper");function AN(y,_){const S=I9,C=(D=y)===xt.topWindow&&d0()?"top":D===xt.parentWindow?"parent":null,T=gN(_);var D,I;if(vn.isFramelessWindow)xt.currentWindow&&xt.currentWindow.nativeInterface&&(S("Sending message %s to %s via framelessPostMessage interface",jo(T),C),xt.currentWindow.nativeInterface.framelessPostMessage(JSON.stringify(T)));else{const D=(I=y)===xt.topWindow&&d0()?xt.topOrigin:I===xt.parentWindow?xt.parentOrigin:null;y&&D?(S("Sending message %s to %s via postMessage",jo(T),C),y.postMessage(T,D)):(S("Adding message %s to %s message queue",jo(T),C),function kN(y){return y===xt.topWindow&&d0()?gn.topMessageQueue:y===xt.parentWindow?gn.parentMessageQueue:[]}(y).push(_))}return _}const M9=Ra.extend("sendMessageToParentHelper");function Cp(y,_,S,C,T){const D=M9,I=xt.parentWindow,M=function(A,R,N,O,L){const $=gn.nextMessageId++,Q=new Ma;gn.legacyMessageIdsToUuidMap[$]=Q;const ae=!0===O?L:vn.teamsJsInstanceId;return{id:$,uuid:Q,func:R,timestamp:Date.now(),monotonicTimestamp:X_(),args:N||[],apiVersionTag:A,isProxiedFromChild:null!=O&&O,teamsJsInstanceId:ae}}(y,_,S,C,T);return Ui.storeCallbackInformation(M.uuid,{name:_,calledAt:M.timestamp}),D("Message %s information: %o",jo(M),{actionName:_,args:S}),AN(I,M)}const RN=Ra.extend("processIncomingMessage"),A9=Ra.extend("processAuthBridgeMessage");function R9(y,_){var S,C;const T=A9;if(!y||!y.data||"object"!=typeof y.data)return void T("Unrecognized message format received by app, message being ignored. Message: %o",y);const{args:D}=y.data,[,I]=null!=D?D:[],M=(()=>{try{return JSON.parse(I)}catch(N){return null}})();if(!M||"object"!=typeof M||"NestedAppAuthResponse"!==M.messageType)return void T("Unrecognized data format received by app, message being ignored. Message: %o",y);const A=y.source||(null===(S=null==y?void 0:y.originalEvent)||void 0===S?void 0:S.source),R=y.origin||(null===(C=null==y?void 0:y.originalEvent)||void 0===C?void 0:C.origin);A?PN(A,R)?(xt.topWindow&&!xt.topWindow.closed&&A!==xt.topWindow||(xt.topWindow=A,xt.topOrigin=R),xt.topWindow&&xt.topWindow.closed&&(xt.topWindow=null,xt.topOrigin=null),a0(xt.topWindow,xt.topOrigin,gn.topMessageQueue,"top"),_(I)):T("Message being ignored by app because it is either coming from the current window or a different window with an invalid origin"):T("Message being ignored by app because it is coming for a target that is null")}const l0=Ra.extend("shouldProcessIncomingMessage");function PN(y,_){return Zc(this,void 0,void 0,function*(){if(xt.currentWindow&&y===xt.currentWindow)return l0("Should not process message because it is coming from the current window"),!1;if(xt.currentWindow&&xt.currentWindow.location&&_&&_===xt.currentWindow.location.origin)return!0;{let S;try{S=new URL(_)}catch(T){return l0("Message has an invalid origin of %s",_),!1}const C=yield function w9(y,_){const S=TN()?gp:zs;return IN(y,S)?Promise.resolve(!0):(qs("Origin %s is not in the local valid origins list, fetching from CDN",y),EN(_).then(C=>IN(y,C)))}(S);return C||l0("Message has an invalid origin of %s",_),C}})}const NN=Ra.extend("handleIncomingMessageFromParent");function wp(y,_){if(_){const S=[...y].find(([C,T])=>C.toString()===_.toString());if(S)return S[0]}}function u0(y,_){const S=wp(_,y.uuid);S&&_.delete(S),y.uuid?gn.legacyMessageIdsToUuidMap={}:delete gn.legacyMessageIdsToUuidMap[y.id]}function ON(y){const _=NN,S=X_();if("id"in y.data&&"number"==typeof y.data.id){const T=KG(y.data),D=function(I){const M=NN;if(!I.uuid)return gn.legacyMessageIdsToUuidMap[I.id];{const A=I.uuid,R=wp(gn.callbacks,A);if(R)return R;const N=wp(gn.promiseCallbacks,A);if(N)return N;const O=wp(gn.portCallbacks,A);if(O)return O}M("Received message %s that failed to produce a callbackId",jo(I))}(T);if(D){const I=gn.callbacks.get(D);_("Received a response from parent for message %s",D.toString()),Ui.handlePerformanceMetrics(D,T,_,S),I&&(_("Invoking the registered callback for message %s with arguments %o",D.toString(),T.args),I.apply(null,[...T.args,T.isPartialResponse]),!0===y.data.isPartialResponse||(_("Removing registered callback for message %s",D.toString()),u0(T,gn.callbacks)));const M=gn.promiseCallbacks.get(D);M&&(_("Invoking the registered promise callback for message %s with arguments %o",D.toString(),T.args),M(T.args),_("Removing registered promise callback for message %s",D.toString()),u0(T,gn.promiseCallbacks));const A=gn.portCallbacks.get(D);if(A){let R;_("Invoking the registered port callback for message %s with arguments %o",D.toString(),T.args),y.ports&&y.ports[0]instanceof MessagePort&&(R=y.ports[0]),A(R,T.args),_("Removing registered port callback for message %s",D.toString()),u0(T,gn.portCallbacks)}T.uuid&&(gn.legacyMessageIdsToUuidMap={})}}else if("func"in y.data&&"string"==typeof y.data.func){const C=y.data;Ui.handleOneWayPerformanceMetrics(C,_,S),_('Received a message from parent %s, action: "%s"',jo(C),C.func),CN(C.func,C.args)}else _("Received an unknown message: %O",y)}function d0(){return xt.topWindow!==xt.parentWindow}const f0="v2",N9=[];function O9(y){vn.frameContext&&(vn.frameContext===t0.task?N9.push(y):function l9(y){delete hn.handlers[y]}("messageForChild"))}const hs="v2";var xN,FN;let h0,p0,g0,y0,v0;function F9(y){g0&&g0(y)||(od($s),fs(dr(hs,"menus.handleViewConfigItemPress"),"viewConfigItemPress",[y]))}function L9(y){h0&&h0(y)||(od($s),fs(dr(hs,"menus.handleNavBarMenuItemPress"),"handleNavBarMenuItemPress",[y]))}function U9(y){p0&&p0(y)||(od($s),fs(dr(hs,"menus.handleActionMenuItemPress"),"handleActionMenuItemPress",[y]))}function $9(y){const _=new H9(y);y0?y0(_):us()?ds("settings.save",[y]):_.notifySuccess()}!function(y){y[y.ifRoom=0]="ifRoom",y[y.overflowOnly=1]="overflowOnly"}(xN||(xN={})),function(y){y.dropDown="dropDown",y.popOver="popOver"}(FN||(FN={}));class H9{constructor(_){this.notified=!1,this.result=_||{}}notifySuccess(){this.ensureNotNotified(),fs(dr(Aa,"pages.saveEvent.notifySuccess"),"settings.save.success"),this.notified=!0}notifyFailure(_){this.ensureNotNotified(),fs(dr(Aa,"pages.saveEvent.notifyFailure"),"settings.save.failure",[_]),this.notified=!0}ensureNotNotified(){if(this.notified)throw new Error("The SaveEvent may only notify success or failure once.")}}function z9(){const y=new q9;v0?v0(y):us()?ds("settings.remove",[]):y.notifySuccess()}class q9{constructor(){this.notified=!1}notifySuccess(){this.ensureNotNotified(),fs(dr(Aa,"pages.removeEvent.notifySuccess"),"settings.remove.success"),this.notified=!0}notifyFailure(_){this.ensureNotNotified(),fs(dr(Aa,"pages.removeEvent.notifyFailure"),"settings.remove.failure",[_]),this.notified=!0}ensureNotNotified(){if(this.notified)throw new Error("The removeEventType may only notify success or failure once.")}}const LN=Li("app");const ad=LN.extend("initializeHelper");const VN=4,jN=256;class X9{constructor(_){this.idAsString=_,function K9(y){if(function Q_(y){return new RegExp("".concat(/<script[^>]*>|&lt;script[^&]*&gt;|%3Cscript[^%]*%3E/gi.source,"|").concat(/<\/script[^>]*>|&lt;\/script[^&]*&gt;|%3C\/script[^%]*%3E/gi.source),"gi").test(y)}(y))throw new Error("Potential app id (".concat(y,") is invalid; it contains script tags."));if(function Q9(y){return[...y].some(_=>{const S=_.charCodeAt(0);return S<32||S>126})}(y))throw new Error("Potential app id (".concat(y,") is invalid; it contains non-printable characters."))}(_)}serialize(){return this.toString()}toString(){return this.idAsString}}class Y9 extends X9{constructor(_){super(_),function G9(y){if(!function J9(y){return y.length<jN&&y.length>VN}(y))throw new Error("Potential app id (".concat(y,") is invalid; its length ").concat(y.length," is not within the length limits (").concat(VN,"-").concat(jN,")."))}(_)}toJSON(){return{appIdAsString:this.toString()}}}const C0=Li("app");var BN,$N;function w0(y){return function W9(y,_){return vp()?(LN.extend("initialize")("window object undefined at initialization"),Promise.resolve()):function AG(y,_,S){return new Promise((C,T)=>{const D=setTimeout(T,_,S);y().then(I=>{clearTimeout(D),C(I)}).catch(I=>{clearTimeout(D),T(I)})})}(()=>{return S=y,C=_,new Promise(T=>{vn.initializeCalled||(vn.initializeCalled=!0,function c9(){hn.initializeHandlers()}(),vn.initializePromise=b9(C,S).then(({context:D,clientType:I,runtimeConfig:M,clientSupportedSDKVersion:A=FP})=>{vn.frameContext=D,vn.hostClientType=I,vn.clientSupportedSDKVersion=A;try{ad("Parsing %s",M);let R=JSON.parse(M);if(ad("Checking if %o is a valid runtime object",null!=R?R:"null"),!R||!R.apiVersion)throw new Error("Received runtime config is invalid");R=QP(R),M&&o0(R)}catch(R){if(!(R instanceof SyntaxError))throw R;try{ad("Attempting to parse %s as an SDK version",M),isNaN(J_(M,FP))||(vn.clientSupportedSDKVersion=M);let N=JSON.parse(A);if(ad("givenRuntimeConfig parsed to %o",null!=N?N:"null"),!N)throw new Error("givenRuntimeConfig string was successfully parsed. However, it parsed to value of null");N=QP(N),o0(N)}catch(N){if(!(N instanceof SyntaxError))throw N;o0(qG(vn.clientSupportedSDKVersion,jG,zG))}}vn.initializeCompleted=!0}),function x9(){Hs(dr(hs,"menus.registerNavBarMenuItemPressHandler"),"navBarMenuItemPress",L9,!1),Hs(dr(hs,"menus.registerActionMenuItemPressHandler"),"actionMenuItemPress",U9,!1),Hs(dr(hs,"menus.registerSetModuleViewHandler"),"setModuleView",F9,!1)}(),function V9(){Hs(dr(Aa,"pages.config.registerSettingsSaveHandler"),"settings.save",$9,!1),Hs(dr(Aa,"pages.config.registerSettingsRemoveHandler"),"settings.remove",z9,!1)}(),function k9(){Hs(dr(f0,"dialog.registerMessageForChildHandler"),"messageForChild",O9,!1)}()),Array.isArray(C)&&function t9(y){let _=vn.additionalValidOrigins.concat(y.filter(C=>"string"==typeof C&&_G.test(C)));const S={};_=_.filter(C=>!S[C]&&(S[C]=!0,!0)),vn.additionalValidOrigins=_}(C),void 0!==vn.initializePromise?T(vn.initializePromise):ad("GlobalVars.initializePromise is unexpectedly undefined")});var S,C},6e4,new Error("SDK initialization timed out."))}(dr("v2","app.initialize"),y)}function cd(){return new Promise(y=>{yN(),y(function S9(y,_,...S){return Ws(y,_,S).then(([C])=>C)}(dr("v2","app.getContext"),"getContext"))}).then(y=>{return{actionInfo:(_=y).actionInfo,app:{locale:_.locale,sessionId:_.appSessionId?_.appSessionId:"",theme:_.theme?_.theme:"default",iconPositionVertical:_.appIconPosition,osLocaleInfo:_.osLocaleInfo,messageId:_.messageId,parentMessageId:_.parentMessageId,userClickTime:_.userClickTime,userClickTimeV2:_.userClickTimeV2,userFileOpenPreference:_.userFileOpenPreference,host:{name:_.hostName?_.hostName:e0.teams,clientType:_.hostClientType?_.hostClientType:Pn.web,sessionId:_.sessionId?_.sessionId:"",ringId:_.ringId},appLaunchId:_.appLaunchId,appId:_.appId?new Y9(_.appId):void 0,manifestVersion:_.manifestVersion},page:{id:_.entityId,frameContext:_.frameContext?_.frameContext:vn.frameContext,renderingSurface:_.renderingSurface?_.renderingSurface:void 0,subPageId:_.subEntityId,isFullScreen:_.isFullScreen,isMultiWindow:_.isMultiWindow,isBackgroundLoad:_.isBackgroundLoad,sourceOrigin:_.sourceOrigin},user:{id:null!==(S=_.userObjectId)&&void 0!==S?S:"",displayName:_.userDisplayName,isCallingAllowed:_.isCallingAllowed,isPSTNCallingAllowed:_.isPSTNCallingAllowed,licenseType:_.userLicenseType,loginHint:_.loginHint,userPrincipalName:_.userPrincipalName,tenant:_.tid?{id:_.tid,teamsSku:_.tenantSKU}:void 0},channel:_.channelId?{id:_.channelId,displayName:_.channelName,relativeUrl:_.channelRelativeUrl,membershipType:_.channelType,defaultOneNoteSectionId:_.defaultOneNoteSectionId,ownerGroupId:_.hostTeamGroupId,ownerTenantId:_.hostTeamTenantId}:void 0,chat:_.chatId?{id:_.chatId}:void 0,meeting:_.meetingId?{id:_.meetingId}:void 0,sharepoint:_.sharepoint,team:_.teamId?{internalId:_.teamId,displayName:_.teamName,type:_.teamType,groupId:_.groupId,templateId:_.teamTemplateId,isArchived:_.isTeamArchived,userRole:_.userTeamRole}:void 0,sharePointSite:_.teamSiteUrl||_.teamSiteDomain||_.teamSitePath||_.mySitePath||_.mySiteDomain?{teamSiteUrl:_.teamSiteUrl,teamSiteDomain:_.teamSiteDomain,teamSitePath:_.teamSitePath,teamSiteId:_.teamSiteId,mySitePath:_.mySitePath,mySiteDomain:_.mySiteDomain}:void 0,dialogParameters:_.dialogParameters||{}};var _,S})}(function(y){y.AuthFailed="AuthFailed",y.Timeout="Timeout",y.Other="Other"})(BN||(BN={})),function(y){y.PermissionError="PermissionError",y.NotFound="NotFound",y.Throttling="Throttling",y.Offline="Offline",y.Other="Other"}($N||($N={})),C0("teamsjs instance is version %s, starting at %s UTC (%s local)",dN,(new Date).toISOString(),(new Date).toLocaleString()),function(){if(vp())return;const y=document.getElementsByTagName("script"),_=y&&y[y.length-1]&&y[y.length-1].src,S="Today, teamsjs can only be used from a single script or you may see undefined behavior. This log line is used to help detect cases where teamsjs is loaded multiple times -- it is always written. The presence of the log itself does not indicate a multi-load situation, but multiples of these log lines will. If you would like to use teamjs from more than one script at the same time, please open an issue at https://github.com/OfficeDev/microsoft-teams-library-js/issues";_&&0!==_.length?C0("teamsjs is being used from %s. %s",_,S):C0("teamsjs is being used from a script tag embedded directly in your html. %s",S)}();let Z9=(()=>{var y;class _{constructor(C){this.router=C}ngOnInit(){this.initializeTeams()}initializeTeams(){return(0,pe.A)(function*(){try{yield w0(),console.log("Teams SDK initialized successfully");const C=yield cd();console.log("Teams context:",C)}catch(C){console.error("Failed to initialize Teams SDK:",C)}})()}}return(y=_).\u0275fac=function(C){return new(C||y)(dt(Mo))},y.\u0275cmp=Lr({type:y,selectors:[["app-root"]],decls:2,vars:0,consts:[[1,"app-container"]],template:function(C,T){1&C&&(Dt(0,"div",0),ei(1,"router-outlet"),St())},dependencies:[Kh],styles:[".app-container[_ngcontent-%COMP%]{height:100vh;width:100vw}"]}),_})(),b0=(()=>{var y;class _{constructor(){this.teamsContextSubject=new ir({themeString:"default",teamsUserCredential:void 0}),this.teamsContext$=this.teamsContextSubject.asObservable(),this.initializeTeams()}initializeTeams(){return(0,pe.A)(function*(){try{yield w0()}catch(C){console.error("Failed to initialize Teams:",C)}})()}getTeamsContext(){return this.teamsContextSubject.value}getUserInfo(){return(0,pe.A)(function*(){try{const C=yield cd();return C.user?{objectId:C.user.id,displayName:C.user.displayName}:(console.error("User context is undefined"),null)}catch(C){return console.error("Failed to get user info:",C),null}})()}}return(y=_).\u0275fac=function(C){return new(C||y)},y.\u0275prov=Ot({token:y,factory:y.\u0275fac,providedIn:"root"}),_})();var S0=Se(142);class ld extends Error{}ld.prototype.name="InvalidTokenError";const T0=y=>{const{exp:_}=function n7(y,_){if("string"!=typeof y)throw new ld("Invalid token specified: must be a string");_||(_={});const S=!0===_.header?0:1,C=y.split(".")[S];if("string"!=typeof C)throw new ld("Invalid token specified: missing part #".concat(S+1));let T;try{T=function t7(y){let _=y.replace(/-/g,"+").replace(/_/g,"/");switch(_.length%4){case 0:break;case 2:_+="==";break;case 3:_+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return function e7(y){return decodeURIComponent(atob(y).replace(/(.)/g,(_,S)=>{let C=S.charCodeAt(0).toString(16).toUpperCase();return C.length<2&&(C="0"+C),"%"+C}))}(_)}catch(S){return atob(_)}}(C)}catch(D){throw new ld("Invalid token specified: invalid base64 for part #".concat(S+1," (").concat(D.message,")"))}try{return JSON.parse(T)}catch(D){throw new ld("Invalid token specified: invalid json for part #".concat(S+1," (").concat(D.message,")"))}}(y);return{token:y,expiresOnTimestamp:1e3*_}},HN={token:"",expiresOnTimestamp:-10};class i7{constructor(_){this.expiringSoonIntervalInMs=6e5,this.refreshAfterLifetimePercentage=.5,this.activeTokenFetching=null,this.activeTokenUpdating=null,this.disposed=!1;const{tokenRefresher:S,token:C,refreshProactively:T}=_;this.refresh=S,this.currentToken=C?T0(C):HN,this.refreshProactively=null!=T&&T,this.refreshProactively&&this.scheduleRefresh()}getToken(_){var S=this;return(0,pe.A)(function*(){return S.isTokenExpiringSoon(S.currentToken)&&(S.isTokenValid(S.currentToken)||(yield S.updateTokenAndReschedule(null==_?void 0:_.abortSignal))),S.currentToken})()}dispose(){this.disposed=!0,this.activeTokenFetching=null,this.activeTokenUpdating=null,this.currentToken=HN,this.activeTimeout&&clearTimeout(this.activeTimeout)}updateTokenAndReschedule(_){var S=this;return(0,pe.A)(function*(){if(S.activeTokenUpdating)return S.activeTokenUpdating;S.activeTokenUpdating=S.refreshTokenAndReschedule(_);try{yield S.activeTokenUpdating}finally{S.activeTokenUpdating=null}})()}refreshTokenAndReschedule(_){var S=this;return(0,pe.A)(function*(){const C=yield S.refreshToken(_);if(!S.isTokenValid(C))throw new Error("The token returned from the tokenRefresher is expired.");S.currentToken=C,S.refreshProactively&&S.scheduleRefresh()})()}refreshToken(_){var S=this;return(0,pe.A)(function*(){try{return S.activeTokenFetching||(S.activeTokenFetching=S.refresh(_)),T0(yield S.activeTokenFetching)}finally{S.activeTokenFetching=null}})()}scheduleRefresh(){if(this.disposed)return;this.activeTimeout&&clearTimeout(this.activeTimeout);const _=this.currentToken.expiresOnTimestamp-Date.now();let S=null;S=this.isTokenExpiringSoon(this.currentToken)?_*this.refreshAfterLifetimePercentage:_-this.expiringSoonIntervalInMs,this.activeTimeout=setTimeout(()=>this.updateTokenAndReschedule(),S)}isTokenValid(_){return _&&Date.now()<_.expiresOnTimestamp}isTokenExpiringSoon(_){return!_||Date.now()>=_.expiresOnTimestamp-this.expiringSoonIntervalInMs}}class s7{constructor(_){this.token=_}getToken(){var _=this;return(0,pe.A)(function*(){return _.token})()}dispose(){}}var a7=Se(201),el=Se(458),zN=Se(124);function qN(y){return y&&"function"==typeof y.getToken&&(void 0===y.signRequest||y.getToken.length>0)}const l7="ApiVersionPolicy",d7="keyCredentialAuthenticationPolicy";function p7(y,_,S={}){const C=(0,el.createPipelineFromOptions)(S);return C.addPolicy(function u7(y){return{name:l7,sendRequest:(_,S)=>{const C=new URL(_.url);return!C.searchParams.get("api-version")&&y.apiVersion&&(_.url="".concat(_.url).concat(Array.from(C.searchParams.keys()).length>0?"&":"?","api-version=").concat(y.apiVersion)),S(_)}}}(S)),function h7(y,_,S={}){var C,T,D,I;const{credential:M,clientOptions:A}=S;if(M)if(qN(M)){const R=(0,el.bearerTokenAuthenticationPolicy)({credential:M,scopes:null!==(T=null===(C=null==A?void 0:A.credentials)||void 0===C?void 0:C.scopes)&&void 0!==T?T:"".concat(_,"/.default")});y.addPolicy(R)}else if(function g7(y){return void 0!==y.key}(M)){if(null===(D=null==A?void 0:A.credentials)||void 0===D||!D.apiKeyHeaderName)throw new Error("Missing API Key Header Name");const R=function f7(y,_){return{name:d7,sendRequest:(S,C)=>(0,pe.A)(function*(){return S.headers.set(_,y.key),C(S)})()}}(M,null===(I=null==A?void 0:A.credentials)||void 0===I?void 0:I.apiKeyHeaderName);y.addPolicy(R)}}(C,y,{credential:_,clientOptions:S}),C}function Ks(y){return y.onResponse?Object.assign(Object.assign({},y),{onResponse(_,S){var C;null===(C=y.onResponse)||void 0===C||C.call(y,_,S,S)}}):y}class T7{constructor(_){this.options=_,this.result={entraToken:void 0,acsToken:{token:"",expiresOnTimestamp:0}},this.client=function m7(y,_,S={}){let C;_&&(function y7(y){return function c7(y){return(0,zN.isObjectWithProperties)(y,["key"])&&"string"==typeof y.key}(y)||qN(y)}(_)?C=_:S=null!=_?_:{});const T=p7(y,C,S),D=(0,a7.KU)(y,Object.assign(Object.assign({},S),{pipeline:T})),I=(M,...A)=>({get:(R={})=>D.path(M,...A).get(Ks(R)),post:(R={})=>D.path(M,...A).post(Ks(R)),put:(R={})=>D.path(M,...A).put(Ks(R)),patch:(R={})=>D.path(M,...A).patch(Ks(R)),delete:(R={})=>D.path(M,...A).delete(Ks(R)),head:(R={})=>D.path(M,...A).head(Ks(R)),options:(R={})=>D.path(M,...A).options(Ks(R)),trace:(R={})=>D.path(M,...A).trace(Ks(R))});return{path:I,pathUnchecked:I,pipeline:D.pipeline}}(_.resourceEndpoint),this.httpClient=(0,el.createDefaultHttpClient)(),this.options=_,this.options.scopes=this.options.scopes||["https://communication.azure.com/clients/.default"],this.isPending=this.getToken()}getToken(_){var S=this;return(0,pe.A)(function*(){var C;if(null!==(C=null==_?void 0:_.abortSignal)&&void 0!==C&&C.aborted)return{token:"",expiresOnTimestamp:0};S.isPending||(S.isPending=S.getTokenInternal(_));try{yield S.isPending}finally{S.isPending=null}return S.result.acsToken})()}getTokenInternal(_){var S=this;return(0,pe.A)(function*(){const C=null!=_&&_.abortSignal?{abortSignal:_.abortSignal}:void 0,T=yield S.options.tokenCredential.getToken(S.options.scopes?S.options.scopes:["https://communication.azure.com/clients/.default"],C),D=new Date,I=new Date(S.result.acsToken.expiresOnTimestamp);if(null===T)S.result={entraToken:void 0,acsToken:{token:"",expiresOnTimestamp:0}};else if(""===S.result.acsToken.token||T.token!==S.result.entraToken||I<D){const M=yield S.exchangeEntraToken(S.options.resourceEndpoint,T.token,C);S.result={entraToken:T.token,acsToken:M}}return S.result.acsToken})()}dispose(){this.result={entraToken:void 0,acsToken:{token:"",expiresOnTimestamp:0}}}exchangeEntraToken(_,S,C){var T=this;return(0,pe.A)(function*(){const D=(0,el.createPipelineRequest)({url:T.createRequestUri(_),method:"POST",headers:(0,el.createHttpHeaders)({Authorization:"Bearer ".concat(S),"Content-Type":"application/json",Accept:"application/json"}),abortSignal:null==C?void 0:C.abortSignal,body:JSON.stringify({})}),I=yield T.client.pipeline.sendRequest(T.httpClient,D);if(200!==I.status||!I.bodyAsText)throw new Error("Service request failed. Status: ".concat(I.status,", Body: ").concat(I.bodyAsText));const M=JSON.parse(I.bodyAsText);return{token:M.accessToken.token,expiresOnTimestamp:Date.parse(M.accessToken.expiresOn)}})()}createRequestUri(_){const[S,C]=this.determineEndpointAndApiVersion();return"".concat(_).concat(S,"?api-version=").concat(C)}determineEndpointAndApiVersion(){if(!this.options.scopes||0===this.options.scopes.length)throw new Error("Scopes validation failed. Ensure all scopes start with either {TeamsExtensionScopePrefix} or {CommunicationClientsScopePrefix}.");if(this.options.scopes.every(_=>_.startsWith("https://auth.msft.communication.azure.com/")))return["/access/teamsExtension/:exchangeAccessToken","2025-06-30"];if(this.options.scopes.every(_=>_.startsWith("https://communication.azure.com/clients/")))return["/access/entra/:exchangeAccessToken","2025-03-02-preview"];throw new Error("Scopes validation failed. Ensure all scopes start with either {TeamsExtensionScopePrefix} or {CommunicationClientsScopePrefix}.")}}class D0{constructor(_){this.disposed=!1,this.tokenCredential="string"==typeof _?new s7(T0(_)):"tokenRefresher"in _?new i7(_):new T7(_)}getToken(_){var S=this;return(0,pe.A)(function*(){S.throwIfDisposed();const C=yield S.tokenCredential.getToken(_);return S.throwIfDisposed(),C})()}dispose(){this.disposed=!0,this.tokenCredential.dispose()}throwIfDisposed(){if(this.disposed)throw new Error("User credential is disposed")}}globalThis;const GN=y=>(y=>"string"==typeof y.communicationUserId)(y)?Object.assign(Object.assign({},y),{kind:"communicationUser"}):(y=>"string"==typeof y.phoneNumber)(y)?Object.assign(Object.assign({},y),{kind:"phoneNumber"}):(y=>"string"==typeof y.microsoftTeamsUserId)(y)?Object.assign(Object.assign({},y),{kind:"microsoftTeamsUser"}):(y=>"string"==typeof y.teamsAppId)(y)?Object.assign(Object.assign({},y),{kind:"microsoftTeamsApp"}):(y=>"string"==typeof y.userId&&"string"==typeof y.tenantId&&"string"==typeof y.resourceId)(y)?Object.assign(Object.assign({},y),{kind:"teamsExtensionUser"}):Object.assign(Object.assign({},y),{kind:"unknown"}),ud=y=>{const _=GN(y);switch(_.kind){case"communicationUser":return _.communicationUserId;case"microsoftTeamsUser":{const{microsoftTeamsUserId:S,rawId:C,cloud:T,isAnonymous:D}=_;if(C)return C;if(D)return"8:teamsvisitor:".concat(S);switch(T){case"dod":return"8:dod:".concat(S);case"gcch":return"8:gcch:".concat(S);case"public":return"8:orgid:".concat(S)}return"8:orgid:".concat(S)}case"microsoftTeamsApp":{const{teamsAppId:S,rawId:C,cloud:T}=_;if(C)return C;switch(T){case"dod":return"28:dod:".concat(S);case"gcch":return"28:gcch:".concat(S)}return"28:orgid:".concat(S)}case"phoneNumber":{const{phoneNumber:S,rawId:C}=_;return C||"4:".concat(S)}case"teamsExtensionUser":{const{userId:S,tenantId:C,resourceId:T,rawId:D,cloud:I}=_;if(D)return D;switch(I){case"dod":return"8:dod-acs:".concat(T,"_").concat(C,"_").concat(S);case"gcch":return"8:gcch-acs:".concat(T,"_").concat(C,"_").concat(S)}return"8:acs:".concat(T,"_").concat(C,"_").concat(S)}case"unknown":return _.id}},Wr=(y,_)=>{const S=Object.keys(y)[0],C=y[S];if(_ in C)return C[_];throw new Error("Property ".concat(_," is required for identifier of type ").concat(S,"."))},KN=y=>{var _,S,C,T,D,I,M,A,R;const N=GN(y);switch(N.kind){case"communicationUser":return{rawId:ud(N),communicationUser:{id:N.communicationUserId}};case"phoneNumber":return{rawId:null!==(_=N.rawId)&&void 0!==_?_:ud(N),phoneNumber:{value:N.phoneNumber,isAnonymous:null!==(S=N.isAnonymous)&&void 0!==S&&S,assertedId:N.assertedId}};case"microsoftTeamsUser":return{rawId:null!==(C=N.rawId)&&void 0!==C?C:ud(N),microsoftTeamsUser:{userId:N.microsoftTeamsUserId,isAnonymous:null!==(T=N.isAnonymous)&&void 0!==T&&T,cloud:null!==(D=N.cloud)&&void 0!==D?D:"public"}};case"microsoftTeamsApp":return{rawId:null!==(I=N.rawId)&&void 0!==I?I:ud(N),microsoftTeamsApp:{appId:N.teamsAppId,cloud:null!==(M=N.cloud)&&void 0!==M?M:"public"}};case"teamsExtensionUser":return{rawId:null!==(A=N.rawId)&&void 0!==A?A:ud(N),teamsExtensionUser:{userId:N.userId,tenantId:N.tenantId,resourceId:N.resourceId,cloud:null!==(R=N.cloud)&&void 0!==R?R:"public"}};case"unknown":return{rawId:N.id};default:throw new Error("Can't serialize an identifier with kind ".concat(N.kind))}},dd=y=>{var _,S;(y=>{const _=[];if(void 0!==y.communicationUser&&_.push("communicationUser"),void 0!==y.microsoftTeamsUser&&_.push("microsoftTeamsUser"),void 0!==y.microsoftTeamsApp&&_.push("microsoftTeamsApp"),void 0!==y.phoneNumber&&_.push("phoneNumber"),void 0!==y.teamsExtensionUser&&_.push("teamsExtensionUser"),_.length>1)throw new Error("Only one of the properties in ".concat(JSON.stringify(_)," should be present."))})(y);const C=y.communicationUser,T=y.microsoftTeamsUser,D=y.microsoftTeamsApp,I=y.phoneNumber,M=y.teamsExtensionUser,A=null!==(_=y.kind)&&void 0!==_?_:(y=>y.communicationUser?"communicationUser":y.phoneNumber?"phoneNumber":y.microsoftTeamsUser?"microsoftTeamsUser":y.microsoftTeamsApp?"microsoftTeamsApp":y.teamsExtensionUser?"teamsExtensionUser":"unknown")(y);return"communicationUser"===A&&C?{kind:"communicationUser",communicationUserId:Wr({communicationUser:C},"id")}:"phoneNumber"===A&&I?{kind:"phoneNumber",phoneNumber:Wr({phoneNumber:I},"value"),rawId:Wr({phoneNumber:y},"rawId"),isAnonymous:null!==(S=I.isAnonymous)&&void 0!==S&&S,assertedId:I.assertedId}:"microsoftTeamsUser"===A&&T?{kind:"microsoftTeamsUser",microsoftTeamsUserId:Wr({microsoftTeamsUser:T},"userId"),isAnonymous:Wr({microsoftTeamsUser:T},"isAnonymous"),cloud:Wr({microsoftTeamsUser:T},"cloud"),rawId:Wr({microsoftTeamsUser:y},"rawId")}:"microsoftTeamsApp"===A&&D?{kind:"microsoftTeamsApp",teamsAppId:Wr({microsoftTeamsApp:D},"appId"),cloud:Wr({microsoftTeamsApp:D},"cloud"),rawId:Wr({microsoftTeamsApp:y},"rawId")}:"teamsExtensionUser"===A&&M?{kind:"teamsExtensionUser",userId:Wr({teamsExtensionUser:M},"userId"),tenantId:Wr({teamsExtensionUser:M},"tenantId"),resourceId:Wr({teamsExtensionUser:M},"resourceId"),cloud:Wr({teamsExtensionUser:M},"cloud"),rawId:Wr({teamsExtensionUser:y},"rawId")}:{kind:"unknown",id:Wr({unknown:y},"rawId")}},JN=y=>{const{id:_}=y,S=Ii(y,["id"]);return Object.assign(Object.assign({},S),{communicationIdentifier:KN(_)})},R0=y=>{const{communicationIdentifier:_}=y,S=Ii(y,["communicationIdentifier"]);return Object.assign(Object.assign({},S),{id:dd(_)})},j7=y=>{const{participants:_,initiatorCommunicationIdentifier:S}=y,C=Ii(y,["participants","initiatorCommunicationIdentifier"]);let T=Object.assign({},C);if(S){const D=dd(S);T=Object.assign(Object.assign({},T),{initiator:D})}return _&&(T=Object.assign(Object.assign({},T),{participants:null==_?void 0:_.map(D=>R0(D))})),T},bp=y=>{const{content:_,senderCommunicationIdentifier:S}=y,C=Ii(y,["content","senderCommunicationIdentifier"]);let T=Object.assign({},C);if(_&&(T=Object.assign(Object.assign({},T),{content:j7(_)})),S){const D=dd(S);T=Object.assign(Object.assign({},T),{sender:D})}return T},B7=y=>{if("threadCreationDate"===y.kind||"none"===y.kind)return y;throw new Error("Retention Policy ".concat(y.kind," is not supported"))},QN=y=>{const{createdByCommunicationIdentifier:_,retentionPolicy:S}=y,C=Ii(y,["createdByCommunicationIdentifier","retentionPolicy"]);let T=Object.assign({},C);return _&&(T=Object.assign(Object.assign({},T),{createdBy:dd(_)})),S&&(T=Object.assign(Object.assign({},T),{retentionPolicy:B7(S)})),T},XN=y=>{const{senderCommunicationIdentifier:_}=y,S=Ii(y,["senderCommunicationIdentifier"]);return Object.assign(Object.assign({},S),{sender:dd(_)})};var P0=Se(114);const bn=(0,Se(838).y)({namespace:"Azure.Communication",packageName:"@azure/communication-chat",packageVersion:"1.6.0"}),N0={type:{name:"Composite",className:"ChatMessageReadReceiptsCollection",modelProperties:{value:{serializedName:"value",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatMessageReadReceipt"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},G7={type:{name:"Composite",className:"ChatMessageReadReceipt",modelProperties:{senderCommunicationIdentifier:{serializedName:"senderCommunicationIdentifier",type:{name:"Composite",className:"CommunicationIdentifierModel"}},chatMessageId:{serializedName:"chatMessageId",required:!0,type:{name:"String"}},readOn:{serializedName:"readOn",required:!0,type:{name:"DateTime"}}}}},YN={type:{name:"Composite",className:"CommunicationIdentifierModel",modelProperties:{kind:{serializedName:"kind",type:{name:"String"}},rawId:{serializedName:"rawId",type:{name:"String"}},communicationUser:{serializedName:"communicationUser",type:{name:"Composite",className:"CommunicationUserIdentifierModel"}},phoneNumber:{serializedName:"phoneNumber",type:{name:"Composite",className:"PhoneNumberIdentifierModel"}},microsoftTeamsUser:{serializedName:"microsoftTeamsUser",type:{name:"Composite",className:"MicrosoftTeamsUserIdentifierModel"}},microsoftTeamsApp:{serializedName:"microsoftTeamsApp",type:{name:"Composite",className:"MicrosoftTeamsAppIdentifierModel"}}}}},K7={type:{name:"Composite",className:"CommunicationUserIdentifierModel",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}}}}},J7={type:{name:"Composite",className:"PhoneNumberIdentifierModel",modelProperties:{value:{serializedName:"value",required:!0,type:{name:"String"}}}}},Q7={type:{name:"Composite",className:"MicrosoftTeamsUserIdentifierModel",modelProperties:{userId:{serializedName:"userId",required:!0,type:{name:"String"}},isAnonymous:{serializedName:"isAnonymous",type:{name:"Boolean"}},cloud:{serializedName:"cloud",type:{name:"String"}}}}},X7={type:{name:"Composite",className:"MicrosoftTeamsAppIdentifierModel",modelProperties:{appId:{serializedName:"appId",required:!0,type:{name:"String"}},cloud:{serializedName:"cloud",type:{name:"String"}}}}},It={type:{name:"Composite",className:"CommunicationErrorResponse",modelProperties:{error:{serializedName:"error",type:{name:"Composite",className:"ChatError"}}}}},Y7={type:{name:"Composite",className:"ChatError",modelProperties:{code:{serializedName:"code",required:!0,type:{name:"String"}},message:{serializedName:"message",required:!0,type:{name:"String"}},target:{serializedName:"target",readOnly:!0,type:{name:"String"}},details:{serializedName:"details",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatError"}}}},innerError:{serializedName:"innererror",type:{name:"Composite",className:"ChatError"}}}}},ZN={type:{name:"Composite",className:"SendReadReceiptRequest",modelProperties:{chatMessageId:{serializedName:"chatMessageId",required:!0,type:{name:"String"}}}}},eO={type:{name:"Composite",className:"SendChatMessageRequest",modelProperties:{content:{serializedName:"content",required:!0,type:{name:"String"}},senderDisplayName:{serializedName:"senderDisplayName",type:{name:"String"}},type:{serializedName:"type",type:{name:"Enum",allowedValues:["text","html","topicUpdated","participantAdded","participantRemoved"]}},metadata:{serializedName:"metadata",type:{name:"Dictionary",value:{type:{name:"String"}}}}}}},tO={type:{name:"Composite",className:"SendChatMessageResult",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}}}}},O0={type:{name:"Composite",className:"ChatMessagesCollection",modelProperties:{value:{serializedName:"value",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatMessage"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},nO={type:{name:"Composite",className:"ChatMessage",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}},type:{serializedName:"type",required:!0,type:{name:"Enum",allowedValues:["text","html","topicUpdated","participantAdded","participantRemoved"]}},sequenceId:{serializedName:"sequenceId",required:!0,type:{name:"String"}},version:{serializedName:"version",required:!0,type:{name:"String"}},content:{serializedName:"content",type:{name:"Composite",className:"ChatMessageContent"}},senderDisplayName:{serializedName:"senderDisplayName",type:{name:"String"}},createdOn:{serializedName:"createdOn",required:!0,type:{name:"DateTime"}},senderCommunicationIdentifier:{serializedName:"senderCommunicationIdentifier",type:{name:"Composite",className:"CommunicationIdentifierModel"}},deletedOn:{serializedName:"deletedOn",type:{name:"DateTime"}},editedOn:{serializedName:"editedOn",type:{name:"DateTime"}},metadata:{serializedName:"metadata",type:{name:"Dictionary",value:{type:{name:"String"}}}}}}},Z7={type:{name:"Composite",className:"ChatMessageContent",modelProperties:{message:{serializedName:"message",type:{name:"String"}},topic:{serializedName:"topic",type:{name:"String"}},participants:{serializedName:"participants",type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatParticipant"}}}},attachments:{serializedName:"attachments",type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatAttachment"}}}},initiatorCommunicationIdentifier:{serializedName:"initiatorCommunicationIdentifier",type:{name:"Composite",className:"CommunicationIdentifierModel"}}}}},eK={type:{name:"Composite",className:"ChatParticipant",modelProperties:{communicationIdentifier:{serializedName:"communicationIdentifier",type:{name:"Composite",className:"CommunicationIdentifierModel"}},displayName:{serializedName:"displayName",type:{name:"String"}},shareHistoryTime:{serializedName:"shareHistoryTime",type:{name:"DateTime"}},metadata:{serializedName:"metadata",type:{name:"Dictionary",value:{type:{name:"String"}}}}}}},tK={type:{name:"Composite",className:"ChatAttachment",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}},attachmentType:{serializedName:"attachmentType",required:!0,type:{name:"Enum",allowedValues:["image","file"]}},name:{serializedName:"name",type:{name:"String"}},url:{serializedName:"url",type:{name:"String"}},previewUrl:{serializedName:"previewUrl",type:{name:"String"}}}}},rO={type:{name:"Composite",className:"UpdateChatMessageRequest",modelProperties:{content:{serializedName:"content",type:{name:"String"}},metadata:{serializedName:"metadata",type:{name:"Dictionary",value:{type:{name:"String"}}}}}}},k0={type:{name:"Composite",className:"ChatParticipantsCollection",modelProperties:{value:{serializedName:"value",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatParticipant"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},oO={type:{name:"Composite",className:"AddChatParticipantsRequest",modelProperties:{participants:{serializedName:"participants",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatParticipant"}}}}}}},iO={type:{name:"Composite",className:"AddChatParticipantsResult",modelProperties:{invalidParticipants:{serializedName:"invalidParticipants",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatError"}}}}}}},sO={type:{name:"Composite",className:"CreateChatThreadRequest",modelProperties:{topic:{serializedName:"topic",required:!0,type:{name:"String"}},participants:{serializedName:"participants",type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatParticipant"}}}},metadata:{serializedName:"metadata",type:{name:"Dictionary",value:{type:{name:"String"}}}},retentionPolicy:{serializedName:"retentionPolicy",type:{name:"Composite",className:"ChatRetentionPolicy"}}}}},tl={type:{name:"Composite",className:"ChatRetentionPolicy",uberParent:"ChatRetentionPolicy",polymorphicDiscriminator:{serializedName:"kind",clientName:"kind"},modelProperties:{kind:{serializedName:"kind",required:!0,type:{name:"String"}}}}},aO={type:{name:"Composite",className:"CreateChatThreadResult",modelProperties:{chatThread:{serializedName:"chatThread",type:{name:"Composite",className:"ChatThreadProperties"}},invalidParticipants:{serializedName:"invalidParticipants",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatError"}}}}}}},cO={type:{name:"Composite",className:"ChatThreadProperties",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}},topic:{serializedName:"topic",required:!0,type:{name:"String"}},createdOn:{serializedName:"createdOn",required:!0,type:{name:"DateTime"}},createdByCommunicationIdentifier:{serializedName:"createdByCommunicationIdentifier",type:{name:"Composite",className:"CommunicationIdentifierModel"}},deletedOn:{serializedName:"deletedOn",type:{name:"DateTime"}},metadata:{serializedName:"metadata",type:{name:"Dictionary",value:{type:{name:"String"}}}},retentionPolicy:{serializedName:"retentionPolicy",type:{name:"Composite",className:"ChatRetentionPolicy"}}}}},x0={type:{name:"Composite",className:"ChatThreadsItemCollection",modelProperties:{value:{serializedName:"value",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatThreadItem"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},nK={type:{name:"Composite",className:"ChatThreadItem",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}},topic:{serializedName:"topic",required:!0,type:{name:"String"}},deletedOn:{serializedName:"deletedOn",type:{name:"DateTime"}},lastMessageReceivedOn:{serializedName:"lastMessageReceivedOn",readOnly:!0,type:{name:"DateTime"}}}}},lO={type:{name:"Composite",className:"UpdateChatThreadRequest",modelProperties:{topic:{serializedName:"topic",type:{name:"String"}},metadata:{serializedName:"metadata",type:{name:"Dictionary",value:{type:{name:"String"}}}},retentionPolicy:{serializedName:"retentionPolicy",type:{name:"Composite",className:"ChatRetentionPolicy"}}}}},uO={type:{name:"Composite",className:"SendTypingNotificationRequest",modelProperties:{senderDisplayName:{serializedName:"senderDisplayName",type:{name:"String"}}}}},dO={serializedName:"threadCreationDate",type:{name:"Composite",className:"ThreadCreationDateRetentionPolicy",uberParent:"ChatRetentionPolicy",polymorphicDiscriminator:tl.type.polymorphicDiscriminator,modelProperties:Object.assign(Object.assign({},tl.type.modelProperties),{deleteThreadAfterDays:{serializedName:"deleteThreadAfterDays",required:!0,type:{name:"Number"}}})}},fO={serializedName:"none",type:{name:"Composite",className:"NoneRetentionPolicy",uberParent:"ChatRetentionPolicy",polymorphicDiscriminator:tl.type.polymorphicDiscriminator,modelProperties:Object.assign({},tl.type.modelProperties)}};let rK={ChatRetentionPolicy:tl,"ChatRetentionPolicy.threadCreationDate":dO,"ChatRetentionPolicy.none":fO};const Sr={parameterPath:"accept",mapper:{defaultValue:"application/json",isConstant:!0,serializedName:"Accept",type:{name:"String"}}},Tr={parameterPath:"endpoint",mapper:{serializedName:"endpoint",required:!0,type:{name:"String"}},skipEncoding:!0},Fr={parameterPath:"chatThreadId",mapper:{serializedName:"chatThreadId",required:!0,type:{name:"String"}}},Sp={parameterPath:["options","maxPageSize"],mapper:{serializedName:"maxPageSize",type:{name:"Number"}}},hO={parameterPath:["options","skip"],mapper:{serializedName:"skip",type:{name:"Number"}}},Gr={parameterPath:"apiVersion",mapper:{defaultValue:"2025-03-15",isConstant:!0,serializedName:"api-version",type:{name:"String"}}},nl={parameterPath:["options","contentType"],mapper:{defaultValue:"application/json",isConstant:!0,serializedName:"Content-Type",type:{name:"String"}}},oK={parameterPath:"sendReadReceiptRequest",mapper:ZN},iK={parameterPath:"sendChatMessageRequest",mapper:eO},pO={parameterPath:["options","startTime"],mapper:{serializedName:"startTime",type:{name:"DateTime"}}},F0={parameterPath:"chatMessageId",mapper:{serializedName:"chatMessageId",required:!0,type:{name:"String"}}},gO={parameterPath:["options","contentType"],mapper:{defaultValue:"application/merge-patch+json",isConstant:!0,serializedName:"Content-Type",type:{name:"String"}}},sK={parameterPath:"updateChatMessageRequest",mapper:rO},aK={parameterPath:"participantCommunicationIdentifier",mapper:YN},cK={parameterPath:"addChatParticipantsRequest",mapper:oO},lK={parameterPath:"updateChatThreadRequest",mapper:lO},uK={parameterPath:["options","sendTypingNotificationRequest"],mapper:uO},Tp={parameterPath:"nextLink",mapper:{serializedName:"nextLink",required:!0,type:{name:"String"}},skipEncoding:!0},dK={parameterPath:"createChatThreadRequest",mapper:sO};class hK{constructor(_){this.client=_}listChatReadReceipts(_,S){var C=this;return(0,pe.A)(function*(){return bn.withSpan("ChatApiClient.listChatReadReceipts",null!=S?S:{},function(){var T=(0,pe.A)(function*(D){return C.client.sendOperationRequest({chatThreadId:_,options:D},pK)});return function(D){return T.apply(this,arguments)}}())})()}sendChatReadReceipt(_,S,C){var T=this;return(0,pe.A)(function*(){return bn.withSpan("ChatApiClient.sendChatReadReceipt",null!=C?C:{},function(){var D=(0,pe.A)(function*(I){return T.client.sendOperationRequest({chatThreadId:_,sendReadReceiptRequest:S,options:I},gK)});return function(I){return D.apply(this,arguments)}}())})()}sendChatMessage(_,S,C){var T=this;return(0,pe.A)(function*(){return bn.withSpan("ChatApiClient.sendChatMessage",null!=C?C:{},function(){var D=(0,pe.A)(function*(I){return T.client.sendOperationRequest({chatThreadId:_,sendChatMessageRequest:S,options:I},mK)});return function(I){return D.apply(this,arguments)}}())})()}listChatMessages(_,S){var C=this;return(0,pe.A)(function*(){return bn.withSpan("ChatApiClient.listChatMessages",null!=S?S:{},function(){var T=(0,pe.A)(function*(D){return C.client.sendOperationRequest({chatThreadId:_,options:D},yK)});return function(D){return T.apply(this,arguments)}}())})()}getChatMessage(_,S,C){var T=this;return(0,pe.A)(function*(){return bn.withSpan("ChatApiClient.getChatMessage",null!=C?C:{},function(){var D=(0,pe.A)(function*(I){return T.client.sendOperationRequest({chatThreadId:_,chatMessageId:S,options:I},vK)});return function(I){return D.apply(this,arguments)}}())})()}updateChatMessage(_,S,C,T){var D=this;return(0,pe.A)(function*(){return bn.withSpan("ChatApiClient.updateChatMessage",null!=T?T:{},function(){var I=(0,pe.A)(function*(M){return D.client.sendOperationRequest({chatThreadId:_,chatMessageId:S,updateChatMessageRequest:C,options:M},_K)});return function(M){return I.apply(this,arguments)}}())})()}deleteChatMessage(_,S,C){var T=this;return(0,pe.A)(function*(){return bn.withSpan("ChatApiClient.deleteChatMessage",null!=C?C:{},function(){var D=(0,pe.A)(function*(I){return T.client.sendOperationRequest({chatThreadId:_,chatMessageId:S,options:I},CK)});return function(I){return D.apply(this,arguments)}}())})()}listChatParticipants(_,S){var C=this;return(0,pe.A)(function*(){return bn.withSpan("ChatApiClient.listChatParticipants",null!=S?S:{},function(){var T=(0,pe.A)(function*(D){return C.client.sendOperationRequest({chatThreadId:_,options:D},wK)});return function(D){return T.apply(this,arguments)}}())})()}removeChatParticipant(_,S,C){var T=this;return(0,pe.A)(function*(){return bn.withSpan("ChatApiClient.removeChatParticipant",null!=C?C:{},function(){var D=(0,pe.A)(function*(I){return T.client.sendOperationRequest({chatThreadId:_,participantCommunicationIdentifier:S,options:I},bK)});return function(I){return D.apply(this,arguments)}}())})()}addChatParticipants(_,S,C){var T=this;return(0,pe.A)(function*(){return bn.withSpan("ChatApiClient.addChatParticipants",null!=C?C:{},function(){var D=(0,pe.A)(function*(I){return T.client.sendOperationRequest({chatThreadId:_,addChatParticipantsRequest:S,options:I},SK)});return function(I){return D.apply(this,arguments)}}())})()}updateChatThreadProperties(_,S,C){var T=this;return(0,pe.A)(function*(){return bn.withSpan("ChatApiClient.updateChatThreadProperties",null!=C?C:{},function(){var D=(0,pe.A)(function*(I){return T.client.sendOperationRequest({chatThreadId:_,updateChatThreadRequest:S,options:I},TK)});return function(I){return D.apply(this,arguments)}}())})()}getChatThreadProperties(_,S){var C=this;return(0,pe.A)(function*(){return bn.withSpan("ChatApiClient.getChatThreadProperties",null!=S?S:{},function(){var T=(0,pe.A)(function*(D){return C.client.sendOperationRequest({chatThreadId:_,options:D},EK)});return function(D){return T.apply(this,arguments)}}())})()}sendTypingNotification(_,S){var C=this;return(0,pe.A)(function*(){return bn.withSpan("ChatApiClient.sendTypingNotification",null!=S?S:{},function(){var T=(0,pe.A)(function*(D){return C.client.sendOperationRequest({chatThreadId:_,options:D},DK)});return function(D){return T.apply(this,arguments)}}())})()}listChatReadReceiptsNext(_,S,C){var T=this;return(0,pe.A)(function*(){return bn.withSpan("ChatApiClient.listChatReadReceiptsNext",null!=C?C:{},function(){var D=(0,pe.A)(function*(I){return T.client.sendOperationRequest({chatThreadId:_,nextLink:S,options:I},IK)});return function(I){return D.apply(this,arguments)}}())})()}listChatMessagesNext(_,S,C){var T=this;return(0,pe.A)(function*(){return bn.withSpan("ChatApiClient.listChatMessagesNext",null!=C?C:{},function(){var D=(0,pe.A)(function*(I){return T.client.sendOperationRequest({chatThreadId:_,nextLink:S,options:I},MK)});return function(I){return D.apply(this,arguments)}}())})()}listChatParticipantsNext(_,S,C){var T=this;return(0,pe.A)(function*(){return bn.withSpan("ChatApiClient.listChatParticipantsNext",null!=C?C:{},function(){var D=(0,pe.A)(function*(I){return T.client.sendOperationRequest({chatThreadId:_,nextLink:S,options:I},AK)});return function(I){return D.apply(this,arguments)}}())})()}}const Kr=P0.createSerializer(je,!1),pK={path:"/chat/threads/{chatThreadId}/readReceipts",httpMethod:"GET",responses:{200:{bodyMapper:N0},401:{bodyMapper:It,isError:!0},403:{bodyMapper:It,isError:!0},429:{bodyMapper:It,isError:!0},503:{bodyMapper:It,isError:!0}},queryParameters:[Sp,hO,Gr],urlParameters:[Tr,Fr],headerParameters:[Sr],serializer:Kr},gK={path:"/chat/threads/{chatThreadId}/readReceipts",httpMethod:"POST",responses:{200:{},401:{bodyMapper:It,isError:!0},403:{bodyMapper:It,isError:!0},429:{bodyMapper:It,isError:!0},503:{bodyMapper:It,isError:!0}},requestBody:oK,queryParameters:[Gr],urlParameters:[Tr,Fr],headerParameters:[Sr,nl],mediaType:"json",serializer:Kr},mK={path:"/chat/threads/{chatThreadId}/messages",httpMethod:"POST",responses:{201:{bodyMapper:tO},401:{bodyMapper:It,isError:!0},403:{bodyMapper:It,isError:!0},429:{bodyMapper:It,isError:!0},503:{bodyMapper:It,isError:!0}},requestBody:iK,queryParameters:[Gr],urlParameters:[Tr,Fr],headerParameters:[Sr,nl],mediaType:"json",serializer:Kr},yK={path:"/chat/threads/{chatThreadId}/messages",httpMethod:"GET",responses:{200:{bodyMapper:O0},401:{bodyMapper:It,isError:!0},403:{bodyMapper:It,isError:!0},429:{bodyMapper:It,isError:!0},503:{bodyMapper:It,isError:!0}},queryParameters:[Sp,Gr,pO],urlParameters:[Tr,Fr],headerParameters:[Sr],serializer:Kr},vK={path:"/chat/threads/{chatThreadId}/messages/{chatMessageId}",httpMethod:"GET",responses:{200:{bodyMapper:nO},401:{bodyMapper:It,isError:!0},403:{bodyMapper:It,isError:!0},429:{bodyMapper:It,isError:!0},503:{bodyMapper:It,isError:!0}},queryParameters:[Gr],urlParameters:[Tr,Fr,F0],headerParameters:[Sr],serializer:Kr},_K={path:"/chat/threads/{chatThreadId}/messages/{chatMessageId}",httpMethod:"PATCH",responses:{204:{},401:{bodyMapper:It,isError:!0},403:{bodyMapper:It,isError:!0},429:{bodyMapper:It,isError:!0},503:{bodyMapper:It,isError:!0}},requestBody:sK,queryParameters:[Gr],urlParameters:[Tr,Fr,F0],headerParameters:[Sr,gO],mediaType:"json",serializer:Kr},CK={path:"/chat/threads/{chatThreadId}/messages/{chatMessageId}",httpMethod:"DELETE",responses:{204:{},401:{bodyMapper:It,isError:!0},403:{bodyMapper:It,isError:!0},429:{bodyMapper:It,isError:!0},503:{bodyMapper:It,isError:!0}},queryParameters:[Gr],urlParameters:[Tr,Fr,F0],headerParameters:[Sr],serializer:Kr},wK={path:"/chat/threads/{chatThreadId}/participants",httpMethod:"GET",responses:{200:{bodyMapper:k0},401:{bodyMapper:It,isError:!0},403:{bodyMapper:It,isError:!0},429:{bodyMapper:It,isError:!0},503:{bodyMapper:It,isError:!0}},queryParameters:[Sp,hO,Gr],urlParameters:[Tr,Fr],headerParameters:[Sr],serializer:Kr},bK={path:"/chat/threads/{chatThreadId}/participants/:remove",httpMethod:"POST",responses:{204:{},401:{bodyMapper:It,isError:!0},403:{bodyMapper:It,isError:!0},429:{bodyMapper:It,isError:!0},503:{bodyMapper:It,isError:!0}},requestBody:aK,queryParameters:[Gr],urlParameters:[Tr,Fr],headerParameters:[Sr,nl],mediaType:"json",serializer:Kr},SK={path:"/chat/threads/{chatThreadId}/participants/:add",httpMethod:"POST",responses:{201:{bodyMapper:iO},401:{bodyMapper:It,isError:!0},403:{bodyMapper:It,isError:!0},429:{bodyMapper:It,isError:!0},503:{bodyMapper:It,isError:!0}},requestBody:cK,queryParameters:[Gr],urlParameters:[Tr,Fr],headerParameters:[Sr,nl],mediaType:"json",serializer:Kr},TK={path:"/chat/threads/{chatThreadId}",httpMethod:"PATCH",responses:{204:{},401:{bodyMapper:It,isError:!0},403:{bodyMapper:It,isError:!0},429:{bodyMapper:It,isError:!0},503:{bodyMapper:It,isError:!0}},requestBody:lK,queryParameters:[Gr],urlParameters:[Tr,Fr],headerParameters:[Sr,gO],mediaType:"json",serializer:Kr},EK={path:"/chat/threads/{chatThreadId}",httpMethod:"GET",responses:{200:{bodyMapper:cO},401:{bodyMapper:It,isError:!0},403:{bodyMapper:It,isError:!0},429:{bodyMapper:It,isError:!0},503:{bodyMapper:It,isError:!0}},queryParameters:[Gr],urlParameters:[Tr,Fr],headerParameters:[Sr],serializer:Kr},DK={path:"/chat/threads/{chatThreadId}/typing",httpMethod:"POST",responses:{200:{},401:{bodyMapper:It,isError:!0},403:{bodyMapper:It,isError:!0},429:{bodyMapper:It,isError:!0},503:{bodyMapper:It,isError:!0}},requestBody:uK,queryParameters:[Gr],urlParameters:[Tr,Fr],headerParameters:[Sr,nl],mediaType:"json",serializer:Kr},IK={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:N0},401:{bodyMapper:It,isError:!0},403:{bodyMapper:It,isError:!0},429:{bodyMapper:It,isError:!0},503:{bodyMapper:It,isError:!0}},urlParameters:[Tr,Fr,Tp],headerParameters:[Sr],serializer:Kr},MK={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:O0},401:{bodyMapper:It,isError:!0},403:{bodyMapper:It,isError:!0},429:{bodyMapper:It,isError:!0},503:{bodyMapper:It,isError:!0}},urlParameters:[Tr,Fr,Tp],headerParameters:[Sr],serializer:Kr},AK={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:k0},401:{bodyMapper:It,isError:!0},403:{bodyMapper:It,isError:!0},429:{bodyMapper:It,isError:!0},503:{bodyMapper:It,isError:!0}},urlParameters:[Tr,Fr,Tp],headerParameters:[Sr],serializer:Kr};class RK{constructor(_){this.client=_}createChatThread(_,S){var C=this;return(0,pe.A)(function*(){return bn.withSpan("ChatApiClient.createChatThread",null!=S?S:{},function(){var T=(0,pe.A)(function*(D){return C.client.sendOperationRequest({createChatThreadRequest:_,options:D},PK)});return function(D){return T.apply(this,arguments)}}())})()}listChatThreads(_){var S=this;return(0,pe.A)(function*(){return bn.withSpan("ChatApiClient.listChatThreads",null!=_?_:{},function(){var C=(0,pe.A)(function*(T){return S.client.sendOperationRequest({options:T},NK)});return function(T){return C.apply(this,arguments)}}())})()}deleteChatThread(_,S){var C=this;return(0,pe.A)(function*(){return bn.withSpan("ChatApiClient.deleteChatThread",null!=S?S:{},function(){var T=(0,pe.A)(function*(D){return C.client.sendOperationRequest({chatThreadId:_,options:D},OK)});return function(D){return T.apply(this,arguments)}}())})()}listChatThreadsNext(_,S){var C=this;return(0,pe.A)(function*(){return bn.withSpan("ChatApiClient.listChatThreadsNext",null!=S?S:{},function(){var T=(0,pe.A)(function*(D){return C.client.sendOperationRequest({nextLink:_,options:D},kK)});return function(D){return T.apply(this,arguments)}}())})()}}const Ep=P0.createSerializer(je,!1),PK={path:"/chat/threads",httpMethod:"POST",responses:{201:{bodyMapper:aO},401:{bodyMapper:It,isError:!0},403:{bodyMapper:It,isError:!0},429:{bodyMapper:It,isError:!0},503:{bodyMapper:It,isError:!0}},requestBody:dK,queryParameters:[Gr],urlParameters:[Tr],headerParameters:[Sr,nl,{parameterPath:["options","repeatabilityRequestId"],mapper:{serializedName:"repeatability-request-id",type:{name:"String"}}}],mediaType:"json",serializer:Ep},NK={path:"/chat/threads",httpMethod:"GET",responses:{200:{bodyMapper:x0},401:{bodyMapper:It,isError:!0},403:{bodyMapper:It,isError:!0},429:{bodyMapper:It,isError:!0},503:{bodyMapper:It,isError:!0}},queryParameters:[Sp,Gr,pO],urlParameters:[Tr],headerParameters:[Sr],serializer:Ep},OK={path:"/chat/threads/{chatThreadId}",httpMethod:"DELETE",responses:{204:{},401:{bodyMapper:It,isError:!0},403:{bodyMapper:It,isError:!0},429:{bodyMapper:It,isError:!0},503:{bodyMapper:It,isError:!0}},queryParameters:[Gr],urlParameters:[Tr,Fr],headerParameters:[Sr],serializer:Ep},kK={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:x0},401:{bodyMapper:It,isError:!0},403:{bodyMapper:It,isError:!0},429:{bodyMapper:It,isError:!0},503:{bodyMapper:It,isError:!0}},urlParameters:[Tr,Tp],headerParameters:[Sr],serializer:Ep};class mO extends P0.ServiceClient{constructor(_,S){var C,T;if(void 0===_)throw new Error("'endpoint' cannot be null");S||(S={});const I="azsdk-js-communication-chat/1.6.0",M=S.userAgentOptions&&S.userAgentOptions.userAgentPrefix?"".concat(S.userAgentOptions.userAgentPrefix," ").concat(I):"".concat(I);super(Object.assign(Object.assign(Object.assign({},{requestContentType:"application/json; charset=utf-8"}),S),{userAgentOptions:{userAgentPrefix:M},endpoint:null!==(T=null!==(C=S.endpoint)&&void 0!==C?C:S.baseUri)&&void 0!==T?T:"{endpoint}"})),this.endpoint=_,this.apiVersion=S.apiVersion||"2025-03-15",this.chatThread=new hK(this),this.chat=new RK(this),this.addCustomApiVersionPolicy(S.apiVersion)}addCustomApiVersionPolicy(_){_&&this.pipeline.addPolicy({name:"CustomApiVersionPolicy",sendRequest:(C,T)=>(0,pe.A)(function*(){const D=C.url.split("?");if(D.length>1){const I=D[1].split("&").map(M=>M.indexOf("api-version")>-1?"api-version="+_:M);C.url=D[0]+"?"+I.join("&")}return T(C)})()})}}const fd=(0,Se(992).KV)("communication-chat"),yO=y=>(0,el.bearerTokenAuthenticationPolicy)({credential:{getToken:(S,C)=>y.getToken({abortSignal:null==C?void 0:C.abortSignal})},scopes:[]});class vO{constructor(_,S,C,T={}){this.endpoint=_,this.timeOfLastTypingRequest=void 0,this.threadId=S,this.tokenCredential=C;const D=Object.assign(Object.assign({},T),{loggingOptions:{logger:fd.info}});this.client=new mO(this.endpoint,Object.assign({endpoint:this.endpoint},D));const I=yO(this.tokenCredential);this.client.pipeline.addPolicy(I)}getProperties(_={}){var S=this;return bn.withSpan("ChatClient-GetProperties",_,function(){var C=(0,pe.A)(function*(T){const D=yield S.client.chatThread.getChatThreadProperties(S.threadId,T);return QN(D)});return function(T){return C.apply(this,arguments)}}())}updateTopic(_,S={}){var C=this;return bn.withSpan("ChatThreadClient-UpdateTopic",S,function(){var T=(0,pe.A)(function*(D){yield C.client.chatThread.updateChatThreadProperties(C.threadId,{topic:_},D)});return function(D){return T.apply(this,arguments)}}())}updateProperties(_={}){var S=this;return bn.withSpan("ChatThreadClient-UpdateProperties",_,function(){var C=(0,pe.A)(function*(T){yield S.client.chatThread.updateChatThreadProperties(S.threadId,_,T)});return function(T){return C.apply(this,arguments)}}())}sendMessage(_,S={}){var C=this;return bn.withSpan("ChatThreadClient-SendMessage",S,function(){var T=(0,pe.A)(function*(D){return C.timeOfLastTypingRequest=void 0,yield C.client.chatThread.sendChatMessage(C.threadId,Object.assign(Object.assign({},_),S),D)});return function(D){return T.apply(this,arguments)}}())}getMessage(_,S={}){var C=this;return bn.withSpan("ChatThreadClient-GetMessage",S,function(){var T=(0,pe.A)(function*(D){const I=yield C.client.chatThread.getChatMessage(C.threadId,_,D);return bp(I)});return function(D){return T.apply(this,arguments)}}())}listMessagesPage(_){return Mi(this,arguments,function*(C,T={}){if(!C.continuationToken){const D=yield Dn(this.client.chatThread.listChatMessages(this.threadId,T));C.continuationToken=D.nextLink,D.value&&(yield yield Dn(D.value.map(bp,this)))}for(;C.continuationToken;){const D=yield Dn(this.client.chatThread.listChatMessagesNext(this.threadId,C.continuationToken,T));if(C.continuationToken=D.nextLink,!D.value)break;yield yield Dn(D.value.map(bp,this))}})}listMessagesAll(_){return Mi(this,arguments,function*(){var C,T,D,I;try{for(var R,M=!0,A=Ai(this.listMessagesPage({},_));!(C=(R=yield Dn(A.next())).done);M=!0)I=R.value,M=!1,yield Dn(yield*gd(Nu(Ai(I))))}catch(N){T={error:N}}finally{try{!M&&!C&&(D=A.return)&&(yield Dn(D.call(A)))}finally{if(T)throw T.error}}})}listMessages(_={}){const{span:S,updatedOptions:C}=bn.startSpan("ChatThreadClient-ListMessages",_);try{const T=this.listMessagesAll(C);return{next:()=>T.next(),[Symbol.asyncIterator](){return this},byPage:(D={})=>this.listMessagesPage(D,C)}}catch(T){throw S.setStatus({status:"error",error:T}),T}finally{S.end()}}deleteMessage(_,S={}){var C=this;return bn.withSpan("ChatThreadClient-DeleteMessage",S,function(){var T=(0,pe.A)(function*(D){yield C.client.chatThread.deleteChatMessage(C.threadId,_,D)});return function(D){return T.apply(this,arguments)}}())}updateMessage(_){var S=this;return(0,pe.A)(function*(C,T={}){return bn.withSpan("ChatThreadClient-UpdateMessage",T,function(){var D=(0,pe.A)(function*(I){yield S.client.chatThread.updateChatMessage(S.threadId,C,T,I)});return function(I){return D.apply(this,arguments)}}())}).apply(this,arguments)}addParticipants(_){var S=this;return(0,pe.A)(function*(C,T={}){return bn.withSpan("ChatThreadClient-AddParticipants",T,function(){var D=(0,pe.A)(function*(I){return yield S.client.chatThread.addChatParticipants(S.threadId,(y=>{var _;return{participants:null===(_=y.participants)||void 0===_?void 0:_.map(S=>JN(S))}})(C),I)});return function(I){return D.apply(this,arguments)}}())}).apply(this,arguments)}listParticipantsPage(_){return Mi(this,arguments,function*(C,T={}){if(!C.continuationToken){const D=yield Dn(this.client.chatThread.listChatParticipants(this.threadId,T));C.continuationToken=D.nextLink,D.value&&(yield yield Dn(D.value.map(R0,this)))}for(;C.continuationToken;){const D=yield Dn(this.client.chatThread.listChatParticipantsNext(this.threadId,C.continuationToken,T));if(C.continuationToken=D.nextLink,!D.value)break;yield yield Dn(D.value.map(R0,this))}})}listParticipantsAll(_){return Mi(this,arguments,function*(){var C,T,D,I;try{for(var R,M=!0,A=Ai(this.listParticipantsPage({},_));!(C=(R=yield Dn(A.next())).done);M=!0)I=R.value,M=!1,yield Dn(yield*gd(Nu(Ai(I))))}catch(N){T={error:N}}finally{try{!M&&!C&&(D=A.return)&&(yield Dn(D.call(A)))}finally{if(T)throw T.error}}})}listParticipants(_={}){const{span:S,updatedOptions:C}=bn.startSpan("ChatThreadClient-ListParticipants",_);try{const T=this.listParticipantsAll(C);return{next:()=>T.next(),[Symbol.asyncIterator](){return this},byPage:(D={})=>this.listParticipantsPage(D,C)}}catch(T){throw S.setStatus({status:"error",error:T}),T}finally{S.end()}}removeParticipant(_){var S=this;return(0,pe.A)(function*(C,T={}){return bn.withSpan("ChatThreadClient-RemoveParticipant",T,function(){var D=(0,pe.A)(function*(I){yield S.client.chatThread.removeChatParticipant(S.threadId,KN(C),I)});return function(I){return D.apply(this,arguments)}}())}).apply(this,arguments)}sendTypingNotification(){var _=this;return(0,pe.A)(function*(S={}){return bn.withSpan("ChatThreadClient-SendTypingNotification",S,function(){var C=(0,pe.A)(function*(T){const D=new Date,{senderDisplayName:I}=T,M=Ii(T,["senderDisplayName"]);return _.canPostTypingNotification(D)?(_.timeOfLastTypingRequest=D,yield _.client.chatThread.sendTypingNotification(_.threadId,Object.assign({sendTypingNotificationRequest:{senderDisplayName:I}},M)),!0):(fd.info("Typing Notification NOT Send. [thread_id=".concat(_.threadId,"]")),!1)});return function(T){return C.apply(this,arguments)}}())}).apply(this,arguments)}sendReadReceipt(_){var S=this;return(0,pe.A)(function*(C,T={}){return bn.withSpan("ChatThreadClient-SendReadReceipt",T,function(){var D=(0,pe.A)(function*(I){yield S.client.chatThread.sendChatReadReceipt(S.threadId,C,I)});return function(I){return D.apply(this,arguments)}}())}).apply(this,arguments)}listReadReceiptsPage(_){return Mi(this,arguments,function*(C,T={}){if(!C.continuationToken){const D=yield Dn(this.client.chatThread.listChatReadReceipts(this.threadId,T));C.continuationToken=D.nextLink,D.value&&(yield yield Dn(D.value.map(XN,this)))}for(;C.continuationToken;){const D=yield Dn(this.client.chatThread.listChatReadReceiptsNext(this.threadId,C.continuationToken,T));if(C.continuationToken=D.nextLink,!D.value)break;yield yield Dn(D.value.map(XN,this))}})}listReadReceiptsAll(_){return Mi(this,arguments,function*(){var C,T,D,I;try{for(var R,M=!0,A=Ai(this.listReadReceiptsPage({},_));!(C=(R=yield Dn(A.next())).done);M=!0)I=R.value,M=!1,yield Dn(yield*gd(Nu(Ai(I))))}catch(N){T={error:N}}finally{try{!M&&!C&&(D=A.return)&&(yield Dn(D.call(A)))}finally{if(T)throw T.error}}})}listReadReceipts(_={}){const{span:S,updatedOptions:C}=bn.startSpan("ChatThreadClient-ListChatReadReceipts",_);try{const T=this.listReadReceiptsAll(C);return{next:()=>T.next(),[Symbol.asyncIterator](){return this},byPage:(D={})=>this.listReadReceiptsPage(D,C)}}catch(T){throw S.setStatus({status:"error",error:T}),T}finally{S.end()}}canPostTypingNotification(_){return!(this.timeOfLastTypingRequest&&_.getTime()-this.timeOfLastTypingRequest.getTime()<8e3&&(fd.info("Typing interval check failed. [last_request=".concat(this.timeOfLastTypingRequest,"]")),1))}}var LK=Se(356);class jK{constructor(_,S,C={}){this.endpoint=_,this.signalingClient=void 0,this.emitter=new LK.EventEmitter,this.isRealtimeNotificationsStarted=!1,this.tokenCredential=S;const T=Object.assign(Object.assign({},C),{loggingOptions:{logger:fd.info}});this.client=new mO(this.endpoint,Object.assign({endpoint:this.endpoint},T));const D=yO(this.tokenCredential);this.client.pipeline.addPolicy(D),this.clientOptions=Object.assign({},C),this.clientOptions.signalingClientOptions=Object.assign(Object.assign({},this.clientOptions.signalingClientOptions),{resourceEndpoint:this.endpoint,gatewayApiVersion:this.client.apiVersion}),this.signalingClient=((y,_,S)=>{var C,T,D,I;return new S0.CommunicationSignalingClient(y,_,{resourceEndpoint:null!==(C=null==S?void 0:S.resourceEndpoint)&&void 0!==C?C:void 0,gatewayApiVersion:null!==(T=null==S?void 0:S.gatewayApiVersion)&&void 0!==T?T:void 0,additionalPolicies:null!==(D=null==S?void 0:S.additionalPolicies)&&void 0!==D?D:void 0,userAgentOptions:null!==(I=null==S?void 0:S.userAgentOptions)&&void 0!==I?I:void 0})})(S,fd,this.clientOptions.signalingClientOptions)}getChatThreadClient(_){return new vO(this.endpoint,_,this.tokenCredential,this.clientOptions)}createChatThread(_){var S=this;return(0,pe.A)(function*(C,T={}){return bn.withSpan("ChatClient-CreateChatThread",T,function(){var D=(0,pe.A)(function*(I){var M,A;I.idempotencyToken=null!==(M=I.idempotencyToken)&&void 0!==M?M:function UK(){return(0,zN.randomUUID)()}();const R=(y=>{const{idempotencyToken:S}=y,C=Ii(y,["participants","idempotencyToken"]);return Object.assign({repeatabilityRequestId:S},C)})(I);return(y=>{const{chatThread:_}=y,S=Ii(y,["chatThread"]);return _?Object.assign(Object.assign({},S),{chatThread:QN(_)}):Object.assign({},S)})(yield S.client.chat.createChatThread({topic:C.topic,participants:null===(A=T.participants)||void 0===A?void 0:A.map(O=>JN(O)),metadata:T.metadata,retentionPolicy:T.retentionPolicy},R))});return function(I){return D.apply(this,arguments)}}())}).apply(this,arguments)}listChatThreadsPage(_){return Mi(this,arguments,function*(C,T={}){if(!C.continuationToken){const D=yield Dn(this.client.chat.listChatThreads(T));C.continuationToken=D.nextLink,D.value&&(yield yield Dn(D.value))}for(;C.continuationToken;){const D=yield Dn(this.client.chat.listChatThreadsNext(C.continuationToken,T));if(C.continuationToken=D.nextLink,!D.value)break;yield yield Dn(D.value)}})}listChatThreadsAll(_){return Mi(this,arguments,function*(){var C,T,D,I;try{for(var R,M=!0,A=Ai(this.listChatThreadsPage({},_));!(C=(R=yield Dn(A.next())).done);M=!0)I=R.value,M=!1,yield Dn(yield*gd(Nu(Ai(I))))}catch(N){T={error:N}}finally{try{!M&&!C&&(D=A.return)&&(yield Dn(D.call(A)))}finally{if(T)throw T.error}}})}listChatThreads(_={}){const{span:S,updatedOptions:C}=bn.startSpan("ChatClient-ListChatThreads",_);try{const T=this.listChatThreadsAll(C);return{next:()=>T.next(),[Symbol.asyncIterator](){return this},byPage:(D={})=>this.listChatThreadsPage(D,C)}}catch(T){throw S.setStatus({error:T,status:"error"}),T}finally{S.end()}}deleteChatThread(_){var S=this;return(0,pe.A)(function*(C,T={}){return bn.withSpan("ChatClient-DeleteChatThread",T,function(){var D=(0,pe.A)(function*(I){yield S.client.chat.deleteChatThread(C,I)});return function(I){return D.apply(this,arguments)}}())}).apply(this,arguments)}startRealtimeNotifications(){var _=this;return(0,pe.A)(function*(){if(void 0===_.signalingClient)throw new Error("Realtime notifications are not supported in node js.");_.isRealtimeNotificationsStarted||(_.isRealtimeNotificationsStarted=!0,yield _.signalingClient.start(),_.subscribeToSignalingEvents())})()}stopRealtimeNotifications(){var _=this;return(0,pe.A)(function*(){if(void 0===_.signalingClient)throw new Error("Realtime notifications are not supported in node js.");_.isRealtimeNotificationsStarted=!1,yield _.signalingClient.stop(),_.emitter.removeAllListeners()})()}on(_,S){if(void 0===this.signalingClient)throw new Error("Realtime notifications are only supported in the browser.");if(!this.isRealtimeNotificationsStarted&&"realTimeNotificationConnected"!==_&&"realTimeNotificationDisconnected"!==_)throw new Error("You must call startRealtimeNotifications before you can subscribe to events.");this.emitter.on(_,S)}off(_,S){if(void 0===this.signalingClient)throw new Error("Realtime notifications are only supported in the browser.");this.emitter.removeListener(_,S)}subscribeToSignalingEvents(){if(void 0===this.signalingClient)throw new Error("Realtime notifications are only supported in the browser.");this.signalingClient.on("connectionChanged",_=>{_===S0.ConnectionState.Connected?this.emitter.emit("realTimeNotificationConnected"):_===S0.ConnectionState.Disconnected&&this.emitter.emit("realTimeNotificationDisconnected")}),this.signalingClient.on("chatMessageReceived",_=>{this.emitter.emit("chatMessageReceived",_)}),this.signalingClient.on("chatMessageEdited",_=>{this.emitter.emit("chatMessageEdited",_)}),this.signalingClient.on("chatMessageDeleted",_=>{this.emitter.emit("chatMessageDeleted",_)}),this.signalingClient.on("typingIndicatorReceived",_=>{this.emitter.emit("typingIndicatorReceived",_)}),this.signalingClient.on("readReceiptReceived",_=>{this.emitter.emit("readReceiptReceived",_)}),this.signalingClient.on("chatThreadCreated",_=>{this.emitter.emit("chatThreadCreated",_)}),this.signalingClient.on("chatThreadDeleted",_=>{this.emitter.emit("chatThreadDeleted",_)}),this.signalingClient.on("chatThreadPropertiesUpdated",_=>{this.emitter.emit("chatThreadPropertiesUpdated",_)}),this.signalingClient.on("participantsAdded",_=>{this.emitter.emit("participantsAdded",_)}),this.signalingClient.on("participantsRemoved",_=>{this.emitter.emit("participantsRemoved",_)})}}let _O=(()=>{var y;class _{constructor(C){this.http=C}getAgentWorkItems(){var C=this;return(0,pe.A)(function*(){try{return(yield C.http.get("http://localhost:8080/agentWorkItem").toPromise())||[]}catch(T){return console.error("Failed to get agent work items:",T),[]}})()}createAgentWorkItem(C,T){var D=this;return(0,pe.A)(function*(){try{yield D.http.post("http://localhost:8080/agentWorkItem",{id:C,status:T}).toPromise()}catch(I){console.error("Failed to create agent work item:",I)}})()}updateAgentWorkItem(C,T){var D=this;return(0,pe.A)(function*(){try{yield D.http.put("http://localhost:8080/api/agent/work-items/".concat(C),{status:T}).toPromise()}catch(I){console.error("Failed to update agent work item:",I)}})()}}return(y=_).\u0275fac=function(C){return new(C||y)($t(w_))},y.\u0275prov=Ot({token:y,factory:y.\u0275fac,providedIn:"root"}),_})();var ps=function(y){return y.ACTIVE="active",y.RESOLVED="resolved",y}(ps||{});let BK=(()=>{var y;class _{constructor(C){this.agentWorkItemService=C,this.threadsSubject=new ir([]),this.selectedThreadIdSubject=new ir(void 0),this.resolvedThreadIdSubject=new ir(void 0),this.isLoadingSubject=new ir(!0),this.threads$=this.threadsSubject.asObservable(),this.selectedThreadId$=this.selectedThreadIdSubject.asObservable(),this.resolvedThreadId$=this.resolvedThreadIdSubject.asObservable(),this.isLoading$=this.isLoadingSubject.asObservable()}initializeChatClient(C,T,D){var I=this;return(0,pe.A)(function*(){if(D)try{const M=new D0(T);I.chatClient=new jK(D,M),yield I.chatClient.startRealtimeNotifications(),I.addChatClientListeners(C),yield I.fetchThreads()}catch(M){console.error("Failed to initialize chat client:",M)}})()}addChatClientListeners(C){var T=this;this.chatClient&&(this.chatClient.on("participantsAdded",function(){var D=(0,pe.A)(function*(I){if(I.participantsAdded.some(R=>R.id.communicationUserId===C)){const R=(yield T.chatClient.getChatThreadClient(I.threadId).getProperties()).topic;T.addThread({id:I.threadId,topic:R,lastMessageReceivedOn:new Date,status:ps.ACTIVE})}});return function(I){return D.apply(this,arguments)}}()),this.chatClient.on("participantsRemoved",function(){var D=(0,pe.A)(function*(I){T.markThreadAsResolved(I.threadId)});return function(I){return D.apply(this,arguments)}}()),this.chatClient.on("chatMessageReceived",D=>{this.updateThreadLastMessage(D.threadId,C,D)}))}fetchThreads(){var C=this;return(0,pe.A)(function*(){if(C.chatClient){C.isLoadingSubject.next(!0);try{const I=(yield C.chatClient.listChatThreads().byPage().next()).value.map(A=>({id:A.id,topic:A.topic,lastMessageReceivedOn:A.lastMessageReceivedOn})),M=yield C.agentWorkItemService.getAgentWorkItems();for(const A of I){const R=M.find(N=>N.id===A.id);if(R)A.status=null==R?void 0:R.status;else try{yield C.agentWorkItemService.createAgentWorkItem(A.id,ps.ACTIVE)}catch(N){console.error("Fail to create thread status work item for thread ".concat(A.id," due to ").concat(N))}}I.sort((A,R)=>R.lastMessageReceivedOn.getTime()-A.lastMessageReceivedOn.getTime()),C.threadsSubject.next(I)}catch(T){console.error("Failed to fetch threads")}C.isLoadingSubject.next(!1)}})()}addThread(C){const T=this.threadsSubject.value;-1===T.findIndex(I=>I.id===C.id)&&this.threadsSubject.next([C,...T])}markThreadAsResolved(C){const T=this.threadsSubject.value,D=T.findIndex(I=>I.id===C);if(-1!==D){const[I]=T.splice(D,1);I.status=ps.RESOLVED;const M=[I,...T];if(M.sort((A,R)=>R.lastMessageReceivedOn.getTime()-A.lastMessageReceivedOn.getTime()),this.threadsSubject.next(M),this.selectedThreadIdSubject.value===C){const A=this.getNextActiveThreadId(C);this.setSelectedThreadId(A)}this.resolvedThreadIdSubject.next(C)}}updateThreadLastMessage(C,T,D){const I=this.threadsSubject.value,M=I.findIndex(A=>A.id===C);if(-1!==M){const[A]=I.splice(M,1);A.lastMessageReceivedOn=new Date,A.status===ps.RESOLVED&&D.sender.communicationUserId!==T&&(A.status=ps.ACTIVE),this.threadsSubject.next([A,...I])}}setSelectedThreadId(C){this.selectedThreadIdSubject.next(C)}resolveThread(C){const D=this.threadsSubject.value.map(I=>I.id===C?se(se({},I),{},{status:ps.RESOLVED}):I);this.threadsSubject.next(D)}getNextActiveThreadId(C){const D=this.threadsSubject.value.filter(I=>I.status===ps.ACTIVE&&I.id!==C);return D.length>0?D[0].id:void 0}}return(y=_).\u0275fac=function(C){return new(C||y)($t(_O))},y.\u0275prov=Ot({token:y,factory:y.\u0275fac,providedIn:"root"}),_})(),$K=(()=>{var y;class _{constructor(C){this.http=C}getAgentACSUser(C){var T=this;return(0,pe.A)(function*(){try{return yield T.http.get("http://localhost:8080/agentACSUser/?teamsUserId=".concat(C)).toPromise()}catch(D){return void console.error("Failed to get ACS user:",D)}})()}getEndpointUrl(){var C=this;return(0,pe.A)(function*(){try{const T=yield C.http.get("http://localhost:8080/getEndpointUrl").toPromise();return(null==T?void 0:T.endpointUrl)||""}catch(T){return console.error("Failed to get endpoint URL:",T),"https://mock-endpoint.communication.azure.com/"}})()}getToken(C){var T=this;return(0,pe.A)(function*(){try{const D={method:"POST"};return(yield T.http.post("http://localhost:8080/token/user/".concat(C,"?scope=chat"),D).toPromise())||{token:""}}catch(D){return console.error("Failed to get token:",D),{token:"mock-token"}}})()}}return(y=_).\u0275fac=function(C){return new(C||y)($t(w_))},y.\u0275prov=Ot({token:y,factory:y.\u0275fac,providedIn:"root"}),_})();function HK(y,_){if(1&y){const S=Ei();Dt(0,"button",8),qn("click",function(){return Oo(S),ko(lr().handleResolveChat())}),Lt(1," Resolve "),St()}}let zK=(()=>{var y;class _{constructor(){this.personaName="",this.threadStatus="",this.onResolveChat=new zn}handleResolveChat(){this.onResolveChat.emit()}getStatusClass(){return"active"===this.threadStatus?"active":"resolved"}getStatusText(){return"active"===this.threadStatus?"Active":"Resolved"}}return(y=_).\u0275fac=function(C){return new(C||y)},y.\u0275cmp=Lr({type:y,selectors:[["app-chat-header"]],inputs:{personaName:"personaName",threadStatus:"threadStatus"},outputs:{onResolveChat:"onResolveChat"},decls:11,vars:5,consts:[[1,"chat-header"],[1,"header-content"],[1,"persona-info"],[1,"avatar"],[1,"persona-details"],[1,"persona-name"],[1,"thread-status",3,"ngClass"],["class","resolve-button",3,"click",4,"ngIf"],[1,"resolve-button",3,"click"]],template:function(C,T){1&C&&(Dt(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),Lt(4),St(),Dt(5,"div",4)(6,"div",5),Lt(7),St(),Dt(8,"div",6),Lt(9),St()()(),Ar(10,HK,2,0,"button",7),St()()),2&C&&(cn(4),ti(T.personaName.charAt(0).toUpperCase()),cn(3),ti(T.personaName),cn(),En("ngClass",T.getStatusClass()),cn(),So(" ",T.getStatusText()," "),cn(),En("ngIf","active"===T.threadStatus))},dependencies:[Nc,Os],styles:[".chat-header[_ngcontent-%COMP%]{padding:16px;border-bottom:1px solid #e1dfdd;background-color:#fff}.header-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.persona-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.avatar[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;background-color:#0078d4;color:#fff;display:flex;align-items:center;justify-content:center;font-weight:600;font-size:16px}.persona-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.persona-name[_ngcontent-%COMP%]{font-weight:600;font-size:16px;color:#323130}.thread-status[_ngcontent-%COMP%]{font-size:12px;font-weight:500;padding:2px 8px;border-radius:12px;text-transform:uppercase;letter-spacing:.5px}.thread-status.active[_ngcontent-%COMP%]{background-color:#dff6dd;color:#107c10}.thread-status.resolved[_ngcontent-%COMP%]{background-color:#fce4ec;color:#c2185b}.resolve-button[_ngcontent-%COMP%]{background-color:#0078d4;color:#fff;border:none;padding:8px 16px;border-radius:4px;cursor:pointer;font-weight:500;transition:background-color .2s}.resolve-button[_ngcontent-%COMP%]:hover{background-color:#106ebe}.resolve-button[_ngcontent-%COMP%]:active{background-color:#005a9e}"]}),_})();const qK=y=>({"dark-mode":y}),WK=y=>({"own-message":y});function GK(y,_){1&y&&(Dt(0,"div",10),Lt(1," Loading messages... "),St())}function KK(y,_){1&y&&(Dt(0,"div",11),Lt(1," No messages yet. Start the conversation! "),St())}function JK(y,_){if(1&y&&(Dt(0,"div",12)(1,"div",13)(2,"div",14),Lt(3),St(),ei(4,"div",15),Dt(5,"div",16),Lt(6),St()()()),2&y){const S=_.$implicit,C=lr();En("ngClass",Kf(4,WK,S.sender===C.userId)),cn(3),ti(S.senderDisplayName||"Unknown"),cn(),En("innerHTML",S.content,Jw),cn(2),ti(C.formatMessageTime(S.createdOn))}}let QK=(()=>{var y;class _{constructor(){this.isDarkMode=!1,this.threadId="",this.userId="",this.token="",this.endpointUrl="",this.destroy$=new hr,this.messages=[],this.messageText="",this.isLoading=!1,this.canSendMessage=!1}ngOnInit(){this.threadId&&this.userId&&this.token&&this.endpointUrl&&(this.initializeChatThreadClient(),this.loadMessages())}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}initializeChatThreadClient(){var C=this;return(0,pe.A)(function*(){try{const T=new D0(C.token);C.chatThreadClient=new vO(C.endpointUrl,C.threadId,T),C.canSendMessage=!0}catch(T){console.error("Failed to initialize chat thread client:",T),C.canSendMessage=!1}})()}loadMessages(){var C=this;return(0,pe.A)(function*(){if(C.chatThreadClient)try{C.isLoading=!0;const D=(yield C.chatThreadClient.listMessages().byPage().next()).value.map(I=>{var M,A;return{id:I.id,content:(null===(M=I.content)||void 0===M?void 0:M.message)||"",sender:(null===(A=I.sender)||void 0===A?void 0:A.communicationUserId)||"",senderDisplayName:I.senderDisplayName||"Unknown",createdOn:I.createdOn,type:"text"}});D.sort((I,M)=>I.createdOn.getTime()-M.createdOn.getTime()),C.messages=D}catch(T){console.error("Failed to load messages:",T)}finally{C.isLoading=!1}})()}sendMessage(){var C=this;return(0,pe.A)(function*(){if(!C.messageText.trim()||!C.chatThreadClient||!C.canSendMessage)return;const T=C.messageText.trim();try{C.messageText="",yield C.chatThreadClient.sendMessage({content:T}),yield C.loadMessages()}catch(D){console.error("Failed to send message:",D),C.messageText=T}})()}formatMessageTime(C){return new Date(C).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}}return(y=_).\u0275fac=function(C){return new(C||y)},y.\u0275cmp=Lr({type:y,selectors:[["app-chat-components"]],inputs:{isDarkMode:"isDarkMode",threadId:"threadId",userId:"userId",token:"token",endpointUrl:"endpointUrl"},decls:11,vars:9,consts:[[1,"chat-components-container",3,"ngClass"],[1,"chat-messages"],[1,"message-list"],["class","loading-messages",4,"ngIf"],["class","no-messages",4,"ngIf"],["class","message-item",3,"ngClass",4,"ngFor","ngForOf"],[1,"chat-input"],[1,"input-container"],["type","text","placeholder","Type a message...",1,"message-input",3,"ngModelChange","keyup.enter","ngModel","disabled"],[1,"send-button",3,"click","disabled"],[1,"loading-messages"],[1,"no-messages"],[1,"message-item",3,"ngClass"],[1,"message-content"],[1,"message-sender"],[1,"message-text",3,"innerHTML"],[1,"message-time"]],template:function(C,T){1&C&&(Dt(0,"div",0)(1,"div",1)(2,"div",2),Ar(3,GK,2,0,"div",3)(4,KK,2,0,"div",4)(5,JK,7,6,"div",5),St()(),Dt(6,"div",6)(7,"div",7)(8,"input",8),hy("ngModelChange",function(I){return function JE(y,_){const S=TS(y);return S&&y.set(_),S}(T.messageText,I)||(T.messageText=I),I}),qn("keyup.enter",function(){return T.sendMessage()}),St(),Dt(9,"button",9),qn("click",function(){return T.sendMessage()}),Lt(10," Send "),St()()()()),2&C&&(En("ngClass",Kf(7,qK,T.isDarkMode)),cn(3),En("ngIf",T.isLoading),cn(),En("ngIf",!T.isLoading&&0===T.messages.length),cn(),En("ngForOf",T.messages),cn(3),fy("ngModel",T.messageText),En("disabled",!T.canSendMessage),cn(),En("disabled",!T.canSendMessage||!T.messageText.trim()))},dependencies:[Nc,vh,Os,ip,oP,V_],styles:[".chat-components-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;background-color:#fff}.chat-components-container.dark-mode[_ngcontent-%COMP%]{background-color:#1b1a19;color:#fff}.chat-messages[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:16px}.message-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.loading-messages[_ngcontent-%COMP%], .no-messages[_ngcontent-%COMP%]{text-align:center;color:#666;padding:20px}.dark-mode[_ngcontent-%COMP%]   .loading-messages[_ngcontent-%COMP%], .dark-mode[_ngcontent-%COMP%]   .no-messages[_ngcontent-%COMP%]{color:#ccc}.message-item[_ngcontent-%COMP%]{display:flex;justify-content:flex-start}.message-item.own-message[_ngcontent-%COMP%]{justify-content:flex-end}.message-content[_ngcontent-%COMP%]{max-width:70%;background-color:#f3f2f1;color:#323130;padding:12px 16px;border-radius:18px 18px 18px 4px}.own-message[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]{background-color:#0078d4;color:#fff;border-bottom-left-radius:18px;border-bottom-right-radius:4px}.dark-mode[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]{background-color:#3b3a39;color:#fff}.dark-mode[_ngcontent-%COMP%]   .own-message[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]{background-color:#106ebe}.message-sender[_ngcontent-%COMP%]{font-size:12px;font-weight:600;margin-bottom:4px;opacity:.8}.message-text[_ngcontent-%COMP%]{margin-bottom:4px;line-height:1.4;word-wrap:break-word}.message-time[_ngcontent-%COMP%]{font-size:11px;opacity:.8;text-align:right}.chat-input[_ngcontent-%COMP%]{padding:16px;border-top:1px solid #e1dfdd;background-color:#fff}.dark-mode[_ngcontent-%COMP%]   .chat-input[_ngcontent-%COMP%]{background-color:#1b1a19;border-top-color:#3b3a39}.input-container[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center}.message-input[_ngcontent-%COMP%]{flex:1;padding:12px 16px;border:1px solid #e1dfdd;border-radius:24px;font-size:14px;outline:none;transition:border-color .2s}.dark-mode[_ngcontent-%COMP%]   .message-input[_ngcontent-%COMP%]{background-color:#3b3a39;border-color:#605e5c;color:#fff}.message-input[_ngcontent-%COMP%]:focus{border-color:#0078d4}.dark-mode[_ngcontent-%COMP%]   .message-input[_ngcontent-%COMP%]:focus{border-color:#106ebe}.message-input[_ngcontent-%COMP%]:disabled{background-color:#f3f2f1;color:#605e5c;cursor:not-allowed}.dark-mode[_ngcontent-%COMP%]   .message-input[_ngcontent-%COMP%]:disabled{background-color:#3b3a39;color:#605e5c}.send-button[_ngcontent-%COMP%]{background-color:#0078d4;color:#fff;border:none;padding:12px 20px;border-radius:24px;cursor:pointer;font-weight:500;transition:background-color .2s}.dark-mode[_ngcontent-%COMP%]   .send-button[_ngcontent-%COMP%]{background-color:#106ebe}.send-button[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#106ebe}.dark-mode[_ngcontent-%COMP%]   .send-button[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#005a9e}.send-button[_ngcontent-%COMP%]:disabled{background-color:#c8c6c4;cursor:not-allowed}.dark-mode[_ngcontent-%COMP%]   .send-button[_ngcontent-%COMP%]:disabled{background-color:#605e5c}"]}),_})(),CO=(()=>{var y;class _{}return(y=_).\u0275fac=function(C){return new(C||y)},y.\u0275cmp=Lr({type:y,selectors:[["app-loading-spinner"]],decls:4,vars:0,consts:[[1,"loading-container"],[1,"spinner"],[1,"loading-text"]],template:function(C,T){1&C&&(Dt(0,"div",0),ei(1,"div",1),Dt(2,"div",2),Lt(3,"Loading..."),St()())},styles:[".loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;gap:16px}.spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #f3f3f3;border-top:4px solid #0078d4;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}.loading-text[_ngcontent-%COMP%]{color:#605e5c;font-size:14px;font-weight:500}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]}),_})();function XK(y,_){if(1&y){const S=Ei();Sc(0),Dt(1,"app-chat-header",3),qn("onResolveChat",function(){return Oo(S),ko(lr().handleOnResolveChat())}),St(),Dt(2,"div",4),ei(3,"app-chat-components",5),St(),Tc()}if(2&y){const S=lr();cn(),En("personaName",S.receiverName)("threadStatus",S.threadStatus),cn(2),En("isDarkMode",S.isDarkMode)("threadId",S.threadId)("userId",S.userId)("token",S.token)("endpointUrl",S.endpointUrl)}}function YK(y,_){1&y&&ei(0,"app-loading-spinner")}let ZK=(()=>{var y;class _{constructor(C,T){this.teamsFxService=C,this.agentWorkItemService=T,this.token="",this.userId="",this.displayName="",this.endpointUrl="",this.threadId="",this.receiverName="",this.threadStatus="",this.onResolveChat=new zn,this.destroy$=new hr,this.isLoading=!0,this.isDarkMode=!1}ngOnInit(){this.initializeChat(),this.subscribeToTheme()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),document.body.style.overflow="auto"}initializeChat(){var C=this;return(0,pe.A)(function*(){try{document.body.style.overflow="hidden",new D0(C.token),C.chatClient={getChatThreadClient:D=>{return{getProperties:(I=(0,pe.A)(function*(){return{id:D}}),function(){return I.apply(this,arguments)}),updateProperties:function(){var I=(0,pe.A)(function*(M){return Promise.resolve()});return function(A){return I.apply(this,arguments)}}()};var I}},yield C.initializeChatThreadClient()}catch(T){console.error("Failed to initialize chat:",T)}})()}initializeChatThreadClient(){var C=this;return(0,pe.A)(function*(){try{C.isLoading=!0;const T=C.chatClient.getChatThreadClient(C.threadId);yield T.getProperties(),C.chatThreadClient=T}catch(T){console.error("Failed to initialize chat thread client:",T)}finally{C.isLoading=!1}})()}subscribeToTheme(){this.teamsFxService.teamsContext$.pipe(xu(this.destroy$)).subscribe(C=>{this.isDarkMode="dark"===C.themeString})}handleOnResolveChat(){var C=this;return(0,pe.A)(function*(){try{C.chatThreadClient&&(yield C.chatThreadClient.updateProperties({metadata:{isResolvedByAgent:"true"}})),yield C.agentWorkItemService.updateAgentWorkItem(C.threadId,ps.RESOLVED),C.onResolveChat.emit(C.threadId)}catch(T){console.error("Failed to resolve chat:",T)}})()}}return(y=_).\u0275fac=function(C){return new(C||y)(dt(b0),dt(_O))},y.\u0275cmp=Lr({type:y,selectors:[["app-chat-screen"]],inputs:{token:"token",userId:"userId",displayName:"displayName",endpointUrl:"endpointUrl",threadId:"threadId",receiverName:"receiverName",threadStatus:"threadStatus"},outputs:{onResolveChat:"onResolveChat"},decls:4,vars:2,consts:[["loadingTemplate",""],[1,"chat-screen-container"],[4,"ngIf","ngIfElse"],[3,"onResolveChat","personaName","threadStatus"],[1,"chat-content"],[3,"isDarkMode","threadId","userId","token","endpointUrl"]],template:function(C,T){if(1&C&&(Dt(0,"div",1),Ar(1,XK,4,7,"ng-container",2),St(),Ar(2,YK,1,0,"ng-template",null,0,Jf)),2&C){const D=Wf(3);cn(),En("ngIf",!T.isLoading&&T.chatThreadClient)("ngIfElse",D)}},dependencies:[Os,zK,QK,CO],styles:[".chat-screen-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;background-color:#fff}.chat-content[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;overflow:hidden}"]}),_})();const tJ=y=>({active:y});function nJ(y,_){if(1&y){const S=Ei();Dt(0,"div",3),qn("click",function(){const T=Oo(S).$implicit;return ko(lr().handleTabSelect(T))}),Lt(1),St()}if(2&y){const S=_.$implicit,C=lr();En("ngClass",Kf(2,tJ,S===C.selectedTab)),cn(),So(" ",S," ")}}let rJ=(()=>{var y;class _{constructor(){this.tabs=[],this.selectedTab="",this.onTabSelect=new zn}handleTabSelect(C){this.onTabSelect.emit(C)}}return(y=_).\u0275fac=function(C){return new(C||y)},y.\u0275cmp=Lr({type:y,selectors:[["app-thread-list-header"]],inputs:{tabs:"tabs",selectedTab:"selectedTab"},outputs:{onTabSelect:"onTabSelect"},decls:3,vars:1,consts:[[1,"thread-list-header"],[1,"tabs"],["class","tab",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"tab",3,"click","ngClass"]],template:function(C,T){1&C&&(Dt(0,"div",0)(1,"div",1),Ar(2,nJ,2,4,"div",2),St()()),2&C&&(cn(2),En("ngForOf",T.tabs))},dependencies:[Nc,vh],styles:[".thread-list-header[_ngcontent-%COMP%]{padding:16px;border-bottom:1px solid #e1dfdd;background-color:#fff}.tabs[_ngcontent-%COMP%]{display:flex;gap:0;border:1px solid #e1dfdd;border-radius:4px;overflow:hidden}.tab[_ngcontent-%COMP%]{flex:1;padding:8px 16px;text-align:center;cursor:pointer;background-color:#faf9f8;border-right:1px solid #e1dfdd;transition:background-color .2s;font-size:14px;font-weight:500}.tab[_ngcontent-%COMP%]:last-child{border-right:none}.tab[_ngcontent-%COMP%]:hover{background-color:#f3f2f1}.tab.active[_ngcontent-%COMP%]{background-color:#0078d4;color:#fff}.tab.active[_ngcontent-%COMP%]:hover{background-color:#106ebe}"]}),_})();function oJ(y,_){if(1&y){const S=Ei();Dt(0,"div",9),qn("click",function(){const T=Oo(S).$implicit;return ko(lr(3).handleOnThreadSelected(T.id))}),Dt(1,"div",10)(2,"div",11)(3,"div",12),Lt(4),St(),Dt(5,"div",13),Lt(6),St()(),Dt(7,"div",14),Lt(8),St()()()}if(2&y){const S=_.$implicit,C=lr(3);En("ngClass",C.getThreadItemContainerStyle(S.id)),cn(4),ti(S.topic.charAt(0).toUpperCase()),cn(2),ti(S.topic),cn(2),So(" ",C.formatTimestampForThread(S.lastMessageReceivedOn,C.currentDate)," ")}}function iJ(y,_){if(1&y&&(Sc(0),Dt(1,"div",6),Lt(2,"Assigned to me"),St(),Dt(3,"div",7),Ar(4,oJ,9,4,"div",8),St(),Tc()),2&y){const S=lr(2);cn(4),En("ngForOf",S.getCurrentStatusThreads())}}function sJ(y,_){if(1&y&&(Sc(0),Ar(1,iJ,5,1,"ng-container",5),Tc()),2&y){const S=lr(),C=Wf(7);cn(),En("ngIf",S.getCurrentStatusThreads().length>0)("ngIfElse",C)}}function aJ(y,_){1&y&&ei(0,"app-loading-spinner")}function cJ(y,_){1&y&&(Dt(0,"div",15),Lt(1,"No threads"),St())}let lJ=(()=>{var y;class _{constructor(){this.threads=[],this.isLoading=!1,this.tabs=[],this.selectedTab="",this.onThreadSelected=new zn,this.onStatusTabSelected=new zn,this.destroy$=new hr,this.currentDate=new Date}ngOnInit(){if(!this.selectedThreadId&&this.threads&&this.threads.length>0){const C=this.threads.find(T=>T.status===this.selectedTab.toLowerCase());C&&this.handleOnThreadSelected(C.id)}}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}handleOnThreadSelected(C){this.onThreadSelected.emit(C)}handleOnStatusTabSelected(C){this.onStatusTabSelected.emit(C)}getCurrentStatusThreads(){return this.threads.filter(C=>C.status===this.selectedTab.toLowerCase())}getThreadItemContainerStyle(C){return C===this.selectedThreadId?"selected":"unselected"}formatTimestampForThread(C,T){return function eJ(y,_){if(!y)return"";const S=_.getTime()-y.getTime(),C=Math.floor(S/6e4),T=Math.floor(S/36e5),D=Math.floor(S/864e5);return C<1?"Just now":C<60?"".concat(C,"m ago"):T<24?"".concat(T,"h ago"):D<7?"".concat(D,"d ago"):y.toLocaleDateString()}(C,T)}}return(y=_).\u0275fac=function(C){return new(C||y)},y.\u0275cmp=Lr({type:y,selectors:[["app-thread-list"]],inputs:{threads:"threads",isLoading:"isLoading",selectedThreadId:"selectedThreadId",tabs:"tabs",selectedTab:"selectedTab"},outputs:{onThreadSelected:"onThreadSelected",onStatusTabSelected:"onStatusTabSelected"},decls:8,vars:4,consts:[["loadingTemplate",""],["noThreadsTemplate",""],[1,"thread-list-container"],[3,"onTabSelect","tabs","selectedTab"],[1,"thread-list-content"],[4,"ngIf","ngIfElse"],[1,"assigned-to-me-label"],[1,"thread-list"],["class","thread-item",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"thread-item",3,"click","ngClass"],[1,"thread-item-content"],[1,"persona"],[1,"avatar"],[1,"persona-name"],[1,"timestamp"],[1,"no-threads-label"]],template:function(C,T){if(1&C){const D=Ei();Dt(0,"div",2)(1,"app-thread-list-header",3),qn("onTabSelect",function(M){return Oo(D),ko(T.handleOnStatusTabSelected(M))}),St(),Dt(2,"div",4),Ar(3,sJ,2,2,"ng-container",5),St()(),Ar(4,aJ,1,0,"ng-template",null,0,Jf)(6,cJ,2,0,"ng-template",null,1,Jf)}if(2&C){const D=Wf(5);cn(),En("tabs",T.tabs)("selectedTab",T.selectedTab),cn(2),En("ngIf",!T.isLoading)("ngIfElse",D)}},dependencies:[Nc,vh,Os,rJ,CO],styles:[".thread-list-container[_ngcontent-%COMP%]{width:300px;border-right:1px solid #e1dfdd;display:flex;flex-direction:column;background-color:#faf9f8}.thread-list-content[_ngcontent-%COMP%]{flex:1;overflow-y:auto}.assigned-to-me-label[_ngcontent-%COMP%]{padding:16px;font-weight:600;color:#605e5c;border-bottom:1px solid #e1dfdd}.thread-list[_ngcontent-%COMP%]{padding:0}.thread-item[_ngcontent-%COMP%]{padding:12px 16px;cursor:pointer;border-bottom:1px solid #e1dfdd;transition:background-color .2s}.thread-item[_ngcontent-%COMP%]:hover{background-color:#f3f2f1}.thread-item.selected[_ngcontent-%COMP%]{background-color:#deecf9;border-left:3px solid #0078d4}.thread-item.unselected[_ngcontent-%COMP%]{background-color:transparent}.thread-item-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.persona[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.avatar[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:50%;background-color:#0078d4;color:#fff;display:flex;align-items:center;justify-content:center;font-weight:600;font-size:14px}.persona-name[_ngcontent-%COMP%]{font-weight:500;color:#323130;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:200px}.timestamp[_ngcontent-%COMP%]{font-size:12px;color:#605e5c;margin-left:44px}.no-threads-label[_ngcontent-%COMP%]{padding:16px;text-align:center;color:#605e5c;font-style:italic}"]}),_})(),uJ=(()=>{var y;class _{constructor(){this.errorMessage="An unexpected error occurred."}retry(){window.location.reload()}}return(y=_).\u0275fac=function(C){return new(C||y)},y.\u0275cmp=Lr({type:y,selectors:[["app-error-screen"]],inputs:{errorMessage:"errorMessage"},decls:10,vars:1,consts:[[1,"error-container"],[1,"error-content"],[1,"error-icon"],[1,"error-title"],[1,"error-message"],[1,"retry-button",3,"click"]],template:function(C,T){1&C&&(Dt(0,"div",0)(1,"div",1)(2,"div",2),Lt(3,"\u26a0\ufe0f"),St(),Dt(4,"h2",3),Lt(5,"Something went wrong"),St(),Dt(6,"p",4),Lt(7),St(),Dt(8,"button",5),qn("click",function(){return T.retry()}),Lt(9,"Try Again"),St()()()),2&C&&(cn(7),ti(T.errorMessage))},styles:[".error-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:100vh;background-color:#faf9f8}.error-content[_ngcontent-%COMP%]{text-align:center;max-width:400px;padding:32px}.error-icon[_ngcontent-%COMP%]{font-size:48px;margin-bottom:16px}.error-title[_ngcontent-%COMP%]{color:#323130;margin-bottom:16px;font-size:24px;font-weight:600}.error-message[_ngcontent-%COMP%]{color:#605e5c;margin-bottom:24px;line-height:1.5}.retry-button[_ngcontent-%COMP%]{background-color:#0078d4;color:#fff;border:none;padding:12px 24px;border-radius:4px;cursor:pointer;font-weight:500;transition:background-color .2s}.retry-button[_ngcontent-%COMP%]:hover{background-color:#106ebe}"]}),_})();function dJ(y,_){if(1&y){const S=Ei();Dt(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4),Lt(4,"\u2705"),St(),Dt(5,"div",5)(6,"div",6),Lt(7,"Chat Resolved"),St(),Dt(8,"div",7),Lt(9),St()(),Dt(10,"button",8),qn("click",function(){return Oo(S),ko(lr().hideToast())}),Lt(11,"\xd7"),St()(),Dt(12,"div",9)(13,"button",10),qn("click",function(){return Oo(S),ko(lr().handleViewThread())}),Lt(14," View Thread "),St()()()()}if(2&y){const S=lr();cn(9),ti(S.toastBodyMessage)}}let fJ=(()=>{var y;class _{constructor(){this.toasterId="",this.showToast=!1,this.toastBodyMessage="",this.onViewThread=new zn}ngOnInit(){this.showToast&&setTimeout(()=>{this.hideToast()},5e3)}hideToast(){this.showToast=!1}handleViewThread(){this.onViewThread.emit(this.toasterId),this.hideToast()}}return(y=_).\u0275fac=function(C){return new(C||y)},y.\u0275cmp=Lr({type:y,selectors:[["app-toast-notification"]],inputs:{toasterId:"toasterId",showToast:"showToast",toastBodyMessage:"toastBodyMessage"},outputs:{onViewThread:"onViewThread"},decls:1,vars:1,consts:[["class","toast-container",4,"ngIf"],[1,"toast-container"],[1,"toast"],[1,"toast-content"],[1,"toast-icon"],[1,"toast-message"],[1,"toast-title"],[1,"toast-body"],[1,"toast-close",3,"click"],[1,"toast-actions"],[1,"view-thread-button",3,"click"]],template:function(C,T){1&C&&Ar(0,dJ,15,1,"div",0),2&C&&En("ngIf",T.showToast)},dependencies:[Os],styles:[".toast-container[_ngcontent-%COMP%]{position:fixed;top:20px;right:20px;z-index:1000;animation:_ngcontent-%COMP%_slideIn .3s ease-out}.toast[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #e1dfdd;border-radius:8px;box-shadow:0 4px 12px #00000026;min-width:300px;max-width:400px}.toast-content[_ngcontent-%COMP%]{display:flex;align-items:flex-start;padding:16px;gap:12px}.toast-icon[_ngcontent-%COMP%]{font-size:20px;margin-top:2px}.toast-message[_ngcontent-%COMP%]{flex:1}.toast-title[_ngcontent-%COMP%]{font-weight:600;color:#323130;margin-bottom:4px}.toast-body[_ngcontent-%COMP%]{color:#605e5c;font-size:14px;line-height:1.4}.toast-close[_ngcontent-%COMP%]{background:none;border:none;font-size:20px;color:#605e5c;cursor:pointer;padding:0;width:24px;height:24px;display:flex;align-items:center;justify-content:center;border-radius:4px;transition:background-color .2s}.toast-close[_ngcontent-%COMP%]:hover{background-color:#f3f2f1}.toast-actions[_ngcontent-%COMP%]{padding:12px 16px 16px;border-top:1px solid #e1dfdd}.view-thread-button[_ngcontent-%COMP%]{background-color:#0078d4;color:#fff;border:none;padding:8px 16px;border-radius:4px;cursor:pointer;font-weight:500;transition:background-color .2s;width:100%}.view-thread-button[_ngcontent-%COMP%]:hover{background-color:#106ebe}@keyframes _ngcontent-%COMP%_slideIn{0%{transform:translate(100%);opacity:0}to{transform:translate(0);opacity:1}}"]}),_})();function hJ(y,_){if(1&y&&(Dt(0,"div",2),ei(1,"app-error-screen",3),St()),2&y){const S=lr();cn(),En("errorMessage",S.errorMessage)}}function pJ(y,_){if(1&y){const S=Ei();Dt(0,"app-toast-notification",9),qn("onViewThread",function(T){return Oo(S),ko(lr(2).handleOnViewThread(T))}),St()}if(2&y){const S=lr(2);En("toasterId",S.resolvedThreadId)("showToast",!!S.resolvedThreadId)("toastBodyMessage",S.resolvedThreadCustomerDisplayName||"")}}function gJ(y,_){if(1&y){const S=Ei();Dt(0,"app-chat-screen",10),qn("onResolveChat",function(T){return Oo(S),ko(lr(2).handleOnResolveChat(T))}),St()}if(2&y){const S=lr(2);En("token",S.token)("userId",S.userId)("displayName",S.displayName)("endpointUrl",S.endpointUrl)("threadId",S.selectedThreadId)("receiverName",S.getReceiverName())("threadStatus",S.getThreadStatus())}}function mJ(y,_){if(1&y){const S=Ei();Dt(0,"div",4),Ar(1,pJ,1,3,"app-toast-notification",5),Dt(2,"app-thread-list",6),qn("onThreadSelected",function(T){return Oo(S),ko(lr().setSelectedThreadId(T))})("onStatusTabSelected",function(T){return Oo(S),ko(lr().handleOnStatusTabSelected(T))}),St(),Dt(3,"div",7),Ar(4,gJ,1,7,"app-chat-screen",8),St()()}if(2&y){const S=lr();cn(),En("ngIf",S.resolvedThreadId),cn(),En("selectedThreadId",S.selectedThreadId)("threads",S.threads)("isLoading",!S.endpointUrl||S.isLoading)("tabs",S.tabs)("selectedTab",S.selectedTab),cn(2),En("ngIf",S.selectedThreadId&&S.token&&S.endpointUrl&&S.userId&&S.displayName)}}let yJ=(()=>{var y;class _{constructor(C,T,D){this.teamsFxService=C,this.threadsService=T,this.agentService=D,this.destroy$=new hr,this.token="",this.userId="",this.displayName="",this.endpointUrl="",this.tabs=["Active","Resolved"],this.selectedTab="Active",this.threads=[],this.isLoading=!1}ngOnInit(){this.initializeScreen(),this.subscribeToThreads()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}initializeScreen(){var C=this;return(0,pe.A)(function*(){try{const T=yield C.teamsFxService.getUserInfo();if(!T)return void(C.errorMessage="Failed to get Teams user info");const D=yield C.agentService.getAgentACSUser(T.objectId);if(!D)return void(C.errorMessage="Failed to link to ACS user");C.endpointUrl=yield C.agentService.getEndpointUrl();const I=yield C.agentService.getToken(D.acsUserId);C.token=I.token,C.userId=D.acsUserId,C.displayName=D.displayName,yield C.threadsService.initializeChatClient(C.userId,C.token,C.endpointUrl)}catch(T){console.error("Failed to set screen state due to error: ",T),C.errorMessage="Failed to initialize screen"}})()}subscribeToThreads(){this.threadsService.threads$.pipe(xu(this.destroy$)).subscribe(C=>{this.threads=C}),this.threadsService.selectedThreadId$.pipe(xu(this.destroy$)).subscribe(C=>{this.selectedThreadId=C}),this.threadsService.isLoading$.pipe(xu(this.destroy$)).subscribe(C=>{this.isLoading=C})}setSelectedThreadId(C){this.threadsService.setSelectedThreadId(C)}handleOnResolveChat(C){const T=this.threadsService.getNextActiveThreadId(C);T&&this.setSelectedThreadId(T)}handleOnViewThread(C){this.setSelectedThreadId(C),this.selectedTab=this.tabs[1],this.resolvedThreadId===C&&(this.resolvedThreadId=void 0)}handleOnStatusTabSelected(C){this.selectedTab=C;const T=this.threads.find(D=>D.status===C.toLowerCase());T&&this.setSelectedThreadId(T.id)}getReceiverName(){if(!this.selectedThreadId)return"";const C=this.threads.find(T=>T.id===this.selectedThreadId);return(null==C?void 0:C.topic)||""}getThreadStatus(){if(!this.selectedThreadId)return"active";const C=this.threads.find(T=>T.id===this.selectedThreadId);return(null==C?void 0:C.status)||"active"}get resolvedThreadCustomerDisplayName(){if(!this.resolvedThreadId)return;const C=this.threads.find(T=>T.id===this.resolvedThreadId);return null==C?void 0:C.topic}}return(y=_).\u0275fac=function(C){return new(C||y)(dt(b0),dt(BK),dt($K))},y.\u0275cmp=Lr({type:y,selectors:[["app-agent-screen"]],decls:3,vars:2,consts:[["class","error-container",4,"ngIf"],["class","agent-screen-container",4,"ngIf"],[1,"error-container"],[3,"errorMessage"],[1,"agent-screen-container"],[3,"toasterId","showToast","toastBodyMessage","onViewThread",4,"ngIf"],[3,"onThreadSelected","onStatusTabSelected","selectedThreadId","threads","isLoading","tabs","selectedTab"],[1,"chat-container"],[3,"token","userId","displayName","endpointUrl","threadId","receiverName","threadStatus","onResolveChat",4,"ngIf"],[3,"onViewThread","toasterId","showToast","toastBodyMessage"],[3,"onResolveChat","token","userId","displayName","endpointUrl","threadId","receiverName","threadStatus"]],template:function(C,T){1&C&&(Dt(0,"div"),Ar(1,hJ,2,1,"div",0)(2,mJ,5,7,"div",1),St()),2&C&&(cn(),En("ngIf",T.errorMessage),cn(),En("ngIf",!T.errorMessage))},dependencies:[Os,ZK,lJ,uJ,fJ],styles:[".agent-screen-container[_ngcontent-%COMP%]{display:flex;height:100vh}.chat-container[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column}.error-container[_ngcontent-%COMP%]{height:100vh;display:flex;align-items:center;justify-content:center}"]}),_})(),vJ=(()=>{var y;class _{constructor(C,T){this.teamsFxService=C,this.router=T,this.themeClass="light"}ngOnInit(){this.teamsFxService.teamsContext$.subscribe(C=>{this.themeClass="default"===C.themeString?"light":"dark"===C.themeString?"contrast":"dark"})}}return(y=_).\u0275fac=function(C){return new(C||y)(dt(b0),dt(Mo))},y.\u0275cmp=Lr({type:y,selectors:[["app-tab"]],decls:3,vars:1,consts:[[3,"ngClass"]],template:function(C,T){1&C&&(Dt(0,"div",0),ei(1,"router-outlet")(2,"app-agent-screen"),St()),2&C&&En("ngClass",T.themeClass)},dependencies:[Nc,Kh,yJ],styles:["[_nghost-%COMP%]{display:block;height:100%}.nav-header[_ngcontent-%COMP%]{background-color:#f8f9fa;padding:15px 20px;border-bottom:1px solid #dee2e6}.nav-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 10px;color:#333}nav[_ngcontent-%COMP%]{display:flex;gap:20px}nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#0078d4;padding:8px 16px;border-radius:4px;transition:background-color .2s}nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#e3f2fd}nav[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{background-color:#0078d4;color:#fff}"]}),_})(),_J=(()=>{var y;class _{getCurrentDate(){return(new Date).toLocaleDateString()}}return(y=_).\u0275fac=function(C){return new(C||y)},y.\u0275cmp=Lr({type:y,selectors:[["app-privacy"]],decls:20,vars:1,consts:[[1,"privacy-container"],[1,"privacy-content"]],template:function(C,T){1&C&&(Dt(0,"div",0)(1,"div",1)(2,"h1"),Lt(3,"Privacy Policy"),St(),Dt(4,"p"),Lt(5,"This is the privacy policy for the Business App. Please review our privacy practices."),St(),Dt(6,"p"),Lt(7),St(),Dt(8,"h2"),Lt(9,"Information We Collect"),St(),Dt(10,"p"),Lt(11,"We collect information you provide directly to us, such as when you create an account or contact us for support."),St(),Dt(12,"h2"),Lt(13,"How We Use Your Information"),St(),Dt(14,"p"),Lt(15,"We use the information we collect to provide, maintain, and improve our services."),St(),Dt(16,"h2"),Lt(17,"Contact Us"),St(),Dt(18,"p"),Lt(19,"If you have any questions about this Privacy Policy, please contact us."),St()()()),2&C&&(cn(7),So("Last updated: ",T.getCurrentDate(),""))},styles:[".privacy-container[_ngcontent-%COMP%]{padding:40px;max-width:800px;margin:0 auto;background-color:#fff;min-height:100vh}.privacy-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#323130;margin-bottom:24px;font-size:32px}.privacy-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#323130;margin-top:32px;margin-bottom:16px;font-size:24px}.privacy-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#605e5c;line-height:1.6;margin-bottom:16px}"]}),_})(),CJ=(()=>{var y;class _{getCurrentDate(){return(new Date).toLocaleDateString()}}return(y=_).\u0275fac=function(C){return new(C||y)},y.\u0275cmp=Lr({type:y,selectors:[["app-terms-of-use"]],decls:24,vars:1,consts:[[1,"terms-container"],[1,"terms-content"]],template:function(C,T){1&C&&(Dt(0,"div",0)(1,"div",1)(2,"h1"),Lt(3,"Terms of Use"),St(),Dt(4,"p"),Lt(5,"Please read these terms of use carefully before using the Business App."),St(),Dt(6,"p"),Lt(7),St(),Dt(8,"h2"),Lt(9,"Acceptance of Terms"),St(),Dt(10,"p"),Lt(11,"By accessing and using this application, you accept and agree to be bound by the terms and provision of this agreement."),St(),Dt(12,"h2"),Lt(13,"Use License"),St(),Dt(14,"p"),Lt(15,"Permission is granted to temporarily download one copy of the application for personal, non-commercial transitory viewing only."),St(),Dt(16,"h2"),Lt(17,"Disclaimer"),St(),Dt(18,"p"),Lt(19,"The materials on the application are provided on an 'as is' basis. We make no warranties, expressed or implied, and hereby disclaim and negate all other warranties including without limitation, implied warranties or conditions of merchantability, fitness for a particular purpose, or non-infringement of intellectual property or other violation of rights."),St(),Dt(20,"h2"),Lt(21,"Contact Information"),St(),Dt(22,"p"),Lt(23,"If you have any questions about these Terms of Use, please contact us."),St()()()),2&C&&(cn(7),So("Last updated: ",T.getCurrentDate(),""))},styles:[".terms-container[_ngcontent-%COMP%]{padding:40px;max-width:800px;margin:0 auto;background-color:#fff;min-height:100vh}.terms-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{color:#323130;margin-bottom:24px;font-size:32px}.terms-content[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#323130;margin-top:32px;margin-bottom:16px;font-size:24px}.terms-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#605e5c;line-height:1.6;margin-bottom:16px}"]}),_})();var wO;function bJ(y,_){if(1&y&&(Dt(0,"div",5)(1,"p"),Lt(2),St()()),2&y){const S=lr();cn(2),ti(S.statusMessage)}}!function(y){y.Public="public",y.EUDB="eudb",y.Other="other"}(wO||(wO={}));const SJ=[{path:"privacy",component:_J},{path:"termsofuse",component:CJ},{path:"tab",component:vJ},{path:"teams-example",component:(()=>{var y;class _{constructor(){this.teamsContext=null,this.userInfo=null,this.isLoading=!1,this.statusMessage=""}ngOnInit(){this.initializeTeams()}initializeTeams(){var C=this;return(0,pe.A)(function*(){try{C.isLoading=!0,C.statusMessage="Initializing Teams SDK...",yield w0(),C.statusMessage="Teams SDK initialized successfully!",yield C.getContext(),yield C.getUserInfo()}catch(T){console.error("Failed to initialize Teams:",T),C.statusMessage="Failed to initialize Teams: ".concat(T)}finally{C.isLoading=!1}})()}getContext(){var C=this;return(0,pe.A)(function*(){try{C.isLoading=!0,C.statusMessage="Getting Teams context...",C.teamsContext=yield cd(),C.statusMessage="Teams context retrieved successfully!",console.log("Teams context:",C.teamsContext)}catch(T){console.error("Failed to get Teams context:",T),C.statusMessage="Failed to get Teams context: ".concat(T)}finally{C.isLoading=!1}})()}getUserInfo(){var C=this;return(0,pe.A)(function*(){try{C.isLoading=!0,C.statusMessage="Getting user info...";const T=yield cd();if(!T.user)return console.error("User context is undefined"),void(C.statusMessage="User context not available");C.userInfo={objectId:T.user.id,displayName:T.user.displayName,userPrincipalName:T.user.userPrincipalName},C.statusMessage="User info retrieved successfully!"}catch(T){console.error("Failed to get user info:",T),C.statusMessage="Failed to get user info: ".concat(T)}finally{C.isLoading=!1}})()}getAuthToken(){var C=this;return(0,pe.A)(function*(){try{C.isLoading=!0,C.statusMessage="Getting auth token...";const T=yield function wJ(y){return yN(),(_=dr(y&&(y.successCallback||y.failureCallback)?"v1":"v2","authentication.getAuthToken"),S=y,new Promise(C=>{C(Ws(_,"authentication.getAuthToken",[null==S?void 0:S.resources,null==S?void 0:S.claims,null==S?void 0:S.silent,null==S?void 0:S.tenantId]))}).then(([C,T])=>{if(C)return T;throw new Error(T)})).then(_=>y&&y.successCallback?(y.successCallback(_),""):_).catch(_=>{if(y&&y.failureCallback)return y.failureCallback(_.message),"";throw _});var _,S}();C.statusMessage="Auth token retrieved! (Length: ".concat(T.length,")"),console.log("Auth token:",T)}catch(T){console.error("Failed to get auth token:",T),C.statusMessage="Failed to get auth token: ".concat(T)}finally{C.isLoading=!1}})()}testTeamsFeatures(){var C=this;return(0,pe.A)(function*(){try{C.isLoading=!0,C.statusMessage="Testing Teams features...";const T=yield cd(),D={contextKeys:Object.keys(T),appKeys:T.app?Object.keys(T.app):[],user:T.user?{id:T.user.id,displayName:T.user.displayName}:null};C.statusMessage="Teams features test completed! Available context keys: ".concat(D.contextKeys.join(", ")),console.log("Teams features test:",D)}catch(T){console.error("Failed to test Teams features:",T),C.statusMessage="Failed to test Teams features: ".concat(T)}finally{C.isLoading=!1}})()}}return(y=_).\u0275fac=function(C){return new(C||y)},y.\u0275cmp=Lr({type:y,selectors:[["app-teams-example"]],decls:38,vars:9,consts:[[1,"teams-example-container"],[1,"teams-info"],[1,"teams-actions"],[3,"click","disabled"],["class","status",4,"ngIf"],[1,"status"]],template:function(C,T){1&C&&(Dt(0,"div",0)(1,"h2"),Lt(2,"Teams SDK Example"),St(),Dt(3,"div",1)(4,"h3"),Lt(5,"Teams Context"),St(),Dt(6,"p")(7,"strong"),Lt(8,"Context Available:"),St(),Lt(9),St(),Dt(10,"p")(11,"strong"),Lt(12,"User Available:"),St(),Lt(13),St(),Dt(14,"h3"),Lt(15,"User Info"),St(),Dt(16,"p")(17,"strong"),Lt(18,"User ID:"),St(),Lt(19),St(),Dt(20,"p")(21,"strong"),Lt(22,"Display Name:"),St(),Lt(23),St(),Dt(24,"p")(25,"strong"),Lt(26,"User Principal Name:"),St(),Lt(27),St()(),Dt(28,"div",2)(29,"h3"),Lt(30,"Teams Actions"),St(),Dt(31,"button",3),qn("click",function(){return T.getContext()}),Lt(32,"Get Context"),St(),Dt(33,"button",3),qn("click",function(){return T.getAuthToken()}),Lt(34,"Get Auth Token"),St(),Dt(35,"button",3),qn("click",function(){return T.testTeamsFeatures()}),Lt(36,"Test Teams Features"),St()(),Ar(37,bJ,3,1,"div",4),St()),2&C&&(cn(9),So(" ",T.teamsContext?"Yes":"No",""),cn(4),So(" ",T.userInfo?"Yes":"No",""),cn(6),So(" ",(null==T.userInfo?null:T.userInfo.objectId)||"Loading...",""),cn(4),So(" ",(null==T.userInfo?null:T.userInfo.displayName)||"Loading...",""),cn(4),So(" ",(null==T.userInfo?null:T.userInfo.userPrincipalName)||"Loading...",""),cn(4),En("disabled",T.isLoading),cn(2),En("disabled",T.isLoading),cn(2),En("disabled",T.isLoading),cn(2),En("ngIf",T.statusMessage))},dependencies:[Os],styles:[".teams-example-container[_ngcontent-%COMP%]{padding:20px;max-width:800px;margin:0 auto}.teams-info[_ngcontent-%COMP%], .teams-actions[_ngcontent-%COMP%]{margin:20px 0;padding:20px;border:1px solid #ddd;border-radius:8px}.teams-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:5px;padding:10px 15px;background-color:#0078d4;color:#fff;border:none;border-radius:4px;cursor:pointer}.teams-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}.teams-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#106ebe}.status[_ngcontent-%COMP%]{margin-top:20px;padding:15px;background-color:#f0f0f0;border-radius:4px}"]}),_})()},{path:"",redirectTo:"/tab",pathMatch:"full"}];let TJ=(()=>{var y;class _{}return(y=_).\u0275fac=function(C){return new(C||y)},y.\u0275mod=qo({type:y,bootstrap:[Z9]}),y.\u0275inj=Po({imports:[rM,m8,N5.forRoot(SJ,{useHash:!0}),hW,mG,yG]}),_})();p4().bootstrapModule(TJ).catch(y=>console.error(y))},356:Xt=>{var je,ft="object"==typeof Reflect?Reflect:null,Se=ft&&"function"==typeof ft.apply?ft.apply:function(Xe,xe,it){return Function.prototype.apply.call(Xe,xe,it)};je=ft&&"function"==typeof ft.ownKeys?ft.ownKeys:Object.getOwnPropertySymbols?function(Xe){return Object.getOwnPropertyNames(Xe).concat(Object.getOwnPropertySymbols(Xe))}:function(Xe){return Object.getOwnPropertyNames(Xe)};var st=Number.isNaN||function(Xe){return Xe!=Xe};function Je(){Je.init.call(this)}Xt.exports=Je,Xt.exports.once=function bt(Ve,Xe){return new Promise(function(xe,it){function gt(ot){Ve.removeListener(Xe,At),it(ot)}function At(){"function"==typeof Ve.removeListener&&Ve.removeListener("error",gt),xe([].slice.call(arguments))}pt(Ve,Xe,At,{once:!0}),"error"!==Xe&&function Mt(Ve,Xe,xe){"function"==typeof Ve.on&&pt(Ve,"error",Xe,xe)}(Ve,gt,{once:!0})})},Je.EventEmitter=Je,Je.prototype._events=void 0,Je.prototype._eventsCount=0,Je.prototype._maxListeners=void 0;var ct=10;function Ue(Ve){if("function"!=typeof Ve)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof Ve)}function se(Ve){return void 0===Ve._maxListeners?Je.defaultMaxListeners:Ve._maxListeners}function pe(Ve,Xe,xe,it){var gt,At,ot;if(Ue(xe),void 0===(At=Ve._events)?(At=Ve._events=Object.create(null),Ve._eventsCount=0):(void 0!==At.newListener&&(Ve.emit("newListener",Xe,xe.listener?xe.listener:xe),At=Ve._events),ot=At[Xe]),void 0===ot)ot=At[Xe]=xe,++Ve._eventsCount;else if("function"==typeof ot?ot=At[Xe]=it?[xe,ot]:[ot,xe]:it?ot.unshift(xe):ot.push(xe),(gt=se(Ve))>0&&ot.length>gt&&!ot.warned){ot.warned=!0;var kt=new Error("Possible EventEmitter memory leak detected. "+ot.length+" "+String(Xe)+" listeners added. Use emitter.setMaxListeners() to increase limit");kt.name="MaxListenersExceededWarning",kt.emitter=Ve,kt.type=Xe,kt.count=ot.length,function nt(Ve){console&&console.warn&&console.warn(Ve)}(kt)}return Ve}function yt(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Ke(Ve,Xe,xe){var it={fired:!1,wrapFn:void 0,target:Ve,type:Xe,listener:xe},gt=yt.bind(it);return gt.listener=xe,it.wrapFn=gt,gt}function Qe(Ve,Xe,xe){var it=Ve._events;if(void 0===it)return[];var gt=it[Xe];return void 0===gt?[]:"function"==typeof gt?xe?[gt.listener||gt]:[gt]:xe?function Nt(Ve){for(var Xe=new Array(Ve.length),xe=0;xe<Xe.length;++xe)Xe[xe]=Ve[xe].listener||Ve[xe];return Xe}(gt):_t(gt,gt.length)}function Be(Ve){var Xe=this._events;if(void 0!==Xe){var xe=Xe[Ve];if("function"==typeof xe)return 1;if(void 0!==xe)return xe.length}return 0}function _t(Ve,Xe){for(var xe=new Array(Xe),it=0;it<Xe;++it)xe[it]=Ve[it];return xe}function pt(Ve,Xe,xe,it){if("function"==typeof Ve.on)it.once?Ve.once(Xe,xe):Ve.on(Xe,xe);else{if("function"!=typeof Ve.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof Ve);Ve.addEventListener(Xe,function gt(At){it.once&&Ve.removeEventListener(Xe,gt),xe(At)})}}Object.defineProperty(Je,"defaultMaxListeners",{enumerable:!0,get:function(){return ct},set:function(Ve){if("number"!=typeof Ve||Ve<0||st(Ve))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+Ve+".");ct=Ve}}),Je.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Je.prototype.setMaxListeners=function(Xe){if("number"!=typeof Xe||Xe<0||st(Xe))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+Xe+".");return this._maxListeners=Xe,this},Je.prototype.getMaxListeners=function(){return se(this)},Je.prototype.emit=function(Xe){for(var xe=[],it=1;it<arguments.length;it++)xe.push(arguments[it]);var gt="error"===Xe,At=this._events;if(void 0!==At)gt=gt&&void 0===At.error;else if(!gt)return!1;if(gt){var ot;if(xe.length>0&&(ot=xe[0]),ot instanceof Error)throw ot;var kt=new Error("Unhandled error."+(ot?" ("+ot.message+")":""));throw kt.context=ot,kt}var fn=At[Xe];if(void 0===fn)return!1;if("function"==typeof fn)Se(fn,this,xe);else{var Yt=fn.length,Vt=_t(fn,Yt);for(it=0;it<Yt;++it)Se(Vt[it],this,xe)}return!0},Je.prototype.on=Je.prototype.addListener=function(Xe,xe){return pe(this,Xe,xe,!1)},Je.prototype.prependListener=function(Xe,xe){return pe(this,Xe,xe,!0)},Je.prototype.once=function(Xe,xe){return Ue(xe),this.on(Xe,Ke(this,Xe,xe)),this},Je.prototype.prependOnceListener=function(Xe,xe){return Ue(xe),this.prependListener(Xe,Ke(this,Xe,xe)),this},Je.prototype.off=Je.prototype.removeListener=function(Xe,xe){var it,gt,At,ot,kt;if(Ue(xe),void 0===(gt=this._events))return this;if(void 0===(it=gt[Xe]))return this;if(it===xe||it.listener===xe)0==--this._eventsCount?this._events=Object.create(null):(delete gt[Xe],gt.removeListener&&this.emit("removeListener",Xe,it.listener||xe));else if("function"!=typeof it){for(At=-1,ot=it.length-1;ot>=0;ot--)if(it[ot]===xe||it[ot].listener===xe){kt=it[ot].listener,At=ot;break}if(At<0)return this;0===At?it.shift():function tt(Ve,Xe){for(;Xe+1<Ve.length;Xe++)Ve[Xe]=Ve[Xe+1];Ve.pop()}(it,At),1===it.length&&(gt[Xe]=it[0]),void 0!==gt.removeListener&&this.emit("removeListener",Xe,kt||xe)}return this},Je.prototype.removeAllListeners=function(Xe){var xe,it,gt;if(void 0===(it=this._events))return this;if(void 0===it.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==it[Xe]&&(0==--this._eventsCount?this._events=Object.create(null):delete it[Xe]),this;if(0===arguments.length){var ot,At=Object.keys(it);for(gt=0;gt<At.length;++gt)"removeListener"!==(ot=At[gt])&&this.removeAllListeners(ot);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(xe=it[Xe]))this.removeListener(Xe,xe);else if(void 0!==xe)for(gt=xe.length-1;gt>=0;gt--)this.removeListener(Xe,xe[gt]);return this},Je.prototype.listeners=function(Xe){return Qe(this,Xe,!0)},Je.prototype.rawListeners=function(Xe){return Qe(this,Xe,!1)},Je.listenerCount=function(Ve,Xe){return"function"==typeof Ve.listenerCount?Ve.listenerCount(Xe):Be.call(Ve,Xe)},Je.prototype.listenerCount=Be,Je.prototype.eventNames=function(){return this._eventsCount>0?je(this._events):[]}},204:(Xt,ft,Se)=>{Se.r(ft),Se.d(ft,{NIL:()=>J,parse:()=>pt,stringify:()=>Ke,v1:()=>bt,v3:()=>ye,v4:()=>Y,v5:()=>z,validate:()=>Ue,version:()=>_e});var je,nt=new Uint8Array(16);function st(){if(!je&&!(je=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return je(nt)}const Je=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,Ue=function ct(B){return"string"==typeof B&&Je.test(B)};for(var se=[],pe=0;pe<256;++pe)se.push((pe+256).toString(16).substr(1));const Ke=function yt(B){var W=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,G=(se[B[W+0]]+se[B[W+1]]+se[B[W+2]]+se[B[W+3]]+"-"+se[B[W+4]]+se[B[W+5]]+"-"+se[B[W+6]]+se[B[W+7]]+"-"+se[B[W+8]]+se[B[W+9]]+"-"+se[B[W+10]]+se[B[W+11]]+se[B[W+12]]+se[B[W+13]]+se[B[W+14]]+se[B[W+15]]).toLowerCase();if(!Ue(G))throw TypeError("Stringified UUID is invalid");return G};var Qe,Be,_t=0,tt=0;const bt=function Nt(B,W,G){var ne=W&&G||0,Z=W||new Array(16),ee=(B=B||{}).node||Qe,re=void 0!==B.clockseq?B.clockseq:Be;if(null==ee||null==re){var We=B.random||(B.rng||st)();null==ee&&(ee=Qe=[1|We[0],We[1],We[2],We[3],We[4],We[5]]),null==re&&(re=Be=16383&(We[6]<<8|We[7]))}var Ge=void 0!==B.msecs?B.msecs:Date.now(),qe=void 0!==B.nsecs?B.nsecs:tt+1,Ze=Ge-_t+(qe-tt)/1e4;if(Ze<0&&void 0===B.clockseq&&(re=re+1&16383),(Ze<0||Ge>_t)&&void 0===B.nsecs&&(qe=0),qe>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");_t=Ge,tt=qe,Be=re;var Wt=(1e4*(268435455&(Ge+=122192928e5))+qe)%4294967296;Z[ne++]=Wt>>>24&255,Z[ne++]=Wt>>>16&255,Z[ne++]=Wt>>>8&255,Z[ne++]=255&Wt;var Gt=Ge/4294967296*1e4&268435455;Z[ne++]=Gt>>>8&255,Z[ne++]=255&Gt,Z[ne++]=Gt>>>24&15|16,Z[ne++]=Gt>>>16&255,Z[ne++]=re>>>8|128,Z[ne++]=255&re;for(var X=0;X<6;++X)Z[ne+X]=ee[X];return W||Ke(Z)},pt=function Mt(B){if(!Ue(B))throw TypeError("Invalid UUID");var W,G=new Uint8Array(16);return G[0]=(W=parseInt(B.slice(0,8),16))>>>24,G[1]=W>>>16&255,G[2]=W>>>8&255,G[3]=255&W,G[4]=(W=parseInt(B.slice(9,13),16))>>>8,G[5]=255&W,G[6]=(W=parseInt(B.slice(14,18),16))>>>8,G[7]=255&W,G[8]=(W=parseInt(B.slice(19,23),16))>>>8,G[9]=255&W,G[10]=(W=parseInt(B.slice(24,36),16))/1099511627776&255,G[11]=W/4294967296&255,G[12]=W>>>24&255,G[13]=W>>>16&255,G[14]=W>>>8&255,G[15]=255&W,G};function it(B,W,G){function ne(Z,ee,re,We){if("string"==typeof Z&&(Z=function Ve(B){B=unescape(encodeURIComponent(B));for(var W=[],G=0;G<B.length;++G)W.push(B.charCodeAt(G));return W}(Z)),"string"==typeof ee&&(ee=pt(ee)),16!==ee.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var Ge=new Uint8Array(16+Z.length);if(Ge.set(ee),Ge.set(Z,ee.length),(Ge=G(Ge))[6]=15&Ge[6]|W,Ge[8]=63&Ge[8]|128,re){We=We||0;for(var qe=0;qe<16;++qe)re[We+qe]=Ge[qe];return re}return Ke(Ge)}try{ne.name=B}catch(Z){}return ne.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",ne.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",ne}function ot(B){return 14+(B+64>>>9<<4)+1}function Yt(B,W){var G=(65535&B)+(65535&W);return(B>>16)+(W>>16)+(G>>16)<<16|65535&G}function Tt(B,W,G,ne,Z,ee){return Yt(function Vt(B,W){return B<<W|B>>>32-W}(Yt(Yt(W,B),Yt(ne,ee)),Z),G)}function lt(B,W,G,ne,Z,ee,re){return Tt(W&G|~W&ne,B,W,Z,ee,re)}function ke(B,W,G,ne,Z,ee,re){return Tt(W&ne|G&~ne,B,W,Z,ee,re)}function de(B,W,G,ne,Z,ee,re){return Tt(W^G^ne,B,W,Z,ee,re)}function De(B,W,G,ne,Z,ee,re){return Tt(G^(W|~ne),B,W,Z,ee,re)}const ye=it("v3",48,function gt(B){if("string"==typeof B){var W=unescape(encodeURIComponent(B));B=new Uint8Array(W.length);for(var G=0;G<W.length;++G)B[G]=W.charCodeAt(G)}return function At(B){for(var W=[],G=32*B.length,ne="0123456789abcdef",Z=0;Z<G;Z+=8){var ee=B[Z>>5]>>>Z%32&255,re=parseInt(ne.charAt(ee>>>4&15)+ne.charAt(15&ee),16);W.push(re)}return W}(function kt(B,W){B[W>>5]|=128<<W%32,B[ot(W)-1]=W;for(var G=1732584193,ne=-271733879,Z=-1732584194,ee=271733878,re=0;re<B.length;re+=16){var We=G,Ge=ne,qe=Z,Ze=ee;G=lt(G,ne,Z,ee,B[re],7,-680876936),ee=lt(ee,G,ne,Z,B[re+1],12,-389564586),Z=lt(Z,ee,G,ne,B[re+2],17,606105819),ne=lt(ne,Z,ee,G,B[re+3],22,-1044525330),G=lt(G,ne,Z,ee,B[re+4],7,-176418897),ee=lt(ee,G,ne,Z,B[re+5],12,1200080426),Z=lt(Z,ee,G,ne,B[re+6],17,-1473231341),ne=lt(ne,Z,ee,G,B[re+7],22,-45705983),G=lt(G,ne,Z,ee,B[re+8],7,1770035416),ee=lt(ee,G,ne,Z,B[re+9],12,-1958414417),Z=lt(Z,ee,G,ne,B[re+10],17,-42063),ne=lt(ne,Z,ee,G,B[re+11],22,-1990404162),G=lt(G,ne,Z,ee,B[re+12],7,1804603682),ee=lt(ee,G,ne,Z,B[re+13],12,-40341101),Z=lt(Z,ee,G,ne,B[re+14],17,-1502002290),G=ke(G,ne=lt(ne,Z,ee,G,B[re+15],22,1236535329),Z,ee,B[re+1],5,-165796510),ee=ke(ee,G,ne,Z,B[re+6],9,-1069501632),Z=ke(Z,ee,G,ne,B[re+11],14,643717713),ne=ke(ne,Z,ee,G,B[re],20,-373897302),G=ke(G,ne,Z,ee,B[re+5],5,-701558691),ee=ke(ee,G,ne,Z,B[re+10],9,38016083),Z=ke(Z,ee,G,ne,B[re+15],14,-660478335),ne=ke(ne,Z,ee,G,B[re+4],20,-405537848),G=ke(G,ne,Z,ee,B[re+9],5,568446438),ee=ke(ee,G,ne,Z,B[re+14],9,-1019803690),Z=ke(Z,ee,G,ne,B[re+3],14,-187363961),ne=ke(ne,Z,ee,G,B[re+8],20,1163531501),G=ke(G,ne,Z,ee,B[re+13],5,-1444681467),ee=ke(ee,G,ne,Z,B[re+2],9,-51403784),Z=ke(Z,ee,G,ne,B[re+7],14,1735328473),G=de(G,ne=ke(ne,Z,ee,G,B[re+12],20,-1926607734),Z,ee,B[re+5],4,-378558),ee=de(ee,G,ne,Z,B[re+8],11,-2022574463),Z=de(Z,ee,G,ne,B[re+11],16,1839030562),ne=de(ne,Z,ee,G,B[re+14],23,-35309556),G=de(G,ne,Z,ee,B[re+1],4,-1530992060),ee=de(ee,G,ne,Z,B[re+4],11,1272893353),Z=de(Z,ee,G,ne,B[re+7],16,-155497632),ne=de(ne,Z,ee,G,B[re+10],23,-1094730640),G=de(G,ne,Z,ee,B[re+13],4,681279174),ee=de(ee,G,ne,Z,B[re],11,-358537222),Z=de(Z,ee,G,ne,B[re+3],16,-722521979),ne=de(ne,Z,ee,G,B[re+6],23,76029189),G=de(G,ne,Z,ee,B[re+9],4,-640364487),ee=de(ee,G,ne,Z,B[re+12],11,-421815835),Z=de(Z,ee,G,ne,B[re+15],16,530742520),G=De(G,ne=de(ne,Z,ee,G,B[re+2],23,-995338651),Z,ee,B[re],6,-198630844),ee=De(ee,G,ne,Z,B[re+7],10,1126891415),Z=De(Z,ee,G,ne,B[re+14],15,-1416354905),ne=De(ne,Z,ee,G,B[re+5],21,-57434055),G=De(G,ne,Z,ee,B[re+12],6,1700485571),ee=De(ee,G,ne,Z,B[re+3],10,-1894986606),Z=De(Z,ee,G,ne,B[re+10],15,-1051523),ne=De(ne,Z,ee,G,B[re+1],21,-2054922799),G=De(G,ne,Z,ee,B[re+8],6,1873313359),ee=De(ee,G,ne,Z,B[re+15],10,-30611744),Z=De(Z,ee,G,ne,B[re+6],15,-1560198380),ne=De(ne,Z,ee,G,B[re+13],21,1309151649),G=De(G,ne,Z,ee,B[re+4],6,-145523070),ee=De(ee,G,ne,Z,B[re+11],10,-1120210379),Z=De(Z,ee,G,ne,B[re+2],15,718787259),ne=De(ne,Z,ee,G,B[re+9],21,-343485551),G=Yt(G,We),ne=Yt(ne,Ge),Z=Yt(Z,qe),ee=Yt(ee,Ze)}return[G,ne,Z,ee]}(function fn(B){if(0===B.length)return[];for(var W=8*B.length,G=new Uint32Array(ot(W)),ne=0;ne<W;ne+=8)G[ne>>5]|=(255&B[ne/8])<<ne%32;return G}(B),8*B.length))}),Y=function Oe(B,W,G){var ne=(B=B||{}).random||(B.rng||st)();if(ne[6]=15&ne[6]|64,ne[8]=63&ne[8]|128,W){G=G||0;for(var Z=0;Z<16;++Z)W[G+Z]=ne[Z];return W}return Ke(ne)};function K(B,W,G,ne){switch(B){case 0:return W&G^~W&ne;case 1:case 3:return W^G^ne;case 2:return W&G^W&ne^G&ne}}function q(B,W){return B<<W|B>>>32-W}const z=it("v5",80,function ie(B){var W=[1518500249,1859775393,2400959708,3395469782],G=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof B){var ne=unescape(encodeURIComponent(B));B=[];for(var Z=0;Z<ne.length;++Z)B.push(ne.charCodeAt(Z))}else Array.isArray(B)||(B=Array.prototype.slice.call(B));B.push(128);for(var re=Math.ceil((B.length/4+2)/16),We=new Array(re),Ge=0;Ge<re;++Ge){for(var qe=new Uint32Array(16),Ze=0;Ze<16;++Ze)qe[Ze]=B[64*Ge+4*Ze]<<24|B[64*Ge+4*Ze+1]<<16|B[64*Ge+4*Ze+2]<<8|B[64*Ge+4*Ze+3];We[Ge]=qe}We[re-1][14]=8*(B.length-1)/Math.pow(2,32),We[re-1][14]=Math.floor(We[re-1][14]),We[re-1][15]=8*(B.length-1)&4294967295;for(var Wt=0;Wt<re;++Wt){for(var Gt=new Uint32Array(80),X=0;X<16;++X)Gt[X]=We[Wt][X];for(var x=16;x<80;++x)Gt[x]=q(Gt[x-3]^Gt[x-8]^Gt[x-14]^Gt[x-16],1);for(var te=G[0],me=G[1],ue=G[2],be=G[3],Le=G[4],Pt=0;Pt<80;++Pt){var Et=Math.floor(Pt/20),Ct=q(te,5)+K(Et,me,ue,be)+Le+W[Et]+Gt[Pt]>>>0;Le=be,be=ue,ue=q(me,30)>>>0,me=te,te=Ct}G[0]=G[0]+te>>>0,G[1]=G[1]+me>>>0,G[2]=G[2]+ue>>>0,G[3]=G[3]+be>>>0,G[4]=G[4]+Le>>>0}return[G[0]>>24&255,G[0]>>16&255,G[0]>>8&255,255&G[0],G[1]>>24&255,G[1]>>16&255,G[1]>>8&255,255&G[1],G[2]>>24&255,G[2]>>16&255,G[2]>>8&255,255&G[2],G[3]>>24&255,G[3]>>16&255,G[3]>>8&255,255&G[3],G[4]>>24&255,G[4]>>16&255,G[4]>>8&255,255&G[4]]}),J="00000000-0000-0000-0000-000000000000",_e=function fe(B){if(!Ue(B))throw TypeError("Invalid UUID");return parseInt(B.substr(14,1),16)}},114:(Xt,ft,Se)=>{function nt(k){let U="";for(let H=0;H<k.length;H++)U+=String.fromCharCode(k[H]);return btoa(U)}function st(k){const U=atob(k),H=new Uint8Array(U.length);for(let j=0;j<U.length;j++)H[j]=U.charCodeAt(j);return H}function Je(k){return atob(k)}Se.r(ft),Se.d(ft,{MapperTypeNames:()=>ie,ServiceClient:()=>qi,XML_ATTRKEY:()=>ct,XML_CHARKEY:()=>Ue,authorizeRequestOnClaimChallenge:()=>Ys,authorizeRequestOnTenantChallenge:()=>ys,createClientPipeline:()=>Ct,createSerializer:()=>Nt,deserializationPolicy:()=>ee,deserializationPolicyName:()=>Z,serializationPolicy:()=>ue,serializationPolicyName:()=>me});const ct="$",Ue="_";function se(k,U){return"Composite"!==U&&"Dictionary"!==U&&("string"==typeof k||"number"==typeof k||"boolean"==typeof k||null!==(null==U?void 0:U.match(/^(Date|DateTime|DateTimeRfc1123|UnixTime|ByteArray|Base64Url)$/i))||null==k)}const pe=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,Ke=/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/i;function _t(k,U){var H,j;const ge=k.parsedHeaders;if("HEAD"===k.request.method)return Object.assign(Object.assign({},ge),{body:k.parsedBody});const Ie=U&&U.bodyMapper,ve=!(null==Ie||!Ie.nullable),Ne=null==Ie?void 0:Ie.type.name;if("Stream"===Ne)return Object.assign(Object.assign({},ge),{blobBody:k.blobBody,readableStreamBody:k.readableStreamBody});const He="Composite"===Ne&&Ie.type.modelProperties||{},Re=Object.keys(He).some(Fe=>""===He[Fe].serializedName);if("Sequence"===Ne||Re){const Fe=null!==(H=k.parsedBody)&&void 0!==H?H:[];for(const ut of Object.keys(He))He[ut].serializedName&&(Fe[ut]=null===(j=k.parsedBody)||void 0===j?void 0:j[ut]);if(ge)for(const ut of Object.keys(ge))Fe[ut]=ge[ut];return!ve||k.parsedBody||ge||0!==Object.getOwnPropertyNames(He).length?Fe:null}return function Be(k){const U=Object.assign(Object.assign({},k.headers),k.body);return k.hasNullableType&&0===Object.getOwnPropertyNames(U).length?k.shouldWrapBody?{body:null}:null:k.shouldWrapBody?Object.assign(Object.assign({},k.headers),{body:k.body}):U}({body:k.parsedBody,headers:ge,hasNullableType:ve,shouldWrapBody:se(k.parsedBody,Ne)})}class tt{constructor(U={},H=!1){this.modelMappers=U,this.isXML=H}validateConstraints(U,H,j){const ge=(Ie,ve)=>{throw new Error('"'.concat(j,'" with value "').concat(H,'" should satisfy the constraint "').concat(Ie,'": ').concat(ve,"."))};if(U.constraints&&null!=H){const{ExclusiveMaximum:Ie,ExclusiveMinimum:ve,InclusiveMaximum:Ne,InclusiveMinimum:He,MaxItems:Re,MaxLength:Fe,MinItems:ut,MinLength:mt,MultipleOf:jt,Pattern:Zt,UniqueItems:Tn}=U.constraints;if(void 0!==Ie&&H>=Ie&&ge("ExclusiveMaximum",Ie),void 0!==ve&&H<=ve&&ge("ExclusiveMinimum",ve),void 0!==Ne&&H>Ne&&ge("InclusiveMaximum",Ne),void 0!==He&&H<He&&ge("InclusiveMinimum",He),void 0!==Re&&H.length>Re&&ge("MaxItems",Re),void 0!==Fe&&H.length>Fe&&ge("MaxLength",Fe),void 0!==ut&&H.length<ut&&ge("MinItems",ut),void 0!==mt&&H.length<mt&&ge("MinLength",mt),void 0!==jt&&H%jt!=0&&ge("MultipleOf",jt),Zt){const mn="string"==typeof Zt?new RegExp(Zt):Zt;("string"!=typeof H||null===H.match(mn))&&ge("Pattern",Zt)}Tn&&H.some((mn,Me,Pe)=>Pe.indexOf(mn)!==Me)&&ge("UniqueItems",Tn)}}serialize(U,H,j,ge={xml:{}}){var Ie,ve,Ne;const He={xml:{rootName:null!==(Ie=ge.xml.rootName)&&void 0!==Ie?Ie:"",includeRoot:null!==(ve=ge.xml.includeRoot)&&void 0!==ve&&ve,xmlCharKey:null!==(Ne=ge.xml.xmlCharKey)&&void 0!==Ne?Ne:Ue}};let Re={};const Fe=U.type.name;j||(j=U.serializedName),null!==Fe.match(/^Sequence$/i)&&(Re=[]),U.isConstant&&(H=U.defaultValue);const{required:ut,nullable:mt}=U;if(ut&&mt&&void 0===H)throw new Error("".concat(j," cannot be undefined."));if(ut&&!mt&&null==H)throw new Error("".concat(j," cannot be null or undefined."));if(!ut&&!1===mt&&null===H)throw new Error("".concat(j," cannot be null."));return null==H||null!==Fe.match(/^any$/i)?Re=H:null!==Fe.match(/^(Number|String|Boolean|Object|Stream|Uuid)$/i)?Re=function it(k,U,H){if(null!=H)if(null!==k.match(/^Number$/i)){if("number"!=typeof H)throw new Error("".concat(U," with value ").concat(H," must be of type number."))}else if(null!==k.match(/^String$/i)){if("string"!=typeof H.valueOf())throw new Error("".concat(U,' with value "').concat(H,'" must be of type string.'))}else if(null!==k.match(/^Uuid$/i)){if("string"!=typeof H.valueOf()||!function Qe(k){return Ke.test(k)}(H))throw new Error("".concat(U,' with value "').concat(H,'" must be of type string and a valid uuid.'))}else if(null!==k.match(/^Boolean$/i)){if("boolean"!=typeof H)throw new Error("".concat(U," with value ").concat(H," must be of type boolean."))}else if(null!==k.match(/^Stream$/i)){const j=typeof H;if(!("string"===j||"function"==typeof H.pipe||"function"==typeof H.tee||H instanceof ArrayBuffer||ArrayBuffer.isView(H)||("function"==typeof Blob||"object"==typeof Blob)&&H instanceof Blob||"function"===j))throw new Error("".concat(U," must be a string, Blob, ArrayBuffer, ArrayBufferView, ReadableStream, or () => ReadableStream."))}return H}(Fe,j,H):null!==Fe.match(/^Enum$/i)?Re=function gt(k,U,H){if(!U)throw new Error("Please provide a set of allowedValues to validate ".concat(k," as an Enum Type."));if(!U.some(ge=>"string"==typeof ge.valueOf()?ge.toLowerCase()===H.toLowerCase():ge===H))throw new Error("".concat(H," is not a valid value for ").concat(k,". The valid values are: ").concat(JSON.stringify(U),"."));return H}(j,U.type.allowedValues,H):null!==Fe.match(/^(Date|DateTime|TimeSpan|DateTimeRfc1123|UnixTime)$/i)?Re=function kt(k,U,H){if(null!=U)if(null!==k.match(/^Date$/i)){if(!(U instanceof Date||"string"==typeof U.valueOf()&&!isNaN(Date.parse(U))))throw new Error("".concat(H," must be an instanceof Date or a string in ISO8601 format."));U=U instanceof Date?U.toISOString().substring(0,10):new Date(U).toISOString().substring(0,10)}else if(null!==k.match(/^DateTime$/i)){if(!(U instanceof Date||"string"==typeof U.valueOf()&&!isNaN(Date.parse(U))))throw new Error("".concat(H," must be an instanceof Date or a string in ISO8601 format."));U=U instanceof Date?U.toISOString():new Date(U).toISOString()}else if(null!==k.match(/^DateTimeRfc1123$/i)){if(!(U instanceof Date||"string"==typeof U.valueOf()&&!isNaN(Date.parse(U))))throw new Error("".concat(H," must be an instanceof Date or a string in RFC-1123 format."));U=U instanceof Date?U.toUTCString():new Date(U).toUTCString()}else if(null!==k.match(/^UnixTime$/i)){if(!(U instanceof Date||"string"==typeof U.valueOf()&&!isNaN(Date.parse(U))))throw new Error("".concat(H," must be an instanceof Date or a string in RFC-1123/ISO8601 format ")+"for it to be serialized in UnixTime/Epoch format.");U=function Xe(k){if(k)return"string"==typeof k.valueOf()&&(k=new Date(k)),Math.floor(k.getTime()/1e3)}(U)}else if(null!==k.match(/^TimeSpan$/i)&&!function yt(k){return pe.test(k)}(U))throw new Error("".concat(H,' must be a string in ISO 8601 format. Instead was "').concat(U,'".'));return U}(Fe,H,j):null!==Fe.match(/^ByteArray$/i)?Re=function At(k,U){if(null!=U){if(!(U instanceof Uint8Array))throw new Error("".concat(k," must be of type Uint8Array."));U=nt(U)}return U}(j,H):null!==Fe.match(/^Base64Url$/i)?Re=function ot(k,U){if(null!=U){if(!(U instanceof Uint8Array))throw new Error("".concat(k," must be of type Uint8Array."));U=function Mt(k){if(!k)return;if(!(k instanceof Uint8Array))throw new Error("Please provide an input of type Uint8Array for converting to Base64Url.");return function bt(k,U){let H=k.length;for(;H-1>=0&&k[H-1]===U;)--H;return k.substr(0,H)}(nt(k),"=").replace(/\+/g,"-").replace(/\//g,"_")}(U)}return U}(j,H):null!==Fe.match(/^Sequence$/i)?Re=function fn(k,U,H,j,ge,Ie){var ve;if(!Array.isArray(H))throw new Error("".concat(j," must be of type Array."));let Ne=U.type.element;if(!Ne||"object"!=typeof Ne)throw new Error('element" metadata for an Array must be defined in the '+'mapper and it must of type "object" in '.concat(j,"."));"Composite"===Ne.type.name&&Ne.type.className&&(Ne=null!==(ve=k.modelMappers[Ne.type.className])&&void 0!==ve?ve:Ne);const He=[];for(let Re=0;Re<H.length;Re++){const Fe=k.serialize(Ne,H[Re],j,Ie);if(ge&&Ne.xmlNamespace){const ut=Ne.xmlNamespacePrefix?"xmlns:".concat(Ne.xmlNamespacePrefix):"xmlns";"Composite"===Ne.type.name?(He[Re]=Object.assign({},Fe),He[Re][ct]={[ut]:Ne.xmlNamespace}):(He[Re]={},He[Re][Ie.xml.xmlCharKey]=Fe,He[Re][ct]={[ut]:Ne.xmlNamespace})}else He[Re]=Fe}return He}(this,U,H,j,!!this.isXML,He):null!==Fe.match(/^Dictionary$/i)?Re=function Yt(k,U,H,j,ge,Ie){if("object"!=typeof H)throw new Error("".concat(j," must be of type object."));const ve=U.type.value;if(!ve||"object"!=typeof ve)throw new Error('"value" metadata for a Dictionary must be defined in the '+'mapper and it must of type "object" in '.concat(j,"."));const Ne={};for(const He of Object.keys(H)){const Re=k.serialize(ve,H[He],j,Ie);Ne[He]=de(ve,Re,ge,Ie)}if(ge&&U.xmlNamespace){const He=U.xmlNamespacePrefix?"xmlns:".concat(U.xmlNamespacePrefix):"xmlns",Re=Ne;return Re[ct]={[He]:U.xmlNamespace},Re}return Ne}(this,U,H,j,!!this.isXML,He):null!==Fe.match(/^Composite$/i)&&(Re=function ke(k,U,H,j,ge,Ie){if(K(k,U)&&(U=Y(k,U,H,"clientName")),null!=H){const ve={},Ne=lt(k,U,j);for(const Re of Object.keys(Ne)){const Fe=Ne[Re];if(Fe.readOnly)continue;let ut,mt=ve;if(k.isXML)ut=Fe.xmlIsWrapped?Fe.xmlName:Fe.xmlElementName||Fe.xmlName;else{const jt=Ve(Fe.serializedName);ut=jt.pop();for(const Zt of jt)null==mt[Zt]&&(null!=H[Re]||void 0!==Fe.defaultValue)&&(mt[Zt]={}),mt=mt[Zt]}if(null!=mt){if(ge&&U.xmlNamespace){const Me=U.xmlNamespacePrefix?"xmlns:".concat(U.xmlNamespacePrefix):"xmlns";mt[ct]=Object.assign(Object.assign({},mt[ct]),{[Me]:U.xmlNamespace})}const jt=""!==Fe.serializedName?j+"."+Fe.serializedName:j;let Zt=H[Re];const Tn=K(k,U);Tn&&Tn.clientName===Re&&null==Zt&&(Zt=U.serializedName);const mn=k.serialize(Fe,Zt,jt,Ie);if(void 0!==mn&&null!=ut){const Me=de(Fe,mn,ge,Ie);ge&&Fe.xmlIsAttribute?(mt[ct]=mt[ct]||{},mt[ct][ut]=mn):mt[ut]=ge&&Fe.xmlIsWrapped?{[Fe.xmlElementName]:Me}:Me}}}const He=function Vt(k,U,H){const j=U.type.additionalProperties;if(!j&&U.type.className){const ge=Tt(k,U,H);return null==ge?void 0:ge.type.additionalProperties}return j}(k,U,j);if(He){const Re=Object.keys(Ne);for(const Fe in H)Re.every(mt=>mt!==Fe)&&(ve[Fe]=k.serialize(He,H[Fe],j+'["'+Fe+'"]',Ie))}return ve}return H}(this,U,H,j,!!this.isXML,He)),Re}deserialize(U,H,j,ge={xml:{}}){var Ie,ve,Ne,He;const Re={xml:{rootName:null!==(Ie=ge.xml.rootName)&&void 0!==Ie?Ie:"",includeRoot:null!==(ve=ge.xml.includeRoot)&&void 0!==ve&&ve,xmlCharKey:null!==(Ne=ge.xml.xmlCharKey)&&void 0!==Ne?Ne:Ue},ignoreUnknownProperties:null!==(He=ge.ignoreUnknownProperties)&&void 0!==He&&He};if(null==H)return this.isXML&&"Sequence"===U.type.name&&!U.xmlIsWrapped&&(H=[]),void 0!==U.defaultValue&&(H=U.defaultValue),H;let Fe;const ut=U.type.name;if(j||(j=U.serializedName),null!==ut.match(/^Composite$/i))Fe=function le(k,U,H,j,ge){var Ie,ve;const Ne=null!==(Ie=ge.xml.xmlCharKey)&&void 0!==Ie?Ie:Ue;K(k,U)&&(U=Y(k,U,H,"serializedName"));const He=lt(k,U,j);let Re={};const Fe=[];for(const mt of Object.keys(He)){const jt=He[mt],Zt=Ve(He[mt].serializedName);Fe.push(Zt[0]);const{serializedName:Tn,xmlName:mn,xmlElementName:Me}=jt;let Pe=j;""!==Tn&&void 0!==Tn&&(Pe=j+"."+Tn);const Ye=jt.headerCollectionPrefix;if(Ye){const et={};for(const rt of Object.keys(H))rt.startsWith(Ye)&&(et[rt.substring(Ye.length)]=k.deserialize(jt.type.value,H[rt],Pe,ge)),Fe.push(rt);Re[mt]=et}else if(k.isXML)if(jt.xmlIsAttribute&&H[ct])Re[mt]=k.deserialize(jt,H[ct][mn],Pe,ge);else if(jt.xmlIsMsText)void 0!==H[Ne]?Re[mt]=H[Ne]:"string"==typeof H&&(Re[mt]=H);else{const et=Me||mn||Tn;if(jt.xmlIsWrapped){const rt=H[mn],zt=null!==(ve=null==rt?void 0:rt[Me])&&void 0!==ve?ve:[];Re[mt]=k.deserialize(jt,zt,Pe,ge),Fe.push(mn)}else Re[mt]=k.deserialize(jt,H[et],Pe,ge),Fe.push(et)}else{let et,rt=H,zt=0;for(const Bn of Zt){if(!rt)break;zt++,rt=rt[Bn]}null===rt&&zt<Zt.length&&(rt=void 0),et=rt;const Ut=U.type.polymorphicDiscriminator;let In;if(Ut&&mt===Ut.clientName&&null==et&&(et=U.serializedName),Array.isArray(H[mt])&&""===He[mt].serializedName){et=H[mt];const Bn=k.deserialize(jt,et,Pe,ge);for(const[$n,Kt]of Object.entries(Re))Object.prototype.hasOwnProperty.call(Bn,$n)||(Bn[$n]=Kt);Re=Bn}else(void 0!==et||void 0!==jt.defaultValue)&&(In=k.deserialize(jt,et,Pe,ge),Re[mt]=In)}}const ut=U.type.additionalProperties;if(ut){const mt=jt=>{for(const Zt in He)if(Ve(He[Zt].serializedName)[0]===jt)return!1;return!0};for(const jt in H)mt(jt)&&(Re[jt]=k.deserialize(ut,H[jt],j+'["'+jt+'"]',ge))}else if(H&&!ge.ignoreUnknownProperties)for(const mt of Object.keys(H))void 0===Re[mt]&&!Fe.includes(mt)&&!De(mt,ge)&&(Re[mt]=H[mt]);return Re}(this,U,H,j,Re);else{if(this.isXML){const mt=Re.xml.xmlCharKey;void 0!==H[ct]&&void 0!==H[mt]&&(H=H[mt])}null!==ut.match(/^Number$/i)?(Fe=parseFloat(H),isNaN(Fe)&&(Fe=H)):null!==ut.match(/^Boolean$/i)?Fe="true"===H||"false"!==H&&H:null!==ut.match(/^(String|Enum|Object|Stream|Uuid|TimeSpan|any)$/i)?Fe=H:null!==ut.match(/^(Date|DateTime|DateTimeRfc1123)$/i)?Fe=new Date(H):null!==ut.match(/^UnixTime$/i)?Fe=function xe(k){if(k)return new Date(1e3*k)}(H):null!==ut.match(/^ByteArray$/i)?Fe=st(H):null!==ut.match(/^Base64Url$/i)?Fe=function pt(k){if(k){if(k&&"string"!=typeof k.valueOf())throw new Error("Please provide an input of type string for converting to Uint8Array");return st(k=k.replace(/-/g,"+").replace(/_/g,"/"))}}(H):null!==ut.match(/^Sequence$/i)?Fe=function ye(k,U,H,j,ge){var Ie;let ve=U.type.element;if(!ve||"object"!=typeof ve)throw new Error('element" metadata for an Array must be defined in the '+'mapper and it must of type "object" in '.concat(j));if(H){Array.isArray(H)||(H=[H]),"Composite"===ve.type.name&&ve.type.className&&(ve=null!==(Ie=k.modelMappers[ve.type.className])&&void 0!==Ie?Ie:ve);const Ne=[];for(let He=0;He<H.length;He++)Ne[He]=k.deserialize(ve,H[He],"".concat(j,"[").concat(He,"]"),ge);return Ne}return H}(this,U,H,j,Re):null!==ut.match(/^Dictionary$/i)&&(Fe=function we(k,U,H,j,ge){const Ie=U.type.value;if(!Ie||"object"!=typeof Ie)throw new Error('"value" metadata for a Dictionary must be defined in the '+'mapper and it must of type "object" in '.concat(j));if(H){const ve={};for(const Ne of Object.keys(H))ve[Ne]=k.deserialize(Ie,H[Ne],j,ge);return ve}return H}(this,U,H,j,Re))}return U.isConstant&&(Fe=U.defaultValue),Fe}}function Nt(k={},U=!1){return new tt(k,U)}function Ve(k){const U=[];let H="";if(k){const j=k.split(".");for(const ge of j)"\\"===ge.charAt(ge.length-1)?H+=ge.substr(0,ge.length-1)+".":(H+=ge,U.push(H),H="")}return U}function Tt(k,U,H){const j=U.type.className;if(!j)throw new Error('Class name for model "'.concat(H,'" is not provided in the mapper "').concat(JSON.stringify(U,void 0,2),'".'));return k.modelMappers[j]}function lt(k,U,H){let j=U.type.modelProperties;if(!j){const ge=Tt(k,U,H);if(!ge)throw new Error('mapper() cannot be null or undefined for model "'.concat(U.type.className,'".'));if(j=null==ge?void 0:ge.type.modelProperties,!j)throw new Error("modelProperties cannot be null or undefined in the "+'mapper "'.concat(JSON.stringify(ge),'" of type "').concat(U.type.className,'" for object "').concat(H,'".'))}return j}function de(k,U,H,j){if(!H||!k.xmlNamespace)return U;const Ie={[k.xmlNamespacePrefix?"xmlns:".concat(k.xmlNamespacePrefix):"xmlns"]:k.xmlNamespace};if(["Composite"].includes(k.type.name)){if(U[ct])return U;{const Ne=Object.assign({},U);return Ne[ct]=Ie,Ne}}const ve={};return ve[j.xml.xmlCharKey]=U,ve[ct]=Ie,ve}function De(k,U){return[ct,U.xml.xmlCharKey].includes(k)}function Y(k,U,H,j){var ge;const Ie=K(k,U);if(Ie){let ve=Ie[j];if(ve){"serializedName"===j&&(ve=ve.replace(/\\/gi,""));const Ne=H[ve],He=null!==(ge=U.type.uberParent)&&void 0!==ge?ge:U.type.className;if("string"==typeof Ne&&He){const Re=function Oe(k,U,H){const j=[H];for(;j.length;){const ge=j.shift(),Ie=U===ge?U:ge+"."+U;if(Object.prototype.hasOwnProperty.call(k,Ie))return k[Ie];for(const[ve,Ne]of Object.entries(k))ve.startsWith(ge+".")&&Ne.type.uberParent===ge&&Ne.type.className&&j.push(Ne.type.className)}}(k.modelMappers.discriminators,Ne,He);Re&&(U=Re)}}}return U}function K(k,U){return U.type.polymorphicDiscriminator||q(k,U.type.uberParent)||q(k,U.type.className)}function q(k,U){return U&&k.modelMappers[U]&&k.modelMappers[U].type.polymorphicDiscriminator}const ie={Base64Url:"Base64Url",Boolean:"Boolean",ByteArray:"ByteArray",Composite:"Composite",Date:"Date",DateTime:"DateTime",DateTimeRfc1123:"DateTimeRfc1123",Dictionary:"Dictionary",Enum:"Enum",Number:"Number",Object:"Object",Sequence:"Sequence",String:"String",Stream:"Stream",TimeSpan:"TimeSpan",UnixTime:"UnixTime"};var oe=Se(467),F=Se(458);const z={operationRequestMap:new WeakMap};function J(k,U,H){let j=U.parameterPath;const ge=U.mapper;let Ie;if("string"==typeof j&&(j=[j]),Array.isArray(j)){if(j.length>0)if(ge.isConstant)Ie=ge.defaultValue;else{let ve=fe(k,j);!ve.propertyFound&&H&&(ve=fe(H,j));let Ne=!1;ve.propertyFound||(Ne=ge.required||"options"===j[0]&&2===j.length),Ie=Ne?ge.defaultValue:ve.propertyValue}}else{ge.required&&(Ie={});for(const ve in j){const Re=J(k,{parameterPath:j[ve],mapper:ge.type.modelProperties[ve]},H);void 0!==Re&&(Ie||(Ie={}),Ie[ve]=Re)}}return Ie}function fe(k,U){const H={propertyFound:!1};let j=0;for(;j<U.length;++j){const ge=U[j];if(!k||!(ge in k))break;k=k[ge]}return j===U.length&&(H.propertyValue=k,H.propertyFound=!0),H}const _e=Symbol.for("@azure/core-client original request");function W(k){if(function B(k){return _e in k}(k))return W(k[_e]);let U=z.operationRequestMap.get(k);return U||(U={},z.operationRequestMap.set(k,U)),U}const G=["application/json","text/json"],ne=["application/xml","application/atom+xml"],Z="deserializationPolicy";function ee(k={}){var U,H,j,ge,Ie,ve,Ne;const He=null!==(H=null===(U=k.expectedContentTypes)||void 0===U?void 0:U.json)&&void 0!==H?H:G,Re=null!==(ge=null===(j=k.expectedContentTypes)||void 0===j?void 0:j.xml)&&void 0!==ge?ge:ne,Fe=k.parseXML,ut=k.serializerOptions,mt={xml:{rootName:null!==(Ie=null==ut?void 0:ut.xml.rootName)&&void 0!==Ie?Ie:"",includeRoot:null!==(ve=null==ut?void 0:ut.xml.includeRoot)&&void 0!==ve&&ve,xmlCharKey:null!==(Ne=null==ut?void 0:ut.xml.xmlCharKey)&&void 0!==Ne?Ne:Ue}};return{name:Z,sendRequest:(jt,Zt)=>(0,oe.A)(function*(){const Tn=yield Zt(jt);return function Ge(k,U,H,j,ge){return qe.apply(this,arguments)}(He,Re,Tn,mt,Fe)})()}}function qe(){return qe=(0,oe.A)(function*(k,U,H,j,ge){const Ie=yield function Gt(k,U,H,j,ge){return X.apply(this,arguments)}(k,U,H,j,ge);if(!function We(k){const H=W(k.request),j=null==H?void 0:H.shouldDeserialize;let ge;return ge=void 0===j||("boolean"==typeof j?j:j(k)),ge}(Ie))return Ie;const ve=W(Ie.request),Ne=null==ve?void 0:ve.operationSpec;if(!Ne||!Ne.responses)return Ie;const He=function re(k){let U;const j=W(k.request),ge=null==j?void 0:j.operationSpec;return ge&&(U=null!=j&&j.operationResponseGetter?null==j?void 0:j.operationResponseGetter(ge,k):ge.responses[k.status]),U}(Ie),{error:Re,shouldReturnResponse:Fe}=function Wt(k,U,H,j){var ge,Ie,ve,Ne,He;const Re=200<=k.status&&k.status<300;if(function Ze(k){const U=Object.keys(k.responses);return 0===U.length||1===U.length&&"default"===U[0]}(U)?Re:H){if(!H)return{error:null,shouldReturnResponse:!1};if(!H.isError)return{error:null,shouldReturnResponse:!1}}const ut=null!=H?H:U.responses.default,mt=null!==(ge=k.request.streamResponseStatusCodes)&&void 0!==ge&&ge.has(k.status)?"Unexpected status code: ".concat(k.status):k.bodyAsText,jt=new F.RestError(mt,{statusCode:k.status,request:k.request,response:k});if(!(ut||null!==(ve=null===(Ie=k.parsedBody)||void 0===Ie?void 0:Ie.error)&&void 0!==ve&&ve.code&&null!==(He=null===(Ne=k.parsedBody)||void 0===Ne?void 0:Ne.error)&&void 0!==He&&He.message))throw jt;const Zt=null==ut?void 0:ut.bodyMapper,Tn=null==ut?void 0:ut.headersMapper;try{if(k.parsedBody){const mn=k.parsedBody;let Me;if(Zt){let Ye=mn;if(U.isXML&&Zt.type.name===ie.Sequence){Ye=[];const et=Zt.xmlElementName;"object"==typeof mn&&et&&(Ye=mn[et])}Me=U.serializer.deserialize(Zt,Ye,"error.response.parsedBody",j)}const Pe=mn.error||Me||mn;jt.code=Pe.code,Pe.message&&(jt.message=Pe.message),Zt&&(jt.response.parsedBody=Me)}k.headers&&Tn&&(jt.response.parsedHeaders=U.serializer.deserialize(Tn,k.headers.toJSON(),"operationRes.parsedHeaders"))}catch(mn){jt.message='Error "'.concat(mn.message,'" occurred in deserializing the responseBody - "').concat(k.bodyAsText,'" for the default response.')}return{error:jt,shouldReturnResponse:!1}}(Ie,Ne,He,j);if(Re)throw Re;if(Fe)return Ie;if(He){if(He.bodyMapper){let ut=Ie.parsedBody;Ne.isXML&&He.bodyMapper.type.name===ie.Sequence&&(ut="object"==typeof ut?ut[He.bodyMapper.xmlElementName]:[]);try{Ie.parsedBody=Ne.serializer.deserialize(He.bodyMapper,ut,"operationRes.parsedBody",j)}catch(mt){throw new F.RestError("Error ".concat(mt," occurred in deserializing the responseBody - ").concat(Ie.bodyAsText),{statusCode:Ie.status,request:Ie.request,response:Ie})}}else"HEAD"===Ne.httpMethod&&(Ie.parsedBody=H.status>=200&&H.status<300);He.headersMapper&&(Ie.parsedHeaders=Ne.serializer.deserialize(He.headersMapper,Ie.headers.toJSON(),"operationRes.parsedHeaders",{xml:{},ignoreUnknownProperties:!0}))}return Ie}),qe.apply(this,arguments)}function X(){return(X=(0,oe.A)(function*(k,U,H,j,ge){var Ie;if((null===(Ie=H.request.streamResponseStatusCodes)||void 0===Ie||!Ie.has(H.status))&&H.bodyAsText){const ve=H.bodyAsText,Ne=H.headers.get("Content-Type")||"",He=Ne?Ne.split(";").map(Re=>Re.toLowerCase()):[];try{if(0===He.length||He.some(Re=>-1!==k.indexOf(Re)))return H.parsedBody=JSON.parse(ve),H;if(He.some(Re=>-1!==U.indexOf(Re))){if(!ge)throw new Error("Parsing XML not supported.");const Re=yield ge(ve,j.xml);return H.parsedBody=Re,H}}catch(Re){const Fe='Error "'.concat(Re,'" occurred while parsing the response body - ').concat(H.bodyAsText,".");throw new F.RestError(Fe,{code:Re.code||F.RestError.PARSE_ERROR,statusCode:H.status,request:H.request,response:H})}}return H})).apply(this,arguments)}function te(k){const{parameterPath:U,mapper:H}=k;let j;return j="string"==typeof U?U:Array.isArray(U)?U.join("."):H.serializedName,j}const me="serializationPolicy";function ue(k={}){const U=k.stringifyXML;return{name:me,sendRequest:(H,j)=>(0,oe.A)(function*(){const ge=W(H),Ie=null==ge?void 0:ge.operationSpec,ve=null==ge?void 0:ge.operationArguments;return Ie&&ve&&(function be(k,U,H){var j,ge;if(H.headerParameters)for(const ve of H.headerParameters){let Ne=J(U,ve);if(null!=Ne||ve.mapper.required){Ne=H.serializer.serialize(ve.mapper,Ne,te(ve));const He=ve.mapper.headerCollectionPrefix;if(He)for(const Re of Object.keys(Ne))k.headers.set(He+Re,Ne[Re]);else k.headers.set(ve.mapper.serializedName||te(ve),Ne)}}const Ie=null===(ge=null===(j=U.options)||void 0===j?void 0:j.requestOptions)||void 0===ge?void 0:ge.customHeaders;if(Ie)for(const ve of Object.keys(Ie))k.headers.set(ve,Ie[ve])}(H,ve,Ie),function Le(k,U,H,j=function(){throw new Error("XML serialization unsupported!")}){var ge,Ie,ve,Ne,He;const Re=null===(ge=U.options)||void 0===ge?void 0:ge.serializerOptions,Fe={xml:{rootName:null!==(Ie=null==Re?void 0:Re.xml.rootName)&&void 0!==Ie?Ie:"",includeRoot:null!==(ve=null==Re?void 0:Re.xml.includeRoot)&&void 0!==ve&&ve,xmlCharKey:null!==(Ne=null==Re?void 0:Re.xml.xmlCharKey)&&void 0!==Ne?Ne:Ue}},ut=Fe.xml.xmlCharKey;if(H.requestBody&&H.requestBody.mapper){k.body=J(U,H.requestBody);const mt=H.requestBody.mapper,{required:jt,serializedName:Zt,xmlName:Tn,xmlElementName:mn,xmlNamespace:Me,xmlNamespacePrefix:Pe,nullable:Ye}=mt,et=mt.type.name;try{if(null!=k.body||Ye&&null===k.body||jt){const rt=te(H.requestBody);k.body=H.serializer.serialize(mt,k.body,rt,Fe);const zt=et===ie.Stream;if(H.isXML){const Ut=Pe?"xmlns:".concat(Pe):"xmlns",In=function Pt(k,U,H,j,ge){if(k&&!["Composite","Sequence","Dictionary"].includes(H)){const Ie={};return Ie[ge.xml.xmlCharKey]=j,Ie[ct]={[U]:k},Ie}return j}(Me,Ut,et,k.body,Fe);et===ie.Sequence?k.body=j(function Et(k,U,H,j){if(Array.isArray(k)||(k=[k]),!H||!j)return{[U]:k};const ge={[U]:k};return ge[ct]={[H]:j},ge}(In,mn||Tn||Zt,Ut,Me),{rootName:Tn||Zt,xmlCharKey:ut}):zt||(k.body=j(In,{rootName:Tn||Zt,xmlCharKey:ut}))}else{if(et===ie.String&&(null!==(He=H.contentType)&&void 0!==He&&He.match("text/plain")||"text"===H.mediaType))return;zt||(k.body=JSON.stringify(k.body))}}}catch(rt){throw new Error('Error "'.concat(rt.message,'" occurred in serializing the payload - ').concat(JSON.stringify(Zt,void 0,"  "),"."))}}else if(H.formDataParameters&&H.formDataParameters.length>0){k.formData={};for(const mt of H.formDataParameters){const jt=J(U,mt);if(null!=jt){const Zt=mt.mapper.serializedName||te(mt);k.formData[Zt]=H.serializer.serialize(mt.mapper,jt,te(mt),Fe)}}}}(H,ve,Ie,U)),j(H)})()}}function Ct(k={}){const U=(0,F.createPipelineFromOptions)(null!=k?k:{});return k.credentialOptions&&U.addPolicy((0,F.bearerTokenAuthenticationPolicy)({credential:k.credentialOptions.credential,scopes:k.credentialOptions.credentialScopes})),U.addPolicy(ue(k.serializationOptions),{phase:"Serialize"}),U.addPolicy(ee(k.deserializationOptions),{phase:"Deserialize"}),U}let Ht;const Ln={CSV:",",SSV:" ",Multi:"Multi",TSV:"\t",Pipes:"|"};function or(k,U){let H=k;for(const[j,ge]of U)H=H.split(j).join(ge);return H}const ao=(0,Se(992).KV)("core-client");class qi{constructor(U={}){var H,j;if(this._requestContentType=U.requestContentType,this._endpoint=null!==(H=U.endpoint)&&void 0!==H?H:U.baseUri,U.baseUri&&ao.warning("The baseUri option for SDK Clients has been deprecated, please use endpoint instead."),this._allowInsecureConnection=U.allowInsecureConnection,this._httpClient=U.httpClient||function _n(){return Ht||(Ht=(0,F.createDefaultHttpClient)()),Ht}(),this.pipeline=U.pipeline||function gs(k){const U=function Qn(k){if(k.credentialScopes)return k.credentialScopes;if(k.endpoint)return"".concat(k.endpoint,"/.default");if(k.baseUri)return"".concat(k.baseUri,"/.default");if(k.credential&&!k.credentialScopes)throw new Error("When using credentials, the ServiceClientOptions must contain either a endpoint or a credentialScopes. Unable to create a bearerTokenAuthenticationPolicy")}(k),H=k.credential&&U?{credentialScopes:U,credential:k.credential}:void 0;return Ct(Object.assign(Object.assign({},k),{credentialOptions:H}))}(U),null!==(j=U.additionalPolicies)&&void 0!==j&&j.length)for(const{policy:ge,position:Ie}of U.additionalPolicies)this.pipeline.addPolicy(ge,{afterPhase:"perRetry"===Ie?"Sign":void 0})}sendRequest(U){var H=this;return(0,oe.A)(function*(){return H.pipeline.sendRequest(H._httpClient,U)})()}sendOperationRequest(U,H){var j=this;return(0,oe.A)(function*(){const ge=H.baseUrl||j._endpoint;if(!ge)throw new Error("If operationSpec.baseUrl is not specified, then the ServiceClient must have a endpoint string property that contains the base URL to use.");const Ie=function Jn(k,U,H,j){const ge=function $i(k,U,H){var j;const ge=new Map;if(null!==(j=k.urlParameters)&&void 0!==j&&j.length)for(const Ie of k.urlParameters){let ve=J(U,Ie,H);const Ne=te(Ie);ve=k.serializer.serialize(Ie.mapper,ve,Ne),Ie.skipEncoding||(ve=encodeURIComponent(ve)),ge.set("{".concat(Ie.mapper.serializedName||Ne,"}"),ve)}return ge}(U,H,j);let Ie=!1,ve=or(k,ge);if(U.path){let Re=or(U.path,ge);"/{nextLink}"===U.path&&Re.startsWith("/")&&(Re=Re.substring(1)),function Ro(k){return k.includes("://")}(Re)?(ve=Re,Ie=!0):ve=function $o(k,U){if(!U)return k;const H=new URL(k);let j=H.pathname;j.endsWith("/")||(j="".concat(j,"/")),U.startsWith("/")&&(U=U.substring(1));const ge=U.indexOf("?");if(-1!==ge){const Ie=U.substring(0,ge),ve=U.substring(ge+1);j+=Ie,ve&&(H.search=H.search?"".concat(H.search,"&").concat(ve):ve)}else j+=U;return H.pathname=j,H.toString()}(ve,Re)}const{queryParams:Ne,sequenceParams:He}=function Qs(k,U,H){var j;const ge=new Map,Ie=new Set;if(null!==(j=k.queryParameters)&&void 0!==j&&j.length)for(const ve of k.queryParameters){"Sequence"===ve.mapper.type.name&&ve.mapper.serializedName&&Ie.add(ve.mapper.serializedName);let Ne=J(U,ve,H);if(null!=Ne||ve.mapper.required){Ne=k.serializer.serialize(ve.mapper,Ne,te(ve));const He=ve.collectionFormat?Ln[ve.collectionFormat]:"";if(Array.isArray(Ne)&&(Ne=Ne.map(Re=>null==Re?"":Re)),"Multi"===ve.collectionFormat&&0===Ne.length)continue;Array.isArray(Ne)&&("SSV"===ve.collectionFormat||"TSV"===ve.collectionFormat)&&(Ne=Ne.join(He)),ve.skipEncoding||(Ne=Array.isArray(Ne)?Ne.map(Re=>encodeURIComponent(Re)):encodeURIComponent(Ne)),Array.isArray(Ne)&&("CSV"===ve.collectionFormat||"Pipes"===ve.collectionFormat)&&(Ne=Ne.join(He)),ge.set(ve.mapper.serializedName||te(ve),Ne)}}return{queryParams:ge,sequenceParams:Ie}}(U,H,j);return ve=function Xs(k,U,H,j=!1){if(0===U.size)return k;const ge=new URL(k),Ie=function Hi(k){const U=new Map;if(!k||"?"!==k[0])return U;const H=(k=k.slice(1)).split("&");for(const j of H){const[ge,Ie]=j.split("=",2),ve=U.get(ge);ve?Array.isArray(ve)?ve.push(Ie):U.set(ge,[ve,Ie]):U.set(ge,Ie)}return U}(ge.search);for(const[Ne,He]of U){const Re=Ie.get(Ne);if(Array.isArray(Re))if(Array.isArray(He)){Re.push(...He);const Fe=new Set(Re);Ie.set(Ne,Array.from(Fe))}else Re.push(He);else Re?(Array.isArray(He)?He.unshift(Re):H.has(Ne)&&Ie.set(Ne,[Re,He]),j||Ie.set(Ne,He)):Ie.set(Ne,He)}const ve=[];for(const[Ne,He]of Ie)if("string"==typeof He)ve.push("".concat(Ne,"=").concat(He));else if(Array.isArray(He))for(const Re of He)ve.push("".concat(Ne,"=").concat(Re));else ve.push("".concat(Ne,"=").concat(He));return ge.search=ve.length?"?".concat(ve.join("&")):"",ge.toString()}(ve,Ne,He,Ie),ve}(ge,H,U,j),ve=(0,F.createPipelineRequest)({url:Ie});ve.method=H.httpMethod;const Ne=W(ve);Ne.operationSpec=H,Ne.operationArguments=U;const He=H.contentType||j._requestContentType;He&&H.requestBody&&ve.headers.set("Content-Type",He);const Re=U.options;if(Re){const Fe=Re.requestOptions;Fe&&(Fe.timeout&&(ve.timeout=Fe.timeout),Fe.onUploadProgress&&(ve.onUploadProgress=Fe.onUploadProgress),Fe.onDownloadProgress&&(ve.onDownloadProgress=Fe.onDownloadProgress),void 0!==Fe.shouldDeserialize&&(Ne.shouldDeserialize=Fe.shouldDeserialize),Fe.allowInsecureConnection&&(ve.allowInsecureConnection=!0)),Re.abortSignal&&(ve.abortSignal=Re.abortSignal),Re.tracingOptions&&(ve.tracingOptions=Re.tracingOptions)}j._allowInsecureConnection&&(ve.allowInsecureConnection=!0),void 0===ve.streamResponseStatusCodes&&(ve.streamResponseStatusCodes=function x(k){const U=new Set;for(const H in k.responses){const j=k.responses[H];j.bodyMapper&&j.bodyMapper.type.name===ie.Stream&&U.add(Number(H))}return U}(H));try{const Fe=yield j.sendRequest(ve),ut=_t(Fe,H.responses[Fe.status]);return null!=Re&&Re.onResponse&&Re.onResponse(Fe,ut),ut}catch(Fe){if("object"==typeof Fe&&null!=Fe&&Fe.response){const ut=Fe.response,mt=_t(ut,H.responses[Fe.statusCode]||H.responses.default);Fe.details=mt,null!=Re&&Re.onResponse&&Re.onResponse(ut,mt,Fe)}throw Fe}})()}}function Ys(k){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,oe.A)(function*(k){var U;const{scopes:H,response:j}=k,ge=k.logger||ao,Ie=j.headers.get("WWW-Authenticate");if(!Ie)return ge.info("The WWW-Authenticate header was missing. Failed to perform the Continuous Access Evaluation authentication flow."),!1;const Ne=(function ms(k){return", ".concat(k.trim()).split(", Bearer ").filter(H=>H).map(H=>"".concat(H.trim(),", ").split('", ').filter(Ie=>Ie).map(Ie=>(([ve,Ne])=>({[ve]:Ne}))(Ie.trim().split('="'))).reduce((Ie,ve)=>Object.assign(Object.assign({},Ie),ve),{}))}(Ie)||[]).find(Re=>Re.claims);if(!Ne)return ge.info('The WWW-Authenticate header was missing the necessary "claims" to perform the Continuous Access Evaluation authentication flow.'),!1;const He=yield k.getAccessToken(Ne.scope?[Ne.scope]:H,{claims:Je(Ne.claims)});return!!He&&(k.request.headers.set("Authorization","".concat(null!==(U=He.tokenType)&&void 0!==U?U:"Bearer"," ").concat(He.token)),!0)})).apply(this,arguments)}const Qr_HeaderConstants_AUTHORIZATION="authorization",ys=function(){var k=(0,oe.A)(function*(U){var H;const j=function $e(k){return{abortSignal:k.abortSignal,requestOptions:{timeout:k.timeout},tracingOptions:k.tracingOptions}}(U.request),ge=function he(k){const U=k.headers.get("WWW-Authenticate");if(401===k.status&&U)return U}(U.response);if(ge){const Ie=function Te(k){const U=k.slice(7);return"".concat(U.trim()," ").split(" ").filter(ge=>ge).map(ge=>(([Ie,ve])=>({[Ie]:ve}))(ge.trim().split("="))).reduce((ge,Ie)=>Object.assign(Object.assign({},ge),Ie),{})}(ge),ve=function ce(k,U){if(!U.resource_id)return k.scopes;const H=new URL(U.resource_id);H.pathname="/.default";let j=H.toString();return"https://disk.azure.com/.default"===j&&(j="https://disk.azure.com//.default"),[j]}(U,Ie),Ne=function ir(k){const j=new URL(k.authorization_uri).pathname.split("/")[1];if(j&&function hr(k){return/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/.test(k)}(j))return j}(Ie);if(!Ne)return!1;const He=yield U.getAccessToken(ve,Object.assign(Object.assign({},j),{tenantId:Ne}));return!!He&&(U.request.headers.set(Qr_HeaderConstants_AUTHORIZATION,"".concat(null!==(H=He.tokenType)&&void 0!==H?H:"Bearer"," ").concat(He.token)),!0)}return!1});return function(H){return k.apply(this,arguments)}}()},458:(Xt,ft,Se)=>{Se.r(ft),Se.d(ft,{RestError:()=>Et,agentPolicy:()=>ue,agentPolicyName:()=>me,auxiliaryAuthenticationHeaderPolicy:()=>mn,auxiliaryAuthenticationHeaderPolicyName:()=>mt,bearerTokenAuthenticationPolicy:()=>Ne,bearerTokenAuthenticationPolicyName:()=>$e,createDefaultHttpClient:()=>zi,createEmptyPipeline:()=>nt,createFile:()=>G,createFileFromStream:()=>W,createHttpHeaders:()=>ao,createPipelineFromOptions:()=>Xs,createPipelineRequest:()=>qi,decompressResponsePolicy:()=>re,decompressResponsePolicyName:()=>ee,defaultRetryPolicy:()=>Ge,exponentialRetryPolicy:()=>Qn,exponentialRetryPolicyName:()=>gs,formDataPolicy:()=>Ze,formDataPolicyName:()=>qe,getDefaultProxySettings:()=>Gt,isRestError:()=>Ct,logPolicy:()=>kt,logPolicyName:()=>ot,multipartPolicy:()=>Z,multipartPolicyName:()=>ne,ndJsonPolicy:()=>ut,ndJsonPolicyName:()=>Fe,proxyPolicy:()=>X,proxyPolicyName:()=>Wt,redirectPolicy:()=>Yt,redirectPolicyName:()=>fn,retryPolicy:()=>ys,setClientRequestIdPolicy:()=>te,setClientRequestIdPolicyName:()=>x,systemErrorRetryPolicy:()=>Ys,systemErrorRetryPolicyName:()=>ms,throttlingRetryPolicy:()=>Qr,throttlingRetryPolicyName:()=>Wi,tlsPolicy:()=>Le,tlsPolicyName:()=>be,tracingPolicy:()=>Ln,tracingPolicyName:()=>_n,userAgentPolicy:()=>oe,userAgentPolicyName:()=>ie});var je=Se(201);function nt(){return(0,je.O8)()}var st=Se(992);const Je=(0,st.KV)("core-rest-pipeline");var ct=Se(970),Ue=Se(879),se=Se(978),pe=Se(362),yt=Se(709),Ke=Se(875);const _t="systemErrorRetryPolicy";var Nt=Se(396);const bt="throttlingRetryPolicy";var pt=Se(121),Ve=Se(885),Xe=Se(535),xe=Se(248),it=Se(767),gt=Se(70);Se(489);const ot=Ve.G;function kt(Me={}){return(0,Ve.r)(Object.assign({logger:Je.info},Me))}const fn=it.O;function Yt(Me={}){return(0,it.x)(Me)}var Vt=Se(467);function De(){return(De=(0,Vt.A)(function*(Me){const Pe=globalThis.navigator;let Ye="unknown";if(null!=Pe&&Pe.userAgentData){const et=yield Pe.userAgentData.getHighEntropyValues(["architecture","platformVersion"]);Ye="".concat(et.architecture,"-").concat(et.platform,"-").concat(et.platformVersion);const rt=function ke(Me){const Pe=["Google Chrome","Microsoft Edge","Opera","Brave","Chromium"];for(const Ye of Pe){const et=Me.find(rt=>rt.brand===Ye);if(et)return et}}(Pe.userAgentData.brands);rt&&Me.set(rt.brand,rt.version)}else if(null!=Pe&&Pe.platform){Ye=Pe.platform;const et=function lt(Me){const Pe=[{name:"Firefox",regex:/Firefox\/([\d.]+)/},{name:"Safari",regex:/Version\/([\d.]+).*Safari/}];for(const Ye of Pe){const et=Me.match(Ye.regex);if(et)return{brand:Ye.name,version:et[1]}}}(Pe.userAgent);et&&Me.set(et.brand,et.version)}else"string"==typeof globalThis.EdgeRuntime&&Me.set("EdgeRuntime",globalThis.EdgeRuntime);Me.set("OS",Ye)})).apply(this,arguments)}const le="1.22.0",we=3;function Y(Me){return K.apply(this,arguments)}function K(){return K=(0,Vt.A)(function*(Me){const Pe=new Map;Pe.set("core-rest-pipeline",le),yield function de(Me){return De.apply(this,arguments)}(Pe);const Ye=function ye(Me){const Pe=[];for(const[Ye,et]of Me){const rt=et?"".concat(Ye,"/").concat(et):Ye;Pe.push(rt)}return Pe.join(" ")}(Pe);return Me?"".concat(Me," ").concat(Ye):Ye}),K.apply(this,arguments)}const q="x-ms-useragent",ie="userAgentPolicy";function oe(Me={}){const Pe=Y(Me.userAgentPrefix);return{name:ie,sendRequest:(Ye,et)=>(0,Vt.A)(function*(){return Ye.headers.has(q)||Ye.headers.set(q,yield Pe),et(Ye)})()}}var F=Se(124);const J={arrayBuffer:()=>{throw new Error("Not implemented")},bytes:()=>{throw new Error("Not implemented")},slice:()=>{throw new Error("Not implemented")},text:()=>{throw new Error("Not implemented")}},fe=Symbol("rawContent");function _e(Me){return"function"==typeof Me[fe]}function B(Me){return _e(Me)?Me[fe]():Me}function W(Me,Pe,Ye={}){var et,rt,zt,Ut;return Object.assign(Object.assign({},J),{type:null!==(et=Ye.type)&&void 0!==et?et:"",lastModified:null!==(rt=Ye.lastModified)&&void 0!==rt?rt:(new Date).getTime(),webkitRelativePath:null!==(zt=Ye.webkitRelativePath)&&void 0!==zt?zt:"",size:null!==(Ut=Ye.size)&&void 0!==Ut?Ut:-1,name:Pe,stream:()=>{const In=Me();if(function z(Me){return!(!Me||"function"!=typeof Me.pipe)}(In))throw new Error("Not supported: a Node stream was provided as input to createFileFromStream.");return In},[fe]:Me})}function G(Me,Pe,Ye={}){var et,rt,zt,Ut;return F.isNodeLike?Object.assign(Object.assign({},J),{type:null!==(et=Ye.type)&&void 0!==et?et:"",lastModified:null!==(rt=Ye.lastModified)&&void 0!==rt?rt:(new Date).getTime(),webkitRelativePath:null!==(zt=Ye.webkitRelativePath)&&void 0!==zt?zt:"",size:Me.byteLength,name:Pe,arrayBuffer:(Ut=(0,Vt.A)(function*(){return Me.buffer}),function(){return Ut.apply(this,arguments)}),stream:()=>new Blob([Me]).stream(),[fe]:()=>Me}):new File([Me],Pe,Ye)}const ne=Xe.u;function Z(){const Me=(0,Xe.J)();return{name:ne,sendRequest:(Pe=(0,Vt.A)(function*(Ye,et){if(Ye.multipartBody)for(const rt of Ye.multipartBody.parts)_e(rt.body)&&(rt.body=B(rt.body));return Me.sendRequest(Ye,et)}),function(et,rt){return Pe.apply(this,arguments)})};var Pe}const ee=Ue.e;function re(){return(0,Ue.r)()}function Ge(Me={}){return(0,se.u)(Me)}const qe=pt.s;function Ze(){return(0,pt.j)()}const Wt=xe.uX;function Gt(Me){return(0,xe.nV)(Me)}function X(Me,Pe){return(0,xe.Ll)(Me,Pe)}const x="setClientRequestIdPolicy";function te(Me="x-ms-client-request-id"){return{name:x,sendRequest:(Pe,Ye)=>(0,Vt.A)(function*(){return Pe.headers.has(Me)||Pe.headers.set(Me,Pe.requestId),Ye(Pe)})()}}const me=ct.B;function ue(Me){return(0,ct.e)(Me)}const be=gt.T;function Le(Me){return(0,gt.i)(Me)}var Pt=Se(838);const Et=je.pj;function Ct(Me){return(0,je.T0)(Me)}var Ht=Se(403);const _n="tracingPolicy";function Ln(Me={}){const Pe=Y(Me.userAgentPrefix),Ye=new Ht.If({additionalAllowedQueryParameters:Me.additionalAllowedQueryParameters}),et=function Jn(){try{return(0,Pt.y)({namespace:"",packageName:"@azure/core-rest-pipeline",packageVersion:le})}catch(Me){return void Je.warning("Error when creating the TracingClient: ".concat((0,F.getErrorMessage)(Me)))}}();return{name:_n,sendRequest:(rt,zt)=>(0,Vt.A)(function*(){var Ut;if(!et)return zt(rt);const In=yield Pe,Bn={"http.url":Ye.sanitizeUrl(rt.url),"http.method":rt.method,"http.user_agent":In,requestId:rt.requestId};In&&(Bn["http.user_agent"]=In);const{span:$n,tracingContext:Kt}=null!==(Ut=function or(Me,Pe,Ye){try{const{span:et,updatedOptions:rt}=Me.startSpan("HTTP ".concat(Pe.method),{tracingOptions:Pe.tracingOptions},{spanKind:"client",spanAttributes:Ye});if(!et.isRecording())return void et.end();const zt=Me.createRequestHeaders(rt.tracingOptions.tracingContext);for(const[Ut,In]of Object.entries(zt))Pe.headers.set(Ut,In);return{span:et,tracingContext:rt.tracingOptions.tracingContext}}catch(et){return void Je.warning("Skipping creating a tracing span due to an error: ".concat((0,F.getErrorMessage)(et)))}}(et,rt,Bn))&&void 0!==Ut?Ut:{};if(!$n||!Kt)return zt(rt);try{const Ft=yield et.withContext(Kt,zt,rt);return function Ro(Me,Pe){try{Me.setAttribute("http.status_code",Pe.status);const Ye=Pe.headers.get("x-ms-request-id");Ye&&Me.setAttribute("serviceRequestId",Ye),Pe.status>=400&&Me.setStatus({status:"error"}),Me.end()}catch(Ye){Je.warning("Skipping tracing span processing due to an error: ".concat((0,F.getErrorMessage)(Ye)))}}($n,Ft),Ft}catch(Ft){throw function $i(Me,Pe){try{Me.setStatus({status:"error",error:(0,F.isError)(Pe)?Pe:void 0}),Ct(Pe)&&Pe.statusCode&&Me.setAttribute("http.status_code",Pe.statusCode),Me.end()}catch(Ye){Je.warning("Skipping tracing span processing due to an error: ".concat((0,F.getErrorMessage)(Ye)))}}($n,Ft),Ft}})()}}function $o(Me){if(Me instanceof AbortSignal)return{abortSignal:Me};if(Me.aborted)return{abortSignal:AbortSignal.abort(Me.reason)};const Pe=new AbortController;let Ye=!0;function et(){Ye&&(Me.removeEventListener("abort",rt),Ye=!1)}function rt(){Pe.abort(Me.reason),et()}return Me.addEventListener("abort",rt),{abortSignal:Pe.signal,cleanup:et}}const Qs="wrapAbortSignalLikePolicy";function Xs(Me){var Pe;const Ye=nt();return F.isNodeLike&&(Me.agent&&Ye.addPolicy(ue(Me.agent)),Me.tlsOptions&&Ye.addPolicy(Le(Me.tlsOptions)),Ye.addPolicy(X(Me.proxyOptions)),Ye.addPolicy(re())),Ye.addPolicy(function Hi(){return{name:Qs,sendRequest:(Me=(0,Vt.A)(function*(Pe,Ye){if(!Pe.abortSignal)return Ye(Pe);const{abortSignal:et,cleanup:rt}=$o(Pe.abortSignal);Pe.abortSignal=et;try{return yield Ye(Pe)}finally{null==rt||rt()}}),function(Ye,et){return Me.apply(this,arguments)})};var Me}()),Ye.addPolicy(Ze(),{beforePolicies:[ne]}),Ye.addPolicy(oe(Me.userAgentOptions)),Ye.addPolicy(te(null===(Pe=Me.telemetryOptions)||void 0===Pe?void 0:Pe.clientRequestIdHeaderName)),Ye.addPolicy(Z(),{afterPhase:"Deserialize"}),Ye.addPolicy(Ge(Me.retryOptions),{phase:"Retry"}),Ye.addPolicy(Ln(Object.assign(Object.assign({},Me.userAgentOptions),Me.loggingOptions)),{afterPhase:"Retry"}),F.isNodeLike&&Ye.addPolicy(Yt(Me.redirectOptions),{afterPhase:"Retry"}),Ye.addPolicy(kt(Me.loggingOptions),{afterPhase:"Sign"}),Ye}function zi(){const Me=(0,je.fl)();return{sendRequest:Pe=>(0,Vt.A)(function*(){const{abortSignal:Ye,cleanup:et}=Pe.abortSignal?$o(Pe.abortSignal):{};try{return Pe.abortSignal=Ye,yield Me.sendRequest(Pe)}finally{null==et||et()}})()}}function ao(Me){return(0,je.Nc)(Me)}function qi(Me){return(0,je.G6)(Me)}const gs="exponentialRetryPolicy";function Qn(Me={}){return function Be(Me={}){var Pe;return(0,yt.J)([(0,pe.xB)(Object.assign(Object.assign({},Me),{ignoreSystemErrors:!0}))],{maxRetries:null!==(Pe=Me.maxRetries)&&void 0!==Pe?Pe:Ke.o})}(Me)}const ms=_t;function Ys(Me={}){return function tt(Me={}){var Pe;return{name:_t,sendRequest:(0,yt.J)([(0,pe.xB)(Object.assign(Object.assign({},Me),{ignoreHttpStatusCodes:!0}))],{maxRetries:null!==(Pe=Me.maxRetries)&&void 0!==Pe?Pe:Ke.o}).sendRequest}}(Me)}const Wi=bt;function Qr(Me={}){return function Mt(Me={}){var Pe;return{name:bt,sendRequest:(0,yt.J)([(0,Nt.P)()],{maxRetries:null!==(Pe=Me.maxRetries)&&void 0!==Pe?Pe:Ke.o}).sendRequest}}(Me)}const hr=(0,st.KV)("core-rest-pipeline retryPolicy");function ys(Me,Pe={maxRetries:we}){return(0,yt.J)(Me,Object.assign({logger:hr},Pe))}const ir={forcedRefreshWindowInMs:1e3,retryIntervalInMs:3e3,refreshWindowInMs:12e4};function he(){return he=(0,Vt.A)(function*(Me,Pe,Ye){function et(){return rt.apply(this,arguments)}function rt(){return(rt=(0,Vt.A)(function*(){if(!(Date.now()<Ye)){const Ut=yield Me();if(null===Ut)throw new Error("Failed to refresh access token.");return Ut}try{return yield Me()}catch(Ut){return null}})).apply(this,arguments)}let zt=yield et();for(;null===zt;)yield(0,F.delay)(Pe),zt=yield et();return zt}),he.apply(this,arguments)}function Te(Me,Pe){let rt,Ye=null,et=null;const zt=Object.assign(Object.assign({},ir),Pe),Ut={get isRefreshing(){return null!==Ye},get shouldRefresh(){var Bn;return!Ut.isRefreshing&&(!!(null!=et&&et.refreshAfterTimestamp&&et.refreshAfterTimestamp<Date.now())||(null!==(Bn=null==et?void 0:et.expiresOnTimestamp)&&void 0!==Bn?Bn:0)-zt.refreshWindowInMs<Date.now())},get mustRefresh(){return null===et||et.expiresOnTimestamp-zt.forcedRefreshWindowInMs<Date.now()}};function In(Bn,$n){var Kt;return Ut.isRefreshing||(Ye=function ce(Me,Pe,Ye){return he.apply(this,arguments)}(()=>Me.getToken(Bn,$n),zt.retryIntervalInMs,null!==(Kt=null==et?void 0:et.expiresOnTimestamp)&&void 0!==Kt?Kt:Date.now()).then(nr=>(Ye=null,et=nr,rt=$n.tenantId,et)).catch(nr=>{throw Ye=null,et=null,rt=void 0,nr})),Ye}return function(){var Bn=(0,Vt.A)(function*($n,Kt){const Ft=!!Kt.claims;return Ft&&(et=null),rt!==Kt.tenantId||Ft||Ut.mustRefresh?In($n,Kt):(Ut.shouldRefresh&&In($n,Kt),et)});return function($n,Kt){return Bn.apply(this,arguments)}}()}const $e="bearerTokenAuthenticationPolicy";function k(Me,Pe){return U.apply(this,arguments)}function U(){return(U=(0,Vt.A)(function*(Me,Pe){try{return[yield Pe(Me),void 0]}catch(Ye){if(Ct(Ye)&&Ye.response)return[Ye.response,Ye];throw Ye}})).apply(this,arguments)}function H(Me){return j.apply(this,arguments)}function j(){return(j=(0,Vt.A)(function*(Me){const{scopes:Pe,getAccessToken:Ye,request:et}=Me,rt={abortSignal:et.abortSignal,tracingOptions:et.tracingOptions,enableCae:!0},zt=yield Ye(Pe,rt);zt&&Me.request.headers.set("Authorization","Bearer ".concat(zt.token))})).apply(this,arguments)}function ge(Me){return 401===Me.status&&Me.headers.has("WWW-Authenticate")}function Ie(Me,Pe){return ve.apply(this,arguments)}function ve(){return(ve=(0,Vt.A)(function*(Me,Pe){var Ye;const{scopes:et}=Me,rt=yield Me.getAccessToken(et,{enableCae:!0,claims:Pe});return!!rt&&(Me.request.headers.set("Authorization","".concat(null!==(Ye=rt.tokenType)&&void 0!==Ye?Ye:"Bearer"," ").concat(rt.token)),!0)})).apply(this,arguments)}function Ne(Me){var Pe,Ye,et;const{credential:rt,scopes:zt,challengeCallbacks:Ut}=Me,In=Me.logger||Je,Bn={authorizeRequest:null!==(Ye=null===(Pe=null==Ut?void 0:Ut.authorizeRequest)||void 0===Pe?void 0:Pe.bind(Ut))&&void 0!==Ye?Ye:H,authorizeRequestOnChallenge:null===(et=null==Ut?void 0:Ut.authorizeRequestOnChallenge)||void 0===et?void 0:et.bind(Ut)},$n=rt?Te(rt):()=>Promise.resolve(null);return{name:$e,sendRequest:(Kt,Ft)=>(0,Vt.A)(function*(){if(!Kt.url.toLowerCase().startsWith("https://"))throw new Error("Bearer token authentication is not permitted for non-TLS protected (non-https) URLs.");let nr,pr,Zs;if(yield Bn.authorizeRequest({scopes:Array.isArray(zt)?zt:[zt],request:Kt,getAccessToken:$n,logger:In}),[nr,pr]=yield k(Kt,Ft),ge(nr)){let Gi=Re(nr.headers.get("WWW-Authenticate"));if(Gi){let Na;try{Na=atob(Gi)}catch(ci){return In.warning('The WWW-Authenticate header contains "claims" that cannot be parsed. Unable to perform the Continuous Access Evaluation authentication flow. Unparsable claims: '.concat(Gi)),nr}Zs=yield Ie({scopes:Array.isArray(zt)?zt:[zt],response:nr,request:Kt,getAccessToken:$n,logger:In},Na),Zs&&([nr,pr]=yield k(Kt,Ft))}else if(Bn.authorizeRequestOnChallenge&&(Zs=yield Bn.authorizeRequestOnChallenge({scopes:Array.isArray(zt)?zt:[zt],request:Kt,response:nr,getAccessToken:$n,logger:In}),Zs&&([nr,pr]=yield k(Kt,Ft)),ge(nr)&&(Gi=Re(nr.headers.get("WWW-Authenticate")),Gi))){let Na;try{Na=atob(Gi)}catch(ci){return In.warning('The WWW-Authenticate header contains "claims" that cannot be parsed. Unable to perform the Continuous Access Evaluation authentication flow. Unparsable claims: '.concat(Gi)),nr}Zs=yield Ie({scopes:Array.isArray(zt)?zt:[zt],response:nr,request:Kt,getAccessToken:$n,logger:In},Na),Zs&&([nr,pr]=yield k(Kt,Ft))}}if(pr)throw pr;return nr})()}}function Re(Me){var Pe;return Me?null===(Pe=function He(Me){const Pe=/(\w+)\s+((?:\w+=(?:"[^"]*"|[^,]*),?\s*)+)/g,Ye=/(\w+)="([^"]*)"/g,et=[];let rt;for(;null!==(rt=Pe.exec(Me));){const zt=rt[1],Ut=rt[2],In={};let Bn;for(;null!==(Bn=Ye.exec(Ut));)In[Bn[1]]=Bn[2];et.push({scheme:zt,params:In})}return et}(Me).find(et=>"Bearer"===et.scheme&&et.params.claims&&"insufficient_claims"===et.params.error))||void 0===Pe?void 0:Pe.params.claims:void 0}const Fe="ndJsonPolicy";function ut(){return{name:Fe,sendRequest:(Me,Pe)=>(0,Vt.A)(function*(){if("string"==typeof Me.body&&Me.body.startsWith("[")){const Ye=JSON.parse(Me.body);Array.isArray(Ye)&&(Me.body=Ye.map(et=>JSON.stringify(et)+"\n").join(""))}return Pe(Me)})()}}const mt="auxiliaryAuthenticationHeaderPolicy",jt="x-ms-authorization-auxiliary";function Zt(Me){return Tn.apply(this,arguments)}function Tn(){return(Tn=(0,Vt.A)(function*(Me){var Pe,Ye;const{scopes:et,getAccessToken:rt,request:zt}=Me,Ut={abortSignal:zt.abortSignal,tracingOptions:zt.tracingOptions};return null!==(Ye=null===(Pe=yield rt(et,Ut))||void 0===Pe?void 0:Pe.token)&&void 0!==Ye?Ye:""})).apply(this,arguments)}function mn(Me){const{credentials:Pe,scopes:Ye}=Me,et=Me.logger||Je,rt=new WeakMap;return{name:mt,sendRequest:(zt,Ut)=>(0,Vt.A)(function*(){if(!zt.url.toLowerCase().startsWith("https://"))throw new Error("Bearer token authentication for auxiliary header is not permitted for non-TLS protected (non-https) URLs.");if(!Pe||0===Pe.length)return et.info("".concat(mt," header will not be set due to empty credentials.")),Ut(zt);const In=[];for(const $n of Pe){let Kt=rt.get($n);Kt||(Kt=Te($n),rt.set($n,Kt)),In.push(Zt({scopes:Array.isArray(Ye)?Ye:[Ye],request:zt,getAccessToken:Kt,logger:et}))}const Bn=(yield Promise.all(In)).filter($n=>!!$n);return 0===Bn.length?(et.warning("None of the auxiliary tokens are valid. ".concat(jt," header will not be set.")),Ut(zt)):(zt.headers.set(jt,Bn.map($n=>"Bearer ".concat($n)).join(", ")),Ut(zt))})()}}},838:(Xt,ft,Se)=>{Se.d(ft,{y:()=>Ke});const je={span:Symbol.for("@azure/core-tracing span"),namespace:Symbol.for("@azure/core-tracing namespace")};function nt(Qe={}){let Be=new st(Qe.parentContext);return Qe.span&&(Be=Be.setValue(je.span,Qe.span)),Qe.namespace&&(Be=Be.setValue(je.namespace,Qe.namespace)),Be}class st{constructor(Be){this._contextMap=Be instanceof st?new Map(Be._contextMap):new Map}setValue(Be,_t){const tt=new st(this);return tt._contextMap.set(Be,_t),tt}getValue(Be){return this._contextMap.get(Be)}deleteValue(Be){const _t=new st(this);return _t._contextMap.delete(Be),_t}}const Je={instrumenterImplementation:void 0};function pe(){return Je.instrumenterImplementation||(Je.instrumenterImplementation=function Ue(){return{createRequestHeaders:()=>({}),parseTraceparentHeader:()=>{},startSpan:(Qe,Be)=>({span:{end:()=>{},isRecording:()=>!1,recordException:()=>{},setAttribute:()=>{},setStatus:()=>{},addEvent:()=>{}},tracingContext:nt({parentContext:Be.tracingContext})}),withContext:(Qe,Be,..._t)=>Be(..._t)}}()),Je.instrumenterImplementation}var yt=Se(467);function Ke(Qe){const{namespace:Be,packageName:_t,packageVersion:tt}=Qe;function Nt(xe,it,gt){var At;const ot=pe().startSpan(xe,Object.assign(Object.assign({},gt),{packageName:_t,packageVersion:tt,tracingContext:null===(At=null==it?void 0:it.tracingOptions)||void 0===At?void 0:At.tracingContext}));let kt=ot.tracingContext;const fn=ot.span;return kt.getValue(je.namespace)||(kt=kt.setValue(je.namespace,Be)),fn.setAttribute("az.namespace",kt.getValue(je.namespace)),{span:fn,updatedOptions:Object.assign({},it,{tracingOptions:Object.assign(Object.assign({},null==it?void 0:it.tracingOptions),{tracingContext:kt})})}}function Mt(){return(Mt=(0,yt.A)(function*(xe,it,gt,At){const{span:ot,updatedOptions:kt}=Nt(xe,it,At);try{const fn=yield pt(kt.tracingOptions.tracingContext,()=>Promise.resolve(gt(kt,ot)));return ot.setStatus({status:"success"}),fn}catch(fn){throw ot.setStatus({status:"error",error:fn}),fn}finally{ot.end()}})).apply(this,arguments)}function pt(xe,it,...gt){return pe().withContext(xe,it,...gt)}return{startSpan:Nt,withSpan:function bt(xe,it,gt,At){return Mt.apply(this,arguments)},withContext:pt,parseTraceparentHeader:function Ve(xe){return pe().parseTraceparentHeader(xe)},createRequestHeaders:function Xe(xe){return pe().createRequestHeaders(xe)}}}},124:(Xt,ft,Se)=>{Se.r(ft),Se.d(ft,{calculateRetryDelay:()=>tt,cancelablePromiseRace:()=>st,computeSha256Hash:()=>Nt,computeSha256Hmac:()=>bt,createAbortablePromise:()=>Ue,delay:()=>pe,getErrorMessage:()=>Ke,getRandomIntegerInclusive:()=>Mt,isBrowser:()=>xe,isBun:()=>it,isDefined:()=>Qe,isDeno:()=>gt,isError:()=>pt,isNode:()=>At,isNodeLike:()=>ot,isNodeRuntime:()=>kt,isObject:()=>Ve,isObjectWithProperties:()=>Be,isReactNative:()=>fn,isWebWorker:()=>Yt,objectHasProperty:()=>_t,randomUUID:()=>Xe,stringToUint8Array:()=>Tt,uint8ArrayToString:()=>Vt});var je=Se(403),nt=Se(467);function st(lt,ke){return Je.apply(this,arguments)}function Je(){return(Je=(0,nt.A)(function*(lt,ke){var de,De;const le=new AbortController;function we(){le.abort()}null===(de=null==ke?void 0:ke.abortSignal)||void 0===de||de.addEventListener("abort",we);try{return yield Promise.race(lt.map(ye=>ye({abortSignal:le.signal})))}finally{le.abort(),null===(De=null==ke?void 0:ke.abortSignal)||void 0===De||De.removeEventListener("abort",we)}})).apply(this,arguments)}class ct extends Error{constructor(ke){super(ke),this.name="AbortError"}}function Ue(lt,ke){const{cleanupBeforeAbort:de,abortSignal:De,abortErrorMsg:le}=null!=ke?ke:{};return new Promise((we,ye)=>{function Oe(){ye(new ct(null!=le?le:"The operation was aborted."))}function Y(){null==De||De.removeEventListener("abort",K)}function K(){null==de||de(),Y(),Oe()}if(null!=De&&De.aborted)return Oe();try{lt(q=>{Y(),we(q)},q=>{Y(),ye(q)})}catch(q){ye(q)}null==De||De.addEventListener("abort",K)})}const se="The delay was aborted.";function pe(lt,ke){let de;const{abortSignal:De,abortErrorMsg:le}=null!=ke?ke:{};return Ue(we=>{de=setTimeout(we,lt)},{cleanupBeforeAbort:()=>clearTimeout(de),abortSignal:De,abortErrorMsg:null!=le?le:se})}function Ke(lt){if((0,je.bJ)(lt))return lt.message;{let ke;try{ke="object"==typeof lt&&lt?JSON.stringify(lt):String(lt)}catch(de){ke="[unable to stringify input]"}return"Unknown error ".concat(ke)}}function Qe(lt){return typeof lt<"u"&&null!==lt}function Be(lt,ke){if(!Qe(lt)||"object"!=typeof lt)return!1;for(const de of ke)if(!_t(lt,de))return!1;return!0}function _t(lt,ke){return Qe(lt)&&"object"==typeof lt&&ke in lt}function tt(lt,ke){return je.gE(lt,ke)}function Nt(lt,ke){return je.Z4(lt,ke)}function bt(lt,ke,de){return je.g8(lt,ke,de)}function Mt(lt,ke){return je.Wq(lt,ke)}function pt(lt){return je.bJ(lt)}function Ve(lt){return je.Gv(lt)}function Xe(){return je.N4()}const xe=je.Bd,it=je.Qg,gt=je.N6,At=je.qx,ot=je.qx,kt=je.tX,fn=je.lV,Yt=je.p7;function Vt(lt,ke){return je.SW(lt,ke)}function Tt(lt,ke){return je.Al(lt,ke)}},992:(Xt,ft,Se)=>{Se.d(ft,{KV:()=>Ue});const nt=(0,Se(899).MX)({logLevelEnvVarName:"AZURE_LOG_LEVEL",namespace:"azure"});function Ue(se){return nt.createClientLogger(se)}},20:(Xt,ft,Se)=>{Se.d(ft,{l:()=>je});class je extends Error{constructor(st){super(st),this.name="AbortError"}}},875:(Xt,ft,Se)=>{Se.d(ft,{M:()=>je,o:()=>nt});const je="0.3.0",nt=3},72:(Xt,ft,Se)=>{function je(ct){return ct.toLowerCase()}Se.d(ft,{N:()=>Je});class st{constructor(Ue){if(this._headersMap=new Map,Ue)for(const se of Object.keys(Ue))this.set(se,Ue[se])}set(Ue,se){this._headersMap.set(je(Ue),{name:Ue,value:String(se).trim()})}get(Ue){var se;return null===(se=this._headersMap.get(je(Ue)))||void 0===se?void 0:se.value}has(Ue){return this._headersMap.has(je(Ue))}delete(Ue){this._headersMap.delete(je(Ue))}toJSON(Ue={}){const se={};if(Ue.preserveCase)for(const pe of this._headersMap.values())se[pe.name]=pe.value;else for(const[pe,yt]of this._headersMap)se[pe]=yt.value;return se}toString(){return JSON.stringify(this.toJSON({preserveCase:!0}))}[Symbol.iterator](){return function*nt(ct){for(const Ue of ct.values())yield[Ue.name,Ue.value]}(this._headersMap)}}function Je(ct){return new st(ct)}},201:(Xt,ft,Se)=>{Se.d(ft,{pj:()=>tt,fl:()=>de,O8:()=>yt,Nc:()=>st.N,G6:()=>Ue,KU:()=>Wi,T0:()=>Nt});var je=Se(20),st=(Se(899),Se(72)),Je=Se(233);class ct{constructor(he){var Te,$e,k,U,H,j,ge;this.url=he.url,this.body=he.body,this.headers=null!==(Te=he.headers)&&void 0!==Te?Te:(0,st.N)(),this.method=null!==($e=he.method)&&void 0!==$e?$e:"GET",this.timeout=null!==(k=he.timeout)&&void 0!==k?k:0,this.multipartBody=he.multipartBody,this.formData=he.formData,this.disableKeepAlive=null!==(U=he.disableKeepAlive)&&void 0!==U&&U,this.proxySettings=he.proxySettings,this.streamResponseStatusCodes=he.streamResponseStatusCodes,this.withCredentials=null!==(H=he.withCredentials)&&void 0!==H&&H,this.abortSignal=he.abortSignal,this.onUploadProgress=he.onUploadProgress,this.onDownloadProgress=he.onDownloadProgress,this.requestId=he.requestId||(0,Je.N)(),this.allowInsecureConnection=null!==(j=he.allowInsecureConnection)&&void 0!==j&&j,this.enableBrowserStreams=null!==(ge=he.enableBrowserStreams)&&void 0!==ge&&ge,this.requestOverrides=he.requestOverrides,this.authSchemes=he.authSchemes}}function Ue(ce){return new ct(ce)}const se=new Set(["Deserialize","Serialize","Retry","Sign"]);class pe{constructor(he){var Te;this._policies=[],this._policies=null!==(Te=null==he?void 0:he.slice(0))&&void 0!==Te?Te:[],this._orderedPolicies=void 0}addPolicy(he,Te={}){if(Te.phase&&Te.afterPhase)throw new Error("Policies inside a phase cannot specify afterPhase.");if(Te.phase&&!se.has(Te.phase))throw new Error("Invalid phase name: ".concat(Te.phase));if(Te.afterPhase&&!se.has(Te.afterPhase))throw new Error("Invalid afterPhase name: ".concat(Te.afterPhase));this._policies.push({policy:he,options:Te}),this._orderedPolicies=void 0}removePolicy(he){const Te=[];return this._policies=this._policies.filter($e=>!(he.name&&$e.policy.name===he.name||he.phase&&$e.options.phase===he.phase)||(Te.push($e.policy),!1)),this._orderedPolicies=void 0,Te}sendRequest(he,Te){return this.getOrderedPolicies().reduceRight((U,H)=>j=>H.sendRequest(j,U),U=>he.sendRequest(U))(Te)}getOrderedPolicies(){return this._orderedPolicies||(this._orderedPolicies=this.orderPolicies()),this._orderedPolicies}clone(){return new pe(this._policies)}static create(){return new pe}orderPolicies(){const he=[],Te=new Map;function $e(Fe){return{name:Fe,policies:new Set,hasRun:!1,hasAfterPolicies:!1}}const k=$e("Serialize"),U=$e("None"),H=$e("Deserialize"),j=$e("Retry"),ge=$e("Sign"),Ie=[k,U,H,j,ge];function ve(Fe){return"Retry"===Fe?j:"Serialize"===Fe?k:"Deserialize"===Fe?H:"Sign"===Fe?ge:U}for(const Fe of this._policies){const ut=Fe.policy,mt=Fe.options,jt=ut.name;if(Te.has(jt))throw new Error("Duplicate policy names not allowed in pipeline");const Zt={policy:ut,dependsOn:new Set,dependants:new Set};mt.afterPhase&&(Zt.afterPhase=ve(mt.afterPhase),Zt.afterPhase.hasAfterPolicies=!0),Te.set(jt,Zt),ve(mt.phase).policies.add(Zt)}for(const Fe of this._policies){const{policy:ut,options:mt}=Fe,jt=ut.name,Zt=Te.get(jt);if(!Zt)throw new Error("Missing node for policy ".concat(jt));if(mt.afterPolicies)for(const Tn of mt.afterPolicies){const mn=Te.get(Tn);mn&&(Zt.dependsOn.add(mn),mn.dependants.add(Zt))}if(mt.beforePolicies)for(const Tn of mt.beforePolicies){const mn=Te.get(Tn);mn&&(mn.dependsOn.add(Zt),Zt.dependants.add(mn))}}function Ne(Fe){Fe.hasRun=!0;for(const ut of Fe.policies)if((!ut.afterPhase||ut.afterPhase.hasRun&&!ut.afterPhase.policies.size)&&0===ut.dependsOn.size){he.push(ut.policy);for(const mt of ut.dependants)mt.dependsOn.delete(ut);Te.delete(ut.policy.name),Fe.policies.delete(ut)}}function He(){for(const Fe of Ie){if(Ne(Fe),Fe.policies.size>0&&Fe!==U)return void(U.hasRun||Ne(U));Fe.hasAfterPolicies&&Ne(U)}}let Re=0;for(;Te.size>0;){Re++;const Fe=he.length;if(He(),he.length<=Fe&&Re>1)throw new Error("Cannot satisfy policy dependencies due to requirements cycle.")}return he}}function yt(){return pe.create()}var Ke=Se(377);const Qe=Symbol(),_t=new(Se(956).I);let tt=(()=>{class ce extends Error{constructor(Te,$e={}){super(Te),this.name="RestError",this.code=$e.code,this.statusCode=$e.statusCode,Object.defineProperty(this,"request",{value:$e.request,enumerable:!1}),Object.defineProperty(this,"response",{value:$e.response,enumerable:!1}),Object.defineProperty(this,Qe,{value:()=>"RestError: ".concat(this.message," \n ").concat(_t.sanitize(Object.assign(Object.assign({},this),{request:this.request,response:this.response}))),enumerable:!1}),Object.setPrototypeOf(this,ce.prototype)}}return ce.REQUEST_SEND_ERROR="REQUEST_SEND_ERROR",ce.PARSE_ERROR="PARSE_ERROR",ce})();function Nt(ce){return ce instanceof tt||(0,Ke.b)(ce)&&"RestError"===ce.name}var bt=Se(110),Mt=Se(467),pt=Se(509);class Xe{sendRequest(he){return(0,Mt.A)(function*(){if("https:"!==new URL(he.url).protocol&&!he.allowInsecureConnection)throw new Error("Cannot connect to ".concat(he.url," while allowInsecureConnection is false."));if(he.proxySettings)throw new Error("HTTP proxy is not supported in browser environment");try{return yield function xe(ce){return it.apply(this,arguments)}(he)}catch(k){throw function kt(ce,he){var Te;return ce&&"AbortError"===(null==ce?void 0:ce.name)?ce:new tt("Error sending request: ".concat(ce.message),{code:null!==(Te=null==ce?void 0:ce.code)&&void 0!==Te?Te:tt.REQUEST_SEND_ERROR,request:he})}(k,he)}})()}}function it(){return it=(0,Mt.A)(function*(ce){const{abortController:he,abortControllerCleanup:Te}=function ot(ce){const he=new AbortController;let Te,$e;if(ce.abortSignal){if(ce.abortSignal.aborted)throw new je.l("The operation was aborted. Request has already been canceled.");$e=k=>{"abort"===k.type&&he.abort()},ce.abortSignal.addEventListener("abort",$e),Te=()=>{var k;$e&&(null===(k=ce.abortSignal)||void 0===k||k.removeEventListener("abort",$e))}}return ce.timeout>0&&setTimeout(()=>{he.abort()},ce.timeout),{abortController:he,abortControllerCleanup:Te}}(ce);try{const $e=function fn(ce){const he=new Headers;for(const[Te,$e]of ce)he.append(Te,$e);return he}(ce.headers),{streaming:k,body:U}=function Vt(ce){const he="function"==typeof ce.body?ce.body():ce.body;if((0,pt.vB)(he))throw new Error("Node streams are not supported in browser environment.");return(0,pt.xU)(he)?{streaming:!0,body:Tt(he,{onProgress:ce.onUploadProgress})}:{streaming:!1,body:he}}(ce),H=Object.assign(Object.assign({body:U,method:ce.method,headers:$e,signal:he.signal},"credentials"in Request.prototype?{credentials:ce.withCredentials?"include":"same-origin"}:{}),"cache"in Request.prototype?{cache:"no-store"}:{});k&&(H.duplex="half");const j=yield fetch(ce.url,Object.assign(Object.assign({},H),ce.requestOverrides));return function Ve(ce){return("function"==typeof Blob||"object"==typeof Blob)&&ce instanceof Blob}(ce.body)&&ce.onUploadProgress&&ce.onUploadProgress({loadedBytes:ce.body.size}),function gt(ce,he,Te){return At.apply(this,arguments)}(j,ce,Te)}catch($e){throw null==Te||Te(),$e}}),it.apply(this,arguments)}function At(){return(At=(0,Mt.A)(function*(ce,he,Te){var $e,k;const U=function Yt(ce){const he=(0,st.N)();for(const[Te,$e]of ce.headers)he.set(Te,$e);return he}(ce),H={request:he,headers:U,status:ce.status},j=(0,pt.xU)(ce.body)?Tt(ce.body,{onProgress:he.onDownloadProgress,onEnd:Te}):ce.body;if(null!==($e=he.streamResponseStatusCodes)&&void 0!==$e&&$e.has(Number.POSITIVE_INFINITY)||null!==(k=he.streamResponseStatusCodes)&&void 0!==k&&k.has(H.status))if(he.enableBrowserStreams)H.browserStreamBody=null!=j?j:void 0;else{const ge=new Response(j);H.blobBody=ge.blob(),null==Te||Te()}else{const ge=new Response(j);H.bodyAsText=yield ge.text(),null==Te||Te()}return H})).apply(this,arguments)}function Tt(ce,he={}){let Te=0;const{onProgress:$e,onEnd:k}=he;if(function ke(ce){return void 0!==ce.pipeThrough&&void 0!==self.TransformStream}(ce))return ce.pipeThrough(new TransformStream({transform(U,H){null!==U?(H.enqueue(U),Te+=U.length,$e&&$e({loadedBytes:Te})):H.terminate()},flush(){null==k||k()}}));{const U=ce.getReader();return new ReadableStream({pull:H=>(0,Mt.A)(function*(){var j;const{done:ge,value:Ie}=yield U.read();if(ge||!Ie)return null==k||k(),H.close(),void U.releaseLock();Te+=null!==(j=null==Ie?void 0:Ie.length)&&void 0!==j?j:0,H.enqueue(Ie),$e&&$e({loadedBytes:Te})})(),cancel:H=>(null==k||k(),U.cancel(H))})}}function de(){return function lt(){return new Xe}()}var De=Se(885),le=Se(767),we=Se(489),ye=Se(879),Oe=Se(978),Y=Se(121),K=Se(674),q=Se(248),ie=Se(970),oe=Se(70),F=Se(535);const J="ApiVersionPolicy";var ne=Se(784);let Z=!1;function We(ce,he){if(!ce.url.toLowerCase().startsWith("https://")){if(!function ee(ce,he){if(he.allowInsecureConnection&&ce.allowInsecureConnection){const Te=new URL(ce.url);if("localhost"===Te.hostname||"127.0.0.1"===Te.hostname)return!0}return!1}(ce,he))throw new Error("Authentication is not permitted for non-TLS protected (non-https) URLs when allowInsecureConnection is false.");!function re(){const ce="Sending token over insecure transport. Assume any token issued is compromised.";ne.v.warning(ce),"function"==typeof(null==process?void 0:process.emitWarning)&&!Z&&(Z=!0,process.emitWarning(ce))}()}}const Ge="apiKeyAuthenticationPolicy",Ze="bearerAuthenticationPolicy",Gt="bearerAuthenticationPolicy",x="oauth2AuthenticationPolicy";let me;function Le(ce,he){if(ce.headers){const Te=Object.keys(ce.headers).find($e=>$e.toLowerCase()===he.toLowerCase());if(Te)return ce.headers[Te]}}function Et(ce){return JSON.stringify(ce)}function _n(ce){var he;const Te=function Pt(ce){const he=Le(ce,"content-type");if(he)return he;if(null===ce.contentType)return;if(ce.contentType)return ce.contentType;const{body:Te}=ce;return null!=Te?"string"==typeof Te||"number"==typeof Te||"boolean"==typeof Te?"text/plain; charset=UTF-8":Te instanceof Blob?Te.type||"application/octet-stream":(0,pt.CY)(Te)?"application/octet-stream":"application/json":void 0}(ce),$e=function Ct(ce){var he;const Te=Le(ce,"content-disposition");if(Te)return Te;if(void 0===ce.dispositionType&&void 0===ce.name&&void 0===ce.filename)return;let U,k=null!==(he=ce.dispositionType)&&void 0!==he?he:"form-data";if(ce.name&&(k+="; name=".concat(Et(ce.name))),ce.filename)U=ce.filename;else if(typeof File<"u"&&ce.body instanceof File){const H=ce.body.name;""!==H&&(U=H)}return U&&(k+="; filename=".concat(Et(U))),k}(ce),k=(0,st.N)(null!==(he=ce.headers)&&void 0!==he?he:{});Te&&k.set("content-type",Te),$e&&k.set("content-disposition",$e);const U=function Ht(ce,he){if(void 0===ce)return new Uint8Array([]);if((0,pt.CY)(ce))return ce;if("string"==typeof ce||"number"==typeof ce||"boolean"==typeof ce)return(0,bt.Al)(String(ce),"utf-8");if(he&&/application\/(.+\+)?json(;.+)?/i.test(String(he)))return(0,bt.Al)(JSON.stringify(ce),"utf-8");throw new tt("Unsupported body/content-type combination: ".concat(ce,", ").concat(he))}(ce.body,Te);return{headers:k,body:U}}function Ln(ce){return{parts:ce.map(_n)}}function Jn(ce,he,Te){return or.apply(this,arguments)}function or(){return(or=(0,Mt.A)(function*(ce,he,Te,$e={},k){var U;const H=null!=k?k:function be(){return me||(me=de()),me}(),j=function $o(ce,he,Te={}){var $e,k,U;const H=function $i(ce={}){var he,Te,$e;return null!==($e=null!==(he=ce.contentType)&&void 0!==he?he:null===(Te=ce.headers)||void 0===Te?void 0:Te["content-type"])&&void 0!==$e?$e:function Ro(ce){if(ArrayBuffer.isView(ce))return"application/octet-stream";if("string"==typeof ce)try{return JSON.parse(ce),"application/json"}catch(he){return}return"application/json"}(ce.body)}(Te),{body:j,multipartBody:ge}=function Qs(ce,he=""){if(void 0===ce)return{body:void 0};if(typeof FormData<"u"&&ce instanceof FormData)return{body:ce};if((0,pt.H1)(ce))return{body:ce};if(ArrayBuffer.isView(ce))return{body:ce instanceof Uint8Array?ce:JSON.stringify(ce)};switch(he.split(";")[0]){case"application/json":return{body:JSON.stringify(ce)};case"multipart/form-data":return Array.isArray(ce)?{multipartBody:Ln(ce)}:{body:JSON.stringify(ce)};case"text/plain":return{body:String(ce)};default:return"string"==typeof ce?{body:ce}:{body:JSON.stringify(ce)}}}(Te.body,H),Ie=void 0!==j||void 0!==ge;return Ue({url:he,method:ce,body:j,multipartBody:ge,headers:(0,st.N)(Object.assign(Object.assign(Object.assign({},Te.headers?Te.headers:{}),{accept:null!==(U=null!==($e=Te.accept)&&void 0!==$e?$e:null===(k=Te.headers)||void 0===k?void 0:k.accept)&&void 0!==U?U:"application/json"}),Ie&&H&&{"content-type":H})),allowInsecureConnection:Te.allowInsecureConnection,abortSignal:Te.abortSignal,onUploadProgress:Te.onUploadProgress,onDownloadProgress:Te.onDownloadProgress,timeout:Te.timeout,enableBrowserStreams:!0,streamResponseStatusCodes:Te.responseAsStream?new Set([Number.POSITIVE_INFINITY]):void 0})}(ce,he,$e);try{const ge=yield Te.sendRequest(H,j),Ie=ge.headers.toJSON(),ve=null!==(U=ge.readableStreamBody)&&void 0!==U?U:ge.browserStreamBody,Ne=$e.responseAsStream||void 0!==ve?void 0:function Hi(ce){var he,Te;const k=(null!==(he=ce.headers.get("content-type"))&&void 0!==he?he:"").split(";")[0],U=null!==(Te=ce.bodyAsText)&&void 0!==Te?Te:"";if("text/plain"===k)return String(U);try{return U?JSON.parse(U):void 0}catch(H){if("application/json"===k)throw function Xs(ce,he){var Te;const $e='Error "'.concat(he,'" occurred while parsing the response body - ').concat(ce.bodyAsText,"."),k=null!==(Te=he.code)&&void 0!==Te?Te:tt.PARSE_ERROR;return new tt($e,{code:k,statusCode:ce.status,request:ce.request,response:ce})}(ce,H);return String(U)}}(ge),He=null!=ve?ve:Ne;return null!=$e&&$e.onResponse&&$e.onResponse(Object.assign(Object.assign({},ge),{request:j,rawHeaders:Ie,parsedBody:Ne})),{request:j,headers:Ie,status:"".concat(ge.status),body:He}}catch(ge){if(Nt(ge)&&ge.response&&$e.onResponse){const{response:Ie}=ge,ve=Ie.headers.toJSON();null==$e||$e.onResponse(Object.assign(Object.assign({},Ie),{request:j,rawHeaders:ve}),ge)}throw ge}})).apply(this,arguments)}function zi(ce){const he=ce.value;return void 0!==he&&void 0!==he.toString&&"function"==typeof he.toString}function qi(ce,he,Te,$e){let k,U;k="pipeDelimited"===Te?"|":"spaceDelimited"===Te?"%20":",",U=Array.isArray($e)?$e:"object"==typeof $e&&$e.toString===Object.prototype.toString?Object.entries($e).flat():[$e];const H=U.map(j=>{if(null==j)return"";if(!j.toString||"function"!=typeof j.toString)throw new Error("Query parameters must be able to be represented as string, ".concat(ce," can't"));const ge=void 0!==j.toISOString?j.toISOString():j.toString();return he?ge:encodeURIComponent(ge)}).join(k);return"".concat(he?ce:encodeURIComponent(ce),"=").concat(H)}function Ys(ce,he,Te){return ce&&he?ce.split(he).join(Te||""):ce}function Wi(ce,he={}){var Te,$e,k;const U=null!==(Te=he.pipeline)&&void 0!==Te?Te:function ue(ce={}){const he=function z(ce){const he=yt();return K.qx&&(ce.agent&&he.addPolicy((0,ie.e)(ce.agent)),ce.tlsOptions&&he.addPolicy((0,oe.i)(ce.tlsOptions)),he.addPolicy((0,q.Ll)(ce.proxyOptions)),he.addPolicy((0,ye.r)())),he.addPolicy((0,Y.j)(),{beforePolicies:[F.u]}),he.addPolicy((0,we.z)(ce.userAgentOptions)),he.addPolicy((0,F.J)(),{afterPhase:"Deserialize"}),he.addPolicy((0,Oe.u)(ce.retryOptions),{phase:"Retry"}),K.qx&&he.addPolicy((0,le.x)(ce.redirectOptions),{afterPhase:"Retry"}),he.addPolicy((0,De.r)(ce.loggingOptions),{afterPhase:"Sign"}),he}(ce);he.addPolicy(function fe(ce){return{name:J,sendRequest:(he,Te)=>{const $e=new URL(he.url);return!$e.searchParams.get("api-version")&&ce.apiVersion&&(he.url="".concat(he.url).concat(Array.from($e.searchParams.keys()).length>0?"&":"?","api-version=").concat(ce.apiVersion)),Te(he)}}}(ce));const{credential:Te,authSchemes:$e,allowInsecureConnection:k}=ce;return Te&&(function G(ce){return"key"in ce}(Te)?he.addPolicy(function qe(ce){return{name:Ge,sendRequest:(he,Te)=>(0,Mt.A)(function*(){var $e,k;We(he,ce);const U=null===(k=null!==($e=he.authSchemes)&&void 0!==$e?$e:ce.authSchemes)||void 0===k?void 0:k.find(H=>"apiKey"===H.kind);if(!U)return Te(he);if("header"!==U.apiKeyLocation)throw new Error("Unsupported API key location: ".concat(U.apiKeyLocation));return he.headers.set(U.name,ce.credential.key),Te(he)})()}}({authSchemes:$e,credential:Te,allowInsecureConnection:k})):function W(ce){return"username"in ce&&"password"in ce}(Te)?he.addPolicy(function Wt(ce){return{name:Ze,sendRequest:(he,Te)=>(0,Mt.A)(function*(){var $e,k;if(We(he,ce),!(null===(k=null!==($e=he.authSchemes)&&void 0!==$e?$e:ce.authSchemes)||void 0===k?void 0:k.find(Ie=>"http"===Ie.kind&&"basic"===Ie.scheme)))return Te(he);const{username:H,password:j}=ce.credential,ge=(0,bt.SW)((0,bt.Al)("".concat(H,":").concat(j),"utf-8"),"base64");return he.headers.set("Authorization","Basic ".concat(ge)),Te(he)})()}}({authSchemes:$e,credential:Te,allowInsecureConnection:k})):function B(ce){return"getBearerToken"in ce}(Te)?he.addPolicy(function X(ce){return{name:Gt,sendRequest:(he,Te)=>(0,Mt.A)(function*(){var $e,k;if(We(he,ce),!(null===(k=null!==($e=he.authSchemes)&&void 0!==$e?$e:ce.authSchemes)||void 0===k?void 0:k.find(j=>"http"===j.kind&&"bearer"===j.scheme)))return Te(he);const H=yield ce.credential.getBearerToken({abortSignal:he.abortSignal});return he.headers.set("Authorization","Bearer ".concat(H)),Te(he)})()}}({authSchemes:$e,credential:Te,allowInsecureConnection:k})):function _e(ce){return"getOAuth2Token"in ce}(Te)&&he.addPolicy(function te(ce){return{name:x,sendRequest:(he,Te)=>(0,Mt.A)(function*(){var $e,k;We(he,ce);const U=null===(k=null!==($e=he.authSchemes)&&void 0!==$e?$e:ce.authSchemes)||void 0===k?void 0:k.find(j=>"oauth2"===j.kind);if(!U)return Te(he);const H=yield ce.credential.getOAuth2Token(U.flows,{abortSignal:he.abortSignal});return he.headers.set("Authorization","Bearer ".concat(H)),Te(he)})()}}({authSchemes:$e,credential:Te,allowInsecureConnection:k}))),he}(he);if(null!==($e=he.additionalPolicies)&&void 0!==$e&&$e.length)for(const{policy:ve,position:Ne}of he.additionalPolicies)U.addPolicy(ve,{afterPhase:"perRetry"===Ne?"Sign":void 0});const{allowInsecureConnection:H,httpClient:j}=he,ge=null!==(k=he.endpoint)&&void 0!==k?k:ce,Ie=(ve,...Ne)=>{const He=Re=>function ao(ce,he,Te,$e={}){if(he.startsWith("https://")||he.startsWith("http://"))return he;ce=function Qn(ce,he){var Te;if(!he.pathParameters)return ce;const $e=he.pathParameters;for(const[k,U]of Object.entries($e)){if(null==U)throw new Error("Path parameters ".concat(k," must not be undefined or null"));if(!U.toString||"function"!=typeof U.toString)throw new Error("Path parameters must be able to be represented as string, ".concat(k," can't"));let H=void 0!==U.toISOString?U.toISOString():String(U);he.skipUrlEncoding||(H=encodeURIComponent(U)),ce=null!==(Te=Ys(ce,"{".concat(k,"}"),H))&&void 0!==Te?Te:""}return ce}(ce,$e),he=function ms(ce,he,Te={}){var $e;for(const k of he){const U="object"==typeof k&&null!==($e=k.allowReserved)&&void 0!==$e&&$e;let H="object"==typeof k?k.value:k;!Te.skipUrlEncoding&&!U&&(H=encodeURIComponent(H)),ce=ce.replace(/\{[\w-]+\}/,String(H))}return ce}(he,Te,$e);const k=function gs(ce,he={}){var Te,$e,k,U;if(!he.queryParameters)return ce;const H=new URL(ce),j=he.queryParameters,ge=[];for(const Ie of Object.keys(j)){const ve=j[Ie];if(null==ve)continue;const Ne=zi(ve),He=Ne?ve.value:ve,Re=!(!Ne||null===(Te=ve.explode)||void 0===Te)&&Te,Fe=Ne&&ve.style?ve.style:"form";if(Re)if(Array.isArray(He))for(const ut of He)ge.push(qi(Ie,null!==($e=he.skipUrlEncoding)&&void 0!==$e&&$e,Fe,ut));else{if("object"!=typeof He)throw new Error("explode can only be set to true for objects and arrays");for(const[ut,mt]of Object.entries(He))ge.push(qi(ut,null!==(k=he.skipUrlEncoding)&&void 0!==k&&k,Fe,mt))}else ge.push(qi(Ie,null!==(U=he.skipUrlEncoding)&&void 0!==U&&U,Fe,He))}return""!==H.search&&(H.search+="&"),H.search+=ge.join("&"),H.toString()}("".concat(ce,"/").concat(he),$e);return new URL(k).toString().replace(/([^:]\/)\/+/g,"$1")}(ge,ve,Ne,Object.assign({allowInsecureConnection:H},Re));return{get:(Re={})=>Qr("GET",He(Re),U,Re,H,j),post:(Re={})=>Qr("POST",He(Re),U,Re,H,j),put:(Re={})=>Qr("PUT",He(Re),U,Re,H,j),patch:(Re={})=>Qr("PATCH",He(Re),U,Re,H,j),delete:(Re={})=>Qr("DELETE",He(Re),U,Re,H,j),head:(Re={})=>Qr("HEAD",He(Re),U,Re,H,j),options:(Re={})=>Qr("OPTIONS",He(Re),U,Re,H,j),trace:(Re={})=>Qr("TRACE",He(Re),U,Re,H,j)}};return{path:Ie,pathUnchecked:Ie,pipeline:U}}function Qr(ce,he,Te,$e,k,U){var H;return k=null!==(H=$e.allowInsecureConnection)&&void 0!==H?H:k,{then:function(j,ge){return Jn(ce,he,Te,Object.assign(Object.assign({},$e),{allowInsecureConnection:k}),U).then(j,ge)},asBrowserStream:()=>(0,Mt.A)(function*(){if(K.qx)throw new Error("`asBrowserStream` is supported only in the browser environment. Use `asNodeStream` instead to obtain the response body stream. If you require a Web stream of the response in Node, consider using `Readable.toWeb` on the result of `asNodeStream`.");return Jn(ce,he,Te,Object.assign(Object.assign({},$e),{allowInsecureConnection:k,responseAsStream:!0}),U)})(),asNodeStream:()=>(0,Mt.A)(function*(){if(K.qx)return Jn(ce,he,Te,Object.assign(Object.assign({},$e),{allowInsecureConnection:k,responseAsStream:!0}),U);throw new Error("`isNodeStream` is not supported in the browser environment. Use `asBrowserStream` to obtain the response body stream.")})()}}},784:(Xt,ft,Se)=>{Se.d(ft,{v:()=>nt});const nt=(0,Se(899).KV)("ts-http-runtime")},899:(Xt,ft,Se)=>{Se.d(ft,{KV:()=>At,MX:()=>Ve});const nt=typeof process<"u"&&process.env&&process.env.DEBUG||void 0;let st,Je=[],ct=[];const Ue=[];nt&&pe(nt);const se=Object.assign(ot=>Qe(ot),{enable:pe,enabled:yt,disable:function Ke(){const ot=st||"";return pe(""),ot},log:function je(...ot){if(ot.length>0){const kt=String(ot[0]);kt.includes(":error")?console.error(...ot):kt.includes(":warning")?console.warn(...ot):kt.includes(":info")?console.info(...ot):(kt.includes(":verbose"),console.debug(...ot))}}});function pe(ot){st=ot,Je=[],ct=[];const kt=/\*/g,fn=ot.split(",").map(Yt=>Yt.trim().replace(kt,".*?"));for(const Yt of fn)Yt.startsWith("-")?ct.push(new RegExp("^".concat(Yt.substr(1),"$"))):Je.push(new RegExp("^".concat(Yt,"$")));for(const Yt of Ue)Yt.enabled=yt(Yt.namespace)}function yt(ot){if(ot.endsWith("*"))return!0;for(const kt of ct)if(kt.test(ot))return!1;for(const kt of Je)if(kt.test(ot))return!0;return!1}function Qe(ot){const kt=Object.assign(function fn(...Yt){kt.enabled&&(Yt.length>0&&(Yt[0]="".concat(ot," ").concat(Yt[0])),kt.log(...Yt))},{enabled:yt(ot),destroy:Be,log:se.log,namespace:ot,extend:_t});return Ue.push(kt),kt}function Be(){const ot=Ue.indexOf(this);return ot>=0&&(Ue.splice(ot,1),!0)}function _t(ot){const kt=Qe("".concat(this.namespace,":").concat(ot));return kt.log=this.log,kt}const tt=se,Nt=["verbose","info","warning","error"],bt={verbose:400,info:300,warning:200,error:100};function Mt(ot,kt){kt.log=(...fn)=>{ot.log(...fn)}}function pt(ot){return Nt.includes(ot)}function Ve(ot){const kt=new Set,fn=typeof process<"u"&&process.env&&process.env[ot.logLevelEnvVarName]||void 0;let Yt;const Vt=tt(ot.namespace);function Tt(le){if(le&&!pt(le))throw new Error("Unknown log level '".concat(le,"'. Acceptable values: ").concat(Nt.join(",")));Yt=le;const we=[];for(const ye of kt)lt(ye)&&we.push(ye.namespace);tt.enable(we.join(","))}function lt(le){return!!(Yt&&bt[le.level]<=bt[Yt])}function ke(le,we){const ye=Object.assign(le.extend(we),{level:we});if(Mt(le,ye),lt(ye)){const Oe=tt.disable();tt.enable(Oe+","+ye.namespace)}return kt.add(ye),ye}return Vt.log=(...le)=>{tt.log(...le)},fn&&(pt(fn)?Tt(fn):console.error("".concat(ot.logLevelEnvVarName," set to unknown log level '").concat(fn,"'; logging is not enabled. Acceptable values: ").concat(Nt.join(", "),"."))),{setLogLevel:Tt,getLogLevel:function de(){return Yt},createClientLogger:function De(le){const we=Vt.extend(le);return Mt(Vt,we),{error:ke(we,"error"),warning:ke(we,"warning"),info:ke(we,"info"),verbose:ke(we,"verbose")}},logger:Vt}}const Xe=Ve({logLevelEnvVarName:"TYPESPEC_RUNTIME_LOG_LEVEL",namespace:"typeSpecRuntime"});function At(ot){return Xe.createClientLogger(ot)}},970:(Xt,ft,Se)=>{Se.d(ft,{B:()=>nt,e:()=>st});var je=Se(467);const nt="agentPolicy";function st(Je){return{name:nt,sendRequest:(ct=(0,je.A)(function*(Ue,se){return Ue.agent||(Ue.agent=Je),se(Ue)}),function(se,pe){return ct.apply(this,arguments)})};var ct}},879:(Xt,ft,Se)=>{Se.d(ft,{e:()=>je,r:()=>nt});const je="decompressResponsePolicy";function nt(){throw new Error("decompressResponsePolicy is not supported in browser environment")}},978:(Xt,ft,Se)=>{Se.d(ft,{u:()=>Ue});var je=Se(362),nt=Se(396),st=Se(709),Je=Se(875);const ct="defaultRetryPolicy";function Ue(se={}){var pe;return{name:ct,sendRequest:(0,st.J)([(0,nt.P)(),(0,je.xB)(se)],{maxRetries:null!==(pe=se.maxRetries)&&void 0!==pe?pe:Je.o}).sendRequest}}},121:(Xt,ft,Se)=>{Se.d(ft,{j:()=>se,s:()=>ct});var je=Se(467),nt=Se(110),st=Se(674),Je=Se(72);const ct="formDataPolicy";function se(){return{name:ct,sendRequest:(Qe,Be)=>(0,je.A)(function*(){if(st.qx&&typeof FormData<"u"&&Qe.body instanceof FormData&&(Qe.formData=function Ue(Qe){var Be;const _t={};for(const[tt,Nt]of Qe.entries())null!==(Be=_t[tt])&&void 0!==Be||(_t[tt]=[]),_t[tt].push(Nt);return _t}(Qe.body),Qe.body=void 0),Qe.formData){const _t=Qe.headers.get("Content-Type");_t&&-1!==_t.indexOf("application/x-www-form-urlencoded")?Qe.body=function pe(Qe){const Be=new URLSearchParams;for(const[_t,tt]of Object.entries(Qe))if(Array.isArray(tt))for(const Nt of tt)Be.append(_t,Nt.toString());else Be.append(_t,tt.toString());return Be.toString()}(Qe.formData):yield function yt(Qe,Be){return Ke.apply(this,arguments)}(Qe.formData,Qe),Qe.formData=void 0}return Be(Qe)})()}}function Ke(){return(Ke=(0,je.A)(function*(Qe,Be){const _t=Be.headers.get("Content-Type");if(_t&&!_t.startsWith("multipart/form-data"))return;Be.headers.set("Content-Type",null!=_t?_t:"multipart/form-data");const tt=[];for(const[Nt,bt]of Object.entries(Qe))for(const Mt of Array.isArray(bt)?bt:[bt])if("string"==typeof Mt)tt.push({headers:(0,Je.N)({"Content-Disposition":'form-data; name="'.concat(Nt,'"')}),body:(0,nt.Al)(Mt,"utf-8")});else{if(null==Mt||"object"!=typeof Mt)throw new Error("Unexpected value for key ".concat(Nt,": ").concat(Mt,". Value should be serialized to string first."));{const pt=Mt.name||"blob",Ve=(0,Je.N)();Ve.set("Content-Disposition",'form-data; name="'.concat(Nt,'"; filename="').concat(pt,'"')),Ve.set("Content-Type",Mt.type||"application/octet-stream"),tt.push({headers:Ve,body:Mt})}}Be.multipartBody={parts:tt}})).apply(this,arguments)}},885:(Xt,ft,Se)=>{Se.d(ft,{G:()=>Je,r:()=>ct});var je=Se(467),nt=Se(784),st=Se(956);const Je="logPolicy";function ct(Ue={}){var se;const pe=null!==(se=Ue.logger)&&void 0!==se?se:nt.v.info,yt=new st.I({additionalAllowedHeaderNames:Ue.additionalAllowedHeaderNames,additionalAllowedQueryParameters:Ue.additionalAllowedQueryParameters});return{name:Je,sendRequest:(Ke,Qe)=>(0,je.A)(function*(){if(!pe.enabled)return Qe(Ke);pe("Request: ".concat(yt.sanitize(Ke)));const Be=yield Qe(Ke);return pe("Response status code: ".concat(Be.status)),pe("Headers: ".concat(yt.sanitize(Be.headers))),Be})()}}},535:(Xt,ft,Se)=>{Se.d(ft,{J:()=>Xe,u:()=>bt});var je=Se(467),nt=Se(110),st=Se(509),Je=Se(233);function Ue(xe){return se.apply(this,arguments)}function se(){return(se=(0,je.A)(function*(xe){if(xe instanceof Blob||xe instanceof Uint8Array)return xe;if((0,st.xU)(xe))return function ct(xe){return new Response(xe).blob()}(xe);throw new Error("Unsupported source type. Only Blob, Uint8Array, and ReadableStream are supported in browser.")})).apply(this,arguments)}function yt(){return(yt=(0,je.A)(function*(xe){const it=[];for(const gt of xe)it.push(yield Ue("function"==typeof gt?gt():gt));return new Blob(it)})).apply(this,arguments)}function Qe(xe){let it="";for(const[gt,At]of xe)it+="".concat(gt,": ").concat(At,"\r\n");return it}function Be(xe){return xe instanceof Uint8Array?xe.byteLength:(0,st.qf)(xe)?-1===xe.size?void 0:xe.size:void 0}function Nt(){return Nt=(0,je.A)(function*(xe,it,gt){const At=[(0,nt.Al)("--".concat(gt),"utf-8"),...it.flatMap(kt=>[(0,nt.Al)("\r\n","utf-8"),(0,nt.Al)(Qe(kt.headers),"utf-8"),(0,nt.Al)("\r\n","utf-8"),kt.body,(0,nt.Al)("\r\n--".concat(gt),"utf-8")]),(0,nt.Al)("--\r\n\r\n","utf-8")],ot=function _t(xe){let it=0;for(const gt of xe){const At=Be(gt);if(void 0===At)return;it+=At}return it}(At);ot&&xe.headers.set("Content-Length",ot),xe.body=yield function pe(xe){return yt.apply(this,arguments)}(At)}),Nt.apply(this,arguments)}const bt="multipartPolicy",Mt=70,pt=new Set("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789'()+,-./:=?");function Xe(){return{name:bt,sendRequest:(xe,it)=>(0,je.A)(function*(){var gt;if(!xe.multipartBody)return it(xe);if(xe.body)throw new Error("multipartBody and regular body cannot be set at the same time");let At=xe.multipartBody.boundary;const ot=null!==(gt=xe.headers.get("Content-Type"))&&void 0!==gt?gt:"multipart/mixed",kt=ot.match(/^(multipart\/[^ ;]+)(?:; *boundary=(.+))?$/);if(!kt)throw new Error("Got multipart request body, but content-type header was not multipart: ".concat(ot));const[,fn,Yt]=kt;if(Yt&&At&&Yt!==At)throw new Error("Multipart boundary was specified as ".concat(Yt," in the header, but got ").concat(At," in the request body"));return null!=At||(At=Yt),At?function Ve(xe){if(xe.length>Mt)throw new Error('Multipart boundary "'.concat(xe,'" exceeds maximum length of 70 characters'));if(Array.from(xe).some(it=>!pt.has(it)))throw new Error('Multipart boundary "'.concat(xe,'" contains invalid characters'))}(At):At=function Ke(){return"----AzSDKFormBoundary".concat((0,Je.N)())}(),xe.headers.set("Content-Type","".concat(fn,"; boundary=").concat(At)),yield function tt(xe,it,gt){return Nt.apply(this,arguments)}(xe,xe.multipartBody.parts,At),xe.multipartBody=void 0,it(xe)})()}}},248:(Xt,ft,Se)=>{Se.d(ft,{Ll:()=>Je,nV:()=>st,uX:()=>je});const je="proxyPolicy",nt="proxyPolicy is not supported in browser environment";function st(){throw new Error(nt)}function Je(){throw new Error(nt)}},767:(Xt,ft,Se)=>{Se.d(ft,{O:()=>nt,x:()=>Je});var je=Se(467);const nt="redirectPolicy",st=["GET","HEAD"];function Je(se={}){const{maxRetries:pe=20}=se;return{name:nt,sendRequest:(yt,Ke)=>(0,je.A)(function*(){const Qe=yield Ke(yt);return ct(Ke,Qe,pe)})()}}function ct(se,pe,yt){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,je.A)(function*(se,pe,yt,Ke=0){const{request:Qe,status:Be,headers:_t}=pe,tt=_t.get("location");if(tt&&(300===Be||301===Be&&st.includes(Qe.method)||302===Be&&st.includes(Qe.method)||303===Be&&"POST"===Qe.method||307===Be)&&Ke<yt){const Nt=new URL(tt,Qe.url);Qe.url=Nt.toString(),303===Be&&(Qe.method="GET",Qe.headers.delete("Content-Length"),delete Qe.body),Qe.headers.delete("Authorization");const bt=yield se(Qe);return ct(se,bt,yt,Ke+1)}return pe})).apply(this,arguments)}},709:(Xt,ft,Se)=>{Se.d(ft,{J:()=>pe});var je=Se(467),nt=Se(597),st=Se(20),Je=Se(899),ct=Se(875);const Ue=(0,Je.KV)("ts-http-runtime retryPolicy"),se="retryPolicy";function pe(yt,Ke={maxRetries:ct.o}){const Qe=Ke.logger||Ue;return{name:se,sendRequest:(Be,_t)=>(0,je.A)(function*(){var tt,Nt;let bt,Mt,pt=-1;e:for(;;){pt+=1,bt=void 0,Mt=void 0;try{Qe.info("Retry ".concat(pt,": Attempting to send request"),Be.requestId),bt=yield _t(Be),Qe.info("Retry ".concat(pt,": Received a response from request"),Be.requestId)}catch(Ve){if(Qe.error("Retry ".concat(pt,": Received an error from request"),Be.requestId),Mt=Ve,!Ve||"RestError"!==Mt.name)throw Ve;bt=Mt.response}if(null!==(tt=Be.abortSignal)&&void 0!==tt&&tt.aborted)throw Qe.error("Retry ".concat(pt,": Request aborted.")),new st.l;if(pt>=(null!==(Nt=Ke.maxRetries)&&void 0!==Nt?Nt:ct.o)){if(Qe.info("Retry ".concat(pt,": Maximum retries reached. Returning the last received response, or throwing the last received error.")),Mt)throw Mt;if(bt)return bt;throw new Error("Maximum retries reached with no response or error to throw")}Qe.info("Retry ".concat(pt,": Processing ").concat(yt.length," retry strategies."));t:for(const Ve of yt){const Xe=Ve.logger||Qe;Xe.info("Retry ".concat(pt,": Processing retry strategy ").concat(Ve.name,"."));const xe=Ve.retry({retryCount:pt,response:bt,responseError:Mt});if(xe.skipStrategy){Xe.info("Retry ".concat(pt,": Skipped."));continue t}const{errorToThrow:it,retryAfterInMs:gt,redirectTo:At}=xe;if(it)throw Xe.error("Retry ".concat(pt,": Retry strategy ").concat(Ve.name," throws error:"),it),it;if(gt||0===gt){Xe.info("Retry ".concat(pt,": Retry strategy ").concat(Ve.name," retries after ").concat(gt)),yield(0,nt.c)(gt,void 0,{abortSignal:Be.abortSignal});continue e}if(At){Xe.info("Retry ".concat(pt,": Retry strategy ").concat(Ve.name," redirects to ").concat(At)),Be.url=At;continue e}}if(Mt)throw Qe.info("None of the retry strategies could work with the received error. Throwing it."),Mt;if(bt)return Qe.info("None of the retry strategies could work with the received response. Returning it."),bt}})()}}},70:(Xt,ft,Se)=>{Se.d(ft,{T:()=>nt,i:()=>st});var je=Se(467);const nt="tlsPolicy";function st(Je){return{name:nt,sendRequest:(ct=(0,je.A)(function*(Ue,se){return Ue.tlsSettings||(Ue.tlsSettings=Je),se(Ue)}),function(se,pe){return ct.apply(this,arguments)})};var ct}},489:(Xt,ft,Se)=>{Se.d(ft,{z:()=>tt});var je=Se(467);function Ue(){return(Ue=(0,je.A)(function*(Nt){const bt=globalThis.navigator;let Mt="unknown";if(null!=bt&&bt.userAgentData){const pt=yield bt.userAgentData.getHighEntropyValues(["architecture","platformVersion"]);Mt="".concat(pt.architecture,"-").concat(pt.platform,"-").concat(pt.platformVersion);const Ve=function Je(Nt){const bt=["Google Chrome","Microsoft Edge","Opera","Brave","Chromium"];for(const Mt of bt){const pt=Nt.find(Ve=>Ve.brand===Mt);if(pt)return pt}}(bt.userAgentData.brands);Ve&&Nt.set(Ve.brand,Ve.version)}else if(null!=bt&&bt.platform){Mt=bt.platform;const pt=function st(Nt){const bt=[{name:"Firefox",regex:/Firefox\/([\d.]+)/},{name:"Safari",regex:/Version\/([\d.]+).*Safari/}];for(const Mt of bt){const pt=Nt.match(Mt.regex);if(pt)return{brand:Mt.name,version:pt[1]}}}(bt.userAgent);pt&&Nt.set(pt.brand,pt.version)}else"string"==typeof globalThis.EdgeRuntime&&Nt.set("EdgeRuntime",globalThis.EdgeRuntime);Nt.set("OS",Mt)})).apply(this,arguments)}var se=Se(875);function Qe(){return Qe=(0,je.A)(function*(Nt){const bt=new Map;bt.set("ts-http-runtime",se.M),yield function ct(Nt){return Ue.apply(this,arguments)}(bt);const Mt=function pe(Nt){const bt=[];for(const[Mt,pt]of Nt){const Ve=pt?"".concat(Mt,"/").concat(pt):Mt;bt.push(Ve)}return bt.join(" ")}(bt);return Nt?"".concat(Nt," ").concat(Mt):Mt}),Qe.apply(this,arguments)}const Be="x-ms-useragent",_t="userAgentPolicy";function tt(Nt={}){const bt=function Ke(Nt){return Qe.apply(this,arguments)}(Nt.userAgentPrefix);return{name:_t,sendRequest:(Mt,pt)=>(0,je.A)(function*(){return Mt.headers.has(Be)||Mt.headers.set(Be,yield bt),pt(Mt)})()}}},362:(Xt,ft,Se)=>{Se.d(ft,{xB:()=>ct});var je=Se(140),nt=Se(396);const st=1e3,Je=64e3;function ct(pe={}){var yt,Ke;const Qe=null!==(yt=pe.retryDelayInMs)&&void 0!==yt?yt:st,Be=null!==(Ke=pe.maxRetryDelayInMs)&&void 0!==Ke?Ke:Je;return{name:"exponentialRetryStrategy",retry({retryCount:_t,response:tt,responseError:Nt}){const bt=function se(pe){return!!pe&&("ETIMEDOUT"===pe.code||"ESOCKETTIMEDOUT"===pe.code||"ECONNREFUSED"===pe.code||"ECONNRESET"===pe.code||"ENOENT"===pe.code||"ENOTFOUND"===pe.code)}(Nt),Mt=bt&&pe.ignoreSystemErrors,pt=function Ue(pe){return!(!pe||void 0===pe.status||!(pe.status>=500||408===pe.status)||501===pe.status||505===pe.status)}(tt),Ve=pt&&pe.ignoreHttpStatusCodes;return tt&&((0,nt.$)(tt)||!pt)||Ve||Mt?{skipStrategy:!0}:!Nt||bt||pt?(0,je.g)(_t,{retryDelayInMs:Qe,maxRetryDelayInMs:Be}):{errorToThrow:Nt}}}}},396:(Xt,ft,Se)=>{Se.d(ft,{$:()=>ct,P:()=>Ue});var je=Se(597);const nt="Retry-After",st=["retry-after-ms","x-ms-retry-after-ms",nt];function Je(se){if(se&&[429,503].includes(se.status))try{for(const Qe of st){const Be=(0,je.H)(se,Qe);if(0===Be||Be)return Be*(Qe===nt?1e3:1)}const pe=se.headers.get(nt);if(!pe)return;const Ke=Date.parse(pe)-Date.now();return Number.isFinite(Ke)?Math.max(0,Ke):void 0}catch(pe){return}}function ct(se){return Number.isFinite(Je(se))}function Ue(){return{name:"throttlingRetryStrategy",retry({response:se}){const pe=Je(se);return Number.isFinite(pe)?{retryAfterInMs:pe}:{skipStrategy:!0}}}}},110:(Xt,ft,Se)=>{function je(Be,_t){switch(_t){case"utf-8":return function ct(Be){return(new TextDecoder).decode(Be)}(Be);case"base64":return st(Be);case"base64url":return function Je(Be){return st(Be).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}(Be);case"hex":return function Ue(Be){return[...Be].map(_t=>_t.toString(16).padStart(2,"0")).join("")}(Be)}}function nt(Be,_t){switch(_t){case"utf-8":return function se(Be){return(new TextEncoder).encode(Be)}(Be);case"base64":return pe(Be);case"base64url":return function yt(Be){return pe(Be.replace(/-/g,"+").replace(/_/g,"/"))}(Be);case"hex":return function Qe(Be){const _t=new Uint8Array(Be.length/2);for(let tt=0;tt<Be.length/2;++tt){const Nt=Be[2*tt],bt=Be[2*tt+1];if(!Ke.has(Nt)||!Ke.has(bt))return _t.slice(0,tt);_t[tt]=parseInt("".concat(Nt).concat(bt),16)}return _t}(Be)}}function st(Be){return btoa([...Be].map(_t=>String.fromCharCode(_t)).join(""))}function pe(Be){return new Uint8Array([...atob(Be)].map(_t=>_t.charCodeAt(0)))}Se.d(ft,{Al:()=>nt,SW:()=>je});const Ke=new Set("0123456789abcdefABCDEF")},674:(Xt,ft,Se)=>{var je,nt,st,Je;Se.d(ft,{Bd:()=>ct,N6:()=>se,Qg:()=>pe,lV:()=>Qe,p7:()=>Ue,qx:()=>yt,tX:()=>Ke});const ct=typeof window<"u"&&typeof window.document<"u",Ue="object"==typeof self&&"function"==typeof(null==self?void 0:self.importScripts)&&("DedicatedWorkerGlobalScope"===(null===(je=self.constructor)||void 0===je?void 0:je.name)||"ServiceWorkerGlobalScope"===(null===(nt=self.constructor)||void 0===nt?void 0:nt.name)||"SharedWorkerGlobalScope"===(null===(st=self.constructor)||void 0===st?void 0:st.name)),se=typeof Deno<"u"&&typeof Deno.version<"u"&&typeof Deno.version.deno<"u",pe=typeof Bun<"u"&&typeof Bun.version<"u",yt=typeof globalThis.process<"u"&&!!globalThis.process.version&&!(null===(Je=globalThis.process.versions)||void 0===Je||!Je.node),Ke=yt&&!pe&&!se,Qe=typeof navigator<"u"&&"ReactNative"===(null==navigator?void 0:navigator.product)},140:(Xt,ft,Se)=>{Se.d(ft,{g:()=>nt});var je=Se(900);function nt(st,Je){const ct=Je.retryDelayInMs*Math.pow(2,st),Ue=Math.min(Je.maxRetryDelayInMs,ct);return{retryAfterInMs:Ue/2+(0,je.W)(0,Ue/2)}}},377:(Xt,ft,Se)=>{Se.d(ft,{b:()=>nt});var je=Se(652);function nt(st){return!!(0,je.G)(st)&&("string"==typeof st.name&&"string"==typeof st.message)}},597:(Xt,ft,Se)=>{Se.d(ft,{H:()=>Je,c:()=>st});var je=Se(20);const nt="The operation was aborted.";function st(ct,Ue,se){return new Promise((pe,yt)=>{let Ke,Qe;const Be=()=>yt(new je.l(null!=se&&se.abortErrorMsg?null==se?void 0:se.abortErrorMsg:nt)),_t=()=>{null!=se&&se.abortSignal&&Qe&&se.abortSignal.removeEventListener("abort",Qe)};if(Qe=()=>(Ke&&clearTimeout(Ke),_t(),Be()),null!=se&&se.abortSignal&&se.abortSignal.aborted)return Be();Ke=setTimeout(()=>{_t(),pe(Ue)},ct),null!=se&&se.abortSignal&&se.abortSignal.addEventListener("abort",Qe)})}function Je(ct,Ue){const se=ct.headers.get(Ue);if(!se)return;const pe=Number(se);return Number.isNaN(pe)?void 0:pe}},403:(Xt,ft,Se)=>{Se.d(ft,{If:()=>Nt.I,gE:()=>je.g,Z4:()=>Qe,g8:()=>yt,Wq:()=>nt.W,Bd:()=>tt.Bd,Qg:()=>tt.Qg,N6:()=>tt.N6,bJ:()=>Je.b,qx:()=>tt.qx,tX:()=>tt.tX,Gv:()=>st.G,lV:()=>tt.lV,p7:()=>tt.p7,N4:()=>_t.N,Al:()=>Ue.Al,SW:()=>Ue.SW});var je=Se(140),nt=Se(900),st=Se(652),Je=Se(377),ct=Se(467),Ue=Se(110);let se;function pe(){if(se)return se;if(!self.crypto||!self.crypto.subtle)throw new Error("Your browser environment does not support cryptography functions.");return se=self.crypto.subtle,se}function yt(bt,Mt,pt){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,ct.A)(function*(bt,Mt,pt){const Ve=pe(),Xe=(0,Ue.Al)(bt,"base64"),xe=(0,Ue.Al)(Mt,"utf-8"),it=yield Ve.importKey("raw",Xe,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),gt=yield Ve.sign({name:"HMAC",hash:{name:"SHA-256"}},it,xe);return(0,Ue.SW)(new Uint8Array(gt),pt)})).apply(this,arguments)}function Qe(bt,Mt){return Be.apply(this,arguments)}function Be(){return(Be=(0,ct.A)(function*(bt,Mt){const pt=(0,Ue.Al)(bt,"utf-8"),Ve=yield pe().digest({name:"SHA-256"},pt);return(0,Ue.SW)(new Uint8Array(Ve),Mt)})).apply(this,arguments)}var _t=Se(233),tt=Se(674),Nt=Se(956)},652:(Xt,ft,Se)=>{function je(nt){return!("object"!=typeof nt||null===nt||Array.isArray(nt)||nt instanceof RegExp||nt instanceof Date)}Se.d(ft,{G:()=>je})},900:(Xt,ft,Se)=>{function je(nt,st){return nt=Math.ceil(nt),st=Math.floor(st),Math.floor(Math.random()*(st-nt+1))+nt}Se.d(ft,{W:()=>je})},956:(Xt,ft,Se)=>{Se.d(ft,{I:()=>ct});var je=Se(652);const nt="REDACTED",st=["x-ms-client-request-id","x-ms-return-client-request-id","x-ms-useragent","x-ms-correlation-request-id","x-ms-request-id","client-request-id","ms-cv","return-client-request-id","traceparent","Access-Control-Allow-Credentials","Access-Control-Allow-Headers","Access-Control-Allow-Methods","Access-Control-Allow-Origin","Access-Control-Expose-Headers","Access-Control-Max-Age","Access-Control-Request-Headers","Access-Control-Request-Method","Origin","Accept","Accept-Encoding","Cache-Control","Connection","Content-Length","Content-Type","Date","ETag","Expires","If-Match","If-Modified-Since","If-None-Match","If-Unmodified-Since","Last-Modified","Pragma","Request-Id","Retry-After","Server","Transfer-Encoding","User-Agent","WWW-Authenticate"],Je=["api-version"];class ct{constructor({additionalAllowedHeaderNames:se=[],additionalAllowedQueryParameters:pe=[]}={}){se=st.concat(se),pe=Je.concat(pe),this.allowedHeaderNames=new Set(se.map(yt=>yt.toLowerCase())),this.allowedQueryParameters=new Set(pe.map(yt=>yt.toLowerCase()))}sanitize(se){const pe=new Set;return JSON.stringify(se,(yt,Ke)=>{if(Ke instanceof Error)return Object.assign(Object.assign({},Ke),{name:Ke.name,message:Ke.message});if("headers"===yt)return this.sanitizeHeaders(Ke);if("url"===yt)return this.sanitizeUrl(Ke);if("query"===yt)return this.sanitizeQuery(Ke);if("body"!==yt&&"response"!==yt&&"operationSpec"!==yt){if(Array.isArray(Ke)||(0,je.G)(Ke)){if(pe.has(Ke))return"[Circular]";pe.add(Ke)}return Ke}},2)}sanitizeUrl(se){if("string"!=typeof se||null===se||""===se)return se;const pe=new URL(se);if(!pe.search)return se;for(const[yt]of pe.searchParams)this.allowedQueryParameters.has(yt.toLowerCase())||pe.searchParams.set(yt,nt);return pe.toString()}sanitizeHeaders(se){const pe={};for(const yt of Object.keys(se))pe[yt]=this.allowedHeaderNames.has(yt.toLowerCase())?se[yt]:nt;return pe}sanitizeQuery(se){if("object"!=typeof se||null===se)return se;const pe={};for(const yt of Object.keys(se))pe[yt]=this.allowedQueryParameters.has(yt.toLowerCase())?se[yt]:nt;return pe}}},509:(Xt,ft,Se)=>{function je(Ue){return!(!Ue||"function"!=typeof Ue.pipe)}function nt(Ue){return!(!Ue||"function"!=typeof Ue.getReader||"function"!=typeof Ue.tee)}function st(Ue){return void 0!==Ue&&(Ue instanceof Uint8Array||Je(Ue)||"function"==typeof Ue||Ue instanceof Blob)}function Je(Ue){return je(Ue)||nt(Ue)}function ct(Ue){return"function"==typeof Ue.stream}Se.d(ft,{CY:()=>st,H1:()=>Je,qf:()=>ct,vB:()=>je,xU:()=>nt})},233:(Xt,ft,Se)=>{var st;Se.d(ft,{N:()=>ct});const Je="function"==typeof(null===(st=null==globalThis?void 0:globalThis.crypto)||void 0===st?void 0:st.randomUUID)?globalThis.crypto.randomUUID.bind(globalThis.crypto):function je(){let Ue="";for(let se=0;se<32;se++){const pe=Math.floor(16*Math.random());Ue+=12===se?"4":16===se?3&pe|8:pe.toString(16),(7===se||11===se||15===se||19===se)&&(Ue+="-")}return Ue};function ct(){return Je()}},467:(Xt,ft,Se)=>{function je(st,Je,ct,Ue,se,pe,yt){try{var Ke=st[pe](yt),Qe=Ke.value}catch(Be){return void ct(Be)}Ke.done?Je(Qe):Promise.resolve(Qe).then(Ue,se)}function nt(st){return function(){var Je=this,ct=arguments;return new Promise(function(Ue,se){var pe=st.apply(Je,ct);function yt(Qe){je(pe,Ue,se,yt,Ke,"next",Qe)}function Ke(Qe){je(pe,Ue,se,yt,Ke,"throw",Qe)}yt(void 0)})}}Se.d(ft,{A:()=>nt})}},Xt=>{Xt(Xt.s=305)}]);