"use strict";var U0=(Kt,ft)=>(ft=Symbol[Kt])?ft:Symbol.for("Symbol."+Kt),PJ=function(Kt,ft){this[0]=Kt,this[1]=ft},yd=Kt=>{var je,ft=Kt[U0("asyncIterator")],Se=!1,nt={};return null==ft?(ft=Kt[U0("iterator")](),je=st=>nt[st]=Je=>ft[st](Je)):(ft=ft.call(Kt),je=st=>nt[st]=Je=>{if(Se){if(Se=!1,"throw"===st)throw Je;return Je}return Se=!0,{done:!1,value:new PJ(new Promise(ct=>{var Ue=ft[st](Je);if(!(Ue instanceof Object))throw TypeError("Object expected");ct(Ue)}),1)}}),nt[U0("iterator")]=()=>nt,je("next"),"throw"in ft?je("throw"):nt.throw=st=>{throw st},"return"in ft&&je("return"),nt};(self.webpackChunkbusiness_app_angular=self.webpackChunkbusiness_app_angular||[]).push([[792],{142:(Kt,ft,Se)=>{var je=Se(204),nt=Se(124),st=Se(114),Je=Se(458);function ct(Lt){return Lt&&"object"==typeof Lt&&"default"in Lt?Lt:{default:Lt}}var Ue=ct(je),se=ct(nt),pe=ct(st),yt=ct(Je),Ke=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Qe(Lt){return Lt&&Lt.__esModule&&Object.prototype.hasOwnProperty.call(Lt,"default")?Lt.default:Lt}function Be(Lt,St){return Lt(St={exports:{}},St.exports),St.exports}var _t=Be(function(Lt,St){Lt.exports=function(ut){function ke(De){if(de[De])return de[De].exports;var le=de[De]={i:De,l:!1,exports:{}};return ut[De].call(le.exports,le,le.exports,ke),le.l=!0,le.exports}var de={};return ke.m=ut,ke.c=de,ke.i=function(De){return De},ke.d=function(De,le,we){ke.o(De,le)||Object.defineProperty(De,le,{configurable:!1,enumerable:!0,get:we})},ke.n=function(De){var le=De&&De.__esModule?function(){return De.default}:function(){return De};return ke.d(le,"a",le),le},ke.o=function(De,le){return Object.prototype.hasOwnProperty.call(De,le)},ke.p="",ke(ke.s=1)}([function(ut,ke,de){Object.defineProperty(ke,"__esModule",{value:!0}),ke.Timespan=ke.toJson=ke.fetchWithTimeout=void 0,ke.fetchWithTimeout=function De(ye,Oe){var Y,K=new Promise(function(ie,oe){fetch(ye).then(function(L){void 0!==Y&&clearTimeout(Y),ie(L)}).catch(function(L){void 0!==Y&&clearTimeout(Y),oe(L)})});if(0!==Oe){var q=new Promise(function(ie,oe){Y=setTimeout(oe,Oe,new Error("Fetch for '".concat(ye.url,"' timed out")))});return Promise.race([K,q])}return K},ke.toJson=function le(ye){try{return JSON.stringify(ye)}catch(Oe){return"Unable to serialize object of type ".concat(typeof ye)}};var we=function(){function ye(){this.start=Date.now()}return Object.defineProperty(ye.prototype,"duration",{get:function(){return Date.now()-this.start},enumerable:!1,configurable:!0}),Object.defineProperty(ye.prototype,"startTime",{get:function(){return this.start},enumerable:!1,configurable:!0}),ye.prototype.reset=function(){this.start=Date.now()},ye}();ke.Timespan=we},function(ut,ke,de){var le=this&&this.__extends||function(){var L=function(z,J){return(L=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(fe,_e){fe.__proto__=_e}||function(fe,_e){for(var B in _e)Object.prototype.hasOwnProperty.call(_e,B)&&(fe[B]=_e[B])})(z,J)};return function(z,J){function fe(){this.constructor=z}if("function"!=typeof J&&null!==J)throw new TypeError("Class extends value "+String(J)+" is not a constructor or null");L(z,J),z.prototype=null===J?Object.create(J):(fe.prototype=J.prototype,new fe)}}(),we=this&&this.__assign||function(){return we=Object.assign||function(L){for(var z,J=1,fe=arguments.length;J<fe;J++)for(var _e in z=arguments[J])Object.prototype.hasOwnProperty.call(z,_e)&&(L[_e]=z[_e]);return L},we.apply(this,arguments)},ye=this&&this.__awaiter||function(L,z,J,fe){return new(J||(J=Promise))(function(B,W){function G(ee){try{Z(fe.next(ee))}catch(re){W(re)}}function ne(ee){try{Z(fe.throw(ee))}catch(re){W(re)}}function Z(ee){ee.done?B(ee.value):function _e(B){return B instanceof J?B:new J(function(W){W(B)})}(ee.value).then(G,ne)}Z((fe=fe.apply(L,z||[])).next())})},Oe=this&&this.__generator||function(L,z){function J(Z){return function(ee){return function fe(Z){if(_e)throw new TypeError("Generator is already executing.");for(;G&&(G=0,Z[0]&&(ne=0)),ne;)try{if(_e=1,B&&(W=2&Z[0]?B.return:Z[0]?B.throw||((W=B.return)&&W.call(B),0):B.next)&&!(W=W.call(B,Z[1])).done)return W;switch(B=0,W&&(Z=[2&Z[0],W.value]),Z[0]){case 0:case 1:W=Z;break;case 4:return ne.label++,{value:Z[1],done:!1};case 5:ne.label++,B=Z[1],Z=[0];continue;case 7:Z=ne.ops.pop(),ne.trys.pop();continue;default:if(!(W=(W=ne.trys).length>0&&W[W.length-1])&&(6===Z[0]||2===Z[0])){ne=0;continue}if(3===Z[0]&&(!W||Z[1]>W[0]&&Z[1]<W[3])){ne.label=Z[1];break}if(6===Z[0]&&ne.label<W[1]){ne.label=W[1],W=Z;break}if(W&&ne.label<W[2]){ne.label=W[2],ne.ops.push(Z);break}W[2]&&ne.ops.pop(),ne.trys.pop();continue}Z=z.call(L,ne)}catch(ee){Z=[6,ee],B=0}finally{_e=W=0}if(5&Z[0])throw Z[1];return{value:Z[0]?Z[1]:void 0,done:!0}}([Z,ee])}}var _e,B,W,G,ne={label:0,sent:function(){if(1&W[0])throw W[1];return W[1]},trys:[],ops:[]};return G={next:J(0),throw:J(1),return:J(2)},"function"==typeof Symbol&&(G[Symbol.iterator]=function(){return this}),G};Object.defineProperty(ke,"__esModule",{value:!0}),ke.createRegistrarClient=ke.RegistrarClient=void 0;var Y=de(0),K=["skype","aad","cae"],q=function(L){function z(J){var fe=L.call(this,J)||this;return fe.name="CancelationError",fe}return le(z,L),z}(Error),ie=function(){function L(z,J,fe){this.logger=z,this.maxBackoffInMs=J,this.initialDelay=fe,this.backoffCount=0,this.id=++L.idCounter}return L.prototype.delay=function(z){var J=this;if(void 0!==this.timerHandle)throw new Error("Retry sequence logical failure");if(-1===this.backoffCount)return new Promise(function(_e,B){B(new q("Cancelled"))});var fe=this.calculateNextBackoffMs();return this.backoffCount++,this.logger.info("[RegistrarClient] Backing off ".concat(z," for ").concat(fe," milliseconds with ID ").concat(this.id)),new Promise(function(_e,B){J.cancelFunc=B,J.timerHandle=setTimeout(function(){J.logger.info("[RegistrarClient] Back off for ".concat(z," with ID ").concat(J.id," complete")),J.timerHandle=void 0,_e()},fe)})},L.prototype.cancel=function(){void 0!==this.timerHandle&&(this.logger.debug("Resetting back off"),clearTimeout(this.timerHandle),void 0!==this.cancelFunc&&this.cancelFunc(new q("Cancelled"))),this.backoffCount=-1},L.prototype.calculateNextBackoffMs=function(){var z=1+.4*(Math.random()-.5),J=this.initialDelay*Math.pow(2,this.backoffCount)*z;return J=Math.round(J),Math.min(this.maxBackoffInMs,J)},L.idCounter=0,L}(),oe=function(){function L(z,J,fe){var _e;this.logger=z,this.tokenProvider=J,this.options=fe,this.DEFAULT_MAX_RETRIES_FOR_GET_TOKEN=15,this.DEFAULT_MAX_BACKOFF_TIME_IN_MS=3e5,this.backoffs={},this.maxBackOffTime=this.options.maxRetryDelayMs>0?this.options.maxRetryDelayMs:this.DEFAULT_MAX_BACKOFF_TIME_IN_MS,this.maxRetriesForGetToken=null==fe.maxRetriesForGetToken?this.DEFAULT_MAX_RETRIES_FOR_GET_TOKEN:fe.maxRetriesForGetToken,this.proxyUrlRewrite=null!==(_e=fe.proxyUrlRewrite)&&void 0!==_e?_e:function(B){return B}}return L.prototype.setTelemetryLogger=function(z){this.eventLogger=z},L.prototype.register=function(z,J){return ye(this,void 0,void 0,function(){return Oe(this,function(fe){switch(fe.label){case 0:return[4,this.performRegistration(z,J,"pr_set_registration")];case 1:return fe.sent(),this.cachedRegistrationParams=[z,J],[2]}})})},L.prototype.unregister=function(){return ye(this,void 0,void 0,function(){var z;return Oe(this,function(J){switch(J.label){case 0:return this.logger.info("[RegistrarClient] sending unregister request"),z=new Request(this.proxyUrlRewrite("".concat(this.options.registrarUrl,"/").concat(this.options.registrationId)),{method:"DELETE",mode:"cors",headers:new Headers(we(we({},this.options.extraRegistrationHeaders),{accept:"application/json, text/javascript"}))}),[4,this.callRegistrar(z,"pr_delete_registration")];case 1:return J.sent(),[2]}})})},L.prototype.cancelPendingRequests=function(){var z=this;Object.keys(this.backoffs).forEach(function(J){z.backoffs[J].cancel()}),this.backoffs={}},L.prototype.resendRegistration=function(){return ye(this,void 0,void 0,function(){return Oe(this,function(z){switch(z.label){case 0:if(!this.cachedRegistrationParams)throw new Error("Re-registration failed because there is no registration parameters cached");return[4,this.performRegistration(this.cachedRegistrationParams[0],this.cachedRegistrationParams[1],"pr_resend_registration")];case 1:return z.sent(),[2]}})})},L.prototype.performRegistration=function(z,J,fe){return ye(this,void 0,void 0,function(){var _e,B;return Oe(this,function(W){switch(W.label){case 0:return this.logger.info("[RegistrarClient] Sending register request"),_e={clientDescription:z,registrationId:this.options.registrationId,nodeId:"",transports:J},B=new Request(this.proxyUrlRewrite(this.options.registrarUrl),{method:"POST",mode:"cors",headers:new Headers(we(we({},this.options.extraRegistrationHeaders),{"content-type":"application/json",accept:"application/json, text/javascript"})),body:(0,Y.toJson)(_e)}),[4,this.callRegistrar(B,fe)];case 1:return W.sent(),[2]}})})},L.prototype.startBackoff=function(){var z=new ie(this.logger,this.maxBackOffTime,this.options.initialRetryDelayMs);return this.backoffs[z.id]=z,z},L.prototype.stopBackoff=function(z){z.cancel(),delete this.backoffs[z.id]},L.prototype.getToken=function(z){return ye(this,void 0,void 0,function(){var J,fe,_e,B,W,G,ne;return Oe(this,function(Z){switch(Z.label){case 0:J=this.startBackoff(),fe=0,Z.label=1;case 1:return Z.trys.push([1,3,,8]),this.logger.info("[RegistrarClient] Asking for a new token"),[4,this.tokenProvider({needFresh:!0,supportedTokenTypes:K,wwwAuthenticateHeader:z,purpose:"registrar"})];case 2:return _e=Z.sent(),this.stopBackoff(J),[2,_e];case 3:B=Z.sent(),Z.label=4;case 4:return Z.trys.push([4,6,,7]),fe++,W=JSON.stringify(B),fe>this.maxRetriesForGetToken?(G="[RegistrarClient] getToken retry limit hit. Will not retry now. Error: ".concat(W),this.logger.error(G),this.stopBackoff(J),[2,Promise.reject(G)]):(this.logger.warn("[RegistrarClient] Retrying for a new token. Retry Count: ".concat(fe," Error: ").concat(W)),[4,J.delay("Fetching a new token")]);case 5:return Z.sent(),[3,8];case 6:throw ne=Z.sent(),this.stopBackoff(J),ne;case 7:return[3,8];case 8:return[3,1];case 9:return[2]}})})},L.prototype.callRegistrar=function(z,J){var fe,_e,B;return ye(this,void 0,void 0,function(){var W,G,ne,Z,ee,re,We,Ge,qe,Ze,Ht,zt,X,x,te,me;return Oe(this,function(ue){switch(ue.label){case 0:return W=this.startBackoff(),[4,this.tokenProvider({needFresh:!1,supportedTokenTypes:K,wwwAuthenticateHeader:void 0,purpose:"registrar"})];case 1:G=ue.sent(),this.setTokenHeader(z,G),ne=new Y.Timespan,Z=0,ue.label=2;case 2:ee=void 0,ue.label=3;case 3:return ue.trys.push([3,10,15,16]),re=z.clone(),[4,(0,Y.fetchWithTimeout)(re,this.options.requestTimeoutMs)];case 4:return 401!==(ee=ue.sent()).status?[3,8]:++Z>this.maxRetriesForGetToken?(We="[RegistrarClient] getSkypeToken retry limit hit. Will not retry now. Request '".concat(z.url,"' failed with ").concat(ee.status," ").concat(ee.statusText),this.logger.error(We),this.stopBackoff(W),[2,Promise.reject(We)]):(this.logger.warn("[RegistrarClient] Retry Count ".concat(Z,". Request '").concat(z.url,"' failed with ").concat(ee.status," ").concat(ee.statusText)),Ge=null!==(_e=null===(fe=ee.headers)||void 0===fe?void 0:fe.get("www-authenticate"))&&void 0!==_e?_e:void 0,qe=this.setTokenHeader,Ze=[z],[4,this.getToken(Ge)]);case 5:return qe.apply(this,Ze.concat([ue.sent()])),Z>1?[4,W.delay("Registrar call retry after 401")]:[3,7];case 6:ue.sent(),ue.label=7;case 7:return[3,22];case 8:if(ee.status>=500&&ee.status<600)throw new Error("Fetch for '".concat(z.url,"' failed with ").concat(ee.status," ").concat(ee.statusText));ue.label=9;case 9:return[3,16];case 10:Ht=ue.sent(),this.logger.error("[RegistrarClient] Request failed with ".concat(Ht)),ue.label=11;case 11:return ue.trys.push([11,13,,14]),[4,W.delay("Registrar call retry")];case 12:return ue.sent(),[3,22];case 13:throw zt=ue.sent(),this.logger.error("[RegistrarClient] Request cancelled"),this.stopBackoff(W),zt;case 14:return[3,16];case 15:return this.sendTelemetryEvent(J,z,ee,ne),[7];case 16:return this.stopBackoff(W),ee.ok?[2,ee]:[3,17];case 17:X=void 0,ue.label=18;case 18:return ue.trys.push([18,20,,21]),te=(x=JSON).stringify,[4,ee.json()];case 19:return X=te.apply(x,[ue.sent()]),[3,21];case 20:return ue.sent(),X="no details",[3,21];case 21:throw me="Fetch for '".concat(z.url,"' failed with ").concat(ee.status," ").concat(ee.statusText," (").concat(X,", MS-CV: ").concat(null===(B=ee.headers)||void 0===B?void 0:B.get("MS-CV"),")"),this.logger.error("[RegistrarClient] ".concat(me)),new Error(me);case 22:return[3,2];case 23:return[2]}})})},L.prototype.setTokenHeader=function(z,J){switch(z.headers.delete("X-Skypetoken"),z.headers.delete("Authorization"),z.headers.delete("X-MS-Migration"),J.tokenType.toLowerCase()){case"skype":z.headers.set("X-Skypetoken",J.token);break;case"aad":case"cae":z.headers.set("Authorization","Bearer ".concat(J.token));break;default:throw new Error("unsupported token type: ".concat(J.tokenType))}!1===this.options.usingLegacyTokenApi&&z.headers.set("X-MS-Migration","True")},L.prototype.sendTelemetryEvent=function(z,J,fe,_e){void 0!==this.eventLogger&&this.eventLogger.logEvent({name:z,properties:{url:{value:J.url},result_code:{value:void 0!==fe?fe.status:0},begin_timestamp:{value:_e.startTime},elapsed:{value:_e.duration}}})},L}();ke.RegistrarClient=oe,ke.createRegistrarClient=function De(L,z,J){return new oe(L,z,J)}}])});Qe(_t);var tt=Be(function(Lt,St){var ut;Lt.exports=(ut=_t,function(ke){function de(le){if(De[le])return De[le].exports;var we=De[le]={i:le,l:!1,exports:{}};return ke[le].call(we.exports,we,we.exports,de),we.l=!0,we.exports}var De={};return de.m=ke,de.c=De,de.i=function(le){return le},de.d=function(le,we,ye){de.o(le,we)||Object.defineProperty(le,we,{configurable:!1,enumerable:!0,get:ye})},de.n=function(le){var we=le&&le.__esModule?function(){return le.default}:function(){return le};return de.d(we,"a",we),we},de.o=function(le,we){return Object.prototype.hasOwnProperty.call(le,we)},de.p="",de(de.s=20)}([function(ke,de,De){Object.defineProperty(de,"__esModule",{value:!0}),de.Logger=void 0;var le=function(){function we(ye,Oe){this.name=ye,this.logger=Oe}return we.prototype.debug=function(ye){this.logger.debug("[".concat(this.name,"] ").concat(ye))},we.prototype.info=function(ye){this.logger.info("[".concat(this.name,"] ").concat(ye))},we.prototype.warn=function(ye){this.logger.warn("[".concat(this.name,"] ").concat(ye))},we.prototype.error=function(ye){this.logger.error("[".concat(this.name,"] ").concat(ye))},we}();de.Logger=le},function(ke,de,De){Object.defineProperty(de,"__esModule",{value:!0}),de.USER_AUTHENTICATE_EVENT_NAME=de.SUPPORTED_TOKEN_TYPES=de.FAILED_MESSAGE_ACK=de.UNHANDLED_MESSAGE_ACK=de.HANDLED_MESSAGE_ACK=de.CLIENT_VERSION=de.constants=void 0,de.constants={TROUTER_INIT:"trouterinit",TROUTER_READY_EVENT:"trouterReadyEvent",TROUTER_READY_TIMEOUT:"trouterReadyTimeout",TROUTER_TOKEN_REQUEST:"trouterTokenRequest",TROUTER_TOKEN_GET_SUCCEEDED:"trouterTokenGetSucceeded",TROUTER_TOKEN_GET_FAILED:"trouterTokenGetFailed",TROUTER_RECONNECTING:"trouterReconnecting",RENEWAL:"renewal",NEW_CONNECTION:"newConnection",ENDPOINT_REGISTRATION_FAILED:"endpointRegistrationFailed"},de.CLIENT_VERSION="2024.14.01.55",de.HANDLED_MESSAGE_ACK=200,de.UNHANDLED_MESSAGE_ACK=404,de.FAILED_MESSAGE_ACK=500,de.SUPPORTED_TOKEN_TYPES=["skype","aad","cae"],de.USER_AUTHENTICATE_EVENT_NAME="user.authenticate"},function(ke,de,De){var le,ye,we;Object.defineProperty(de,"__esModule",{value:!0}),de.TrouterState=de.UserActivityState=void 0,(ye=le||(de.UserActivityState=le={}))[ye.Unknown=0]="Unknown",ye[ye.Active=1]="Active",ye[ye.Inactive=2]="Inactive",function(ye){ye[ye.Unknown=0]="Unknown",ye[ye.Connected=2]="Connected",ye[ye.Disconnected=3]="Disconnected",ye[ye.Switching=9]="Switching"}(we||(de.TrouterState=we={}))},function(ke,de,De){var Y=this&&this.__awaiter||function(oe,L,z,J){return new(z||(z=Promise))(function(_e,B){function W(Z){try{ne(J.next(Z))}catch(ee){B(ee)}}function G(Z){try{ne(J.throw(Z))}catch(ee){B(ee)}}function ne(Z){Z.done?_e(Z.value):function fe(_e){return _e instanceof z?_e:new z(function(B){B(_e)})}(Z.value).then(W,G)}ne((J=J.apply(oe,L||[])).next())})},K=this&&this.__generator||function(oe,L){function z(ne){return function(Z){return function J(ne){if(fe)throw new TypeError("Generator is already executing.");for(;W&&(W=0,ne[0]&&(G=0)),G;)try{if(fe=1,_e&&(B=2&ne[0]?_e.return:ne[0]?_e.throw||((B=_e.return)&&B.call(_e),0):_e.next)&&!(B=B.call(_e,ne[1])).done)return B;switch(_e=0,B&&(ne=[2&ne[0],B.value]),ne[0]){case 0:case 1:B=ne;break;case 4:return G.label++,{value:ne[1],done:!1};case 5:G.label++,_e=ne[1],ne=[0];continue;case 7:ne=G.ops.pop(),G.trys.pop();continue;default:if(!(B=(B=G.trys).length>0&&B[B.length-1])&&(6===ne[0]||2===ne[0])){G=0;continue}if(3===ne[0]&&(!B||ne[1]>B[0]&&ne[1]<B[3])){G.label=ne[1];break}if(6===ne[0]&&G.label<B[1]){G.label=B[1],B=ne;break}if(B&&G.label<B[2]){G.label=B[2],G.ops.push(ne);break}B[2]&&G.ops.pop(),G.trys.pop();continue}ne=L.call(oe,G)}catch(Z){ne=[6,Z],_e=0}finally{fe=B=0}if(5&ne[0])throw ne[1];return{value:ne[0]?ne[1]:void 0,done:!0}}([ne,Z])}}var fe,_e,B,W,G={label:0,sent:function(){if(1&B[0])throw B[1];return B[1]},trys:[],ops:[]};return W={next:z(0),throw:z(1),return:z(2)},"function"==typeof Symbol&&(W[Symbol.iterator]=function(){return this}),W};Object.defineProperty(de,"__esModule",{value:!0}),de.Timespan=de.CorrelationVector=de.fetchWithTimeout=de.calculateExpireTsInSec=de.calculateTtlInSec=de.toJson=void 0,de.toJson=function le(oe){try{return JSON.stringify(oe)}catch(L){return"Unable to serialize object of type ".concat(typeof oe)}},de.calculateTtlInSec=function we(oe){var L=Math.round((new Date).getTime()/1e3);return void 0!==oe&&oe>L?oe-L:0},de.calculateExpireTsInSec=function ye(oe){return Math.round((new Date).getTime()/1e3)+oe},de.fetchWithTimeout=function Oe(oe,L){return Y(this,void 0,void 0,function(){var z,J,fe;return K(this,function(_e){return J=new Promise(function(B,W){fetch(oe).then(function(G){clearTimeout(z),B(G)}).catch(function(G){clearTimeout(z),W(G)})}),0!==L?(fe=new Promise(function(B,W){var G=new URL(oe.url),ne=new Error("".concat(oe.method," ").concat(G.origin).concat(G.pathname," timed out"));z=setTimeout(W,L,ne)}),[2,Promise.race([J,fe])]):[2,J]})})};var q=function(){function oe(L){this.base=void 0!==L?L:this.createCorrelationVectorBase(),this.extension=0}return oe.extend=function(L){return new oe(L)},oe.prototype.increase=function(){this.extension++},oe.prototype.value=function(){return"".concat(this.base,".").concat(this.extension)},oe.prototype.createCorrelationVectorBase=function(){for(var L="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0987654321/+",z="AQgw",J="",fe=0;fe<21;fe++)J+=L.charAt(Math.floor(64*Math.random()));return J+z.charAt(Math.floor(4*Math.random()))},oe}();de.CorrelationVector=q;var ie=function(){function oe(){this.start=Date.now()}return Object.defineProperty(oe.prototype,"duration",{get:function(){return Date.now()-this.start},enumerable:!1,configurable:!0}),Object.defineProperty(oe.prototype,"startTime",{get:function(){return this.start},enumerable:!1,configurable:!0}),oe.prototype.reset=function(){this.start=Date.now()},oe}();de.Timespan=ie},function(ke,de,De){Object.defineProperty(de,"__esModule",{value:!0}),de.TrouterManagerState=de.UserActivityEventReason=de.ServerState=void 0;var ye,Y,Oe,le=De(3),we=function(){function Y(K,q,ie,oe,L,z,J){this.connectionId=K,this.connectedClientId=q,this.domId=ie,this.unsecureUrl=oe,this.url=L,this.c2cUrlBase=z,this.expirationTsSec=J}return Y.prototype.getRemainingTtlInSec=function(){return(0,le.calculateTtlInSec)(this.expirationTsSec)},Y}();de.ServerState=we,(Y=ye||(de.UserActivityEventReason=ye={}))[Y.Unknown=0]="Unknown",Y[Y.Modified=1]="Modified",Y[Y.Snapshot=2]="Snapshot",Y[Y.Connected=3]="Connected",function(Y){Y[Y.Unknown=0]="Unknown",Y[Y.Connected=2]="Connected",Y[Y.Disconnected=3]="Disconnected",Y[Y.Switching=9]="Switching",Y[Y.TerminalError=10]="TerminalError"}(Oe||(de.TrouterManagerState=Oe={}))},function(ke,de,De){var oe=this&&this.__assign||function(){return oe=Object.assign||function(L){for(var z,J=1,fe=arguments.length;J<fe;J++)for(var _e in z=arguments[J])Object.prototype.hasOwnProperty.call(z,_e)&&(L[_e]=z[_e]);return L},oe.apply(this,arguments)};Object.defineProperty(de,"__esModule",{value:!0}),de.redirectUrlIfPresent=de.ensureNumber=de.reconnectParamsWithoutUrls=de.adaptUrl=de.isV4ConnectEvent=de.usedProtocolAfterFallback=de.usedProtocol=void 0,de.usedProtocol=function le(L,z){return"skype"===L&&"1"!==function we(L){return"string"==typeof L?L:"number"==typeof L?L.toString():void 0}(null==z?void 0:z.scae)?"v4a":"v4c"},de.usedProtocolAfterFallback=function ye(L,z){return"v4c-websocket-failure"===(null==z?void 0:z.kind)?"v4a":L},de.isV4ConnectEvent=function Oe(L){return Object.prototype.hasOwnProperty.call(L,"connectparams")},de.adaptUrl=function Y(L,z){return"v4a"===z?L.replace(/\/v4\/c\b/,"/v4/a").replace("wss://","https://").replace("ws://","http://"):L.replace(/\/v4\/a\b/,"/v4/c").replace("https://","wss://").replace("http://","ws://")},de.reconnectParamsWithoutUrls=function K(L){if(void 0!==L)return oe(oe({},L),{reconnectUrl:void 0,serviceUrl:void 0})},de.ensureNumber=function q(L){return"string"==typeof L?parseInt(L,10):L},de.redirectUrlIfPresent=function ie(L){if("redirect"===(null==L?void 0:L.kind)&&void 0!==L.host){var z=L.host;return z.endsWith("/")&&(z=z.substring(0,z.length-1)),z.endsWith("/v4/c")||z.endsWith("/v4/a")||(z+="/v4/c"),z}}},function(ke,de,De){Object.defineProperty(de,"__esModule",{value:!0}),de.TrouterFsm=de.State=void 0;var le,q,Y,we=De(4),ye=De(0),Oe=De(5);(q=le||(de.State=le={}))[q.Initial=0]="Initial",q[q.RetrievingToken=1]="RetrievingToken",q[q.Allocating=2]="Allocating",q[q.Handshaking=3]="Handshaking",q[q.Connecting=4]="Connecting",q[q.AnonymousConnecting=5]="AnonymousConnecting",q[q.WebsocketAuthenticating=6]="WebsocketAuthenticating",q[q.Connected=7]="Connected",q[q.Unregistering=8]="Unregistering",q[q.TerminalError=9]="TerminalError",function(q){q[q.Initial=0]="Initial",q[q.Registering=1]="Registering",q[q.RegisteringButResendPending=2]="RegisteringButResendPending",q[q.Retrying=3]="Retrying",q[q.Registered=4]="Registered",q[q.RegistrationDisabled=5]="RegistrationDisabled"}(Y||(Y={}));var K=function(){function q(ie,oe,L,z){this.worker=oe,this.incallModeEnabled=L,this.protocolSelector=z,this.state=le.Initial,this.autoReconnect=!0,this.logger=new ye.Logger("ConnectionFsm",ie),this.registrationState=Y.Initial}return q.prototype.getState=function(){return this.state},q.prototype.isActive=function(){return this.state===le.Allocating||this.state===le.Connected||this.state===le.Handshaking||this.state===le.Connecting||this.state===le.RetrievingToken||this.state===le.AnonymousConnecting||this.state===le.WebsocketAuthenticating},q.prototype.isConnecting=function(){return this.state===le.Allocating||this.state===le.Handshaking||this.state===le.Connecting||this.state===le.AnonymousConnecting},q.prototype.start=function(){return this.state===le.Initial?(this.setState(le.RetrievingToken),this.worker.getToken(!0,!1,void 0),!0):(this.showIgnored("start"),!1)},q.prototype.stop=function(ie,oe){ie&&(this.registrationState=Y.Initial),this.worker.isIncallMode()&&this.worker.exitIncallMode(),this.worker.resetTokenBackoff(),this.worker.cancelPendingRegistrationRequests(),this.worker.stopConnectionTimer(),this.worker.stopPingTimer(),this.worker.clearSentEventTimers(),this.worker.stopRegistrationTimer(),this.worker.stopSocketIo(),this.state===le.Connected&&this.worker.sendDisconnectTelemetryEvent("connection stopped"),this.registrationState!==Y.Registered&&this.registrationState!==Y.Registering&&this.registrationState!==Y.RegisteringButResendPending||this.state===le.Unregistering?oe?(this.setState(le.TerminalError),this.worker.dispatchTerminalError()):(this.setState(le.Initial),this.worker.dispatchDisconnected()):(this.registrationState=Y.Initial,this.setState(le.Unregistering),this.worker.sendUnregisterRequest())},q.prototype.onTokenReceived=function(ie,oe,L){this.state===le.RetrievingToken?"v4c"===(0,Oe.usedProtocolAfterFallback)(this.protocolSelector(ie.tokenType,L),oe)?(this.setState(le.AnonymousConnecting),this.worker.startConnectionTimer(),this.worker.connectV4c(ie,oe)):(this.setState(le.Allocating),this.worker.startConnectionTimer(),this.worker.sendAllocateRequest(ie)):this.showIgnored("onTokenReceived")},q.prototype.checkConnection=function(ie){ie&&this.onPingInterval()},q.prototype.onAllocationSucceed=function(ie){return this.state===le.Allocating&&this.registrationState===Y.Registered&&this.worker.dispatchUnregistered(),this.state===le.Allocating?(this.setState(le.Handshaking),this.registrationState=Y.Initial,this.worker.startSocketIo(ie),!0):(this.showIgnored("onAllocationSucceed"),!1)},q.prototype.onAllocationFailed=function(ie,oe){this.state===le.Allocating?this.cleanUpAndInitiateReconnect({backoff:!0,allowCachedToken:!ie,claimsChallenge:oe}):this.showIgnored("onAllocationFailed")},q.prototype.onV4cException=function(){this.state!==le.AnonymousConnecting&&this.state!==le.WebsocketAuthenticating||(this.logger.error("v4c exception, falling back to longpoll"),this.cleanUpAndInitiateReconnect({backoff:!0,allowCachedToken:!0,fallbackReason:{kind:"v4c-websocket-failure"}}))},q.prototype.onConnectingTimeout=function(){this.state===le.Allocating||this.state===le.Connecting||this.state===le.Handshaking||this.state===le.AnonymousConnecting||this.state===le.WebsocketAuthenticating?this.cleanUpAndInitiateReconnect({backoff:!1,allowCachedToken:!0}):this.showIgnored("onConnectingTimeout")},q.prototype.onConnecting=function(){this.state===le.Handshaking?this.setState(le.Connecting):this.showIgnored("onConnecting")},q.prototype.onSocketConnect=function(ie){this.state===le.AnonymousConnecting?(this.setState(le.WebsocketAuthenticating),this.worker.sendV4cAuthenticationEvent(ie)):this.showIgnored("onSocketConnect")},q.prototype.onConnectingFailed=function(){this.state===le.Connecting?this.onConnectingTimeout():this.state===le.Handshaking?(this.logger.error("Unexpected error in Socket.io - no valid transports"),this.onConnectingTimeout()):this.state===le.AnonymousConnecting||this.state===le.WebsocketAuthenticating?(this.logger.info("/v4/c falling back to longpoll"),this.cleanUpAndInitiateReconnect({backoff:!0,allowCachedToken:!0,fallbackReason:{kind:"v4c-websocket-failure"}})):this.showIgnored("onConnectingFailed")},q.prototype.onSocketDisconnect=function(ie){this.state===le.Handshaking||this.state===le.Connected||this.state===le.WebsocketAuthenticating?(this.state===le.Connected&&this.worker.sendDisconnectTelemetryEvent(null==ie?void 0:ie.toTelemetryString()),this.state===le.WebsocketAuthenticating&&this.worker.countDisconnectBeforeConnectionEstablishment(),"skypetoken-deprecated"===(null==ie?void 0:ie.reason)?(this.logger.error("Skypetoken deprecated response, not retrying any further"),this.onTerminalError()):this.cleanUpAndInitiateReconnect({backoff:this.state!==le.Connected&&"dup"!==(null==ie?void 0:ie.reason),allowCachedToken:"unauthorized"!==(null==ie?void 0:ie.reason),claimsChallenge:null==ie?void 0:ie.claims})):this.showIgnored("onSocketDisconnect")},q.prototype.onTrouterConnected=function(){this.state===le.Connecting||this.state===le.WebsocketAuthenticating?(this.setState(le.Connected),this.worker.resetTokenBackoff(),this.worker.stopConnectionTimer(),this.worker.sendUserActivityState(we.UserActivityEventReason.Connected,!0),this.worker.startPingTimer(),this.worker.dispatchConnected(),this.worker.shouldSkipRegistration()?(this.registrationState=Y.RegistrationDisabled,this.worker.dispatchRegistered()):(this.registrationState=Y.Registering,this.worker.sendRegisterRequest())):this.showIgnored("onTrouterConnected")},q.prototype.onReconnectRequired=function(ie,oe,L){this.state===le.AnonymousConnecting||this.state===le.WebsocketAuthenticating?void 0===L||"host"!==L.target||void 0===L.url||""===L.url?(this.logger.error("unexpected reconnect arguments: ".concat(null==L?void 0:L.target," ").concat(null==L?void 0:L.url,", reconnecting without cache")),this.cleanUpAndInitiateReconnect({backoff:!0,allowCachedToken:!0,fallbackReason:{kind:"redirect-no-host"}})):this.cleanUpAndInitiateReconnect({backoff:!0,allowCachedToken:!0,fallbackReason:{kind:"redirect",host:L.url}}):this.worker.dispatchReconnectIsRequired(ie,oe)},q.prototype.disableAutoReconnect=function(){this.autoReconnect=!1},q.prototype.onDownstreamRequest=function(ie){this.state===le.Connected?(this.switchToIncallModeIfEnabled(),this.worker.dispatchDownstreamRequest(ie)):this.showIgnored("onDownstreamRequest")},q.prototype.onTrouterMessageLost=function(ie){this.state===le.Connected?this.worker.dispatchTrouterMessageLost(ie):this.showIgnored("onTrouterMessageLost")},q.prototype.onPingInterval=function(){this.state===le.Connected?this.worker.sendPingRequest():this.showIgnored("onPingInterval")},q.prototype.onPingResponseTimeout=function(){this.onMissedResponse("onPingResponseTimeout")},q.prototype.onPingResponse=function(){this.state===le.Connected||this.showIgnored("onPingResponse")},q.prototype.onRegistrationFailed=function(){this.state===le.Connected&&this.registrationState===Y.Registering?(this.worker.dispatchUnregistered(),this.registrationState=Y.Retrying,this.worker.startRegistrationRetryTimer()):this.state===le.Connected&&this.registrationState===Y.RegisteringButResendPending?(this.registrationState=Y.Registering,this.worker.sendRegisterRequest()):this.showIgnored("onRegistrationFailed")},q.prototype.onRetryRegistration=function(){this.state===le.Connected&&this.registrationState===Y.Retrying?(this.registrationState=Y.Registering,this.worker.sendRegisterRequest()):this.showIgnored("onRetryRegistration")},q.prototype.onRegistrationSucceeded=function(){this.state===le.Connected&&this.registrationState===Y.Registering?(this.registrationState=Y.Registered,this.worker.dispatchRegistered(),this.worker.startRegistrationTimer()):this.state===le.Connected&&this.registrationState===Y.RegisteringButResendPending?(this.registrationState=Y.Registering,this.worker.sendRegisterRequest()):this.showIgnored("onRegistrationSucceeded")},q.prototype.onRegistrationNearExpiry=function(){this.state===le.Connected&&this.registrationState===Y.Registered?(this.registrationState=Y.Registering,this.worker.sendRegisterRequest()):this.showIgnored("onRegistrationNearExpiry")},q.prototype.onUnregistrationDone=function(){this.state===le.Unregistering?(this.setState(le.Initial),this.worker.dispatchUnregistered(),this.worker.dispatchDisconnected()):this.showIgnored("onUnregistrationDone")},q.prototype.onResendRegistration=function(){this.worker.dispatchUnregistered(),this.state===le.Connected&&this.registrationState===Y.Registered?(this.registrationState=Y.Registering,this.worker.stopRegistrationTimer(),this.worker.sendRegisterRequest()):this.state===le.Connected&&this.registrationState===Y.Registering&&(this.registrationState=Y.RegisteringButResendPending)},q.prototype.onIncallModeTimer=function(){this.worker.exitIncallMode(),this.state===le.Connected?(this.worker.stopPingTimer(),this.worker.startPingTimer()):this.showIgnored("onIncallModeTimer")},q.prototype.onSetNewUserActivityState=function(){this.worker.sendUserActivityState(we.UserActivityEventReason.Modified,this.state===le.Connected)},q.prototype.onActivityStateResponseTimeout=function(){this.onMissedResponse("onActivityStateResponseTimeout")},q.prototype.forceReconnect=function(ie){this.state===le.Connected&&this.worker.sendDisconnectTelemetryEvent(ie),this.worker.resetTokenBackoff(),this.cleanUpAndInitiateReconnect({backoff:!1,allowCachedToken:!0})},q.prototype.onTerminalError=function(){this.logger.error("Cannot proceed, reached terminal state. Switching from state '".concat(le[this.state],"' to ").concat(le[le.TerminalError])),this.stop(!0,!0),this.setState(le.TerminalError)},q.prototype.onMissedResponse=function(ie){this.state===le.Connected?(this.worker.sendDisconnectTelemetryEvent(ie),this.cleanUpAndInitiateReconnect({backoff:!1,allowCachedToken:!0})):this.showIgnored(ie)},q.prototype.showIgnored=function(ie){this.logger.debug("Ignoring event '".concat(ie,"' in state '").concat(le[this.state],"'"))},q.prototype.setState=function(ie){this.logger.info("Switching from state '".concat(le[this.state],"' to state '").concat(le[ie],"'")),this.state!==ie?this.state=ie:this.logger.error("Attempt to switch to the current state '".concat(le[ie],"'"))},q.prototype.switchToIncallModeIfEnabled=function(){this.incallModeEnabled&&(this.worker.isIncallMode()||(this.worker.enterIncallMode(),this.worker.stopPingTimer(),this.worker.startPingTimer()),this.worker.restartIncallModeTimer())},q.prototype.cleanUpAndInitiateReconnect=function(ie){if(!this.autoReconnect)return this.logger.info("Automatic reconnect is disabled, stopping this connection"),void this.stop(!0);this.worker.cancelPendingRegistrationRequests(),this.worker.stopConnectionTimer(),this.worker.stopPingTimer(),this.worker.clearSentEventTimers(),this.worker.stopRegistrationTimer(),this.worker.stopSocketIo(),this.setState(le.RetrievingToken),this.worker.dispatchReconnecting(),this.worker.getToken(ie.allowCachedToken,ie.backoff,ie.claimsChallenge,ie.fallbackReason)},q}();de.TrouterFsm=K},function(ke,de,De){function le(X,x){var te=x?void 0:{"X-MS-Migration":"True"};switch(X.tokenType.toLowerCase()){case"skype":return Y({"X-Skypetoken":X.token},te);case"aad":case"cae":return Y({Authorization:"Bearer ".concat(X.token)},te);default:throw new Error("unsupported token type: ".concat(X.tokenType))}}function ye(X){return"object"==typeof X&&null!==X&&void 0!==X.stack?(0,L.toJson)(X.stack):'"(no error.stack)"'}function Oe(X){return"object"==typeof X&&null!==X&&"string"==typeof X.message?X.message:"(no error.message)"}var Y=this&&this.__assign||function(){return Y=Object.assign||function(X){for(var x,te=1,me=arguments.length;te<me;te++)for(var ue in x=arguments[te])Object.prototype.hasOwnProperty.call(x,ue)&&(X[ue]=x[ue]);return X},Y.apply(this,arguments)},K=this&&this.__awaiter||function(X,x,te,me){return new(te||(te=Promise))(function(be,Le){function Rt(jt){try{Ct(me.next(jt))}catch(yn){Le(yn)}}function Tt(jt){try{Ct(me.throw(jt))}catch(yn){Le(yn)}}function Ct(jt){jt.done?be(jt.value):function ue(be){return be instanceof te?be:new te(function(Le){Le(be)})}(jt.value).then(Rt,Tt)}Ct((me=me.apply(X,x||[])).next())})},q=this&&this.__generator||function(X,x){function te(Ct){return function(jt){return function me(Ct){if(ue)throw new TypeError("Generator is already executing.");for(;Rt&&(Rt=0,Ct[0]&&(Tt=0)),Tt;)try{if(ue=1,be&&(Le=2&Ct[0]?be.return:Ct[0]?be.throw||((Le=be.return)&&Le.call(be),0):be.next)&&!(Le=Le.call(be,Ct[1])).done)return Le;switch(be=0,Le&&(Ct=[2&Ct[0],Le.value]),Ct[0]){case 0:case 1:Le=Ct;break;case 4:return Tt.label++,{value:Ct[1],done:!1};case 5:Tt.label++,be=Ct[1],Ct=[0];continue;case 7:Ct=Tt.ops.pop(),Tt.trys.pop();continue;default:if(!(Le=(Le=Tt.trys).length>0&&Le[Le.length-1])&&(6===Ct[0]||2===Ct[0])){Tt=0;continue}if(3===Ct[0]&&(!Le||Ct[1]>Le[0]&&Ct[1]<Le[3])){Tt.label=Ct[1];break}if(6===Ct[0]&&Tt.label<Le[1]){Tt.label=Le[1],Le=Ct;break}if(Le&&Tt.label<Le[2]){Tt.label=Le[2],Tt.ops.push(Ct);break}Le[2]&&Tt.ops.pop(),Tt.trys.pop();continue}Ct=x.call(X,Tt)}catch(jt){Ct=[6,jt],be=0}finally{ue=Le=0}if(5&Ct[0])throw Ct[1];return{value:Ct[0]?Ct[1]:void 0,done:!0}}([Ct,jt])}}var ue,be,Le,Rt,Tt={label:0,sent:function(){if(1&Le[0])throw Le[1];return Le[1]},trys:[],ops:[]};return Rt={next:te(0),throw:te(1),return:te(2)},"function"==typeof Symbol&&(Rt[Symbol.iterator]=function(){return this}),Rt};Object.defineProperty(de,"__esModule",{value:!0}),de.TrouterConnection=de.ReconnectReason=void 0;var ie,X,oe=De(21),L=De(3),z=De(15),J=De(1),fe=De(16),_e=De(17),B=De(2),W=De(4),G=De(0),ne=De(5),Z=De(6),ee=De(12),re=function(){return function X(){this.cv=J.CLIENT_VERSION,this.ua="",this.hr="",this.v=""}}(),We=function(){function X(){this["force new connection"]=!0,this.reconnect=!1,this.query="",this.ackTimeoutMs=5e3}return X.prototype.rewriteUrlForProxy=function(x){return x},X}(),Ge="MS-CV",qe=function(){function X(x,te){this.logger=te,this.cvCounter=0;var me=JSON.parse(x);this.startTS=this.safeJsonNumber(me,"startTS",0),this.url=this.safeJsonString(me,"url",""),this.shortUrl=this.safeJsonString(me,"shortUrl",""),this.body=this.safeJsonString(me,"body",""),this.headers=this.safeJsonRecord(me,"headers",{}),this.id=this.safeJsonNumber(me,"id",-1),this.method=this.safeJsonString(me,"method",""),this.replied=!1,this.timedout=!1,this.receivedCv=this.headers[Ge],this.updateCvHeader()}return Object.defineProperty(X.prototype,"correlationVector",{get:function(){return this.receivedCv?"".concat(this.receivedCv,".").concat(this.cvCounter):""},enumerable:!1,configurable:!0}),X.prototype.on=function(x,te){"data"===x?this.dataCallback=te:"end"===x&&("function"==typeof this.dataCallback&&this.dataCallback(this.body),te())},X.prototype.incrementCorrelationVector=function(){++this.cvCounter,this.updateCvHeader()},X.prototype.updateCvHeader=function(){var x=this.correlationVector;x&&(this.headers[Ge]=x)},X.prototype.safeJsonNumber=function(x,te,me){var ue;if(null!=x&&Object.prototype.hasOwnProperty.call(x,te)){var be=x;if("number"==typeof be[te])return be[te];if("string"==typeof be[te])return parseFloat(be[te]);null===(ue=this.logger)||void 0===ue||ue.warn("unexpected type of '".concat(te,"': ").concat(typeof be[te]))}return me},X.prototype.safeJsonString=function(x,te,me){var ue;if(null!=x&&Object.prototype.hasOwnProperty.call(x,te)){var be=x;if("string"==typeof be[te])return be[te];null===(ue=this.logger)||void 0===ue||ue.warn("unexpected type of '".concat(te,"': ").concat(typeof be[te]))}return me},X.prototype.safeJsonRecord=function(x,te,me){var ue;if(null!=x&&Object.prototype.hasOwnProperty.call(x,te)){var be=x;if("object"==typeof be[te])return be[te];null===(ue=this.logger)||void 0===ue||ue.warn("unexpected type of '".concat(te,"': ").concat(typeof be[te]))}return me},X}(),Ze=function(){function X(x,te,me){this.request=x,this.responseData=te,this.sendResponse=me}return X.prototype.writeHead=function(x,te){this.responseData.status=x,this.responseData.headers=te},X.prototype.write=function(x){this.responseData.body+=x},X.prototype.end=function(x){return x&&(this.responseData.body+=x),this.sendResponse(this.request,this.responseData)},X}(),Ht=function(){return function X(x){this.name=x,this.args={},this.timeoutTimerId=0}}();(X=ie||(de.ReconnectReason=ie={}))[X.Configuration=0]="Configuration",X[X.ServerInitiated=1]="ServerInitiated";var zt=function(){function X(x,te,me,ue,be,Le,Rt,Tt){var Ct,jt=this;this.options=te,this.manager=me,this.tokenProvider=ue,this.usingLegacyTokenApi=be,this.protocolSelector=Rt,this.audienceSubscriptionState=Tt,this.WEBSOCKET_TRANSPORT_NAME="websocket",this.XHR_POLLING_TRANSPORT_NAME="xhr-polling",this.AUDIENCE_SUBSCRIPTION_RESULT_ERROR="Error",this.AUDIENCE_SUBSCRIPTION_RESULT_UNSUBSCRIBED="Unsubscribed",this.AUDIENCE_SUBSCRIPTION_RESULT_TIMEOUT="Timeout",this.AUDIENCE_SUBSCRIPTION_RESULT_BAD_REQUEST="BadRequest",this.AUDIENCE_SUBSCRIPTION_STATE_QUERY_PARAM_REGEX=/&audienceSubscriptionState=[^&]*|^audienceSubscriptionState=[^&]*&?/,this.connectionId="",this.inIncallMode=!1,this.connectionAttempt=0,this.connectedClientId="",this.isNavigatorOnline=!0,this.onNavigatorOnlineStatusUpdateBound=this.onNavigatorOnlineStatusUpdate.bind(this),this.c2cUrlBase="",this.connectingErrorsInRow=0,this.unauthorizedErrorCount=0,this.pendingSentEventTimers={},this.lastDisconnectReason="",this.UNKNOWN_TRANSPORT="unknown_transport",this.connectingErrorsThreshold=3,this.pendingAudienceSubscription=void 0,this.logger=new G.Logger("Connection",x),this.timeoutOptions=this.options.timeoutOptions,this.tokenBackoff=new _e.ExponentialBackoff(this.logger,this.timeoutOptions.maxBackoffMs),this.clientID=Date.now(),typeof window<"u"&&window.location&&(this.domId=window.location.hostname);var yn=new re;yn.cv=J.CLIENT_VERSION,yn.ua="",!(null===(Ct=this.options)||void 0===Ct)&&Ct.clientInfo&&(yn.ua=this.safeString(this.options.clientInfo.ua),yn.v=this.safeString(this.options.clientInfo.v)),this.clientInfo=yn,this.connectionTracker=new z.ConnectionTracker(x,this.clientID,this.clientInfo,function(){return jt.getServerState()},this.options.endpointId,this.options.clientCorrelationID,this.options.environment),this.applyConnectionTrackerOptions(te),this.fsm=new Z.TrouterFsm(x,this,this.options.incallModeTimeoutMs>0,this.protocolSelector),te.registration&&(this.registrarClient=(0,oe.createRegistrarClient)(x,this.tokenProvider,{registrarUrl:te.registration.registrarUrl,proxyUrlRewrite:te.rewriteUrlForProxy,registrationId:te.registration.registrationId,requestTimeoutMs:te.timeoutOptions.fetchTimeoutMs,initialRetryDelayMs:1e3,maxRetryDelayMs:te.timeoutOptions.maxBackoffMs,usingLegacyTokenApi:this.usingLegacyTokenApi,maxRetriesForGetToken:te.retryLimitOnTokenFetch,extraRegistrationHeaders:te.extraConnectionHeaders})),this.userActivityState=Le}return X.prototype.start=function(x){this.logger.info("Starting"),this.reconnectParams=x,typeof window<"u"&&window.navigator&&window.addEventListener?(this.isNavigatorOnline=window.navigator.onLine,window.addEventListener("online",this.onNavigatorOnlineStatusUpdateBound),window.addEventListener("offline",this.onNavigatorOnlineStatusUpdateBound),this.logger.debug("Registered for browser online notifications - current state: ".concat(this.isNavigatorOnline))):this.isNavigatorOnline=!0,this.fsm.start()},X.prototype.stop=function(x){this.logger.info("Stopping"),typeof window<"u"&&window.navigator&&(window.removeEventListener("online",this.onNavigatorOnlineStatusUpdateBound),window.removeEventListener("offline",this.onNavigatorOnlineStatusUpdateBound)),this.fsm.stop(x),this.connectionTracker.close()},X.prototype.configure=function(x){var te=this.options.trouterUrl!==x.trouterUrl;this.options=x,this.applyConnectionTrackerOptions(x),te&&(this.logger.info("Configuration changed. Reconnection required."),this.fsm.onReconnectRequired(!1,ie.Configuration))},X.prototype.checkConnection=function(x){this.logger.info("checkConnection called with ".concat(x)),this.fsm.checkConnection(x),x&&this.connectionTracker.sendTelemetry(z.ClientEventName.CheckConnection,{disconnectDetected:x},[])},X.prototype.disableRegistrationsAndAutoReconnect=function(){this.stopRegistrationTimer(),this.cancelPendingRegistrationRequests(),this.fsm.disableAutoReconnect()},X.prototype.getServerState=function(){return new W.ServerState(this.connectionId,this.connectedClientId,this.domId?this.domId:"",this.allocateResult?this.allocateResult.url:"",this.allocateResult?this.allocateResult.surl:"",this.c2cUrlBase,this.connectionExpireTimestampInSecs)},X.prototype.getState=function(){return this.fsm.getState()},X.prototype.getToken=function(x,te,me,ue,be){var Le=this;void 0===be&&(be=0),this.logger.info("Getting token ".concat(te?"with backoff":"without backoff"));var Rt=function(){Le.connectionTracker.trackStart("token");var Tt={needFresh:!x,wwwAuthenticateHeader:me,supportedTokenTypes:J.SUPPORTED_TOKEN_TYPES,purpose:"trouter"};Le.logger.info("Requesting token: needFresh=".concat(Tt.needFresh," ")+"types=[".concat(J.SUPPORTED_TOKEN_TYPES,"], ")+"wwwAuthenticateHeader is ".concat(Tt.wwwAuthenticateHeader?"non empty":"empty")),Le.tokenProvider(Tt).then(function(Ct){Le.logger.debug("".concat(Ct.tokenType," token is received")),Le.connectionTracker.trackEnd("token"),Le.fsm.onTokenReceived(Ct,ue,Le.reconnectParams)}).catch(function(Ct){var jt=(0,L.toJson)(Ct.stack);if(Le.logger.error("Getting token failed, will retry after timeout. Error: ".concat(jt)),Le.connectionTracker.trackError("token",jt),!Le.canRetryTokenFetchRequest(be+Le.unauthorizedErrorCount))return Le.connectionTracker.trackError("token","getToken retry limit hit, reached terminal error state"),Le.resetTokenBackoff(),void Le.fsm.onTerminalError();Le.getToken(x,!0,me,ue,be+1)})};te?this.tokenBackoff.backoff("getting token",Rt):(this.resetTokenBackoff(),Rt())},X.prototype.startConnectionTimer=function(){var x=this;this.stopConnectionTimer(),this.logger.debug("Starting connection timeout for ".concat(this.timeoutOptions.connectionTimeoutMs," ms")),this.connectionTimeoutId=setTimeout(function(){x.logger.info("Connection timeout is fired"),x.fsm.onConnectingTimeout()},this.timeoutOptions.connectionTimeoutMs)},X.prototype.stopConnectionTimer=function(){this.connectionTimeoutId&&(this.logger.debug("Stopping connection timeout"),clearTimeout(this.connectionTimeoutId),this.connectionTimeoutId=void 0)},X.prototype.startPingTimer=function(){var x=this;"websocket"===this.transportTypeName?(this.logger.debug("Starting ping timeout for ".concat(this.timeoutOptions.pingTimeoutMs," ms")),this.pingTimerId=setInterval(function(){x.logger.info("Ping interval fired"),x.fsm.onPingInterval()},this.timeoutOptions.pingTimeoutMs)):this.logger.debug("Not starting ping for transport ".concat(this.transportTypeName))},X.prototype.stopPingTimer=function(){this.pingTimerId&&(this.logger.debug("Stopping ping timeout"),this.clearPingResponseTimer(),clearInterval(this.pingTimerId),this.pingTimerId=void 0)},X.prototype.shouldSkipRegistration=function(){return void 0===this.options.registration},X.prototype.hasCustomRegistrationTtl=function(){var x,te;return void 0!==(null===(x=this.options.registration)||void 0===x?void 0:x.registrarTtlSec)&&0!==(null===(te=this.options.registration)||void 0===te?void 0:te.registrarTtlSec)},X.prototype.startRegistrationTimer=function(){var x=this;this.stopRegistrationTimer();var te=this.getRegistrationTtl(),me=te[0];if(me<=30||!te[1])return this.logger.debug("Starting registration expiration timer (TTL ".concat(me," sec)")),void(this.registrationTimerId=setTimeout(function(){x.registrationTimerId=void 0,x.logger.warn("Registration expired but the connection is still alive. Should never happen"),x.dispatchUnregistered()},1e3*me));var be=me-30;this.logger.debug("Starting registration extension timer for ".concat(be," sec")),this.registrationTimerId=setTimeout(function(){x.logger.info("Registration extension timer fired"),x.registrationTimerId=setTimeout(function(){x.registrationTimerId=void 0,x.logger.debug("Registration extension did not happen in time"),x.dispatchUnregistered()},3e4),x.fsm.onRegistrationNearExpiry()},1e3*be)},X.prototype.startRegistrationRetryTimer=function(){var x=this;this.stopRegistrationTimer(),this.registrationTimerId=setTimeout(function(){x.registrationTimerId=void 0,x.fsm.onRetryRegistration()},123e3)},X.prototype.stopRegistrationTimer=function(){this.registrationTimerId&&(this.logger.debug("Stopping registration timeout"),clearTimeout(this.registrationTimerId),this.registrationTimerId=void 0)},X.prototype.resendRegistration=function(){if(!this.registrarClient)throw new Error("Trouter Client not configured to handle registrations");return this.fsm.onResendRegistration(),Promise.resolve()},X.prototype.buildSocketIoUrlParams=function(x,te){if(!this.allocateResult)throw new Error("Allocate result is undefined in buildSocketIoUrlParams()");for(var me={},ue=this.allocateResult.connectparams,be=0,Le=Object.keys(ue);be<Le.length;be++){var Rt=Le[be];if(void 0!==ue[Rt]){var Tt=ue[Rt];"string"==typeof Tt||"number"==typeof Tt?me[Rt]=Tt:this.logger.error("signatureData[".concat(Rt,"] has unsupported type ").concat(typeof Tt))}}return me.v="v4",me.tc=encodeURI((0,L.toJson)(this.clientInfo)),me.timeout=this.timeoutOptions.pingTimeoutMs/1e3,me.auth="true",this.options.endpointId&&(me.epid=this.options.endpointId),x&&(me.userActivity=encodeURI((0,L.toJson)(x))),te&&(me.audienceSubscriptionState=encodeURIComponent((0,L.toJson)(te))),this.appendConnectedClientIds(this.buildQuery(me),!0)},X.prototype.startSocketIo=function(x){var te,me;if(this.logger.debug("Starting socket io"),this.connectionTracker.trackStart("connectSocket"),!this.allocateResult)throw new Error("Allocate result is undefined in startSocketIo()");var ue=this.options.ioOptions?Y({},this.options.ioOptions):new We,be=this.userActivityState.state!==B.UserActivityState.Unknown?this.userActivityState.increaseCvAndGetEventObject():void 0,Le=null===(te=this.audienceSubscriptionState)||void 0===te?void 0:te.increaseCvAndGetEventObject();if(ue["force new connection"]=!0,ue.reconnect=!1,ue.rewriteUrlForProxy=this.options.rewriteUrlForProxy,ue.requestHeaders=Y(Y({},this.options.extraConnectionHeaders),le(x,this.usingLegacyTokenApi)),ue.query=this.buildSocketIoUrlParams(be,Le),this.logger.info("connecting to ".concat(this.allocateResult.socketio,"?").concat(ue.query)),this.stopSocketIo(),this.socket=(null!==(me=this.options.io)&&void 0!==me?me:ee).connect(this.allocateResult.socketio,ue),void 0===this.socket)throw new Error("Can't create Socket.io object");this.attachSocketIoHandlers(this.socket,x,be,Le)},X.prototype.stopSocketIo=function(){if(this.socket){this.logger.debug("clearing socket.io");try{for(var x=0,te=["connecting","connect","connect_failed","close_during_connecting","disconnect","reconnect","reconnect_failed","reconnecting","error","message","trouter.connected","trouter.reconnect","trouter.message_loss"];x<te.length;x++)this.socket.removeAllListeners(te[x]);this.socket.disconnect(),this.logger.debug("cleared socket"),this.socket=void 0}catch(ue){this.logger.error("exception in disconnecting previous socket. Error: ".concat(ye(ue)))}}},X.prototype.dispatchConnected=function(){this.logger.info("dispatching connected"),this.manager.onConnected(this)},X.prototype.dispatchRegistered=function(){this.logger.info("dispatching registered"),this.manager.onRegistered(this)},X.prototype.dispatchUnregistered=function(){this.logger.info("dispatching unregistered"),this.manager.onUnregistered(this)},X.prototype.dispatchDownstreamRequest=function(x){var te=this;this.logger.debug("dispatching downstream request");try{var me=new Ze(x,new z.ResponseData(x.id),function(ue,be){return te.logger.debug("sending response to downstream"),te.sendResponse(ue,be)});this.manager.onDownstreamRequest(this,x,me)}catch(ue){this.logger.error("exception in socket.on message. Error : ".concat(ye(ue)))}},X.prototype.dispatchReconnecting=function(){this.logger.info("dispatching reconnecting"),this.manager.onReconnecting(this)},X.prototype.dispatchReconnectIsRequired=function(x,te){this.logger.info("dispatching reconnect is required by server"),this.manager.onReconnectIsRequired(this,x,te)},X.prototype.dispatchDisconnected=function(){this.logger.info("dispatching disconnected"),this.manager.onDisconnected(this)},X.prototype.dispatchTerminalError=function(){this.logger.info("dispatching terminal error"),this.manager.onTerminalError(this)},X.prototype.dispatchTrouterMessageLost=function(x){this.logger.info("dispatching trouter message lost"),this.manager.onTrouterMessageLost(x)},X.prototype.countDisconnectBeforeConnectionEstablishment=function(){this.logger.warn("counting disconnect before connection was fully established as a connection failure"),++this.connectingErrorsInRow>=this.connectingErrorsThreshold&&this.resetReconnectParamsOnErrorThreshold()},X.prototype.sendProcessedDroppedIndicators=function(x){var te=this;try{this.logger.debug("emitting processed flow tags to the server");var me=new Ht("trouter.processed_message_loss");me.args={droppedIndicators:x},this.sendDownstreamEvent(me,function(){te.logger.info("emitted processed flow tags to the server")})}catch(be){var ue=ye(be);this.logger.error("unable to send processed message loss event. Error: ".concat(ue)),this.connectionTracker.trackError("trouter.processed_message_loss",ue,!1)}},X.prototype.sendAllocateRequest=function(x){var te=this;this.connectionAttempt++,this.connectionTracker.trackNewConnection();var me,ue=this.options.trouterUrl,be=this.reconnectParams,Le="string"==typeof(null==be?void 0:be.se)?parseInt(be.se,10):"number"==typeof(null==be?void 0:be.se)?be.se:void 0;Le&&Le<=Date.now()+36e5&&(this.logger.warn("Dropping expired cached connection parameters: ".concat(new Date(Le))),this.reconnectParams=be=void 0),be&&be.serviceUrl!==ue&&(this.logger.warn("Dropping cached connection parameters for a different environment (".concat(be.serviceUrl,", now ").concat(ue,")")),this.reconnectParams=be=void 0),null!=be&&be.reconnectUrl&&(ue=be.reconnectUrl),me=be?Y(Y({},be),{serviceUrl:void 0,reconnectUrl:void 0}):null,ue=(0,ne.adaptUrl)(ue,"v4a"),ue=this.appendCorrelationIds(ue,!1),ue=this.appendEndpointId(ue,!1),me&&(ue+="&".concat(this.buildQuery(me)),me.v||(ue+="&v=".concat("v4"))),ue=this.options.rewriteUrlForProxy(ue);var Rt=new Request(ue,{method:"POST",mode:"cors",headers:new Headers(Y(Y({"Content-Type":"text/plain"},this.options.extraConnectionHeaders),le(x,this.usingLegacyTokenApi)))});this.logger.info("sendAllocateRequest: POST ".concat(ue)),this.connectionTracker.trackStart("allocation");var Tt,Ct=Date.now(),jt=-1,yn=!1;(0,L.fetchWithTimeout)(Rt,this.timeoutOptions.fetchTimeoutMs).then(function(kn){var Gn;if(jt=kn.status,!kn.ok)throw Tt=null!==(Gn=kn.headers.get("www-authenticate"))&&void 0!==Gn?Gn:void 0,yn="1"===kn.headers.get("x-trouter-skypetoken-deprecated"),te.logger.warn("Allocation request got response status ".concat(kn.status,", www-authenticate header was ").concat(Tt?"not empty":"empty")),new Error(kn.statusText);var nr=kn.headers.get("content-type");if(!nr||"application/json"!==nr&&!nr.startsWith("application/json;"))throw new Error("Content-type '".concat(nr,"' is unexpected"));return te.connectionTracker.trackEnd("allocation"),kn.json()}).then(function(kn){te.unauthorizedErrorCount=0,te.onAllocationResponse(kn,x)}).catch(function(kn){te.connectingErrorsInRow++;var nr,Gn="".concat(kn).concat(jt>=0?", status code ".concat(jt):"");if(te.logger.error("".concat(te.connectingErrorsInRow," failed connecting attempt(s) in a row. ").concat(Gn)),te.connectionTracker.trackError("allocation",Gn),yn)return te.logger.error(nr="Skypetoken deprecated response, not retrying any further"),te.connectionTracker.trackError("allocation",nr),void te.fsm.onTerminalError();if(401===jt&&te.unauthorizedErrorCount++,!te.canRetryTokenFetchRequest(te.unauthorizedErrorCount))return te.connectionTracker.trackError("allocation",nr="getToken retry limit hit, reached terminal error state"),void te.fsm.onTerminalError();if(-1!==jt||te.isNavigatorOnline){if(te.reconnectParams&&te.connectingErrorsInRow>=te.connectingErrorsThreshold)if(jt>=400&&jt<=599)te.resetReconnectParamsOnErrorThreshold();else if(te.reconnectParams.reconnectUrl&&te.connectingErrorsInRow%3==0){te.logger.warn("".concat(te.connectingErrorsInRow," connection attempts, testing nominal service URL"));var $i=Math.min(te.timeoutOptions.connectionTimeoutMs-(Date.now()-Ct)-500,te.timeoutOptions.fetchTimeoutMs);return void te.testNominalUrlConnectivity($i).then(function(yo){te.connectionTracker.trackProgress("nomcheck",yo?"ok":"failed"),yo?(te.logger.warn("Nominal service URL is reachable, erasing cached reconnect URL"),te.reconnectParams&&delete te.reconnectParams.reconnectUrl):te.logger.warn("Nominal service URL is not reachable either, keeping cached reconnect URL"),te.fsm.onAllocationFailed(!1,void 0)},function(){te.fsm.onAllocationFailed(!1,void 0)})}}else te.logger.info("Expected failure, the browser says it is not online at the moment");te.fsm.onAllocationFailed(401===jt,Tt)})},X.prototype.testNominalUrlConnectivity=function(x){var me,te=this;if(x<1e3)return this.logger.warn("There is no time left to reasonably perform the nominal service URL connectivity check (".concat(x," ms), falling back to assuming that the connectivity is fine")),Promise.resolve(!0);try{var ue=new URL(this.options.trouterUrl);ue.pathname="/",ue.search="?"+this.buildQuery({check:Date.now(),cor_id:encodeURIComponent(this.options.clientCorrelationID),epid:encodeURIComponent(this.options.endpointId?this.options.endpointId:""),tc:encodeURIComponent((0,L.toJson)(this.clientInfo))}),me=new Request(this.options.rewriteUrlForProxy(ue.toString()),{method:"GET",headers:{Accept:"text/plain"}})}catch(be){return this.logger.warn("Nominal service URL connectivity test request could not be created (".concat(be,"), falling back to assuming that the connectivity is fine")),Promise.resolve(!0)}return(0,L.fetchWithTimeout)(me,x).then(function(be){if(200!==be.status)throw new Error("Not 200 OK: ".concat(be.status," ").concat(be.statusText));return be.text()}).then(function(be){if("Trouter"!==be)throw new Error('Not "Trouter": '.concat(be.substring(0,16)).concat(be.length>16?"...":""));return!0}).catch(function(be){return te.logger.error("Nominal service URL connectivity test failed: ".concat(be)),!1})},X.prototype.sendPingRequest=function(){var x=this;if(this.socket&&void 0===this.pingResponseTimerId)try{this.logger.debug("emitting ping event");var te=!1;this.socket.emit("ping",function(){!0!==te&&x.onPingResponse()}),this.pingResponseTimerId=setTimeout(function(){x.logger.error("Ping response timeout is fired"),te=!0,x.clearPingResponseTimer(),x.fsm.onPingResponseTimeout()},this.timeoutOptions.pongTimeoutMs)}catch(ue){var me=ye(ue);this.logger.error("unable to send ping. Error: ".concat(me)),this.connectionTracker.trackError("ping",me,!1)}},X.prototype.connectV4c=function(x,te){var me,ue,be,Le,Rt,Tt,Ct=this.options.ioOptions?Y({},this.options.ioOptions):new We;Ct["force new connection"]=!0,Ct.reconnect=!1,null!==(me=this.reconnectParams)&&void 0!==me&&me.serviceUrl&&(0,ne.adaptUrl)(this.reconnectParams.serviceUrl,"v4c")!==(0,ne.adaptUrl)(this.options.trouterUrl,"v4c")&&(this.logger.warn("Dropping cached connection parameters for a different environment (".concat(this.reconnectParams.serviceUrl,", now ").concat(this.options.trouterUrl,")")),this.reconnectParams=void 0);var jt=null!==(Le=null!==(ue=(0,ne.redirectUrlIfPresent)(te))&&void 0!==ue?ue:"redirect-no-host"!==(null==te?void 0:te.kind)?null===(be=this.reconnectParams)||void 0===be?void 0:be.reconnectUrl:void 0)&&void 0!==Le?Le:this.options.trouterUrl,yn=(0,ne.adaptUrl)(jt,"v4c");Ct["skipped handshake data"]={timeout:70,websocketUrl:yn},Ct.query=this.buildV4cUrlParams(),Ct.rewriteUrlForProxy=this.options.rewriteUrlForProxy;try{if(this.stopSocketIo(),this.transportTypeName="websocket",this.socket=(null!==(Rt=this.options.io)&&void 0!==Rt?Rt:ee).connect(this.options.trouterUrl,Ct),void 0===this.socket)throw new Error("failed to create Socket.io object");var kn=null===(Tt=this.audienceSubscriptionState)||void 0===Tt?void 0:Tt.increaseCvAndGetEventObject();this.attachSocketIoHandlers(this.socket,x,void 0,kn)}catch(Gn){this.logger.error("".concat(Gn)),this.connectionTracker.trackError("v4c","".concat(Gn)),this.fsm.onV4cException()}},X.prototype.sendV4cAuthenticationEvent=function(x){var te,me={headers:Y(Y({},this.options.extraConnectionHeaders),le(x,this.usingLegacyTokenApi)),connectparams:(0,ne.reconnectParamsWithoutUrls)(this.reconnectParams)};null===(te=this.socket)||void 0===te||te.emit(J.USER_AUTHENTICATE_EVENT_NAME,me)},X.prototype.setUserActivityState=function(x){var te=x.state!==this.userActivityState.state;this.userActivityState=x,te?(this.logger.info("Changing user activity state to '".concat(x.toEventJSON(),"'")),this.fsm.onSetNewUserActivityState()):(this.logger.debug("Not changing the same user activity state '".concat(x.toEventJSON(),"'")),this.manager.onUserActivityStateAccepted(x.correlationVector.value()))},X.prototype.sendUserActivityState=function(x,te){this.userActivityState.state!==B.UserActivityState.Unknown&&("websocket"===this.transportTypeName&&te?this.sendUserActivityStateMultiple(x===W.UserActivityEventReason.Connected?2:1):"xhr-polling"===this.transportTypeName&&x===W.UserActivityEventReason.Modified&&this.fsm.forceReconnect("user activity/force reconnect"))},X.prototype.setAudienceSubscriptionsAsync=function(x,te){var me=this.audienceSubscriptionState;if(this.audienceSubscriptionState=x,this.transportTypeName===this.WEBSOCKET_TRANSPORT_NAME)return this.setAudienceSubscriptionsInternalAsync(x.increaseCvAndGetEventObject(),te);if(this.transportTypeName===this.XHR_POLLING_TRANSPORT_NAME){var ue=this.setAudienceSubscriptionsLongpollInternalAsync(x.increaseCvAndGetEventObject(),te,me);return this.fsm.forceReconnect("set audience subscription force reconnect"),ue}throw new Error("set audience subscription executed on an unknown transport")},X.prototype.setAudienceSubscriptionsUnsafeAsync=function(x){if(x)return this.transportTypeName===this.WEBSOCKET_TRANSPORT_NAME?this.setAudienceSubscriptionsInternalAsync(x,15e3):void 0},X.prototype.setAudienceSubscriptionsInternalAsync=function(x,te){return K(this,void 0,void 0,function(){var me,ue,be=this;return q(this,function(Le){switch(Le.label){case 0:return this.logger.info("[WebSocket] Audience subscription set requested."),(me=new Ht("audience.subscribe")).args=x,[4,new Promise(function(Rt){var Tt=!1,Ct=setTimeout(function(){return Tt=!0,Rt(be.buildAudienceSubscriptionsTimeoutResponse(x))},te);be.sendDownstreamEvent(me,function(jt,yn){Tt||(clearTimeout(Ct),be.logger.debug("[Websocket] Audience subscription response: ".concat(yn)),be.pendingAudienceSubscription&&be.onAudienceSubscriptionResult(yn),Rt(yn))})})];case 1:return ue=Le.sent(),this.manager.onAudiencesSetResolved(ue,x.cv),[2,ue]}})})},X.prototype.setAudienceSubscriptionsLongpollInternalAsync=function(x,te,me){var ue;return K(this,void 0,void 0,function(){var be,Le,Rt,Tt,Ct,jt,yn=this;return q(this,function(kn){switch(kn.label){case 0:return this.logger.info("[XHR Polling] Audience subscription set requested."),this.pendingAudienceSubscription&&(this.logger.error("Racing audience subscriptions occured. This situation resolves into undefined scenario and/or nasal demons."),clearTimeout(this.pendingAudienceSubscription.timeoutId)),0===x.audiences.length?[2,this.handleAudienceUnsubscribeLongpoll(x.cv,me)]:[4,new Promise(function(Gn){var nr=setTimeout(function(){return yn.pendingAudienceSubscription=void 0,Gn(yn.buildAudienceSubscriptionsTimeoutResponse(x))},te);yn.pendingAudienceSubscription={audienceSetResolve:Gn,timeoutId:nr}})];case 1:return be=kn.sent(),this.manager.getState()===B.TrouterState.Unknown||this.transportTypeName===this.WEBSOCKET_TRANSPORT_NAME?[2,be]:(null==(Le=be.responses[0])?void 0:Le.result.audienceSubscriptionState)===this.AUDIENCE_SUBSCRIPTION_RESULT_BAD_REQUEST||(null==(Rt=be.responses.find(function(Gn){return Gn.audienceId===x.audiences[0].id}))?void 0:Rt.result.audienceSubscriptionState)===this.AUDIENCE_SUBSCRIPTION_RESULT_ERROR?(this.clearAudienceSubscriptionStateQueryParam(),this.manager.onAudiencesSetResolved(be,x.cv),[2,be]):(Tt=(null===(ue=null==me?void 0:me.audienceSubscriptionModel.audienceSubscriptions[0])||void 0===ue?void 0:ue.id)!==(null==Le?void 0:Le.audienceId),me&&Tt&&(Ct=this.mapToSyntheticAudienceSubscriptionResponses(me.audienceSubscriptionModel.audienceSubscriptions,this.AUDIENCE_SUBSCRIPTION_RESULT_UNSUBSCRIBED,200),(jt=be.responses).push.apply(jt,Ct)),this.manager.onAudiencesSetResolved(be,x.cv),[2,be])}})})},X.prototype.clearAudienceSubscriptionStateQueryParam=function(){var x,te,me;null!==(me=null===(te=null===(x=this.socket)||void 0===x?void 0:x.socket)||void 0===te?void 0:te.options)&&void 0!==me&&me.query&&(this.socket.socket.options.query=this.socket.socket.options.query.replace(this.AUDIENCE_SUBSCRIPTION_STATE_QUERY_PARAM_REGEX,""))},X.prototype.handleAudienceUnsubscribeLongpoll=function(x,te){var me;this.audienceSubscriptionState=void 0;var ue={responses:[]};if(te){var be=this.mapToSyntheticAudienceSubscriptionResponses(te.audienceSubscriptionModel.audienceSubscriptions,this.AUDIENCE_SUBSCRIPTION_RESULT_UNSUBSCRIBED,200);(me=ue.responses).push.apply(me,be)}return this.manager.onAudiencesSetResolved(ue,x),ue},X.prototype.buildAudienceSubscriptionsTimeoutResponse=function(x){return this.logger.error("Audience subscription attempt has timed out."),{responses:this.mapToSyntheticAudienceSubscriptionResponses(x.audiences,this.AUDIENCE_SUBSCRIPTION_RESULT_TIMEOUT)}},X.prototype.mapToSyntheticAudienceSubscriptionResponses=function(x,te,me){return x.map(function(ue){return{audienceId:ue.id,result:{audienceSubscriptionState:te,responseStatus:me}}})},X.prototype.expediteBackoff=function(){this.tokenBackoff.expediteIfPending()},X.prototype.sendRegisterRequest=function(){var x=this;if(!this.options.registration||!this.registrarClient)throw new Error("Internal error - options.registration is undefined");if(!this.allocateResult)throw new Error("Allocate result is undefined in sendRegisterRequest()");this.logger.info("sending register request");var te=new L.Timespan;this.connectionTracker.trackStart("registration");var me=this.getRegistrationTtl()[0];this.registrarClient.register({appId:this.options.registration.pnhAppId,aesKey:"",languageId:"en-US",platform:this.options.registration.platform,templateKey:this.options.registration.pnhTemplateKey,platformUIVersion:this.options.registration.platformUIVersion,productContext:this.options.registration.productContext},{TROUTER:[{context:this.options.registration.context,path:this.allocateResult.surl,ttl:me}]}).then(function(){x.logger.info("Register request successful"),x.connectionTracker.trackEnd("registration"),x.fsm.onRegistrationSucceeded(),x.connectionTracker.sendTelemetry(z.ClientEventName.Registration,{duration:te.duration},[])}).catch(function(ue){x.logger.error("Register request failed. Error: ".concat(ue)),x.connectionTracker.trackError("registration",Oe(ue)),x.fsm.onRegistrationFailed(),x.connectionTracker.sendTelemetry(z.ClientEventName.Registration,{duration:te.duration},[])})},X.prototype.sendUnregisterRequest=function(){var x=this;this.logger.info("sending unregister request");var te=new L.Timespan;if(!this.options.registration||!this.registrarClient)throw new Error("Internal error - options.registration is undefined");this.connectionTracker.trackStart("unregistration"),this.registrarClient.unregister().then(function(){x.logger.info("Unregister request successful"),x.connectionTracker.trackEnd("unregistration"),x.fsm.onUnregistrationDone(),x.connectionTracker.sendTelemetry(z.ClientEventName.Unregistration,{duration:te.duration},[])}).catch(function(me){x.logger.error("Unregister request failed. Error: ".concat(me)),x.connectionTracker.trackError("unregistration",Oe(me)),x.fsm.onUnregistrationDone(),x.connectionTracker.sendTelemetry(z.ClientEventName.Unregistration,{duration:te.duration},[])})},X.prototype.resetTokenBackoff=function(){this.tokenBackoff.reset()},X.prototype.cancelPendingRegistrationRequests=function(){this.registrarClient&&this.registrarClient.cancelPendingRequests()},X.prototype.clearSentEventTimers=function(){var x=Object.keys(this.pendingSentEventTimers);if(x.length>0){this.logger.debug("Clearing all pending downstream events related timers");for(var te=0,me=x;te<me.length;te++)this.clearSentEventTimer(Number(me[te]))}},X.prototype.restartIncallModeTimer=function(){var x=this;this.clearIncallModeTimerId(),this.logger.debug("Restarting incall mode timer"),this.incallModeTimerId=setTimeout(function(){x.logger.info("Call mode timer fired"),x.fsm.onIncallModeTimer()},this.options.incallModeTimeoutMs)},X.prototype.enterIncallMode=function(){this.logger.info("Entering incall mode"),this.timeoutOptions=this.options.incallTimeoutOptions,this.tokenBackoff.setMaxBackoffMs(this.timeoutOptions.maxBackoffMs),this.inIncallMode=!0},X.prototype.exitIncallMode=function(){this.logger.info("Exiting incall mode"),this.clearIncallModeTimerId(),this.timeoutOptions=this.options.timeoutOptions,this.tokenBackoff.setMaxBackoffMs(this.timeoutOptions.maxBackoffMs),this.inIncallMode=!1},X.prototype.isIncallMode=function(){return this.inIncallMode},X.prototype.sendDisconnectTelemetryEvent=function(x){var te={reason:x,serverClosed:!this.fsm.isActive()};this.connectionTracker.trackDisconnected(te),this.connectionTracker.clearConnectedInfo()},X.prototype.forceReconnectDueToNoRegistration=function(){this.fsm.forceReconnect("force reconnect due to no registration")},X.prototype.resetReconnectParamsOnErrorThreshold=function(){this.logger.warn("".concat(this.connectingErrorsInRow," connection attempts, server-side failure: erasing cached connection parameters")),this.reconnectParams=void 0},X.prototype.onSocketConnecting=function(x){this.logger.info("onSocketConnecting(".concat(x,")")),this.transportTypeName=x,this.connectionTracker.trackProgress("connecting",this.transportTypeName),this.fsm.onConnecting()},X.prototype.onSocketConnect=function(x){this.logger.info("onSocketConnect"),this.fsm.onSocketConnect(x)},X.prototype.onSocketConnectFailed=function(x){this.logger.error("onSocketConnectFailed"),this.connectionTracker.trackError("connect_failed",x,!0,this.transportTypeName?this.transportTypeName:this.UNKNOWN_TRANSPORT),this.fsm.onConnectingFailed()},X.prototype.onSocketDisconnect=function(x){var te=this.connectionTracker.getSessionLength()||0,me=fe.DisconnectReason.fromRawReason(x);this.logger.error("onSocketDisconnect, reason: ".concat(me.reason)),"dup"===me.reason&&"dup"===this.lastDisconnectReason&&te<this.options.duplicateDisconnectThresholdMs&&(this.logger.warn("Socket was closed by server as Duplicate for the second time in a row "+"after ".concat(te," ms which is below the threshold of ")+"".concat(this.options.duplicateDisconnectThresholdMs," ms. Resetting cached ")+"connection parameters and making a new allocation."),this.reconnectParams=void 0),this.lastDisconnectReason=me.reason,this.fsm.onSocketDisconnect(me),this.connectionExpireTimestampInSecs=void 0},X.prototype.onSocketReconnect=function(){this.logger.error("onSocketReconnect"),this.fsm.onTrouterConnected()},X.prototype.onSocketReconnectFailed=function(x){this.logger.error("onSocketReconnectFailed with '".concat(x,"'")),this.fsm.onSocketDisconnect(fe.DisconnectReason.fromSocketIoEventData("reconnecterror",x))},X.prototype.onSocketReconnecting=function(){this.logger.error("onSocketReconnecting")},X.prototype.onSocketError=function(x){this.logger.error("onSocketError with '".concat((0,L.toJson)(x),"'")),this.fsm.isConnecting()&&++this.connectingErrorsInRow>=this.connectingErrorsThreshold&&this.resetReconnectParamsOnErrorThreshold(),this.connectionTracker.trackError("connectSocket",function we(X){return null!=X&&"function"==typeof X.toString?X.toString():"[".concat(typeof X,"]")}(x)),this.fsm.onSocketDisconnect(fe.DisconnectReason.fromSocketIoEventData("socketerror",x))},X.prototype.onSocketMessage=function(x){var te,ue,me=this;this.logger.debug("onSocketMessage");try{var be=null===(te=(ue=new qe(x,this.logger)).headers)||void 0===te?void 0:te["X-Microsoft-Skype-Chain-ID"],Le=be?" Chain-Id ".concat(be):"";this.logger.info("Received request N ".concat(ue.id).concat(Le," CV ").concat(ue.correlationVector," to '").concat(ue.url,"'")),ue.startTS=Date.now(),ue.url&&this.urlPath&&ue.url.startsWith(this.urlPath)&&(ue.shortUrl=ue.url.substring(this.urlPath.length))}catch(Tt){var Rt=ye(Tt);return this.logger.error("unable to parse request. Error: ".concat(Rt)),this.connectionTracker.trackRequest(void 0,Rt),void this.connectionTracker.sendResponseError("unable to parse request, error: ".concat(Tt))}ue.timeoutTimerId=setTimeout(function(){if(!ue.replied){me.logger.error("Request ".concat(ue.id," timed out"));var Tt=new z.ResponseData(ue.id);Tt.status=504,Tt.headers={"Trouter-Responder":"ClientLib"},me.sendResponse(ue,Tt),ue.timedout=!0}},this.timeoutOptions.requestTimeoutMs);try{this.connectionTracker.trackRequest(ue),this.fsm.onDownstreamRequest(ue)}catch(Tt){this.logger.error("exception in socket.on message. Error: ".concat(ye(Tt))),this.connectionTracker.sendResponseError(Oe(Tt),ue,void 0)}},X.prototype.onTrouterConnected=function(x,te,me){var ue,be,Le,Rt,Tt=this;if((0,ne.isV4ConnectEvent)(x)){var Ct=x;this.allocateResult=Y(Y({},Ct),{ttl:x.ttl.toString()}),this.populateAndCacheReconnectParams(Ct,Ct.reconnectUrl),this.populateConnectionStateFields(Ct)}else if(!this.allocateResult)return void this.logger.error("Invalid internal state - received onTrouterConnected while allocateResult is not set");this.connectingErrorsInRow=0,this.logger.info("onTrouterConnected: ".concat(this.allocateResult.url)),"xhr-polling"===this.transportTypeName&&te&&this.manager.onUserActivityStateAccepted(te.cv),!(null===(Le=null===(be=null===(ue=this.socket)||void 0===ue?void 0:ue.socket)||void 0===be?void 0:be.options)||void 0===Le)&&Le.query&&(this.socket.socket.options.query+="&connected=true"),this.urlPath=this.allocateResult.url.replace(/https?:\/\/([A-z0-9\:\$\-\_\.\+\!\*\"\(\)\,]*)\//,"/");var jt=this.connectedUrl!==this.allocateResult.url;this.connectedUrl=this.allocateResult.url,this.connectionExpireTimestampInSecs=(0,L.calculateExpireTsInSec)((0,ne.ensureNumber)(x.ttl)),this.connectionTracker.trackEnd("connectSocket"),this.connectionTracker.trackConnected(jt,this.transportTypeName?this.transportTypeName:this.UNKNOWN_TRANSPORT),null===(Rt=this.setAudienceSubscriptionsUnsafeAsync(me))||void 0===Rt||Rt.catch(function(yn){return Tt.logger.error("Re-subscribe to audiences has failed with ".concat(yn))}),this.fsm.onTrouterConnected()},X.prototype.onTrouterReconnect=function(x){var te=x.target;this.logger.info("onTrouterReconnect target: ".concat(te)),"self"===te?this.fsm.onReconnectRequired(!0,ie.ServerInitiated):this.fsm.onReconnectRequired(!1,ie.ServerInitiated,x)},X.prototype.onTrouterMessageLoss=function(x){this.logger.debug("onTrouterMessageLoss"),this.fsm.onTrouterMessageLost(x.droppedIndicators)},X.prototype.onAudienceSubscriptionResult=function(x){this.logger.info("onAudienceSubscriptionResult"),this.pendingAudienceSubscription&&(clearTimeout(this.pendingAudienceSubscription.timeoutId),this.pendingAudienceSubscription.audienceSetResolve(x),this.pendingAudienceSubscription=void 0)},X.prototype.buildV4cUrlParams=function(){var x={};return x.tc=encodeURI((0,L.toJson)(this.clientInfo)),x.timeout=Math.floor(this.timeoutOptions.pingTimeoutMs/1e3),this.options.endpointId&&(x.epid=this.options.endpointId),this.appendConnectedClientIds(this.buildQuery(x),!0)},X.prototype.attachSocketIoHandlers=function(x,te,me,ue){var be=this;x.on("connecting",function(Le){be.onSocketConnecting(Le)}),x.on("connect",function(){be.onSocketConnect(te)}),x.on("connect_failed",function(Le){be.onSocketConnectFailed(Le)}),x.on("close_during_connecting",function(Le){be.onSocketConnectFailed(Le)}),x.on("disconnect",function(Le){be.onSocketDisconnect(Le)}),x.on("reconnect",function(){be.onSocketReconnect()}),x.on("reconnect_failed",function(Le){be.onSocketReconnectFailed(Le)}),x.on("reconnecting",function(){be.onSocketReconnecting()}),x.on("error",function(Le){be.onSocketError(Le)}),x.on("message",function(Le){be.onSocketMessage(Le)}),x.on("trouter.connected",function(Le){be.onTrouterConnected(Le,me,ue)}),x.on("trouter.reconnect",function(Le){be.onTrouterReconnect(Le)}),x.on("trouter.message_loss",function(Le){be.onTrouterMessageLoss(Le)}),x.on("audience.subscriptionresult",function(Le,Rt){be.onAudienceSubscriptionResult(Rt)})},X.prototype.onNavigatorOnlineStatusUpdate=function(){var x=window.navigator.onLine;this.logger.debug("Browser online status update - new state: ".concat(x,", previously: ").concat(this.isNavigatorOnline)),x&&!this.isNavigatorOnline?(this.isNavigatorOnline=!0,this.tokenBackoff.expediteIfPending(),this.connectionTracker.trackProgress("browserNet","online")):!x&&this.isNavigatorOnline&&(this.isNavigatorOnline=!1,this.connectionTracker.trackProgress("browserNet","offline"))},X.prototype.onAllocationResponse=function(x,te){this.logger.info("Received allocation response ".concat(JSON.stringify(x))),this.allocateResult=x,this.populateAndCacheReconnectParams(this.allocateResult,"".concat(this.allocateResult.socketio,"v4/a")),this.populateConnectionStateFields(this.allocateResult),this.fsm.onAllocationSucceed(te)},X.prototype.populateAndCacheReconnectParams=function(x,te){this.reconnectParams=Y({serviceUrl:this.options.trouterUrl,reconnectUrl:te},x.connectparams),this.manager.onConnectionParametersUpdated(this.reconnectParams)},X.prototype.populateConnectionStateFields=function(x){var te,me,ue="string"==typeof x.ttl?parseInt(x.ttl,10):x.ttl;if(this.connectionExpireTimestampInSecs=(0,L.calculateExpireTsInSec)(ue),this.connectionId=null!==(te=x.id)&&void 0!==te?te:"",this.connectedClientId=x.ccid,this.logger.debug("connected client id set {connectedClientId:".concat(this.connectedClientId,"}")),this.c2cUrlBase=null!==(me=x.curlb)&&void 0!==me?me:"",""===this.c2cUrlBase){var be=x.surl.indexOf("://");be>=0&&(be=x.surl.indexOf("/",be+3))>=5&&":3443"===x.surl.substr(be-5,5)&&(this.c2cUrlBase=x.surl.substr(0,be-5))}},X.prototype.onPingResponse=function(){this.logger.debug("onPingResponse"),this.connectionTracker.increasePingResponseCount(),this.clearPingResponseTimer(),this.fsm.onPingResponse()},X.prototype.clearPingResponseTimer=function(){void 0!==this.pingResponseTimerId&&(clearTimeout(this.pingResponseTimerId),this.pingResponseTimerId=void 0)},X.prototype.buildQuery=function(x){for(var te=[],me=0,ue=Object.keys(x);me<ue.length;me++){var be=ue[me];void 0!==x[be]&&te.push("".concat(be,"=").concat(x[be]))}return te.join("&")},X.prototype.appendConnectedClientIds=function(x,te){var me="";x.includes("ccid=")||(me="ccid=".concat(this.connectedClientId,"&")),this.domId&&(me+="dom=".concat(this.domId,"&")),me.length>0&&(me=me.slice(0,-1));var ue=te||x.includes("?")?"&":"?";return this.appendCorrelationIds(x+ue+me,te)},X.prototype.appendEndpointId=function(x,te){var me=te||x.includes("?")?"&":"?";return!x.includes("epid")&&this.options.endpointId?"".concat(x).concat(me,"epid=").concat(this.options.endpointId):x},X.prototype.appendCorrelationIds=function(x,te){var me=te||x.includes("?")?"&":"?";return x.includes("cor_id")?x:"".concat(x).concat(me,"cor_id=").concat(this.options.clientCorrelationID)+"&con_num=".concat(this.clientID,"_").concat(this.connectionAttempt)},X.prototype.safeString=function(x){return"string"==typeof x?x:""},X.prototype.sendResponse=function(x,te){var me,ue,be;if(x.timedout)return this.logger.error("Request ".concat(x.id," already timed out")),1;if(x.replied)return this.logger.error("Response for request ".concat(x.id," already sent")),2;clearTimeout(x.timeoutTimerId),x.timeoutTimerId=void 0,x.replied=!0,te.headers=null!==(me=te.headers)&&void 0!==me?me:{};var Le=x.correlationVector;this.logger.info("Sending response N ".concat(x.id," CV ").concat(Le," with status ").concat(te.status)),Le&&(te.headers[Ge]=Le),null!==(ue=x.headers)&&void 0!==ue&&ue["trouter-request"]&&(te.headers["trouter-request"]=x.headers["trouter-request"]);var Rt=Date.now()-x.startTS;if(te.headers["trouter-client"]=(0,L.toJson)({cd:Rt}),!(null===(be=x.headers)||void 0===be)&&be["trouter-is-broadcast"]&&(te.headers["trouter-is-broadcast"]=x.headers["trouter-is-broadcast"]),this.logger.debug("response: ".concat((0,L.toJson)(te))),!this.socket)return this.connectionTracker.sendResponseError("no socket",x,te),4;try{return this.socket.send((0,L.toJson)(te)),te.sentTS=Date.now(),x.incrementCorrelationVector(),this.connectionTracker.trackResponse(x,Rt,te),"websocket"===this.transportTypeName&&this.sendPingRequest(),0}catch(Ct){var Tt="unable to send data on response.end. Error: ".concat(ye(Ct));return this.logger.error(Tt),this.connectionTracker.sendResponseError(Tt,x,te),4}},X.prototype.sendUserActivityStateMultiple=function(x){var te=this,me=new Ht("user.activity"),ue=this.userActivityState.increaseCvAndGetEventObject();me.args=ue,this.logger.debug("Sending user activity '".concat(this.userActivityState.toEventJSON(),"', remaining ").concat(x-1));var be=!1;this.sendDownstreamEvent(me,function(){if(!0!==be&&(te.logger.info("User activity state: ".concat(ue.state,", cv: ").concat(ue.cv," accepted")),te.manager.onUserActivityStateAccepted(ue.cv),te.clearSentEventTimer(me.timeoutTimerId),x>1)){var Le=setTimeout(function(){te.clearSentEventTimer(Le),te.sendUserActivityStateMultiple(x-1)},te.options.userActivitySecondResendDelayMs);te.registerSentEventTimer(Le,"user.activity/resend")}}),me.timeoutTimerId=setTimeout(function(){te.logger.error("Activity state response timeout is fired"),be=!0,te.fsm.onActivityStateResponseTimeout(),te.clearSentEventTimer(me.timeoutTimerId)},this.timeoutOptions.userActivityResponseTimeoutMs),this.registerSentEventTimer(me.timeoutTimerId,"user.activity/response")},X.prototype.sendDownstreamEvent=function(x,te){this.logger.debug("Sending downstream event ".concat(x.name)),this.socket&&this.socket.emit(x.name,x.args,te)},X.prototype.registerSentEventTimer=function(x,te){this.logger.debug("registering timer ".concat(x," -> ").concat(te)),this.pendingSentEventTimers[x]=te},X.prototype.clearSentEventTimer=function(x){var te=this.pendingSentEventTimers[x];this.logger.debug("clearing timer ".concat(x," -> ").concat(te)),delete this.pendingSentEventTimers[x],clearTimeout(x)},X.prototype.getRegistrationTtl=function(){var x,te,me=(0,L.calculateTtlInSec)(this.connectionExpireTimestampInSecs);if(this.logger.debug("Current connectionID will expire in ".concat(me," seconds")),(null===(x=this.options.registration)||void 0===x?void 0:x.registrarTtlSec)&&me>0){var ue=this.options.registration.registrarTtlSec<me;return[Math.min(this.options.registration.registrarTtlSec,me),ue]}return null!==(te=this.options.registration)&&void 0!==te&&te.registrarTtlSec?[this.options.registration.registrarTtlSec,!1]:me>0?[me,!1]:[3600,!1]},X.prototype.clearIncallModeTimerId=function(){void 0!==this.incallModeTimerId&&(this.logger.debug("Clearing in-call mode timer"),clearTimeout(this.incallModeTimerId),this.incallModeTimerId=void 0)},X.prototype.applyConnectionTrackerOptions=function(x){try{x.eventLogger&&"function"==typeof x.eventLogger.logEvent?(this.connectionTracker.mergeSettings(x.telemetrySettings),this.connectionTracker.enable(x.eventLogger)):this.logger.warn("Trouter client event logging disabled due to invalid configuration.")}catch(te){this.logger.warn("Trouter client event logging disabled. Error: ".concat(ye(te))),this.connectionTracker.disable()}},X.prototype.canRetryTokenFetchRequest=function(x){var te=this.options.retryLimitOnTokenFetch;return null==te||x<te||(this.logger.warn("Reached limit on maximum number of token fetch request. Current count: ".concat(x,", retry limit: ").concat(te)),!1)},X}();de.TrouterConnection=zt},function(ke,de,De){Object.defineProperty(de,"__esModule",{value:!0}),de.MessageHandlerRegistry=void 0;var le=De(1),we=De(0),ye=function(){function Oe(Y){this.messageHandlers=[],this.logger=new we.Logger("MessageHandlers",Y)}return Oe.prototype.register=function(Y){if(this.messageHandlers.some(function(K){return K===Y}))throw new Error("Registering the same handler twice is not allowed");this.messageHandlers.push(Y)},Oe.prototype.clear=function(){this.logger.debug("Clearing message handlers"),this.messageHandlers=[]},Oe.prototype.active=function(){return this.messageHandlers.length>0},Oe.prototype.handleMessage=function(Y){for(var K={resultCode:le.UNHANDLED_MESSAGE_ACK,isHandled:!1},q=0,ie=this.messageHandlers;q<ie.length;q++){var L=this.safeExecuteHandle(ie[q],Y);if(void 0!==L&&(void 0===L.isHandled||L.isHandled))return void 0===L.resultCode&&(L.resultCode=le.HANDLED_MESSAGE_ACK),L}return K},Oe.prototype.safeExecuteHandle=function(Y,K){try{return Y.handleMessage(K)}catch(q){return void this.logger.warn("Trouter message handler threw an exception: ".concat(q))}},Oe}();de.MessageHandlerRegistry=ye},function(ke,de,De){var we=this&&this.__awaiter||function(Oe,Y,K,q){return new(K||(K=Promise))(function(oe,L){function z(_e){try{fe(q.next(_e))}catch(B){L(B)}}function J(_e){try{fe(q.throw(_e))}catch(B){L(B)}}function fe(_e){_e.done?oe(_e.value):function ie(oe){return oe instanceof K?oe:new K(function(L){L(oe)})}(_e.value).then(z,J)}fe((q=q.apply(Oe,Y||[])).next())})},ye=this&&this.__generator||function(Oe,Y){function K(fe){return function(_e){return function q(fe){if(ie)throw new TypeError("Generator is already executing.");for(;z&&(z=0,fe[0]&&(J=0)),J;)try{if(ie=1,oe&&(L=2&fe[0]?oe.return:fe[0]?oe.throw||((L=oe.return)&&L.call(oe),0):oe.next)&&!(L=L.call(oe,fe[1])).done)return L;switch(oe=0,L&&(fe=[2&fe[0],L.value]),fe[0]){case 0:case 1:L=fe;break;case 4:return J.label++,{value:fe[1],done:!1};case 5:J.label++,oe=fe[1],fe=[0];continue;case 7:fe=J.ops.pop(),J.trys.pop();continue;default:if(!(L=(L=J.trys).length>0&&L[L.length-1])&&(6===fe[0]||2===fe[0])){J=0;continue}if(3===fe[0]&&(!L||fe[1]>L[0]&&fe[1]<L[3])){J.label=fe[1];break}if(6===fe[0]&&J.label<L[1]){J.label=L[1],L=fe;break}if(L&&J.label<L[2]){J.label=L[2],J.ops.push(fe);break}L[2]&&J.ops.pop(),J.trys.pop();continue}fe=Y.call(Oe,J)}catch(_e){fe=[6,_e],oe=0}finally{ie=L=0}if(5&fe[0])throw fe[1];return{value:fe[0]?fe[1]:void 0,done:!0}}([fe,_e])}}var ie,oe,L,z,J={label:0,sent:function(){if(1&L[0])throw L[1];return L[1]},trys:[],ops:[]};return z={next:K(0),throw:K(1),return:K(2)},"function"==typeof Symbol&&(z[Symbol.iterator]=function(){return this}),z};Object.defineProperty(de,"__esModule",{value:!0}),de.addCacheAsBackupTo=void 0,de.addCacheAsBackupTo=function le(Oe){var Y,K=this;return function(q){return we(K,void 0,void 0,function(){return ye(this,function(ie){return q&&(Y=void 0),[2,new Promise(function(oe,L){Oe(q).then(function(z){Y=z,oe(z)}).catch(function(z){void 0!==Y&&Y.length>0&&oe(Y),L(z)})})]})})}}},function(ke,de,De){var le=this&&this.__awaiter||function(B,W,G,ne){return new(G||(G=Promise))(function(ee,re){function We(Ze){try{qe(ne.next(Ze))}catch(Ht){re(Ht)}}function Ge(Ze){try{qe(ne.throw(Ze))}catch(Ht){re(Ht)}}function qe(Ze){Ze.done?ee(Ze.value):function Z(ee){return ee instanceof G?ee:new G(function(re){re(ee)})}(Ze.value).then(We,Ge)}qe((ne=ne.apply(B,W||[])).next())})},we=this&&this.__generator||function(B,W){function G(qe){return function(Ze){return function ne(qe){if(Z)throw new TypeError("Generator is already executing.");for(;We&&(We=0,qe[0]&&(Ge=0)),Ge;)try{if(Z=1,ee&&(re=2&qe[0]?ee.return:qe[0]?ee.throw||((re=ee.return)&&re.call(ee),0):ee.next)&&!(re=re.call(ee,qe[1])).done)return re;switch(ee=0,re&&(qe=[2&qe[0],re.value]),qe[0]){case 0:case 1:re=qe;break;case 4:return Ge.label++,{value:qe[1],done:!1};case 5:Ge.label++,ee=qe[1],qe=[0];continue;case 7:qe=Ge.ops.pop(),Ge.trys.pop();continue;default:if(!(re=(re=Ge.trys).length>0&&re[re.length-1])&&(6===qe[0]||2===qe[0])){Ge=0;continue}if(3===qe[0]&&(!re||qe[1]>re[0]&&qe[1]<re[3])){Ge.label=qe[1];break}if(6===qe[0]&&Ge.label<re[1]){Ge.label=re[1],re=qe;break}if(re&&Ge.label<re[2]){Ge.label=re[2],Ge.ops.push(qe);break}re[2]&&Ge.ops.pop(),Ge.trys.pop();continue}qe=W.call(B,Ge)}catch(Ze){qe=[6,Ze],ee=0}finally{Z=re=0}if(5&qe[0])throw qe[1];return{value:qe[0]?qe[1]:void 0,done:!0}}([qe,Ze])}}var Z,ee,re,We,Ge={label:0,sent:function(){if(1&re[0])throw re[1];return re[1]},trys:[],ops:[]};return We={next:G(0),throw:G(1),return:G(2)},"function"==typeof Symbol&&(We[Symbol.iterator]=function(){return this}),We};Object.defineProperty(de,"__esModule",{value:!0}),de.TrouterManager=de.AudienceSubscriptionState=de.UserActivityObject=void 0;var ye=De(3),Oe=De(2),Y=De(4),K=De(0),q=De(5),ie=De(18),oe=De(7),L=De(6),z=De(19),J=function(){function B(W,G){this.state=W,this.correlationVector=void 0!==G?G:ye.CorrelationVector.extend()}return B.prototype.getStateString=function(){switch(this.state){case Oe.UserActivityState.Active:return"active";case Oe.UserActivityState.Inactive:return"inactive";case Oe.UserActivityState.Unknown:return"unknown";default:return"undefined"}},B.prototype.increaseCvAndGetEventObject=function(){return this.correlationVector.increase(),this.toEventObject()},B.prototype.toEventObject=function(){return{state:this.getStateString(),cv:this.correlationVector.value()}},B.prototype.toEventJSON=function(){return(0,ye.toJson)(this.toEventObject())},B}();de.UserActivityObject=J;var fe=function(){function B(W,G){void 0===G&&(G=ye.CorrelationVector.extend()),this.audienceSubscriptionModel=W,this.correlationVector=G}return B.prototype.increaseCvAndGetEventObject=function(){return this.correlationVector.increase(),this.toEventObject()},B.prototype.toEventObject=function(){return{audiences:this.audienceSubscriptionModel.audienceSubscriptions,cv:this.correlationVector.value()}},B.prototype.toEventJSON=function(){return(0,ye.toJson)(this.toEventObject())},B}();de.AudienceSubscriptionState=fe;var _e=function(){function B(W,G,ne,Z,ee,re){var We=this;this.logFunc=W,this.options=G,this.tokenProvider=ne,this.usingLegacyTokenApi=Z,this.listener=ee,this.tokenTypeProtocolSelector=function(Ge,qe){return We.options.forceV4aProtocol?"v4a":(0,q.usedProtocol)(Ge,qe)},this.logger=new K.Logger("Manager",W),this.logger.info("Created TrouterManager with options ".concat((0,ye.toJson)(this.options))),this.fsm=new z.TrouterManagerFsm(W,this),this.baseEndpointUrl="",this.processedMessageLoss={},this.userActivityObject=new J(Oe.UserActivityState.Unknown),this.protocolSelector=null!=re?re:this.tokenTypeProtocolSelector.bind(this)}return B.prototype.start=function(){this.fsm.start()},B.prototype.stop=function(W){this.fsm.stop(W)},B.prototype.configure=function(W){this.options=W,void 0!==this.firstConnection&&this.firstConnection.configure(W),void 0!==this.secondConnection&&this.secondConnection.configure(W),this.logger.info("Reconfigured TrouterManager with options ".concat((0,ye.toJson)(this.options)))},B.prototype.checkConnection=function(W){void 0!==this.firstConnection&&this.firstConnection.checkConnection(W),void 0!==this.secondConnection&&this.secondConnection.checkConnection(W)},B.prototype.resendRegistration=function(){return le(this,void 0,void 0,function(){return we(this,function(W){return void 0!==this.secondConnection?(this.logger.info("Resending registration on the second/new connection"),[2,this.secondConnection.resendRegistration()]):void 0!==this.firstConnection?(this.logger.info("Resending registration on the first/current connection"),[2,this.firstConnection.resendRegistration()]):(this.logger.info("No connection to resend registration on, will be done upon (re)connect"),[2])})})},B.prototype.getServerState=function(){if(void 0!==this.firstConnection)return this.firstConnection.getServerState()},B.prototype.getState=function(){return this.fsm.getState()},B.prototype.isInTerminalState=function(){return this.fsm.getInternalState()===Y.TrouterManagerState.TerminalError},B.prototype.reportStateInfo=function(){var W=this.firstConnection?L.State[this.firstConnection.getState()]:"Unknown",G=Y.TrouterManagerState[this.fsm.getInternalState()];if(this.secondConnection){var ne=L.State[this.secondConnection.getState()];return"Manager ".concat(G,"; 1st ").concat(W,"; 2nd ").concat(ne)}return"Manager ".concat(G,"; Connection ").concat(W)},B.prototype.startFirstConnection=function(){var W=new oe.TrouterConnection(this.logFunc,this.options,this.configuredTrouterManager(),this.tokenProvider,this.usingLegacyTokenApi,this.userActivityObject,this.protocolSelector,this.audienceSubscriptionState);this.firstConnection=W,this.getConnectionCache().then(function(G){W.start(G)}).catch(function(){})},B.prototype.startSecondConnection=function(W){var G=new oe.TrouterConnection(this.logFunc,this.options,this.configuredTrouterManager(),this.tokenProvider,this.usingLegacyTokenApi,this.userActivityObject,this.protocolSelector,this.audienceSubscriptionState);this.secondConnection=G,void 0!==this.firstConnection&&this.firstConnection.disableRegistrationsAndAutoReconnect(),W?this.getConnectionCache().then(function(ne){G.start(ne)}).catch(function(){}):G.start()},B.prototype.stopFirstConnection=function(W){void 0!==this.firstConnection&&(this.storedFirstConnection=this.firstConnection,this.firstConnection.stop(W),this.firstConnection=void 0)},B.prototype.stopSecondConnection=function(W){void 0!==this.secondConnection&&(this.secondConnection.stop(W),this.secondConnection=void 0)},B.prototype.stopSecondConnectionDelayed=function(){if(void 0!==this.secondConnection){var W=this.secondConnection;this.secondConnection=void 0,this.logger.info("Closing an inactive connection in ".concat(Math.round(this.options.lingeringConnectionDelayMs/1e3),"s")),setTimeout(function(){W.stop(!0)},this.options.lingeringConnectionDelayMs)}},B.prototype.forceStopLingeringConnection=function(){this.storedFirstConnection&&(this.storedFirstConnection.stop(!1),this.storedFirstConnection=void 0)},B.prototype.switchConnections=function(){var W=this.firstConnection;this.firstConnection=this.secondConnection,this.secondConnection=W},B.prototype.doesSecondConnectionExist=function(){return void 0!==this.secondConnection},B.prototype.dispatchConnected=function(){if(void 0!==this.firstConnection){var W=this.firstConnection.getServerState(),G=W.url.endsWith("/")?W.url.slice(0,-1):W.url,ne={baseEndpointUrl:G,newEndpointUrl:G!==this.baseEndpointUrl,c2cUrlBase:W.c2cUrlBase,clientId:W.connectedClientId,connectionId:W.connectionId,connectionTtlSec:W.getRemainingTtlInSec()};this.baseEndpointUrl=G,this.listener.onTrouterConnected(W.url,ne)}},B.prototype.dispatchDisconnected=function(){this.listener.onTrouterDisconnected&&this.listener.onTrouterDisconnected()},B.prototype.dispatchTerminalError=function(){this.listener.onTrouterDisconnected&&this.listener.onTrouterDisconnected()},B.prototype.dispatchRegistrationState=function(W){this.options.registrationStateCallback&&this.options.registrationStateCallback(W)},B.prototype.expediteBackoffOnConnections=function(){var W;void 0!==this.lastExpediteBackoffCallAt&&Date.now()-this.lastExpediteBackoffCallAt<(null!==(W=this.options.expediteBackoffOnStartMinimumDelayMs)&&void 0!==W?W:1e4)?this.logger.info("Expedite backoff due to start() too frequent, skipping"):(this.lastExpediteBackoffCallAt=Date.now(),void 0!==this.firstConnection&&this.firstConnection.expediteBackoff(),void 0!==this.secondConnection&&this.secondConnection.expediteBackoff())},B.prototype.onDownstreamRequest=function(W,G,ne){var Z={id:G.id,method:G.method,path:"/".concat(G.shortUrl),body:G.body,headers:G.headers},ee={id:G.id,status:0,headers:{},body:"",send:function(){return ee.status<=100||ee.status>=999?3:(ne.writeHead(ee.status,ee.headers),ne.end(ee.body))}};this.listener.onTrouterRequest(Z,ee)},B.prototype.onConnected=function(W){this.fsm.onConnected(W===this.firstConnection)},B.prototype.onRegistered=function(W){this.fsm.onRegistered(W===this.firstConnection)},B.prototype.onUnregistered=function(W){this.fsm.onUnregistered(W===this.firstConnection||W===this.storedFirstConnection)},B.prototype.onReconnecting=function(W){this.fsm.onReconnecting(W===this.firstConnection)},B.prototype.onReconnectIsRequired=function(W,G,ne){this.fsm.onReconnectionRequired(W===this.firstConnection,G,ne)},B.prototype.onDisconnected=function(W){this.fsm.onDisconnected(W===this.firstConnection||W==this.storedFirstConnection),this.storedFirstConnection=void 0},B.prototype.onTerminalError=function(){this.fsm.onTerminalError(),this.storedFirstConnection=void 0},B.prototype.onUserActivityStateAccepted=function(W){this.listener.onTrouterUserActivityStateAccepted&&this.listener.onTrouterUserActivityStateAccepted(W)},B.prototype.onAudiencesSetResolved=function(W,G){var ne,Z;null===(Z=(ne=this.listener).onAudiencesSetResolved)||void 0===Z||Z.call(ne,W,G)},B.prototype.onConnectionParametersUpdated=function(W){this.setConnectionCache(W)},B.prototype.setUserActivityState=function(W,G){return this.userActivityObject=new J(W,ye.CorrelationVector.extend(G)),void 0!==this.secondConnection?(this.logger.info("Setting user activity ".concat(this.userActivityObject.toEventJSON()," on the second/new connection")),void this.secondConnection.setUserActivityState(this.userActivityObject)):void 0!==this.firstConnection?(this.logger.info("Setting user activity ".concat(this.userActivityObject.toEventJSON()," on the first/current connection")),void this.firstConnection.setUserActivityState(this.userActivityObject)):void 0},B.prototype.setAudienceSubscriptionsAsync=function(W,G,ne){if(this.audienceSubscriptionState=new fe(W,ye.CorrelationVector.extend(ne)),this.secondConnection)return this.logger.info("Setting audience subscriptions ".concat(this.audienceSubscriptionState.toEventJSON()," on second/new connection")),this.secondConnection.setAudienceSubscriptionsAsync(this.audienceSubscriptionState,G);if(this.firstConnection)return this.logger.info("Setting audience subscriptions ".concat(this.audienceSubscriptionState.toEventJSON()," on first/current connection")),this.firstConnection.setAudienceSubscriptionsAsync(this.audienceSubscriptionState,G);throw new Error("No connection found")},B.prototype.onTrouterMessageLost=function(W){var G=this;if(this.listener.onTrouterMessageLoss)if(null!=W&&W.length){var ne=W.filter(function(ee){return void 0!==G.processedMessageLoss["".concat(ee.tag,"-").concat(ee.etag)]});if(ne.length&&(this.logger.info("onTrouterMessageLoss - immediately acknowledging ".concat(ne.length," seen dropped indicators")),this.sendProcessedDroppedIndicators(ne),!(W=W.filter(function(ee){return void 0===G.processedMessageLoss["".concat(ee.tag,"-").concat(ee.etag)]})).length))return void this.logger.info("onTrouterMessageLoss - all declared dropped indicators have been seen before");if(!this.listener.onTrouterMessageLoss(W.map(function(ee){return ee.tag})))return void this.logger.warn("onTrouterMessageLoss - some flow tag(s) have not been processed by listeners");W.forEach(function(ee){G.processedMessageLoss["".concat(ee.tag,"-").concat(ee.etag)]=""}),this.sendProcessedDroppedIndicators(W)}else this.logger.warn("onTrouterMessageLoss - no flow tags have been provided")},B.prototype.getConnectionCache=function(){var W=this;return this.options.connectionCache?(this.logger.debug("Querying host's connection cache"),this.options.connectionCache.onGetTrouterConnectionCache().then(function(G){var ne=G?JSON.parse(G):void 0;return"object"==typeof ne?ne:void 0}).catch(function(G){return W.logger.warn("Invalid connection cache content provided: ".concat(G)),W.connectionCache})):Promise.resolve(this.connectionCache)},B.prototype.setConnectionCache=function(W){if(this.connectionCache=W,this.options.connectionCache)try{this.options.connectionCache.onSetTrouterConnectionCache(JSON.stringify(W))}catch(G){this.logger.warn("Error setting external connection cache: ".concat(G))}},B.prototype.sendProcessedDroppedIndicators=function(W){return void 0!==this.firstConnection?void this.firstConnection.sendProcessedDroppedIndicators(W):void 0!==this.secondConnection?void this.secondConnection.sendProcessedDroppedIndicators(W):void 0},B.prototype.configuredTrouterManager=function(){return new ie.RegistrationEnforcer(this,this.options.connectionDependsOnRegistration,this.options.delayEventsUntilRegistered)},B}();de.TrouterManager=_e},function(ke,de,De){Object.defineProperty(de,"__esModule",{value:!0}),de.TrouterUrlPromise=void 0;var le=De(0),we=function(){function ye(Oe){this.logger=new le.Logger("UrlPromise",Oe)}return ye.prototype.getPromise=function(){var Oe=this;return void 0!==this.url?(this.logger.debug("returning previously resolved url: ".concat(this.url)),Promise.resolve(this.url)):(void 0===this.pendingPromise?(this.logger.debug("creating and returning promise"),this.pendingPromise=new Promise(function(Y,K){Oe.pendingPromiseResolveRef=Y,Oe.pendingPromiseRejectRef=K})):this.logger.debug("returning existing promise"),this.pendingPromise)},ye.prototype.resolveUrl=function(Oe){this.url=Oe,this.logger.debug("got url: ".concat(this.url));var Y=this.pendingPromiseResolveRef;this.pendingPromise=void 0,this.pendingPromiseResolveRef=void 0,this.pendingPromiseRejectRef=void 0,void 0!==Y&&(this.logger.debug("resolving promise"),Y(Oe))},ye.prototype.rejectUrl=function(Oe){this.logger.debug("aborting");var Y=this.pendingPromiseRejectRef;this.url=void 0,this.pendingPromise=void 0,this.pendingPromiseResolveRef=void 0,this.pendingPromiseRejectRef=void 0,void 0!==Y&&(this.logger.debug("rejecting promise"),Y(Oe))},ye.prototype.resetUrl=function(){this.logger.debug("resetting url"),this.url=void 0},ye}();de.TrouterUrlPromise=we},function(ke,de,De){(function(le,we){var Y,K;Y=void 0===le?window:le,(K=we.exports).version="0.9.6",K.protocol=1,K.transports=[],K.j=[],K.sockets={},K.connect=function(q,ie){var oe,L,z=K.util.parseUri(q);Y&&Y.location&&(z.protocol=z.protocol||Y.location.protocol.slice(0,-1),z.host=z.host||(Y.document?Y.document.domain:Y.location.hostname),z.port=z.port||Y.location.port),oe=K.util.uniqueUri(z);var J={host:z.host,secure:"https"==z.protocol,port:z.port||("https"==z.protocol?443:80),query:z.query||""};return K.util.merge(J,ie),!J["force new connection"]&&K.sockets[oe]||(L=new K.Socket(J)),!J["force new connection"]&&L&&(K.sockets[oe]=L),(L=L||K.sockets[oe]).of(J["skipped handshake data"]?"":z.path.length>1?z.path:"")};var ye=we.exports;(function(Oe,Y){var K=Oe.util={},q=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,ie=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];K.parseUri=function(L){for(var z=q.exec(L||""),J={},fe=14;fe--;)J[ie[fe]]=z[fe]||"";return J},K.uniqueUri=function(L){var z=L.protocol,J=L.host,fe=L.port;return"document"in Y?(J=J||document.domain,fe=fe||("https"==z&&"https:"!==document.location.protocol?443:document.location.port)):(J=J||"localhost",fe||"https"!=z||(fe=443)),(z||"http")+"://"+J+":"+(fe||80)},K.query=function(L,z){var J=K.chunkQuery(L||""),fe=[];for(var _e in K.merge(J,K.chunkQuery(z||"")),J)J.hasOwnProperty(_e)&&fe.push(_e+"="+J[_e]);return fe.length?"?"+fe.join("&"):""},K.chunkQuery=function(L){for(var z,J={},fe=L.split("&"),_e=0,B=fe.length;_e<B;++_e)(z=fe[_e].split("="))[0]&&(J[z[0]]=z[1]);return J};var oe=!1;K.load=function(L){if("document"in Y&&"complete"===document.readyState||oe)return L();K.on(Y,"load",L,!1)},K.on=function(L,z,J,fe){L.attachEvent?L.attachEvent("on"+z,J):L.addEventListener&&L.addEventListener(z,J,fe)},K.request=function(L){if(L&&typeof XDomainRequest<"u")return new XDomainRequest;if(typeof XMLHttpRequest<"u"&&(!L||K.ua.hasCORS))return new XMLHttpRequest;if(!L)try{return new(window[["Active"].concat("Object").join("X")])("Microsoft.XMLHTTP")}catch(z){}return null},typeof window<"u"&&K.load(function(){oe=!0}),K.defer=function(L){if(!K.ua.webkit||typeof importScripts<"u")return L();K.load(function(){setTimeout(L,100)})},K.merge=function(L,z,J,fe){var _e,B=fe||[],W=void 0===J?2:J;for(_e in z)z.hasOwnProperty(_e)&&K.indexOf(B,_e)<0&&("object"==typeof L[_e]&&W?K.merge(L[_e],z[_e],W-1,B):(L[_e]=z[_e],B.push(z[_e])));return L},K.mixin=function(L,z){K.merge(L.prototype,z.prototype)},K.inherit=function(L,z){function J(){}J.prototype=z.prototype,L.prototype=new J},K.isArray=Array.isArray||function(L){return"[object Array]"===Object.prototype.toString.call(L)},K.intersect=function(L,z){for(var J=[],fe=L.length>z.length?L:z,_e=L.length>z.length?z:L,B=0,W=_e.length;B<W;B++)~K.indexOf(fe,_e[B])&&J.push(_e[B]);return J},K.indexOf=function(L,z,J){var fe=L.length;for(J=J<0?J+fe<0?0:J+fe:J||0;J<fe&&L[J]!==z;J++);return fe<=J?-1:J},K.toArray=function(L){for(var z=[],J=0,fe=L.length;J<fe;J++)z.push(L[J]);return z},K.ua={},K.ua.hasCORS=typeof XMLHttpRequest<"u"&&function(){try{var L=new XMLHttpRequest}catch(z){return!1}return null!=L.withCredentials}(),K.ua.webkit=typeof navigator<"u"&&/webkit/i.test(navigator.userAgent)})(void 0!==ye?ye:we.exports,void 0===le?window:le),function(Oe,Y){function K(){}Oe.EventEmitter=K,K.prototype.addListener=K.prototype.on=function(q,ie){return this.$events||(this.$events={}),this.$events[q]?Y.util.isArray(this.$events[q])?this.$events[q].push(ie):this.$events[q]=[this.$events[q],ie]:this.$events[q]=ie,this},K.prototype.once=function(q,ie){function oe(){L.removeListener(q,oe),ie.apply(this,arguments)}var L=this;return oe.listener=ie,this.on(q,oe),this},K.prototype.removeListener=function(q,ie){if(this.$events&&this.$events[q]){var oe=this.$events[q];if(Y.util.isArray(oe)){for(var L=-1,z=0,J=oe.length;z<J;z++)if(oe[z]===ie||oe[z].listener&&oe[z].listener===ie){L=z;break}if(L<0)return this;oe.splice(L,1),oe.length||delete this.$events[q]}else(oe===ie||oe.listener&&oe.listener===ie)&&delete this.$events[q]}return this},K.prototype.removeAllListeners=function(q){return this.$events&&this.$events[q]&&(this.$events[q]=null),this},K.prototype.listeners=function(q){return this.$events||(this.$events={}),this.$events[q]||(this.$events[q]=[]),Y.util.isArray(this.$events[q])||(this.$events[q]=[this.$events[q]]),this.$events[q]},K.prototype.emit=function(q){if(!this.$events)return!1;var ie=this.$events[q];if(!ie)return!1;var oe=Array.prototype.slice.call(arguments,1);if("function"==typeof ie)ie.apply(this,oe);else{if(!Y.util.isArray(ie))return!1;for(var L=ie.slice(),z=0,J=L.length;z<J;z++)L[z].apply(this,oe)}return!0}}(void 0!==ye?ye:we.exports,void 0!==ye?ye:we.parent.exports),function(Oe,Y){if(Y&&Y.parse)return Oe.JSON={parse:Y.parse,stringify:Y.stringify};throw new Error("JSON not available")}(void 0!==ye?ye:we.exports,typeof JSON<"u"?JSON:void 0),function(Oe,Y){var K=Oe.parser={},q=K.packets=["disconnect","connect","heartbeat","message","json","event","ack","error","noop"],ie=K.reasons=["transport not supported","client not handshaken","unauthorized"],oe=K.advice=["reconnect"],L=Y.JSON,z=Y.util.indexOf;K.encodePacket=function(fe){var _e=z(q,fe.type),B=fe.id||"",W=fe.endpoint||"",G=fe.ack,ne=null;switch(fe.type){case"error":var Z=fe.reason?z(ie,fe.reason):"",ee=fe.advice?z(oe,fe.advice):"";""===Z&&""===ee||(ne=Z+(""!==ee?"+"+ee:""));break;case"message":""!==fe.data&&(ne=fe.data);break;case"event":var re={name:fe.name};fe.args&&fe.args.length&&(re.args=fe.args),ne=L.stringify(re);break;case"json":ne=L.stringify(fe.data);break;case"connect":fe.qs&&(ne=fe.qs);break;case"ack":ne=fe.ackId+(fe.args&&fe.args.length?"+"+L.stringify(fe.args):"")}var We=[_e,B+("data"==G?"+":""),W];return null!=ne&&We.push(ne),We.join(":")},K.encodePayload=function(fe){var _e="";if(1==fe.length)return fe[0];for(var B=0,W=fe.length;B<W;B++)_e+="\ufffd"+fe[B].length+"\ufffd"+fe[B];return _e};var J=/([^:]+):([0-9]+)?(\+)?:([^:]+)?:?([\s\S]*)?/;K.decodePacket=function(W){if(!(_e=W.match(J)))return{};var B=_e[2]||"",G=(W=_e[5]||"",{type:q[_e[1]],endpoint:_e[4]||""});switch(B&&(G.id=B,G.ack=!_e[3]||"data"),G.type){case"error":var _e=W.split("+");G.reason=ie[_e[0]]||"",G.advice=oe[_e[1]]||"";break;case"message":G.data=W||"";break;case"event":try{var ne=L.parse(W);G.name=ne.name,G.args=ne.args}catch(ee){}G.args=G.args||[];break;case"json":try{G.data=L.parse(W)}catch(ee){}break;case"connect":G.qs=W||"";break;case"ack":if((_e=W.match(/^([0-9]+)(\+)?(.*)/))&&(G.ackId=_e[1],G.args=[],_e[3]))try{G.args=_e[3]?L.parse(_e[3]):[]}catch(ee){}break;case"disconnect":G.reason=W}return G},K.decodePayload=function(fe){if("\ufffd"==fe.charAt(0)){for(var _e=[],B=1,W="";B<fe.length;B++)"\ufffd"==fe.charAt(B)?(_e.push(K.decodePacket(fe.substr(B+1).substr(0,W))),B+=Number(W)+1,W=""):W+=fe.charAt(B);return _e}return[K.decodePacket(fe)]}}(void 0!==ye?ye:we.exports,void 0!==ye?ye:we.parent.exports),function(Oe,Y){function K(q,ie){this.socket=q,this.sessid=ie,this.connectErrorCallback=void 0,this.isOpened=!1}Oe.Transport=K,Y.util.mixin(K,Y.EventEmitter),K.prototype.onData=function(q){if(this.clearCloseTimeout(),(this.socket.connected||this.socket.connecting||this.socket.reconnecting)&&this.setCloseTimeout(),""!==q){var ie=Y.parser.decodePayload(q);if(ie&&ie.length)for(var oe=0,L=ie.length;oe<L;oe++)this.onPacket(ie[oe])}return this},K.prototype.onPacket=function(q){return this.socket.setHeartbeatTimeout(),"heartbeat"==q.type?this.onHeartbeat():("connect"==q.type&&""==q.endpoint&&this.onConnect(),"error"==q.type&&"reconnect"==q.advice&&(this.isOpened=!1),this.socket.onPacket(q),this)},K.prototype.setCloseTimeout=function(){if(!this.closeTimeout){var q=this;this.closeTimeout=setTimeout(function(){q.onDisconnect()},this.socket.closeTimeout)}},K.prototype.onDisconnect=function(){return this.close&&this.isOpened&&this.close(),this.clearTimeouts(),this.socket.onDisconnect(),this},K.prototype.onConnect=function(){return this.socket.onConnect(),this.connectErrorCallback=void 0,this},K.prototype.clearCloseTimeout=function(){this.closeTimeout&&(clearTimeout(this.closeTimeout),this.closeTimeout=null)},K.prototype.clearTimeouts=function(){this.clearCloseTimeout(),this.reopenTimeout&&clearTimeout(this.reopenTimeout)},K.prototype.packet=function(q){this.send(Y.parser.encodePacket(q))},K.prototype.onHeartbeat=function(q){this.packet({type:"heartbeat"})},K.prototype.onOpen=function(){this.isOpened=!0,this.clearCloseTimeout(),this.socket.onOpen()},K.prototype.onClose=function(){this.isOpened=!1,this.socket.onClose(),this.onDisconnect()},K.prototype.prepareUrl=function(q){var ie=this.socket.options;if(ie["skipped handshake data"])return ie.rewriteUrlForProxy(ie["skipped handshake data"].websocketUrl+(q||""));var oe=this.scheme()+"://"+ie.host+":"+ie.port+"/"+ie.resource+"/"+Y.protocol+"/"+this.name+"/"+this.sessid+(q||"");return ie.rewriteUrlForProxy(oe)},K.prototype.ready=function(q,ie){ie.call(this)},K.prototype.clearEventHandlers=function(){return this}}(void 0!==ye?ye:we.exports,void 0!==ye?ye:we.parent.exports),function(Oe,Y,K){function q(oe){if(this.options={port:80,secure:!1,document:"document"in K&&document,resource:"socket.io",transports:Y.transports.slice(),"connect timeout":1e4,"try multiple transports":!0,reconnect:!0,"reconnection delay":500,"reconnection limit":1/0,"reopen delay":3e3,"max reconnection attempts":10,"sync disconnect on unload":!0,"auto connect":!0,"flash policy port":10843},Y.util.merge(this.options,oe),this.connected=!1,this.open=!1,this.connecting=!1,this.reconnecting=!1,this.namespaces={},this.buffer=[],this.doBuffer=!1,this.disconnected=!1,this.options["sync disconnect on unload"]&&(!this.isXDomain()||Y.util.ua.hasCORS)){var L=this;Y.util.on(K,"unload",function(){L.disconnectSync()},!1)}this.options["auto connect"]&&this.connect()}function ie(){}Oe.Socket=q,Y.util.mixin(q,Y.EventEmitter),q.prototype.of=function(oe){return this.namespaces[oe]||(this.namespaces[oe]=new Y.SocketNamespace(this,oe),""!==oe&&this.namespaces[oe].packet({type:"connect"})),this.namespaces[oe]},q.prototype.publish=function(){var oe;for(var L in this.emit.apply(this,arguments),this.namespaces)this.namespaces.hasOwnProperty(L)&&(oe=this.of(L)).$emit.apply(oe,arguments)},q.prototype.handshake=function(oe){function L(ne){ne instanceof Error?z.onError(ne.message):oe.apply(null,ne.split(":"))}var z=this,J=this.options;if(!z.disconnected){var fe=J.rewriteUrlForProxy(["http"+(J.secure?"s":"")+":/",J.host+":"+J.port,J.resource,Y.protocol,Y.util.query(this.options.query,"t="+ +new Date)].join("/"));if(this.isXDomain()&&!Y.util.ua.hasCORS){var _e=document.getElementsByTagName("script")[0],B=document.createElement("script");B.src=fe+"&jsonp="+Y.j.length,_e.parentNode.insertBefore(B,_e),Y.j.push(function(ne){L(ne),B.parentNode.removeChild(B)})}else{var W=Y.util.request();W.open("GET",fe,!0);var G=this.options.requestHeaders;void 0!==G&&Object.keys(G).forEach(function(ne){W.setRequestHeader(ne,G[ne])}),W.onreadystatechange=function(){4==W.readyState&&(W.onreadystatechange=ie,200==W.status?L(W.responseText):!z.reconnecting&&z.onError(W.responseText))},W.send(null)}}},q.prototype.getTransport=function(oe){for(var L,z=oe||this.transports,J=0;L=z[J];J++)if(Y.Transport[L]&&Y.Transport[L].check(this)&&(!this.isXDomain()||Y.Transport[L].xdomainCheck()))return new Y.Transport[L](this,this.sessionid);return null},q.prototype.connect=function(oe){if(this.connecting||this.disconnected)return this;var L=this,z=function(fe,_e,B,W){function G(){if(!L.connected&&!L.disconnected)if(L.connecting=!1,clearTimeout(L.connectTimeoutTimer),L.options["try multiple transports"]){for(;L.remainingTransports.length>0&&L.remainingTransports.splice(0,1)[0]!=L.transport.name;);L.remainingTransports.length?ne(L.remainingTransports):L.publish("connect_failed")}else L.publish("connect_failed")}function ne(Z){if(L.transport&&(L.transport.clearTimeouts(),L.transport.clearEventHandlers()),L.transport=L.getTransport(Z),!L.transport||L.disconnected)return L.publish("connect_failed");L.transport.ready(L,function(){L.connecting=!0,L.publish("connecting",L.transport.name),L.transport.open(G),L.options["connect timeout"]&&(L.connectTimeoutTimer=setTimeout(function(){G()},L.options["connect timeout"]))})}L.sessionid=fe,L.closeTimeout=1e3*B+2e3,L.heartbeatTimeout=1e3*_e+2e3,L.transports=W?Y.util.intersect(W.split(","),L.options.transports):L.options.transports,L.setHeartbeatTimeout(),L.remainingTransports=L.transports.slice(0),ne(L.transports),L.once("connect",function(){clearTimeout(L.connectTimeoutTimer),oe&&"function"==typeof oe&&oe()})};if(this.options["skipped handshake data"]){var J=this.options["skipped handshake data"];z("v4c-"+(new Date).getTime(),J.timeout,J.timeout,"websocket")}else this.handshake(z);return this},q.prototype.setHeartbeatTimeout=function(){clearTimeout(this.heartbeatTimeoutTimer);var oe=this;this.heartbeatTimeoutTimer=setTimeout(function(){oe.transport.onClose()},this.heartbeatTimeout)},q.prototype.packet=function(oe){return this.connected&&!this.doBuffer?this.transport.packet(oe):this.buffer.push(oe),this},q.prototype.setBuffer=function(oe){this.doBuffer=oe,!oe&&this.connected&&this.buffer.length&&(this.transport.payload(this.buffer),this.buffer=[])},q.prototype.disconnect=function(){return(this.connected||this.connecting)&&(this.open&&this.of("").packet({type:"disconnect"}),this.onDisconnect("booted")),this.disconnected=!0,this},q.prototype.disconnectSync=function(){Y.util.request().open("GET",this.resource+"/"+Y.protocol+"/"+this.sessionid,!0),this.onDisconnect("booted")},q.prototype.isXDomain=function(){return this.options.host!==K.location.hostname||this.options.port!=(K.location.port||("https:"==K.location.protocol?443:80))},q.prototype.onConnect=function(){this.connected||(this.connected=!0,this.connecting=!1,this.doBuffer||this.setBuffer(!1),this.emit("connect"))},q.prototype.onOpen=function(){this.open=!0},q.prototype.onClose=function(){this.open=!1,clearTimeout(this.heartbeatTimeoutTimer)},q.prototype.onPacket=function(oe){this.of(oe.endpoint).onPacket(oe)},q.prototype.onError=function(oe){oe&&oe.advice&&"reconnect"===oe.advice&&(this.connected||this.connecting)&&(this.disconnect(),this.options.reconnect&&this.reconnect()),this.publish("error",oe&&oe.reason?oe.reason:oe)},q.prototype.onDisconnect=function(oe){var L=this.connected,z=this.connecting;this.connected=!1,this.connecting=!1,this.open=!1,(L||z)&&(this.transport.close(),this.transport.clearTimeouts(),L?(this.publish("disconnect",oe),"booted"!=oe&&this.options.reconnect&&!this.reconnecting&&this.reconnect()):this.publish("close_during_connecting",oe))},q.prototype.reconnect=function(){function oe(){if(z.connected){for(var B in z.namespaces)z.namespaces.hasOwnProperty(B)&&""!==B&&z.namespaces[B].packet({type:"connect"});z.publish("reconnect",z.transport.name,z.reconnectionAttempts)}clearTimeout(z.reconnectionTimer),z.removeListener("connect_failed",L),z.removeListener("connect",L),z.reconnecting=!1,delete z.reconnectionAttempts,delete z.reconnectionDelay,delete z.reconnectionTimer,delete z.redoTransports,z.options["try multiple transports"]=fe}function L(){if(z.reconnecting)return z.connected?oe():z.connecting&&z.reconnecting?z.reconnectionTimer=setTimeout(L,1e3):void(z.reconnectionAttempts++>=J?z.redoTransports?(z.publish("reconnect_failed"),oe()):(z.on("connect_failed",L),z.options["try multiple transports"]=!0,z.transport=z.getTransport(),z.redoTransports=!0,z.connect()):(z.reconnectionDelay<_e&&(z.reconnectionDelay*=2),z.connect(),z.publish("reconnecting",z.reconnectionDelay,z.reconnectionAttempts),z.reconnectionTimer=setTimeout(L,z.reconnectionDelay)))}this.reconnecting=!0,this.reconnectionAttempts=0,this.reconnectionDelay=this.options["reconnection delay"];var z=this,J=this.options["max reconnection attempts"],fe=this.options["try multiple transports"],_e=this.options["reconnection limit"];this.options["try multiple transports"]=!1,this.reconnectionTimer=setTimeout(L,this.reconnectionDelay),this.on("connect",L)}}(void 0!==ye?ye:we.exports,void 0!==ye?ye:we.parent.exports,void 0===le?window:le),function(Oe,Y){function K(ie,oe){this.socket=ie,this.name=oe||"",this.flags={},this.json=new q(this,"json"),this.ackPackets=0,this.acks={}}function q(ie,oe){this.namespace=ie,this.name=oe}Oe.SocketNamespace=K,Y.util.mixin(K,Y.EventEmitter),K.prototype.$emit=Y.EventEmitter.prototype.emit,K.prototype.of=function(){return this.socket.of.apply(this.socket,arguments)},K.prototype.packet=function(ie){return ie.endpoint=this.name,this.socket.packet(ie),this.flags={},this},K.prototype.send=function(ie,oe){var L={type:this.flags.json?"json":"message",data:ie};return"function"==typeof oe&&(L.id=++this.ackPackets,L.ack=!0,this.acks[L.id]=oe),this.packet(L)},K.prototype.emit=function(ie){var oe=Array.prototype.slice.call(arguments,1),L=oe[oe.length-1],z={type:"event",name:ie};return"function"==typeof L&&(z.id=++this.ackPackets,z.ack="data",this.acks[z.id]=L,oe=oe.slice(0,oe.length-1)),z.args=oe,this.packet(z)},K.prototype.disconnect=function(){return""===this.name?this.socket.disconnect():(this.packet({type:"disconnect"}),this.$emit("disconnect")),this},K.prototype.onPacket=function(ie){function oe(){L.packet({type:"ack",args:Y.util.toArray(arguments),ackId:ie.id})}var L=this;switch(ie.type){case"connect":this.$emit("connect");break;case"disconnect":""===this.name?this.socket.onDisconnect(ie.reason||"booted"):this.$emit("disconnect",ie.reason||"");break;case"message":case"json":var z=["message",ie.data];"data"==ie.ack?z.push(oe):ie.ack&&this.packet({type:"ack",ackId:ie.id}),this.$emit.apply(this,z);break;case"event":z=[ie.name].concat(ie.args),"data"==ie.ack&&z.push(oe),this.$emit.apply(this,z);break;case"ack":this.acks[ie.ackId]&&(this.acks[ie.ackId].apply(this,ie.args),delete this.acks[ie.ackId]);break;case"error":ie.advice?this.socket.onError(ie):this.$emit("unauthorized"==ie.reason?"connect_failed":"error",ie.reason)}},q.prototype.send=function(){this.namespace.flags[this.name]=!0,this.namespace.send.apply(this.namespace,arguments)},q.prototype.emit=function(){this.namespace.flags[this.name]=!0,this.namespace.emit.apply(this.namespace,arguments)}}(void 0!==ye?ye:we.exports,void 0!==ye?ye:we.parent.exports),function(Oe,Y,K){function q(oe){Y.Transport.apply(this,arguments)}function ie(){}Oe.websocket=q,Y.util.inherit(q,Y.Transport),q.prototype.name="websocket",q.prototype.open=function(oe){var L,z=Y.util.query(this.socket.options.query),J=this;return this.connectErrorCallback=oe,L||(L=K.MozWebSocket||K.WebSocket),this.websocket=new L(this.prepareUrl(z)),this.websocket.onopen=function(){J.onOpen(),J.socket.setBuffer(!1)},this.websocket.onmessage=function(fe){J.onData(fe.data)},this.websocket.onclose=function(){J.onClose(),J.socket.setBuffer(!0)},this.websocket.onerror=function(fe){J.onError(fe)},this},q.prototype.send=function(oe){return this.websocket.send(oe),this},q.prototype.payload=function(oe){for(var L=0,z=oe.length;L<z;L++)this.packet(oe[L]);return this},q.prototype.close=function(){return this.websocket.close(),this},q.prototype.onError=function(oe){void 0!==this.connectErrorCallback&&(this.connectErrorCallback(),this.connectErrorCallback=void 0),this.socket.onError(oe)},q.prototype.scheme=function(){return this.socket.options.secure?"wss":"ws"},q.check=function(){return"WebSocket"in K&&!("__addTask"in WebSocket)||"MozWebSocket"in K},q.xdomainCheck=function(){return!0},q.prototype.clearEventHandlers=function(){return this.websocket&&(this.websocket.onopen=this.websocket.onmessage=this.websocket.onclose=this.websocket.onerror=ie),this},Y.transports.push("websocket")}(void 0!==ye?ye.Transport:we.exports,void 0!==ye?ye:we.parent.exports,void 0===le?window:le),function(Oe,Y,K){function q(oe){oe&&Y.Transport.apply(this,arguments)}function ie(){}Oe.XHR=q,Y.util.inherit(q,Y.Transport),q.prototype.open=function(){return this.socket.setBuffer(!1),this.onOpen(),this.get(),this.setCloseTimeout(),this},q.prototype.payload=function(oe){for(var L=[],z=0,J=oe.length;z<J;z++)L.push(Y.parser.encodePacket(oe[z]));this.send(Y.parser.encodePayload(L))},q.prototype.send=function(oe){return this.post(oe),this},q.prototype.post=function(oe){var J=this;this.socket.setBuffer(!0),this.sendXHR=this.request("POST"),K.XDomainRequest&&this.sendXHR instanceof XDomainRequest?this.sendXHR.onload=this.sendXHR.onerror=function z(){this.onload=ie,J.socket.setBuffer(!1)}:this.sendXHR.onreadystatechange=function L(){4==this.readyState&&(this.onreadystatechange=ie,200==this.status?(clearTimeout(this.ackTimeoutTimer),J.socket.setBuffer(!1)):J.onClose())},this.sendXHR.send(oe),J.sendXHR.ackTimeoutTimer=setTimeout(function(){J.onClose()},J.socket.options.ackTimeoutMs)},q.prototype.close=function(){return this.onClose(),this},q.prototype.request=function(oe){var L=Y.util.request(this.socket.isXDomain()),z=Y.util.query(this.socket.options.query,"t="+ +new Date);L.open(oe||"GET",this.prepareUrl(z),!0);var J=this.socket.options.requestHeaders;if(void 0!==J&&Object.keys(J).forEach(function(fe){L.setRequestHeader(fe,J[fe])}),"POST"==oe)try{L.setRequestHeader?L.setRequestHeader("Content-type","text/plain;charset=UTF-8"):L.contentType="text/plain"}catch(fe){}return L},q.prototype.scheme=function(){return this.socket.options.secure?"https":"http"},q.check=function(oe,L){try{var z=Y.util.request(L),J=K.XDomainRequest&&z instanceof XDomainRequest;if(z&&(!J||(oe&&oe.options&&oe.options.secure?"https:":"http:")==K.location.protocol))return!0}catch(B){}return!1},q.xdomainCheck=function(){return q.check(null,!0)},q.prototype.clearEventHandlers=function(){return this.sendXHR&&(this.sendXHR.onreadystatechange=this.sendXHR.onload=ie),this}}(void 0!==ye?ye.Transport:we.exports,void 0!==ye?ye:we.parent.exports,void 0===le?window:le),function(Oe,Y,K){function q(){Y.Transport.XHR.apply(this,arguments)}function ie(){}Oe["xhr-polling"]=q,Y.util.inherit(q,Y.Transport.XHR),Y.util.merge(q,Y.Transport.XHR),q.prototype.name="xhr-polling",q.prototype.open=function(oe){return this.connectErrorCallback=oe,Y.Transport.XHR.prototype.open.call(this),!1},q.prototype.get=function(){if(this.isOpened){var J=this;this.xhr=this.request(),K.XDomainRequest&&this.xhr instanceof XDomainRequest?(this.xhr.onload=function L(){J.connectErrorCallback=void 0,this.onload=ie,this.onerror=ie,J.onData(this.responseText),J.get()},this.xhr.onerror=function z(){J.onClose(),void 0!==J.connectErrorCallback&&(J.connectErrorCallback(),J.connectErrorCallback=void 0)}):this.xhr.onreadystatechange=function oe(){4==this.readyState&&(this.onreadystatechange=ie,200==this.status?(J.connectErrorCallback=void 0,J.onData(this.responseText),J.get()):(J.onClose(),void 0!==J.connectErrorCallback&&(J.connectErrorCallback(),J.connectErrorCallback=void 0)))},this.xhr.send(null)}},q.prototype.onClose=function(){if(Y.Transport.XHR.prototype.onClose.call(this),this.xhr){this.xhr.onreadystatechange=this.xhr.onload=this.xhr.onerror=ie;try{this.xhr.abort()}catch(oe){}this.xhr=null}},q.prototype.ready=function(oe,L){var z=this;Y.util.defer(function(){L.call(z)})},q.prototype.clearEventHandlers=function(){return Y.Transport.XHR.prototype.clearEventHandlers.call(this),this.xhr&&(this.xhr.onreadystatechange=this.xhr.onload=this.xhr.onerror=ie),this},Y.transports.push("xhr-polling")}(void 0!==ye?ye.Transport:we.exports,void 0!==ye?ye:we.parent.exports,void 0===le?window:le),de.io=ye}).call(de,De(13),De(14)(ke))},function(ke,de){var De;De=function(){return this}();try{De=De||Function("return this")()||(0,eval)("this")}catch(le){"object"==typeof window&&(De=window)}ke.exports=De},function(ke,de){ke.exports=function(De){return De.webpackPolyfill||(De.deprecate=function(){},De.paths=[],De.children||(De.children=[]),Object.defineProperty(De,"loaded",{enumerable:!0,get:function(){return De.l}}),Object.defineProperty(De,"id",{enumerable:!0,get:function(){return De.i}}),De.webpackPolyfill=1),De}},function(ke,de,De){Object.defineProperty(de,"__esModule",{value:!0}),de.ConnectionTracker=de.Properties=de.TrackerStep=de.ClientEventName=de.ResponseData=void 0;var Y,z,le=De(3),we=De(1),ye=De(0);de.ResponseData=function(){return function z(J){this.id=J,this.status=200,this.headers={},this.body=""}}(),(z=Y||(de.ClientEventName=Y={})).Connected="trouter_js_client_connected",z.Disconnected="trouter_js_client_disconnected",z.Error="trouter_js_client_error",z.Progress="trouter_js_client_progress",z.Response="trouter_js_client_response",z.Request="trouter_js_client_request",z.CheckConnection="trouter_js_client_check_connection",z.Registration="trouter_js_client_registration",z.Unregistration="trouter_js_client_unregistration";var K=function(){return function z(J,fe,_e,B,W){this.stepName=J,this.operation=fe,this.delta=_e,this.ts=B,this.error=W}}();de.TrackerStep=K,de.Properties=function(){return function z(){}}();var ie=function(){return function z(){this.numberOfPingReplies=0,this.connectedTimestamp=0,this.isNewUrl=!1,this.transportType="",this.connectionNumber=0}}(),oe=function(){return function z(){this.enabled=!1,this.numberOfStepsToMaintain=40,this.logHealthCheckError=!1,this.sendProgressTimeoutSecs=55,this.logSendPingError=!1,this.maxBackoffInMs=12e4,this.trouter_js_client_connected=!1,this.trouter_js_client_disconnected=!1,this.trouter_js_client_error=!1,this.trouter_js_client_progress=!1,this.trouter_js_client_response=!1,this.trouter_js_client_request=!1,this.trouter_js_client_registration=!1,this.trouter_js_client_unregistration=!1,this.trouter_js_client_check_connection=!0}}(),L=function(){function z(J,fe,_e,B,W,G,ne){this.clientId=fe,this.clientInfo=_e,this.getServerState=B,this.endpointId=W,this.clientCorrelationID=G,this.environment=ne,this.logger=new ye.Logger("ConnectionTracker",J),this.clientCorrelationID=void 0!==G?G:"",this.steps=[],this.connectionAttempt=0,this.totalStepCount=0,this.beginTimestamp=new le.Timespan,this.eventLogSettings=new oe,this.connectedInfo=new ie}return z.prototype.enable=function(J){this.eventLogSettings.enabled=!0,this.eventLogger=J},z.prototype.disable=function(){this.eventLogSettings.enabled=!1},z.prototype.sendProgress=function(J){this.steps.length>0&&this.sendTelemetry(Y.Progress,J,this.steps)},z.prototype.cancelProgressTimer=function(){void 0!==this.progressTimeout&&(clearTimeout(this.progressTimeout),this.progressTimeout=void 0)},z.prototype.resetProgressSendTimer=function(){var J=this;this.cancelProgressTimer(),void 0!==this.eventLogSettings.sendProgressTimeoutSecs&&this.eventLogSettings.sendProgressTimeoutSecs>0&&(this.progressTimeout=setTimeout(function(){J.sendProgress({reason:"timeout",timeoutSecs:J.eventLogSettings.sendProgressTimeoutSecs})},1e3*this.eventLogSettings.sendProgressTimeoutSecs))},z.prototype.setConnectedInfo=function(J,fe){this.connectedInfo.numberOfPingReplies=0,this.connectedInfo.connectedTimestamp=Date.now(),this.connectedInfo.isNewUrl=J,this.connectedInfo.transportType=fe,++this.connectedInfo.connectionNumber},z.prototype.clearConnectedInfo=function(){this.connectedInfo.numberOfPingReplies=0,this.connectedInfo.connectedTimestamp=0,this.connectedInfo.isNewUrl=!0,this.connectedInfo.transportType=""},z.prototype.copyProperties=function(J,fe){for(var _e=0,B=Object.keys(fe);_e<B.length;_e++){var W=B[_e];void 0!==fe[W]&&(J[W.replace(/-/g,"_")]={value:fe[W]})}},z.prototype.increasePingResponseCount=function(){++this.connectedInfo.numberOfPingReplies},z.prototype.sendTelemetry=function(J,fe,_e){try{if(!0===this.eventLogSettings.enabled&&!0===this.eventLogSettings[J]&&void 0!==this.eventLogger){var B=this.getServerState(),W={name:J,properties:{connectionAttempt:{value:this.connectionAttempt},epid:{value:this.endpointId},clientCorrelationID:{value:this.clientCorrelationID},steps:{value:(0,le.toJson)(_e)},clientID:{value:this.clientId},eventVersion:{value:3},environment:{value:this.environment},cv:{value:we.CLIENT_VERSION},ua:{value:this.clientInfo.ua},connectionId:{value:B.connectionId},connectedClientId:{value:B.connectedClientId},domId:{value:B.domId},url:{value:B.unsecureUrl},surl:{value:B.url},ttlInSecs:{value:B.getRemainingTtlInSec()},numberOfPingReplies:{value:this.connectedInfo.numberOfPingReplies},connectedTimestamp:{value:this.connectedInfo.connectedTimestamp},isNewUrl:{value:this.connectedInfo.isNewUrl},transportType:{value:this.connectedInfo.transportType},connectionNumber:{value:this.connectedInfo.connectionNumber}}};this.copyProperties(W.properties,fe),this.eventLogger.logEvent(W)}}catch(G){this.logger.warn("error in sending event ".concat(J,": ").concat((0,le.toJson)(G)))}},z.prototype.createStep=function(J,fe,_e){return new K(J,fe,this.beginTimestamp.duration,Date.now(),_e)},z.prototype.addStep=function(J,fe,_e){if(!1!==this.eventLogSettings.enabled&&(0===this.steps.length&&this.beginTimestamp.reset(),this.steps.push(this.createStep(J,fe,_e)),++this.totalStepCount,void 0!==this.eventLogSettings.numberOfStepsToMaintain&&this.steps.length>this.eventLogSettings.numberOfStepsToMaintain)){var B=this.steps.slice(0);this.steps.length=0,this.sendTelemetry(Y.Progress,{reason:"flush"},B)}},z.prototype.trackStart=function(J){this.addStep(J,"start")},z.prototype.trackEnd=function(J){this.addStep(J,"end")},z.prototype.trackError=function(J,fe,_e,B){void 0===_e&&(_e=!0),"health"===J&&!0!==this.eventLogSettings.logHealthCheckError||"ping"===J&&!1===this.eventLogSettings.logSendPingError||(void 0===B&&(B="error"),!0===_e&&this.addStep(J,B,fe),this.sendTelemetry(Y.Error,{},[this.createStep(J,B,fe)]))},z.prototype.trackProgress=function(J,fe){this.addStep(J,fe)},z.prototype.trackConnected=function(J,fe){this.setConnectedInfo(J,fe);var _e=this.steps.slice(0),B=this.totalStepCount,W=this.beginTimestamp.duration;this.steps.length=0,this.totalStepCount=0,this.sendTelemetry(Y.Connected,{stepCount:_e.length,totalStepCount:B,connectionEstablishmentMs_Total:W},_e),this.cancelProgressTimer()},z.prototype.getSessionLength=function(){return Date.now()-this.connectedInfo.connectedTimestamp},z.prototype.trackDisconnected=function(J){J.sessionLengthMS=this.getSessionLength(),this.sendTelemetry(Y.Disconnected,J,[]),this.resetProgressSendTimer()},z.prototype.trackNewConnection=function(){++this.connectionAttempt},z.prototype.trackRequest=function(J,fe){var _e={};void 0!==fe&&(_e.hasError=!0,_e.error=fe);try{if(J){_e.requestID=J.id,_e.httpMethod=J.method,_e.url=J.url,_e.bodyLength=J.body.length,_e.shortUrl=J.shortUrl,_e.requestTimeStamp=J.startTS,_e.correlationVector=J.correlationVector;for(var B=J.headers,W=0,G=Object.keys(B);W<G.length;W++){var ne=G[W];_e[ne]=B[ne]}}}catch(Z){_e.hasError=!0,_e.error="".concat(_e.error," error creating request context ").concat((0,le.toJson)(Z))}this.sendTelemetry(Y.Request,_e,[])},z.prototype.trackResponse=function(J,fe,_e,B){var W={};void 0!==B&&(W.hasError=!0,W.error=B);try{if(W.responseTimestamp=void 0!==_e?_e.sentTS:Date.now(),J){W.requestID=J.id,W.httpMethod=J.method,W.shortUrl=J.shortUrl,W.correlationVector=J.correlationVector;for(var G=J.headers,ne=0,Z=Object.keys(G);ne<Z.length;ne++){var ee=Z[ne];W[ee]=G[ee]}}_e&&(W.latencyMS=fe,W.responseCode=_e.status,W.responseLength=_e.body.length)}catch(re){W.hasError=!0,W.error="".concat(W.error," error creating response context ").concat((0,le.toJson)(re))}this.sendTelemetry(Y.Response,W,[])},z.prototype.sendResponseError=function(J,fe,_e){this.trackResponse(fe,void 0,_e,J)},z.prototype.close=function(){this.sendProgress({reason:"closed"}),this.steps.length=0,this.cancelProgressTimer()},z.prototype.mergeSettings=function(J){if(J){this.eventLogSettings.numberOfStepsToMaintain=Math.min(40,Math.max(10,void 0!==J.numberOfStepsToMaintain?J.numberOfStepsToMaintain:0));var fe=Math.min(3600,Math.max(55,void 0!==J.sendProgressTimeoutSecs?J.sendProgressTimeoutSecs:0));this.eventLogSettings.logHealthCheckError=J.logHealthCheckError,this.eventLogSettings.logSendPingError=J.logSendPingError;for(var _e=0,B=Object.keys(Y).map(function(G){return Y[G]});_e<B.length;_e++){var W=B[_e];void 0!==J[W]&&(this.eventLogSettings[W]=J[W])}this.eventLogSettings.sendProgressTimeoutSecs!==fe&&(this.eventLogSettings.sendProgressTimeoutSecs=fe,this.resetProgressSendTimer())}},z}();de.ConnectionTracker=L},function(ke,de,De){Object.defineProperty(de,"__esModule",{value:!0}),de.DisconnectReason=void 0;var le=function(){function we(ye,Oe,Y){this.reason=ye,this.claims=Oe,this.details=Y}return we.fromRawReason=function(ye,Oe){if(""===ye||"dup"===ye)return new we(ye);try{var Y=JSON.parse(ye);return"object"!=typeof Y||void 0===Y.reason?(null==Oe||Oe.error("invalid disconnect reason format"),new we("unknown",void 0,ye)):new we(Y.reason,Y.claims,Y.details)}catch(K){return new we("disconnect",void 0,ye)}},we.fromSocketIoEventData=function(ye,Oe){return"string"==typeof Oe?new we(ye,void 0,Oe):void 0},we.prototype.toTelemetryString=function(){return"socketerror"===this.reason||"reconnecterror"===this.reason||"disconnect"===this.reason?this.details:this.reason},we}();de.DisconnectReason=le},function(ke,de,De){Object.defineProperty(de,"__esModule",{value:!0}),de.ExponentialBackoff=void 0;var we=function(){function ye(Oe,Y,K){void 0===K&&(K={tolerance:2,minimumWaitMs:1e4}),this.logger=Oe,this.maxBackoffInMs=Y,this.gapDetectionSettings=K,this.backoffId=0,this.backoffCount=0}return ye.calculateNextBackoffMs=function(Oe,Y){var K=1+.4*(Math.random()-.5),q=1e3*Math.pow(2,Oe)*K;return q=Math.round(q),Math.min(Y,q)},ye.prototype.setMaxBackoffMs=function(Oe){this.maxBackoffInMs=Oe},ye.prototype.backoff=function(Oe,Y){var K=this;if(void 0!==this.timerHandle&&(this.logger.debug("Clearing current back off"),clearTimeout(this.timerHandle),this.timerHandle=void 0),void 0!==this.previousCompleteTime){var q=Date.now()-this.previousCompleteTime;q>this.maxBackoffInMs*this.gapDetectionSettings.tolerance&&q>this.gapDetectionSettings.minimumWaitMs&&(this.logger.info("Back off for ".concat(Oe," with ID ").concat(this.backoffId," will be reset due to a lot of time having passed since the previous backoff (").concat(q," ms)")),this.backoffCount=0,this.previousCompleteTime=void 0)}var ie=ye.calculateNextBackoffMs(this.backoffCount,this.maxBackoffInMs);this.backoffId++,this.backoffCount++,this.logger.info("Backing off ".concat(Oe," for ").concat(ie," milliseconds with ID ").concat(this.backoffId)),this.callback=function(L,z){(function le(ye,Oe,Y){if(void 0===ye||void 0===Oe)return!1;var K=Date.now()-ye;return K>Oe*Y.tolerance&&K>Y.minimumWaitMs})(L,z,K.gapDetectionSettings)&&(K.logger.info("Back off for ".concat(Oe," with ID ").concat(K.backoffId," will be reset due to the wait (").concat(Date.now()-(null!=L?L:0)," ms) being longer than expected (").concat(z," ms)")),K.backoffCount=0),K.logger.info("Back off for ".concat(Oe," with ID ").concat(K.backoffId," complete, invoking handler")),K.timerHandle=void 0,K.callback=void 0,K.previousCompleteTime=Date.now(),Y()};var oe=Date.now();this.timerHandle=setTimeout(function(){var L;return null===(L=K.callback)||void 0===L?void 0:L.call(K,oe,ie)},ie)},ye.prototype.reset=function(){void 0!==this.timerHandle&&(this.logger.debug("Resetting back off with ID ".concat(this.backoffId)),clearTimeout(this.timerHandle),this.timerHandle=void 0,this.callback=void 0),this.backoffCount=0},ye.prototype.expediteIfPending=function(){if(this.backoffCount=0,void 0!==this.timerHandle){this.logger.debug("Expediting back off with ID ".concat(this.backoffId)),clearTimeout(this.timerHandle),this.timerHandle=void 0;var Oe=this.callback;this.callback=void 0,Oe&&Oe()}},ye}();de.ExponentialBackoff=we},function(ke,de,De){var le=this&&this.__spreadArray||function(Y,K,q){if(q||2===arguments.length)for(var ie,oe=0,L=K.length;oe<L;oe++)!ie&&oe in K||(ie||(ie=Array.prototype.slice.call(K,0,oe)),ie[oe]=K[oe]);return Y.concat(ie||Array.prototype.slice.call(K))};Object.defineProperty(de,"__esModule",{value:!0}),de.LoggingManagerConsumer=de.RegistrationEnforcer=void 0;var we=De(6),ye=function(){function Y(K,q,ie){this.wrapped=K,this.shouldConnectionDependOnRegistration=q,this.shouldHoldBackEvents=ie,this.isRegistered=!1,this.heldBackEvents=[]}return Y.prototype.onDownstreamRequest=function(K,q,ie){this.passIfRegisteredOrNotNeeded("onDownstreamRequest",K,q,ie)},Y.prototype.onConnected=function(K){this.passIfRegisteredOrNotNeeded("onConnected",K)},Y.prototype.onRegistered=function(K){this.isRegistered=!0,this.wrapped.onRegistered(K),this.fireHeldBackEvents()},Y.prototype.onUnregistered=function(K){this.isRegistered=!1,this.wrapped.onUnregistered(K),K.getState()===we.State.Connected&&this.shouldConnectionDependOnRegistration()&&K.forceReconnectDueToNoRegistration()},Y.prototype.onReconnecting=function(K){this.wrapped.onReconnecting(K)},Y.prototype.onReconnectIsRequired=function(K,q,ie){this.wrapped.onReconnectIsRequired(K,q,ie)},Y.prototype.onDisconnected=function(K){this.isRegistered=!1,this.dropHeldBackEvents(),this.wrapped.onDisconnected(K)},Y.prototype.onTerminalError=function(K){this.wrapped.onTerminalError(K)},Y.prototype.onConnectionParametersUpdated=function(K){this.wrapped.onConnectionParametersUpdated(K)},Y.prototype.onTrouterMessageLost=function(K){this.passIfRegisteredOrNotNeeded("onTrouterMessageLost",K)},Y.prototype.onUserActivityStateAccepted=function(K){this.passIfRegisteredOrNotNeeded("onUserActivityStateAccepted",K)},Y.prototype.onAudiencesSetResolved=function(K,q){this.passIfRegisteredOrNotNeeded("onAudiencesSetResolved",K,q)},Y.prototype.getState=function(){return this.wrapped.getState()},Y.prototype.holdBackEvent=function(K){for(var q=[],ie=1;ie<arguments.length;ie++)q[ie-1]=arguments[ie];this.heldBackEvents.push({kind:K,args:q})},Y.prototype.passIfRegisteredOrNotNeeded=function(K){for(var q,ie=[],oe=1;oe<arguments.length;oe++)ie[oe-1]=arguments[oe];var L=this.shouldConnectionDependOnRegistration(),z=this.shouldHoldBackEvents();L&&z||this.fireHeldBackEvents(L?function(J){return"onConnected"!==J.kind}:void 0),this.isRegistered||!L||!1===z&&"onConnected"!==K?(q=this.wrapped)[K].apply(q,ie):this.holdBackEvent.apply(this,le([K],ie,!1))},Y.prototype.fireHeldBackEvents=function(K){for(var q,ie=0,oe=this.heldBackEvents;ie<oe.length;ie++){var L=oe[ie];(void 0===K||K(L))&&(q=this.wrapped)[L.kind].apply(q,L.args)}this.heldBackEvents=void 0===K?[]:this.heldBackEvents.filter(function(z){return!K(z)})},Y.prototype.dropHeldBackEvents=function(){this.heldBackEvents=[]},Y}();de.RegistrationEnforcer=ye;var Oe=function(){function Y(K,q,ie,oe){this.wrapped=K,this.prefix=q,this.logger=ie,this.onEventAction=oe}return Y.prototype.onEvent=function(K,q){var ie;void 0!==this.onEventAction?this.onEventAction(K,q):(null!==(ie=this.logger)&&void 0!==ie?ie:console).log("".concat(this.prefix," TracingEnforcer: ").concat(K,"(").concat(q,")"))},Y.prototype.onDownstreamRequest=function(K,q,ie){this.onEvent("onDownstreamRequest",JSON.stringify({request:q,response:ie})),this.wrapped.onDownstreamRequest(K,q,ie)},Y.prototype.onConnected=function(K){this.onEvent("onConnected",K.getState().toString()),this.wrapped.onConnected(K)},Y.prototype.onRegistered=function(K){this.onEvent("onRegistered",K.getState().toString()),this.wrapped.onRegistered(K)},Y.prototype.onUnregistered=function(K){this.onEvent("onUnregistered",K.getState().toString()),this.wrapped.onUnregistered(K)},Y.prototype.onReconnecting=function(K){this.onEvent("onReconnecting",K.getState().toString()),this.wrapped.onReconnecting(K)},Y.prototype.onReconnectIsRequired=function(K,q,ie){this.onEvent("onReconnectIsRequired",JSON.stringify({connection:K.getState().toString(),useConnectParamsFromCache:q,reason:ie})),this.wrapped.onReconnectIsRequired(K,q,ie)},Y.prototype.onDisconnected=function(K){this.onEvent("onDisconnected",K.getState().toString()),this.wrapped.onDisconnected(K)},Y.prototype.onTerminalError=function(K){this.onEvent("onTerminalError",JSON.stringify({connection:K})),this.wrapped.onTerminalError(K)},Y.prototype.onConnectionParametersUpdated=function(K){this.onEvent("onConnectionParametersUpdated",JSON.stringify({connectParams:K})),this.wrapped.onConnectionParametersUpdated(K)},Y.prototype.onTrouterMessageLost=function(K){this.onEvent("onTrouterMessageLost",JSON.stringify({flowTags:K})),this.wrapped.onTrouterMessageLost(K)},Y.prototype.onUserActivityStateAccepted=function(K){this.onEvent("onUserActivityStateAccepted",JSON.stringify({cv:K})),this.wrapped.onUserActivityStateAccepted(K)},Y.prototype.onAudiencesSetResolved=function(K,q){this.onEvent("onAudiencesSetResolved",JSON.stringify({audienceSubscriptionsResponse:K,cv:q})),this.wrapped.onAudiencesSetResolved(K,q)},Y.prototype.getState=function(){return this.wrapped.getState()},Y}();de.LoggingManagerConsumer=Oe},function(ke,de,De){Object.defineProperty(de,"__esModule",{value:!0}),de.TrouterManagerFsm=void 0;var le=De(2),we=De(4),ye=De(0),Oe=De(7),Y=function(){function K(q,ie){this.worker=ie,this.state=we.TrouterManagerState.Unknown,this.logger=new ye.Logger("ManagerFsm",q)}return K.prototype.start=function(){this.state===we.TrouterManagerState.Unknown?(this.setState(we.TrouterManagerState.Disconnected),this.worker.forceStopLingeringConnection(),this.worker.startFirstConnection()):(this.logger.info("start called in state '".concat(we.TrouterManagerState[this.state],"', expediting pending backoffs, if any")),this.worker.expediteBackoffOnConnections())},K.prototype.stop=function(q){this.state!==we.TrouterManagerState.Unknown?(this.setState(we.TrouterManagerState.Unknown),this.worker.stopFirstConnection(!0===q),this.worker.stopSecondConnection(!0===q)):this.showIgnored("stop")},K.prototype.getState=function(){switch(this.state){case we.TrouterManagerState.Unknown:case we.TrouterManagerState.Connected:case we.TrouterManagerState.Disconnected:case we.TrouterManagerState.Switching:return this.state;case we.TrouterManagerState.TerminalError:return le.TrouterState.Disconnected}},K.prototype.getInternalState=function(){return this.state},K.prototype.onConnected=function(q){this.state===we.TrouterManagerState.Disconnected&&q?this.worker.doesSecondConnectionExist()?this.setState(we.TrouterManagerState.Switching):(this.setState(we.TrouterManagerState.Connected),this.worker.dispatchConnected()):this.showIgnored("onConnected(".concat(q,")"))},K.prototype.onRegistered=function(q){this.state!==we.TrouterManagerState.Disconnected||q?this.state!==we.TrouterManagerState.Switching||q?this.state===we.TrouterManagerState.Disconnected&&q&&(this.setState(we.TrouterManagerState.Connected),this.worker.dispatchConnected()):(this.setState(we.TrouterManagerState.Connected),this.worker.switchConnections(),this.worker.stopSecondConnectionDelayed(),this.worker.dispatchConnected()):(this.setState(we.TrouterManagerState.Connected),this.worker.switchConnections(),this.worker.stopSecondConnection(!0),this.worker.dispatchConnected()),this.worker.dispatchRegistrationState(!0)},K.prototype.onUnregistered=function(q){q&&this.worker.dispatchRegistrationState(!1)},K.prototype.onReconnecting=function(q){this.state!==we.TrouterManagerState.Connected&&this.state!==we.TrouterManagerState.Switching||!q?this.showIgnored("onReconnecting(".concat(q,")")):(this.setState(we.TrouterManagerState.Disconnected),this.worker.dispatchDisconnected())},K.prototype.onReconnectionRequired=function(q,ie,oe){this.state===we.TrouterManagerState.Connected&&q?(this.setState(we.TrouterManagerState.Switching),this.worker.startSecondConnection(ie)):this.state===we.TrouterManagerState.Disconnected&&q?this.worker.startSecondConnection(ie):this.state===we.TrouterManagerState.Switching&&q&&oe===Oe.ReconnectReason.Configuration?(this.logger.debug("onReconnectionRequired: switch requested while already in Switching state"),this.worker.stopSecondConnection(!0),this.worker.startSecondConnection(ie)):this.showIgnored("onReconnectionRequired(".concat(q,")"))},K.prototype.onDisconnected=function(q){this.state==we.TrouterManagerState.Unknown&&q?this.worker.dispatchDisconnected():this.state==we.TrouterManagerState.Switching&&q?(this.worker.switchConnections(),this.worker.stopSecondConnection(!1),this.setState(we.TrouterManagerState.Disconnected),this.worker.dispatchDisconnected()):this.showIgnored("onDisconnected(".concat(q,")"))},K.prototype.onTerminalError=function(){this.setState(we.TrouterManagerState.TerminalError),this.worker.dispatchTerminalError()},K.prototype.showIgnored=function(q){this.logger.info("Ignoring event '".concat(q,"' in state '").concat(we.TrouterManagerState[this.state],"'"))},K.prototype.setState=function(q){this.logger.info("Switching from state '".concat(we.TrouterManagerState[this.state],"' to state '").concat(we.TrouterManagerState[q],"'")),this.state!==q?this.state=q:this.logger.error("Attempt to switch to the current state '".concat(we.TrouterManagerState[q],"'"))},K}();de.TrouterManagerFsm=Y},function(ke,de,De){function le(Z,ee){if(!ee)return Z;var re=ie(ie({},Z),{enabled:ee.TelemetryEnabled});return void 0!==ee.ClientTelemetryEventEnabled&&(re=ie(ie({},re),ee.ClientTelemetryEventEnabled)),re}function we(Z,ee,re){var We,Ge,qe,Ze,Ht,zt,X,x,te,me,ue=function(be){return Z.proxyUrlRewrite?(ee.info("Using rewritten URL for proxy"),Z.proxyUrlRewrite(be)):be};return{clientInfo:{ua:Z.trouterSettings.productName,v:Z.trouterSettings.version},ioOptions:{ackTimeoutMs:5e3,rewriteUrlForProxy:ue},clientCorrelationID:Z.trouterSettings.sessionId,environment:Z.trouterSettings.environment,telemetrySettings:le(Z.telemetryConfig.settings,re),eventLogger:Z.telemetryConfig.eventLogger,endpointId:Z.trouterSettings.registrationId,trouterUrl:(null==re?void 0:re.TrouterConnectionUrl)||Z.trouterSettings.trouterServiceUrl,registration:Z.trouterSettings.registrarServiceUrl?{registrarUrl:Z.trouterSettings.registrarServiceUrl,registrationId:null!==(We=Z.trouterSettings.registrationId)&&void 0!==We?We:"",pnhAppId:null!==(Ge=Z.trouterSettings.pnhAppId)&&void 0!==Ge?Ge:"",platform:null!==(qe=Z.trouterSettings.platform)&&void 0!==qe?qe:"",pnhTemplateKey:null!==(Ze=Z.trouterSettings.pnhTemplate)&&void 0!==Ze?Ze:"",platformUIVersion:null!==(Ht=Z.trouterSettings.platformUIVersion)&&void 0!==Ht?Ht:"",productContext:Z.trouterSettings.pnhProductContext||void 0,context:null!==(zt=Z.trouterSettings.pnhContext)&&void 0!==zt?zt:"",registrarTtlSec:(null!==(X=Z.trouterSettings.maxRegistrationTimeInMs)&&void 0!==X?X:0)/1e3}:void 0,connectionDependsOnRegistration:void 0===Z.trouterSettings.registrarServiceUrl?function(){return!1}:null!==(x=Z.trouterSettings.connectionDependsOnRegistration)&&void 0!==x?x:function(){return!1},delayEventsUntilRegistered:null!==(te=Z.trouterSettings.delayEventsUntilRegistered)&&void 0!==te?te:function(){return!1},timeoutOptions:ie({connectionTimeoutMs:Z.trouterSettings.trouterConnectTimeoutInMs||3e4,fetchTimeoutMs:1e4,pingTimeoutMs:4e4,pongTimeoutMs:5e3,maxBackoffMs:"TeamsCDL"===Z.trouterSettings.productName?3e5:3e4,requestTimeoutMs:5e3,userActivityResponseTimeoutMs:1e4},Z.trouterSettings.timeoutOptions),incallTimeoutOptions:ie({connectionTimeoutMs:1e4,fetchTimeoutMs:5e3,pingTimeoutMs:5e3,pongTimeoutMs:2e3,maxBackoffMs:"TeamsCDL"===Z.trouterSettings.productName?3e5:1e4,requestTimeoutMs:5e3,userActivityResponseTimeoutMs:1e4},Z.trouterSettings.incallTimeoutOptions),incallModeTimeoutMs:null!==(me=Z.trouterSettings.incallModeTimeoutMs)&&void 0!==me?me:0,lingeringConnectionDelayMs:6e4,userActivitySecondResendDelayMs:Z.trouterSettings.userActivitySecondResendDelayMs||1e4,duplicateDisconnectThresholdMs:1e4,connectionCache:Z.connectionCache,registrationStateCallback:Z.registrationStateCallbackForAcsDoNotUse,rewriteUrlForProxy:ue,retryLimitOnTokenFetch:Z.trouterSettings.retryLimitOnTokenFetch,extraConnectionHeaders:Z.trouterSettings.extraConnectionHeaders,expediteBackoffOnStartMinimumDelayMs:1e4,toJSON:function(){return ie(ie({},this),{connectionCache:this.connectionCache?{}:this.connectionCache})}}}var ie=this&&this.__assign||function(){return ie=Object.assign||function(Z){for(var ee,re=1,We=arguments.length;re<We;re++)for(var Ge in ee=arguments[re])Object.prototype.hasOwnProperty.call(ee,Ge)&&(Z[Ge]=ee[Ge]);return Z},ie.apply(this,arguments)},oe=this&&this.__awaiter||function(Z,ee,re,We){return new(re||(re=Promise))(function(qe,Ze){function Ht(x){try{X(We.next(x))}catch(te){Ze(te)}}function zt(x){try{X(We.throw(x))}catch(te){Ze(te)}}function X(x){x.done?qe(x.value):function Ge(qe){return qe instanceof re?qe:new re(function(Ze){Ze(qe)})}(x.value).then(Ht,zt)}X((We=We.apply(Z,ee||[])).next())})},L=this&&this.__generator||function(Z,ee){function re(X){return function(x){return function We(X){if(Ge)throw new TypeError("Generator is already executing.");for(;Ht&&(Ht=0,X[0]&&(zt=0)),zt;)try{if(Ge=1,qe&&(Ze=2&X[0]?qe.return:X[0]?qe.throw||((Ze=qe.return)&&Ze.call(qe),0):qe.next)&&!(Ze=Ze.call(qe,X[1])).done)return Ze;switch(qe=0,Ze&&(X=[2&X[0],Ze.value]),X[0]){case 0:case 1:Ze=X;break;case 4:return zt.label++,{value:X[1],done:!1};case 5:zt.label++,qe=X[1],X=[0];continue;case 7:X=zt.ops.pop(),zt.trys.pop();continue;default:if(!(Ze=(Ze=zt.trys).length>0&&Ze[Ze.length-1])&&(6===X[0]||2===X[0])){zt=0;continue}if(3===X[0]&&(!Ze||X[1]>Ze[0]&&X[1]<Ze[3])){zt.label=X[1];break}if(6===X[0]&&zt.label<Ze[1]){zt.label=Ze[1],Ze=X;break}if(Ze&&zt.label<Ze[2]){zt.label=Ze[2],zt.ops.push(X);break}Ze[2]&&zt.ops.pop(),zt.trys.pop();continue}X=ee.call(Z,zt)}catch(x){X=[6,x],qe=0}finally{Ge=Ze=0}if(5&X[0])throw X[1];return{value:X[0]?X[1]:void 0,done:!0}}([X,x])}}var Ge,qe,Ze,Ht,zt={label:0,sent:function(){if(1&Ze[0])throw Ze[1];return Ze[1]},trys:[],ops:[]};return Ht={next:re(0),throw:re(1),return:re(2)},"function"==typeof Symbol&&(Ht[Symbol.iterator]=function(){return this}),Ht};Object.defineProperty(de,"__esModule",{value:!0}),de.replaceTrouterUrlBase=de.getTrouterServiceVersion=de.createTrouterService=de.TrouterService=de.UserActivityState=de.TrouterState=void 0;var z=De(1),J=De(2);Object.defineProperty(de,"TrouterState",{enumerable:!0,get:function(){return J.TrouterState}}),Object.defineProperty(de,"UserActivityState",{enumerable:!0,get:function(){return J.UserActivityState}});var fe=De(0),_e=De(8),B=De(9),W=De(10),G=De(11),ne=function(){function Z(ee){this.logProvider=ee,this.stateChangedListeners=[],this.logger=new fe.Logger("Trouter",ee),this.trouterUrlPromise=new G.TrouterUrlPromise(ee),this.messageHandlers=new _e.MessageHandlerRegistry(ee),this.listeners={},this.connectionInfo=null,this.logger.info("Created TrouterService version ".concat(z.CLIENT_VERSION))}return Z.prototype.start=function(ee){var re;if(this.logger.info("Start"),!ee.skypeTokenProvider&&!ee.authTokenProvider)throw new Error("no token provider has been configured, either skypeTokenProvider or authTokenProvider must be populated");ee.skypeTokenProvider&&!ee.trouterSettings.disableInternalSkypeTokenCache&&(ee.skypeTokenProvider=(0,B.addCacheAsBackupTo)(ee.skypeTokenProvider)),this.trouterCfg=ee;var We=we(ee,this.logger,this.ecsCfg);!1===ee.internalEnableV4cProtocol&&(We.forceV4aProtocol=!0);var Ge=function q(Z,ee){var re,We=this;return function(Ge){return oe(We,void 0,void 0,function(){var qe,Ze,Ht;return L(this,function(zt){switch(zt.label){case 0:qe=new Date,Ze=setInterval(function(){var X=Math.round((Date.now()-qe.getTime())/6e4);Z.warn("Note: Trouter auth token request promise from ".concat(qe.toISOString()," has not been resolved for ").concat(X," minutes. The client is blocked from operating properly"))},3e5),zt.label=1;case 1:return zt.trys.push([1,,3,4]),[4,ee(Ge)];case 2:return Ht=zt.sent(),Ge.needFresh&&Ht.token===re&&Z.error("API violation: Trouter auth token provider got a request with needRefresh=true, but returned the same token as last time anyway. Please fix the host app"),re=Ht.token,[2,Ht];case 3:return clearInterval(Ze),[7];case 4:return[2]}})})}}(this.logger,null!==(re=ee.authTokenProvider)&&void 0!==re?re:function K(Z){var ee=this;return function(re){return oe(ee,void 0,void 0,function(){var We;return L(this,function(Ge){switch(Ge.label){case 0:return We={},[4,Z(re.needFresh)];case 1:return[2,(We.token=Ge.sent(),We.tokenType="skype",We)]}})})}}(ee.skypeTokenProvider));void 0===this.trouterServer&&(this.trouterServer=new W.TrouterManager(this.logProvider,We,Ge,void 0===ee.authTokenProvider,this)),void 0!==this.pendingActivityState&&(this.trouterServer.setUserActivityState(this.pendingActivityState[0],this.pendingActivityState[1]),this.pendingActivityState=void 0),this.trouterServer.start()},Z.prototype.stop=function(ee){this.logger.info("close connection"),this.trouterUrlPromise.rejectUrl(new Error("TrouterService is stopped")),void 0!==this.trouterServer&&this.trouterServer.stop(ee)},Z.prototype.setEcsConfig=function(ee){return oe(this,void 0,void 0,function(){var re=this;return L(this,function(We){return[2,new Promise(function(Ge){if(re.ecsCfg=ee.TrouterJScriptClient,re.logger.info("Setting ECS configuration to ".concat(JSON.stringify(re.ecsCfg))),void 0!==re.trouterServer&&void 0!==re.trouterCfg){var qe=we(re.trouterCfg,re.logger,re.ecsCfg);re.trouterServer.configure(qe)}Ge()})]})})},Z.prototype.checkConnection=function(ee){void 0!==this.trouterServer&&this.trouterServer.checkConnection(null!=ee&&ee)},Z.prototype.resendRegistration=function(){return oe(this,void 0,void 0,function(){return L(this,function(ee){if(!this.trouterServer)throw new Error("resendRegistration called too early");return[2,this.trouterServer.resendRegistration()]})})},Z.prototype.registerListener=function(ee,re){return""===re||!re.startsWith("/")||re.includes("?")||re.includes("#")?(this.logger.error("Listener path '".concat(re,"' is not valid")),!1):this.listeners[re]?(this.logger.error("Another listener is already registered for path '".concat(re,"'")),!1):(this.listeners[re]=ee,this.logger.debug("Listener for path '".concat(re,"' registered")),this.connectionInfo&&ee.onTrouterConnected(this.connectionInfo.baseEndpointUrl+re,this.connectionInfo),!0)},Z.prototype.unregisterListener=function(ee){for(var re=[],We=0,Ge=Object.keys(this.listeners);We<Ge.length;We++)this.listeners[qe=Ge[We]]===ee&&re.push(qe);if(0===re.length)return!1;for(var Ze=0,Ht=re;Ze<Ht.length;Ze++){var qe;delete this.listeners[qe=Ht[Ze]]}return this.logger.debug("Listener for path(s) '".concat(re.join("', '"),"' unregistered")),!0},Z.prototype.onTrouterConnected=function(ee,re){this.logger.debug("Trouter is now connected");for(var We=0,Ge=Object.keys(this.listeners);We<Ge.length;We++){var qe=Ge[We];try{this.listeners[qe].onTrouterConnected(re.baseEndpointUrl+qe,re)}catch(Ze){this.logger.error("Listener '".concat(qe,"' threw an exception from onTrouterConnected(): ").concat(Ze))}}this.connectionInfo=re,this.trouterUrlPromise.resolveUrl(ee),this.notifyStateChanged(J.TrouterState.Connected,{url:ee,getRemainingTtlInSec:function(){return re.connectionTtlSec}})},Z.prototype.onTrouterDisconnected=function(){this.logger.debug("Trouter is now disconnected"),this.connectionInfo=null;for(var ee=0,re=Object.keys(this.listeners);ee<re.length;ee++){var We=re[ee],Ge=this.listeners[We];if(Ge.onTrouterDisconnected)try{Ge.onTrouterDisconnected()}catch(qe){this.logger.error("Listener '".concat(We,"' threw an exception from onTrouterDisconnected(): ").concat(qe))}}this.notifyStateChanged(J.TrouterState.Disconnected)},Z.prototype.onTrouterRequest=function(ee,re){for(var We="",Ge=0,qe=Object.keys(this.listeners);Ge<qe.length;Ge++){var Ze=qe[Ge];ee.path.startsWith(Ze)&&Ze.length>We.length&&(We=Ze)}if(""===We)this.tryMessageHandlers(ee,re)||(re.status=404,re.headers={"Trouter-Responder":"ClientLib"},re.send());else try{this.listeners[We].onTrouterRequest(ee,re)}catch(Ht){this.logger.error("Listener '".concat(We,"' threw an exception from onTrouterRequest(): ").concat(Ht)),re.status=500,re.headers={"Trouter-Responder":"ClientLib"},re.send()}},Z.prototype.onTrouterMessageLoss=function(ee){this.logger.info("onTrouterMessageLoss called with tags [".concat(ee,"]"));for(var re=!0,We=0,Ge=Object.keys(this.listeners);We<Ge.length;We++){var qe=Ge[We],Ze=this.listeners[qe];if(Ze.onTrouterMessageLoss)try{void 0===(re=Ze.onTrouterMessageLoss(ee)&&re)&&(this.logger.error("Listener '".concat(qe,"' did not return a boolean value from onTrouterMessageLoss()")),re=!1)}catch(Ht){this.logger.error("Listener '".concat(qe,"' threw an exception from onTrouterMessageLoss(): ").concat(Ht)),re=!1}}return re},Z.prototype.onTrouterUserActivityStateAccepted=function(ee){this.logger.debug("onTrouterUserActivityStateAccepted cv: ".concat(ee));for(var re=0,We=Object.keys(this.listeners);re<We.length;re++){var Ge=We[re],qe=this.listeners[Ge];if(qe.onTrouterUserActivityStateAccepted)try{qe.onTrouterUserActivityStateAccepted(ee)}catch(Ze){this.logger.error("Listener '".concat(Ge,"' threw an exception from onTrouterUserActivityStateAccepted(): ").concat(Ze))}}},Z.prototype.onAudiencesSetResolved=function(ee,re){this.logger.debug("onAudiencesSetResolved cv: ".concat(re));for(var We=0,Ge=Object.keys(this.listeners);We<Ge.length;We++){var qe=Ge[We],Ze=this.listeners[qe];if(Ze.onAudiencesSetResolved)try{Ze.onAudiencesSetResolved(ee,re)}catch(Ht){this.logger.error("Listener '".concat(qe,"' threw an exception from onAudienceSubscribed(): ").concat(Ht))}}},Z.prototype.setUserActivityState=function(ee,re){if(ee!==J.UserActivityState.Active&&ee!==J.UserActivityState.Inactive)throw new Error("setUserActivityState called with unsupported value ".concat(ee));this.logger.info("setUserActivityState called with value ".concat(J.UserActivityState[ee])),this.trouterServer&&this.state()!==J.TrouterState.Unknown?this.trouterServer.setUserActivityState(ee,re):(this.pendingActivityState=[ee,re],this.logger.warn("setUserActivityState called before start() or after stop()"))},Z.prototype.setAudienceSubscriptions=function(ee,re){if(ee.audienceSubscriptions.length>1)throw new Error("Only singular audience subscription is supported");if(this.trouterServer&&this.state()!==J.TrouterState.Unknown)return this.trouterServer.setAudienceSubscriptionsAsync(ee,15e3,re);throw new Error("audience subscribe called before start() or after stop()")},Z.prototype.state=function(){return void 0!==this.trouterServer?this.trouterServer.getState():J.TrouterState.Unknown},Z.prototype.isInTerminalState=function(){return void 0!==this.trouterServer&&this.trouterServer.isInTerminalState()},Z.prototype.reportStateInfo=function(){return void 0===this.trouterServer?"":this.trouterServer.reportStateInfo()},Z.prototype.getServerState=function(){if(void 0!==this.trouterServer)return this.trouterServer.getServerState()},Z.prototype.getTrouterUrlAsync=function(){return void 0!==this.trouterServer?this.trouterUrlPromise.getPromise():Promise.reject(new Error("TrouterService has not been started"))},Z.prototype.onStateChanged=function(ee){if(this.logger.info("onStateChanged called"),void 0===ee)this.stateChangedListeners=this.stateChangedListeners.filter(function(We){return void 0===We.wrappedCallback});else{this.offStateChanged(ee);var re=function(We,Ge){ee(We,Ge?Ge.url:"")};re.wrappedCallback=ee,this.stateChangedListeners.push(re)}},Z.prototype.offStateChanged=function(ee){this.logger.info("offStateChanged called");var re=this.stateChangedListeners.length;return this.stateChangedListeners=this.stateChangedListeners.filter(function(We){return We.wrappedCallback!==ee}),re>this.stateChangedListeners.length},Z.prototype.addCallback=function(ee){this.logger.info("addListener called"),-1===this.stateChangedListeners.indexOf(ee,0)&&void 0!==ee&&this.stateChangedListeners.push(ee)},Z.prototype.removeCallback=function(ee){this.logger.info("removeListener called");var re=this.stateChangedListeners.indexOf(ee,0);return re>-1&&(this.stateChangedListeners.splice(re,1),!0)},Z.prototype.registerMessageHandler=function(ee){this.logger.info("registerMessageHandler is called"),this.messageHandlers.register(ee)},Z.prototype.clearMessageHandlers=function(){this.logger.info("clearMessageHandlers is called"),this.messageHandlers.clear()},Z.prototype.notifyStateChanged=function(ee,re){var We=this;this.logger.info("notifyStateChanged called, will forward to ".concat(this.stateChangedListeners.length," listeners")),this.stateChangedListeners.forEach(function(Ge){try{Ge(ee,re)}catch(qe){We.logger.error("Error in callback ".concat(qe))}})},Z.prototype.tryMessageHandlers=function(ee,re){if(!this.messageHandlers.active())return!1;var We,Ge=null;try{Ge=(We=JSON.parse(ee.body))&&(We.evt||We.eventId)||null}catch(Ht){}var Ze=this.messageHandlers.handleMessage({eventId:Ge,url:(this.connectionInfo?this.connectionInfo.baseEndpointUrl:"")+ee.path,body:We,rawBody:ee.body,headers:ee.headers});return!!Ze.isHandled&&(re.status=Ze.resultCode,Ze.responseHeaders&&(re.headers=Ze.responseHeaders),Ze.responseBody&&(re.body=Ze.responseBody),re.send(),!0)},Z}();de.TrouterService=ne,de.createTrouterService=function ye(Z){return new ne(Z)},de.getTrouterServiceVersion=function Oe(){return z.CLIENT_VERSION},de.replaceTrouterUrlBase=function Y(Z,ee){var re=Z.indexOf("://");if(re>=0){var We=Z.indexOf("/",re+3);if(We>=0)return ee+Z.substr(We)}return""}},function(ke,de){ke.exports=ut}]))});Qe(tt);var Pt=Be(function(Lt,St){Object.defineProperty(St,"__esModule",{value:!0}),St.DeleteReason=void 0;var ut=function(ke){return ke.DeletedByPolicy="deletedByPolicy",ke.DeletedByUser="deletedByUser",ke}(ut||(St.DeleteReason=ut={}))});Qe(Pt);var bt=Be(function(Lt,St){Object.defineProperty(St,"__esModule",{value:!0}),St.PACKAGE_VERSION=St.CONFIG_API_VERSION=St.EudbCountries=St.CloudPrefix=St.CloudType=St.MAX_NUMBER_OF_TOKEN_FETCH_RETRIES=void 0,St.MAX_NUMBER_OF_TOKEN_FETCH_RETRIES=3;var ut=function(de){return de.Public="Public",de.GccHigh="GCC High",de.Dod="DoD",de}(ut||(St.CloudType=ut={})),ke=function(de){return de.OrgId="orgid",de.Acs="acs",de.Spool="spool",de.GccHigh="gcch",de.GccHighAcs="gcch-acs",de.Dod="dod",de.DodAcs="dod-acs",de}(ke||(St.CloudPrefix=ke={}));St.EudbCountries=["europe","france","germany","norway","switzerland","sweden"],St.CONFIG_API_VERSION="2024-09-01",St.PACKAGE_VERSION="1.0.0-beta.34"});Qe(bt);var Dt=Pt,pt=bt,Ve=Be(function(Lt,St){var ut=Ke&&Ke.__awaiter||function(X,x,te,me){return new(te||(te=Promise))(function(be,Le){function Rt(jt){try{Ct(me.next(jt))}catch(yn){Le(yn)}}function Tt(jt){try{Ct(me.throw(jt))}catch(yn){Le(yn)}}function Ct(jt){jt.done?be(jt.value):function ue(be){return be instanceof te?be:new te(function(Le){Le(be)})}(jt.value).then(Rt,Tt)}Ct((me=me.apply(X,x||[])).next())})};Object.defineProperty(St,"__esModule",{value:!0}),St.isEudbLocation=St.parseTokenCredential=St.base64decode=St.toTelemetrySender=St.toLogProvider=St.toMessageHandler=void 0,St.generateUuid=function Ze(){return(0,Ue.default.v4)()};const ke=new Map([["chatMessageReceived",200],["typingIndicatorReceived",245],["readReceiptReceived",246],["chatMessageEdited",247],["chatMessageDeleted",248],["chatThreadCreated",257],["chatThreadPropertiesUpdated",258],["chatThreadDeleted",259],["participantsAdded",260],["participantsRemoved",261]]);function oe(X,x,te){return{threadId:X.groupId,sender:G(X.senderId),senderDisplayName:X.senderDisplayName,recipient:G(X.recipientMri),id:X.messageId,createdOn:new Date(X.originalArrivalTime),version:X.version,type:X.messageType,message:X.messageBody,metadata:ne(X.acsChatMessageMetadata)||{},attachments:re(ne(X.attachments)||[],x,te)}}St.toMessageHandler=(X,x,te,me)=>{const ue=ke.get(X);return{handleMessage(be){let Le=null;if(null!=be&&be.rawBody&&(Le=JSON.parse(be.rawBody)),null===Le||Le.eventId!==ue)return;const Rt=z(X,Le,te,me);return null!==Rt?(x(Rt),{isHandled:!0,resultCode:200}):void 0}}};const z=(X,x,te,me)=>{if("chatMessageReceived"===X)return oe(x,te,me);if("chatMessageEdited"===X)return function L(X,x,te){return Object.assign(Object.assign({},oe(X,x,te)),{editedOn:new Date(X.edittime)})}(x,te,me);if("chatMessageDeleted"===X){const ue=x;return{threadId:ue.groupId,sender:G(ue.senderId),senderDisplayName:ue.senderDisplayName,recipient:G(ue.recipientMri),id:ue.messageId,createdOn:new Date(ue.originalArrivalTime),version:ue.version,deletedOn:new Date(ue.deletetime),type:ue.messageType}}if("typingIndicatorReceived"===X){const ue=x;return{threadId:ue.groupId,sender:G(ue.senderId),senderDisplayName:ue.senderDisplayName,recipient:G(ue.recipientMri),version:ue.version,receivedOn:new Date(ue.originalArrivalTime)}}if("readReceiptReceived"===X){const ue=x,Le=JSON.parse(ue.messageBody).consumptionhorizon.split(";");return{threadId:ue.groupId,sender:G(ue.senderId),senderDisplayName:"",recipient:G(ue.recipientMri),chatMessageId:ue.messageId,readOn:new Date(+Le[1])}}if("chatThreadCreated"===X){const ue=x,be=JSON.parse(unescape(ue.createdBy)),Le=JSON.parse(unescape(ue.members)),Rt=J(be),Tt=Le.map(jt=>J(jt));return{threadId:ue.threadId,createdOn:new Date(ue.createTime),createdBy:Rt,version:ue.version,participants:Tt,properties:fe(JSON.parse(unescape(ue.properties))),retentionPolicy:_e(JSON.parse(unescape(ue.properties)))}}if("chatThreadPropertiesUpdated"===X){const ue=x,be=JSON.parse(unescape(ue.editedBy)),Le=J(be);return{threadId:ue.threadId,updatedOn:new Date(ue.editTime),updatedBy:Le,version:ue.version,properties:fe(JSON.parse(unescape(ue.properties))),retentionPolicy:_e(JSON.parse(unescape(ue.properties)))}}if("chatThreadDeleted"===X){const ue=x,be=x.reason==Dt.DeleteReason.DeletedByPolicy?null:J(JSON.parse(unescape(ue.deletedBy)));return{threadId:ue.threadId,deletedOn:new Date(ue.deleteTime),deletedBy:be,version:ue.version,reason:ue.reason}}if("participantsAdded"===X){const ue=x,be=JSON.parse(unescape(ue.addedBy)),Le=JSON.parse(unescape(ue.participantsAdded)),Rt=J(be),Tt=Le.map(jt=>J(jt));return{threadId:ue.threadId,addedOn:new Date(ue.time),addedBy:Rt,version:ue.version,participantsAdded:Tt}}if("participantsRemoved"===X){const ue=x,be=JSON.parse(unescape(ue.removedBy)),Le=JSON.parse(unescape(ue.participantsRemoved)),Rt=J(be),Tt=Le.map(jt=>J(jt));return{threadId:ue.threadId,removedOn:new Date(ue.time),removedBy:Rt,version:ue.version,participantsRemoved:Tt}}return null},J=X=>{var x;const te={id:G(X.participantId),displayName:X.displayName,metadata:ne(null!==(x=X.memberMetaData)&&void 0!==x?x:"")||{}};return X.shareHistoryTime&&(te.shareHistoryTime=new Date(X.shareHistoryTime)),te},fe=X=>{var x;return{topic:X.topic,metadata:ne(null!==(x=X.acsChatThreadMetadata)&&void 0!==x?x:"")||{}}},_e=X=>{const x=X.retentionPolicy;if(!x)return{kind:"none"};let te;try{te=JSON.parse(x)}catch(me){return{kind:"none"}}if("DeleteAfterCreationTime"===te.retentionPolicyType&&"string"==typeof te.executeAfter){const me=te.executeAfter.trim().replace(/^[+-]/,""),ue=me.includes(".")?me.split(".")[0]:"0",be=parseInt(ue,10);return{kind:"threadCreationDate",deleteThreadAfterDays:isNaN(be)?0:be}}return{kind:"none"}};St.toLogProvider=X=>({log:(...x)=>X.info(x),warn:(...x)=>X.warning(x),error:(...x)=>X.error(x),debug:(...x)=>X.verbose(x),info:(...x)=>X.verbose(x)}),St.toTelemetrySender=X=>({logEvent:x=>X.info(x)});const G=X=>X.startsWith("8:orgid:")?{kind:"microsoftTeamsUser",rawId:X,microsoftTeamsUserId:X.substring(8),isAnonymous:!1,cloud:"public"}:X.startsWith("8:dod:")?{kind:"microsoftTeamsUser",rawId:X,microsoftTeamsUserId:X.substring(6),isAnonymous:!1,cloud:"dod"}:X.startsWith("8:gcch:")?{kind:"microsoftTeamsUser",rawId:X,microsoftTeamsUserId:X.substring(7),isAnonymous:!1,cloud:"gcch"}:X.startsWith("8:teamsvisitor:")?{kind:"microsoftTeamsUser",rawId:X,microsoftTeamsUserId:X.substring(15),isAnonymous:!0}:X.startsWith("4:")?{kind:"phoneNumber",rawId:X,phoneNumber:X.substring(2)}:X.startsWith("8:acs:")||X.startsWith("8:gcch-acs:")||X.startsWith("8:dod-acs:")||X.startsWith("8:spool:")?{kind:"communicationUser",communicationUserId:X}:{kind:"unknown",id:X},ne=X=>{if(null!=X&&""!==X&&"null"!==X&&"{}"!==X&&"[]"!==X)return JSON.parse(X)},Z=(X,x,te)=>{let me;try{me=new URL(X),("http:"===me.protocol||"https:"===me.protocol)&&(me=new URL(me.pathname,x))}catch(ue){try{me=new URL(X,x)}catch(be){return X}}return me.searchParams.set("api-version",te),me.toString()},re=(X,x,te)=>(null==x||""===x||!(X=>{let x;try{x=new URL(X)}catch(te){return!1}return"http:"===x.protocol||"https:"===x.protocol})(x)||X.filter(me=>me.attachmentType.toLowerCase()==="image".toLowerCase()).map(me=>{me.previewUrl&&(me.previewUrl=Z(me.previewUrl,x,te)),me.url&&(me.url=Z(me.url,x,te))}),X);St.base64decode=X=>se.default.isNodeLike?Buffer.from(X,"base64").toString():atob(X),St.parseTokenCredential=X=>ut(void 0,void 0,void 0,function*(){const x=yield X.getToken(),te=null==x?void 0:x.token,me=(X=>{let[,x]=null==X?void 0:X.split(".");if(void 0===x)throw new Error("Invalid token");return x=x.replace(/-/g,"+").replace(/_/g,"/"),JSON.parse(decodeURIComponent(escape((0,St.base64decode)(x))))})(te),ue=me.skypeid,be=me.resourceId,Le=function zt(X){switch(X.substring(0,X.indexOf(":"))){case pt.CloudPrefix.OrgId:case pt.CloudPrefix.Acs:case pt.CloudPrefix.Spool:return pt.CloudType.Public;case pt.CloudPrefix.GccHigh:case pt.CloudPrefix.GccHighAcs:return pt.CloudType.GccHigh;case pt.CloudPrefix.Dod:case pt.CloudPrefix.DodAcs:return pt.CloudType.Dod;default:return pt.CloudType.Public}}(ue);return{jwtToken:te,acsResourceId:be,identityMri:ue,cloudType:Le,resourceLocation:me.resourceLocation||""}}),St.isEudbLocation=X=>!!X&&!!pt.EudbCountries.find(x=>x===X)});Qe(Ve);var Xe=Be(function(Lt,St){var ut=Ke&&Ke.__createBinding||(Object.create?function(Oe,Y,K,q){void 0===q&&(q=K);var ie=Object.getOwnPropertyDescriptor(Y,K);(!ie||("get"in ie?!Y.__esModule:ie.writable||ie.configurable))&&(ie={enumerable:!0,get:function(){return Y[K]}}),Object.defineProperty(Oe,q,ie)}:function(Oe,Y,K,q){void 0===q&&(q=K),Oe[q]=Y[K]}),ke=Ke&&Ke.__setModuleDefault||(Object.create?function(Oe,Y){Object.defineProperty(Oe,"default",{enumerable:!0,value:Y})}:function(Oe,Y){Oe.default=Y}),de=Ke&&Ke.__importStar||function(Oe){if(Oe&&Oe.__esModule)return Oe;var Y={};if(null!=Oe)for(var K in Oe)"default"!==K&&Object.prototype.hasOwnProperty.call(Oe,K)&&ut(Y,Oe,K);return ke(Y,Oe),Y},De=Ke&&Ke.__awaiter||function(Oe,Y,K,q){return new(K||(K=Promise))(function(oe,L){function z(_e){try{fe(q.next(_e))}catch(B){L(B)}}function J(_e){try{fe(q.throw(_e))}catch(B){L(B)}}function fe(_e){_e.done?oe(_e.value):function ie(oe){return oe instanceof K?oe:new K(function(L){L(oe)})}(_e.value).then(z,J)}fe((q=q.apply(Oe,Y||[])).next())})};Object.defineProperty(St,"__esModule",{value:!0}),St.RealTimeNotificationConfiguration=St.TrouterConfigClient=void 0;const le=de(pe.default);St.TrouterConfigClient=class we extends le.ServiceClient{constructor(Y,K){K||(K={});const q="azsdk-js-communication-signaling/".concat(pt.PACKAGE_VERSION),ie=K.userAgentOptions&&K.userAgentOptions.userAgentPrefix?"".concat(K.userAgentOptions.userAgentPrefix," ").concat(q):"".concat(q);super(Object.assign(Object.assign({},K),{userAgentOptions:{userAgentPrefix:ie},additionalPolicies:K.additionalPolicies})),this.apiVersion=pt.CONFIG_API_VERSION,this.endpoint=Y,this.httpClient=(0,yt.default.createDefaultHttpClient)()}fetchServiceUrls(Y){return De(this,void 0,void 0,function*(){try{const K=(yield Y.getToken()).token,q=(0,yt.default.createPipelineRequest)({url:"".concat(this.endpoint,"/chat/config/realTimeNotifications?api-version=").concat(this.apiVersion),method:"GET",headers:(0,yt.default.createHttpHeaders)({Authorization:"Bearer ".concat(K)})}),ie=yield this.pipeline.sendRequest(this.httpClient,q);if(200!==ie.status||!ie.bodyAsText)throw new Error("Failed to fetch service URLs. Status: ".concat(ie.status,", Body: ").concat(ie.bodyAsText||"No response body"));const oe=JSON.parse(ie.bodyAsText);if(!oe.trouterServiceUrl||!oe.registrarServiceUrl||!oe.cloudType)throw new Error("One or more required fields are missing in the response data");return new ye(oe.trouterServiceUrl,oe.registrarServiceUrl,oe.cloudType)}catch(K){throw new Error("Error fetching real-time notification configuration from Chat Gateway: ".concat(K.message))}})}};class ye{constructor(Y,K,q){this.trouterServiceUrl=Y,this.registrarServiceUrl=K,this.cloudType=q}}St.RealTimeNotificationConfiguration=ye});Qe(Xe);var xe=Ve,it=Xe,gt=Be(function(Lt,St){var ut=Ke&&Ke.__awaiter||function(De,le,we,ye){return new(we||(we=Promise))(function(Y,K){function q(L){try{oe(ye.next(L))}catch(z){K(z)}}function ie(L){try{oe(ye.throw(L))}catch(z){K(z)}}function oe(L){L.done?Y(L.value):function Oe(Y){return Y instanceof we?Y:new we(function(K){K(Y)})}(L.value).then(q,ie)}oe((ye=ye.apply(De,le||[])).next())})};Object.defineProperty(St,"__esModule",{value:!0}),St.defaultTelemetrySettings=St.createSettings=void 0;const ke={version:"1.0.0",registrationId:"",sessionId:"",pnhAppId:"AcsWeb",pnhTemplate:"AcsWeb_Chat_2.1",platform:"SPOOL",platformUIVersion:"0.0.0",environment:"",productName:"acs-chat-web",trouterServiceUrl:"",registrarServiceUrl:"",registrarRefreshTimeoutInMs:35e4,timeoutOptions:{connectionTimeoutMs:2e4,fetchTimeoutMs:1e4,pingTimeoutMs:4e4,pongTimeoutMs:5e3,maxBackoffMs:5e4,requestTimeoutMs:5e3},maxRegistrationTimeInMs:72e5};St.createSettings=(De,le)=>ut(void 0,void 0,void 0,function*(){var we;const ye=null==le?void 0:le.resourceEndpoint;if(void 0===ye)throw new Error("'endpoint' cannot be null");const Oe=Object.assign({},ke);Oe.registrationId=(0,xe.generateUuid)(),Oe.sessionId=(0,xe.generateUuid)();const K=yield new it.TrouterConfigClient(ye,le).fetchServiceUrls(De);return Oe.trouterServiceUrl="".concat(K.trouterServiceUrl,"/v4/a"),Oe.registrarServiceUrl="".concat(K.registrarServiceUrl,"/v3/registrations"),"int"===K.cloudType&&(Oe.pnhAppId="cns-e2e-test",Oe.pnhTemplate="cns-e2e-test:1.8"),Oe.maxRegistrationTimeInMs=null!==(we=null==le?void 0:le.registrationTimeInMs)&&void 0!==we?we:ke.maxRegistrationTimeInMs,Oe}),St.defaultTelemetrySettings={enabled:!1}});Qe(gt);var It=gt,ot=Be(function(Lt,St){var ut=Ke&&Ke.__awaiter||function(De,le,we,ye){return new(we||(we=Promise))(function(Y,K){function q(L){try{oe(ye.next(L))}catch(z){K(z)}}function ie(L){try{oe(ye.throw(L))}catch(z){K(z)}}function oe(L){L.done?Y(L.value):function Oe(Y){return Y instanceof we?Y:new we(function(K){K(Y)})}(L.value).then(q,ie)}oe((ye=ye.apply(De,le||[])).next())})};Object.defineProperty(St,"__esModule",{value:!0}),St.CommunicationSignalingClient=St.ConnectionState=void 0;var ke=function(De){return De[De.Unknown=0]="Unknown",De[De.Connected=2]="Connected",De[De.Disconnected=3]="Disconnected",De[De.Switching=9]="Switching",De}(ke||(St.ConnectionState=ke={}));St.CommunicationSignalingClient=class de{constructor(le,we,ye){this.credential=le,this.logger=we,this.options=ye,this.stateChangedListener=null,this.tokenFetchRetries=0,this.trouter=(0,tt.createTrouterService)((0,xe.toLogProvider)(we))}start(){return ut(this,void 0,void 0,function*(){var le,we;if(this.resourceEndpoint=null===(le=this.options)||void 0===le?void 0:le.resourceEndpoint,void 0===this.resourceEndpoint)throw new Error("'endpoint' cannot be null");this.gatewayApiVersion=(null===(we=this.options)||void 0===we?void 0:we.gatewayApiVersion)||"2024-03-07",void 0===this.config&&(this.config={trouterSettings:yield(0,It.createSettings)(this.credential,this.options),skypeTokenProvider:ye=>ut(this,void 0,void 0,function*(){if(ye){if(this.tokenFetchRetries+=1,this.tokenFetchRetries>pt.MAX_NUMBER_OF_TOKEN_FETCH_RETRIES)throw yield this.stop(!0),new Error("Access token is expired and failed to fetch a valid one after ".concat(pt.MAX_NUMBER_OF_TOKEN_FETCH_RETRIES," retries"))}else this.tokenFetchRetries=0;return Promise.resolve((yield this.credential.getToken()).token)}),telemetryConfig:{eventLogger:(0,xe.toTelemetrySender)(this.logger),settings:It.defaultTelemetrySettings}}),this.trouter.start(this.config),this.trouter.setUserActivityState(tt.UserActivityState.Active)})}stop(le){return ut(this,void 0,void 0,function*(){this.trouter.offStateChanged(this.stateChangedListener),this.trouter.clearMessageHandlers(),this.trouter.stop(null!=le?le:this.tokenFetchRetries>pt.MAX_NUMBER_OF_TOKEN_FETCH_RETRIES)})}on(le,we){if("connectionChanged"===le)return this.trouter.offStateChanged(this.stateChangedListener),this.stateChangedListener=(ye,Oe)=>we(ye),void this.trouter.onStateChanged(this.stateChangedListener);this.trouter.registerMessageHandler((0,xe.toMessageHandler)(le,we,this.resourceEndpoint,this.gatewayApiVersion))}}});Qe(ot);var Ot=ot,Jt=Qe(Be(function(Lt,St){var ut=Ke&&Ke.__createBinding||(Object.create?function(de,De,le,we){void 0===we&&(we=le);var ye=Object.getOwnPropertyDescriptor(De,le);(!ye||("get"in ye?!De.__esModule:ye.writable||ye.configurable))&&(ye={enumerable:!0,get:function(){return De[le]}}),Object.defineProperty(de,we,ye)}:function(de,De,le,we){void 0===we&&(we=le),de[we]=De[le]}),ke=Ke&&Ke.__exportStar||function(de,De){for(var le in de)"default"!==le&&!Object.prototype.hasOwnProperty.call(De,le)&&ut(De,de,le)};Object.defineProperty(St,"__esModule",{value:!0}),ke(Ot,St)}));Kt.exports=Jt},968:(Kt,ft,Se)=>{var je={};function nt(y){return(nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(_){return typeof _}:function(_){return _&&"function"==typeof Symbol&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _})(y)}function ct(y,_,S){return(_=function Je(y){var _=function st(y,_){if("object"!=nt(y)||!y)return y;var S=y[Symbol.toPrimitive];if(void 0!==S){var C=S.call(y,_||"default");if("object"!=nt(C))return C;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===_?String:Number)(y)}(y,"string");return"symbol"==nt(_)?_:_+""}(_))in y?Object.defineProperty(y,_,{value:S,enumerable:!0,configurable:!0,writable:!0}):y[_]=S,y}function Ue(y,_){var S=Object.keys(y);if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(y);_&&(C=C.filter(function(T){return Object.getOwnPropertyDescriptor(y,T).enumerable})),S.push.apply(S,C)}return S}function se(y){for(var _=1;_<arguments.length;_++){var S=null!=arguments[_]?arguments[_]:{};_%2?Ue(Object(S),!0).forEach(function(C){ct(y,C,S[C])}):Object.getOwnPropertyDescriptors?Object.defineProperties(y,Object.getOwnPropertyDescriptors(S)):Ue(Object(S)).forEach(function(C){Object.defineProperty(y,C,Object.getOwnPropertyDescriptor(S,C))})}return y}Se.r(je),Se.d(je,{AddChatParticipantsRequest:()=>aO,AddChatParticipantsResult:()=>cO,ChatAttachment:()=>lK,ChatError:()=>sK,ChatMessage:()=>iO,ChatMessageContent:()=>aK,ChatMessageReadReceipt:()=>tK,ChatMessageReadReceiptsCollection:()=>N0,ChatMessagesCollection:()=>O0,ChatParticipant:()=>cK,ChatParticipantsCollection:()=>k0,ChatRetentionPolicy:()=>ol,ChatThreadItem:()=>uK,ChatThreadProperties:()=>dO,ChatThreadsItemCollection:()=>x0,CommunicationErrorResponse:()=>Et,CommunicationIdentifierModel:()=>tO,CommunicationUserIdentifierModel:()=>nK,CreateChatThreadRequest:()=>lO,CreateChatThreadResult:()=>uO,MicrosoftTeamsAppIdentifierModel:()=>iK,MicrosoftTeamsUserIdentifierModel:()=>oK,NoneRetentionPolicy:()=>gO,PhoneNumberIdentifierModel:()=>rK,SendChatMessageRequest:()=>rO,SendChatMessageResult:()=>oO,SendReadReceiptRequest:()=>nO,SendTypingNotificationRequest:()=>hO,ThreadCreationDateRetentionPolicy:()=>pO,UpdateChatMessageRequest:()=>sO,UpdateChatThreadRequest:()=>fO,discriminators:()=>dK});var pe=Se(467);let Ke=null,Be=1;const _t=Symbol("SIGNAL");function tt(y){const _=Ke;return Ke=y,_}const pt={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function xe(y){if((!ut(y)||y.dirty)&&(y.dirty||y.lastCleanEpoch!==Be)){if(!y.producerMustRecompute(y)&&!ln(y))return y.dirty=!1,void(y.lastCleanEpoch=Be);y.producerRecomputeValue(y),y.dirty=!1,y.lastCleanEpoch=Be}}function ln(y){ke(y);for(let _=0;_<y.producerNode.length;_++){const S=y.producerNode[_],C=y.producerLastReadVersion[_];if(C!==S.version||(xe(S),C!==S.version))return!0}return!1}function St(y,_){if(function de(y){var _,S;null!==(_=y.liveConsumerNode)&&void 0!==_||(y.liveConsumerNode=[]),null!==(S=y.liveConsumerIndexOfThis)&&void 0!==S||(y.liveConsumerIndexOfThis=[])}(y),ke(y),1===y.liveConsumerNode.length)for(let C=0;C<y.producerNode.length;C++)St(y.producerNode[C],y.producerIndexOfThis[C]);const S=y.liveConsumerNode.length-1;if(y.liveConsumerNode[_]=y.liveConsumerNode[S],y.liveConsumerIndexOfThis[_]=y.liveConsumerIndexOfThis[S],y.liveConsumerNode.length--,y.liveConsumerIndexOfThis.length--,_<y.liveConsumerNode.length){const C=y.liveConsumerIndexOfThis[_],T=y.liveConsumerNode[_];ke(T),T.producerIndexOfThis[C]=_}}function ut(y){var _,S;return y.consumerIsAlwaysLive||(null!==(_=null==y||null===(S=y.liveConsumerNode)||void 0===S?void 0:S.length)&&void 0!==_?_:0)>0}function ke(y){var _,S,C;null!==(_=y.producerNode)&&void 0!==_||(y.producerNode=[]),null!==(S=y.producerIndexOfThis)&&void 0!==S||(y.producerIndexOfThis=[]),null!==(C=y.producerLastReadVersion)&&void 0!==C||(y.producerLastReadVersion=[])}let K=null;function re(y){return"function"==typeof y}function We(y){const S=y(C=>{Error.call(C),C.stack=(new Error).stack});return S.prototype=Object.create(Error.prototype),S.prototype.constructor=S,S}const Ge=We(y=>function(S){y(this),this.message=S?"".concat(S.length," errors occurred during unsubscription:\n").concat(S.map((C,T)=>"".concat(T+1,") ").concat(C.toString())).join("\n  ")):"",this.name="UnsubscriptionError",this.errors=S});function qe(y,_){if(y){const S=y.indexOf(_);0<=S&&y.splice(S,1)}}class Ze{constructor(_){this.initialTeardown=_,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let _;if(!this.closed){this.closed=!0;const{_parentage:S}=this;if(S)if(this._parentage=null,Array.isArray(S))for(const D of S)D.remove(this);else S.remove(this);const{initialTeardown:C}=this;if(re(C))try{C()}catch(D){_=D instanceof Ge?D.errors:[D]}const{_finalizers:T}=this;if(T){this._finalizers=null;for(const D of T)try{X(D)}catch(I){_=null!=_?_:[],I instanceof Ge?_=[..._,...I.errors]:_.push(I)}}if(_)throw new Ge(_)}}add(_){var S;if(_&&_!==this)if(this.closed)X(_);else{if(_ instanceof Ze){if(_.closed||_._hasParent(this))return;_._addParent(this)}(this._finalizers=null!==(S=this._finalizers)&&void 0!==S?S:[]).push(_)}}_hasParent(_){const{_parentage:S}=this;return S===_||Array.isArray(S)&&S.includes(_)}_addParent(_){const{_parentage:S}=this;this._parentage=Array.isArray(S)?(S.push(_),S):S?[S,_]:_}_removeParent(_){const{_parentage:S}=this;S===_?this._parentage=null:Array.isArray(S)&&qe(S,_)}remove(_){const{_finalizers:S}=this;S&&qe(S,_),_ instanceof Ze&&_._removeParent(this)}}Ze.EMPTY=(()=>{const y=new Ze;return y.closed=!0,y})();const Ht=Ze.EMPTY;function zt(y){return y instanceof Ze||y&&"closed"in y&&re(y.remove)&&re(y.add)&&re(y.unsubscribe)}function X(y){re(y)?y():y.unsubscribe()}const x={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},te={setTimeout(y,_,...S){const{delegate:C}=te;return null!=C&&C.setTimeout?C.setTimeout(y,_,...S):setTimeout(y,_,...S)},clearTimeout(y){const{delegate:_}=te;return((null==_?void 0:_.clearTimeout)||clearTimeout)(y)},delegate:void 0};function me(y){te.setTimeout(()=>{const{onUnhandledError:_}=x;if(!_)throw y;_(y)})}function ue(){}const be=Tt("C",void 0,void 0);function Tt(y,_,S){return{kind:y,value:_,error:S}}let Ct=null;function jt(y){if(x.useDeprecatedSynchronousErrorHandling){const _=!Ct;if(_&&(Ct={errorThrown:!1,error:null}),y(),_){const{errorThrown:S,error:C}=Ct;if(Ct=null,S)throw C}}else y()}class kn extends Ze{constructor(_){super(),this.isStopped=!1,_?(this.destination=_,zt(_)&&_.add(this)):this.destination=Ys}static create(_,S,C){return new yo(_,S,C)}next(_){this.isStopped?Hi(function Rt(y){return Tt("N",y,void 0)}(_),this):this._next(_)}error(_){this.isStopped?Hi(function Le(y){return Tt("E",void 0,y)}(_),this):(this.isStopped=!0,this._error(_))}complete(){this.isStopped?Hi(be,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(_){this.destination.next(_)}_error(_){try{this.destination.error(_)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Gn=Function.prototype.bind;function nr(y,_){return Gn.call(y,_)}class $i{constructor(_){this.partialObserver=_}next(_){const{partialObserver:S}=this;if(S.next)try{S.next(_)}catch(C){Ho(C)}}error(_){const{partialObserver:S}=this;if(S.error)try{S.error(_)}catch(C){Ho(C)}else Ho(_)}complete(){const{partialObserver:_}=this;if(_.complete)try{_.complete()}catch(S){Ho(S)}}}class yo extends kn{constructor(_,S,C){let T;if(super(),re(_)||!_)T={next:null!=_?_:void 0,error:null!=S?S:void 0,complete:null!=C?C:void 0};else{let D;this&&x.useDeprecatedNextContext?(D=Object.create(_),D.unsubscribe=()=>this.unsubscribe(),T={next:_.next&&nr(_.next,D),error:_.error&&nr(_.error,D),complete:_.complete&&nr(_.complete,D)}):T=_}this.destination=new $i(T)}}function Ho(y){x.useDeprecatedSynchronousErrorHandling?function yn(y){x.useDeprecatedSynchronousErrorHandling&&Ct&&(Ct.errorThrown=!0,Ct.error=y)}(y):me(y)}function Hi(y,_){const{onStoppedNotification:S}=x;S&&te.setTimeout(()=>S(y,_))}const Ys={closed:!0,next:ue,error:function Xs(y){throw y},complete:ue},zi="function"==typeof Symbol&&Symbol.observable||"@@observable";function so(y){return y}function gs(y){return 0===y.length?so:1===y.length?y[0]:function(S){return y.reduce((C,T)=>T(C),S)}}let Kn=(()=>{class y{constructor(S){S&&(this._subscribe=S)}lift(S){const C=new y;return C.source=this,C.operator=S,C}subscribe(S,C,T){const D=function Wi(y){return y&&y instanceof kn||function Zs(y){return y&&re(y.next)&&re(y.error)&&re(y.complete)}(y)&&zt(y)}(S)?S:new yo(S,C,T);return jt(()=>{const{operator:I,source:M}=this;D.add(I?I.call(D,M):M?this._subscribe(D):this._trySubscribe(D))}),D}_trySubscribe(S){try{return this._subscribe(S)}catch(C){S.error(C)}}forEach(S,C){return new(C=ms(C))((T,D)=>{const I=new yo({next:M=>{try{S(M)}catch(A){D(A),I.unsubscribe()}},error:D,complete:T});this.subscribe(I)})}_subscribe(S){var C;return null===(C=this.source)||void 0===C?void 0:C.subscribe(S)}[zi](){return this}pipe(...S){return gs(S)(this)}toPromise(S){return new(S=ms(S))((C,T)=>{let D;this.subscribe(I=>D=I,I=>T(I),()=>C(D))})}}return y.create=_=>new y(_),y})();function ms(y){var _;return null!==(_=null!=y?y:x.Promise)&&void 0!==_?_:Promise}const Jr=We(y=>function(){y(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let fr=(()=>{class y extends Kn{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(S){const C=new ys(this,this);return C.operator=S,C}_throwIfClosed(){if(this.closed)throw new Jr}next(S){jt(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const C of this.currentObservers)C.next(S)}})}error(S){jt(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=S;const{observers:C}=this;for(;C.length;)C.shift().error(S)}})}complete(){jt(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:S}=this;for(;S.length;)S.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var S;return(null===(S=this.observers)||void 0===S?void 0:S.length)>0}_trySubscribe(S){return this._throwIfClosed(),super._trySubscribe(S)}_subscribe(S){return this._throwIfClosed(),this._checkFinalizedStatuses(S),this._innerSubscribe(S)}_innerSubscribe(S){const{hasError:C,isStopped:T,observers:D}=this;return C||T?Ht:(this.currentObservers=null,D.push(S),new Ze(()=>{this.currentObservers=null,qe(D,S)}))}_checkFinalizedStatuses(S){const{hasError:C,thrownError:T,isStopped:D}=this;C?S.error(T):D&&S.complete()}asObservable(){const S=new Kn;return S.source=this,S}}return y.create=(_,S)=>new ys(_,S),y})();class ys extends fr{constructor(_,S){super(),this.destination=_,this.source=S}next(_){var S,C;null===(C=null===(S=this.destination)||void 0===S?void 0:S.next)||void 0===C||C.call(S,_)}error(_){var S,C;null===(C=null===(S=this.destination)||void 0===S?void 0:S.error)||void 0===C||C.call(S,_)}complete(){var _,S;null===(S=null===(_=this.destination)||void 0===_?void 0:_.complete)||void 0===S||S.call(_)}_subscribe(_){var S,C;return null!==(C=null===(S=this.source)||void 0===S?void 0:S.subscribe(_))&&void 0!==C?C:Ht}}class rr extends fr{constructor(_){super(),this._value=_}get value(){return this.getValue()}_subscribe(_){const S=super._subscribe(_);return!S.closed&&_.next(this._value),S}getValue(){const{hasError:_,thrownError:S,_value:C}=this;if(_)throw S;return this._throwIfClosed(),C}next(_){super.next(this._value=_)}}function ce(y){return re(null==y?void 0:y.lift)}function he(y){return _=>{if(ce(_))return _.lift(function(S){try{return y(S,this)}catch(C){this.error(C)}});throw new TypeError("Unable to lift unknown Observable type")}}function Te(y,_,S,C,T){return new $e(y,_,S,C,T)}class $e extends kn{constructor(_,S,C,T,D,I){super(_),this.onFinalize=D,this.shouldUnsubscribe=I,this._next=S?function(M){try{S(M)}catch(A){_.error(A)}}:super._next,this._error=T?function(M){try{T(M)}catch(A){_.error(A)}finally{this.unsubscribe()}}:super._error,this._complete=C?function(){try{C()}catch(M){_.error(M)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var _;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:S}=this;super.unsubscribe(),!S&&(null===(_=this.onFinalize)||void 0===_||_.call(this))}}}function k(y,_){return he((S,C)=>{let T=0;S.subscribe(Te(C,D=>{C.next(y.call(_,D,T++))}))})}const H="https://g.co/ng/security#xss";class j extends Error{constructor(_,S){super(function ge(y,_){const S="NG0".concat(Math.abs(y));return"".concat(S).concat(_?": "+_:"")}(_,S)),this.code=_}}function Fe(y){return{toString:y}.toString()}const mt="__parameters__";function pn(y,_,S){return Fe(()=>{const C=function bn(y){return function(...S){if(y){const C=y(...S);for(const T in C)this[T]=C[T]}}}(_);function T(...D){if(this instanceof T)return C.apply(this,D),this;const I=new T(...D);return M.annotation=I,M;function M(A,R,N){const O=A.hasOwnProperty(mt)?A[mt]:Object.defineProperty(A,mt,{value:[]})[mt];for(;O.length<=N;)O.push(null);return(O[N]=O[N]||[]).push(I),A}}return S&&(T.prototype=Object.create(S.prototype)),T.prototype.ngMetadataName=y,T.annotationCls=T,T})}const Pe=globalThis;function rt(y){for(let _ in y)if(y[_]===rt)return _;throw Error("Could not find renamed property on target object.")}function Bt(y,_){for(const S in _)_.hasOwnProperty(S)&&!y.hasOwnProperty(S)&&(y[S]=_[S])}function xt(y){if("string"==typeof y)return y;if(Array.isArray(y))return"["+y.map(xt).join(", ")+"]";if(null==y)return""+y;if(y.overriddenName)return"".concat(y.overriddenName);if(y.name)return"".concat(y.name);const _=y.toString();if(null==_)return""+_;const S=_.indexOf("\n");return-1===S?_:_.substring(0,S)}function Tn(y,_){return null==y||""===y?null===_?"":_:null==_||""===_?y:y+" "+_}const Vn=rt({__forward_ref__:rt});function qt(y){return y.__forward_ref__=qt,y.toString=function(){return xt(this())},y}function kt(y){return er(y)?y():y}function er(y){return"function"==typeof y&&y.hasOwnProperty(Vn)&&y.__forward_ref__===qt}function At(y){return{token:y.token,providedIn:y.providedIn||null,factory:y.factory,value:void 0}}function Po(y){return{providers:y.providers||[],imports:y.imports||[]}}function vd(y){return V0(y,Cd)||V0(y,j0)}function V0(y,_){return y.hasOwnProperty(_)?y[_]:null}function _d(y){return y&&(y.hasOwnProperty(Ap)||y.hasOwnProperty(kO))?y[Ap]:null}const Cd=rt({\u0275prov:rt}),Ap=rt({\u0275inj:rt}),j0=rt({ngInjectableDef:rt}),kO=rt({ngInjectorDef:rt});class Mt{constructor(_,S){this._desc=_,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof S?this.__NG_ELEMENT_ID__=S:void 0!==S&&(this.\u0275prov=At({token:this,providedIn:S.providedIn||"root",factory:S.factory}))}get multi(){return this}toString(){return"InjectionToken ".concat(this._desc)}}function kp(y){return y&&!!y.\u0275providers}const sl=rt({\u0275cmp:rt}),xp=rt({\u0275dir:rt}),Fp=rt({\u0275pipe:rt}),$0=rt({\u0275mod:rt}),Ki=rt({\u0275fac:rt}),al=rt({__NG_ELEMENT_ID__:rt}),H0=rt({__NG_ENV_ID__:rt});function sn(y){return"string"==typeof y?y:null==y?"":String(y)}function Lp(y,_){throw new j(-201,!1)}var vn=function(y){return y[y.Default=0]="Default",y[y.Host=1]="Host",y[y.Self=2]="Self",y[y.SkipSelf=4]="SkipSelf",y[y.Optional=8]="Optional",y}(vn||{});let Up;function z0(){return Up}function ao(y){const _=Up;return Up=y,_}function q0(y,_,S){const C=vd(y);return C&&"root"==C.providedIn?void 0===C.value?C.value=C.factory():C.value:S&vn.Optional?null:void 0!==_?_:void Lp()}const cl={},Vp="__NG_DI_FLAG__",wd="ngTempTokenPath",jO=/\n/gm,W0="__source";let Ua;function vs(y){const _=Ua;return Ua=y,_}function HO(y,_=vn.Default){if(void 0===Ua)throw new j(-203,!1);return null===Ua?q0(y,void 0,_):Ua.get(y,_&vn.Optional?null:void 0,_)}function Ft(y,_=vn.Default){return(z0()||HO)(kt(y),_)}function at(y,_=vn.Default){return Ft(y,bd(_))}function bd(y){return typeof y>"u"||"number"==typeof y?y:(y.optional&&8)|(y.host&&1)|(y.self&&2)|(y.skipSelf&&4)}function jp(y){const _=[];for(let S=0;S<y.length;S++){const C=kt(y[S]);if(Array.isArray(C)){if(0===C.length)throw new j(900,!1);let T,D=vn.Default;for(let I=0;I<C.length;I++){const M=C[I],A=zO(M);"number"==typeof A?-1===A?T=M.token:D|=A:T=M}_.push(Ft(T,D))}else _.push(Ft(C))}return _}function ll(y,_){return y[Vp]=_,y.prototype[Vp]=_,y}function zO(y){return y[Vp]}const Sd=ll(pn("Optional"),8),Td=ll(pn("SkipSelf"),4);function ta(y,_){return y.hasOwnProperty(Ki)?y[Ki]:null}function Va(y,_){y.forEach(S=>Array.isArray(S)?Va(S,_):_(S))}function K0(y,_,S){_>=y.length?y.push(S):y.splice(_,0,S)}function Ed(y,_){return _>=y.length-1?y.pop():y.splice(_,1)[0]}function _o(y,_,S){let C=ja(y,_);return C>=0?y[1|C]=S:(C=~C,function J0(y,_,S,C){let T=y.length;if(T==_)y.push(S,C);else if(1===T)y.push(C,y[0]),y[0]=S;else{for(T--,y.push(y[T-1],y[T]);T>_;)y[T]=y[T-2],T--;y[_]=S,y[_+1]=C}}(y,C,_,S)),C}function $p(y,_){const S=ja(y,_);if(S>=0)return y[1|S]}function ja(y,_){return function Q0(y,_,S){let C=0,T=y.length>>S;for(;T!==C;){const D=C+(T-C>>1),I=y[D<<S];if(_===I)return D<<S;I>_?T=D:C=D+1}return~(T<<S)}(y,_,1)}const li={},In=[],na=new Mt(""),X0=new Mt("",-1),Hp=new Mt("");class Id{get(_,S=cl){if(S===cl){const C=new Error("NullInjectorError: No provider for ".concat(xt(_),"!"));throw C.name="NullInjectorError",C}return S}}var Md=function(y){return y[y.OnPush=0]="OnPush",y[y.Default=1]="Default",y}(Md||{}),zo=function(y){return y[y.Emulated=0]="Emulated",y[y.None=2]="None",y[y.ShadowDom=3]="ShadowDom",y}(zo||{}),tr=function(y){return y[y.None=0]="None",y[y.SignalBased=1]="SignalBased",y[y.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",y}(tr||{});function XO(y,_,S){let C=y.length;for(;;){const T=y.indexOf(_,S);if(-1===T)return T;if(0===T||y.charCodeAt(T-1)<=32){const D=_.length;if(T+D===C||y.charCodeAt(T+D)<=32)return T}S=T+1}}function zp(y,_,S){let C=0;for(;C<S.length;){const T=S[C];if("number"==typeof T){if(0!==T)break;C++;const D=S[C++],I=S[C++],M=S[C++];y.setAttribute(_,I,M,D)}else{const D=T,I=S[++C];Z0(D)?y.setProperty(_,D,I):y.setAttribute(_,D,I),C++}}return C}function Y0(y){return 3===y||4===y||6===y}function Z0(y){return 64===y.charCodeAt(0)}function ul(y,_){if(null!==_&&0!==_.length)if(null===y||0===y.length)y=_.slice();else{let S=-1;for(let C=0;C<_.length;C++){const T=_[C];"number"==typeof T?S=T:0===S||eC(y,S,T,null,-1===S||2===S?_[++C]:null)}}return y}function eC(y,_,S,C,T){let D=0,I=y.length;if(-1===_)I=-1;else for(;D<y.length;){const M=y[D++];if("number"==typeof M){if(M===_){I=-1;break}if(M>_){I=D-1;break}}}for(;D<y.length;){const M=y[D];if("number"==typeof M)break;if(M===S){if(null===C)return void(null!==T&&(y[D+1]=T));if(C===y[D+1])return void(y[D+2]=T)}D++,null!==C&&D++,null!==T&&D++}-1!==I&&(y.splice(I,0,_),D=I+1),y.splice(D++,0,S),null!==C&&y.splice(D++,0,C),null!==T&&y.splice(D++,0,T)}const tC="ng-template";function YO(y,_,S,C){let T=0;if(C){for(;T<_.length&&"string"==typeof _[T];T+=2)if("class"===_[T]&&-1!==XO(_[T+1].toLowerCase(),S,0))return!0}else if(qp(y))return!1;if(T=_.indexOf(1,T),T>-1){let D;for(;++T<_.length&&"string"==typeof(D=_[T]);)if(D.toLowerCase()===S)return!0}return!1}function qp(y){return 4===y.type&&y.value!==tC}function ZO(y,_,S){return _===(4!==y.type||S?y.value:tC)}function ek(y,_,S){let C=4;const T=y.attrs,D=null!==T?function rk(y){for(let _=0;_<y.length;_++)if(Y0(y[_]))return _;return y.length}(T):0;let I=!1;for(let M=0;M<_.length;M++){const A=_[M];if("number"!=typeof A){if(!I)if(4&C){if(C=2|1&C,""!==A&&!ZO(y,A,S)||""===A&&1===_.length){if(qo(C))return!1;I=!0}}else if(8&C){if(null===T||!YO(y,T,A,S)){if(qo(C))return!1;I=!0}}else{const R=_[++M],N=tk(A,T,qp(y),S);if(-1===N){if(qo(C))return!1;I=!0;continue}if(""!==R){let O;if(O=N>D?"":T[N+1].toLowerCase(),2&C&&R!==O){if(qo(C))return!1;I=!0}}}}else{if(!I&&!qo(C)&&!qo(A))return!1;if(I&&qo(A))continue;I=!1,C=A|1&C}}return qo(C)||I}function qo(y){return!(1&y)}function tk(y,_,S,C){if(null===_)return-1;let T=0;if(C||!S){let D=!1;for(;T<_.length;){const I=_[T];if(I===y)return T;if(3===I||6===I)D=!0;else{if(1===I||2===I){let M=_[++T];for(;"string"==typeof M;)M=_[++T];continue}if(4===I)break;if(0===I){T+=4;continue}}T+=D?1:2}return-1}return function ok(y,_){let S=y.indexOf(4);if(S>-1)for(S++;S<y.length;){const C=y[S];if("number"==typeof C)return-1;if(C===_)return S;S++}return-1}(_,y)}function nC(y,_,S=!1){for(let C=0;C<_.length;C++)if(ek(y,_[C],S))return!0;return!1}function rC(y,_){return y?":not("+_.trim()+")":_}function sk(y){let _=y[0],S=1,C=2,T="",D=!1;for(;S<y.length;){let I=y[S];if("string"==typeof I)if(2&C){const M=y[++S];T+="["+I+(M.length>0?'="'+M+'"':"")+"]"}else 8&C?T+="."+I:4&C&&(T+=" "+I);else""!==T&&!qo(I)&&(_+=rC(D,T),T=""),C=I,D=D||!qo(C);S++}return""!==T&&(_+=rC(D,T)),_}function Co(y){return Fe(()=>{var _;const S=iC(y),C=se(se({},S),{},{decls:y.decls,vars:y.vars,template:y.template,consts:y.consts||null,ngContentSelectors:y.ngContentSelectors,onPush:y.changeDetection===Md.OnPush,directiveDefs:null,pipeDefs:null,dependencies:S.standalone&&y.dependencies||null,getStandaloneInjector:null,signals:null!==(_=y.signals)&&void 0!==_&&_,data:y.data||{},encapsulation:y.encapsulation||zo.Emulated,styles:y.styles||In,_:null,schemas:y.schemas||null,tView:null,id:""});sC(C);const T=y.dependencies;return C.directiveDefs=Ad(T,!1),C.pipeDefs=Ad(T,!0),C.id=function fk(y){let _=0;const S=[y.selectors,y.ngContentSelectors,y.hostVars,y.hostAttrs,y.consts,y.vars,y.decls,y.encapsulation,y.standalone,y.signals,y.exportAs,JSON.stringify(y.inputs),JSON.stringify(y.outputs),Object.getOwnPropertyNames(y.type.prototype),!!y.contentQueries,!!y.viewQuery].join("|");for(const T of S)_=Math.imul(31,_)+T.charCodeAt(0)|0;return _+=2147483648,"c"+_}(C),C})}function lk(y){return gn(y)||Dr(y)}function uk(y){return null!==y}function Wo(y){return Fe(()=>({type:y.type,bootstrap:y.bootstrap||In,declarations:y.declarations||In,imports:y.imports||In,exports:y.exports||In,transitiveCompileScopes:null,schemas:y.schemas||null,id:y.id||null}))}function oC(y,_){if(null==y)return li;const S={};for(const T in y)if(y.hasOwnProperty(T)){const D=y[T];let I,M,A=tr.None;var C;Array.isArray(D)?(A=D[0],I=D[1],M=null!==(C=D[2])&&void 0!==C?C:I):(I=D,M=D),_?(S[I]=A!==tr.None?[T,A]:T,_[I]=M):S[I]=T}return S}function rn(y){return Fe(()=>{const _=iC(y);return sC(_),_})}function gn(y){return y[sl]||null}function Dr(y){return y[xp]||null}function Or(y){return y[Fp]||null}function Fr(y,_){const S=y[$0]||null;if(!S&&!0===_)throw new Error("Type ".concat(xt(y)," does not have '\u0275mod' property."));return S}function iC(y){const _={};return{type:y.type,providersResolver:null,factory:null,hostBindings:y.hostBindings||null,hostVars:y.hostVars||0,hostAttrs:y.hostAttrs||null,contentQueries:y.contentQueries||null,declaredInputs:_,inputTransforms:null,inputConfig:y.inputs||li,exportAs:y.exportAs||null,standalone:!0===y.standalone,signals:!0===y.signals,selectors:y.selectors||In,viewQuery:y.viewQuery||null,features:y.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:oC(y.inputs,_),outputs:oC(y.outputs),debugInfo:null}}function sC(y){var _;null===(_=y.features)||void 0===_||_.forEach(S=>S(y))}function Ad(y,_){if(!y)return null;const S=_?Or:lk;return()=>("function"==typeof y?y():y).map(C=>S(C)).filter(uk)}function hk(...y){return{\u0275providers:Wp(0,y),\u0275fromNgModule:!0}}function Wp(y,..._){const S=[],C=new Set;let T;const D=I=>{S.push(I)};return Va(_,I=>{const M=I;Rd(M,D,[],C)&&(T||(T=[]),T.push(M))}),void 0!==T&&aC(T,D),S}function aC(y,_){for(let S=0;S<y.length;S++){const{ngModule:C,providers:T}=y[S];Gp(T,D=>{_(D,C)})}}function Rd(y,_,S,C){if(!(y=kt(y)))return!1;let T=null,D=_d(y);const I=!D&&gn(y);if(D||I){if(I&&!I.standalone)return!1;T=y}else{const A=y.ngModule;if(D=_d(A),!D)return!1;T=A}const M=C.has(T);if(I){if(M)return!1;if(C.add(T),I.dependencies){const A="function"==typeof I.dependencies?I.dependencies():I.dependencies;for(const R of A)Rd(R,_,S,C)}}else{if(!D)return!1;{if(null!=D.imports&&!M){let R;C.add(T);try{Va(D.imports,N=>{Rd(N,_,S,C)&&(R||(R=[]),R.push(N))})}finally{}void 0!==R&&aC(R,_)}if(!M){const R=ta(T)||(()=>new T);_({provide:T,useFactory:R,deps:In},T),_({provide:Hp,useValue:T,multi:!0},T),_({provide:na,useValue:()=>Ft(T),multi:!0},T)}const A=D.providers;if(null!=A&&!M){const R=y;Gp(A,N=>{_(N,R)})}}}return T!==y&&void 0!==y.providers}function Gp(y,_){for(let S of y)kp(S)&&(S=S.\u0275providers),Array.isArray(S)?Gp(S,_):_(S)}const pk=rt({provide:String,useValue:rt});function Kp(y){return null!==y&&"object"==typeof y&&pk in y}function ra(y){return"function"==typeof y}const Jp=new Mt(""),Pd={},mk={};let Qp;function Nd(){return void 0===Qp&&(Qp=new Id),Qp}class Qr{}class Ba extends Qr{get destroyed(){return this._destroyed}constructor(_,S,C,T){super(),this.parent=S,this.source=C,this.scopes=T,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Yp(_,I=>this.processProvider(I)),this.records.set(X0,$a(void 0,this)),T.has("environment")&&this.records.set(Qr,$a(void 0,this));const D=this.records.get(Jp);null!=D&&"string"==typeof D.value&&this.scopes.add(D.value),this.injectorDefTypes=new Set(this.get(Hp,In,vn.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;const _=tt(null);try{for(const C of this._ngOnDestroyHooks)C.ngOnDestroy();const S=this._onDestroyHooks;this._onDestroyHooks=[];for(const C of S)C()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),tt(_)}}onDestroy(_){return this.assertNotDestroyed(),this._onDestroyHooks.push(_),()=>this.removeOnDestroy(_)}runInContext(_){this.assertNotDestroyed();const S=vs(this),C=ao(void 0);try{return _()}finally{vs(S),ao(C)}}get(_,S=cl,C=vn.Default){if(this.assertNotDestroyed(),_.hasOwnProperty(H0))return _[H0](this);C=bd(C);const D=vs(this),I=ao(void 0);try{if(!(C&vn.SkipSelf)){let A=this.records.get(_);if(void 0===A){const R=function wk(y){return"function"==typeof y||"object"==typeof y&&y instanceof Mt}(_)&&vd(_);A=R&&this.injectableDefInScope(R)?$a(Xp(_),Pd):null,this.records.set(_,A)}if(null!=A)return this.hydrate(_,A)}return(C&vn.Self?Nd():this.parent).get(_,S=C&vn.Optional&&S===cl?null:S)}catch(M){if("NullInjectorError"===M.name){if((M[wd]=M[wd]||[]).unshift(xt(_)),D)throw M;return function qO(y,_,S,C){const T=y[wd];throw _[W0]&&T.unshift(_[W0]),y.message=function WO(y,_,S,C=null){y=y&&"\n"===y.charAt(0)&&"\u0275"==y.charAt(1)?y.slice(2):y;let T=xt(_);if(Array.isArray(_))T=_.map(xt).join(" -> ");else if("object"==typeof _){let D=[];for(let I in _)if(_.hasOwnProperty(I)){let M=_[I];D.push(I+":"+("string"==typeof M?JSON.stringify(M):xt(M)))}T="{".concat(D.join(", "),"}")}return"".concat(S).concat(C?"("+C+")":"","[").concat(T,"]: ").concat(y.replace(jO,"\n  "))}("\n"+y.message,T,S,C),y.ngTokenPath=T,y[wd]=null,y}(M,_,"R3InjectorError",this.source)}throw M}finally{ao(I),vs(D)}}resolveInjectorInitializers(){const _=tt(null),S=vs(this),C=ao(void 0);try{const D=this.get(na,In,vn.Self);for(const I of D)I()}finally{vs(S),ao(C),tt(_)}}toString(){const _=[],S=this.records;for(const C of S.keys())_.push(xt(C));return"R3Injector[".concat(_.join(", "),"]")}assertNotDestroyed(){if(this._destroyed)throw new j(205,!1)}processProvider(_){let S=ra(_=kt(_))?_:kt(_&&_.provide);const C=function vk(y){return Kp(y)?$a(void 0,y.useValue):$a(uC(y),Pd)}(_);if(!ra(_)&&!0===_.multi){let T=this.records.get(S);T||(T=$a(void 0,Pd,!0),T.factory=()=>jp(T.multi),this.records.set(S,T)),S=_,T.multi.push(_)}this.records.set(S,C)}hydrate(_,S){const C=tt(null);try{return S.value===Pd&&(S.value=mk,S.value=S.factory()),"object"==typeof S.value&&S.value&&function Ck(y){return null!==y&&"object"==typeof y&&"function"==typeof y.ngOnDestroy}(S.value)&&this._ngOnDestroyHooks.add(S.value),S.value}finally{tt(C)}}injectableDefInScope(_){if(!_.providedIn)return!1;const S=kt(_.providedIn);return"string"==typeof S?"any"===S||this.scopes.has(S):this.injectorDefTypes.has(S)}removeOnDestroy(_){const S=this._onDestroyHooks.indexOf(_);-1!==S&&this._onDestroyHooks.splice(S,1)}}function Xp(y){const _=vd(y),S=null!==_?_.factory:ta(y);if(null!==S)return S;if(y instanceof Mt)throw new j(204,!1);if(y instanceof Function)return function yk(y){if(y.length>0)throw new j(204,!1);const S=function OO(y){return y&&(y[Cd]||y[j0])||null}(y);return null!==S?()=>S.factory(y):()=>new y}(y);throw new j(204,!1)}function uC(y,_,S){let C;if(ra(y)){const T=kt(y);return ta(T)||Xp(T)}if(Kp(y))C=()=>kt(y.useValue);else if(function lC(y){return!(!y||!y.useFactory)}(y))C=()=>y.useFactory(...jp(y.deps||[]));else if(function cC(y){return!(!y||!y.useExisting)}(y))C=()=>Ft(kt(y.useExisting));else{const T=kt(y&&(y.useClass||y.provide));if(!function _k(y){return!!y.deps}(y))return ta(T)||Xp(T);C=()=>new T(...jp(y.deps))}return C}function $a(y,_,S=!1){return{factory:y,value:_,multi:S?[]:void 0}}function Yp(y,_){for(const S of y)Array.isArray(S)?Yp(S,_):S&&kp(S)?Yp(S.\u0275providers,_):_(S)}function ui(y,_){y instanceof Ba&&y.assertNotDestroyed();const C=vs(y),T=ao(void 0);try{return _()}finally{vs(C),ao(T)}}function dC(){return void 0!==z0()||null!=function $O(){return Ua}()}const or=0,wt=1,Wt=2,pr=3,Go=4,Lr=5,wo=6,za=7,Jn=8,_r=9,Ko=10,Zt=11,hl=12,hC=13,qa=14,cr=15,pl=16,Wa=17,di=18,gl=19,pC=20,Cs=21,ml=22,oa=23,an=25,eg=1,fi=7,Ga=9,gr=10;var tg=function(y){return y[y.None=0]="None",y[y.HasTransplantedViews=2]="HasTransplantedViews",y}(tg||{});function Ur(y){return Array.isArray(y)&&"object"==typeof y[eg]}function Vr(y){return Array.isArray(y)&&!0===y[eg]}function ng(y){return!!(4&y.flags)}function ia(y){return y.componentOffset>-1}function Fd(y){return!(1&~y.flags)}function Jo(y){return!!y.template}function rg(y){return!!(512&y[Wt])}class kk{constructor(_,S,C){this.previousValue=_,this.currentValue=S,this.firstChange=C}isFirstChange(){return this.firstChange}}function vC(y,_,S,C){null!==_?_.applyValueToInputSignal(_,C):y[S]=C}function uo(){return _C}function _C(y){return y.type.prototype.ngOnChanges&&(y.setInput=Fk),xk}function xk(){const y=wC(this),_=null==y?void 0:y.current;if(_){const S=y.previous;if(S===li)y.previous=_;else for(let C in _)S[C]=_[C];y.current=null,this.ngOnChanges(_)}}function Fk(y,_,S,C,T){const D=this.declaredInputs[C],I=wC(y)||function Lk(y,_){return y[CC]=_}(y,{previous:li,current:null}),M=I.current||(I.current={}),A=I.previous,R=A[D];M[D]=new kk(R&&R.currentValue,S,A===li),vC(y,_,T,S)}uo.ngInherit=!0;const CC="__ngSimpleChanges__";function wC(y){return y[CC]||null}const hi=function(y,_,S){};let TC=!1;function jn(y){for(;Array.isArray(y);)y=y[or];return y}function vl(y,_){return jn(_[y])}function Xr(y,_){return jn(_[y.index])}function _l(y,_){return y.data[_]}function bo(y,_){const S=_[y];return Ur(S)?S:S[or]}function cg(y){return!(128&~y[Wt])}function pi(y,_){return null==_?null:y[_]}function EC(y){y[Wa]=0}function Hk(y){1024&y[Wt]||(y[Wt]|=1024,cg(y)&&Cl(y))}function lg(y){var _;return!!(9216&y[Wt]||null!==(_=y[oa])&&void 0!==_&&_.dirty)}function ug(y){var _;if(null===(_=y[Ko].changeDetectionScheduler)||void 0===_||_.notify(1),lg(y))Cl(y);else if(64&y[Wt])if(function Vk(){return TC}())y[Wt]|=1024,Cl(y);else{var S;null===(S=y[Ko].changeDetectionScheduler)||void 0===S||S.notify()}}function Cl(y){var _;null===(_=y[Ko].changeDetectionScheduler)||void 0===_||_.notify();let S=sa(y);for(;null!==S&&!(8192&S[Wt])&&(S[Wt]|=8192,cg(S));)S=sa(S)}function Ld(y,_){if(!(256&~y[Wt]))throw new j(911,!1);null===y[Cs]&&(y[Cs]=[]),y[Cs].push(_)}function sa(y){const _=y[pr];return Vr(_)?_[pr]:_}const en={lFrame:xC(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function MC(){return en.bindingsEnabled}function ze(){return en.lFrame.lView}function _n(){return en.lFrame.tView}function Ji(y){return en.lFrame.contextLView=y,y[Jn]}function Qi(y){return en.lFrame.contextLView=null,y}function Fn(){let y=AC();for(;null!==y&&64===y.type;)y=y.parent;return y}function AC(){return en.lFrame.currentTNode}function gi(y,_){const S=en.lFrame;S.currentTNode=y,S.isParent=_}function fg(){return en.lFrame.isParent}function hg(){en.lFrame.isParent=!1}function Qo(){return en.lFrame.bindingIndex++}function ex(y,_){const S=en.lFrame;S.bindingIndex=S.bindingRootIndex=y,pg(_)}function pg(y){en.lFrame.currentDirectiveIndex=y}function Ud(y){en.lFrame.currentQueryIndex=y}function nx(y){const _=y[wt];return 2===_.type?_.declTNode:1===_.type?y[Lr]:null}function OC(y,_,S){if(S&vn.SkipSelf){let T=_,D=y;for(;!(T=T.parent,null!==T||S&vn.Host||(T=nx(D),null===T||(D=D[qa],10&T.type))););if(null===T)return!1;_=T,y=D}const C=en.lFrame=kC();return C.currentTNode=_,C.lView=y,!0}function yg(y){const _=kC(),S=y[wt];en.lFrame=_,_.currentTNode=S.firstChild,_.lView=y,_.tView=S,_.contextLView=y,_.bindingIndex=S.bindingStartIndex,_.inI18n=!1}function kC(){const y=en.lFrame,_=null===y?null:y.child;return null===_?xC(y):_}function xC(y){const _={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:y,child:null,inI18n:!1};return null!==y&&(y.child=_),_}function FC(){const y=en.lFrame;return en.lFrame=y.parent,y.currentTNode=null,y.lView=null,y}const LC=FC;function vg(){const y=FC();y.isParent=!0,y.tView=null,y.selectedIndex=-1,y.contextLView=null,y.elementDepthCount=0,y.currentDirectiveIndex=-1,y.currentNamespace=null,y.bindingRootIndex=-1,y.bindingIndex=-1,y.currentQueryIndex=0}function jr(){return en.lFrame.selectedIndex}function aa(y){en.lFrame.selectedIndex=y}function Qn(){const y=en.lFrame;return _l(y.tView,y.selectedIndex)}let VC=!0;function bl(){return VC}function mi(y){VC=y}function Vd(y,_){for(let R=_.directiveStart,N=_.directiveEnd;R<N;R++){const F=y.data[R].type.prototype,{ngAfterContentInit:$,ngAfterContentChecked:Q,ngAfterViewInit:ae,ngAfterViewChecked:Ce,ngOnDestroy:Ee}=F;var S,C,T,D,I,M,A;$&&(null!==(S=y.contentHooks)&&void 0!==S?S:y.contentHooks=[]).push(-R,$),Q&&((null!==(C=y.contentHooks)&&void 0!==C?C:y.contentHooks=[]).push(R,Q),(null!==(T=y.contentCheckHooks)&&void 0!==T?T:y.contentCheckHooks=[]).push(R,Q)),ae&&(null!==(D=y.viewHooks)&&void 0!==D?D:y.viewHooks=[]).push(-R,ae),Ce&&((null!==(I=y.viewHooks)&&void 0!==I?I:y.viewHooks=[]).push(R,Ce),(null!==(M=y.viewCheckHooks)&&void 0!==M?M:y.viewCheckHooks=[]).push(R,Ce)),null!=Ee&&(null!==(A=y.destroyHooks)&&void 0!==A?A:y.destroyHooks=[]).push(R,Ee)}}function jd(y,_,S){jC(y,_,3,S)}function Bd(y,_,S,C){(3&y[Wt])===S&&jC(y,_,S,C)}function _g(y,_){let S=y[Wt];(3&S)===_&&(S&=16383,S+=1,y[Wt]=S)}function jC(y,_,S,C){const D=null!=C?C:-1,I=_.length-1;let M=0;for(let A=void 0!==C?65535&y[Wa]:0;A<I;A++)if("number"==typeof _[A+1]){if(M=_[A],null!=C&&M>=C)break}else _[A]<0&&(y[Wa]+=65536),(M<D||-1==D)&&(lx(y,S,_,A),y[Wa]=(4294901760&y[Wa])+A+2),A++}function BC(y,_){hi(4,y,_);const S=tt(null);try{_.call(y)}finally{tt(S),hi(5,y,_)}}function lx(y,_,S,C){const T=S[C]<0,D=S[C+1],M=y[T?-S[C]:S[C]];T?y[Wt]>>14<y[Wa]>>16&&(3&y[Wt])===_&&(y[Wt]+=16384,BC(M,D)):BC(M,D)}const Qa=-1;class Sl{constructor(_,S,C){this.factory=_,this.resolving=!1,this.canSeeViewProviders=S,this.injectImpl=C}}function wg(y){return y!==Qa}function Tl(y){return 32767&y}function El(y,_){let S=function px(y){return y>>16}(y),C=_;for(;S>0;)C=C[qa],S--;return C}let bg=!0;function $d(y){const _=bg;return bg=y,_}const $C=255,HC=5;let gx=0;const yi={};function Hd(y,_){const S=zC(y,_);if(-1!==S)return S;const C=_[wt];C.firstCreatePass&&(y.injectorIndex=_.length,Sg(C.data,y),Sg(_,null),Sg(C.blueprint,null));const T=zd(y,_),D=y.injectorIndex;if(wg(T)){const I=Tl(T),M=El(T,_),A=M[wt].data;for(let R=0;R<8;R++)_[D+R]=M[I+R]|A[I+R]}return _[D+8]=T,D}function Sg(y,_){y.push(0,0,0,0,0,0,0,0,_)}function zC(y,_){return-1===y.injectorIndex||y.parent&&y.parent.injectorIndex===y.injectorIndex||null===_[y.injectorIndex+8]?-1:y.injectorIndex}function zd(y,_){if(y.parent&&-1!==y.parent.injectorIndex)return y.parent.injectorIndex;let S=0,C=null,T=_;for(;null!==T;){if(C=XC(T),null===C)return Qa;if(S++,T=T[qa],-1!==C.injectorIndex)return C.injectorIndex|S<<16}return Qa}function Tg(y,_,S){!function mx(y,_,S){let C;"string"==typeof S?C=S.charCodeAt(0)||0:S.hasOwnProperty(al)&&(C=S[al]),null==C&&(C=S[al]=gx++);const T=C&$C;_.data[y+(T>>HC)]|=1<<T}(y,_,S)}function qC(y,_,S){if(S&vn.Optional||void 0!==y)return y;Lp()}function WC(y,_,S,C){if(S&vn.Optional&&void 0===C&&(C=null),!(S&(vn.Self|vn.Host))){const T=y[_r],D=ao(void 0);try{return T?T.get(_,C,S&vn.Optional):q0(_,C,S&vn.Optional)}finally{ao(D)}}return qC(C,0,S)}function GC(y,_,S,C=vn.Default,T){if(null!==y){if(2048&_[Wt]&&!(C&vn.Self)){const I=function wx(y,_,S,C,T){let D=y,I=_;for(;null!==D&&null!==I&&2048&I[Wt]&&!(512&I[Wt]);){const M=KC(D,I,S,C|vn.Self,yi);if(M!==yi)return M;let A=D.parent;if(!A){const R=I[pC];if(R){const N=R.get(S,yi,C);if(N!==yi)return N}A=XC(I),I=I[qa]}D=A}return T}(y,_,S,C,yi);if(I!==yi)return I}const D=KC(y,_,S,C,yi);if(D!==yi)return D}return WC(_,S,C,T)}function KC(y,_,S,C,T){const D=function _x(y){if("string"==typeof y)return y.charCodeAt(0)||0;const _=y.hasOwnProperty(al)?y[al]:void 0;return"number"==typeof _?_>=0?_&$C:Cx:_}(S);if("function"==typeof D){if(!OC(_,y,C))return C&vn.Host?qC(T,0,C):WC(_,S,C,T);try{let I;if(I=D(C),null!=I||C&vn.Optional)return I;Lp()}finally{LC()}}else if("number"==typeof D){let I=null,M=zC(y,_),A=Qa,R=C&vn.Host?_[cr][Lr]:null;for((-1===M||C&vn.SkipSelf)&&(A=-1===M?zd(y,_):_[M+8],A!==Qa&&QC(C,!1)?(I=_[wt],M=Tl(A),_=El(A,_)):M=-1);-1!==M;){const N=_[wt];if(JC(D,M,N.data)){const O=vx(M,_,S,I,C,R);if(O!==yi)return O}A=_[M+8],A!==Qa&&QC(C,_[wt].data[M+8]===R)&&JC(D,M,_)?(I=N,M=Tl(A),_=El(A,_)):M=-1}}return T}function vx(y,_,S,C,T,D){const I=_[wt],M=I.data[y+8],N=function qd(y,_,S,C,T){const D=y.providerIndexes,I=_.data,M=1048575&D,A=y.directiveStart,N=D>>20,F=T?M+N:y.directiveEnd;for(let $=C?M:M+N;$<F;$++){const Q=I[$];if($<A&&S===Q||$>=A&&Q.type===S)return $}if(T){const $=I[A];if($&&Jo($)&&$.type===S)return A}return null}(M,I,S,null==C?ia(M)&&bg:C!=I&&!!(3&M.type),T&vn.Host&&D===M);return null!==N?ca(_,I,N,M):yi}function ca(y,_,S,C){let T=y[S];const D=_.data;if(function ux(y){return y instanceof Sl}(T)){const I=T;I.resolving&&function LO(y,_){throw _&&". Dependency path: ".concat(_.join(" > ")," > ").concat(y),new j(-200,y)}(function Rn(y){return"function"==typeof y?y.name||y.toString():"object"==typeof y&&null!=y&&"function"==typeof y.type?y.type.name||y.type.toString():sn(y)}(D[S]));const M=$d(I.canSeeViewProviders);I.resolving=!0;const R=I.injectImpl?ao(I.injectImpl):null;OC(y,C,vn.Default);try{T=y[S]=I.factory(void 0,D,y,C),_.firstCreatePass&&S>=C.directiveStart&&function cx(y,_,S){const{ngOnChanges:C,ngOnInit:T,ngDoCheck:D}=_.type.prototype;if(C){var I,M;const O=_C(_);(null!==(I=S.preOrderHooks)&&void 0!==I?I:S.preOrderHooks=[]).push(y,O),(null!==(M=S.preOrderCheckHooks)&&void 0!==M?M:S.preOrderCheckHooks=[]).push(y,O)}var A,R,N;T&&(null!==(A=S.preOrderHooks)&&void 0!==A?A:S.preOrderHooks=[]).push(0-y,T),D&&((null!==(R=S.preOrderHooks)&&void 0!==R?R:S.preOrderHooks=[]).push(y,D),(null!==(N=S.preOrderCheckHooks)&&void 0!==N?N:S.preOrderCheckHooks=[]).push(y,D))}(S,D[S],_)}finally{null!==R&&ao(R),$d(M),I.resolving=!1,LC()}}return T}function JC(y,_,S){return!!(S[_+(y>>HC)]&1<<y)}function QC(y,_){return!(y&vn.Self||y&vn.Host&&_)}class Mr{constructor(_,S){this._tNode=_,this._lView=S}get(_,S,C){return GC(this._tNode,this._lView,_,bd(C),S)}}function Cx(){return new Mr(Fn(),ze())}function Nr(y){return Fe(()=>{const _=y.prototype.constructor,S=_[Ki]||Eg(_),C=Object.prototype;let T=Object.getPrototypeOf(y.prototype).constructor;for(;T&&T!==C;){const D=T[Ki]||Eg(T);if(D&&D!==S)return D;T=Object.getPrototypeOf(T)}return D=>new D})}function Eg(y){return er(y)?()=>{const _=Eg(kt(y));return _&&_()}:ta(y)}function XC(y){const _=y[wt],S=_.type;return 2===S?_.declTNode:1===S?y[Lr]:null}function nw(y,_=null,S=null,C){const T=rw(y,_,S,C);return T.resolveInjectorInitializers(),T}function rw(y,_=null,S=null,C,T=new Set){const D=[S||In,hk(y)];return C=C||("object"==typeof y?void 0:xt(y)),new Ba(D,_||Nd(),C||null,T)}let Zr=(()=>{var y;class _{static create(C,T){if(Array.isArray(C))return nw({name:""},T,C,"");{var D;const I=null!==(D=C.name)&&void 0!==D?D:"";return nw({name:I},C.parent,C.providers,I)}}}return(y=_).THROW_IF_NOT_FOUND=cl,y.NULL=new Id,y.\u0275prov=At({token:y,providedIn:"any",factory:()=>Ft(X0)}),y.__NG_ELEMENT_ID__=-1,_})();function Ig(y){return y.ngOriginalError}class vi{constructor(){this._console=console}handleError(_){const S=this._findOriginalError(_);this._console.error("ERROR",_),S&&this._console.error("ORIGINAL ERROR",S)}_findOriginalError(_){let S=_&&Ig(_);for(;S&&Ig(S);)S=Ig(S);return S||null}}const iw=new Mt("",{providedIn:"root",factory:()=>at(vi).handleError.bind(void 0)});let Za=(()=>{var y;class _{}return(y=_).__NG_ELEMENT_ID__=Rx,y.__NG_ENV_ID__=S=>S,_})();class Ax extends Za{constructor(_){super(),this._lView=_}onDestroy(_){return Ld(this._lView,_),()=>function dg(y,_){if(null===y[Cs])return;const S=y[Cs].indexOf(_);-1!==S&&y[Cs].splice(S,1)}(this._lView,_)}}function Rx(){return new Ax(ze())}function Px(){return ec(Fn(),ze())}function ec(y,_){return new So(Xr(y,_))}let So=(()=>{class _{constructor(C){this.nativeElement=C}}return _.__NG_ELEMENT_ID__=Px,_})();function Mg(y){return _=>{setTimeout(y,void 0,_)}}const Hn=class Nx extends fr{constructor(_=!1){var S;super(),this.destroyRef=void 0,this.__isAsync=_,dC()&&(this.destroyRef=null!==(S=at(Za,{optional:!0}))&&void 0!==S?S:void 0)}emit(_){const S=tt(null);try{super.next(_)}finally{tt(S)}}subscribe(_,S,C){let T=_,D=S||(()=>null),I=C;if(_&&"object"==typeof _){var M,A,R;const O=_;T=null===(M=O.next)||void 0===M?void 0:M.bind(O),D=null===(A=O.error)||void 0===A?void 0:A.bind(O),I=null===(R=O.complete)||void 0===R?void 0:R.bind(O)}this.__isAsync&&(D=Mg(D),T&&(T=Mg(T)),I&&(I=Mg(I)));const N=super.subscribe({next:T,error:D,complete:I});return _ instanceof Ze&&_.add(N),N}};function Gd(y){return!(128&~y.flags)}const Rg=new Map;let xx=0;const Ng="__ngContext__";function Br(y,_){Ur(_)?(y[Ng]=_[gl],function Lx(y){Rg.set(y[gl],y)}(_)):y[Ng]=_}function yw(y){return _w(y[hl])}function vw(y){return _w(y[Go])}function _w(y){for(;null!==y&&!Vr(y);)y=y[Go];return y}let Og;function ws(){if(void 0!==Og)return Og;if(typeof document<"u")return document;throw new j(210,!1)}const Qd=new Mt("",{providedIn:"root",factory:()=>t1}),t1="ng",Iw=new Mt(""),bs=new Mt("",{providedIn:"platform",factory:()=>"unknown"}),Mw=new Mt(""),Aw=new Mt("",{providedIn:"root",factory:()=>{var y;return(null===(y=ws().body)||void 0===y||null===(y=y.querySelector("[ngCspNonce]"))||void 0===y?void 0:y.getAttribute("ngCspNonce"))||null}});let Rw=()=>null;function Ug(y,_,S=!1){return Rw(y,_,S)}const xw=new Mt("",{providedIn:"root",factory:()=>!1});let sf,af;function oc(y){var _;return(null===(_=function $g(){if(void 0===sf&&(sf=null,Pe.trustedTypes))try{sf=Pe.trustedTypes.createPolicy("angular",{createHTML:y=>y,createScript:y=>y,createScriptURL:y=>y})}catch(y){}return sf}())||void 0===_?void 0:_.createHTML(y))||y}function Lw(y){var _;return(null===(_=function Hg(){if(void 0===af&&(af=null,Pe.trustedTypes))try{af=Pe.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:y=>y,createScript:y=>y,createScriptURL:y=>y})}catch(y){}return af}())||void 0===_?void 0:_.createHTML(y))||y}class jw{constructor(_){this.changingThisBreaksApplicationSecurity=_}toString(){return"SafeValue must use [property]=binding: ".concat(this.changingThisBreaksApplicationSecurity)+" (see ".concat(H,")")}}function Ss(y){return y instanceof jw?y.changingThisBreaksApplicationSecurity:y}class w1{constructor(_){this.inertDocumentHelper=_}getInertBodyElement(_){_="<body><remove></remove>"+_;try{const S=(new window.DOMParser).parseFromString(oc(_),"text/html").body;return null===S?this.inertDocumentHelper.getInertBodyElement(_):(S.removeChild(S.firstChild),S)}catch(S){return null}}}class b1{constructor(_){this.defaultDoc=_,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(_){const S=this.inertDocument.createElement("template");return S.innerHTML=oc(_),S}}const T1=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function zg(y){return(y=String(y)).match(T1)?y:"unsafe:"+y}function Zi(y){const _={};for(const S of y.split(","))_[S]=!0;return _}function xl(...y){const _={};for(const S of y)for(const C in S)S.hasOwnProperty(C)&&(_[C]=!0);return _}const $w=Zi("area,br,col,hr,img,wbr"),Hw=Zi("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),zw=Zi("rp,rt"),qg=xl($w,xl(Hw,Zi("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),xl(zw,Zi("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),xl(zw,Hw)),Wg=Zi("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),qw=xl(Wg,Zi("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Zi("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),E1=Zi("script,style,template");class D1{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(_){let S=_.firstChild,C=!0,T=[];for(;S;)if(S.nodeType===Node.ELEMENT_NODE?C=this.startElement(S):S.nodeType===Node.TEXT_NODE?this.chars(S.nodeValue):this.sanitizedSomething=!0,C&&S.firstChild)T.push(S),S=A1(S);else for(;S;){S.nodeType===Node.ELEMENT_NODE&&this.endElement(S);let D=M1(S);if(D){S=D;break}S=T.pop()}return this.buf.join("")}startElement(_){const S=Ww(_).toLowerCase();if(!qg.hasOwnProperty(S))return this.sanitizedSomething=!0,!E1.hasOwnProperty(S);this.buf.push("<"),this.buf.push(S);const C=_.attributes;for(let T=0;T<C.length;T++){const D=C.item(T),I=D.name,M=I.toLowerCase();if(!qw.hasOwnProperty(M)){this.sanitizedSomething=!0;continue}let A=D.value;Wg[M]&&(A=zg(A)),this.buf.push(" ",I,'="',Kw(A),'"')}return this.buf.push(">"),!0}endElement(_){const S=Ww(_).toLowerCase();qg.hasOwnProperty(S)&&!$w.hasOwnProperty(S)&&(this.buf.push("</"),this.buf.push(S),this.buf.push(">"))}chars(_){this.buf.push(Kw(_))}}function M1(y){const _=y.nextSibling;if(_&&y!==_.previousSibling)throw Gw(_);return _}function A1(y){const _=y.firstChild;if(_&&function I1(y,_){return(y.compareDocumentPosition(_)&Node.DOCUMENT_POSITION_CONTAINED_BY)!==Node.DOCUMENT_POSITION_CONTAINED_BY}(y,_))throw Gw(_);return _}function Ww(y){const _=y.nodeName;return"string"==typeof _?_:"FORM"}function Gw(y){return new Error("Failed to sanitize html because the element is clobbered: ".concat(y.outerHTML))}const R1=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,P1=/([^\#-~ |!])/g;function Kw(y){return y.replace(/&/g,"&amp;").replace(R1,function(_){return"&#"+(1024*(_.charCodeAt(0)-55296)+(_.charCodeAt(1)-56320)+65536)+";"}).replace(P1,function(_){return"&#"+_.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let cf;function Gg(y){return"content"in y&&function O1(y){return y.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===y.nodeName}(y)?y.content:null}var ic=function(y){return y[y.NONE=0]="NONE",y[y.HTML=1]="HTML",y[y.STYLE=2]="STYLE",y[y.SCRIPT=3]="SCRIPT",y[y.URL=4]="URL",y[y.RESOURCE_URL=5]="RESOURCE_URL",y}(ic||{});function Jw(y){const _=function Fl(){const y=ze();return y&&y[Ko].sanitizer}();return _?Lw(_.sanitize(ic.HTML,y)||""):function kl(y,_){const S=function C1(y){return y instanceof jw&&y.getTypeName()||null}(y);if(null!=S&&S!==_){if("ResourceURL"===S&&"URL"===_)return!0;throw new Error("Required a safe ".concat(_,", got a ").concat(S," (see ").concat(H,")"))}return S===_}(y,"HTML")?Lw(Ss(y)):function N1(y,_){let S=null;try{cf=cf||function Bw(y){const _=new b1(y);return function S1(){try{return!!(new window.DOMParser).parseFromString(oc(""),"text/html")}catch(y){return!1}}()?new w1(_):_}(y);let C=_?String(_):"";S=cf.getInertBodyElement(C);let T=5,D=C;do{if(0===T)throw new Error("Failed to sanitize html because the input is unstable");T--,C=D,D=S.innerHTML,S=cf.getInertBodyElement(C)}while(C!==D);return oc((new D1).sanitizeChildren(Gg(S)||S))}finally{if(S){const C=Gg(S)||S;for(;C.firstChild;)C.removeChild(C.firstChild)}}}(ws(),sn(y))}const V1=/^>|^->|<!--|-->|--!>|<!-$/g,j1=/(<|>)/g,B1="\u200b$1\u200b";function To(y){return y instanceof Function?y():y}var Ts=function(y){return y[y.Important=1]="Important",y[y.DashCase=2]="DashCase",y}(Ts||{});let Xg;function Yg(y,_){return Xg(y,_)}function ac(y,_,S,C,T){if(null!=C){let D,I=!1;Vr(C)?D=C:Ur(C)&&(I=!0,C=C[or]);const M=jn(C);0===y&&null!==S?null==T?ub(_,S,M):la(_,S,M,T||null,!0):1===y&&null!==S?la(_,S,M,T||null,!0):2===y?function Vl(y,_,S){const C=hf(y,_);C&&function sF(y,_,S,C){y.removeChild(_,S,C)}(y,C,_,S)}(_,M,I):3===y&&_.destroyNode(M),null!=D&&function lF(y,_,S,C,T){const D=S[fi];D!==jn(S)&&ac(_,y,C,D,T);for(let M=gr;M<S.length;M++){const A=S[M];gf(A[wt],A,y,_,C,D)}}(_,y,D,S,T)}}function em(y,_){return y.createComment(function Zw(y){return y.replace(V1,_=>_.replace(j1,B1))}(_))}function df(y,_,S){return y.createElement(_,S)}function ab(y,_){var S;null===(S=_[Ko].changeDetectionScheduler)||void 0===S||S.notify(1),gf(y,_,_[Zt],2,null,null)}function cb(y,_){const S=y[Ga],C=S.indexOf(_);S.splice(C,1)}function Ll(y,_){if(y.length<=gr)return;const S=gr+_,C=y[S];if(C){const T=C[pl];null!==T&&T!==y&&cb(T,C),_>0&&(y[S-1][Go]=C[Go]);const D=Ed(y,gr+_);!function Z1(y,_){ab(y,_),_[or]=null,_[Lr]=null}(C[wt],C);const I=D[di];null!==I&&I.detachView(D[wt]),C[pr]=null,C[Go]=null,C[Wt]&=-129}return C}function ff(y,_){if(!(256&_[Wt])){const S=_[Zt];S.destroyNode&&gf(y,_,S,3,null,null),function tF(y){let _=y[hl];if(!_)return tm(y[wt],y);for(;_;){let S=null;if(Ur(_))S=_[hl];else{const C=_[gr];C&&(S=C)}if(!S){for(;_&&!_[Go]&&_!==y;)Ur(_)&&tm(_[wt],_),_=_[pr];null===_&&(_=y),Ur(_)&&tm(_[wt],_),S=_&&_[Go]}_=S}}(_)}}function tm(y,_){if(256&_[Wt])return;const S=tt(null);try{_[Wt]&=-129,_[Wt]|=256,_[oa]&&function Jt(y){if(ke(y),ut(y))for(let _=0;_<y.producerNode.length;_++)St(y.producerNode[_],y.producerIndexOfThis[_]);y.producerNode.length=y.producerLastReadVersion.length=y.producerIndexOfThis.length=0,y.liveConsumerNode&&(y.liveConsumerNode.length=y.liveConsumerIndexOfThis.length=0)}(_[oa]),function iF(y,_){let S;if(null!=y&&null!=(S=y.destroyHooks))for(let C=0;C<S.length;C+=2){const T=_[S[C]];if(!(T instanceof Sl)){const D=S[C+1];if(Array.isArray(D))for(let I=0;I<D.length;I+=2){const M=T[D[I]],A=D[I+1];hi(4,M,A);try{A.call(M)}finally{hi(5,M,A)}}else{hi(4,T,D);try{D.call(T)}finally{hi(5,T,D)}}}}}(y,_),function oF(y,_){const S=y.cleanup,C=_[za];if(null!==S)for(let D=0;D<S.length-1;D+=2)if("string"==typeof S[D]){const I=S[D+3];I>=0?C[I]():C[-I].unsubscribe(),D+=2}else S[D].call(C[S[D+1]]);null!==C&&(_[za]=null);const T=_[Cs];if(null!==T){_[Cs]=null;for(let D=0;D<T.length;D++)(0,T[D])()}}(y,_),1===_[wt].type&&_[Zt].destroy();const C=_[pl];if(null!==C&&Vr(_[pr])){C!==_[pr]&&cb(C,_);const T=_[di];null!==T&&T.detachView(y)}!function Ux(y){Rg.delete(y[gl])}(_)}finally{tt(S)}}function nm(y,_,S){return function lb(y,_,S){let C=_;for(;null!==C&&40&C.type;)C=(_=C).parent;if(null===C)return S[or];{const{componentOffset:T}=C;if(T>-1){const{encapsulation:D}=y.data[C.directiveStart+T];if(D===zo.None||D===zo.Emulated)return null}return Xr(C,S)}}(y,_.parent,S)}function la(y,_,S,C,T){y.insertBefore(_,S,C,T)}function ub(y,_,S){y.appendChild(_,S)}function db(y,_,S,C,T){null!==C?la(y,_,S,C,T):ub(y,_,S)}function hf(y,_){return y.parentNode(_)}let rm,pb=function hb(y,_,S){return 40&y.type?Xr(y,S):null};function pf(y,_,S,C){const T=nm(y,C,_),D=_[Zt],M=function fb(y,_,S){return pb(y,_,S)}(C.parent||_[Lr],C,_);if(null!=T)if(Array.isArray(S))for(let A=0;A<S.length;A++)db(D,T,S[A],M,!1);else db(D,T,S,M,!1);void 0!==rm&&rm(D,C,_,S,T)}function Ul(y,_){if(null!==_){const S=_.type;if(3&S)return Xr(_,y);if(4&S)return om(-1,y[_.index]);if(8&S){const C=_.child;if(null!==C)return Ul(y,C);{const T=y[_.index];return Vr(T)?om(-1,T):jn(T)}}if(32&S)return Yg(_,y)()||jn(y[_.index]);{const C=mb(y,_);return null!==C?Array.isArray(C)?C[0]:Ul(sa(y[cr]),C):Ul(y,_.next)}}return null}function mb(y,_){return null!==_?y[cr][Lr].projection[_.projection]:null}function om(y,_){const S=gr+y+1;if(S<_.length){const C=_[S],T=C[wt].firstChild;if(null!==T)return Ul(C,T)}return _[fi]}function im(y,_,S,C,T,D,I){for(;null!=S;){const M=C[S.index],A=S.type;if(I&&0===_&&(M&&Br(jn(M),C),S.flags|=2),32&~S.flags)if(8&A)im(y,_,S.child,C,T,D,!1),ac(_,y,T,M,D);else if(32&A){const R=Yg(S,C);let N;for(;N=R();)ac(_,y,T,N,D);ac(_,y,T,M,D)}else 16&A?vb(y,_,C,S,T,D):ac(_,y,T,M,D);S=I?S.projectionNext:S.next}}function gf(y,_,S,C,T,D){im(S,C,y.firstChild,_,T,D,!1)}function vb(y,_,S,C,T,D){const I=S[cr],A=I[Lr].projection[C.projection];if(Array.isArray(A))for(let R=0;R<A.length;R++)ac(_,y,T,A[R],D);else{let R=A;const N=I[pr];Gd(C)&&(R.flags|=128),im(y,_,R,N,T,D,!0)}}function _b(y,_,S){""===S?y.removeAttribute(_,"class"):y.setAttribute(_,"class",S)}function Cb(y,_,S){const{mergedAttrs:C,classes:T,styles:D}=S;null!==C&&zp(y,_,C),null!==T&&_b(y,_,T),null!==D&&function dF(y,_,S){y.setAttribute(_,"style",S)}(y,_,D)}const cn={};function Bn(y=1){wb(_n(),ze(),jr()+y,!1)}function wb(y,_,S,C){if(!C)if(3&~_[Wt]){const D=y.preOrderHooks;null!==D&&Bd(_,D,0,S)}else{const D=y.preOrderCheckHooks;null!==D&&jd(_,D,S)}aa(S)}function lt(y,_=vn.Default){const S=ze();return null===S?Ft(y,_):GC(Fn(),S,kt(y),_)}function Sb(y,_,S,C,T,D){const I=tt(null);try{let M=null;T&tr.SignalBased&&(M=_[C][_t]),null!==M&&void 0!==M.transformFn&&(D=M.transformFn(D)),T&tr.HasDecoratorInputTransform&&(D=y.inputTransforms[C].call(_,D)),null!==y.setInput?y.setInput(_,M,D,S,C):vC(_,M,C,D)}finally{tt(I)}}function mf(y,_,S,C,T,D,I,M,A,R,N){const O=_.blueprint.slice();return O[or]=T,O[Wt]=204|C,(null!==R||y&&2048&y[Wt])&&(O[Wt]|=2048),EC(O),O[pr]=O[qa]=y,O[Jn]=S,O[Ko]=I||y&&y[Ko],O[Zt]=M||y&&y[Zt],O[_r]=A||y&&y[_r]||null,O[Lr]=D,O[gl]=function Fx(){return xx++}(),O[wo]=N,O[pC]=R,O[cr]=2==_.type?y[cr]:O,O}function cc(y,_,S,C,T){let D=y.data[_];if(null===D)D=function sm(y,_,S,C,T){const D=AC(),I=fg(),A=y.data[_]=function _F(y,_,S,C,T,D){let I=_?_.injectorIndex:-1,M=0;return function Ja(){return null!==en.skipHydrationRootTNode}()&&(M|=128),{type:S,index:C,insertBeforeIndex:null,injectorIndex:I,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:M,providerIndexes:0,value:T,attrs:D,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:_,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,I?D:D&&D.parent,S,_,C,T);return null===y.firstChild&&(y.firstChild=A),null!==D&&(I?null==D.child&&null!==A.parent&&(D.child=A):null===D.next&&(D.next=A,A.prev=D)),A}(y,_,S,C,T),function Zk(){return en.lFrame.inI18n}()&&(D.flags|=32);else if(64&D.type){D.type=S,D.value=C,D.attrs=T;const I=function wl(){const y=en.lFrame,_=y.currentTNode;return y.isParent?_:_.parent}();D.injectorIndex=null===I?-1:I.injectorIndex}return gi(D,!0),D}function jl(y,_,S,C){if(0===S)return-1;const T=_.length;for(let D=0;D<S;D++)_.push(C),y.blueprint.push(C),y.data.push(null);return T}function Tb(y,_,S,C,T){const D=jr(),I=2&C;try{aa(-1),I&&_.length>an&&wb(y,_,an,!1),hi(I?2:0,T),S(C,T)}finally{aa(D),hi(I?3:1,T)}}function am(y,_,S){if(ng(_)){const C=tt(null);try{const D=_.directiveEnd;for(let I=_.directiveStart;I<D;I++){const M=y.data[I];M.contentQueries&&M.contentQueries(1,S[I],I)}}finally{tt(C)}}}function cm(y,_,S){MC()&&(function DF(y,_,S,C){const T=S.directiveStart,D=S.directiveEnd;ia(S)&&function OF(y,_,S){const C=Xr(_,y),T=Eb(S);let I=16;S.signals?I=4096:S.onPush&&(I=64);const M=yf(y,mf(y,T,null,I,C,_,null,y[Ko].rendererFactory.createRenderer(C,S),null,null,null));y[_.index]=M}(_,S,y.data[T+S.componentOffset]),y.firstCreatePass||Hd(S,_),Br(C,_);const I=S.initialInputs;for(let M=T;M<D;M++){const A=y.data[M],R=ca(_,y,M,S);Br(R,_),null!==I&&kF(0,M-T,R,A,0,I),Jo(A)&&(bo(S.index,_)[Jn]=ca(_,y,M,S))}}(y,_,S,Xr(S,_)),!(64&~S.flags)&&Rb(y,_,S))}function lm(y,_,S=Xr){const C=_.localNames;if(null!==C){let T=_.index+1;for(let D=0;D<C.length;D+=2){const I=C[D+1],M=-1===I?S(_,y):y[I];y[T++]=M}}}function Eb(y){const _=y.tView;return null===_||_.incompleteFirstPass?y.tView=um(1,null,y.template,y.decls,y.vars,y.directiveDefs,y.pipeDefs,y.viewQuery,y.schemas,y.consts,y.id):_}function um(y,_,S,C,T,D,I,M,A,R,N){const O=an+C,F=O+T,$=function hF(y,_){const S=[];for(let C=0;C<_;C++)S.push(C<y?null:cn);return S}(O,F),Q="function"==typeof R?R():R;return $[wt]={type:y,blueprint:$,template:S,queries:null,viewQuery:M,declTNode:_,data:$.slice().fill(null,O),bindingStartIndex:O,expandoStartIndex:F,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof D?D():D,pipeRegistry:"function"==typeof I?I():I,firstChild:null,schemas:A,consts:Q,incompleteFirstPass:!1,ssrId:N}}let Db=()=>null;function Ib(y,_,S,C,T){for(let D in _){if(!_.hasOwnProperty(D))continue;const I=_[D];if(void 0===I)continue;null!=C||(C={});let M,A=tr.None;Array.isArray(I)?(M=I[0],A=I[1]):M=I;let R=D;if(null!==T){if(!T.hasOwnProperty(D))continue;R=T[D]}0===y?Mb(C,S,R,M,A):Mb(C,S,R,M)}return C}function Mb(y,_,S,C,T){let D;y.hasOwnProperty(S)?(D=y[S]).push(_,C):D=y[S]=[_,C],void 0!==T&&D.push(T)}function ho(y,_,S,C,T,D,I,M){const A=Xr(_,S);let N,R=_.inputs;!M&&null!=R&&(N=R[C])?(gm(y,S,N,C,T),ia(_)&&function bF(y,_){const S=bo(_,y);16&S[Wt]||(S[Wt]|=64)}(S,_.index)):3&_.type&&(C=function wF(y){return"class"===y?"className":"for"===y?"htmlFor":"formaction"===y?"formAction":"innerHtml"===y?"innerHTML":"readonly"===y?"readOnly":"tabindex"===y?"tabIndex":y}(C),T=null!=I?I(T,_.value||"",C):T,D.setProperty(A,C,T))}function dm(y,_,S,C){if(MC()){const T=null===C?null:{"":-1},D=function MF(y,_){const S=y.directiveRegistry;let C=null,T=null;if(S)for(let I=0;I<S.length;I++){const M=S[I];if(nC(_,M.selectors,!1))if(C||(C=[]),Jo(M))if(null!==M.findHostDirectiveDefs){const A=[];T=T||new Map,M.findHostDirectiveDefs(M,A,T),C.unshift(...A,M),fm(y,_,A.length)}else C.unshift(M),fm(y,_,0);else{var D;T=T||new Map,null===(D=M.findHostDirectiveDefs)||void 0===D||D.call(M,M,C,T),C.push(M)}}return null===C?null:[C,T]}(y,S);let I,M;null===D?I=M=null:[I,M]=D,null!==I&&Ab(y,_,S,I,T,M),T&&function AF(y,_,S){if(_){const C=y.localNames=[];for(let T=0;T<_.length;T+=2){const D=S[_[T+1]];if(null==D)throw new j(-301,!1);C.push(_[T],D)}}}(S,C,T)}S.mergedAttrs=ul(S.mergedAttrs,S.attrs)}function Ab(y,_,S,C,T,D){for(let O=0;O<C.length;O++)Tg(Hd(S,_),y,C[O].type);!function PF(y,_,S){y.flags|=1,y.directiveStart=_,y.directiveEnd=_+S,y.providerIndexes=_}(S,y.data.length,C.length);for(let O=0;O<C.length;O++){const F=C[O];F.providersResolver&&F.providersResolver(F)}let I=!1,M=!1,A=jl(y,_,C.length,null);for(let O=0;O<C.length;O++){const F=C[O];S.mergedAttrs=ul(S.mergedAttrs,F.hostAttrs),NF(y,S,_,A,F),RF(A,F,T),null!==F.contentQueries&&(S.flags|=4),(null!==F.hostBindings||null!==F.hostAttrs||0!==F.hostVars)&&(S.flags|=64);const $=F.type.prototype;var R,N;!I&&($.ngOnChanges||$.ngOnInit||$.ngDoCheck)&&((null!==(R=y.preOrderHooks)&&void 0!==R?R:y.preOrderHooks=[]).push(S.index),I=!0),M||!$.ngOnChanges&&!$.ngDoCheck||((null!==(N=y.preOrderCheckHooks)&&void 0!==N?N:y.preOrderCheckHooks=[]).push(S.index),M=!0),A++}!function CF(y,_,S){const T=_.directiveEnd,D=y.data,I=_.attrs,M=[];let A=null,R=null;for(let N=_.directiveStart;N<T;N++){const O=D[N],F=S?S.get(O):null,Q=F?F.outputs:null;A=Ib(0,O.inputs,N,A,F?F.inputs:null),R=Ib(1,O.outputs,N,R,Q);const ae=null===A||null===I||qp(_)?null:xF(A,N,I);M.push(ae)}null!==A&&(A.hasOwnProperty("class")&&(_.flags|=8),A.hasOwnProperty("style")&&(_.flags|=16)),_.initialInputs=M,_.inputs=A,_.outputs=R}(y,S,D)}function Rb(y,_,S){const C=S.directiveStart,T=S.directiveEnd,D=S.index,I=function tx(){return en.lFrame.currentDirectiveIndex}();try{aa(D);for(let M=C;M<T;M++){const A=y.data[M],R=_[M];pg(M),(null!==A.hostBindings||0!==A.hostVars||null!==A.hostAttrs)&&IF(A,R)}}finally{aa(-1),pg(I)}}function IF(y,_){null!==y.hostBindings&&y.hostBindings(1,_)}function fm(y,_,S){var C;_.componentOffset=S,(null!==(C=y.components)&&void 0!==C?C:y.components=[]).push(_.index)}function RF(y,_,S){if(S){if(_.exportAs)for(let C=0;C<_.exportAs.length;C++)S[_.exportAs[C]]=y;Jo(_)&&(S[""]=y)}}function NF(y,_,S,C,T){y.data[C]=T;const D=T.factory||(T.factory=ta(T.type)),I=new Sl(D,Jo(T),lt);y.blueprint[C]=I,S[C]=I,function TF(y,_,S,C,T){const D=T.hostBindings;if(D){let I=y.hostBindingOpCodes;null===I&&(I=y.hostBindingOpCodes=[]);const M=~_.index;(function EF(y){let _=y.length;for(;_>0;){const S=y[--_];if("number"==typeof S&&S<0)return S}return 0})(I)!=M&&I.push(M),I.push(S,C,D)}}(y,_,C,jl(y,S,T.hostVars,cn),T)}function kF(y,_,S,C,T,D){const I=D[_];if(null!==I)for(let M=0;M<I.length;)Sb(C,S,I[M++],I[M++],I[M++],I[M++])}function xF(y,_,S){let C=null,T=0;for(;T<S.length;){const D=S[T];if(0!==D)if(5!==D){if("number"==typeof D)break;if(y.hasOwnProperty(D)){null===C&&(C=[]);const I=y[D];for(let M=0;M<I.length;M+=3)if(I[M]===_){C.push(D,I[M+1],I[M+2],S[T+1]);break}}T+=2}else T+=2;else T+=4}return C}function Pb(y,_,S,C){return[y,!0,0,_,null,C,null,S,null,null]}function Nb(y,_){const S=y.contentQueries;if(null!==S){const C=tt(null);try{for(let T=0;T<S.length;T+=2){const I=S[T+1];if(-1!==I){const M=y.data[I];Ud(S[T]),M.contentQueries(2,_[I],I)}}}finally{tt(C)}}}function yf(y,_){return y[hl]?y[hC][Go]=_:y[hl]=_,y[hC]=_,_}function pm(y,_,S){Ud(0);const C=tt(null);try{_(y,S)}finally{tt(C)}}function vf(y,_){const S=y[_r],C=S?S.get(vi,null):null;C&&C.handleError(_)}function gm(y,_,S,C,T){for(let D=0;D<S.length;){const I=S[D++],M=S[D++],A=S[D++];Sb(y.data[I],_[I],C,M,A,T)}}function FF(y,_){const S=bo(_,y),C=S[wt];!function LF(y,_){for(let S=_.length;S<y.blueprint.length;S++)_.push(y.blueprint[S])}(C,S);const T=S[or];null!==T&&null===S[wo]&&(S[wo]=Ug(T,S[_r])),mm(C,S,S[Jn])}function mm(y,_,S){yg(_);try{var C;const T=y.viewQuery;null!==T&&pm(1,T,S);const D=y.template;null!==D&&Tb(y,_,D,1,S),y.firstCreatePass&&(y.firstCreatePass=!1),null===(C=_[di])||void 0===C||C.finishViewCreation(y),y.staticContentQueries&&Nb(y,_),y.staticViewQueries&&pm(2,y.viewQuery,S);const I=y.components;null!==I&&function UF(y,_){for(let S=0;S<_.length;S++)FF(y,_[S])}(_,I)}catch(T){throw y.firstCreatePass&&(y.incompleteFirstPass=!0,y.firstCreatePass=!1),T}finally{_[Wt]&=-5,vg()}}function lc(y,_){return!_||null===_.firstChild||Gd(y)}function $l(y,_,S,C=!0){const T=_[wt];if(function nF(y,_,S,C){const T=gr+C,D=S.length;C>0&&(S[T-1][Go]=_),C<D-gr?(_[Go]=S[T],K0(S,gr+C,_)):(S.push(_),_[Go]=null),_[pr]=S;const I=_[pl];null!==I&&S!==I&&function rF(y,_){const S=y[Ga];_[cr]!==_[pr][pr][cr]&&(y[Wt]|=tg.HasTransplantedViews),null===S?y[Ga]=[_]:S.push(_)}(I,_);const M=_[di];null!==M&&M.insertView(y),ug(_),_[Wt]|=128}(T,_,y,S),C){const I=om(S,y),M=_[Zt],A=hf(M,y[fi]);null!==A&&function eF(y,_,S,C,T,D){C[or]=T,C[Lr]=_,gf(y,C,S,1,T,D)}(T,y[Lr],M,_,A,I)}const D=_[wo];null!==D&&null!==D.firstChild&&(D.firstChild=null)}function Hl(y,_,S,C,T=!1){for(;null!==S;){const D=_[S.index];null!==D&&C.push(jn(D)),Vr(D)&&Lb(D,C);const I=S.type;if(8&I)Hl(y,_,S.child,C);else if(32&I){const M=Yg(S,_);let A;for(;A=M();)C.push(A)}else if(16&I){const M=mb(_,S);if(Array.isArray(M))C.push(...M);else{const A=sa(_[cr]);Hl(A[wt],A,M,C,!0)}}S=T?S.projectionNext:S.next}return C}function Lb(y,_){for(let S=gr;S<y.length;S++){const C=y[S],T=C[wt].firstChild;null!==T&&Hl(C[wt],C,T,_)}y[fi]!==y[or]&&_.push(y[fi])}let Ub=[];const $F=se(se({},pt),{},{consumerIsAlwaysLive:!0,consumerMarkedDirty:y=>{Cl(y.lView)},consumerOnSignalRead(){this.lView[oa]=this}}),Vb=100;function _f(y,_=!0,S=0){const C=y[Ko],T=C.rendererFactory;var I;null===(I=T.begin)||void 0===I||I.call(T);try{!function HF(y,_){vm(y,_);let S=0;for(;lg(y);){if(S===Vb)throw new j(103,!1);S++,vm(y,1)}}(y,S)}catch(R){throw _&&vf(y,R),R}finally{var M,A;null===(M=T.end)||void 0===M||M.call(T),null===(A=C.inlineEffectRunner)||void 0===A||A.flush()}}function zF(y,_,S,C){var T;const D=_[Wt];if(!(256&~D))return;null===(T=_[Ko].inlineEffectRunner)||void 0===T||T.flush(),yg(_);let M=null,A=null;(function qF(y){return 2!==y.type})(y)&&(A=function VF(y){var _;return null!==(_=y[oa])&&void 0!==_?_:function jF(y){var _;const S=null!==(_=Ub.pop())&&void 0!==_?_:Object.create($F);return S.lView=y,S}(y)}(_),M=function ot(y){return y&&(y.nextProducerIndex=0),tt(y)}(A));try{EC(_),function PC(y){return en.lFrame.bindingIndex=y}(y.bindingStartIndex),null!==S&&Tb(y,_,S,2,C);const R=!(3&~D);if(R){const F=y.preOrderCheckHooks;null!==F&&jd(_,F,null)}else{const F=y.preOrderHooks;null!==F&&Bd(_,F,0,null),_g(_,0)}if(function WF(y){for(let _=yw(y);null!==_;_=vw(_)){if(!(_[Wt]&tg.HasTransplantedViews))continue;const S=_[Ga];for(let C=0;C<S.length;C++){Hk(S[C])}}}(_),jb(_,0),null!==y.contentQueries&&Nb(y,_),R){const F=y.contentCheckHooks;null!==F&&jd(_,F)}else{const F=y.contentHooks;null!==F&&Bd(_,F,1),_g(_,1)}!function fF(y,_){const S=y.hostBindingOpCodes;if(null!==S)try{for(let C=0;C<S.length;C++){const T=S[C];if(T<0)aa(~T);else{const D=T,I=S[++C],M=S[++C];ex(I,D),M(2,_[D])}}}finally{aa(-1)}}(y,_);const N=y.components;null!==N&&$b(_,N,0);const O=y.viewQuery;if(null!==O&&pm(2,O,C),R){const F=y.viewCheckHooks;null!==F&&jd(_,F)}else{const F=y.viewHooks;null!==F&&Bd(_,F,2),_g(_,2)}if(!0===y.firstUpdatePass&&(y.firstUpdatePass=!1),_[ml]){for(const F of _[ml])F();_[ml]=null}_[Wt]&=-73}catch(R){throw Cl(_),R}finally{null!==A&&(function Ot(y,_){if(tt(_),y&&void 0!==y.producerNode&&void 0!==y.producerIndexOfThis&&void 0!==y.producerLastReadVersion){if(ut(y))for(let S=y.nextProducerIndex;S<y.producerNode.length;S++)St(y.producerNode[S],y.producerIndexOfThis[S]);for(;y.producerNode.length>y.nextProducerIndex;)y.producerNode.pop(),y.producerLastReadVersion.pop(),y.producerIndexOfThis.pop()}}(A,M),function BF(y){y.lView[oa]!==y&&(y.lView=null,Ub.push(y))}(A)),vg()}}function jb(y,_){for(let S=yw(y);null!==S;S=vw(S))for(let C=gr;C<S.length;C++)Bb(S[C],_)}function GF(y,_,S){Bb(bo(_,y),S)}function Bb(y,_){cg(y)&&vm(y,_)}function vm(y,_){const C=y[wt],T=y[Wt],D=y[oa];let I=!!(0===_&&16&T);if(I||(I=!!(64&T&&0===_)),I||(I=!!(1024&T)),I||(I=!(null==D||!D.dirty||!ln(D))),D&&(D.dirty=!1),y[Wt]&=-9217,I)zF(C,y,C.template,y[Jn]);else if(8192&T){jb(y,1);const M=C.components;null!==M&&$b(y,M,1)}}function $b(y,_,S){for(let C=0;C<_.length;C++)GF(y,_[C],S)}function zl(y){var _;for(null===(_=y[Ko].changeDetectionScheduler)||void 0===_||_.notify();y;){y[Wt]|=64;const S=sa(y);if(rg(y)&&!S)return y;y=S}return null}class ql{get rootNodes(){const _=this._lView,S=_[wt];return Hl(S,_,S.firstChild,[])}constructor(_,S,C=!0){this._lView=_,this._cdRefInjectingView=S,this.notifyErrorHandler=C,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Jn]}set context(_){this._lView[Jn]=_}get destroyed(){return!(256&~this._lView[Wt])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const _=this._lView[pr];if(Vr(_)){const S=_[8],C=S?S.indexOf(this):-1;C>-1&&(Ll(_,C),Ed(S,C))}this._attachedToViewContainer=!1}ff(this._lView[wt],this._lView)}onDestroy(_){Ld(this._lView,_)}markForCheck(){zl(this._cdRefInjectingView||this._lView)}detach(){this._lView[Wt]&=-129}reattach(){ug(this._lView),this._lView[Wt]|=128}detectChanges(){this._lView[Wt]|=1024,_f(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new j(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,ab(this._lView[wt],this._lView)}attachToAppRef(_){if(this._attachedToViewContainer)throw new j(902,!1);this._appRef=_,ug(this._lView)}}let ts=(()=>{class _{}return _.__NG_ELEMENT_ID__=QF,_})();const KF=ts,JF=class extends KF{constructor(_,S,C){super(),this._declarationLView=_,this._declarationTContainer=S,this.elementRef=C}get ssrId(){var _;return(null===(_=this._declarationTContainer.tView)||void 0===_?void 0:_.ssrId)||null}createEmbeddedView(_,S){return this.createEmbeddedViewImpl(_,S)}createEmbeddedViewImpl(_,S,C){const T=function Bl(y,_,S,C){const T=tt(null);try{var D,I,M;const A=_.tView,O=mf(y,A,S,4096&y[Wt]?4096:16,null,_,null,null,null!==(D=null==C?void 0:C.injector)&&void 0!==D?D:null,null!==(I=null==C?void 0:C.embeddedViewInjector)&&void 0!==I?I:null,null!==(M=null==C?void 0:C.dehydratedView)&&void 0!==M?M:null);O[pl]=y[_.index];const $=y[di];return null!==$&&(O[di]=$.createEmbeddedView(A)),mm(A,O,S),O}finally{tt(T)}}(this._declarationLView,this._declarationTContainer,_,{embeddedViewInjector:S,dehydratedView:C});return new ql(T)}};function QF(){return Cf(Fn(),ze())}function Cf(y,_){return 4&y.type?new JF(_,y,ec(y,_)):null}"^(\\d+)*(".concat("b","|").concat("h",")*(.*)");class Ef{}class CL{}class Jb{}class bL{resolveComponentFactory(_){throw function wL(y){const _=Error("No component factory found for ".concat(xt(y),"."));return _.ngComponent=y,_}(_)}}let Df=(()=>{class _{}return _.NULL=new bL,_})();class Tm{}let ns=(()=>{class _{constructor(){this.destroyNode=null}}return _.__NG_ELEMENT_ID__=()=>function SL(){const y=ze(),S=bo(Fn().index,y);return(Ur(S)?S:y)[Zt]}(),_})(),TL=(()=>{var y;class _{}return(y=_).\u0275prov=At({token:y,providedIn:"root",factory:()=>null}),_})();const Em={},Xb=new Set;function Ci(y){var _,S;Xb.has(y)||(Xb.add(y),null===(_=performance)||void 0===_||null===(S=_.mark)||void 0===S||S.call(_,"mark_feature_usage",{detail:{feature:y}}))}function Yb(...y){}class Pn{constructor({enableLongStackTrace:_=!1,shouldCoalesceEventChangeDetection:S=!1,shouldCoalesceRunChangeDetection:C=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Hn(!1),this.onMicrotaskEmpty=new Hn(!1),this.onStable=new Hn(!1),this.onError=new Hn(!1),typeof Zone>"u")throw new j(908,!1);Zone.assertZonePatched();const T=this;T._nesting=0,T._outer=T._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(T._inner=T._inner.fork(new Zone.TaskTrackingZoneSpec)),_&&Zone.longStackTraceZoneSpec&&(T._inner=T._inner.fork(Zone.longStackTraceZoneSpec)),T.shouldCoalesceEventChangeDetection=!C&&S,T.shouldCoalesceRunChangeDetection=C,T.lastRequestAnimationFrameId=-1,T.nativeRequestAnimationFrame=function EL(){const y="function"==typeof Pe.requestAnimationFrame;let _=Pe[y?"requestAnimationFrame":"setTimeout"],S=Pe[y?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&_&&S){const C=_[Zone.__symbol__("OriginalDelegate")];C&&(_=C);const T=S[Zone.__symbol__("OriginalDelegate")];T&&(S=T)}return{nativeRequestAnimationFrame:_,nativeCancelAnimationFrame:S}}().nativeRequestAnimationFrame,function ML(y){const _=()=>{!function IL(y){y.isCheckStableRunning||-1!==y.lastRequestAnimationFrameId||(y.lastRequestAnimationFrameId=y.nativeRequestAnimationFrame.call(Pe,()=>{y.fakeTopEventTask||(y.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{y.lastRequestAnimationFrameId=-1,Im(y),y.isCheckStableRunning=!0,Dm(y),y.isCheckStableRunning=!1},void 0,()=>{},()=>{})),y.fakeTopEventTask.invoke()}),Im(y))}(y)};y._inner=y._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(S,C,T,D,I,M)=>{if(function AL(y){var _;return!(!Array.isArray(y)||1!==y.length)&&!0===(null===(_=y[0].data)||void 0===_?void 0:_.__ignore_ng_zone__)}(M))return S.invokeTask(T,D,I,M);try{return Zb(y),S.invokeTask(T,D,I,M)}finally{(y.shouldCoalesceEventChangeDetection&&"eventTask"===D.type||y.shouldCoalesceRunChangeDetection)&&_(),eS(y)}},onInvoke:(S,C,T,D,I,M,A)=>{try{return Zb(y),S.invoke(T,D,I,M,A)}finally{y.shouldCoalesceRunChangeDetection&&_(),eS(y)}},onHasTask:(S,C,T,D)=>{S.hasTask(T,D),C===T&&("microTask"==D.change?(y._hasPendingMicrotasks=D.microTask,Im(y),Dm(y)):"macroTask"==D.change&&(y.hasPendingMacrotasks=D.macroTask))},onHandleError:(S,C,T,D)=>(S.handleError(T,D),y.runOutsideAngular(()=>y.onError.emit(D)),!1)})}(T)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Pn.isInAngularZone())throw new j(909,!1)}static assertNotInAngularZone(){if(Pn.isInAngularZone())throw new j(909,!1)}run(_,S,C){return this._inner.run(_,S,C)}runTask(_,S,C,T){const D=this._inner,I=D.scheduleEventTask("NgZoneEvent: "+T,_,DL,Yb,Yb);try{return D.runTask(I,S,C)}finally{D.cancelTask(I)}}runGuarded(_,S,C){return this._inner.runGuarded(_,S,C)}runOutsideAngular(_){return this._outer.run(_)}}const DL={};function Dm(y){if(0==y._nesting&&!y.hasPendingMicrotasks&&!y.isStable)try{y._nesting++,y.onMicrotaskEmpty.emit(null)}finally{if(y._nesting--,!y.hasPendingMicrotasks)try{y.runOutsideAngular(()=>y.onStable.emit(null))}finally{y.isStable=!0}}}function Im(y){y.hasPendingMicrotasks=!!(y._hasPendingMicrotasks||(y.shouldCoalesceEventChangeDetection||y.shouldCoalesceRunChangeDetection)&&-1!==y.lastRequestAnimationFrameId)}function Zb(y){y._nesting++,y.isStable&&(y.isStable=!1,y.onUnstable.emit(null))}function eS(y){y._nesting--,Dm(y)}class tS{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Hn,this.onMicrotaskEmpty=new Hn,this.onStable=new Hn,this.onError=new Hn}run(_,S,C){return _.apply(S,C)}runGuarded(_,S,C){return _.apply(S,C)}runOutsideAngular(_){return _()}runTask(_,S,C,T){return _.apply(S,C)}}var ua=function(y){return y[y.EarlyRead=0]="EarlyRead",y[y.Write=1]="Write",y[y.MixedReadWrite=2]="MixedReadWrite",y[y.Read=3]="Read",y}(ua||{});const nS={destroy(){}};function Am(y,_){var S,C,T;!_&&function Od(y){if(!dC())throw new j(-203,!1)}();const D=null!==(S=null==_?void 0:_.injector)&&void 0!==S?S:at(Zr);if(!function Xo(y){return"browser"===(null!=y?y:at(Zr)).get(bs)}(D))return nS;Ci("NgAfterNextRender");const I=D.get(Ql),M=null!==(C=I.handler)&&void 0!==C?C:I.handler=new oS,A=null!==(T=null==_?void 0:_.phase)&&void 0!==T?T:ua.MixedReadWrite,R=()=>{M.unregister(O),N()},N=D.get(Za).onDestroy(R),O=ui(D,()=>new rS(A,()=>{R(),y()}));return M.register(O),{destroy:R}}class rS{constructor(_,S){var C;this.phase=_,this.callbackFn=S,this.zone=at(Pn),this.errorHandler=at(vi,{optional:!0}),null===(C=at(Ef,{optional:!0}))||void 0===C||C.notify(1)}invoke(){try{this.zone.runOutsideAngular(this.callbackFn)}catch(S){var _;null===(_=this.errorHandler)||void 0===_||_.handleError(S)}}}class oS{constructor(){this.executingCallbacks=!1,this.buckets={[ua.EarlyRead]:new Set,[ua.Write]:new Set,[ua.MixedReadWrite]:new Set,[ua.Read]:new Set},this.deferredCallbacks=new Set}register(_){(this.executingCallbacks?this.deferredCallbacks:this.buckets[_.phase]).add(_)}unregister(_){this.buckets[_.phase].delete(_),this.deferredCallbacks.delete(_)}execute(){this.executingCallbacks=!0;for(const _ of Object.values(this.buckets))for(const S of _)S.invoke();this.executingCallbacks=!1;for(const _ of this.deferredCallbacks)this.buckets[_.phase].add(_);this.deferredCallbacks.clear()}destroy(){for(const _ of Object.values(this.buckets))_.clear();this.deferredCallbacks.clear()}}let Ql=(()=>{var y;class _{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){var C;this.executeInternalCallbacks(),null===(C=this.handler)||void 0===C||C.execute()}executeInternalCallbacks(){const C=[...this.internalCallbacks];this.internalCallbacks.length=0;for(const T of C)T()}ngOnDestroy(){var C;null===(C=this.handler)||void 0===C||C.destroy(),this.handler=null,this.internalCallbacks.length=0}}return(y=_).\u0275prov=At({token:y,providedIn:"root",factory:()=>new y}),_})();function Mf(y,_,S){let C=S?y.styles:null,T=S?y.classes:null,D=0;if(null!==_)for(let I=0;I<_.length;I++){const M=_[I];"number"==typeof M?D=M:1==D?T=Tn(T,M):2==D&&(C=Tn(C,M+": "+_[++I]+";"))}S?y.styles=C:y.stylesWithoutHost=C,S?y.classes=T:y.classesWithoutHost=T}class aS extends Df{constructor(_){super(),this.ngModule=_}resolveComponentFactory(_){const S=gn(_);return new Zl(S,this.ngModule)}}function cS(y){const _=[];for(const S in y){if(!y.hasOwnProperty(S))continue;const C=y[S];void 0!==C&&_.push({propName:Array.isArray(C)?C[0]:C,templateName:S})}return _}class Af{constructor(_,S){this.injector=_,this.parentInjector=S}get(_,S,C){C=bd(C);const T=this.injector.get(_,Em,C);return T!==Em||S===Em?T:this.parentInjector.get(_,S,C)}}class Zl extends Jb{get inputs(){const _=this.componentDef,S=_.inputTransforms,C=cS(_.inputs);if(null!==S)for(const T of C)S.hasOwnProperty(T.propName)&&(T.transform=S[T.propName]);return C}get outputs(){return cS(this.componentDef.outputs)}constructor(_,S){super(),this.componentDef=_,this.ngModule=S,this.componentType=_.type,this.selector=function ak(y){return y.map(sk).join(",")}(_.selectors),this.ngContentSelectors=_.ngContentSelectors?_.ngContentSelectors:[],this.isBoundToModule=!!S}create(_,S,C,T){const D=tt(null);try{var M;let A=(T=T||this.ngModule)instanceof Qr?T:null===(M=T)||void 0===M?void 0:M.injector;A&&null!==this.componentDef.getStandaloneInjector&&(A=this.componentDef.getStandaloneInjector(A)||A);const R=A?new Af(_,A):_,N=R.get(Tm,null);if(null===N)throw new j(407,!1);const O=R.get(TL,null),Q={rendererFactory:N,sanitizer:O,inlineEffectRunner:null,afterRenderEventManager:R.get(Ql,null),changeDetectionScheduler:R.get(Ef,null)},ae=N.createRenderer(null,this.componentDef),Ce=this.componentDef.selectors[0][0]||"div",Ee=C?function pF(y,_,S,C){const D=C.get(xw,!1)||S===zo.ShadowDom,I=y.selectRootElement(_,D);return function gF(y){Db(y)}(I),I}(ae,C,this.componentDef.encapsulation,R):df(ae,Ce,function kL(y){const _=y.toLowerCase();return"svg"===_?"svg":"math"===_?"math":null}(Ce));let Ae=512;this.componentDef.signals?Ae|=4096:this.componentDef.onPush||(Ae|=16);let ht=null;null!==Ee&&(ht=Ug(Ee,R,!0));const vt=um(0,null,null,1,0,null,null,null,null,null,null),$t=mf(null,vt,null,Ae,null,null,Q,ae,R,null,ht);let An,Dn;yg($t);try{const xn=this.componentDef;let Er,io=null;xn.findHostDirectiveDefs?(Er=[],io=new Map,xn.findHostDirectiveDefs(xn,Er,io),Er.push(xn)):Er=[xn];const Vi=function FL(y,_){const S=y[wt],C=an;return y[C]=_,cc(S,C,2,"#host",null)}($t,Ee),ai=function LL(y,_,S,C,T,D,I){const M=T[wt];!function UL(y,_,S,C){for(const T of y)_.mergedAttrs=ul(_.mergedAttrs,T.hostAttrs);null!==_.mergedAttrs&&(Mf(_,_.mergedAttrs,!0),null!==S&&Cb(C,S,_))}(C,y,_,I);let A=null;null!==_&&(A=Ug(_,T[_r]));const R=D.rendererFactory.createRenderer(_,S);let N=16;S.signals?N=4096:S.onPush&&(N=64);const O=mf(T,Eb(S),null,N,T[y.index],y,D,R,null,null,A);return M.firstCreatePass&&fm(M,y,C.length-1),yf(T,O),T[y.index]=O}(Vi,Ee,xn,Er,$t,Q,ae);Dn=_l(vt,an),Ee&&function jL(y,_,S,C){if(C)zp(y,S,["ng-version","17.3.12"]);else{const{attrs:T,classes:D}=function ck(y){const _=[],S=[];let C=1,T=2;for(;C<y.length;){let D=y[C];if("string"==typeof D)2===T?""!==D&&_.push(D,y[++C]):8===T&&S.push(D);else{if(!qo(T))break;T=D}C++}return{attrs:_,classes:S}}(_.selectors[0]);T&&zp(y,S,T),D&&D.length>0&&_b(y,S,D.join(" "))}}(ae,xn,Ee,C),void 0!==S&&function BL(y,_,S){const C=y.projection=[];for(let T=0;T<_.length;T++){const D=S[T];C.push(null!=D?Array.from(D):null)}}(Dn,this.ngContentSelectors,S),An=function VL(y,_,S,C,T,D){const I=Fn(),M=T[wt],A=Xr(I,T);Ab(M,T,I,S,null,C);for(let N=0;N<S.length;N++)Br(ca(T,M,I.directiveStart+N,I),T);Rb(M,T,I),A&&Br(A,T);const R=ca(T,M,I.directiveStart+I.componentOffset,I);if(y[Jn]=T[Jn]=R,null!==D)for(const N of D)N(R,_);return am(M,I,T),R}(ai,xn,Er,io,$t,[$L]),mm(vt,$t,null)}finally{vg()}return new xL(this.componentType,An,ec(Dn,$t),$t,Dn)}finally{tt(D)}}}class xL extends CL{constructor(_,S,C,T,D){super(),this.location=C,this._rootLView=T,this._tNode=D,this.previousInputValues=null,this.instance=S,this.hostView=this.changeDetectorRef=new ql(T,void 0,!1),this.componentType=_}setInput(_,S){const C=this._tNode.inputs;let T;if(null!==C&&(T=C[_])){var D;if(null!==(D=this.previousInputValues)&&void 0!==D||(this.previousInputValues=new Map),this.previousInputValues.has(_)&&Object.is(this.previousInputValues.get(_),S))return;const I=this._rootLView;gm(I[wt],I,T,_,S),this.previousInputValues.set(_,S),zl(bo(this._tNode.index,I))}}get injector(){return new Mr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(_){this.hostView.onDestroy(_)}}function $L(){const y=Fn();Vd(ze()[wt],y)}let Yo=(()=>{class _{}return _.__NG_ELEMENT_ID__=HL,_})();function HL(){return function dS(y,_){let S;const C=_[y.index];return Vr(C)?S=C:(S=Pb(C,_,null,y),_[y.index]=S,yf(_,S)),fS(S,_,y,C),new lS(S,y,_)}(Fn(),ze())}const zL=Yo,lS=class extends zL{constructor(_,S,C){super(),this._lContainer=_,this._hostTNode=S,this._hostLView=C}get element(){return ec(this._hostTNode,this._hostLView)}get injector(){return new Mr(this._hostTNode,this._hostLView)}get parentInjector(){const _=zd(this._hostTNode,this._hostLView);if(wg(_)){const S=El(_,this._hostLView),C=Tl(_);return new Mr(S[wt].data[C+8],S)}return new Mr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(_){const S=uS(this._lContainer);return null!==S&&S[_]||null}get length(){return this._lContainer.length-gr}createEmbeddedView(_,S,C){let T,D;"number"==typeof C?T=C:null!=C&&(T=C.index,D=C.injector);const M=_.createEmbeddedViewImpl(S||{},D,null);return this.insertImpl(M,T,lc(this._hostTNode,null)),M}createComponent(_,S,C,T,D){var I,A;const R=_&&!function fl(y){return"function"==typeof y}(_);let N;if(R)N=S;else{const Ee=S||{};N=Ee.index,C=Ee.injector,T=Ee.projectableNodes,D=Ee.environmentInjector||Ee.ngModuleRef}const O=R?_:new Zl(gn(_)),F=C||this.parentInjector;if(!D&&null==O.ngModule){const Ae=(R?F:this.parentInjector).get(Qr,null);Ae&&(D=Ae)}const $=gn(null!==(I=O.componentType)&&void 0!==I?I:{}),Q=(null==$?void 0:$.id,null),ae=null!==(A=null==Q?void 0:Q.firstChild)&&void 0!==A?A:null,Ce=O.create(F,T,ae,D);return this.insertImpl(Ce.hostView,N,lc(this._hostTNode,Q)),Ce}insert(_,S){return this.insertImpl(_,S,!0)}insertImpl(_,S,C){const T=_._lView;if(function $k(y){return Vr(y[pr])}(T)){const M=this.indexOf(_);if(-1!==M)this.detach(M);else{const A=T[pr],R=new lS(A,A[Lr],A[pr]);R.detach(R.indexOf(_))}}const D=this._adjustIndex(S),I=this._lContainer;return $l(I,T,D,C),_.attachToViewContainerRef(),K0(Nm(I),D,_),_}move(_,S){return this.insert(_,S)}indexOf(_){const S=uS(this._lContainer);return null!==S?S.indexOf(_):-1}remove(_){const S=this._adjustIndex(_,-1),C=Ll(this._lContainer,S);C&&(Ed(Nm(this._lContainer),S),ff(C[wt],C))}detach(_){const S=this._adjustIndex(_,-1),C=Ll(this._lContainer,S);return C&&null!=Ed(Nm(this._lContainer),S)?new ql(C):null}_adjustIndex(_,S=0){return null==_?this.length+S:_}};function uS(y){return y[8]}function Nm(y){return y[8]||(y[8]=[])}let fS=function pS(y,_,S,C){if(y[fi])return;let T;T=8&S.type?jn(C):function qL(y,_){const S=y[Zt],C=S.createComment(""),T=Xr(_,y);return la(S,hf(S,T),C,function aF(y,_){return y.nextSibling(_)}(S,T),!1),C}(_,S),y[fi]=T},Om=()=>!1;function TS(y){return function bS(y){return"function"==typeof y&&void 0!==y[_t]}(y)&&"function"==typeof y.set}function Ln(y){let _=function xS(y){return Object.getPrototypeOf(y.prototype).constructor}(y.type),S=!0;const C=[y];for(;_;){let T;if(Jo(y))T=_.\u0275cmp||_.\u0275dir;else{if(_.\u0275cmp)throw new j(903,!1);T=_.\u0275dir}if(T){if(S){C.push(T);const I=y;I.inputs=Pf(y.inputs),I.inputTransforms=Pf(y.inputTransforms),I.declaredInputs=Pf(y.declaredInputs),I.outputs=Pf(y.outputs);const M=T.hostBindings;M&&gU(y,M);const A=T.viewQuery,R=T.contentQueries;if(A&&hU(y,A),R&&pU(y,R),dU(y,T),Bt(y.outputs,T.outputs),Jo(T)&&T.data.animation){const N=y.data;N.animation=(N.animation||[]).concat(T.data.animation)}}const D=T.features;if(D)for(let I=0;I<D.length;I++){const M=D[I];M&&M.ngInherit&&M(y),M===Ln&&(S=!1)}}_=Object.getPrototypeOf(_)}!function fU(y){let _=0,S=null;for(let C=y.length-1;C>=0;C--){const T=y[C];T.hostVars=_+=T.hostVars,T.hostAttrs=ul(T.hostAttrs,S=ul(S,T.hostAttrs))}}(C)}function dU(y,_){for(const C in _.inputs){if(!_.inputs.hasOwnProperty(C)||y.inputs.hasOwnProperty(C))continue;const T=_.inputs[C];if(void 0!==T&&(y.inputs[C]=T,y.declaredInputs[C]=_.declaredInputs[C],null!==_.inputTransforms)){var S;const D=Array.isArray(T)?T[0]:T;if(!_.inputTransforms.hasOwnProperty(D))continue;null!==(S=y.inputTransforms)&&void 0!==S||(y.inputTransforms={}),y.inputTransforms[D]=_.inputTransforms[D]}}}function Pf(y){return y===li?{}:y===In?[]:y}function hU(y,_){const S=y.viewQuery;y.viewQuery=S?(C,T)=>{_(C,T),S(C,T)}:_}function pU(y,_){const S=y.contentQueries;y.contentQueries=S?(C,T,D)=>{_(C,T,D),S(C,T,D)}:_}function gU(y,_){const S=y.hostBindings;y.hostBindings=S?(C,T)=>{_(C,T),S(C,T)}:_}class da{}class jS{}class $m extends da{constructor(_,S,C){super(),this._parent=S,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new aS(this);const T=Fr(_);this._bootstrapComponents=To(T.bootstrap),this._r3Injector=rw(_,S,[{provide:da,useValue:this},{provide:Df,useValue:this.componentFactoryResolver},...C],xt(_),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(_)}get injector(){return this._r3Injector}destroy(){const _=this._r3Injector;!_.destroyed&&_.destroy(),this.destroyCbs.forEach(S=>S()),this.destroyCbs=null}onDestroy(_){this.destroyCbs.push(_)}}class Hm extends jS{constructor(_){super(),this.moduleType=_}create(_){return new $m(this.moduleType,_,[])}}class BS extends da{constructor(_){super(),this.componentFactoryResolver=new aS(this),this.instance=null;const S=new Ba([..._.providers,{provide:da,useValue:this},{provide:Df,useValue:this.componentFactoryResolver}],_.parent||Nd(),_.debugName,new Set(["environment"]));this.injector=S,_.runEnvironmentInitializers&&S.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(_){this.injector.onDestroy(_)}}function Nf(y,_,S=null){return new BS({providers:y,parent:_,debugName:S,runEnvironmentInitializers:!0}).injector}let Is=(()=>{var y;class _{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new rr(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);const C=this.taskId++;return this.pendingTasks.add(C),C}remove(C){this.pendingTasks.delete(C),0===this.pendingTasks.size&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}}return(y=_).\u0275fac=function(C){return new(C||y)},y.\u0275prov=At({token:y,factory:y.\u0275fac,providedIn:"root"}),_})();function kf(y){return!!function zm(y){return null!==y&&("function"==typeof y||"object"==typeof y)}(y)&&(Array.isArray(y)||!(y instanceof Map)&&Symbol.iterator in y)}function mr(y,_,S){return!Object.is(y[_],S)&&(y[_]=S,!0)}function $r(y,_,S,C,T,D,I,M){const A=ze(),R=_n(),N=y+an,O=R.firstCreatePass?function MU(y,_,S,C,T,D,I,M,A){const R=_.consts,N=cc(_,y,4,I||null,pi(R,M));dm(_,S,N,pi(R,A)),Vd(_,N);const O=N.tView=um(2,N,C,T,D,_.directiveRegistry,_.pipeRegistry,null,_.schemas,R,null);return null!==_.queries&&(_.queries.template(_,N),O.queries=_.queries.embeddedTView(N)),N}(N,R,A,_,S,C,T,D,I):R.data[N];gi(O,!1);const F=$S(R,A,O,y);bl()&&pf(R,A,F,O),Br(F,A);const $=Pb(F,A,F,O);return A[N]=$,yf(A,$),function hS(y,_,S){return Om(y,_,S)}($,O,A),Fd(O)&&cm(R,A,O),null!=I&&lm(A,O,M),$r}let $S=function HS(y,_,S,C){return mi(!0),_[Zt].createComment("")};function Bf(y,_){return y<<17|_<<2}function As(y){return y>>17&32767}function ey(y){return 2|y}function pa(y){return(131068&y)>>2}function ty(y,_){return-131069&y|_<<2}function ny(y){return 1|y}function CT(y,_,S,C){const T=y[S+1],D=null===_;let I=C?As(T):pa(T),M=!1;for(;0!==I&&(!1===M||D);){const R=y[I+1];pV(y[I],_)&&(M=!0,y[I+1]=C?ny(R):ey(R)),I=C?As(R):pa(R)}M&&(y[S+1]=C?ey(T):ny(T))}function pV(y,_){return null===y||null==_||(Array.isArray(y)?y[1]:y)===_||!(!Array.isArray(y)||"string"!=typeof _)&&ja(y,_)>=0}function zn(y,_,S){const C=ze();return mr(C,Qo(),_)&&ho(_n(),Qn(),C,y,_,C[Zt],S,!1),zn}function ry(y,_,S,C,T){const I=T?"class":"style";gm(y,S,_.inputs[I],I,C)}function $f(y,_){return function Zo(y,_,S,C){const T=ze(),D=_n(),I=function Yi(y){const _=en.lFrame,S=_.bindingIndex;return _.bindingIndex=_.bindingIndex+y,S}(2);D.firstUpdatePass&&function AT(y,_,S,C){const T=y.data;if(null===T[S+1]){const D=T[jr()],I=function MT(y,_){return _>=y.expandoStartIndex}(y,S);(function OT(y,_){return!!(y.flags&(_?8:16))})(D,C)&&null===_&&!I&&(_=!1),_=function SV(y,_,S,C){const T=function gg(y){const _=en.lFrame.currentDirectiveIndex;return-1===_?null:y[_]}(y);let D=C?_.residualClasses:_.residualStyles;if(null===T)0===(C?_.classBindings:_.styleBindings)&&(S=su(S=oy(null,y,_,S,C),_.attrs,C),D=null);else{const I=_.directiveStylingLast;if(-1===I||y[I]!==T)if(S=oy(T,y,_,S,C),null===D){let A=function TV(y,_,S){const C=S?_.classBindings:_.styleBindings;if(0!==pa(C))return y[As(C)]}(y,_,C);void 0!==A&&Array.isArray(A)&&(A=oy(null,y,_,A[1],C),A=su(A,_.attrs,C),function EV(y,_,S,C){y[As(S?_.classBindings:_.styleBindings)]=C}(y,_,C,A))}else D=function DV(y,_,S){let C;const T=_.directiveEnd;for(let D=1+_.directiveStylingLast;D<T;D++)C=su(C,y[D].hostAttrs,S);return su(C,_.attrs,S)}(y,_,C)}return void 0!==D&&(C?_.residualClasses=D:_.residualStyles=D),S}(T,D,_,C),function fV(y,_,S,C,T,D){let I=D?_.classBindings:_.styleBindings,M=As(I),A=pa(I);y[C]=S;let N,R=!1;if(Array.isArray(S)?(N=S[1],(null===N||ja(S,N)>0)&&(R=!0)):N=S,T)if(0!==A){const F=As(y[M+1]);y[C+1]=Bf(F,M),0!==F&&(y[F+1]=ty(y[F+1],C)),y[M+1]=function uV(y,_){return 131071&y|_<<17}(y[M+1],C)}else y[C+1]=Bf(M,0),0!==M&&(y[M+1]=ty(y[M+1],C)),M=C;else y[C+1]=Bf(A,0),0===M?M=C:y[A+1]=ty(y[A+1],C),A=C;R&&(y[C+1]=ey(y[C+1])),CT(y,N,C,!0),CT(y,N,C,!1),function hV(y,_,S,C,T){const D=T?y.residualClasses:y.residualStyles;null!=D&&"string"==typeof _&&ja(D,_)>=0&&(S[C+1]=ny(S[C+1]))}(_,N,y,C,D),I=Bf(M,A),D?_.classBindings=I:_.styleBindings=I}(T,D,_,S,I,C)}}(D,y,I,C),_!==cn&&mr(T,I,_)&&function PT(y,_,S,C,T,D,I,M){if(!(3&_.type))return;const A=y.data,R=A[M+1],N=function dV(y){return!(1&~y)}(R)?NT(A,_,S,T,pa(R),I):void 0;Hf(N)||(Hf(D)||function lV(y){return!(2&~y)}(R)&&(D=NT(A,null,S,T,M,I)),function uF(y,_,S,C,T){if(_)T?y.addClass(S,C):y.removeClass(S,C);else{let D=-1===C.indexOf("-")?void 0:Ts.DashCase;null==T?y.removeStyle(S,C,D):("string"==typeof T&&T.endsWith("!important")&&(T=T.slice(0,-10),D|=Ts.Important),y.setStyle(S,C,T,D))}}(C,I,vl(jr(),S),T,D))}(D,D.data[jr()],T,T[Zt],y,T[I+1]=function RV(y,_){return null==y||""===y||("string"==typeof _?y+=_:"object"==typeof y&&(y=xt(Ss(y)))),y}(_,S),C,I)}(y,_,null,!0),$f}function oy(y,_,S,C,T){let D=null;const I=S.directiveEnd;let M=S.directiveStylingLast;for(-1===M?M=S.directiveStart:M++;M<I&&(D=_[M],C=su(C,D.hostAttrs,T),D!==y);)M++;return null!==y&&(S.directiveStylingLast=M),C}function su(y,_,S){const C=S?1:2;let T=-1;if(null!==_)for(let D=0;D<_.length;D++){const I=_[D];"number"==typeof I?T=I:T===C&&(Array.isArray(y)||(y=void 0===y?[]:["",y]),_o(y,I,!!S||_[++D]))}return void 0===y?null:y}function NT(y,_,S,C,T,D){const I=null===_;let M;for(;T>0;){const A=y[T],R=Array.isArray(A),N=R?A[1]:A,O=null===N;let F=S[T+1];F===cn&&(F=O?In:void 0);let $=O?$p(F,C):N===C?F:void 0;if(R&&!Hf($)&&($=$p(A,C)),Hf($)&&(M=$,I))return M;const Q=y[T+1];T=I?As(Q):pa(Q)}if(null!==_){let A=D?_.residualClasses:_.residualStyles;null!=A&&(M=$p(A,C))}return M}function Hf(y){return void 0!==y}function on(y,_,S,C){const T=ze(),D=_n(),I=an+y,M=T[Zt],A=D.firstCreatePass?function ZV(y,_,S,C,T,D){const I=_.consts,A=cc(_,y,2,C,pi(I,T));return dm(_,S,A,pi(I,D)),null!==A.attrs&&Mf(A,A.attrs,!1),null!==A.mergedAttrs&&Mf(A,A.mergedAttrs,!0),null!==_.queries&&_.queries.elementStart(_,A),A}(I,D,T,_,S,C):D.data[I],R=LT(D,T,A,M,_,y);T[I]=R;const N=Fd(A);return gi(A,!0),Cb(M,R,A),!function nu(y){return!(32&~y.flags)}(A)&&bl()&&pf(D,T,R,A),0===function zk(){return en.lFrame.elementDepthCount}()&&Br(R,T),function qk(){en.lFrame.elementDepthCount++}(),N&&(cm(D,T,A),am(D,A,T)),null!==C&&lm(T,A),on}function dn(){let y=Fn();fg()?hg():(y=y.parent,gi(y,!1));const _=y;(function Gk(y){return en.skipHydrationRootTNode===y})(_)&&function Xk(){en.skipHydrationRootTNode=null}(),function Wk(){en.lFrame.elementDepthCount--}();const S=_n();return S.firstCreatePass&&(Vd(S,y),ng(y)&&S.queries.elementEnd(y)),null!=_.classesWithoutHost&&function fx(y){return!!(8&y.flags)}(_)&&ry(S,_,ze(),_.classesWithoutHost,!0),null!=_.stylesWithoutHost&&function hx(y){return!!(16&y.flags)}(_)&&ry(S,_,ze(),_.stylesWithoutHost,!1),dn}function Oo(y,_,S,C){return on(y,_,S,C),dn(),Oo}let LT=(y,_,S,C,T,D)=>(mi(!0),df(C,T,function UC(){return en.lFrame.currentNamespace}()));function Mc(y,_,S){const C=ze(),T=_n(),D=y+an,I=T.firstCreatePass?function nj(y,_,S,C,T){const D=_.consts,I=pi(D,C),M=cc(_,y,8,"ng-container",I);return null!==I&&Mf(M,I,!0),dm(_,S,M,pi(D,T)),null!==_.queries&&_.queries.elementStart(_,M),M}(D,T,C,_,S):T.data[D];gi(I,!0);const M=VT(T,C,I,y);return C[D]=M,bl()&&pf(T,C,M,I),Br(M,C),Fd(I)&&(cm(T,C,I),am(T,I,C)),null!=S&&lm(C,I),Mc}function Ac(){let y=Fn();const _=_n();return fg()?hg():(y=y.parent,gi(y,!1)),_.firstCreatePass&&(Vd(_,y),ng(y)&&_.queries.elementEnd(y)),Ac}let VT=(y,_,S,C)=>(mi(!0),em(_[Zt],""));function ga(){return ze()}const Pc="en-US";let zT=Pc;function ur(y,_,S,C){const T=ze(),D=_n(),I=Fn();return dy(D,T,T[Zt],I,y,_,C),ur}function dy(y,_,S,C,T,D,I){const M=Fd(C),R=y.firstCreatePass&&function kb(y){return y.cleanup||(y.cleanup=[])}(y),N=_[Jn],O=function Ob(y){return y[za]||(y[za]=[])}(_);let F=!0;if(3&C.type||I){const ae=Xr(C,_),Ce=I?I(ae):ae,Ee=O.length,Ae=I?vt=>I(jn(vt[C.index])):C.index;let ht=null;if(!I&&M&&(ht=function r2(y,_,S,C){const T=y.cleanup;if(null!=T)for(let D=0;D<T.length-1;D+=2){const I=T[D];if(I===S&&T[D+1]===C){const M=_[za],A=T[D+2];return M.length>A?M[A]:null}"string"==typeof I&&(D+=2)}return null}(y,_,T,C.index)),null!==ht)(ht.__ngLastListenerFn__||ht).__ngNextListenerFn__=D,ht.__ngLastListenerFn__=D,F=!1;else{D=vE(C,_,N,D,!1);const vt=S.listen(Ce,T,D);O.push(D,vt),R&&R.push(T,Ae,Ee,Ee+1)}}else D=vE(C,_,N,D,!1);const $=C.outputs;let Q;if(F&&null!==$&&(Q=$[T])){const ae=Q.length;if(ae)for(let Ce=0;Ce<ae;Ce+=2){const $t=_[Q[Ce]][Q[Ce+1]].subscribe(D),An=O.length;O.push(D,$t),R&&R.push(T,C.index,An,-(An+1))}}}function yE(y,_,S,C){const T=tt(null);try{return hi(6,_,S),!1!==S(C)}catch(D){return vf(y,D),!1}finally{hi(7,_,S),tt(T)}}function vE(y,_,S,C,T){return function D(I){if(I===Function)return C;zl(y.componentOffset>-1?bo(y.index,_):_);let A=yE(_,S,C,I),R=D.__ngNextListenerFn__;for(;R;)A=yE(_,S,R,I)&&A,R=R.__ngNextListenerFn__;return T&&!1===A&&I.preventDefault(),A}}function Rr(y=1){return function rx(y){return(en.lFrame.contextLView=function DC(y,_){for(;y>0;)_=_[qa],y--;return _}(y,en.lFrame.contextLView))[Jn]}(y)}function Kf(y){return function Ka(y,_){return y[_]}(function Yk(){return en.lFrame.contextLView}(),an+y)}function ir(y,_=""){const S=ze(),C=_n(),T=y+an,D=C.firstCreatePass?cc(C,T,1,_,null):C.data[T],I=jE(C,S,D,_,y);S[T]=I,bl()&&pf(C,S,I,D),gi(D,!1)}let jE=(y,_,S,C,T)=>(mi(!0),function Zg(y,_){return y.createText(_)}(_[Zt],C));function Ei(y){return Jf("",y,""),Ei}function Jf(y,_,S){const C=ze(),T=function _c(y,_,S,C){return mr(y,Qo(),S)?_+sn(S)+C:cn}(C,y,_,S);return T!==cn&&function es(y,_,S){const C=vl(_,y);!function sb(y,_,S){y.setValue(_,S)}(y[Zt],C,S)}(C,jr(),T),Jf}function hy(y,_,S){TS(_)&&(_=_());const C=ze();return mr(C,Qo(),_)&&ho(_n(),Qn(),C,y,_,C[Zt],S,!1),hy}function py(y,_){const S=ze(),C=_n(),T=Fn();return dy(C,S,S[Zt],T,y,_),py}function gy(y,_,S,C,T){if(y=kt(y),Array.isArray(y))for(let D=0;D<y.length;D++)gy(y[D],_,S,C,T);else{const D=_n(),I=ze(),M=Fn();let A=ra(y)?y:kt(y.provide);const R=uC(y),N=1048575&M.providerIndexes,O=M.directiveStart,F=M.providerIndexes>>20;if(ra(y)||!y.multi){const $=new Sl(R,T,lt),Q=yy(A,_,T?N:N+F,O);-1===Q?(Tg(Hd(M,I),D,A),my(D,y,_.length),_.push(A),M.directiveStart++,M.directiveEnd++,T&&(M.providerIndexes+=1048576),S.push($),I.push($)):(S[Q]=$,I[Q]=$)}else{const $=yy(A,_,N+F,O),Q=yy(A,_,N,N+F),Ce=Q>=0&&S[Q];if(T&&!Ce||!T&&!($>=0&&S[$])){Tg(Hd(M,I),D,A);const Ee=function D2(y,_,S,C,T){const D=new Sl(y,S,lt);return D.multi=[],D.index=_,D.componentProviders=0,QE(D,T,C&&!S),D}(T?E2:T2,S.length,T,C,R);!T&&Ce&&(S[Q].providerFactory=Ee),my(D,y,_.length,0),_.push(A),M.directiveStart++,M.directiveEnd++,T&&(M.providerIndexes+=1048576),S.push(Ee),I.push(Ee)}else my(D,y,$>-1?$:Q,QE(S[T?Q:$],R,!T&&C));!T&&C&&Ce&&S[Q].componentProviders++}}}function my(y,_,S,C){const T=ra(_),D=function gk(y){return!!y.useClass}(_);if(T||D){const A=(D?kt(_.useClass):_).prototype.ngOnDestroy;if(A){const R=y.destroyHooks||(y.destroyHooks=[]);if(!T&&_.multi){const N=R.indexOf(S);-1===N?R.push(S,[C,A]):R[N+1].push(C,A)}else R.push(S,A)}}}function QE(y,_,S){return S&&y.componentProviders++,y.multi.push(_)-1}function yy(y,_,S,C){for(let T=S;T<C;T++)if(_[T]===y)return T;return-1}function T2(y,_,S,C){return vy(this.multi,[])}function E2(y,_,S,C){const T=this.multi;let D;if(this.providerFactory){const I=this.providerFactory.componentProviders,M=ca(S,S[wt],this.providerFactory.index,C);D=M.slice(0,I),vy(T,D);for(let A=I;A<M.length;A++)D.push(M[A])}else D=[],vy(T,D);return D}function vy(y,_){for(let S=0;S<y.length;S++)_.push((0,y[S])());return _}function sr(y,_=[]){return S=>{S.providersResolver=(C,T)=>function S2(y,_,S){const C=_n();if(C.firstCreatePass){const T=Jo(y);gy(S,C.data,C.blueprint,T,!0),gy(_,C.data,C.blueprint,T,!1)}}(C,T?T(y):y,_)}}let I2=(()=>{var y;class _{constructor(C){this._injector=C,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(C){if(!C.standalone)return null;if(!this.cachedInjectors.has(C)){const T=Wp(0,C.type),D=T.length>0?Nf([T],this._injector,"Standalone[".concat(C.type.name,"]")):null;this.cachedInjectors.set(C,D)}return this.cachedInjectors.get(C)}ngOnDestroy(){try{for(const C of this.cachedInjectors.values())null!==C&&C.destroy()}finally{this.cachedInjectors.clear()}}}return(y=_).\u0275prov=At({token:y,providedIn:"environment",factory:()=>new y(Ft(Qr))}),_})();function XE(y){Ci("NgStandalone"),y.getStandaloneInjector=_=>_.get(I2).getOrCreateStandaloneInjector(y)}function _y(y,_,S,C){return function ZE(y,_,S,C,T,D){const I=_+S;return mr(y,I,T)?function wi(y,_,S){return y[_]=S}(y,I+1,D?C.call(D,T):C(T)):function hu(y,_){const S=y[_];return S===cn?void 0:S}(y,I+1)}(ze(),function Yr(){const y=en.lFrame;let _=y.bindingRootIndex;return-1===_&&(_=y.bindingRootIndex=y.tView.bindingStartIndex),_}(),y,_,S,C)}function Xf(y,_){return Cf(y,_)}let _D=(()=>{var y;class _{log(C){console.log(C)}warn(C){console.warn(C)}}return(y=_).\u0275fac=function(C){return new(C||y)},y.\u0275prov=At({token:y,factory:y.\u0275fac,providedIn:"platform"}),_})();const SD=new Mt(""),eh=new Mt("");let My,Dy=(()=>{var y;class _{constructor(C,T,D){this._ngZone=C,this.registry=T,this._pendingCount=0,this._isZoneStable=!0,this._callbacks=[],this.taskTrackingZone=null,My||(function UB(y){My=y}(D),D.addToWindow(T)),this._watchAngularEvents(),C.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Pn.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let C=this._callbacks.pop();clearTimeout(C.timeoutId),C.doneCb()}});else{let C=this.getPendingTasks();this._callbacks=this._callbacks.filter(T=>!T.updateCb||!T.updateCb(C)||(clearTimeout(T.timeoutId),!1))}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(C=>({source:C.source,creationLocation:C.creationLocation,data:C.data})):[]}addCallback(C,T,D){let I=-1;T&&T>0&&(I=setTimeout(()=>{this._callbacks=this._callbacks.filter(M=>M.timeoutId!==I),C()},T)),this._callbacks.push({doneCb:C,timeoutId:I,updateCb:D})}whenStable(C,T,D){if(D&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(C,T,D),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(C){this.registry.registerApplication(C,this)}unregisterApplication(C){this.registry.unregisterApplication(C)}findProviders(C,T,D){return[]}}return(y=_).\u0275fac=function(C){return new(C||y)(Ft(Pn),Ft(Iy),Ft(eh))},y.\u0275prov=At({token:y,factory:y.\u0275fac}),_})(),Iy=(()=>{var y;class _{constructor(){this._applications=new Map}registerApplication(C,T){this._applications.set(C,T)}unregisterApplication(C){this._applications.delete(C)}unregisterAllApplications(){this._applications.clear()}getTestability(C){return this._applications.get(C)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(C,T=!0){var D,I;return null!==(D=null===(I=My)||void 0===I?void 0:I.findTestabilityInTree(this,C,T))&&void 0!==D?D:null}}return(y=_).\u0275fac=function(C){return new(C||y)},y.\u0275prov=At({token:y,factory:y.\u0275fac,providedIn:"platform"}),_})();function vu(y){return!!y&&"function"==typeof y.then}function TD(y){return!!y&&"function"==typeof y.subscribe}const Ay=new Mt("");let Ry=(()=>{var y;class _{constructor(){var C;this.initialized=!1,this.done=!1,this.donePromise=new Promise((T,D)=>{this.resolve=T,this.reject=D}),this.appInits=null!==(C=at(Ay,{optional:!0}))&&void 0!==C?C:[]}runInitializers(){if(this.initialized)return;const C=[];for(const D of this.appInits){const I=D();if(vu(I))C.push(I);else if(TD(I)){const M=new Promise((A,R)=>{I.subscribe({complete:A,error:R})});C.push(M)}}const T=()=>{this.done=!0,this.resolve()};Promise.all(C).then(()=>{T()}).catch(D=>{this.reject(D)}),0===C.length&&T(),this.initialized=!0}}return(y=_).\u0275fac=function(C){return new(C||y)},y.\u0275prov=At({token:y,factory:y.\u0275fac,providedIn:"root"}),_})();const Py=new Mt("");function ID(y,_){return Array.isArray(_)?_.reduce(ID,y):se(se({},y),_)}let Rs=(()=>{var y;class _{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=at(iw),this.afterRenderEffectManager=at(Ql),this.externalTestViews=new Set,this.beforeRender=new fr,this.afterTick=new fr,this.componentTypes=[],this.components=[],this.isStable=at(Is).hasPendingTasks.pipe(k(C=>!C)),this._injector=at(Qr)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(C,T){const D=C instanceof Jb;if(!this._injector.get(Ry).done)throw!D&&function _s(y){const _=gn(y)||Dr(y)||Or(y);return null!==_&&_.standalone}(C),new j(405,!1);let M;M=D?C:this._injector.get(Df).resolveComponentFactory(C),this.componentTypes.push(M.componentType);const A=function VB(y){return y.isBoundToModule}(M)?void 0:this._injector.get(da),N=M.create(Zr.NULL,[],T||M.selector,A),O=N.location.nativeElement,F=N.injector.get(SD,null);return null==F||F.registerApplication(O),N.onDestroy(()=>{this.detachView(N.hostView),th(this.components,N),null==F||F.unregisterApplication(O)}),this._loadComponent(N),N}tick(){this._tick(!0)}_tick(C){if(this._runningTick)throw new j(101,!1);const T=tt(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(C)}catch(D){this.internalErrorHandler(D)}finally{this.afterTick.next(),this._runningTick=!1,tt(T)}}detectChangesInAttachedViews(C){let T=0;const D=this.afterRenderEffectManager;for(;;){if(T===Vb)throw new j(103,!1);if(C){const I=0===T;this.beforeRender.next(I);for(let{_lView:M,notifyErrorHandler:A}of this._views)BB(M,I,A)}if(T++,D.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:I})=>Ny(I))&&(D.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:I})=>Ny(I))))break}}attachView(C){const T=C;this._views.push(T),T.attachToAppRef(this)}detachView(C){const T=C;th(this._views,T),T.detachFromAppRef()}_loadComponent(C){this.attachView(C.hostView),this.tick(),this.components.push(C);const T=this._injector.get(Py,[]);[...this._bootstrapListeners,...T].forEach(D=>D(C))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(C=>C()),this._views.slice().forEach(C=>C.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(C){return this._destroyListeners.push(C),()=>th(this._destroyListeners,C)}destroy(){if(this._destroyed)throw new j(406,!1);const C=this._injector;C.destroy&&!C.destroyed&&C.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return(y=_).\u0275fac=function(C){return new(C||y)},y.\u0275prov=At({token:y,factory:y.\u0275fac,providedIn:"root"}),_})();function th(y,_){const S=y.indexOf(_);S>-1&&y.splice(S,1)}function BB(y,_,S){!_&&!Ny(y)||function $B(y,_,S){let C;S?(C=0,y[Wt]|=1024):C=64&y[Wt]?0:1,_f(y,_,C)}(y,S,_)}function Ny(y){return lg(y)}class HB{constructor(_,S){this.ngModuleFactory=_,this.componentFactories=S}}let MD=(()=>{var y;class _{compileModuleSync(C){return new Hm(C)}compileModuleAsync(C){return Promise.resolve(this.compileModuleSync(C))}compileModuleAndAllComponentsSync(C){const T=this.compileModuleSync(C),I=To(Fr(C).declarations).reduce((M,A)=>{const R=gn(A);return R&&M.push(new Zl(R)),M},[]);return new HB(T,I)}compileModuleAndAllComponentsAsync(C){return Promise.resolve(this.compileModuleAndAllComponentsSync(C))}clearCache(){}clearCacheFor(C){}getModuleId(C){}}return(y=_).\u0275fac=function(C){return new(C||y)},y.\u0275prov=At({token:y,factory:y.\u0275fac,providedIn:"root"}),_})(),WB=(()=>{var y;class _{constructor(){this.zone=at(Pn),this.applicationRef=at(Rs)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){var C;null===(C=this._onMicrotaskEmptySubscription)||void 0===C||C.unsubscribe()}}return(y=_).\u0275fac=function(C){return new(C||y)},y.\u0275prov=At({token:y,factory:y.\u0275fac,providedIn:"root"}),_})();function GB(){const y=at(Pn),_=at(vi);return S=>y.runOutsideAngular(()=>_.handleError(S))}let JB=(()=>{var y;class _{constructor(){this.subscription=new Ze,this.initialized=!1,this.zone=at(Pn),this.pendingTasks=at(Is)}initialize(){if(this.initialized)return;this.initialized=!0;let C=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(C=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Pn.assertNotInAngularZone(),queueMicrotask(()=>{null!==C&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(C),C=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Pn.assertInAngularZone(),null!=C||(C=this.pendingTasks.add())}))}ngOnDestroy(){this.subscription.unsubscribe()}}return(y=_).\u0275fac=function(C){return new(C||y)},y.\u0275prov=At({token:y,factory:y.\u0275fac,providedIn:"root"}),_})();const rs=new Mt("",{providedIn:"root",factory:()=>at(rs,vn.Optional|vn.SkipSelf)||function QB(){return typeof $localize<"u"&&$localize.locale||Pc}()}),Oy=new Mt("");let ND=(()=>{var y;class _{constructor(C){this._injector=C,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(C,T){const D=function RL(y="zone.js",_){return"noop"===y?new tS:"zone.js"===y?new Pn(_):y}(null==T?void 0:T.ngZone,function PD(y){var _,S;return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:null!==(_=null==y?void 0:y.eventCoalescing)&&void 0!==_&&_,shouldCoalesceRunChangeDetection:null!==(S=null==y?void 0:y.runCoalescing)&&void 0!==S&&S}}({eventCoalescing:null==T?void 0:T.ngZoneEventCoalescing,runCoalescing:null==T?void 0:T.ngZoneRunCoalescing}));return D.run(()=>{const I=function bU(y,_,S){return new $m(y,_,S)}(C.moduleType,this.injector,function RD(y){return[{provide:Pn,useFactory:y},{provide:na,multi:!0,useFactory:()=>{const _=at(WB,{optional:!0});return()=>_.initialize()}},{provide:na,multi:!0,useFactory:()=>{const _=at(JB);return()=>{_.initialize()}}},{provide:iw,useFactory:GB}]}(()=>D)),M=I.injector.get(vi,null);return D.runOutsideAngular(()=>{const A=D.onError.subscribe({next:R=>{M.handleError(R)}});I.onDestroy(()=>{th(this._modules,I),A.unsubscribe()})}),function DD(y,_,S){try{const C=S();return vu(C)?C.catch(T=>{throw _.runOutsideAngular(()=>y.handleError(T)),T}):C}catch(C){throw _.runOutsideAngular(()=>y.handleError(C)),C}}(M,D,()=>{const A=I.injector.get(Ry);return A.runInitializers(),A.donePromise.then(()=>(function qT(y){"string"==typeof y&&(zT=y.toLowerCase().replace(/_/g,"-"))}(I.injector.get(rs,Pc)||Pc),this._moduleDoBootstrap(I),I))})})}bootstrapModule(C,T=[]){const D=ID({},T);return function qB(y,_,S){const C=new Hm(S);return Promise.resolve(C)}(0,0,C).then(I=>this.bootstrapModuleFactory(I,D))}_moduleDoBootstrap(C){const T=C.injector.get(Rs);if(C._bootstrapComponents.length>0)C._bootstrapComponents.forEach(D=>T.bootstrap(D));else{if(!C.instance.ngDoBootstrap)throw new j(-403,!1);C.instance.ngDoBootstrap(T)}this._modules.push(C)}onDestroy(C){this._destroyListeners.push(C)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new j(404,!1);this._modules.slice().forEach(T=>T.destroy()),this._destroyListeners.forEach(T=>T());const C=this._injector.get(Oy,null);C&&(C.forEach(T=>T()),C.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return(y=_).\u0275fac=function(C){return new(C||y)(Ft(Zr))},y.\u0275prov=At({token:y,factory:y.\u0275fac,providedIn:"platform"}),_})(),Ps=null;const OD=new Mt("");function kD(y,_,S=[]){const C="Platform: ".concat(_),T=new Mt(C);return(D=[])=>{let I=ky();if(!I||I.injector.get(OD,!1)){const M=[...S,...D,{provide:T,useValue:!0}];y?y(M):function ZB(y){if(Ps&&!Ps.get(OD,!1))throw new j(400,!1);(function ED(){!function ie(y){K=y}(()=>{throw new j(600,!1)})})(),Ps=y;const _=y.get(ND);(function FD(y){const _=y.get(Iw,null);null==_||_.forEach(S=>S())})(y)}(function xD(y=[],_){return Zr.create({name:_,providers:[{provide:Jp,useValue:"platform"},{provide:Oy,useValue:new Set([()=>Ps=null])},...y]})}(M,C))}return function e$(y){const _=ky();if(!_)throw new j(401,!1);return _}()}}function ky(){var y,_;return null!==(y=null===(_=Ps)||void 0===_?void 0:_.get(ND))&&void 0!==y?y:null}let _u=(()=>{class _{}return _.__NG_ELEMENT_ID__=n$,_})();function n$(y){return function r$(y,_,S){if(ia(y)&&!S){const C=bo(y.index,_);return new ql(C,C)}return 47&y.type?new ql(_[cr],_):null}(Fn(),ze(),!(16&~y))}class BD{constructor(){}supports(_){return kf(_)}create(_){return new c$(_)}}const a$=(y,_)=>_;class c${constructor(_){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=_||a$}forEachItem(_){let S;for(S=this._itHead;null!==S;S=S._next)_(S)}forEachOperation(_){let S=this._itHead,C=this._removalsHead,T=0,D=null;for(;S||C;){const I=!C||S&&S.currentIndex<HD(C,T,D)?S:C,M=HD(I,T,D),A=I.currentIndex;if(I===C)T--,C=C._nextRemoved;else if(S=S._next,null==I.previousIndex)T++;else{D||(D=[]);const R=M-T,N=A-T;if(R!=N){for(let F=0;F<R;F++){const $=F<D.length?D[F]:D[F]=0,Q=$+F;N<=Q&&Q<R&&(D[F]=$+1)}D[I.previousIndex]=N-R}}M!==A&&_(I,M,A)}}forEachPreviousItem(_){let S;for(S=this._previousItHead;null!==S;S=S._nextPrevious)_(S)}forEachAddedItem(_){let S;for(S=this._additionsHead;null!==S;S=S._nextAdded)_(S)}forEachMovedItem(_){let S;for(S=this._movesHead;null!==S;S=S._nextMoved)_(S)}forEachRemovedItem(_){let S;for(S=this._removalsHead;null!==S;S=S._nextRemoved)_(S)}forEachIdentityChange(_){let S;for(S=this._identityChangesHead;null!==S;S=S._nextIdentityChange)_(S)}diff(_){if(null==_&&(_=[]),!kf(_))throw new j(900,!1);return this.check(_)?this:null}onDestroy(){}check(_){this._reset();let T,D,I,S=this._itHead,C=!1;if(Array.isArray(_)){this.length=_.length;for(let M=0;M<this.length;M++)D=_[M],I=this._trackByFn(M,D),null!==S&&Object.is(S.trackById,I)?(C&&(S=this._verifyReinsertion(S,D,I,M)),Object.is(S.item,D)||this._addIdentityChange(S,D)):(S=this._mismatch(S,D,I,M),C=!0),S=S._next}else T=0,function DU(y,_){if(Array.isArray(y))for(let S=0;S<y.length;S++)_(y[S]);else{const S=y[Symbol.iterator]();let C;for(;!(C=S.next()).done;)_(C.value)}}(_,M=>{I=this._trackByFn(T,M),null!==S&&Object.is(S.trackById,I)?(C&&(S=this._verifyReinsertion(S,M,I,T)),Object.is(S.item,M)||this._addIdentityChange(S,M)):(S=this._mismatch(S,M,I,T),C=!0),S=S._next,T++}),this.length=T;return this._truncate(S),this.collection=_,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let _;for(_=this._previousItHead=this._itHead;null!==_;_=_._next)_._nextPrevious=_._next;for(_=this._additionsHead;null!==_;_=_._nextAdded)_.previousIndex=_.currentIndex;for(this._additionsHead=this._additionsTail=null,_=this._movesHead;null!==_;_=_._nextMoved)_.previousIndex=_.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(_,S,C,T){let D;return null===_?D=this._itTail:(D=_._prev,this._remove(_)),null!==(_=null===this._unlinkedRecords?null:this._unlinkedRecords.get(C,null))?(Object.is(_.item,S)||this._addIdentityChange(_,S),this._reinsertAfter(_,D,T)):null!==(_=null===this._linkedRecords?null:this._linkedRecords.get(C,T))?(Object.is(_.item,S)||this._addIdentityChange(_,S),this._moveAfter(_,D,T)):_=this._addAfter(new l$(S,C),D,T),_}_verifyReinsertion(_,S,C,T){let D=null===this._unlinkedRecords?null:this._unlinkedRecords.get(C,null);return null!==D?_=this._reinsertAfter(D,_._prev,T):_.currentIndex!=T&&(_.currentIndex=T,this._addToMoves(_,T)),_}_truncate(_){for(;null!==_;){const S=_._next;this._addToRemovals(this._unlink(_)),_=S}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(_,S,C){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(_);const T=_._prevRemoved,D=_._nextRemoved;return null===T?this._removalsHead=D:T._nextRemoved=D,null===D?this._removalsTail=T:D._prevRemoved=T,this._insertAfter(_,S,C),this._addToMoves(_,C),_}_moveAfter(_,S,C){return this._unlink(_),this._insertAfter(_,S,C),this._addToMoves(_,C),_}_addAfter(_,S,C){return this._insertAfter(_,S,C),this._additionsTail=null===this._additionsTail?this._additionsHead=_:this._additionsTail._nextAdded=_,_}_insertAfter(_,S,C){const T=null===S?this._itHead:S._next;return _._next=T,_._prev=S,null===T?this._itTail=_:T._prev=_,null===S?this._itHead=_:S._next=_,null===this._linkedRecords&&(this._linkedRecords=new $D),this._linkedRecords.put(_),_.currentIndex=C,_}_remove(_){return this._addToRemovals(this._unlink(_))}_unlink(_){null!==this._linkedRecords&&this._linkedRecords.remove(_);const S=_._prev,C=_._next;return null===S?this._itHead=C:S._next=C,null===C?this._itTail=S:C._prev=S,_}_addToMoves(_,S){return _.previousIndex===S||(this._movesTail=null===this._movesTail?this._movesHead=_:this._movesTail._nextMoved=_),_}_addToRemovals(_){return null===this._unlinkedRecords&&(this._unlinkedRecords=new $D),this._unlinkedRecords.put(_),_.currentIndex=null,_._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=_,_._prevRemoved=null):(_._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=_),_}_addIdentityChange(_,S){return _.item=S,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=_:this._identityChangesTail._nextIdentityChange=_,_}}class l${constructor(_,S){this.item=_,this.trackById=S,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class u${constructor(){this._head=null,this._tail=null}add(_){null===this._head?(this._head=this._tail=_,_._nextDup=null,_._prevDup=null):(this._tail._nextDup=_,_._prevDup=this._tail,_._nextDup=null,this._tail=_)}get(_,S){let C;for(C=this._head;null!==C;C=C._nextDup)if((null===S||S<=C.currentIndex)&&Object.is(C.trackById,_))return C;return null}remove(_){const S=_._prevDup,C=_._nextDup;return null===S?this._head=C:S._nextDup=C,null===C?this._tail=S:C._prevDup=S,null===this._head}}class $D{constructor(){this.map=new Map}put(_){const S=_.trackById;let C=this.map.get(S);C||(C=new u$,this.map.set(S,C)),C.add(_)}get(_,S){const T=this.map.get(_);return T?T.get(_,S):null}remove(_){const S=_.trackById;return this.map.get(S).remove(_)&&this.map.delete(S),_}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function HD(y,_,S){const C=y.previousIndex;if(null===C)return C;let T=0;return S&&C<S.length&&(T=S[C]),C+_+T}function qD(){return new Vy([new BD])}let Vy=(()=>{var y;class _{constructor(C){this.factories=C}static create(C,T){if(null!=T){const D=T.factories.slice();C=C.concat(D)}return new _(C)}static extend(C){return{provide:_,useFactory:T=>_.create(C,T||qD()),deps:[[_,new Td,new Sd]]}}find(C){const T=this.factories.find(D=>D.supports(C));if(null!=T)return T;throw new j(901,!1)}}return(y=_).\u0275prov=At({token:y,providedIn:"root",factory:qD}),_})();const g$=kD(null,"core",[]);let m$=(()=>{var y;class _{constructor(C){}}return(y=_).\u0275fac=function(C){return new(C||y)(Ft(Rs))},y.\u0275mod=Wo({type:y}),y.\u0275inj=Po({}),_})();let bu=null;function Ns(){return bu}class Z${}const go=new Mt("");let $y=(()=>{var y;class _{historyGo(C){throw new Error("")}}return(y=_).\u0275fac=function(C){return new(C||y)},y.\u0275prov=At({token:y,factory:()=>at(tH),providedIn:"platform"}),_})();const eH=new Mt("");let tH=(()=>{var y;class _ extends $y{constructor(){super(),this._doc=at(go),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Ns().getBaseHref(this._doc)}onPopState(C){const T=Ns().getGlobalEventTarget(this._doc,"window");return T.addEventListener("popstate",C,!1),()=>T.removeEventListener("popstate",C)}onHashChange(C){const T=Ns().getGlobalEventTarget(this._doc,"window");return T.addEventListener("hashchange",C,!1),()=>T.removeEventListener("hashchange",C)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(C){this._location.pathname=C}pushState(C,T,D){this._history.pushState(C,T,D)}replaceState(C,T,D){this._history.replaceState(C,T,D)}forward(){this._history.forward()}back(){this._history.back()}historyGo(C=0){this._history.go(C)}getState(){return this._history.state}}return(y=_).\u0275fac=function(C){return new(C||y)},y.\u0275prov=At({token:y,factory:()=>new y,providedIn:"platform"}),_})();function Hy(y,_){if(0==y.length)return _;if(0==_.length)return y;let S=0;return y.endsWith("/")&&S++,_.startsWith("/")&&S++,2==S?y+_.substring(1):1==S?y+_:y+"/"+_}function gI(y){const _=y.match(/#|\?|$/),S=_&&_.index||y.length;return y.slice(0,S-("/"===y[S-1]?1:0))+y.slice(S)}function os(y){return y&&"?"!==y[0]?"?"+y:y}let _a=(()=>{var y;class _{historyGo(C){throw new Error("")}}return(y=_).\u0275fac=function(C){return new(C||y)},y.\u0275prov=At({token:y,factory:()=>at(yI),providedIn:"root"}),_})();const mI=new Mt("");let yI=(()=>{var y;class _ extends _a{constructor(C,T){var D,I,M;super(),this._platformLocation=C,this._removeListenerFns=[],this._baseHref=null!==(D=null!==(I=null!=T?T:this._platformLocation.getBaseHrefFromDOM())&&void 0!==I?I:null===(M=at(go).location)||void 0===M?void 0:M.origin)&&void 0!==D?D:""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(C){this._removeListenerFns.push(this._platformLocation.onPopState(C),this._platformLocation.onHashChange(C))}getBaseHref(){return this._baseHref}prepareExternalUrl(C){return Hy(this._baseHref,C)}path(C=!1){const T=this._platformLocation.pathname+os(this._platformLocation.search),D=this._platformLocation.hash;return D&&C?"".concat(T).concat(D):T}pushState(C,T,D,I){const M=this.prepareExternalUrl(D+os(I));this._platformLocation.pushState(C,T,M)}replaceState(C,T,D,I){const M=this.prepareExternalUrl(D+os(I));this._platformLocation.replaceState(C,T,M)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(C=0){var T,D;null===(T=(D=this._platformLocation).historyGo)||void 0===T||T.call(D,C)}}return(y=_).\u0275fac=function(C){return new(C||y)(Ft($y),Ft(mI,8))},y.\u0275prov=At({token:y,factory:y.\u0275fac,providedIn:"root"}),_})(),nH=(()=>{var y;class _ extends _a{constructor(C,T){super(),this._platformLocation=C,this._baseHref="",this._removeListenerFns=[],null!=T&&(this._baseHref=T)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(C){this._removeListenerFns.push(this._platformLocation.onPopState(C),this._platformLocation.onHashChange(C))}getBaseHref(){return this._baseHref}path(C=!1){var T;const D=null!==(T=this._platformLocation.hash)&&void 0!==T?T:"#";return D.length>0?D.substring(1):D}prepareExternalUrl(C){const T=Hy(this._baseHref,C);return T.length>0?"#"+T:T}pushState(C,T,D,I){let M=this.prepareExternalUrl(D+os(I));0==M.length&&(M=this._platformLocation.pathname),this._platformLocation.pushState(C,T,M)}replaceState(C,T,D,I){let M=this.prepareExternalUrl(D+os(I));0==M.length&&(M=this._platformLocation.pathname),this._platformLocation.replaceState(C,T,M)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(C=0){var T,D;null===(T=(D=this._platformLocation).historyGo)||void 0===T||T.call(D,C)}}return(y=_).\u0275fac=function(C){return new(C||y)(Ft($y),Ft(mI,8))},y.\u0275prov=At({token:y,factory:y.\u0275fac}),_})(),Su=(()=>{var y;class _{constructor(C){this._subject=new Hn,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=C;const T=this._locationStrategy.getBaseHref();this._basePath=function iH(y){if(new RegExp("^(https?:)?//").test(y)){const[,S]=y.split(/\/\/[^\/]+/);return S}return y}(gI(vI(T))),this._locationStrategy.onPopState(D=>{this._subject.emit({url:this.path(!0),pop:!0,state:D.state,type:D.type})})}ngOnDestroy(){var C;null===(C=this._urlChangeSubscription)||void 0===C||C.unsubscribe(),this._urlChangeListeners=[]}path(C=!1){return this.normalize(this._locationStrategy.path(C))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(C,T=""){return this.path()==this.normalize(C+os(T))}normalize(C){return _.stripTrailingSlash(function oH(y,_){if(!y||!_.startsWith(y))return _;const S=_.substring(y.length);return""===S||["/",";","?","#"].includes(S[0])?S:_}(this._basePath,vI(C)))}prepareExternalUrl(C){return C&&"/"!==C[0]&&(C="/"+C),this._locationStrategy.prepareExternalUrl(C)}go(C,T="",D=null){this._locationStrategy.pushState(D,"",C,T),this._notifyUrlChangeListeners(this.prepareExternalUrl(C+os(T)),D)}replaceState(C,T="",D=null){this._locationStrategy.replaceState(D,"",C,T),this._notifyUrlChangeListeners(this.prepareExternalUrl(C+os(T)),D)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(C=0){var T,D;null===(T=(D=this._locationStrategy).historyGo)||void 0===T||T.call(D,C)}onUrlChange(C){var T;return this._urlChangeListeners.push(C),null!==(T=this._urlChangeSubscription)&&void 0!==T||(this._urlChangeSubscription=this.subscribe(D=>{this._notifyUrlChangeListeners(D.url,D.state)})),()=>{const D=this._urlChangeListeners.indexOf(C);var I;this._urlChangeListeners.splice(D,1),0===this._urlChangeListeners.length&&(null===(I=this._urlChangeSubscription)||void 0===I||I.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(C="",T){this._urlChangeListeners.forEach(D=>D(C,T))}subscribe(C,T,D){return this._subject.subscribe({next:C,error:T,complete:D})}}return(y=_).normalizeQueryParams=os,y.joinWithSlash=Hy,y.stripTrailingSlash=gI,y.\u0275fac=function(C){return new(C||y)(Ft(_a))},y.\u0275prov=At({token:y,factory:()=>function rH(){return new Su(Ft(_a))}(),providedIn:"root"}),_})();function vI(y){return y.replace(/\/index.html$/,"")}function II(y,_){_=encodeURIComponent(_);for(const S of y.split(";")){const C=S.indexOf("="),[T,D]=-1==C?[S,""]:[S.slice(0,C),S.slice(C+1)];if(T.trim()===_)return decodeURIComponent(D)}return null}const Zy=/\s+/,MI=[];let Ch=(()=>{var y;class _{constructor(C,T){this._ngEl=C,this._renderer=T,this.initialClasses=MI,this.stateMap=new Map}set klass(C){this.initialClasses=null!=C?C.trim().split(Zy):MI}set ngClass(C){this.rawClass="string"==typeof C?C.trim().split(Zy):C}ngDoCheck(){for(const T of this.initialClasses)this._updateState(T,!0);const C=this.rawClass;if(Array.isArray(C)||C instanceof Set)for(const T of C)this._updateState(T,!0);else if(null!=C)for(const T of Object.keys(C))this._updateState(T,!!C[T]);this._applyStateDiff()}_updateState(C,T){const D=this.stateMap.get(C);void 0!==D?(D.enabled!==T&&(D.changed=!0,D.enabled=T),D.touched=!0):this.stateMap.set(C,{enabled:T,changed:!0,touched:!0})}_applyStateDiff(){for(const C of this.stateMap){const T=C[0],D=C[1];D.changed?(this._toggleClass(T,D.enabled),D.changed=!1):D.touched||(D.enabled&&this._toggleClass(T,!1),this.stateMap.delete(T)),D.touched=!1}}_toggleClass(C,T){(C=C.trim()).length>0&&C.split(Zy).forEach(D=>{T?this._renderer.addClass(this._ngEl.nativeElement,D):this._renderer.removeClass(this._ngEl.nativeElement,D)})}}return(y=_).\u0275fac=function(C){return new(C||y)(lt(So),lt(ns))},y.\u0275dir=rn({type:y,selectors:[["","ngClass",""]],inputs:{klass:[tr.None,"class","klass"],ngClass:"ngClass"},standalone:!0}),_})();class zH{constructor(_,S,C,T){this.$implicit=_,this.ngForOf=S,this.index=C,this.count=T}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ev=(()=>{var y;class _{set ngForOf(C){this._ngForOf=C,this._ngForOfDirty=!0}set ngForTrackBy(C){this._trackByFn=C}get ngForTrackBy(){return this._trackByFn}constructor(C,T,D){this._viewContainer=C,this._template=T,this._differs=D,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(C){C&&(this._template=C)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const C=this._ngForOf;!this._differ&&C&&(this._differ=this._differs.find(C).create(this.ngForTrackBy))}if(this._differ){const C=this._differ.diff(this._ngForOf);C&&this._applyChanges(C)}}_applyChanges(C){const T=this._viewContainer;C.forEachOperation((D,I,M)=>{if(null==D.previousIndex)T.createEmbeddedView(this._template,new zH(D.item,this._ngForOf,-1,-1),null===M?void 0:M);else if(null==M)T.remove(null===I?void 0:I);else if(null!==I){const A=T.get(I);T.move(A,M),RI(A,D)}});for(let D=0,I=T.length;D<I;D++){const A=T.get(D).context;A.index=D,A.count=I,A.ngForOf=this._ngForOf}C.forEachIdentityChange(D=>{RI(T.get(D.currentIndex),D)})}static ngTemplateContextGuard(C,T){return!0}}return(y=_).\u0275fac=function(C){return new(C||y)(lt(Yo),lt(ts),lt(Vy))},y.\u0275dir=rn({type:y,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),_})();function RI(y,_){y.context.$implicit=_.item}let Lc=(()=>{var y;class _{constructor(C,T){this._viewContainer=C,this._context=new qH,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=T}set ngIf(C){this._context.$implicit=this._context.ngIf=C,this._updateView()}set ngIfThen(C){PI("ngIfThen",C),this._thenTemplateRef=C,this._thenViewRef=null,this._updateView()}set ngIfElse(C){PI("ngIfElse",C),this._elseTemplateRef=C,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(C,T){return!0}}return(y=_).\u0275fac=function(C){return new(C||y)(lt(Yo),lt(ts))},y.\u0275dir=rn({type:y,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),_})();class qH{constructor(){this.$implicit=null,this.ngIf=null}}function PI(y,_){if(_&&!_.createEmbeddedView)throw new Error("".concat(y," must be a TemplateRef, but received '").concat(xt(_),"'."))}let y3=(()=>{var y;class _{}return(y=_).\u0275fac=function(C){return new(C||y)},y.\u0275mod=Wo({type:y}),y.\u0275inj=Po({}),_})();const kI="browser";function xI(y){return"server"===y}let b3=(()=>{var y;class _{}return(y=_).\u0275prov=At({token:y,providedIn:"root",factory:()=>function w3(y){return y===kI}(at(bs))?new S3(at(go),window):new E3}),_})();class S3{constructor(_,S){this.document=_,this.window=S,this.offset=()=>[0,0]}setOffset(_){this.offset=Array.isArray(_)?()=>_:_}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(_){this.window.scrollTo(_[0],_[1])}scrollToAnchor(_){const S=function T3(y,_){const S=y.getElementById(_)||y.getElementsByName(_)[0];if(S)return S;if("function"==typeof y.createTreeWalker&&y.body&&"function"==typeof y.body.attachShadow){const C=y.createTreeWalker(y.body,NodeFilter.SHOW_ELEMENT);let T=C.currentNode;for(;T;){const D=T.shadowRoot;if(D){const I=D.getElementById(_)||D.querySelector('[name="'.concat(_,'"]'));if(I)return I}T=C.nextNode()}}return null}(this.document,_);S&&(this.scrollToElement(S),S.focus())}setHistoryScrollRestoration(_){this.window.history.scrollRestoration=_}scrollToElement(_){const S=_.getBoundingClientRect(),C=S.left+this.window.pageXOffset,T=S.top+this.window.pageYOffset,D=this.offset();this.window.scrollTo(C-D[0],T-D[1])}}class E3{setOffset(_){}getScrollPosition(){return[0,0]}scrollToPosition(_){}scrollToAnchor(_){}setHistoryScrollRestoration(_){}}class FI{}class Z3 extends Z${constructor(){super(...arguments),this.supportsDOMEvents=!0}}class sv extends Z3{static makeCurrent(){!function Y$(y){null!=bu||(bu=y)}(new sv)}onAndCancel(_,S,C){return _.addEventListener(S,C),()=>{_.removeEventListener(S,C)}}dispatchEvent(_,S){_.dispatchEvent(S)}remove(_){_.parentNode&&_.parentNode.removeChild(_)}createElement(_,S){return(S=S||this.getDefaultDocument()).createElement(_)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(_){return _.nodeType===Node.ELEMENT_NODE}isShadowRoot(_){return _ instanceof DocumentFragment}getGlobalEventTarget(_,S){return"window"===S?window:"document"===S?_:"body"===S?_.body:null}getBaseHref(_){const S=function ez(){return Mu=Mu||document.querySelector("base"),Mu?Mu.getAttribute("href"):null}();return null==S?null:function tz(y){return new URL(y,document.baseURI).pathname}(S)}resetBaseElement(){Mu=null}getUserAgent(){return window.navigator.userAgent}getCookie(_){return II(document.cookie,_)}}let Mu=null,rz=(()=>{var y;class _{build(){return new XMLHttpRequest}}return(y=_).\u0275fac=function(C){return new(C||y)},y.\u0275prov=At({token:y,factory:y.\u0275fac}),_})();const av=new Mt("");let qI=(()=>{var y;class _{constructor(C,T){this._zone=T,this._eventNameToPlugin=new Map,C.forEach(D=>{D.manager=this}),this._plugins=C.slice().reverse()}addEventListener(C,T,D){return this._findPluginFor(T).addEventListener(C,T,D)}getZone(){return this._zone}_findPluginFor(C){let T=this._eventNameToPlugin.get(C);if(T)return T;if(T=this._plugins.find(I=>I.supports(C)),!T)throw new j(5101,!1);return this._eventNameToPlugin.set(C,T),T}}return(y=_).\u0275fac=function(C){return new(C||y)(Ft(av),Ft(Pn))},y.\u0275prov=At({token:y,factory:y.\u0275fac}),_})();class WI{constructor(_){this._doc=_}}const cv="ng-app-id";let GI=(()=>{var y;class _{constructor(C,T,D,I={}){this.doc=C,this.appId=T,this.nonce=D,this.platformId=I,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=xI(I),this.resetHostNodes()}addStyles(C){for(const T of C)1===this.changeUsageCount(T,1)&&this.onStyleAdded(T)}removeStyles(C){for(const T of C)this.changeUsageCount(T,-1)<=0&&this.onStyleRemoved(T)}ngOnDestroy(){const C=this.styleNodesInDOM;C&&(C.forEach(T=>T.remove()),C.clear());for(const T of this.getAllStyles())this.onStyleRemoved(T);this.resetHostNodes()}addHost(C){this.hostNodes.add(C);for(const T of this.getAllStyles())this.addStyleToHost(C,T)}removeHost(C){this.hostNodes.delete(C)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(C){for(const T of this.hostNodes)this.addStyleToHost(T,C)}onStyleRemoved(C){var T;const D=this.styleRef;null===(T=D.get(C))||void 0===T||null===(T=T.elements)||void 0===T||T.forEach(I=>I.remove()),D.delete(C)}collectServerRenderedStyles(){var C;const T=null===(C=this.doc.head)||void 0===C?void 0:C.querySelectorAll("style[".concat(cv,'="').concat(this.appId,'"]'));if(null!=T&&T.length){const D=new Map;return T.forEach(I=>{null!=I.textContent&&D.set(I.textContent,I)}),D}return null}changeUsageCount(C,T){const D=this.styleRef;if(D.has(C)){const I=D.get(C);return I.usage+=T,I.usage}return D.set(C,{usage:T,elements:[]}),T}getStyleElement(C,T){const D=this.styleNodesInDOM,I=null==D?void 0:D.get(T);if((null==I?void 0:I.parentNode)===C)return D.delete(T),I.removeAttribute(cv),I;{const M=this.doc.createElement("style");return this.nonce&&M.setAttribute("nonce",this.nonce),M.textContent=T,this.platformIsServer&&M.setAttribute(cv,this.appId),C.appendChild(M),M}}addStyleToHost(C,T){var D;const I=this.getStyleElement(C,T),M=this.styleRef,A=null===(D=M.get(T))||void 0===D?void 0:D.elements;A?A.push(I):M.set(T,{elements:[I],usage:1})}resetHostNodes(){const C=this.hostNodes;C.clear(),C.add(this.doc.head)}}return(y=_).\u0275fac=function(C){return new(C||y)(Ft(go),Ft(Qd),Ft(Aw,8),Ft(bs))},y.\u0275prov=At({token:y,factory:y.\u0275fac}),_})();const lv={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},uv=/%COMP%/g,oz="_nghost-".concat("%COMP%"),iz="_ngcontent-".concat("%COMP%"),az=new Mt("",{providedIn:"root",factory:()=>!0});function JI(y,_){return _.map(S=>S.replace(uv,y))}let dv=(()=>{var y;class _{constructor(C,T,D,I,M,A,R,N=null){this.eventManager=C,this.sharedStylesHost=T,this.appId=D,this.removeStylesOnCompDestroy=I,this.doc=M,this.platformId=A,this.ngZone=R,this.nonce=N,this.rendererByCompId=new Map,this.platformIsServer=xI(A),this.defaultRenderer=new fv(C,M,R,this.platformIsServer)}createRenderer(C,T){if(!C||!T)return this.defaultRenderer;this.platformIsServer&&T.encapsulation===zo.ShadowDom&&(T=se(se({},T),{},{encapsulation:zo.Emulated}));const D=this.getOrCreateRenderer(C,T);return D instanceof XI?D.applyToHost(C):D instanceof hv&&D.applyStyles(),D}getOrCreateRenderer(C,T){const D=this.rendererByCompId;let I=D.get(T.id);if(!I){const M=this.doc,A=this.ngZone,R=this.eventManager,N=this.sharedStylesHost,O=this.removeStylesOnCompDestroy,F=this.platformIsServer;switch(T.encapsulation){case zo.Emulated:I=new XI(R,N,T,this.appId,O,M,A,F);break;case zo.ShadowDom:return new dz(R,N,C,T,M,A,this.nonce,F);default:I=new hv(R,N,T,O,M,A,F)}D.set(T.id,I)}return I}ngOnDestroy(){this.rendererByCompId.clear()}}return(y=_).\u0275fac=function(C){return new(C||y)(Ft(qI),Ft(GI),Ft(Qd),Ft(az),Ft(go),Ft(bs),Ft(Pn),Ft(Aw))},y.\u0275prov=At({token:y,factory:y.\u0275fac}),_})();class fv{constructor(_,S,C,T){this.eventManager=_,this.doc=S,this.ngZone=C,this.platformIsServer=T,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(_,S){return S?this.doc.createElementNS(lv[S]||S,_):this.doc.createElement(_)}createComment(_){return this.doc.createComment(_)}createText(_){return this.doc.createTextNode(_)}appendChild(_,S){(QI(_)?_.content:_).appendChild(S)}insertBefore(_,S,C){_&&(QI(_)?_.content:_).insertBefore(S,C)}removeChild(_,S){_&&_.removeChild(S)}selectRootElement(_,S){let C="string"==typeof _?this.doc.querySelector(_):_;if(!C)throw new j(-5104,!1);return S||(C.textContent=""),C}parentNode(_){return _.parentNode}nextSibling(_){return _.nextSibling}setAttribute(_,S,C,T){if(T){S=T+":"+S;const D=lv[T];D?_.setAttributeNS(D,S,C):_.setAttribute(S,C)}else _.setAttribute(S,C)}removeAttribute(_,S,C){if(C){const T=lv[C];T?_.removeAttributeNS(T,S):_.removeAttribute("".concat(C,":").concat(S))}else _.removeAttribute(S)}addClass(_,S){_.classList.add(S)}removeClass(_,S){_.classList.remove(S)}setStyle(_,S,C,T){T&(Ts.DashCase|Ts.Important)?_.style.setProperty(S,C,T&Ts.Important?"important":""):_.style[S]=C}removeStyle(_,S,C){C&Ts.DashCase?_.style.removeProperty(S):_.style[S]=""}setProperty(_,S,C){null!=_&&(_[S]=C)}setValue(_,S){_.nodeValue=S}listen(_,S,C){if("string"==typeof _&&!(_=Ns().getGlobalEventTarget(this.doc,_)))throw new Error("Unsupported event target ".concat(_," for event ").concat(S));return this.eventManager.addEventListener(_,S,this.decoratePreventDefault(C))}decoratePreventDefault(_){return S=>{if("__ngUnwrap__"===S)return _;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>_(S)):_(S))&&S.preventDefault()}}}function QI(y){return"TEMPLATE"===y.tagName&&void 0!==y.content}class dz extends fv{constructor(_,S,C,T,D,I,M,A){super(_,D,I,A),this.sharedStylesHost=S,this.hostEl=C,this.shadowRoot=C.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const R=JI(T.id,T.styles);for(const N of R){const O=document.createElement("style");M&&O.setAttribute("nonce",M),O.textContent=N,this.shadowRoot.appendChild(O)}}nodeOrShadowRoot(_){return _===this.hostEl?this.shadowRoot:_}appendChild(_,S){return super.appendChild(this.nodeOrShadowRoot(_),S)}insertBefore(_,S,C){return super.insertBefore(this.nodeOrShadowRoot(_),S,C)}removeChild(_,S){return super.removeChild(this.nodeOrShadowRoot(_),S)}parentNode(_){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(_)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class hv extends fv{constructor(_,S,C,T,D,I,M,A){super(_,D,I,M),this.sharedStylesHost=S,this.removeStylesOnCompDestroy=T,this.styles=A?JI(A,C.styles):C.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class XI extends hv{constructor(_,S,C,T,D,I,M,A){const R=T+"-"+C.id;super(_,S,C,D,I,M,A,R),this.contentAttr=function cz(y){return iz.replace(uv,y)}(R),this.hostAttr=function lz(y){return oz.replace(uv,y)}(R)}applyToHost(_){this.applyStyles(),this.setAttribute(_,this.hostAttr,"")}createElement(_,S){const C=super.createElement(_,S);return super.setAttribute(C,this.contentAttr,""),C}}let fz=(()=>{var y;class _ extends WI{constructor(C){super(C)}supports(C){return!0}addEventListener(C,T,D){return C.addEventListener(T,D,!1),()=>this.removeEventListener(C,T,D)}removeEventListener(C,T,D){return C.removeEventListener(T,D)}}return(y=_).\u0275fac=function(C){return new(C||y)(Ft(go))},y.\u0275prov=At({token:y,factory:y.\u0275fac}),_})();const YI=["alt","control","meta","shift"],hz={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},pz={alt:y=>y.altKey,control:y=>y.ctrlKey,meta:y=>y.metaKey,shift:y=>y.shiftKey};let gz=(()=>{var y;class _ extends WI{constructor(C){super(C)}supports(C){return null!=_.parseEventName(C)}addEventListener(C,T,D){const I=_.parseEventName(T),M=_.eventCallback(I.fullKey,D,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Ns().onAndCancel(C,I.domEventName,M))}static parseEventName(C){const T=C.toLowerCase().split("."),D=T.shift();if(0===T.length||"keydown"!==D&&"keyup"!==D)return null;const I=_._normalizeKey(T.pop());let M="",A=T.indexOf("code");if(A>-1&&(T.splice(A,1),M="code."),YI.forEach(N=>{const O=T.indexOf(N);O>-1&&(T.splice(O,1),M+=N+".")}),M+=I,0!=T.length||0===I.length)return null;const R={};return R.domEventName=D,R.fullKey=M,R}static matchEventFullKeyCode(C,T){let D=hz[C.key]||C.key,I="";return T.indexOf("code.")>-1&&(D=C.code,I="code."),!(null==D||!D)&&(D=D.toLowerCase()," "===D?D="space":"."===D&&(D="dot"),YI.forEach(M=>{M!==D&&(0,pz[M])(C)&&(I+=M+".")}),I+=D,I===T)}static eventCallback(C,T,D){return I=>{_.matchEventFullKeyCode(I,C)&&D.runGuarded(()=>T(I))}}static _normalizeKey(C){return"esc"===C?"escape":C}}return(y=_).\u0275fac=function(C){return new(C||y)(Ft(go))},y.\u0275prov=At({token:y,factory:y.\u0275fac}),_})();const eM=[{provide:bs,useValue:kI},{provide:Iw,useValue:function mz(){sv.makeCurrent()},multi:!0},{provide:go,useFactory:function vz(){return function e1(y){Og=y}(document),document},deps:[]}],_z=kD(g$,"browser",eM),Cz=new Mt(""),tM=[{provide:eh,useClass:class nz{addToWindow(_){Pe.getAngularTestability=(C,T=!0)=>{const D=_.findTestabilityInTree(C,T);if(null==D)throw new j(5103,!1);return D},Pe.getAllAngularTestabilities=()=>_.getAllTestabilities(),Pe.getAllAngularRootElements=()=>_.getAllRootElements(),Pe.frameworkStabilizers||(Pe.frameworkStabilizers=[]),Pe.frameworkStabilizers.push(C=>{const T=Pe.getAllAngularTestabilities();let D=T.length;const I=function(){D--,0==D&&C()};T.forEach(M=>{M.whenStable(I)})})}findTestabilityInTree(_,S,C){if(null==S)return null;const T=_.getTestability(S);return null!=T?T:C?Ns().isShadowRoot(S)?this.findTestabilityInTree(_,S.host,!0):this.findTestabilityInTree(_,S.parentElement,!0):null}},deps:[]},{provide:SD,useClass:Dy,deps:[Pn,Iy,eh]},{provide:Dy,useClass:Dy,deps:[Pn,Iy,eh]}],nM=[{provide:Jp,useValue:"root"},{provide:vi,useFactory:function yz(){return new vi},deps:[]},{provide:av,useClass:fz,multi:!0,deps:[go,Pn,bs]},{provide:av,useClass:gz,multi:!0,deps:[go]},dv,GI,qI,{provide:Tm,useExisting:dv},{provide:FI,useClass:rz,deps:[]},[]];let rM=(()=>{var y;class _{constructor(C){}static withServerTransition(C){return{ngModule:_,providers:[{provide:Qd,useValue:C.appId}]}}}return(y=_).\u0275fac=function(C){return new(C||y)(Ft(Cz,12))},y.\u0275mod=Wo({type:y}),y.\u0275inj=Po({providers:[...nM,...tM],imports:[y3,m$]}),_})(),wz=(()=>{var y;class _{constructor(C){this._doc=C}getTitle(){return this._doc.title}setTitle(C){this._doc.title=C||""}}return(y=_).\u0275fac=function(C){return new(C||y)(Ft(go))},y.\u0275prov=At({token:y,factory:y.\u0275fac,providedIn:"root"}),_})();var tn=function(y){return y[y.State=0]="State",y[y.Transition=1]="Transition",y[y.Sequence=2]="Sequence",y[y.Group=3]="Group",y[y.Animate=4]="Animate",y[y.Keyframes=5]="Keyframes",y[y.Style=6]="Style",y[y.Trigger=7]="Trigger",y[y.Reference=8]="Reference",y[y.AnimateChild=9]="AnimateChild",y[y.AnimateRef=10]="AnimateRef",y[y.Query=11]="Query",y[y.Stagger=12]="Stagger",y}(tn||{});const as="*";function aM(y){return{type:tn.Style,styles:y,offset:null}}class Ru{constructor(_=0,S=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=_+S}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(_=>_()),this._onDoneFns=[])}onStart(_){this._originalOnStartFns.push(_),this._onStartFns.push(_)}onDone(_){this._originalOnDoneFns.push(_),this._onDoneFns.push(_)}onDestroy(_){this._onDestroyFns.push(_)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){queueMicrotask(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(_=>_()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(_=>_()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(_){this._position=this.totalTime?_*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(_){const S="start"==_?this._onStartFns:this._onDoneFns;S.forEach(C=>C()),S.length=0}}class cM{constructor(_){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=_;let S=0,C=0,T=0;const D=this.players.length;0==D?queueMicrotask(()=>this._onFinish()):this.players.forEach(I=>{I.onDone(()=>{++S==D&&this._onFinish()}),I.onDestroy(()=>{++C==D&&this._onDestroy()}),I.onStart(()=>{++T==D&&this._onStart()})}),this.totalTime=this.players.reduce((I,M)=>Math.max(I,M.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(_=>_()),this._onDoneFns=[])}init(){this.players.forEach(_=>_.init())}onStart(_){this._onStartFns.push(_)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(_=>_()),this._onStartFns=[])}onDone(_){this._onDoneFns.push(_)}onDestroy(_){this._onDestroyFns.push(_)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(_=>_.play())}pause(){this.players.forEach(_=>_.pause())}restart(){this.players.forEach(_=>_.restart())}finish(){this._onFinish(),this.players.forEach(_=>_.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(_=>_.destroy()),this._onDestroyFns.forEach(_=>_()),this._onDestroyFns=[])}reset(){this.players.forEach(_=>_.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(_){const S=_*this.totalTime;this.players.forEach(C=>{const T=C.totalTime?Math.min(1,S/C.totalTime):1;C.setPosition(T)})}getPosition(){const _=this.players.reduce((S,C)=>null===S||C.totalTime>S.totalTime?C:S,null);return null!=_?_.getPosition():0}beforeDestroy(){this.players.forEach(_=>{_.beforeDestroy&&_.beforeDestroy()})}triggerCallback(_){const S="start"==_?this._onStartFns:this._onDoneFns;S.forEach(C=>C()),S.length=0}}const Nz=["value"];function dM(y){return new j(3e3,!1)}function Os(y){switch(y.length){case 0:return new Ru;case 1:return y[0];default:return new cM(y)}}function fM(y,_,S=new Map,C=new Map){const T=[],D=[];let I=-1,M=null;if(_.forEach(A=>{const R=A.get("offset"),N=R==I,O=N&&M||new Map;A.forEach((F,$)=>{let Q=$,ae=F;if("offset"!==$)switch(Q=y.normalizePropertyName(Q,T),ae){case"!":ae=S.get($);break;case as:ae=C.get($);break;default:ae=y.normalizeStyleValue($,Q,ae,T)}O.set(Q,ae)}),N||D.push(O),M=O,I=R}),T.length)throw function t4(y){return new j(3502,!1)}();return D}function gv(y,_,S,C){switch(_){case"start":y.onStart(()=>C(S&&mv(S,"start",y)));break;case"done":y.onDone(()=>C(S&&mv(S,"done",y)));break;case"destroy":y.onDestroy(()=>C(S&&mv(S,"destroy",y)))}}function mv(y,_,S){const C=S.totalTime,D=yv(y.element,y.triggerName,y.fromState,y.toState,_||y.phaseName,null==C?y.totalTime:C,!!S.disabled),I=y._data;return null!=I&&(D._data=I),D}function yv(y,_,S,C,T="",D=0,I){return{element:y,triggerName:_,fromState:S,toState:C,phaseName:T,totalTime:D,disabled:!!I}}function Io(y,_,S){let C=y.get(_);return C||y.set(_,C=S),C}function hM(y){const _=y.indexOf(":");return[y.substring(1,_),y.slice(_+1)]}const h4=typeof document>"u"?null:document.documentElement;function vv(y){const _=y.parentNode||y.host||null;return _===h4?null:_}let Ca=null,pM=!1;function gM(y,_){for(;_;){if(_===y)return!0;_=vv(_)}return!1}function mM(y,_,S){if(S)return Array.from(y.querySelectorAll(_));const C=y.querySelector(_);return C?[C]:[]}let _v=(()=>{var y;class _{validateStyleProperty(C){return function g4(y){Ca||(Ca=function m4(){return typeof document<"u"?document.body:null}()||{},pM=!!Ca.style&&"WebkitAppearance"in Ca.style);let _=!0;return Ca.style&&!function p4(y){return"ebkit"==y.substring(1,6)}(y)&&(_=y in Ca.style,!_&&pM&&(_="Webkit"+y.charAt(0).toUpperCase()+y.slice(1)in Ca.style)),_}(C)}matchesElement(C,T){return!1}containsElement(C,T){return gM(C,T)}getParentElement(C){return vv(C)}query(C,T,D){return mM(C,T,D)}computeStyle(C,T,D){return D||""}animate(C,T,D,I,M,A=[],R){return new Ru(D,I)}}return(y=_).\u0275fac=function(C){return new(C||y)},y.\u0275prov=At({token:y,factory:y.\u0275fac}),_})();class Th{}Th.NOOP=new _v;class Cv{}const v4=1e3,wv="ng-enter",Eh="ng-leave",Dh="ng-trigger",Ih=".ng-trigger",vM="ng-animating",bv=".ng-animating";function cs(y){if("number"==typeof y)return y;const _=y.match(/^(-?[\.\d]+)(m?s)/);return!_||_.length<2?0:Sv(parseFloat(_[1]),_[2])}function Sv(y,_){return"s"===_?y*v4:y}function Mh(y,_,S){return y.hasOwnProperty("duration")?y:function C4(y,_,S){let T,D=0,I="";if("string"==typeof y){const M=y.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===M)return _.push(dM()),{duration:0,delay:0,easing:""};T=Sv(parseFloat(M[1]),M[2]);const A=M[3];null!=A&&(D=Sv(parseFloat(A),M[4]));const R=M[5];R&&(I=R)}else T=y;if(!S){let M=!1,A=_.length;T<0&&(_.push(function Oz(){return new j(3100,!1)}()),M=!0),D<0&&(_.push(function kz(){return new j(3101,!1)}()),M=!0),M&&_.splice(A,0,dM())}return{duration:T,delay:D,easing:I}}(y,_,S)}function Di(y,_,S){_.forEach((C,T)=>{const D=Ev(T);S&&!S.has(T)&&S.set(T,y.style[D]),y.style[D]=C})}function wa(y,_){_.forEach((S,C)=>{const T=Ev(C);y.style[T]=""})}function Pu(y){return Array.isArray(y)?1==y.length?y[0]:function Iz(y,_=null){return{type:tn.Sequence,steps:y,options:_}}(y):y}const Tv=new RegExp("".concat("{{","\\s*(.+?)\\s*").concat("}}"),"g");function CM(y){let _=[];if("string"==typeof y){let S;for(;S=Tv.exec(y);)_.push(S[1]);Tv.lastIndex=0}return _}function Nu(y,_,S){const C="".concat(y),T=C.replace(Tv,(D,I)=>{let M=_[I];return null==M&&(S.push(function Fz(y){return new j(3003,!1)}()),M=""),M.toString()});return T==C?y:T}const S4=/-+([a-z0-9])/g;function Ev(y){return y.replace(S4,(..._)=>_[1].toUpperCase())}function Mo(y,_,S){switch(_.type){case tn.Trigger:return y.visitTrigger(_,S);case tn.State:return y.visitState(_,S);case tn.Transition:return y.visitTransition(_,S);case tn.Sequence:return y.visitSequence(_,S);case tn.Group:return y.visitGroup(_,S);case tn.Animate:return y.visitAnimate(_,S);case tn.Keyframes:return y.visitKeyframes(_,S);case tn.Style:return y.visitStyle(_,S);case tn.Reference:return y.visitReference(_,S);case tn.AnimateChild:return y.visitAnimateChild(_,S);case tn.AnimateRef:return y.visitAnimateRef(_,S);case tn.Query:return y.visitQuery(_,S);case tn.Stagger:return y.visitStagger(_,S);default:throw function Lz(y){return new j(3004,!1)}()}}function Dv(y,_){return window.getComputedStyle(y)[_]}const D4=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class wM extends Cv{normalizePropertyName(_,S){return Ev(_)}normalizeStyleValue(_,S,C,T){let D="";const I=C.toString().trim();if(D4.has(S)&&0!==C&&"0"!==C)if("number"==typeof C)D="px";else{const M=C.match(/^[+-]?[\d\.]+([a-z]*)$/);M&&0==M[1].length&&T.push(function Uz(y,_){return new j(3005,!1)}())}return I+D}}const Ah="*";const Rh=new Set(["true","1"]),Ph=new Set(["false","0"]);function bM(y,_){const S=Rh.has(y)||Ph.has(y),C=Rh.has(_)||Ph.has(_);return(T,D)=>{let I=y==Ah||y==T,M=_==Ah||_==D;return!I&&S&&"boolean"==typeof T&&(I=T?Rh.has(y):Ph.has(y)),!M&&C&&"boolean"==typeof D&&(M=D?Rh.has(_):Ph.has(_)),I&&M}}const R4=new RegExp("s*".concat(":self","s*,?"),"g");function Iv(y,_,S,C){return new P4(y).build(_,S,C)}class P4{constructor(_){this._driver=_}build(_,S,C){const T=new k4(S);return this._resetContextStyleTimingState(T),Mo(this,Pu(_),T)}_resetContextStyleTimingState(_){_.currentQuerySelector="",_.collectedStyles=new Map,_.collectedStyles.set("",new Map),_.currentTime=0}visitTrigger(_,S){let C=S.queryCount=0,T=S.depCount=0;const D=[],I=[];return"@"==_.name.charAt(0)&&S.errors.push(function Vz(){return new j(3006,!1)}()),_.definitions.forEach(M=>{if(this._resetContextStyleTimingState(S),M.type==tn.State){const A=M,R=A.name;R.toString().split(/\s*,\s*/).forEach(N=>{A.name=N,D.push(this.visitState(A,S))}),A.name=R}else if(M.type==tn.Transition){const A=this.visitTransition(M,S);C+=A.queryCount,T+=A.depCount,I.push(A)}else S.errors.push(function jz(){return new j(3007,!1)}())}),{type:tn.Trigger,name:_.name,states:D,transitions:I,queryCount:C,depCount:T,options:null}}visitState(_,S){const C=this.visitStyle(_.styles,S),T=_.options&&_.options.params||null;if(C.containsDynamicStyles){const D=new Set,I=T||{};C.styles.forEach(M=>{M instanceof Map&&M.forEach(A=>{CM(A).forEach(R=>{I.hasOwnProperty(R)||D.add(R)})})}),D.size&&S.errors.push(function Bz(y,_){return new j(3008,!1)}(0,D.values()))}return{type:tn.State,name:_.name,style:C,options:T?{params:T}:null}}visitTransition(_,S){S.queryCount=0,S.depCount=0;const C=Mo(this,Pu(_.animation),S),T=function I4(y,_){const S=[];return"string"==typeof y?y.split(/\s*,\s*/).forEach(C=>function M4(y,_,S){if(":"==y[0]){const A=function A4(y,_){switch(y){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(S,C)=>parseFloat(C)>parseFloat(S);case":decrement":return(S,C)=>parseFloat(C)<parseFloat(S);default:return _.push(function Xz(y){return new j(3016,!1)}()),"* => *"}}(y,S);if("function"==typeof A)return void _.push(A);y=A}const C=y.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==C||C.length<4)return S.push(function Qz(y){return new j(3015,!1)}()),_;const T=C[1],D=C[2],I=C[3];_.push(bM(T,I)),"<"==D[0]&&(T!=Ah||I!=Ah)&&_.push(bM(I,T))}(C,S,_)):S.push(y),S}(_.expr,S.errors);return{type:tn.Transition,matchers:T,animation:C,queryCount:S.queryCount,depCount:S.depCount,options:ba(_.options)}}visitSequence(_,S){return{type:tn.Sequence,steps:_.steps.map(C=>Mo(this,C,S)),options:ba(_.options)}}visitGroup(_,S){const C=S.currentTime;let T=0;const D=_.steps.map(I=>{S.currentTime=C;const M=Mo(this,I,S);return T=Math.max(T,S.currentTime),M});return S.currentTime=T,{type:tn.Group,steps:D,options:ba(_.options)}}visitAnimate(_,S){const C=function F4(y,_){if(y.hasOwnProperty("duration"))return y;if("number"==typeof y)return Mv(Mh(y,_).duration,0,"");const S=y;if(S.split(/\s+/).some(D=>"{"==D.charAt(0)&&"{"==D.charAt(1))){const D=Mv(0,0,"");return D.dynamic=!0,D.strValue=S,D}const T=Mh(S,_);return Mv(T.duration,T.delay,T.easing)}(_.timings,S.errors);S.currentAnimateTimings=C;let T,D=_.styles?_.styles:aM({});if(D.type==tn.Keyframes)T=this.visitKeyframes(D,S);else{let I=_.styles,M=!1;if(!I){M=!0;const R={};C.easing&&(R.easing=C.easing),I=aM(R)}S.currentTime+=C.duration+C.delay;const A=this.visitStyle(I,S);A.isEmptyStep=M,T=A}return S.currentAnimateTimings=null,{type:tn.Animate,timings:C,style:T,options:null}}visitStyle(_,S){const C=this._makeStyleAst(_,S);return this._validateStyleAst(C,S),C}_makeStyleAst(_,S){const C=[],T=Array.isArray(_.styles)?_.styles:[_.styles];for(let M of T)"string"==typeof M?M===as?C.push(M):S.errors.push(new j(3002,!1)):C.push(new Map(Object.entries(M)));let D=!1,I=null;return C.forEach(M=>{if(M instanceof Map&&(M.has("easing")&&(I=M.get("easing"),M.delete("easing")),!D))for(let A of M.values())if(A.toString().indexOf("{{")>=0){D=!0;break}}),{type:tn.Style,styles:C,easing:I,offset:_.offset,containsDynamicStyles:D,options:null}}_validateStyleAst(_,S){const C=S.currentAnimateTimings;let T=S.currentTime,D=S.currentTime;C&&D>0&&(D-=C.duration+C.delay),_.styles.forEach(I=>{"string"!=typeof I&&I.forEach((M,A)=>{const R=S.collectedStyles.get(S.currentQuerySelector),N=R.get(A);let O=!0;N&&(D!=T&&D>=N.startTime&&T<=N.endTime&&(S.errors.push(function Hz(y,_,S,C,T){return new j(3010,!1)}()),O=!1),D=N.startTime),O&&R.set(A,{startTime:D,endTime:T}),S.options&&function b4(y,_,S){const C=_.params||{},T=CM(y);T.length&&T.forEach(D=>{C.hasOwnProperty(D)||S.push(function xz(y){return new j(3001,!1)}())})}(M,S.options,S.errors)})})}visitKeyframes(_,S){const C={type:tn.Keyframes,styles:[],options:null};if(!S.currentAnimateTimings)return S.errors.push(function zz(){return new j(3011,!1)}()),C;let D=0;const I=[];let M=!1,A=!1,R=0;const N=_.steps.map(Ee=>{const Ae=this._makeStyleAst(Ee,S);let ht=null!=Ae.offset?Ae.offset:function x4(y){if("string"==typeof y)return null;let _=null;if(Array.isArray(y))y.forEach(S=>{if(S instanceof Map&&S.has("offset")){const C=S;_=parseFloat(C.get("offset")),C.delete("offset")}});else if(y instanceof Map&&y.has("offset")){const S=y;_=parseFloat(S.get("offset")),S.delete("offset")}return _}(Ae.styles),vt=0;return null!=ht&&(D++,vt=Ae.offset=ht),A=A||vt<0||vt>1,M=M||vt<R,R=vt,I.push(vt),Ae});A&&S.errors.push(function qz(){return new j(3012,!1)}()),M&&S.errors.push(function Wz(){return new j(3200,!1)}());const O=_.steps.length;let F=0;D>0&&D<O?S.errors.push(function Gz(){return new j(3202,!1)}()):0==D&&(F=1/(O-1));const $=O-1,Q=S.currentTime,ae=S.currentAnimateTimings,Ce=ae.duration;return N.forEach((Ee,Ae)=>{const ht=F>0?Ae==$?1:F*Ae:I[Ae],vt=ht*Ce;S.currentTime=Q+ae.delay+vt,ae.duration=vt,this._validateStyleAst(Ee,S),Ee.offset=ht,C.styles.push(Ee)}),C}visitReference(_,S){return{type:tn.Reference,animation:Mo(this,Pu(_.animation),S),options:ba(_.options)}}visitAnimateChild(_,S){return S.depCount++,{type:tn.AnimateChild,options:ba(_.options)}}visitAnimateRef(_,S){return{type:tn.AnimateRef,animation:this.visitReference(_.animation,S),options:ba(_.options)}}visitQuery(_,S){const C=S.currentQuerySelector,T=_.options||{};S.queryCount++,S.currentQuery=_;const[D,I]=function N4(y){const _=!!y.split(/\s*,\s*/).find(S=>":self"==S);return _&&(y=y.replace(R4,"")),y=y.replace(/@\*/g,Ih).replace(/@\w+/g,S=>Ih+"-"+S.slice(1)).replace(/:animating/g,bv),[y,_]}(_.selector);S.currentQuerySelector=C.length?C+" "+D:D,Io(S.collectedStyles,S.currentQuerySelector,new Map);const M=Mo(this,Pu(_.animation),S);return S.currentQuery=null,S.currentQuerySelector=C,{type:tn.Query,selector:D,limit:T.limit||0,optional:!!T.optional,includeSelf:I,animation:M,originalSelector:_.selector,options:ba(_.options)}}visitStagger(_,S){S.currentQuery||S.errors.push(function Kz(){return new j(3013,!1)}());const C="full"===_.timings?{duration:0,delay:0,easing:"full"}:Mh(_.timings,S.errors,!0);return{type:tn.Stagger,animation:Mo(this,Pu(_.animation),S),timings:C,options:null}}}class k4{constructor(_){this.errors=_,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function ba(y){return y?(y=se({},y)).params&&(y.params=function O4(y){return y?se({},y):null}(y.params)):y={},y}function Mv(y,_,S){return{duration:y,delay:_,easing:S}}function Av(y,_,S,C,T,D,I=null,M=!1){return{type:1,element:y,keyframes:_,preStyleProps:S,postStyleProps:C,duration:T,delay:D,totalTime:T+D,easing:I,subTimeline:M}}class Nh{constructor(){this._map=new Map}get(_){return this._map.get(_)||[]}append(_,S){let C=this._map.get(_);C||this._map.set(_,C=[]),C.push(...S)}has(_){return this._map.has(_)}clear(){this._map.clear()}}const V4=new RegExp(":enter","g"),B4=new RegExp(":leave","g");function Rv(y,_,S,C,T,D=new Map,I=new Map,M,A,R=[]){return(new $4).buildKeyframes(y,_,S,C,T,D,I,M,A,R)}class $4{buildKeyframes(_,S,C,T,D,I,M,A,R,N=[]){R=R||new Nh;const O=new Pv(_,S,R,T,D,N,[]);O.options=A;const F=A.delay?cs(A.delay):0;O.currentTimeline.delayNextStep(F),O.currentTimeline.setStyles([I],null,O.errors,A),Mo(this,C,O);const $=O.timelines.filter(Q=>Q.containsAnimation());if($.length&&M.size){let Q;for(let ae=$.length-1;ae>=0;ae--){const Ce=$[ae];if(Ce.element===S){Q=Ce;break}}Q&&!Q.allowOnlyTimelineStyles()&&Q.setStyles([M],null,O.errors,A)}return $.length?$.map(Q=>Q.buildKeyframes()):[Av(S,[],[],[],0,F,"",!1)]}visitTrigger(_,S){}visitState(_,S){}visitTransition(_,S){}visitAnimateChild(_,S){const C=S.subInstructions.get(S.element);if(C){const T=S.createSubContext(_.options),D=S.currentTimeline.currentTime,I=this._visitSubInstructions(C,T,T.options);D!=I&&S.transformIntoNewTimeline(I)}S.previousNode=_}visitAnimateRef(_,S){const C=S.createSubContext(_.options);C.transformIntoNewTimeline(),this._applyAnimationRefDelays([_.options,_.animation.options],S,C),this.visitReference(_.animation,C),S.transformIntoNewTimeline(C.currentTimeline.currentTime),S.previousNode=_}_applyAnimationRefDelays(_,S,C){for(const D of _){const I=null==D?void 0:D.delay;if(I){var T;const M="number"==typeof I?I:cs(Nu(I,null!==(T=null==D?void 0:D.params)&&void 0!==T?T:{},S.errors));C.delayNextStep(M)}}}_visitSubInstructions(_,S,C){let D=S.currentTimeline.currentTime;const I=null!=C.duration?cs(C.duration):null,M=null!=C.delay?cs(C.delay):null;return 0!==I&&_.forEach(A=>{const R=S.appendInstructionToTimeline(A,I,M);D=Math.max(D,R.duration+R.delay)}),D}visitReference(_,S){S.updateOptions(_.options,!0),Mo(this,_.animation,S),S.previousNode=_}visitSequence(_,S){const C=S.subContextCount;let T=S;const D=_.options;if(D&&(D.params||D.delay)&&(T=S.createSubContext(D),T.transformIntoNewTimeline(),null!=D.delay)){T.previousNode.type==tn.Style&&(T.currentTimeline.snapshotCurrentStyles(),T.previousNode=Oh);const I=cs(D.delay);T.delayNextStep(I)}_.steps.length&&(_.steps.forEach(I=>Mo(this,I,T)),T.currentTimeline.applyStylesToKeyframe(),T.subContextCount>C&&T.transformIntoNewTimeline()),S.previousNode=_}visitGroup(_,S){const C=[];let T=S.currentTimeline.currentTime;const D=_.options&&_.options.delay?cs(_.options.delay):0;_.steps.forEach(I=>{const M=S.createSubContext(_.options);D&&M.delayNextStep(D),Mo(this,I,M),T=Math.max(T,M.currentTimeline.currentTime),C.push(M.currentTimeline)}),C.forEach(I=>S.currentTimeline.mergeTimelineCollectedStyles(I)),S.transformIntoNewTimeline(T),S.previousNode=_}_visitTiming(_,S){if(_.dynamic){const C=_.strValue;return Mh(S.params?Nu(C,S.params,S.errors):C,S.errors)}return{duration:_.duration,delay:_.delay,easing:_.easing}}visitAnimate(_,S){const C=S.currentAnimateTimings=this._visitTiming(_.timings,S),T=S.currentTimeline;C.delay&&(S.incrementTime(C.delay),T.snapshotCurrentStyles());const D=_.style;D.type==tn.Keyframes?this.visitKeyframes(D,S):(S.incrementTime(C.duration),this.visitStyle(D,S),T.applyStylesToKeyframe()),S.currentAnimateTimings=null,S.previousNode=_}visitStyle(_,S){const C=S.currentTimeline,T=S.currentAnimateTimings;!T&&C.hasCurrentStyleProperties()&&C.forwardFrame();const D=T&&T.easing||_.easing;_.isEmptyStep?C.applyEmptyStep(D):C.setStyles(_.styles,D,S.errors,S.options),S.previousNode=_}visitKeyframes(_,S){const C=S.currentAnimateTimings,T=S.currentTimeline.duration,D=C.duration,M=S.createSubContext().currentTimeline;M.easing=C.easing,_.styles.forEach(A=>{M.forwardTime((A.offset||0)*D),M.setStyles(A.styles,A.easing,S.errors,S.options),M.applyStylesToKeyframe()}),S.currentTimeline.mergeTimelineCollectedStyles(M),S.transformIntoNewTimeline(T+D),S.previousNode=_}visitQuery(_,S){const C=S.currentTimeline.currentTime,T=_.options||{},D=T.delay?cs(T.delay):0;D&&(S.previousNode.type===tn.Style||0==C&&S.currentTimeline.hasCurrentStyleProperties())&&(S.currentTimeline.snapshotCurrentStyles(),S.previousNode=Oh);let I=C;const M=S.invokeQuery(_.selector,_.originalSelector,_.limit,_.includeSelf,!!T.optional,S.errors);S.currentQueryTotal=M.length;let A=null;M.forEach((R,N)=>{S.currentQueryIndex=N;const O=S.createSubContext(_.options,R);D&&O.delayNextStep(D),R===S.element&&(A=O.currentTimeline),Mo(this,_.animation,O),O.currentTimeline.applyStylesToKeyframe(),I=Math.max(I,O.currentTimeline.currentTime)}),S.currentQueryIndex=0,S.currentQueryTotal=0,S.transformIntoNewTimeline(I),A&&(S.currentTimeline.mergeTimelineCollectedStyles(A),S.currentTimeline.snapshotCurrentStyles()),S.previousNode=_}visitStagger(_,S){const C=S.parentContext,T=S.currentTimeline,D=_.timings,I=Math.abs(D.duration),M=I*(S.currentQueryTotal-1);let A=I*S.currentQueryIndex;switch(D.duration<0?"reverse":D.easing){case"reverse":A=M-A;break;case"full":A=C.currentStaggerTime}const N=S.currentTimeline;A&&N.delayNextStep(A);const O=N.currentTime;Mo(this,_.animation,S),S.previousNode=_,C.currentStaggerTime=T.currentTime-O+(T.startTime-C.currentTimeline.startTime)}}const Oh={};class Pv{constructor(_,S,C,T,D,I,M,A){this._driver=_,this.element=S,this.subInstructions=C,this._enterClassName=T,this._leaveClassName=D,this.errors=I,this.timelines=M,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Oh,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=A||new kh(this._driver,S,0),M.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(_,S){if(!_)return;const C=_;let T=this.options;null!=C.duration&&(T.duration=cs(C.duration)),null!=C.delay&&(T.delay=cs(C.delay));const D=C.params;if(D){let I=T.params;I||(I=this.options.params={}),Object.keys(D).forEach(M=>{(!S||!I.hasOwnProperty(M))&&(I[M]=Nu(D[M],I,this.errors))})}}_copyOptions(){const _={};if(this.options){const S=this.options.params;if(S){const C=_.params={};Object.keys(S).forEach(T=>{C[T]=S[T]})}}return _}createSubContext(_=null,S,C){const T=S||this.element,D=new Pv(this._driver,T,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(T,C||0));return D.previousNode=this.previousNode,D.currentAnimateTimings=this.currentAnimateTimings,D.options=this._copyOptions(),D.updateOptions(_),D.currentQueryIndex=this.currentQueryIndex,D.currentQueryTotal=this.currentQueryTotal,D.parentContext=this,this.subContextCount++,D}transformIntoNewTimeline(_){return this.previousNode=Oh,this.currentTimeline=this.currentTimeline.fork(this.element,_),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(_,S,C){const T={duration:null!=S?S:_.duration,delay:this.currentTimeline.currentTime+(null!=C?C:0)+_.delay,easing:""},D=new H4(this._driver,_.element,_.keyframes,_.preStyleProps,_.postStyleProps,T,_.stretchStartingKeyframe);return this.timelines.push(D),T}incrementTime(_){this.currentTimeline.forwardTime(this.currentTimeline.duration+_)}delayNextStep(_){_>0&&this.currentTimeline.delayNextStep(_)}invokeQuery(_,S,C,T,D,I){let M=[];if(T&&M.push(this.element),_.length>0){_=(_=_.replace(V4,"."+this._enterClassName)).replace(B4,"."+this._leaveClassName);let R=this._driver.query(this.element,_,1!=C);0!==C&&(R=C<0?R.slice(R.length+C,R.length):R.slice(0,C)),M.push(...R)}return!D&&0==M.length&&I.push(function Jz(y){return new j(3014,!1)}()),M}}class kh{constructor(_,S,C,T){this._driver=_,this.element=S,this.startTime=C,this._elementTimelineStylesLookup=T,this.duration=0,this.easing=null,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(S),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(S,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(_){const S=1===this._keyframes.size&&this._pendingStyles.size;this.duration||S?(this.forwardTime(this.currentTime+_),S&&this.snapshotCurrentStyles()):this.startTime+=_}fork(_,S){return this.applyStylesToKeyframe(),new kh(this._driver,_,S||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(_){this.applyStylesToKeyframe(),this.duration=_,this._loadKeyframe()}_updateStyle(_,S){this._localTimelineStyles.set(_,S),this._globalTimelineStyles.set(_,S),this._styleSummary.set(_,{time:this.currentTime,value:S})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(_){_&&this._previousKeyframe.set("easing",_);for(let[S,C]of this._globalTimelineStyles)this._backFill.set(S,C||as),this._currentKeyframe.set(S,as);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(_,S,C,T){S&&this._previousKeyframe.set("easing",S);const D=T&&T.params||{},I=function z4(y,_){const S=new Map;let C;return y.forEach(T=>{if("*"===T){null!=C||(C=_.keys());for(let D of C)S.set(D,as)}else for(let[D,I]of T)S.set(D,I)}),S}(_,this._globalTimelineStyles);for(let[A,R]of I){const N=Nu(R,D,C);var M;this._pendingStyles.set(A,N),this._localTimelineStyles.has(A)||this._backFill.set(A,null!==(M=this._globalTimelineStyles.get(A))&&void 0!==M?M:as),this._updateStyle(A,N)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((_,S)=>{this._currentKeyframe.set(S,_)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((_,S)=>{this._currentKeyframe.has(S)||this._currentKeyframe.set(S,_)}))}snapshotCurrentStyles(){for(let[_,S]of this._localTimelineStyles)this._pendingStyles.set(_,S),this._updateStyle(_,S)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const _=[];for(let S in this._currentKeyframe)_.push(S);return _}mergeTimelineCollectedStyles(_){_._styleSummary.forEach((S,C)=>{const T=this._styleSummary.get(C);(!T||S.time>T.time)&&this._updateStyle(C,S.value)})}buildKeyframes(){this.applyStylesToKeyframe();const _=new Set,S=new Set,C=1===this._keyframes.size&&0===this.duration;let T=[];this._keyframes.forEach((M,A)=>{const R=new Map([...this._backFill,...M]);R.forEach((N,O)=>{"!"===N?_.add(O):N===as&&S.add(O)}),C||R.set("offset",A/this.duration),T.push(R)});const D=[..._.values()],I=[...S.values()];if(C){const M=T[0],A=new Map(M);M.set("offset",0),A.set("offset",1),T=[M,A]}return Av(this.element,T,D,I,this.duration,this.startTime,this.easing,!1)}}class H4 extends kh{constructor(_,S,C,T,D,I,M=!1){super(_,S,I.delay),this.keyframes=C,this.preStyleProps=T,this.postStyleProps=D,this._stretchStartingKeyframe=M,this.timings={duration:I.duration,delay:I.delay,easing:I.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let _=this.keyframes,{delay:S,duration:C,easing:T}=this.timings;if(this._stretchStartingKeyframe&&S){const D=[],I=C+S,M=S/I,A=new Map(_[0]);A.set("offset",0),D.push(A);const R=new Map(_[0]);R.set("offset",EM(M)),D.push(R);const N=_.length-1;for(let O=1;O<=N;O++){let F=new Map(_[O]);const $=F.get("offset");F.set("offset",EM((S+$*C)/I)),D.push(F)}C=I,S=0,T="",_=D}return Av(this.element,_,this.preStyleProps,this.postStyleProps,C,S,T,!0)}}function EM(y,_=3){const S=Math.pow(10,_-1);return Math.round(y*S)/S}function DM(y,_,S,C,T,D,I,M,A,R,N,O,F){return{type:0,element:y,triggerName:_,isRemovalTransition:T,fromState:S,fromStyles:D,toState:C,toStyles:I,timelines:M,queriedElements:A,preStyleProps:R,postStyleProps:N,totalTime:O,errors:F}}const Nv={};class IM{constructor(_,S,C){this._triggerName=_,this.ast=S,this._stateStyles=C}match(_,S,C,T){return function q4(y,_,S,C,T){return y.some(D=>D(_,S,C,T))}(this.ast.matchers,_,S,C,T)}buildStyles(_,S,C){let T=this._stateStyles.get("*");return void 0!==_&&(T=this._stateStyles.get(null==_?void 0:_.toString())||T),T?T.buildStyles(S,C):new Map}build(_,S,C,T,D,I,M,A,R,N){var O;const F=[],$=this.ast.options&&this.ast.options.params||Nv,ae=this.buildStyles(C,M&&M.params||Nv,F),Ce=A&&A.params||Nv,Ee=this.buildStyles(T,Ce,F),Ae=new Set,ht=new Map,vt=new Map,$t="void"===T,An={params:MM(Ce,$),delay:null===(O=this.ast.options)||void 0===O?void 0:O.delay},Dn=N?[]:Rv(_,S,this.ast.animation,D,I,ae,Ee,An,R,F);let xn=0;return Dn.forEach(Er=>{xn=Math.max(Er.duration+Er.delay,xn)}),F.length?DM(S,this._triggerName,C,T,$t,ae,Ee,[],[],ht,vt,xn,F):(Dn.forEach(Er=>{const io=Er.element,Vi=Io(ht,io,new Set);Er.preStyleProps.forEach(ji=>Vi.add(ji));const ai=Io(vt,io,new Set);Er.postStyleProps.forEach(ji=>ai.add(ji)),io!==S&&Ae.add(io)}),DM(S,this._triggerName,C,T,$t,ae,Ee,Dn,[...Ae.values()],ht,vt,xn))}}function MM(y,_){const S=se({},_);return Object.entries(y).forEach(([C,T])=>{null!=T&&(S[C]=T)}),S}class W4{constructor(_,S,C){this.styles=_,this.defaultParams=S,this.normalizer=C}buildStyles(_,S){const C=new Map,T=MM(_,this.defaultParams);return this.styles.styles.forEach(D=>{"string"!=typeof D&&D.forEach((I,M)=>{I&&(I=Nu(I,T,S));const A=this.normalizer.normalizePropertyName(M,S);I=this.normalizer.normalizeStyleValue(M,A,I,S),C.set(M,I)})}),C}}class K4{constructor(_,S,C){this.name=_,this.ast=S,this._normalizer=C,this.transitionFactories=[],this.states=new Map,S.states.forEach(T=>{this.states.set(T.name,new W4(T.style,T.options&&T.options.params||{},C))}),AM(this.states,"true","1"),AM(this.states,"false","0"),S.transitions.forEach(T=>{this.transitionFactories.push(new IM(_,T,this.states))}),this.fallbackTransition=function J4(y,_,S){return new IM(y,{type:tn.Transition,animation:{type:tn.Sequence,steps:[],options:null},matchers:[(I,M)=>!0],options:null,queryCount:0,depCount:0},_)}(_,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(_,S,C,T){return this.transitionFactories.find(I=>I.match(_,S,C,T))||null}matchStyles(_,S,C){return this.fallbackTransition.buildStyles(_,S,C)}}function AM(y,_,S){y.has(_)?y.has(S)||y.set(S,y.get(_)):y.has(S)&&y.set(_,y.get(S))}const Q4=new Nh;class X4{constructor(_,S,C){this.bodyNode=_,this._driver=S,this._normalizer=C,this._animations=new Map,this._playersById=new Map,this.players=[]}register(_,S){const C=[],D=Iv(this._driver,S,C,[]);if(C.length)throw function n4(y){return new j(3503,!1)}();this._animations.set(_,D)}_buildPlayer(_,S,C){const T=_.element,D=fM(this._normalizer,_.keyframes,S,C);return this._driver.animate(T,D,_.duration,_.delay,_.easing,[],!0)}create(_,S,C={}){const T=[],D=this._animations.get(_);let I;const M=new Map;if(D?(I=Rv(this._driver,S,D,wv,Eh,new Map,new Map,C,Q4,T),I.forEach(N=>{const O=Io(M,N.element,new Map);N.postStyleProps.forEach(F=>O.set(F,null))})):(T.push(function r4(){return new j(3300,!1)}()),I=[]),T.length)throw function o4(y){return new j(3504,!1)}();M.forEach((N,O)=>{N.forEach((F,$)=>{N.set($,this._driver.computeStyle(O,$,as))})});const R=Os(I.map(N=>{const O=M.get(N.element);return this._buildPlayer(N,new Map,O)}));return this._playersById.set(_,R),R.onDestroy(()=>this.destroy(_)),this.players.push(R),R}destroy(_){const S=this._getPlayer(_);S.destroy(),this._playersById.delete(_);const C=this.players.indexOf(S);C>=0&&this.players.splice(C,1)}_getPlayer(_){const S=this._playersById.get(_);if(!S)throw function i4(y){return new j(3301,!1)}();return S}listen(_,S,C,T){const D=yv(S,"","","");return gv(this._getPlayer(_),C,D,T),()=>{}}command(_,S,C,T){if("register"==C)return void this.register(_,T[0]);if("create"==C)return void this.create(_,S,T[0]||{});const D=this._getPlayer(_);switch(C){case"play":D.play();break;case"pause":D.pause();break;case"reset":D.reset();break;case"restart":D.restart();break;case"finish":D.finish();break;case"init":D.init();break;case"setPosition":D.setPosition(parseFloat(T[0]));break;case"destroy":this.destroy(_)}}}const RM="ng-animate-queued",Ov="ng-animate-disabled",n8=[],PM={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},r8={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},ri="__ng_removed";class kv{get params(){return this.options.params}constructor(_,S=""){this.namespaceId=S;const C=_&&_.hasOwnProperty("value");if(this.value=function a8(y){return null!=y?y:null}(C?_.value:_),C){const I=function Dz(y,_){if(null==y)return{};var S,C,T=function Ez(y,_){if(null==y)return{};var S={};for(var C in y)if({}.hasOwnProperty.call(y,C)){if(-1!==_.indexOf(C))continue;S[C]=y[C]}return S}(y,_);if(Object.getOwnPropertySymbols){var D=Object.getOwnPropertySymbols(y);for(C=0;C<D.length;C++)-1===_.indexOf(S=D[C])&&{}.propertyIsEnumerable.call(y,S)&&(T[S]=y[S])}return T}(_,Nz);this.options=I}else this.options={};this.options.params||(this.options.params={})}absorbOptions(_){const S=_.params;if(S){const C=this.options.params;Object.keys(S).forEach(T=>{null==C[T]&&(C[T]=S[T])})}}}const Ou="void",xv=new kv(Ou);class o8{constructor(_,S,C){this.id=_,this.hostElement=S,this._engine=C,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+_,Fo(S,this._hostClassName)}listen(_,S,C,T){if(!this._triggers.has(S))throw function s4(y,_){return new j(3302,!1)}();if(null==C||0==C.length)throw function a4(y){return new j(3303,!1)}();if(!function c8(y){return"start"==y||"done"==y}(C))throw function c4(y,_){return new j(3400,!1)}();const D=Io(this._elementListeners,_,[]),I={name:S,phase:C,callback:T};D.push(I);const M=Io(this._engine.statesByElement,_,new Map);return M.has(S)||(Fo(_,Dh),Fo(_,Dh+"-"+S),M.set(S,xv)),()=>{this._engine.afterFlush(()=>{const A=D.indexOf(I);A>=0&&D.splice(A,1),this._triggers.has(S)||M.delete(S)})}}register(_,S){return!this._triggers.has(_)&&(this._triggers.set(_,S),!0)}_getTrigger(_){const S=this._triggers.get(_);if(!S)throw function l4(y){return new j(3401,!1)}();return S}trigger(_,S,C,T=!0){const D=this._getTrigger(S),I=new Fv(this.id,S,_);let M=this._engine.statesByElement.get(_);M||(Fo(_,Dh),Fo(_,Dh+"-"+S),this._engine.statesByElement.set(_,M=new Map));let A=M.get(S);const R=new kv(C,this.id);if(!(C&&C.hasOwnProperty("value"))&&A&&R.absorbOptions(A.options),M.set(S,R),A||(A=xv),R.value!==Ou&&A.value===R.value){if(!function d8(y,_){const S=Object.keys(y),C=Object.keys(_);if(S.length!=C.length)return!1;for(let T=0;T<S.length;T++){const D=S[T];if(!_.hasOwnProperty(D)||y[D]!==_[D])return!1}return!0}(A.params,R.params)){const ae=[],Ce=D.matchStyles(A.value,A.params,ae),Ee=D.matchStyles(R.value,R.params,ae);ae.length?this._engine.reportError(ae):this._engine.afterFlush(()=>{wa(_,Ce),Di(_,Ee)})}return}const F=Io(this._engine.playersByElement,_,[]);F.forEach(ae=>{ae.namespaceId==this.id&&ae.triggerName==S&&ae.queued&&ae.destroy()});let $=D.matchTransition(A.value,R.value,_,R.params),Q=!1;if(!$){if(!T)return;$=D.fallbackTransition,Q=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:_,triggerName:S,transition:$,fromState:A,toState:R,player:I,isFallbackTransition:Q}),Q||(Fo(_,RM),I.onStart(()=>{Uc(_,RM)})),I.onDone(()=>{let ae=this.players.indexOf(I);ae>=0&&this.players.splice(ae,1);const Ce=this._engine.playersByElement.get(_);if(Ce){let Ee=Ce.indexOf(I);Ee>=0&&Ce.splice(Ee,1)}}),this.players.push(I),F.push(I),I}deregister(_){this._triggers.delete(_),this._engine.statesByElement.forEach(S=>S.delete(_)),this._elementListeners.forEach((S,C)=>{this._elementListeners.set(C,S.filter(T=>T.name!=_))})}clearElementCache(_){this._engine.statesByElement.delete(_),this._elementListeners.delete(_);const S=this._engine.playersByElement.get(_);S&&(S.forEach(C=>C.destroy()),this._engine.playersByElement.delete(_))}_signalRemovalForInnerTriggers(_,S){const C=this._engine.driver.query(_,Ih,!0);C.forEach(T=>{if(T[ri])return;const D=this._engine.fetchNamespacesByElement(T);D.size?D.forEach(I=>I.triggerLeaveAnimation(T,S,!1,!0)):this.clearElementCache(T)}),this._engine.afterFlushAnimationsDone(()=>C.forEach(T=>this.clearElementCache(T)))}triggerLeaveAnimation(_,S,C,T){const D=this._engine.statesByElement.get(_),I=new Map;if(D){const M=[];if(D.forEach((A,R)=>{if(I.set(R,A.value),this._triggers.has(R)){const N=this.trigger(_,R,Ou,T);N&&M.push(N)}}),M.length)return this._engine.markElementAsRemoved(this.id,_,!0,S,I),C&&Os(M).onDone(()=>this._engine.processLeaveNode(_)),!0}return!1}prepareLeaveAnimationListeners(_){const S=this._elementListeners.get(_),C=this._engine.statesByElement.get(_);if(S&&C){const T=new Set;S.forEach(D=>{const I=D.name;if(T.has(I))return;T.add(I);const A=this._triggers.get(I).fallbackTransition,R=C.get(I)||xv,N=new kv(Ou),O=new Fv(this.id,I,_);this._engine.totalQueuedPlayers++,this._queue.push({element:_,triggerName:I,transition:A,fromState:R,toState:N,player:O,isFallbackTransition:!0})})}}removeNode(_,S){const C=this._engine;if(_.childElementCount&&this._signalRemovalForInnerTriggers(_,S),this.triggerLeaveAnimation(_,S,!0))return;let T=!1;if(C.totalAnimations){const D=C.players.length?C.playersByQueriedElement.get(_):[];if(D&&D.length)T=!0;else{let I=_;for(;I=I.parentNode;)if(C.statesByElement.get(I)){T=!0;break}}}if(this.prepareLeaveAnimationListeners(_),T)C.markElementAsRemoved(this.id,_,!1,S);else{const D=_[ri];(!D||D===PM)&&(C.afterFlush(()=>this.clearElementCache(_)),C.destroyInnerAnimations(_),C._onRemovalComplete(_,S))}}insertNode(_,S){Fo(_,this._hostClassName)}drainQueuedTransitions(_){const S=[];return this._queue.forEach(C=>{const T=C.player;if(T.destroyed)return;const D=C.element,I=this._elementListeners.get(D);I&&I.forEach(M=>{if(M.name==C.triggerName){const A=yv(D,C.triggerName,C.fromState.value,C.toState.value);A._data=_,gv(C.player,M.phase,A,M.callback)}}),T.markedForDestroy?this._engine.afterFlush(()=>{T.destroy()}):S.push(C)}),this._queue=[],S.sort((C,T)=>{const D=C.transition.ast.depCount,I=T.transition.ast.depCount;return 0==D||0==I?D-I:this._engine.driver.containsElement(C.element,T.element)?1:-1})}destroy(_){this.players.forEach(S=>S.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,_)}}class i8{_onRemovalComplete(_,S){this.onRemovalComplete(_,S)}constructor(_,S,C,T){this.bodyNode=_,this.driver=S,this._normalizer=C,this.scheduler=T,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(D,I)=>{}}get queuedPlayers(){const _=[];return this._namespaceList.forEach(S=>{S.players.forEach(C=>{C.queued&&_.push(C)})}),_}createNamespace(_,S){const C=new o8(_,S,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,S)?this._balanceNamespaceList(C,S):(this.newHostElements.set(S,C),this.collectEnterElement(S)),this._namespaceLookup[_]=C}_balanceNamespaceList(_,S){const C=this._namespaceList,T=this.namespacesByHostElement;if(C.length-1>=0){let I=!1,M=this.driver.getParentElement(S);for(;M;){const A=T.get(M);if(A){const R=C.indexOf(A);C.splice(R+1,0,_),I=!0;break}M=this.driver.getParentElement(M)}I||C.unshift(_)}else C.push(_);return T.set(S,_),_}register(_,S){let C=this._namespaceLookup[_];return C||(C=this.createNamespace(_,S)),C}registerTrigger(_,S,C){let T=this._namespaceLookup[_];T&&T.register(S,C)&&this.totalAnimations++}destroy(_,S){_&&(this.afterFlush(()=>{}),this.afterFlushAnimationsDone(()=>{const C=this._fetchNamespace(_);this.namespacesByHostElement.delete(C.hostElement);const T=this._namespaceList.indexOf(C);T>=0&&this._namespaceList.splice(T,1),C.destroy(S),delete this._namespaceLookup[_]}))}_fetchNamespace(_){return this._namespaceLookup[_]}fetchNamespacesByElement(_){const S=new Set,C=this.statesByElement.get(_);if(C)for(let T of C.values())if(T.namespaceId){const D=this._fetchNamespace(T.namespaceId);D&&S.add(D)}return S}trigger(_,S,C,T){if(xh(S)){const D=this._fetchNamespace(_);if(D)return D.trigger(S,C,T),!0}return!1}insertNode(_,S,C,T){if(!xh(S))return;const D=S[ri];if(D&&D.setForRemoval){D.setForRemoval=!1,D.setForMove=!0;const I=this.collectedLeaveElements.indexOf(S);I>=0&&this.collectedLeaveElements.splice(I,1)}if(_){const I=this._fetchNamespace(_);I&&I.insertNode(S,C)}T&&this.collectEnterElement(S)}collectEnterElement(_){this.collectedEnterElements.push(_)}markElementAsDisabled(_,S){S?this.disabledNodes.has(_)||(this.disabledNodes.add(_),Fo(_,Ov)):this.disabledNodes.has(_)&&(this.disabledNodes.delete(_),Uc(_,Ov))}removeNode(_,S,C){if(xh(S)){var T;null===(T=this.scheduler)||void 0===T||T.notify();const D=_?this._fetchNamespace(_):null;D?D.removeNode(S,C):this.markElementAsRemoved(_,S,!1,C);const I=this.namespacesByHostElement.get(S);I&&I.id!==_&&I.removeNode(S,C)}else this._onRemovalComplete(S,C)}markElementAsRemoved(_,S,C,T,D){this.collectedLeaveElements.push(S),S[ri]={namespaceId:_,setForRemoval:T,hasAnimation:C,removedBeforeQueried:!1,previousTriggersValues:D}}listen(_,S,C,T,D){return xh(S)?this._fetchNamespace(_).listen(S,C,T,D):()=>{}}_buildInstruction(_,S,C,T,D){return _.transition.build(this.driver,_.element,_.fromState.value,_.toState.value,C,T,_.fromState.options,_.toState.options,S,D)}destroyInnerAnimations(_){let S=this.driver.query(_,Ih,!0);S.forEach(C=>this.destroyActiveAnimationsForElement(C)),0!=this.playersByQueriedElement.size&&(S=this.driver.query(_,bv,!0),S.forEach(C=>this.finishActiveQueriedAnimationOnElement(C)))}destroyActiveAnimationsForElement(_){const S=this.playersByElement.get(_);S&&S.forEach(C=>{C.queued?C.markedForDestroy=!0:C.destroy()})}finishActiveQueriedAnimationOnElement(_){const S=this.playersByQueriedElement.get(_);S&&S.forEach(C=>C.finish())}whenRenderingDone(){return new Promise(_=>{if(this.players.length)return Os(this.players).onDone(()=>_());_()})}processLeaveNode(_){var S;const C=_[ri];if(C&&C.setForRemoval){if(_[ri]=PM,C.namespaceId){this.destroyInnerAnimations(_);const T=this._fetchNamespace(C.namespaceId);T&&T.clearElementCache(_)}this._onRemovalComplete(_,C.setForRemoval)}null!==(S=_.classList)&&void 0!==S&&S.contains(Ov)&&this.markElementAsDisabled(_,!1),this.driver.query(_,".ng-animate-disabled",!0).forEach(T=>{this.markElementAsDisabled(T,!1)})}flush(_=-1){let S=[];if(this.newHostElements.size&&(this.newHostElements.forEach((C,T)=>this._balanceNamespaceList(C,T)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let C=0;C<this.collectedEnterElements.length;C++)Fo(this.collectedEnterElements[C],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const C=[];try{S=this._flushAnimations(C,_)}finally{for(let T=0;T<C.length;T++)C[T]()}}else for(let C=0;C<this.collectedLeaveElements.length;C++)this.processLeaveNode(this.collectedLeaveElements[C]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(C=>C()),this._flushFns=[],this._whenQuietFns.length){const C=this._whenQuietFns;this._whenQuietFns=[],S.length?Os(S).onDone(()=>{C.forEach(T=>T())}):C.forEach(T=>T())}}reportError(_){throw function u4(y){return new j(3402,!1)}()}_flushAnimations(_,S){const C=new Nh,T=[],D=new Map,I=[],M=new Map,A=new Map,R=new Map,N=new Set;this.disabledNodes.forEach(Vt=>{N.add(Vt);const Gt=this.driver.query(Vt,".ng-animate-queued",!0);for(let Xt=0;Xt<Gt.length;Xt++)N.add(Gt[Xt])});const O=this.bodyNode,F=Array.from(this.statesByElement.keys()),$=kM(F,this.collectedEnterElements),Q=new Map;let ae=0;$.forEach((Vt,Gt)=>{const Xt=wv+ae++;Q.set(Gt,Xt),Vt.forEach(wn=>Fo(wn,Xt))});const Ce=[],Ee=new Set,Ae=new Set;for(let Vt=0;Vt<this.collectedLeaveElements.length;Vt++){const Gt=this.collectedLeaveElements[Vt],Xt=Gt[ri];Xt&&Xt.setForRemoval&&(Ce.push(Gt),Ee.add(Gt),Xt.hasAnimation?this.driver.query(Gt,".ng-star-inserted",!0).forEach(wn=>Ee.add(wn)):Ae.add(Gt))}const ht=new Map,vt=kM(F,Array.from(Ee));vt.forEach((Vt,Gt)=>{const Xt=Eh+ae++;ht.set(Gt,Xt),Vt.forEach(wn=>Fo(wn,Xt))}),_.push(()=>{$.forEach((Vt,Gt)=>{const Xt=Q.get(Gt);Vt.forEach(wn=>Uc(wn,Xt))}),vt.forEach((Vt,Gt)=>{const Xt=ht.get(Gt);Vt.forEach(wn=>Uc(wn,Xt))}),Ce.forEach(Vt=>{this.processLeaveNode(Vt)})});const $t=[],An=[];for(let Vt=this._namespaceList.length-1;Vt>=0;Vt--)this._namespaceList[Vt].drainQueuedTransitions(S).forEach(Xt=>{const wn=Xt.player,dr=Xt.element;if($t.push(wn),this.collectedEnterElements.length){const Kr=dr[ri];if(Kr&&Kr.setForMove){if(Kr.previousTriggersValues&&Kr.previousTriggersValues.has(Xt.triggerName)){const Fa=Kr.previousTriggersValues.get(Xt.triggerName),$o=this.statesByElement.get(Xt.element);if($o&&$o.has(Xt.triggerName)){const Mp=$o.get(Xt.triggerName);Mp.value=Fa,$o.set(Xt.triggerName,Mp)}}return void wn.destroy()}}const Bi=!O||!this.driver.containsElement(O,dr),Ro=ht.get(dr),Qs=Q.get(dr),lr=this._buildInstruction(Xt,C,Qs,Ro,Bi);if(lr.errors&&lr.errors.length)return void An.push(lr);if(Bi)return wn.onStart(()=>wa(dr,lr.fromStyles)),wn.onDestroy(()=>Di(dr,lr.toStyles)),void T.push(wn);if(Xt.isFallbackTransition)return wn.onStart(()=>wa(dr,lr.fromStyles)),wn.onDestroy(()=>Di(dr,lr.toStyles)),void T.push(wn);const AO=[];lr.timelines.forEach(Kr=>{Kr.stretchStartingKeyframe=!0,this.disabledNodes.has(Kr.element)||AO.push(Kr)}),lr.timelines=AO,C.append(dr,lr.timelines),I.push({instruction:lr,player:wn,element:dr}),lr.queriedElements.forEach(Kr=>Io(M,Kr,[]).push(wn)),lr.preStyleProps.forEach((Kr,Fa)=>{if(Kr.size){let $o=A.get(Fa);$o||A.set(Fa,$o=new Set),Kr.forEach((Mp,L0)=>$o.add(L0))}}),lr.postStyleProps.forEach((Kr,Fa)=>{let $o=R.get(Fa);$o||R.set(Fa,$o=new Set),Kr.forEach((Mp,L0)=>$o.add(L0))})});if(An.length){const Vt=[];An.forEach(Gt=>{Vt.push(function d4(y,_){return new j(3505,!1)}())}),$t.forEach(Gt=>Gt.destroy()),this.reportError(Vt)}const Dn=new Map,xn=new Map;I.forEach(Vt=>{const Gt=Vt.element;C.has(Gt)&&(xn.set(Gt,Gt),this._beforeAnimationBuild(Vt.player.namespaceId,Vt.instruction,Dn))}),T.forEach(Vt=>{const Gt=Vt.element;this._getPreviousPlayers(Gt,!1,Vt.namespaceId,Vt.triggerName,null).forEach(wn=>{Io(Dn,Gt,[]).push(wn),wn.destroy()})});const Er=Ce.filter(Vt=>FM(Vt,A,R)),io=new Map;OM(io,this.driver,Ae,R,as).forEach(Vt=>{FM(Vt,A,R)&&Er.push(Vt)});const ai=new Map;$.forEach((Vt,Gt)=>{OM(ai,this.driver,new Set(Vt),A,"!")}),Er.forEach(Vt=>{var Gt,Xt;const wn=io.get(Vt),dr=ai.get(Vt);io.set(Vt,new Map([...null!==(Gt=null==wn?void 0:wn.entries())&&void 0!==Gt?Gt:[],...null!==(Xt=null==dr?void 0:dr.entries())&&void 0!==Xt?Xt:[]]))});const ji=[],IO=[],MO={};I.forEach(Vt=>{const{element:Gt,player:Xt,instruction:wn}=Vt;if(C.has(Gt)){if(N.has(Gt))return Xt.onDestroy(()=>Di(Gt,wn.toStyles)),Xt.disabled=!0,Xt.overrideTotalTime(wn.totalTime),void T.push(Xt);let dr=MO;if(xn.size>1){let Ro=Gt;const Qs=[];for(;Ro=Ro.parentNode;){const lr=xn.get(Ro);if(lr){dr=lr;break}Qs.push(Ro)}Qs.forEach(lr=>xn.set(lr,dr))}const Bi=this._buildAnimation(Xt.namespaceId,wn,Dn,D,ai,io);if(Xt.setRealPlayer(Bi),dr===MO)ji.push(Xt);else{const Ro=this.playersByElement.get(dr);Ro&&Ro.length&&(Xt.parentPlayer=Os(Ro)),T.push(Xt)}}else wa(Gt,wn.fromStyles),Xt.onDestroy(()=>Di(Gt,wn.toStyles)),IO.push(Xt),N.has(Gt)&&T.push(Xt)}),IO.forEach(Vt=>{const Gt=D.get(Vt.element);if(Gt&&Gt.length){const Xt=Os(Gt);Vt.setRealPlayer(Xt)}}),T.forEach(Vt=>{Vt.parentPlayer?Vt.syncPlayerEvents(Vt.parentPlayer):Vt.destroy()});for(let Vt=0;Vt<Ce.length;Vt++){const Gt=Ce[Vt],Xt=Gt[ri];if(Uc(Gt,Eh),Xt&&Xt.hasAnimation)continue;let wn=[];if(M.size){let Bi=M.get(Gt);Bi&&Bi.length&&wn.push(...Bi);let Ro=this.driver.query(Gt,bv,!0);for(let Qs=0;Qs<Ro.length;Qs++){let lr=M.get(Ro[Qs]);lr&&lr.length&&wn.push(...lr)}}const dr=wn.filter(Bi=>!Bi.destroyed);dr.length?l8(this,Gt,dr):this.processLeaveNode(Gt)}return Ce.length=0,ji.forEach(Vt=>{this.players.push(Vt),Vt.onDone(()=>{Vt.destroy();const Gt=this.players.indexOf(Vt);this.players.splice(Gt,1)}),Vt.play()}),ji}afterFlush(_){this._flushFns.push(_)}afterFlushAnimationsDone(_){this._whenQuietFns.push(_)}_getPreviousPlayers(_,S,C,T,D){let I=[];if(S){const M=this.playersByQueriedElement.get(_);M&&(I=M)}else{const M=this.playersByElement.get(_);if(M){const A=!D||D==Ou;M.forEach(R=>{R.queued||!A&&R.triggerName!=T||I.push(R)})}}return(C||T)&&(I=I.filter(M=>!(C&&C!=M.namespaceId||T&&T!=M.triggerName))),I}_beforeAnimationBuild(_,S,C){const D=S.element,I=S.isRemovalTransition?void 0:_,M=S.isRemovalTransition?void 0:S.triggerName;for(const A of S.timelines){const R=A.element,N=R!==D,O=Io(C,R,[]);this._getPreviousPlayers(R,N,I,M,S.toState).forEach($=>{const Q=$.getRealPlayer();Q.beforeDestroy&&Q.beforeDestroy(),$.destroy(),O.push($)})}wa(D,S.fromStyles)}_buildAnimation(_,S,C,T,D,I){const M=S.triggerName,A=S.element,R=[],N=new Set,O=new Set,F=S.timelines.map(Q=>{const ae=Q.element;N.add(ae);const Ce=ae[ri];if(Ce&&Ce.removedBeforeQueried)return new Ru(Q.duration,Q.delay);const Ee=ae!==A,Ae=function u8(y){const _=[];return xM(y,_),_}((C.get(ae)||n8).map(Dn=>Dn.getRealPlayer())).filter(Dn=>!!Dn.element&&Dn.element===ae),ht=D.get(ae),vt=I.get(ae),$t=fM(this._normalizer,Q.keyframes,ht,vt),An=this._buildPlayer(Q,$t,Ae);if(Q.subTimeline&&T&&O.add(ae),Ee){const Dn=new Fv(_,M,ae);Dn.setRealPlayer(An),R.push(Dn)}return An});R.forEach(Q=>{Io(this.playersByQueriedElement,Q.element,[]).push(Q),Q.onDone(()=>function s8(y,_,S){let C=y.get(_);if(C){if(C.length){const T=C.indexOf(S);C.splice(T,1)}0==C.length&&y.delete(_)}return C}(this.playersByQueriedElement,Q.element,Q))}),N.forEach(Q=>Fo(Q,vM));const $=Os(F);return $.onDestroy(()=>{N.forEach(Q=>Uc(Q,vM)),Di(A,S.toStyles)}),O.forEach(Q=>{Io(T,Q,[]).push($)}),$}_buildPlayer(_,S,C){return S.length>0?this.driver.animate(_.element,S,_.duration,_.delay,_.easing,C):new Ru(_.duration,_.delay)}}class Fv{constructor(_,S,C){this.namespaceId=_,this.triggerName=S,this.element=C,this._player=new Ru,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.parentPlayer=null,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(_){this._containsRealPlayer||(this._player=_,this._queuedCallbacks.forEach((S,C)=>{S.forEach(T=>gv(_,C,void 0,T))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(_.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(_){this.totalTime=_}syncPlayerEvents(_){const S=this._player;S.triggerCallback&&_.onStart(()=>S.triggerCallback("start")),_.onDone(()=>this.finish()),_.onDestroy(()=>this.destroy())}_queueEvent(_,S){Io(this._queuedCallbacks,_,[]).push(S)}onDone(_){this.queued&&this._queueEvent("done",_),this._player.onDone(_)}onStart(_){this.queued&&this._queueEvent("start",_),this._player.onStart(_)}onDestroy(_){this.queued&&this._queueEvent("destroy",_),this._player.onDestroy(_)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(_){this.queued||this._player.setPosition(_)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(_){const S=this._player;S.triggerCallback&&S.triggerCallback(_)}}function xh(y){return y&&1===y.nodeType}function NM(y,_){const S=y.style.display;return y.style.display=null!=_?_:"none",S}function OM(y,_,S,C,T){const D=[];S.forEach(A=>D.push(NM(A)));const I=[];C.forEach((A,R)=>{const N=new Map;A.forEach(O=>{const F=_.computeStyle(R,O,T);N.set(O,F),(!F||0==F.length)&&(R[ri]=r8,I.push(R))}),y.set(R,N)});let M=0;return S.forEach(A=>NM(A,D[M++])),I}function kM(y,_){const S=new Map;if(y.forEach(M=>S.set(M,[])),0==_.length)return S;const T=new Set(_),D=new Map;function I(M){if(!M)return 1;let A=D.get(M);if(A)return A;const R=M.parentNode;return A=S.has(R)?R:T.has(R)?1:I(R),D.set(M,A),A}return _.forEach(M=>{const A=I(M);1!==A&&S.get(A).push(M)}),S}function Fo(y,_){var S;null===(S=y.classList)||void 0===S||S.add(_)}function Uc(y,_){var S;null===(S=y.classList)||void 0===S||S.remove(_)}function l8(y,_,S){Os(S).onDone(()=>y.processLeaveNode(_))}function xM(y,_){for(let S=0;S<y.length;S++){const C=y[S];C instanceof cM?xM(C.players,_):_.push(C)}}function FM(y,_,S){const C=S.get(y);if(!C)return!1;let T=_.get(y);return T?C.forEach(D=>T.add(D)):_.set(y,C),S.delete(y),!0}class ku{constructor(_,S,C,T){this._driver=S,this._normalizer=C,this._triggerCache={},this.onRemovalComplete=(D,I)=>{},this._transitionEngine=new i8(_.body,S,C,T),this._timelineEngine=new X4(_.body,S,C),this._transitionEngine.onRemovalComplete=(D,I)=>this.onRemovalComplete(D,I)}registerTrigger(_,S,C,T,D){const I=_+"-"+T;let M=this._triggerCache[I];if(!M){const A=[],N=Iv(this._driver,D,A,[]);if(A.length)throw function e4(y,_){return new j(3404,!1)}();M=function G4(y,_,S){return new K4(y,_,S)}(T,N,this._normalizer),this._triggerCache[I]=M}this._transitionEngine.registerTrigger(S,T,M)}register(_,S){this._transitionEngine.register(_,S)}destroy(_,S){this._transitionEngine.destroy(_,S)}onInsert(_,S,C,T){this._transitionEngine.insertNode(_,S,C,T)}onRemove(_,S,C){this._transitionEngine.removeNode(_,S,C)}disableAnimations(_,S){this._transitionEngine.markElementAsDisabled(_,S)}process(_,S,C,T){if("@"==C.charAt(0)){const[D,I]=hM(C);this._timelineEngine.command(D,S,I,T)}else this._transitionEngine.trigger(_,S,C,T)}listen(_,S,C,T,D){if("@"==C.charAt(0)){const[I,M]=hM(C);return this._timelineEngine.listen(I,S,M,D)}return this._transitionEngine.listen(_,S,C,T,D)}flush(_=-1){this._transitionEngine.flush(_)}get players(){return[...this._transitionEngine.players,...this._timelineEngine.players]}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}afterFlushAnimationsDone(_){this._transitionEngine.afterFlushAnimationsDone(_)}}class Vc{constructor(_,S,C){this._element=_,this._startStyles=S,this._endStyles=C,this._state=0;let T=Vc.initialStylesByElement.get(_);T||Vc.initialStylesByElement.set(_,T=new Map),this._initialStyles=T}start(){this._state<1&&(this._startStyles&&Di(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(Di(this._element,this._initialStyles),this._endStyles&&(Di(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(Vc.initialStylesByElement.delete(this._element),this._startStyles&&(wa(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(wa(this._element,this._endStyles),this._endStyles=null),Di(this._element,this._initialStyles),this._state=3)}}function Lv(y){let _=null;return y.forEach((S,C)=>{(function h8(y){return"display"===y||"position"===y})(C)&&(_=_||new Map,_.set(C,S))}),_}Vc.initialStylesByElement=new WeakMap;class LM{constructor(_,S,C,T){this.element=_,this.keyframes=S,this.options=C,this._specialStyles=T,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=C.duration,this._delay=C.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(_=>_()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const _=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,_,this.options),this._finalKeyframe=_.length?_[_.length-1]:new Map;const S=()=>this._onFinish();this.domPlayer.addEventListener("finish",S),this.onDestroy(()=>{this.domPlayer.removeEventListener("finish",S)})}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(_){const S=[];return _.forEach(C=>{S.push(Object.fromEntries(C))}),S}_triggerWebAnimation(_,S,C){return _.animate(this._convertKeyframesToObject(S),C)}onStart(_){this._originalOnStartFns.push(_),this._onStartFns.push(_)}onDone(_){this._originalOnDoneFns.push(_),this._onDoneFns.push(_)}onDestroy(_){this._onDestroyFns.push(_)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(_=>_()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(_=>_()),this._onDestroyFns=[])}setPosition(_){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=_*this.time}getPosition(){var _;return+(null!==(_=this.domPlayer.currentTime)&&void 0!==_?_:0)/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const _=new Map;this.hasStarted()&&this._finalKeyframe.forEach((C,T)=>{"offset"!==T&&_.set(T,this._finished?C:Dv(this.element,T))}),this.currentSnapshot=_}triggerCallback(_){const S="start"===_?this._onStartFns:this._onDoneFns;S.forEach(C=>C()),S.length=0}}class UM{validateStyleProperty(_){return!0}validateAnimatableStyleProperty(_){return!0}matchesElement(_,S){return!1}containsElement(_,S){return gM(_,S)}getParentElement(_){return vv(_)}query(_,S,C){return mM(_,S,C)}computeStyle(_,S,C){return Dv(_,S)}animate(_,S,C,T,D,I=[]){const A={duration:C,delay:T,fill:0==T?"both":"forwards"};D&&(A.easing=D);const R=new Map,N=I.filter($=>$ instanceof LM);(function T4(y,_){return 0===y||0===_})(C,T)&&N.forEach($=>{$.currentSnapshot.forEach((Q,ae)=>R.set(ae,Q))});let O=function w4(y){return y.length?y[0]instanceof Map?y:y.map(_=>new Map(Object.entries(_))):[]}(S).map($=>new Map($));O=function E4(y,_,S){if(S.size&&_.length){let C=_[0],T=[];if(S.forEach((D,I)=>{C.has(I)||T.push(I),C.set(I,D)}),T.length)for(let D=1;D<_.length;D++){let I=_[D];T.forEach(M=>I.set(M,Dv(y,M)))}}return _}(_,O,R);const F=function f8(y,_){let S=null,C=null;return Array.isArray(_)&&_.length?(S=Lv(_[0]),_.length>1&&(C=Lv(_[_.length-1]))):_ instanceof Map&&(S=Lv(_)),S||C?new Vc(y,S,C):null}(_,O);return new LM(_,O,A,F)}}const VM="@.disabled";class jM{constructor(_,S,C,T){this.namespaceId=_,this.delegate=S,this.engine=C,this._onDestroy=T,this.\u0275type=0}get data(){return this.delegate.data}destroyNode(_){var S,C;null===(S=(C=this.delegate).destroyNode)||void 0===S||S.call(C,_)}destroy(){var _;this.engine.destroy(this.namespaceId,this.delegate),this.engine.afterFlushAnimationsDone(()=>{queueMicrotask(()=>{this.delegate.destroy()})}),null===(_=this._onDestroy)||void 0===_||_.call(this)}createElement(_,S){return this.delegate.createElement(_,S)}createComment(_){return this.delegate.createComment(_)}createText(_){return this.delegate.createText(_)}appendChild(_,S){this.delegate.appendChild(_,S),this.engine.onInsert(this.namespaceId,S,_,!1)}insertBefore(_,S,C,T=!0){this.delegate.insertBefore(_,S,C),this.engine.onInsert(this.namespaceId,S,_,T)}removeChild(_,S,C){this.engine.onRemove(this.namespaceId,S,this.delegate)}selectRootElement(_,S){return this.delegate.selectRootElement(_,S)}parentNode(_){return this.delegate.parentNode(_)}nextSibling(_){return this.delegate.nextSibling(_)}setAttribute(_,S,C,T){this.delegate.setAttribute(_,S,C,T)}removeAttribute(_,S,C){this.delegate.removeAttribute(_,S,C)}addClass(_,S){this.delegate.addClass(_,S)}removeClass(_,S){this.delegate.removeClass(_,S)}setStyle(_,S,C,T){this.delegate.setStyle(_,S,C,T)}removeStyle(_,S,C){this.delegate.removeStyle(_,S,C)}setProperty(_,S,C){"@"==S.charAt(0)&&S==VM?this.disableAnimations(_,!!C):this.delegate.setProperty(_,S,C)}setValue(_,S){this.delegate.setValue(_,S)}listen(_,S,C){return this.delegate.listen(_,S,C)}disableAnimations(_,S){this.engine.disableAnimations(_,S)}}class p8 extends jM{constructor(_,S,C,T,D){super(S,C,T,D),this.factory=_,this.namespaceId=S}setProperty(_,S,C){"@"==S.charAt(0)?"."==S.charAt(1)&&S==VM?this.disableAnimations(_,C=void 0===C||!!C):this.engine.process(this.namespaceId,_,S.slice(1),C):this.delegate.setProperty(_,S,C)}listen(_,S,C){if("@"==S.charAt(0)){const T=function g8(y){switch(y){case"body":return document.body;case"document":return document;case"window":return window;default:return y}}(_);let D=S.slice(1),I="";return"@"!=D.charAt(0)&&([D,I]=function m8(y){const _=y.indexOf(".");return[y.substring(0,_),y.slice(_+1)]}(D)),this.engine.listen(this.namespaceId,T,D,I,M=>{this.factory.scheduleListenerCallback(M._data||-1,C,M)})}return this.delegate.listen(_,S,C)}}class y8{constructor(_,S,C){this.delegate=_,this.engine=S,this._zone=C,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,S.onRemovalComplete=(T,D)=>{const I=null==D?void 0:D.parentNode(T);I&&D.removeChild(I,T)}}createRenderer(_,S){var C;const D=this.delegate.createRenderer(_,S);if(!_||null==S||null===(C=S.data)||void 0===C||!C.animation){const N=this._rendererCache;let O=N.get(D);return O||(O=new jM("",D,this.engine,()=>N.delete(D)),N.set(D,O)),O}const I=S.id,M=S.id+"-"+this._currentId;this._currentId++,this.engine.register(M,_);const A=N=>{Array.isArray(N)?N.forEach(A):this.engine.registerTrigger(I,M,_,N.name,N)};return S.data.animation.forEach(A),new p8(this,M,D,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){queueMicrotask(()=>{this._microtaskId++})}scheduleListenerCallback(_,S,C){if(_>=0&&_<this._microtaskId)return void this._zone.run(()=>S(C));const T=this._animationCallbacksBuffer;0==T.length&&queueMicrotask(()=>{this._zone.run(()=>{T.forEach(D=>{const[I,M]=D;I(M)}),this._animationCallbacksBuffer=[]})}),T.push([S,C])}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}let v8=(()=>{var y;class _ extends ku{constructor(C,T,D){super(C,T,D,at(Ef,{optional:!0}))}ngOnDestroy(){this.flush()}}return(y=_).\u0275fac=function(C){return new(C||y)(Ft(go),Ft(Th),Ft(Cv))},y.\u0275prov=At({token:y,factory:y.\u0275fac}),_})();const BM=[{provide:Cv,useFactory:function _8(){return new wM}},{provide:ku,useClass:v8},{provide:Tm,useFactory:function C8(y,_,S){return new y8(y,_,S)},deps:[dv,ku,Pn]}],Uv=[{provide:Th,useFactory:()=>new UM},{provide:Mw,useValue:"BrowserAnimations"},...BM],$M=[{provide:Th,useClass:_v},{provide:Mw,useValue:"NoopAnimations"},...BM];let w8=(()=>{var y;class _{static withConfig(C){return{ngModule:_,providers:C.disableAnimations?$M:Uv}}}return(y=_).\u0275fac=function(C){return new(C||y)},y.\u0275mod=Wo({type:y}),y.\u0275inj=Po({providers:Uv,imports:[rM]}),_})();function Ii(y,_){var S={};for(var C in y)Object.prototype.hasOwnProperty.call(y,C)&&_.indexOf(C)<0&&(S[C]=y[C]);if(null!=y&&"function"==typeof Object.getOwnPropertySymbols){var T=0;for(C=Object.getOwnPropertySymbols(y);T<C.length;T++)_.indexOf(C[T])<0&&Object.prototype.propertyIsEnumerable.call(y,C[T])&&(S[C[T]]=y[C[T]])}return S}function Sn(y){return this instanceof Sn?(this.v=y,this):new Sn(y)}function Mi(y,_,S){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var T,C=S.apply(y,_||[]),D=[];return T=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),M("next"),M("throw"),M("return",function I($){return function(Q){return Promise.resolve(Q).then($,O)}}),T[Symbol.asyncIterator]=function(){return this},T;function M($,Q){C[$]&&(T[$]=function(ae){return new Promise(function(Ce,Ee){D.push([$,ae,Ce,Ee])>1||A($,ae)})},Q&&(T[$]=Q(T[$])))}function A($,Q){try{!function R($){$.value instanceof Sn?Promise.resolve($.value.v).then(N,O):F(D[0][2],$)}(C[$](Q))}catch(ae){F(D[0][3],ae)}}function N($){A("next",$)}function O($){A("throw",$)}function F($,Q){$(Q),D.shift(),D.length&&A(D[0][0],D[0][1])}}function xu(y){var _,S;return _={},C("next"),C("throw",function(T){throw T}),C("return"),_[Symbol.iterator]=function(){return this},_;function C(T,D){_[T]=y[T]?function(I){return(S=!S)?{value:Sn(y[T](I)),done:!1}:D?D(I):I}:D}}function Ai(y){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var S,_=y[Symbol.asyncIterator];return _?_.call(y):(y=function $v(y){var _="function"==typeof Symbol&&Symbol.iterator,S=_&&y[_],C=0;if(S)return S.call(y);if(y&&"number"==typeof y.length)return{next:function(){return y&&C>=y.length&&(y=void 0),{value:y&&y[C++],done:!y}}};throw new TypeError(_?"Object is not iterable.":"Symbol.iterator is not defined.")}(y),S={},C("next"),C("throw"),C("return"),S[Symbol.asyncIterator]=function(){return this},S);function C(D){S[D]=y[D]&&function(I){return new Promise(function(M,A){!function T(D,I,M,A){Promise.resolve(A).then(function(R){D({value:R,done:M})},I)}(M,A,(I=y[D](I)).done,I.value)})}}}"function"==typeof SuppressedError&&SuppressedError;const qM=y=>y&&"number"==typeof y.length&&"function"!=typeof y;function WM(y){return re(null==y?void 0:y.then)}function GM(y){return re(y[zi])}function KM(y){return Symbol.asyncIterator&&re(null==y?void 0:y[Symbol.asyncIterator])}function JM(y){return new TypeError("You provided ".concat(null!==y&&"object"==typeof y?"an invalid object":"'".concat(y,"'")," where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable."))}const QM=function G8(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function XM(y){return re(null==y?void 0:y[QM])}function YM(y){return Mi(this,arguments,function*(){const S=y.getReader();try{for(;;){const{value:C,done:T}=yield Sn(S.read());if(T)return yield Sn(void 0);yield yield Sn(C)}}finally{S.releaseLock()}})}function ZM(y){return re(null==y?void 0:y.getReader)}function Ri(y){if(y instanceof Kn)return y;if(null!=y){if(GM(y))return function K8(y){return new Kn(_=>{const S=y[zi]();if(re(S.subscribe))return S.subscribe(_);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(y);if(qM(y))return function J8(y){return new Kn(_=>{for(let S=0;S<y.length&&!_.closed;S++)_.next(y[S]);_.complete()})}(y);if(WM(y))return function Q8(y){return new Kn(_=>{y.then(S=>{_.closed||(_.next(S),_.complete())},S=>_.error(S)).then(null,me)})}(y);if(KM(y))return eA(y);if(XM(y))return function X8(y){return new Kn(_=>{for(const S of y)if(_.next(S),_.closed)return;_.complete()})}(y);if(ZM(y))return function Y8(y){return eA(YM(y))}(y)}throw JM(y)}function eA(y){return new Kn(_=>{(function Z8(y,_){var S,C,T,D;return function HM(y,_,S,C){return new(S||(S=Promise))(function(D,I){function M(N){try{R(C.next(N))}catch(O){I(O)}}function A(N){try{R(C.throw(N))}catch(O){I(O)}}function R(N){N.done?D(N.value):function T(D){return D instanceof S?D:new S(function(I){I(D)})}(N.value).then(M,A)}R((C=C.apply(y,_||[])).next())})}(this,void 0,void 0,function*(){try{for(S=Ai(y);!(C=yield S.next()).done;)if(_.next(C.value),_.closed)return}catch(I){T={error:I}}finally{try{C&&!C.done&&(D=S.return)&&(yield D.call(S))}finally{if(T)throw T.error}}_.complete()})})(y,_).catch(S=>_.error(S))})}function ls(y,_,S,C=0,T=!1){const D=_.schedule(function(){S(),T?y.add(this.schedule(null,C)):this.unsubscribe()},C);if(y.add(D),!T)return D}function tA(y,_=0){return he((S,C)=>{S.subscribe(Te(C,T=>ls(C,y,()=>C.next(T),_),()=>ls(C,y,()=>C.complete(),_),T=>ls(C,y,()=>C.error(T),_)))})}function nA(y,_=0){return he((S,C)=>{C.add(y.schedule(()=>S.subscribe(C),_))})}function rA(y,_){if(!y)throw new Error("Iterable cannot be null");return new Kn(S=>{ls(S,_,()=>{const C=y[Symbol.asyncIterator]();ls(S,_,()=>{C.next().then(T=>{T.done?S.complete():S.next(T.value)})},0,!0)})})}function br(y,_){return _?function iq(y,_){if(null!=y){if(GM(y))return function eq(y,_){return Ri(y).pipe(nA(_),tA(_))}(y,_);if(qM(y))return function nq(y,_){return new Kn(S=>{let C=0;return _.schedule(function(){C===y.length?S.complete():(S.next(y[C++]),S.closed||this.schedule())})})}(y,_);if(WM(y))return function tq(y,_){return Ri(y).pipe(nA(_),tA(_))}(y,_);if(KM(y))return rA(y,_);if(XM(y))return function rq(y,_){return new Kn(S=>{let C;return ls(S,_,()=>{C=y[QM](),ls(S,_,()=>{let T,D;try{({value:T,done:D}=C.next())}catch(I){return void S.error(I)}D?S.complete():S.next(T)},0,!0)}),()=>re(null==C?void 0:C.return)&&C.return()})}(y,_);if(ZM(y))return function oq(y,_){return rA(YM(y),_)}(y,_)}throw JM(y)}(y,_):Ri(y)}function zv(y){return y[y.length-1]}function oA(y){return re(zv(y))?y.pop():void 0}function Lh(y){return function sq(y){return y&&re(y.schedule)}(zv(y))?y.pop():void 0}function nn(...y){return br(y,Lh(y))}const{isArray:aq}=Array,{getPrototypeOf:cq,prototype:lq,keys:uq}=Object;function iA(y){if(1===y.length){const _=y[0];if(aq(_))return{args:_,keys:null};if(function dq(y){return y&&"object"==typeof y&&cq(y)===lq}(_)){const S=uq(_);return{args:S.map(C=>_[C]),keys:S}}}return{args:y,keys:null}}const{isArray:fq}=Array;function sA(y){return k(_=>function hq(y,_){return fq(_)?y(..._):y(_)}(y,_))}function aA(y,_){return y.reduce((S,C,T)=>(S[C]=_[T],S),{})}function qv(...y){const _=Lh(y),S=oA(y),{args:C,keys:T}=iA(y);if(0===C.length)return br([],_);const D=new Kn(function pq(y,_,S=so){return C=>{cA(_,()=>{const{length:T}=y,D=new Array(T);let I=T,M=T;for(let A=0;A<T;A++)cA(_,()=>{const R=br(y[A],_);let N=!1;R.subscribe(Te(C,O=>{D[A]=O,N||(N=!0,M--),M||C.next(S(D.slice()))},()=>{--I||C.complete()}))},C)},C)}}(C,_,T?I=>aA(T,I):so));return S?D.pipe(sA(S)):D}function cA(y,_,S){y?ls(S,y,_):_()}const Fu=We(y=>function(){y(this),this.name="EmptyError",this.message="no elements in sequence"});function Hr(y,_,S=1/0){return re(_)?Hr((C,T)=>k((D,I)=>_(C,D,T,I))(Ri(y(C,T))),S):("number"==typeof _&&(S=_),he((C,T)=>function gq(y,_,S,C,T,D,I,M){const A=[];let R=0,N=0,O=!1;const F=()=>{O&&!A.length&&!R&&_.complete()},$=ae=>R<C?Q(ae):A.push(ae),Q=ae=>{D&&_.next(ae),R++;let Ce=!1;Ri(S(ae,N++)).subscribe(Te(_,Ee=>{null==T||T(Ee),D?$(Ee):_.next(Ee)},()=>{Ce=!0},void 0,()=>{if(Ce)try{for(R--;A.length&&R<C;){const Ee=A.shift();I?ls(_,I,()=>Q(Ee)):Q(Ee)}F()}catch(Ee){_.error(Ee)}}))};return y.subscribe(Te(_,$,()=>{O=!0,F()})),()=>{null==M||M()}}(C,T,y,S)))}function Lu(y=1/0){return Hr(so,y)}function Wv(...y){return function mq(){return Lu(1)}()(br(y,Lh(y)))}function lA(y){return new Kn(_=>{Ri(y()).subscribe(_)})}function ks(y,_){const S=re(y)?y:()=>y,C=T=>T.error(S());return new Kn(_?T=>_.schedule(C,0,T):C)}const Pi=new Kn(y=>y.complete());function Gv(){return he((y,_)=>{let S=null;y._refCount++;const C=Te(_,void 0,void 0,void 0,()=>{if(!y||y._refCount<=0||0<--y._refCount)return void(S=null);const T=y._connection,D=S;S=null,T&&(!D||T===D)&&T.unsubscribe(),_.unsubscribe()});y.subscribe(C),C.closed||(S=y.connect())})}class uA extends Kn{constructor(_,S){super(),this.source=_,this.subjectFactory=S,this._subject=null,this._refCount=0,this._connection=null,ce(_)&&(this.lift=_.lift)}_subscribe(_){return this.getSubject().subscribe(_)}getSubject(){const _=this._subject;return(!_||_.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:_}=this;this._subject=this._connection=null,null==_||_.unsubscribe()}connect(){let _=this._connection;if(!_){_=this._connection=new Ze;const S=this.getSubject();_.add(this.source.subscribe(Te(S,void 0,()=>{this._teardown(),S.complete()},C=>{this._teardown(),S.error(C)},()=>this._teardown()))),_.closed&&(this._connection=null,_=Ze.EMPTY)}return _}refCount(){return Gv()(this)}}function Lo(y,_){return he((S,C)=>{let T=null,D=0,I=!1;const M=()=>I&&!T&&C.complete();S.subscribe(Te(C,A=>{null==T||T.unsubscribe();let R=0;const N=D++;Ri(y(A,N)).subscribe(T=Te(C,O=>C.next(_?_(A,O,N,R++):O),()=>{T=null,M()}))},()=>{I=!0,M()}))})}function jc(y){return y<=0?()=>Pi:he((_,S)=>{let C=0;_.subscribe(Te(S,T=>{++C<=y&&(S.next(T),y<=C&&S.complete())}))})}function us(y,_){return he((S,C)=>{let T=0;S.subscribe(Te(C,D=>y.call(_,D,T++)&&C.next(D)))})}function Uh(y){return he((_,S)=>{let C=!1;_.subscribe(Te(S,T=>{C=!0,S.next(T)},()=>{C||S.next(y),S.complete()}))})}function dA(y=_q){return he((_,S)=>{let C=!1;_.subscribe(Te(S,T=>{C=!0,S.next(T)},()=>C?S.complete():S.error(y())))})}function _q(){return new Fu}function Sa(y,_){const S=arguments.length>=2;return C=>C.pipe(y?us((T,D)=>y(T,D,C)):so,jc(1),S?Uh(_):dA(()=>new Fu))}function Bc(y,_){return re(_)?Hr(y,_,1):Hr(y,1)}function ro(y,_,S){const C=re(y)||_||S?{next:y,error:_,complete:S}:y;return C?he((T,D)=>{var I;null===(I=C.subscribe)||void 0===I||I.call(C);let M=!0;T.subscribe(Te(D,A=>{var R;null===(R=C.next)||void 0===R||R.call(C,A),D.next(A)},()=>{var A;M=!1,null===(A=C.complete)||void 0===A||A.call(C),D.complete()},A=>{var R;M=!1,null===(R=C.error)||void 0===R||R.call(C,A),D.error(A)},()=>{var A,R;M&&(null===(A=C.unsubscribe)||void 0===A||A.call(C)),null===(R=C.finalize)||void 0===R||R.call(C)}))}):so}function xs(y){return he((_,S)=>{let D,C=null,T=!1;C=_.subscribe(Te(S,void 0,void 0,I=>{D=Ri(y(I,xs(y)(_))),C?(C.unsubscribe(),C=null,D.subscribe(S)):T=!0})),T&&(C.unsubscribe(),C=null,D.subscribe(S))})}function Kv(y){return y<=0?()=>Pi:he((_,S)=>{let C=[];_.subscribe(Te(S,T=>{C.push(T),y<C.length&&C.shift()},()=>{for(const T of C)S.next(T);S.complete()},void 0,()=>{C=null}))})}function Uu(y){return he((_,S)=>{try{_.subscribe(S)}finally{S.add(y)}})}function $c(y){return he((_,S)=>{Ri(y).subscribe(Te(S,()=>S.complete(),ue)),!S.closed&&_.subscribe(S)})}const fn="primary",Vu=Symbol("RouteTitle");class Tq{constructor(_){this.params=_||{}}has(_){return Object.prototype.hasOwnProperty.call(this.params,_)}get(_){if(this.has(_)){const S=this.params[_];return Array.isArray(S)?S[0]:S}return null}getAll(_){if(this.has(_)){const S=this.params[_];return Array.isArray(S)?S:[S]}return[]}get keys(){return Object.keys(this.params)}}function Hc(y){return new Tq(y)}function Eq(y,_,S){const C=S.path.split("/");if(C.length>y.length||"full"===S.pathMatch&&(_.hasChildren()||C.length<y.length))return null;const T={};for(let D=0;D<C.length;D++){const I=C[D],M=y[D];if(I.startsWith(":"))T[I.substring(1)]=M;else if(I!==M.path)return null}return{consumed:y.slice(0,C.length),posParams:T}}function Ni(y,_){const S=y?Jv(y):void 0,C=_?Jv(_):void 0;if(!S||!C||S.length!=C.length)return!1;let T;for(let D=0;D<S.length;D++)if(T=S[D],!fA(y[T],_[T]))return!1;return!0}function Jv(y){return[...Object.keys(y),...Object.getOwnPropertySymbols(y)]}function fA(y,_){if(Array.isArray(y)&&Array.isArray(_)){if(y.length!==_.length)return!1;const S=[...y].sort(),C=[..._].sort();return S.every((T,D)=>C[D]===T)}return y===_}function hA(y){return y.length>0?y[y.length-1]:null}function Fs(y){return function b8(y){return!!y&&(y instanceof Kn||re(y.lift)&&re(y.subscribe))}(y)?y:vu(y)?br(Promise.resolve(y)):nn(y)}const Iq={exact:function mA(y,_,S){if(!Ta(y.segments,_.segments)||!Vh(y.segments,_.segments,S)||y.numberOfChildren!==_.numberOfChildren)return!1;for(const C in _.children)if(!y.children[C]||!mA(y.children[C],_.children[C],S))return!1;return!0},subset:yA},pA={exact:function Mq(y,_){return Ni(y,_)},subset:function Aq(y,_){return Object.keys(_).length<=Object.keys(y).length&&Object.keys(_).every(S=>fA(y[S],_[S]))},ignored:()=>!0};function gA(y,_,S){return Iq[S.paths](y.root,_.root,S.matrixParams)&&pA[S.queryParams](y.queryParams,_.queryParams)&&!("exact"===S.fragment&&y.fragment!==_.fragment)}function yA(y,_,S){return vA(y,_,_.segments,S)}function vA(y,_,S,C){if(y.segments.length>S.length){const T=y.segments.slice(0,S.length);return!(!Ta(T,S)||_.hasChildren()||!Vh(T,S,C))}if(y.segments.length===S.length){if(!Ta(y.segments,S)||!Vh(y.segments,S,C))return!1;for(const T in _.children)if(!y.children[T]||!yA(y.children[T],_.children[T],C))return!1;return!0}{const T=S.slice(0,y.segments.length),D=S.slice(y.segments.length);return!!(Ta(y.segments,T)&&Vh(y.segments,T,C)&&y.children[fn])&&vA(y.children[fn],_,D,C)}}function Vh(y,_,S){return _.every((C,T)=>pA[S](y[T].parameters,C.parameters))}class zc{constructor(_=new $n([],{}),S={},C=null){this.root=_,this.queryParams=S,this.fragment=C}get queryParamMap(){var _;return null!==(_=this._queryParamMap)&&void 0!==_||(this._queryParamMap=Hc(this.queryParams)),this._queryParamMap}toString(){return Nq.serialize(this)}}class $n{constructor(_,S){this.segments=_,this.children=S,this.parent=null,Object.values(S).forEach(C=>C.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return jh(this)}}class ju{constructor(_,S){this.path=_,this.parameters=S}get parameterMap(){var _;return null!==(_=this._parameterMap)&&void 0!==_||(this._parameterMap=Hc(this.parameters)),this._parameterMap}toString(){return wA(this)}}function Ta(y,_){return y.length===_.length&&y.every((S,C)=>S.path===_[C].path)}let qc=(()=>{var y;class _{}return(y=_).\u0275fac=function(C){return new(C||y)},y.\u0275prov=At({token:y,factory:()=>new Qv,providedIn:"root"}),_})();class Qv{parse(_){const S=new Hq(_);return new zc(S.parseRootSegment(),S.parseQueryParams(),S.parseFragment())}serialize(_){const S="/".concat(Bu(_.root,!0)),C=function xq(y){const _=Object.entries(y).map(([S,C])=>Array.isArray(C)?C.map(T=>"".concat(Bh(S),"=").concat(Bh(T))).join("&"):"".concat(Bh(S),"=").concat(Bh(C))).filter(S=>S);return _.length?"?".concat(_.join("&")):""}(_.queryParams),T="string"==typeof _.fragment?"#".concat(function Oq(y){return encodeURI(y)}(_.fragment)):"";return"".concat(S).concat(C).concat(T)}}const Nq=new Qv;function jh(y){return y.segments.map(_=>wA(_)).join("/")}function Bu(y,_){if(!y.hasChildren())return jh(y);if(_){const S=y.children[fn]?Bu(y.children[fn],!1):"",C=[];return Object.entries(y.children).forEach(([T,D])=>{T!==fn&&C.push("".concat(T,":").concat(Bu(D,!1)))}),C.length>0?"".concat(S,"(").concat(C.join("//"),")"):S}{const S=function Pq(y,_){let S=[];return Object.entries(y.children).forEach(([C,T])=>{C===fn&&(S=S.concat(_(T,C)))}),Object.entries(y.children).forEach(([C,T])=>{C!==fn&&(S=S.concat(_(T,C)))}),S}(y,(C,T)=>T===fn?[Bu(y.children[fn],!1)]:["".concat(T,":").concat(Bu(C,!1))]);return 1===Object.keys(y.children).length&&null!=y.children[fn]?"".concat(jh(y),"/").concat(S[0]):"".concat(jh(y),"/(").concat(S.join("//"),")")}}function _A(y){return encodeURIComponent(y).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Bh(y){return _A(y).replace(/%3B/gi,";")}function Xv(y){return _A(y).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function $h(y){return decodeURIComponent(y)}function CA(y){return $h(y.replace(/\+/g,"%20"))}function wA(y){return"".concat(Xv(y.path)).concat(function kq(y){return Object.entries(y).map(([_,S])=>";".concat(Xv(_),"=").concat(Xv(S))).join("")}(y.parameters))}const Fq=/^[^\/()?;#]+/;function Yv(y){const _=y.match(Fq);return _?_[0]:""}const Lq=/^[^\/()?;=#]+/,Vq=/^[^=?&#]+/,Bq=/^[^&#]+/;class Hq{constructor(_){this.url=_,this.remaining=_}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new $n([],{}):new $n([],this.parseChildren())}parseQueryParams(){const _={};if(this.consumeOptional("?"))do{this.parseQueryParam(_)}while(this.consumeOptional("&"));return _}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const _=[];for(this.peekStartsWith("(")||_.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),_.push(this.parseSegment());let S={};this.peekStartsWith("/(")&&(this.capture("/"),S=this.parseParens(!0));let C={};return this.peekStartsWith("(")&&(C=this.parseParens(!1)),(_.length>0||Object.keys(S).length>0)&&(C[fn]=new $n(_,S)),C}parseSegment(){const _=Yv(this.remaining);if(""===_&&this.peekStartsWith(";"))throw new j(4009,!1);return this.capture(_),new ju($h(_),this.parseMatrixParams())}parseMatrixParams(){const _={};for(;this.consumeOptional(";");)this.parseParam(_);return _}parseParam(_){const S=function Uq(y){const _=y.match(Lq);return _?_[0]:""}(this.remaining);if(!S)return;this.capture(S);let C="";if(this.consumeOptional("=")){const T=Yv(this.remaining);T&&(C=T,this.capture(C))}_[$h(S)]=$h(C)}parseQueryParam(_){const S=function jq(y){const _=y.match(Vq);return _?_[0]:""}(this.remaining);if(!S)return;this.capture(S);let C="";if(this.consumeOptional("=")){const I=function $q(y){const _=y.match(Bq);return _?_[0]:""}(this.remaining);I&&(C=I,this.capture(C))}const T=CA(S),D=CA(C);if(_.hasOwnProperty(T)){let I=_[T];Array.isArray(I)||(I=[I],_[T]=I),I.push(D)}else _[T]=D}parseParens(_){const S={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const C=Yv(this.remaining),T=this.remaining[C.length];if("/"!==T&&")"!==T&&";"!==T)throw new j(4010,!1);let D;C.indexOf(":")>-1?(D=C.slice(0,C.indexOf(":")),this.capture(D),this.capture(":")):_&&(D=fn);const I=this.parseChildren();S[D]=1===Object.keys(I).length?I[fn]:new $n([],I),this.consumeOptional("//")}return S}peekStartsWith(_){return this.remaining.startsWith(_)}consumeOptional(_){return!!this.peekStartsWith(_)&&(this.remaining=this.remaining.substring(_.length),!0)}capture(_){if(!this.consumeOptional(_))throw new j(4011,!1)}}function bA(y){return y.segments.length>0?new $n([],{[fn]:y}):y}function SA(y){const _={};for(const[C,T]of Object.entries(y.children)){const D=SA(T);if(C===fn&&0===D.segments.length&&D.hasChildren())for(const[I,M]of Object.entries(D.children))_[I]=M;else(D.segments.length>0||D.hasChildren())&&(_[C]=D)}return function zq(y){if(1===y.numberOfChildren&&y.children[fn]){const _=y.children[fn];return new $n(y.segments.concat(_.segments),_.children)}return y}(new $n(y.segments,_))}function Wc(y){return y instanceof zc}function TA(y){let _;const T=bA(function S(D){const I={};for(const A of D.children){const R=S(A);I[A.outlet]=R}const M=new $n(D.url,I);return D===y&&(_=M),M}(y.root));return null!=_?_:T}function EA(y,_,S,C){let T=y;for(;T.parent;)T=T.parent;if(0===_.length)return Zv(T,T,T,S,C);const D=function Wq(y){if("string"==typeof y[0]&&1===y.length&&"/"===y[0])return new IA(!0,0,y);let _=0,S=!1;const C=y.reduce((T,D,I)=>{if("object"==typeof D&&null!=D){if(D.outlets){const M={};return Object.entries(D.outlets).forEach(([A,R])=>{M[A]="string"==typeof R?R.split("/"):R}),[...T,{outlets:M}]}if(D.segmentPath)return[...T,D.segmentPath]}return"string"!=typeof D?[...T,D]:0===I?(D.split("/").forEach((M,A)=>{0==A&&"."===M||(0==A&&""===M?S=!0:".."===M?_++:""!=M&&T.push(M))}),T):[...T,D]},[]);return new IA(S,_,C)}(_);if(D.toRoot())return Zv(T,T,new $n([],{}),S,C);const I=function Gq(y,_,S){if(y.isAbsolute)return new zh(_,!0,0);if(!S)return new zh(_,!1,NaN);if(null===S.parent)return new zh(S,!0,0);const C=Hh(y.commands[0])?0:1;return function Kq(y,_,S){let C=y,T=_,D=S;for(;D>T;){if(D-=T,C=C.parent,!C)throw new j(4005,!1);T=C.segments.length}return new zh(C,!1,T-D)}(S,S.segments.length-1+C,y.numberOfDoubleDots)}(D,T,y),M=I.processChildren?Hu(I.segmentGroup,I.index,D.commands):MA(I.segmentGroup,I.index,D.commands);return Zv(T,I.segmentGroup,M,S,C)}function Hh(y){return"object"==typeof y&&null!=y&&!y.outlets&&!y.segmentPath}function $u(y){return"object"==typeof y&&null!=y&&y.outlets}function Zv(y,_,S,C,T){let I,D={};C&&Object.entries(C).forEach(([A,R])=>{D[A]=Array.isArray(R)?R.map(N=>"".concat(N)):"".concat(R)}),I=y===_?S:DA(y,_,S);const M=bA(SA(I));return new zc(M,D,T)}function DA(y,_,S){const C={};return Object.entries(y.children).forEach(([T,D])=>{C[T]=D===_?S:DA(D,_,S)}),new $n(y.segments,C)}class IA{constructor(_,S,C){if(this.isAbsolute=_,this.numberOfDoubleDots=S,this.commands=C,_&&C.length>0&&Hh(C[0]))throw new j(4003,!1);const T=C.find($u);if(T&&T!==hA(C))throw new j(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class zh{constructor(_,S,C){this.segmentGroup=_,this.processChildren=S,this.index=C}}function MA(y,_,S){if(null!=y||(y=new $n([],{})),0===y.segments.length&&y.hasChildren())return Hu(y,_,S);const C=function Qq(y,_,S){let C=0,T=_;const D={match:!1,pathIndex:0,commandIndex:0};for(;T<y.segments.length;){if(C>=S.length)return D;const I=y.segments[T],M=S[C];if($u(M))break;const A="".concat(M),R=C<S.length-1?S[C+1]:null;if(T>0&&void 0===A)break;if(A&&R&&"object"==typeof R&&void 0===R.outlets){if(!RA(A,R,I))return D;C+=2}else{if(!RA(A,{},I))return D;C++}T++}return{match:!0,pathIndex:T,commandIndex:C}}(y,_,S),T=S.slice(C.commandIndex);if(C.match&&C.pathIndex<y.segments.length){const D=new $n(y.segments.slice(0,C.pathIndex),{});return D.children[fn]=new $n(y.segments.slice(C.pathIndex),y.children),Hu(D,0,T)}return C.match&&0===T.length?new $n(y.segments,{}):C.match&&!y.hasChildren()?e_(y,_,S):C.match?Hu(y,0,T):e_(y,_,S)}function Hu(y,_,S){if(0===S.length)return new $n(y.segments,{});{const C=function Jq(y){return $u(y[0])?y[0].outlets:{[fn]:y}}(S),T={};if(Object.keys(C).some(D=>D!==fn)&&y.children[fn]&&1===y.numberOfChildren&&0===y.children[fn].segments.length){const D=Hu(y.children[fn],_,S);return new $n(y.segments,D.children)}return Object.entries(C).forEach(([D,I])=>{"string"==typeof I&&(I=[I]),null!==I&&(T[D]=MA(y.children[D],_,I))}),Object.entries(y.children).forEach(([D,I])=>{void 0===C[D]&&(T[D]=I)}),new $n(y.segments,T)}}function e_(y,_,S){const C=y.segments.slice(0,_);let T=0;for(;T<S.length;){const D=S[T];if($u(D)){const A=Xq(D.outlets);return new $n(C,A)}if(0===T&&Hh(S[0])){C.push(new ju(y.segments[_].path,AA(S[0]))),T++;continue}const I=$u(D)?D.outlets[fn]:"".concat(D),M=T<S.length-1?S[T+1]:null;I&&M&&Hh(M)?(C.push(new ju(I,AA(M))),T+=2):(C.push(new ju(I,{})),T++)}return new $n(C,{})}function Xq(y){const _={};return Object.entries(y).forEach(([S,C])=>{"string"==typeof C&&(C=[C]),null!==C&&(_[S]=e_(new $n([],{}),0,C))}),_}function AA(y){const _={};return Object.entries(y).forEach(([S,C])=>_[S]="".concat(C)),_}function RA(y,_,S){return y==S.path&&Ni(_,S.parameters)}const zu="imperative";var En=function(y){return y[y.NavigationStart=0]="NavigationStart",y[y.NavigationEnd=1]="NavigationEnd",y[y.NavigationCancel=2]="NavigationCancel",y[y.NavigationError=3]="NavigationError",y[y.RoutesRecognized=4]="RoutesRecognized",y[y.ResolveStart=5]="ResolveStart",y[y.ResolveEnd=6]="ResolveEnd",y[y.GuardsCheckStart=7]="GuardsCheckStart",y[y.GuardsCheckEnd=8]="GuardsCheckEnd",y[y.RouteConfigLoadStart=9]="RouteConfigLoadStart",y[y.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",y[y.ChildActivationStart=11]="ChildActivationStart",y[y.ChildActivationEnd=12]="ChildActivationEnd",y[y.ActivationStart=13]="ActivationStart",y[y.ActivationEnd=14]="ActivationEnd",y[y.Scroll=15]="Scroll",y[y.NavigationSkipped=16]="NavigationSkipped",y}(En||{});class Oi{constructor(_,S){this.id=_,this.url=S}}class qh extends Oi{constructor(_,S,C="imperative",T=null){super(_,S),this.type=En.NavigationStart,this.navigationTrigger=C,this.restoredState=T}toString(){return"NavigationStart(id: ".concat(this.id,", url: '").concat(this.url,"')")}}class ds extends Oi{constructor(_,S,C){super(_,S),this.urlAfterRedirects=C,this.type=En.NavigationEnd}toString(){return"NavigationEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"')")}}var Ao=function(y){return y[y.Redirect=0]="Redirect",y[y.SupersededByNewNavigation=1]="SupersededByNewNavigation",y[y.NoDataFromResolver=2]="NoDataFromResolver",y[y.GuardRejected=3]="GuardRejected",y}(Ao||{}),Wh=function(y){return y[y.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",y[y.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",y}(Wh||{});class Gc extends Oi{constructor(_,S,C,T){super(_,S),this.reason=C,this.code=T,this.type=En.NavigationCancel}toString(){return"NavigationCancel(id: ".concat(this.id,", url: '").concat(this.url,"')")}}class Kc extends Oi{constructor(_,S,C,T){super(_,S),this.reason=C,this.code=T,this.type=En.NavigationSkipped}}class Gh extends Oi{constructor(_,S,C,T){super(_,S),this.error=C,this.target=T,this.type=En.NavigationError}toString(){return"NavigationError(id: ".concat(this.id,", url: '").concat(this.url,"', error: ").concat(this.error,")")}}class PA extends Oi{constructor(_,S,C,T){super(_,S),this.urlAfterRedirects=C,this.state=T,this.type=En.RoutesRecognized}toString(){return"RoutesRecognized(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}class Yq extends Oi{constructor(_,S,C,T){super(_,S),this.urlAfterRedirects=C,this.state=T,this.type=En.GuardsCheckStart}toString(){return"GuardsCheckStart(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}class Zq extends Oi{constructor(_,S,C,T,D){super(_,S),this.urlAfterRedirects=C,this.state=T,this.shouldActivate=D,this.type=En.GuardsCheckEnd}toString(){return"GuardsCheckEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,", shouldActivate: ").concat(this.shouldActivate,")")}}class e6 extends Oi{constructor(_,S,C,T){super(_,S),this.urlAfterRedirects=C,this.state=T,this.type=En.ResolveStart}toString(){return"ResolveStart(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}class t6 extends Oi{constructor(_,S,C,T){super(_,S),this.urlAfterRedirects=C,this.state=T,this.type=En.ResolveEnd}toString(){return"ResolveEnd(id: ".concat(this.id,", url: '").concat(this.url,"', urlAfterRedirects: '").concat(this.urlAfterRedirects,"', state: ").concat(this.state,")")}}class n6{constructor(_){this.route=_,this.type=En.RouteConfigLoadStart}toString(){return"RouteConfigLoadStart(path: ".concat(this.route.path,")")}}class r6{constructor(_){this.route=_,this.type=En.RouteConfigLoadEnd}toString(){return"RouteConfigLoadEnd(path: ".concat(this.route.path,")")}}class o6{constructor(_){this.snapshot=_,this.type=En.ChildActivationStart}toString(){return"ChildActivationStart(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}class i6{constructor(_){this.snapshot=_,this.type=En.ChildActivationEnd}toString(){return"ChildActivationEnd(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}class s6{constructor(_){this.snapshot=_,this.type=En.ActivationStart}toString(){return"ActivationStart(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}class a6{constructor(_){this.snapshot=_,this.type=En.ActivationEnd}toString(){return"ActivationEnd(path: '".concat(this.snapshot.routeConfig&&this.snapshot.routeConfig.path||"","')")}}class NA{constructor(_,S,C){this.routerEvent=_,this.position=S,this.anchor=C,this.type=En.Scroll}toString(){const _=this.position?"".concat(this.position[0],", ").concat(this.position[1]):null;return"Scroll(anchor: '".concat(this.anchor,"', position: '").concat(_,"')")}}class t_{}class n_{constructor(_){this.url=_}}class c6{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new qu,this.attachRef=null}}let qu=(()=>{var y;class _{constructor(){this.contexts=new Map}onChildOutletCreated(C,T){const D=this.getOrCreateContext(C);D.outlet=T,this.contexts.set(C,D)}onChildOutletDestroyed(C){const T=this.getContext(C);T&&(T.outlet=null,T.attachRef=null)}onOutletDeactivated(){const C=this.contexts;return this.contexts=new Map,C}onOutletReAttached(C){this.contexts=C}getOrCreateContext(C){let T=this.getContext(C);return T||(T=new c6,this.contexts.set(C,T)),T}getContext(C){return this.contexts.get(C)||null}}return(y=_).\u0275fac=function(C){return new(C||y)},y.\u0275prov=At({token:y,factory:y.\u0275fac,providedIn:"root"}),_})();class OA{constructor(_){this._root=_}get root(){return this._root.value}parent(_){const S=this.pathFromRoot(_);return S.length>1?S[S.length-2]:null}children(_){const S=r_(_,this._root);return S?S.children.map(C=>C.value):[]}firstChild(_){const S=r_(_,this._root);return S&&S.children.length>0?S.children[0].value:null}siblings(_){const S=o_(_,this._root);return S.length<2?[]:S[S.length-2].children.map(T=>T.value).filter(T=>T!==_)}pathFromRoot(_){return o_(_,this._root).map(S=>S.value)}}function r_(y,_){if(y===_.value)return _;for(const S of _.children){const C=r_(y,S);if(C)return C}return null}function o_(y,_){if(y===_.value)return[_];for(const S of _.children){const C=o_(y,S);if(C.length)return C.unshift(_),C}return[]}class oi{constructor(_,S){this.value=_,this.children=S}toString(){return"TreeNode(".concat(this.value,")")}}function Jc(y){const _={};return y&&y.children.forEach(S=>_[S.value.outlet]=S),_}class kA extends OA{constructor(_,S){super(_),this.snapshot=S,a_(this,_)}toString(){return this.snapshot.toString()}}function xA(y){const _=function l6(y){const D=new s_([],{},{},"",{},fn,y,null,{});return new FA("",new oi(D,[]))}(y),S=new rr([new ju("",{})]),C=new rr({}),T=new rr({}),D=new rr({}),I=new rr(""),M=new Ea(S,C,D,I,T,fn,y,_.root);return M.snapshot=_.root,new kA(new oi(M,[]),_)}class Ea{constructor(_,S,C,T,D,I,M,A){var R,N;this.urlSubject=_,this.paramsSubject=S,this.queryParamsSubject=C,this.fragmentSubject=T,this.dataSubject=D,this.outlet=I,this.component=M,this._futureSnapshot=A,this.title=null!==(R=null===(N=this.dataSubject)||void 0===N?void 0:N.pipe(k(O=>O[Vu])))&&void 0!==R?R:nn(void 0),this.url=_,this.params=S,this.queryParams=C,this.fragment=T,this.data=D}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){var _;return null!==(_=this._paramMap)&&void 0!==_||(this._paramMap=this.params.pipe(k(S=>Hc(S)))),this._paramMap}get queryParamMap(){var _;return null!==(_=this._queryParamMap)&&void 0!==_||(this._queryParamMap=this.queryParams.pipe(k(S=>Hc(S)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():"Future(".concat(this._futureSnapshot,")")}}function i_(y,_,S="emptyOnly"){var C;let T;const{routeConfig:D}=y;var I;return T=null===_||"always"!==S&&""!==(null==D?void 0:D.path)&&(_.component||null!==(C=_.routeConfig)&&void 0!==C&&C.loadComponent)?{params:se({},y.params),data:se({},y.data),resolve:se(se({},y.data),null!==(I=y._resolvedData)&&void 0!==I?I:{})}:{params:se(se({},_.params),y.params),data:se(se({},_.data),y.data),resolve:se(se(se(se({},y.data),_.data),null==D?void 0:D.data),y._resolvedData)},D&&UA(D)&&(T.resolve[Vu]=D.title),T}class s_{get title(){var _;return null===(_=this.data)||void 0===_?void 0:_[Vu]}constructor(_,S,C,T,D,I,M,A,R){this.url=_,this.params=S,this.queryParams=C,this.fragment=T,this.data=D,this.outlet=I,this.component=M,this.routeConfig=A,this._resolve=R}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){var _;return null!==(_=this._paramMap)&&void 0!==_||(this._paramMap=Hc(this.params)),this._paramMap}get queryParamMap(){var _;return null!==(_=this._queryParamMap)&&void 0!==_||(this._queryParamMap=Hc(this.queryParams)),this._queryParamMap}toString(){const _=this.url.map(C=>C.toString()).join("/"),S=this.routeConfig?this.routeConfig.path:"";return"Route(url:'".concat(_,"', path:'").concat(S,"')")}}class FA extends OA{constructor(_,S){super(S),this.url=_,a_(this,S)}toString(){return LA(this._root)}}function a_(y,_){_.value._routerState=y,_.children.forEach(S=>a_(y,S))}function LA(y){const _=y.children.length>0?" { ".concat(y.children.map(LA).join(", ")," } "):"";return"".concat(y.value).concat(_)}function c_(y){if(y.snapshot){const _=y.snapshot,S=y._futureSnapshot;y.snapshot=S,Ni(_.queryParams,S.queryParams)||y.queryParamsSubject.next(S.queryParams),_.fragment!==S.fragment&&y.fragmentSubject.next(S.fragment),Ni(_.params,S.params)||y.paramsSubject.next(S.params),function Dq(y,_){if(y.length!==_.length)return!1;for(let S=0;S<y.length;++S)if(!Ni(y[S],_[S]))return!1;return!0}(_.url,S.url)||y.urlSubject.next(S.url),Ni(_.data,S.data)||y.dataSubject.next(S.data)}else y.snapshot=y._futureSnapshot,y.dataSubject.next(y._futureSnapshot.data)}function l_(y,_){const S=Ni(y.params,_.params)&&function Rq(y,_){return Ta(y,_)&&y.every((S,C)=>Ni(S.parameters,_[C].parameters))}(y.url,_.url);return S&&!(!y.parent!=!_.parent)&&(!y.parent||l_(y.parent,_.parent))}function UA(y){return"string"==typeof y.title||null===y.title}let Kh=(()=>{var y;class _{constructor(){this.activated=null,this._activatedRoute=null,this.name=fn,this.activateEvents=new Hn,this.deactivateEvents=new Hn,this.attachEvents=new Hn,this.detachEvents=new Hn,this.parentContexts=at(qu),this.location=at(Yo),this.changeDetector=at(_u),this.environmentInjector=at(Qr),this.inputBinder=at(Jh,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(C){if(C.name){const{firstChange:T,previousValue:D}=C.name;if(T)return;this.isTrackedInParentContexts(D)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(D)),this.initializeOutletWithName()}}ngOnDestroy(){var C;this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),null===(C=this.inputBinder)||void 0===C||C.unsubscribeFromRouteData(this)}isTrackedInParentContexts(C){var T;return(null===(T=this.parentContexts.getContext(C))||void 0===T?void 0:T.outlet)===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const C=this.parentContexts.getContext(this.name);null!=C&&C.route&&(C.attachRef?this.attach(C.attachRef,C.route):this.activateWith(C.route,C.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new j(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new j(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new j(4012,!1);this.location.detach();const C=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(C.instance),C}attach(C,T){var D;this.activated=C,this._activatedRoute=T,this.location.insert(C.hostView),null===(D=this.inputBinder)||void 0===D||D.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(C.instance)}deactivate(){if(this.activated){const C=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(C)}}activateWith(C,T){var D;if(this.isActivated)throw new j(4013,!1);this._activatedRoute=C;const I=this.location,A=C.snapshot.component,R=this.parentContexts.getOrCreateContext(this.name).children,N=new u_(C,R,I.injector);this.activated=I.createComponent(A,{index:I.length,injector:N,environmentInjector:null!=T?T:this.environmentInjector}),this.changeDetector.markForCheck(),null===(D=this.inputBinder)||void 0===D||D.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}}return(y=_).\u0275fac=function(C){return new(C||y)},y.\u0275dir=rn({type:y,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[uo]}),_})();class u_{__ngOutletInjector(_){return new u_(this.route,this.childContexts,_)}constructor(_,S,C){this.route=_,this.childContexts=S,this.parent=C}get(_,S){return _===Ea?this.route:_===qu?this.childContexts:this.parent.get(_,S)}}const Jh=new Mt("");let VA=(()=>{var y;class _{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(C){this.unsubscribeFromRouteData(C),this.subscribeToRouteData(C)}unsubscribeFromRouteData(C){var T;null===(T=this.outletDataSubscriptions.get(C))||void 0===T||T.unsubscribe(),this.outletDataSubscriptions.delete(C)}subscribeToRouteData(C){const{activatedRoute:T}=C,D=qv([T.queryParams,T.params,T.data]).pipe(Lo(([I,M,A],R)=>(A=se(se(se({},I),M),A),0===R?nn(A):Promise.resolve(A)))).subscribe(I=>{if(!C.isActivated||!C.activatedComponentRef||C.activatedRoute!==T||null===T.component)return void this.unsubscribeFromRouteData(C);const M=function X$(y){const _=gn(y);if(!_)return null;const S=new Zl(_);return{get selector(){return S.selector},get type(){return S.componentType},get inputs(){return S.inputs},get outputs(){return S.outputs},get ngContentSelectors(){return S.ngContentSelectors},get isStandalone(){return _.standalone},get isSignal(){return _.signals}}}(T.component);if(M)for(const{templateName:A}of M.inputs)C.activatedComponentRef.setInput(A,I[A]);else this.unsubscribeFromRouteData(C)});this.outletDataSubscriptions.set(C,D)}}return(y=_).\u0275fac=function(C){return new(C||y)},y.\u0275prov=At({token:y,factory:y.\u0275fac}),_})();function Wu(y,_,S){if(S&&y.shouldReuseRoute(_.value,S.value.snapshot)){const C=S.value;C._futureSnapshot=_.value;const T=function d6(y,_,S){return _.children.map(C=>{for(const T of S.children)if(y.shouldReuseRoute(C.value,T.value.snapshot))return Wu(y,C,T);return Wu(y,C)})}(y,_,S);return new oi(C,T)}{if(y.shouldAttach(_.value)){const D=y.retrieve(_.value);if(null!==D){const I=D.route;return I.value._futureSnapshot=_.value,I.children=_.children.map(M=>Wu(y,M)),I}}const C=function f6(y){return new Ea(new rr(y.url),new rr(y.params),new rr(y.queryParams),new rr(y.fragment),new rr(y.data),y.outlet,y.component,y)}(_.value),T=_.children.map(D=>Wu(y,D));return new oi(C,T)}}const jA="ngNavigationCancelingError";function BA(y,_){const{redirectTo:S,navigationBehaviorOptions:C}=Wc(_)?{redirectTo:_,navigationBehaviorOptions:void 0}:_,T=$A(!1,Ao.Redirect);return T.url=S,T.navigationBehaviorOptions=C,T}function $A(y,_){const S=new Error("NavigationCancelingError: ".concat(y||""));return S[jA]=!0,S.cancellationCode=_,S}function HA(y){return!!y&&y[jA]}let zA=(()=>{var y;class _{}return(y=_).\u0275fac=function(C){return new(C||y)},y.\u0275cmp=Co({type:y,selectors:[["ng-component"]],standalone:!0,features:[XE],decls:1,vars:0,template:function(C,T){1&C&&Oo(0,"router-outlet")},dependencies:[Kh],encapsulation:2}),_})();function d_(y){const _=y.children&&y.children.map(d_),S=_?se(se({},y),{},{children:_}):se({},y);return!S.component&&!S.loadComponent&&(_||S.loadChildren)&&S.outlet&&S.outlet!==fn&&(S.component=zA),S}function ki(y){return y.outlet||fn}function Gu(y){var _;if(!y)return null;if(null!==(_=y.routeConfig)&&void 0!==_&&_._injector)return y.routeConfig._injector;for(let S=y.parent;S;S=S.parent){const C=S.routeConfig;if(null!=C&&C._loadedInjector)return C._loadedInjector;if(null!=C&&C._injector)return C._injector}return null}class C6{constructor(_,S,C,T,D){this.routeReuseStrategy=_,this.futureState=S,this.currState=C,this.forwardEvent=T,this.inputBindingEnabled=D}activate(_){const S=this.futureState._root,C=this.currState?this.currState._root:null;this.deactivateChildRoutes(S,C,_),c_(this.futureState.root),this.activateChildRoutes(S,C,_)}deactivateChildRoutes(_,S,C){const T=Jc(S);_.children.forEach(D=>{const I=D.value.outlet;this.deactivateRoutes(D,T[I],C),delete T[I]}),Object.values(T).forEach(D=>{this.deactivateRouteAndItsChildren(D,C)})}deactivateRoutes(_,S,C){const T=_.value,D=S?S.value:null;if(T===D)if(T.component){const I=C.getContext(T.outlet);I&&this.deactivateChildRoutes(_,S,I.children)}else this.deactivateChildRoutes(_,S,C);else D&&this.deactivateRouteAndItsChildren(S,C)}deactivateRouteAndItsChildren(_,S){_.value.component&&this.routeReuseStrategy.shouldDetach(_.value.snapshot)?this.detachAndStoreRouteSubtree(_,S):this.deactivateRouteAndOutlet(_,S)}detachAndStoreRouteSubtree(_,S){const C=S.getContext(_.value.outlet),T=C&&_.value.component?C.children:S,D=Jc(_);for(const I of Object.values(D))this.deactivateRouteAndItsChildren(I,T);if(C&&C.outlet){const I=C.outlet.detach(),M=C.children.onOutletDeactivated();this.routeReuseStrategy.store(_.value.snapshot,{componentRef:I,route:_,contexts:M})}}deactivateRouteAndOutlet(_,S){const C=S.getContext(_.value.outlet),T=C&&_.value.component?C.children:S,D=Jc(_);for(const I of Object.values(D))this.deactivateRouteAndItsChildren(I,T);C&&(C.outlet&&(C.outlet.deactivate(),C.children.onOutletDeactivated()),C.attachRef=null,C.route=null)}activateChildRoutes(_,S,C){const T=Jc(S);_.children.forEach(D=>{this.activateRoutes(D,T[D.value.outlet],C),this.forwardEvent(new a6(D.value.snapshot))}),_.children.length&&this.forwardEvent(new i6(_.value.snapshot))}activateRoutes(_,S,C){const T=_.value,D=S?S.value:null;if(c_(T),T===D)if(T.component){const I=C.getOrCreateContext(T.outlet);this.activateChildRoutes(_,S,I.children)}else this.activateChildRoutes(_,S,C);else if(T.component){const I=C.getOrCreateContext(T.outlet);if(this.routeReuseStrategy.shouldAttach(T.snapshot)){const M=this.routeReuseStrategy.retrieve(T.snapshot);this.routeReuseStrategy.store(T.snapshot,null),I.children.onOutletReAttached(M.contexts),I.attachRef=M.componentRef,I.route=M.route.value,I.outlet&&I.outlet.attach(M.componentRef,M.route.value),c_(M.route.value),this.activateChildRoutes(_,null,I.children)}else{const M=Gu(T.snapshot);I.attachRef=null,I.route=T,I.injector=M,I.outlet&&I.outlet.activateWith(T,I.injector),this.activateChildRoutes(_,null,I.children)}}else this.activateChildRoutes(_,null,C)}}class qA{constructor(_){this.path=_,this.route=this.path[this.path.length-1]}}class Qh{constructor(_,S){this.component=_,this.route=S}}function w6(y,_,S){const C=y._root;return Ku(C,_?_._root:null,S,[C.value])}function Qc(y,_){const S=Symbol(),C=_.get(y,S);return C===S?"function"!=typeof y||function NO(y){return null!==vd(y)}(y)?_.get(y):y:C}function Ku(y,_,S,C,T={canDeactivateChecks:[],canActivateChecks:[]}){const D=Jc(_);return y.children.forEach(I=>{(function S6(y,_,S,C,T={canDeactivateChecks:[],canActivateChecks:[]}){const D=y.value,I=_?_.value:null,M=S?S.getContext(y.value.outlet):null;if(I&&D.routeConfig===I.routeConfig){const A=function T6(y,_,S){if("function"==typeof S)return S(y,_);switch(S){case"pathParamsChange":return!Ta(y.url,_.url);case"pathParamsOrQueryParamsChange":return!Ta(y.url,_.url)||!Ni(y.queryParams,_.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!l_(y,_)||!Ni(y.queryParams,_.queryParams);default:return!l_(y,_)}}(I,D,D.routeConfig.runGuardsAndResolvers);A?T.canActivateChecks.push(new qA(C)):(D.data=I.data,D._resolvedData=I._resolvedData),Ku(y,_,D.component?M?M.children:null:S,C,T),A&&M&&M.outlet&&M.outlet.isActivated&&T.canDeactivateChecks.push(new Qh(M.outlet.component,I))}else I&&Ju(_,M,T),T.canActivateChecks.push(new qA(C)),Ku(y,null,D.component?M?M.children:null:S,C,T)})(I,D[I.value.outlet],S,C.concat([I.value]),T),delete D[I.value.outlet]}),Object.entries(D).forEach(([I,M])=>Ju(M,S.getContext(I),T)),T}function Ju(y,_,S){const C=Jc(y),T=y.value;Object.entries(C).forEach(([D,I])=>{Ju(I,T.component?_?_.children.getContext(D):null:_,S)}),S.canDeactivateChecks.push(new Qh(T.component&&_&&_.outlet&&_.outlet.isActivated?_.outlet.component:null,T))}function Qu(y){return"function"==typeof y}function WA(y){return y instanceof Fu||"EmptyError"===(null==y?void 0:y.name)}const Xh=Symbol("INITIAL_VALUE");function Xc(){return Lo(y=>qv(y.map(_=>_.pipe(jc(1),function vq(...y){const _=Lh(y);return he((S,C)=>{(_?Wv(y,S,_):Wv(y,S)).subscribe(C)})}(Xh)))).pipe(k(_=>{for(const S of _)if(!0!==S){if(S===Xh)return Xh;if(!1===S||S instanceof zc)return S}return!0}),us(_=>_!==Xh),jc(1)))}function GA(y){return function qi(...y){return gs(y)}(ro(_=>{if(Wc(_))throw BA(0,_)}),k(_=>!0===_))}class f_{constructor(_){this.segmentGroup=_||null}}class h_ extends Error{constructor(_){super(),this.urlTree=_}}function Yc(y){return ks(new f_(y))}class H6{constructor(_,S){this.urlSerializer=_,this.urlTree=S}lineralizeSegments(_,S){let C=[],T=S.root;for(;;){if(C=C.concat(T.segments),0===T.numberOfChildren)return nn(C);if(T.numberOfChildren>1||!T.children[fn])return ks(new j(4e3,!1));T=T.children[fn]}}applyRedirectCommands(_,S,C){const T=this.applyRedirectCreateUrlTree(S,this.urlSerializer.parse(S),_,C);if(S.startsWith("/"))throw new h_(T);return T}applyRedirectCreateUrlTree(_,S,C,T){const D=this.createSegmentGroup(_,S.root,C,T);return new zc(D,this.createQueryParams(S.queryParams,this.urlTree.queryParams),S.fragment)}createQueryParams(_,S){const C={};return Object.entries(_).forEach(([T,D])=>{if("string"==typeof D&&D.startsWith(":")){const M=D.substring(1);C[T]=S[M]}else C[T]=D}),C}createSegmentGroup(_,S,C,T){const D=this.createSegments(_,S.segments,C,T);let I={};return Object.entries(S.children).forEach(([M,A])=>{I[M]=this.createSegmentGroup(_,A,C,T)}),new $n(D,I)}createSegments(_,S,C,T){return S.map(D=>D.path.startsWith(":")?this.findPosParam(_,D,T):this.findOrReturn(D,C))}findPosParam(_,S,C){const T=C[S.path.substring(1)];if(!T)throw new j(4001,!1);return T}findOrReturn(_,S){let C=0;for(const T of S){if(T.path===_.path)return S.splice(C),T;C++}return _}}const p_={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function z6(y,_,S,C,T){const D=g_(y,_,S);return D.matched?(C=function p6(y,_){var S;return y.providers&&!y._injector&&(y._injector=Nf(y.providers,_,"Route: ".concat(y.path))),null!==(S=y._injector)&&void 0!==S?S:_}(_,C),function j6(y,_,S,C){const T=_.canMatch;return T&&0!==T.length?nn(T.map(I=>{const M=Qc(I,y);return Fs(function R6(y){return y&&Qu(y.canMatch)}(M)?M.canMatch(_,S):ui(y,()=>M(_,S)))})).pipe(Xc(),GA()):nn(!0)}(C,_,S).pipe(k(I=>!0===I?D:se({},p_)))):nn(D)}function g_(y,_,S){var C,T;if("**"===_.path)return function q6(y){return{matched:!0,parameters:y.length>0?hA(y).parameters:{},consumedSegments:y,remainingSegments:[],positionalParamSegments:{}}}(S);if(""===_.path)return"full"===_.pathMatch&&(y.hasChildren()||S.length>0)?se({},p_):{matched:!0,consumedSegments:[],remainingSegments:S,parameters:{},positionalParamSegments:{}};const I=(_.matcher||Eq)(S,y,_);if(!I)return se({},p_);const M={};Object.entries(null!==(C=I.posParams)&&void 0!==C?C:{}).forEach(([R,N])=>{M[R]=N.path});const A=I.consumed.length>0?se(se({},M),I.consumed[I.consumed.length-1].parameters):M;return{matched:!0,consumedSegments:I.consumed,remainingSegments:S.slice(I.consumed.length),parameters:A,positionalParamSegments:null!==(T=I.posParams)&&void 0!==T?T:{}}}function KA(y,_,S,C){return S.length>0&&function K6(y,_,S){return S.some(C=>Yh(y,_,C)&&ki(C)!==fn)}(y,S,C)?{segmentGroup:new $n(_,G6(C,new $n(S,y.children))),slicedSegments:[]}:0===S.length&&function J6(y,_,S){return S.some(C=>Yh(y,_,C))}(y,S,C)?{segmentGroup:new $n(y.segments,W6(y,S,C,y.children)),slicedSegments:S}:{segmentGroup:new $n(y.segments,y.children),slicedSegments:S}}function W6(y,_,S,C){const T={};for(const D of S)if(Yh(y,_,D)&&!C[ki(D)]){const I=new $n([],{});T[ki(D)]=I}return se(se({},C),T)}function G6(y,_){const S={};S[fn]=_;for(const C of y)if(""===C.path&&ki(C)!==fn){const T=new $n([],{});S[ki(C)]=T}return S}function Yh(y,_,S){return(!(y.hasChildren()||_.length>0)||"full"!==S.pathMatch)&&""===S.path}class Y6{}class t5{constructor(_,S,C,T,D,I,M){this.injector=_,this.configLoader=S,this.rootComponentType=C,this.config=T,this.urlTree=D,this.paramsInheritanceStrategy=I,this.urlSerializer=M,this.applyRedirects=new H6(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(_){return new j(4002,"'".concat(_.segmentGroup,"'"))}recognize(){const _=KA(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(_).pipe(k(S=>{const C=new s_([],Object.freeze({}),Object.freeze(se({},this.urlTree.queryParams)),this.urlTree.fragment,{},fn,this.rootComponentType,null,{}),T=new oi(C,S),D=new FA("",T),I=function qq(y,_,S=null,C=null){return EA(TA(y),_,S,C)}(C,[],this.urlTree.queryParams,this.urlTree.fragment);return I.queryParams=this.urlTree.queryParams,D.url=this.urlSerializer.serialize(I),this.inheritParamsAndData(D._root,null),{state:D,tree:I}}))}match(_){return this.processSegmentGroup(this.injector,this.config,_,fn).pipe(xs(C=>{if(C instanceof h_)return this.urlTree=C.urlTree,this.match(C.urlTree.root);throw C instanceof f_?this.noMatchError(C):C}))}inheritParamsAndData(_,S){const C=_.value,T=i_(C,S,this.paramsInheritanceStrategy);C.params=Object.freeze(T.params),C.data=Object.freeze(T.data),_.children.forEach(D=>this.inheritParamsAndData(D,C))}processSegmentGroup(_,S,C,T){return 0===C.segments.length&&C.hasChildren()?this.processChildren(_,S,C):this.processSegment(_,S,C,C.segments,T,!0).pipe(k(D=>D instanceof oi?[D]:[]))}processChildren(_,S,C){const T=[];for(const D of Object.keys(C.children))"primary"===D?T.unshift(D):T.push(D);return br(T).pipe(Bc(D=>{const I=C.children[D],M=function v6(y,_){const S=y.filter(C=>ki(C)===_);return S.push(...y.filter(C=>ki(C)!==_)),S}(S,D);return this.processSegmentGroup(_,M,I,D)}),function wq(y,_){return he(function Cq(y,_,S,C,T){return(D,I)=>{let M=S,A=_,R=0;D.subscribe(Te(I,N=>{const O=R++;A=M?y(A,N,O):(M=!0,N),C&&I.next(A)},T&&(()=>{M&&I.next(A),I.complete()})))}}(y,_,arguments.length>=2,!0))}((D,I)=>(D.push(...I),D)),Uh(null),function bq(y,_){const S=arguments.length>=2;return C=>C.pipe(y?us((T,D)=>y(T,D,C)):so,Kv(1),S?Uh(_):dA(()=>new Fu))}(),Hr(D=>{if(null===D)return Yc(C);const I=JA(D);return function n5(y){y.sort((_,S)=>_.value.outlet===fn?-1:S.value.outlet===fn?1:_.value.outlet.localeCompare(S.value.outlet))}(I),nn(I)}))}processSegment(_,S,C,T,D,I){return br(S).pipe(Bc(M=>{var A;return this.processSegmentAgainstRoute(null!==(A=M._injector)&&void 0!==A?A:_,S,M,C,T,D,I).pipe(xs(R=>{if(R instanceof f_)return nn(null);throw R}))}),Sa(M=>!!M),xs(M=>{if(WA(M))return function X6(y,_,S){return 0===_.length&&!y.children[S]}(C,T,D)?nn(new Y6):Yc(C);throw M}))}processSegmentAgainstRoute(_,S,C,T,D,I,M){return function Q6(y,_,S,C){return!!(ki(y)===C||C!==fn&&Yh(_,S,y))&&g_(_,y,S).matched}(C,T,D,I)?void 0===C.redirectTo?this.matchSegmentAgainstRoute(_,T,C,D,I):this.allowRedirects&&M?this.expandSegmentAgainstRouteUsingRedirect(_,T,S,C,D,I):Yc(T):Yc(T)}expandSegmentAgainstRouteUsingRedirect(_,S,C,T,D,I){const{matched:M,consumedSegments:A,positionalParamSegments:R,remainingSegments:N}=g_(S,T,D);if(!M)return Yc(S);T.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>31&&(this.allowRedirects=!1));const O=this.applyRedirects.applyRedirectCommands(A,T.redirectTo,R);return this.applyRedirects.lineralizeSegments(T,O).pipe(Hr(F=>this.processSegment(_,C,S,F.concat(N),I,!1)))}matchSegmentAgainstRoute(_,S,C,T,D){const I=z6(S,C,T,_);return"**"===C.path&&(S.children={}),I.pipe(Lo(M=>{var A;return M.matched?(_=null!==(A=C._injector)&&void 0!==A?A:_,this.getChildConfig(_,C,T).pipe(Lo(({routes:R})=>{var N,O,F;const $=null!==(N=C._loadedInjector)&&void 0!==N?N:_,{consumedSegments:Q,remainingSegments:ae,parameters:Ce}=M,Ee=new s_(Q,Ce,Object.freeze(se({},this.urlTree.queryParams)),this.urlTree.fragment,function o5(y){return y.data||{}}(C),ki(C),null!==(O=null!==(F=C.component)&&void 0!==F?F:C._loadedComponent)&&void 0!==O?O:null,C,function i5(y){return y.resolve||{}}(C)),{segmentGroup:Ae,slicedSegments:ht}=KA(S,Q,ae,R);if(0===ht.length&&Ae.hasChildren())return this.processChildren($,R,Ae).pipe(k($t=>null===$t?null:new oi(Ee,$t)));if(0===R.length&&0===ht.length)return nn(new oi(Ee,[]));const vt=ki(C)===D;return this.processSegment($,R,Ae,ht,vt?fn:D,!0).pipe(k($t=>new oi(Ee,$t instanceof oi?[$t]:[])))}))):Yc(S)}))}getChildConfig(_,S,C){return S.children?nn({routes:S.children,injector:_}):S.loadChildren?void 0!==S._loadedRoutes?nn({routes:S._loadedRoutes,injector:S._loadedInjector}):function V6(y,_,S,C){const T=_.canLoad;return void 0===T||0===T.length?nn(!0):nn(T.map(I=>{const M=Qc(I,y);return Fs(function D6(y){return y&&Qu(y.canLoad)}(M)?M.canLoad(_,S):ui(y,()=>M(_,S)))})).pipe(Xc(),GA())}(_,S,C).pipe(Hr(T=>T?this.configLoader.loadChildren(_,S).pipe(ro(D=>{S._loadedRoutes=D.routes,S._loadedInjector=D.injector})):function $6(y){return ks($A(!1,Ao.GuardRejected))}())):nn({routes:[],injector:_})}}function r5(y){const _=y.value.routeConfig;return _&&""===_.path}function JA(y){const _=[],S=new Set;for(const C of y){if(!r5(C)){_.push(C);continue}const T=_.find(D=>C.value.routeConfig===D.value.routeConfig);void 0!==T?(T.children.push(...C.children),S.add(T)):_.push(C)}for(const C of S){const T=JA(C.children);_.push(new oi(C.value,T))}return _.filter(C=>!S.has(C))}function QA(y){const _=y.children.map(S=>QA(S)).flat();return[y,..._]}function m_(y){return Lo(_=>{const S=y(_);return S?br(S).pipe(k(()=>_)):nn(_)})}let XA=(()=>{var y;class _{buildTitle(C){let T,D=C.root;for(;void 0!==D;){var I;T=null!==(I=this.getResolvedTitleForRoute(D))&&void 0!==I?I:T,D=D.children.find(M=>M.outlet===fn)}return T}getResolvedTitleForRoute(C){return C.data[Vu]}}return(y=_).\u0275fac=function(C){return new(C||y)},y.\u0275prov=At({token:y,factory:()=>at(d5),providedIn:"root"}),_})(),d5=(()=>{var y;class _ extends XA{constructor(C){super(),this.title=C}updateTitle(C){const T=this.buildTitle(C);void 0!==T&&this.title.setTitle(T)}}return(y=_).\u0275fac=function(C){return new(C||y)(Ft(wz))},y.\u0275prov=At({token:y,factory:y.\u0275fac,providedIn:"root"}),_})();const Zc=new Mt("",{providedIn:"root",factory:()=>({})}),el=new Mt("");let y_=(()=>{var y;class _{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=at(MD)}loadComponent(C){if(this.componentLoaders.get(C))return this.componentLoaders.get(C);if(C._loadedComponent)return nn(C._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(C);const T=Fs(C.loadComponent()).pipe(k(YA),ro(I=>{this.onLoadEndListener&&this.onLoadEndListener(C),C._loadedComponent=I}),Uu(()=>{this.componentLoaders.delete(C)})),D=new uA(T,()=>new fr).pipe(Gv());return this.componentLoaders.set(C,D),D}loadChildren(C,T){if(this.childrenLoaders.get(T))return this.childrenLoaders.get(T);if(T._loadedRoutes)return nn({routes:T._loadedRoutes,injector:T._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(T);const I=function f5(y,_,S,C){return Fs(y.loadChildren()).pipe(k(YA),Hr(T=>T instanceof jS||Array.isArray(T)?nn(T):br(_.compileModuleAsync(T))),k(T=>{C&&C(y);let D,I,M=!1;return Array.isArray(T)?(I=T,!0):(D=T.create(S).injector,I=D.get(el,[],{optional:!0,self:!0}).flat()),{routes:I.map(d_),injector:D}}))}(T,this.compiler,C,this.onLoadEndListener).pipe(Uu(()=>{this.childrenLoaders.delete(T)})),M=new uA(I,()=>new fr).pipe(Gv());return this.childrenLoaders.set(T,M),M}}return(y=_).\u0275fac=function(C){return new(C||y)},y.\u0275prov=At({token:y,factory:y.\u0275fac,providedIn:"root"}),_})();function YA(y){return function h5(y){return y&&"object"==typeof y&&"default"in y}(y)?y.default:y}let v_=(()=>{var y;class _{}return(y=_).\u0275fac=function(C){return new(C||y)},y.\u0275prov=At({token:y,factory:()=>at(p5),providedIn:"root"}),_})(),p5=(()=>{var y;class _{shouldProcessUrl(C){return!0}extract(C){return C}merge(C,T){return C}}return(y=_).\u0275fac=function(C){return new(C||y)},y.\u0275prov=At({token:y,factory:y.\u0275fac,providedIn:"root"}),_})();const ZA=new Mt(""),eR=new Mt("");function g5(y,_,S){const C=y.get(eR),T=y.get(go);return y.get(Pn).runOutsideAngular(()=>{if(!T.startViewTransition||C.skipNextTransition)return C.skipNextTransition=!1,new Promise(R=>setTimeout(R));let D;const I=new Promise(R=>{D=R}),M=T.startViewTransition(()=>(D(),function m5(y){return new Promise(_=>{Am(_,{injector:y})})}(y))),{onViewTransitionCreated:A}=C;return A&&ui(y,()=>A({transition:M,from:_,to:S})),I})}let Zh=(()=>{var y;class _{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new fr,this.transitionAbortSubject=new fr,this.configLoader=at(y_),this.environmentInjector=at(Qr),this.urlSerializer=at(qc),this.rootContexts=at(qu),this.location=at(Su),this.inputBindingEnabled=null!==at(Jh,{optional:!0}),this.titleStrategy=at(XA),this.options=at(Zc,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=at(v_),this.createViewTransition=at(ZA,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>nn(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=D=>this.events.next(new r6(D)),this.configLoader.onLoadStartListener=D=>this.events.next(new n6(D))}complete(){var C;null===(C=this.transitions)||void 0===C||C.complete()}handleNavigationRequest(C){var T;const D=++this.navigationId;null===(T=this.transitions)||void 0===T||T.next(se(se(se({},this.transitions.value),C),{},{id:D}))}setupNavigations(C,T,D){return this.transitions=new rr({id:0,currentUrlTree:T,currentRawUrl:T,extractedUrl:this.urlHandlingStrategy.extract(T),urlAfterRedirects:this.urlHandlingStrategy.extract(T),rawUrl:T,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:zu,restoredState:null,currentSnapshot:D.snapshot,targetSnapshot:null,currentRouterState:D,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(us(I=>0!==I.id),k(I=>se(se({},I),{},{extractedUrl:this.urlHandlingStrategy.extract(I.rawUrl)})),Lo(I=>{let M=!1,A=!1;return nn(I).pipe(Lo(R=>{var N;if(this.navigationId>I.id)return this.cancelNavigationTransition(I,"",Ao.SupersededByNewNavigation),Pi;this.currentTransition=I,this.currentNavigation={id:R.id,initialUrl:R.rawUrl,extractedUrl:R.extractedUrl,trigger:R.source,extras:R.extras,previousNavigation:this.lastSuccessfulNavigation?se(se({},this.lastSuccessfulNavigation),{},{previousNavigation:null}):null};const O=!C.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),F=null!==(N=R.extras.onSameUrlNavigation)&&void 0!==N?N:C.onSameUrlNavigation;if(!O&&"reload"!==F){const $="";return this.events.next(new Kc(R.id,this.urlSerializer.serialize(R.rawUrl),$,Wh.IgnoredSameUrlNavigation)),R.resolve(null),Pi}if(this.urlHandlingStrategy.shouldProcessUrl(R.rawUrl))return nn(R).pipe(Lo($=>{var Q,ae;const Ce=null===(Q=this.transitions)||void 0===Q?void 0:Q.getValue();return this.events.next(new qh($.id,this.urlSerializer.serialize($.extractedUrl),$.source,$.restoredState)),Ce!==(null===(ae=this.transitions)||void 0===ae?void 0:ae.getValue())?Pi:Promise.resolve($)}),function s5(y,_,S,C,T,D){return Hr(I=>function Z6(y,_,S,C,T,D,I="emptyOnly"){return new t5(y,_,S,C,T,I,D).recognize()}(y,_,S,C,I.extractedUrl,T,D).pipe(k(({state:M,tree:A})=>se(se({},I),{},{targetSnapshot:M,urlAfterRedirects:A}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,C.config,this.urlSerializer,this.paramsInheritanceStrategy),ro($=>{I.targetSnapshot=$.targetSnapshot,I.urlAfterRedirects=$.urlAfterRedirects,this.currentNavigation=se(se({},this.currentNavigation),{},{finalUrl:$.urlAfterRedirects});const Q=new PA($.id,this.urlSerializer.serialize($.extractedUrl),this.urlSerializer.serialize($.urlAfterRedirects),$.targetSnapshot);this.events.next(Q)}));if(O&&this.urlHandlingStrategy.shouldProcessUrl(R.currentRawUrl)){const{id:$,extractedUrl:Q,source:ae,restoredState:Ce,extras:Ee}=R,Ae=new qh($,this.urlSerializer.serialize(Q),ae,Ce);this.events.next(Ae);const ht=xA(this.rootComponentType).snapshot;return this.currentTransition=I=se(se({},R),{},{targetSnapshot:ht,urlAfterRedirects:Q,extras:se(se({},Ee),{},{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=Q,nn(I)}{const $="";return this.events.next(new Kc(R.id,this.urlSerializer.serialize(R.extractedUrl),$,Wh.IgnoredByUrlHandlingStrategy)),R.resolve(null),Pi}}),ro(R=>{const N=new Yq(R.id,this.urlSerializer.serialize(R.extractedUrl),this.urlSerializer.serialize(R.urlAfterRedirects),R.targetSnapshot);this.events.next(N)}),k(R=>(this.currentTransition=I=se(se({},R),{},{guards:w6(R.targetSnapshot,R.currentSnapshot,this.rootContexts)}),I)),function P6(y,_){return Hr(S=>{const{targetSnapshot:C,currentSnapshot:T,guards:{canActivateChecks:D,canDeactivateChecks:I}}=S;return 0===I.length&&0===D.length?nn(se(se({},S),{},{guardsResult:!0})):function N6(y,_,S,C){return br(y).pipe(Hr(T=>function U6(y,_,S,C,T){const D=_&&_.routeConfig?_.routeConfig.canDeactivate:null;return D&&0!==D.length?nn(D.map(M=>{var A;const R=null!==(A=Gu(_))&&void 0!==A?A:T,N=Qc(M,R);return Fs(function A6(y){return y&&Qu(y.canDeactivate)}(N)?N.canDeactivate(y,_,S,C):ui(R,()=>N(y,_,S,C))).pipe(Sa())})).pipe(Xc()):nn(!0)}(T.component,T.route,S,_,C)),Sa(T=>!0!==T,!0))}(I,C,T,y).pipe(Hr(M=>M&&function E6(y){return"boolean"==typeof y}(M)?function O6(y,_,S,C){return br(_).pipe(Bc(T=>Wv(function x6(y,_){return null!==y&&_&&_(new o6(y)),nn(!0)}(T.route.parent,C),function k6(y,_){return null!==y&&_&&_(new s6(y)),nn(!0)}(T.route,C),function L6(y,_,S){const C=_[_.length-1],D=_.slice(0,_.length-1).reverse().map(I=>function b6(y){const _=y.routeConfig?y.routeConfig.canActivateChild:null;return _&&0!==_.length?{node:y,guards:_}:null}(I)).filter(I=>null!==I).map(I=>lA(()=>nn(I.guards.map(A=>{var R;const N=null!==(R=Gu(I.node))&&void 0!==R?R:S,O=Qc(A,N);return Fs(function M6(y){return y&&Qu(y.canActivateChild)}(O)?O.canActivateChild(C,y):ui(N,()=>O(C,y))).pipe(Sa())})).pipe(Xc())));return nn(D).pipe(Xc())}(y,T.path,S),function F6(y,_,S){const C=_.routeConfig?_.routeConfig.canActivate:null;if(!C||0===C.length)return nn(!0);const T=C.map(D=>lA(()=>{var I;const M=null!==(I=Gu(_))&&void 0!==I?I:S,A=Qc(D,M);return Fs(function I6(y){return y&&Qu(y.canActivate)}(A)?A.canActivate(_,y):ui(M,()=>A(_,y))).pipe(Sa())}));return nn(T).pipe(Xc())}(y,T.route,S))),Sa(T=>!0!==T,!0))}(C,D,y,_):nn(M)),k(M=>se(se({},S),{},{guardsResult:M})))})}(this.environmentInjector,R=>this.events.next(R)),ro(R=>{if(I.guardsResult=R.guardsResult,Wc(R.guardsResult))throw BA(0,R.guardsResult);const N=new Zq(R.id,this.urlSerializer.serialize(R.extractedUrl),this.urlSerializer.serialize(R.urlAfterRedirects),R.targetSnapshot,!!R.guardsResult);this.events.next(N)}),us(R=>!!R.guardsResult||(this.cancelNavigationTransition(R,"",Ao.GuardRejected),!1)),m_(R=>{if(R.guards.canActivateChecks.length)return nn(R).pipe(ro(N=>{const O=new e6(N.id,this.urlSerializer.serialize(N.extractedUrl),this.urlSerializer.serialize(N.urlAfterRedirects),N.targetSnapshot);this.events.next(O)}),Lo(N=>{let O=!1;return nn(N).pipe(function a5(y,_){return Hr(S=>{const{targetSnapshot:C,guards:{canActivateChecks:T}}=S;if(!T.length)return nn(S);const D=new Set(T.map(A=>A.route)),I=new Set;for(const A of D)if(!I.has(A))for(const R of QA(A))I.add(R);let M=0;return br(I).pipe(Bc(A=>D.has(A)?function c5(y,_,S,C){const T=y.routeConfig,D=y._resolve;return void 0!==(null==T?void 0:T.title)&&!UA(T)&&(D[Vu]=T.title),function l5(y,_,S,C){const T=Jv(y);if(0===T.length)return nn({});const D={};return br(T).pipe(Hr(I=>function u5(y,_,S,C){var T;const D=null!==(T=Gu(_))&&void 0!==T?T:C,I=Qc(y,D);return Fs(I.resolve?I.resolve(_,S):ui(D,()=>I(_,S)))}(y[I],_,S,C).pipe(Sa(),ro(M=>{D[I]=M}))),Kv(1),function Sq(y){return k(()=>y)}(D),xs(I=>WA(I)?Pi:ks(I)))}(D,y,_,C).pipe(k(I=>(y._resolvedData=I,y.data=i_(y,y.parent,S).resolve,null)))}(A,C,y,_):(A.data=i_(A,A.parent,y).resolve,nn(void 0))),ro(()=>M++),Kv(1),Hr(A=>M===I.size?nn(S):Pi))})}(this.paramsInheritanceStrategy,this.environmentInjector),ro({next:()=>O=!0,complete:()=>{O||this.cancelNavigationTransition(N,"",Ao.NoDataFromResolver)}}))}),ro(N=>{const O=new t6(N.id,this.urlSerializer.serialize(N.extractedUrl),this.urlSerializer.serialize(N.urlAfterRedirects),N.targetSnapshot);this.events.next(O)}))}),m_(R=>{const N=O=>{var F;const $=[];null!==(F=O.routeConfig)&&void 0!==F&&F.loadComponent&&!O.routeConfig._loadedComponent&&$.push(this.configLoader.loadComponent(O.routeConfig).pipe(ro(Q=>{O.component=Q}),k(()=>{})));for(const Q of O.children)$.push(...N(Q));return $};return qv(N(R.targetSnapshot.root)).pipe(Uh(null),jc(1))}),m_(()=>this.afterPreactivation()),Lo(()=>{var R;const{currentSnapshot:N,targetSnapshot:O}=I,F=null===(R=this.createViewTransition)||void 0===R?void 0:R.call(this,this.environmentInjector,N.root,O.root);return F?br(F).pipe(k(()=>I)):nn(I)}),k(R=>{const N=function u6(y,_,S){const C=Wu(y,_._root,S?S._root:void 0);return new kA(C,_)}(C.routeReuseStrategy,R.targetSnapshot,R.currentRouterState);return this.currentTransition=I=se(se({},R),{},{targetRouterState:N}),this.currentNavigation.targetRouterState=N,I}),ro(()=>{this.events.next(new t_)}),((y,_,S,C)=>k(T=>(new C6(_,T.targetRouterState,T.currentRouterState,S,C).activate(y),T)))(this.rootContexts,C.routeReuseStrategy,R=>this.events.next(R),this.inputBindingEnabled),jc(1),ro({next:R=>{var N;M=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new ds(R.id,this.urlSerializer.serialize(R.extractedUrl),this.urlSerializer.serialize(R.urlAfterRedirects))),null===(N=this.titleStrategy)||void 0===N||N.updateTitle(R.targetRouterState.snapshot),R.resolve(!0)},complete:()=>{M=!0}}),$c(this.transitionAbortSubject.pipe(ro(R=>{throw R}))),Uu(()=>{var R;!M&&!A&&this.cancelNavigationTransition(I,"",Ao.SupersededByNewNavigation),(null===(R=this.currentTransition)||void 0===R?void 0:R.id)===I.id&&(this.currentNavigation=null,this.currentTransition=null)}),xs(R=>{if(A=!0,HA(R))this.events.next(new Gc(I.id,this.urlSerializer.serialize(I.extractedUrl),R.message,R.cancellationCode)),function h6(y){return HA(y)&&Wc(y.url)}(R)?this.events.next(new n_(R.url)):I.resolve(!1);else{var N;this.events.next(new Gh(I.id,this.urlSerializer.serialize(I.extractedUrl),R,null!==(N=I.targetSnapshot)&&void 0!==N?N:void 0));try{I.resolve(C.errorHandler(R))}catch(O){this.options.resolveNavigationPromiseOnError?I.resolve(!1):I.reject(O)}}return Pi}))}))}cancelNavigationTransition(C,T,D){const I=new Gc(C.id,this.urlSerializer.serialize(C.extractedUrl),T,D);this.events.next(I),C.resolve(!1)}isUpdatingInternalState(){var C,T;return(null===(C=this.currentTransition)||void 0===C?void 0:C.extractedUrl.toString())!==(null===(T=this.currentTransition)||void 0===T?void 0:T.currentUrlTree.toString())}isUpdatedBrowserUrl(){var C,T;return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==(null===(C=this.currentTransition)||void 0===C?void 0:C.extractedUrl.toString())&&!(null!==(T=this.currentTransition)&&void 0!==T&&T.extras.skipLocationChange)}}return(y=_).\u0275fac=function(C){return new(C||y)},y.\u0275prov=At({token:y,factory:y.\u0275fac,providedIn:"root"}),_})();function y5(y){return y!==zu}let v5=(()=>{var y;class _{}return(y=_).\u0275fac=function(C){return new(C||y)},y.\u0275prov=At({token:y,factory:()=>at(C5),providedIn:"root"}),_})();class _5{shouldDetach(_){return!1}store(_,S){}shouldAttach(_){return!1}retrieve(_){return null}shouldReuseRoute(_,S){return _.routeConfig===S.routeConfig}}let C5=(()=>{var y;class _ extends _5{}return(y=_).\u0275fac=(()=>{let S;return function(T){return(S||(S=Nr(y)))(T||y)}})(),y.\u0275prov=At({token:y,factory:y.\u0275fac,providedIn:"root"}),_})(),tR=(()=>{var y;class _{}return(y=_).\u0275fac=function(C){return new(C||y)},y.\u0275prov=At({token:y,factory:()=>at(w5),providedIn:"root"}),_})(),w5=(()=>{var y;class _ extends tR{constructor(){super(...arguments),this.location=at(Su),this.urlSerializer=at(qc),this.options=at(Zc,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=at(v_),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new zc,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=xA(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){var C,T;return"computed"!==this.canceledNavigationResolution?this.currentPageId:null!==(C=null===(T=this.restoredState())||void 0===T?void 0:T.\u0275routerPageId)&&void 0!==C?C:this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(C){return this.location.subscribe(T=>{"popstate"===T.type&&C(T.url,T.state)})}handleRouterEvent(C,T){if(C instanceof qh)this.stateMemento=this.createStateMemento();else if(C instanceof Kc)this.rawUrlTree=T.initialUrl;else if(C instanceof PA){if("eager"===this.urlUpdateStrategy&&!T.extras.skipLocationChange){const D=this.urlHandlingStrategy.merge(T.finalUrl,T.initialUrl);this.setBrowserUrl(D,T)}}else C instanceof t_?(this.currentUrlTree=T.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(T.finalUrl,T.initialUrl),this.routerState=T.targetRouterState,"deferred"===this.urlUpdateStrategy&&(T.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,T))):C instanceof Gc&&(C.code===Ao.GuardRejected||C.code===Ao.NoDataFromResolver)?this.restoreHistory(T):C instanceof Gh?this.restoreHistory(T,!0):C instanceof ds&&(this.lastSuccessfulId=C.id,this.currentPageId=this.browserPageId)}setBrowserUrl(C,T){const D=this.urlSerializer.serialize(C);if(this.location.isCurrentPathEqualTo(D)||T.extras.replaceUrl){const I=this.browserPageId,M=se(se({},T.extras.state),this.generateNgRouterState(T.id,I));this.location.replaceState(D,"",M)}else{const I=se(se({},T.extras.state),this.generateNgRouterState(T.id,this.browserPageId+1));this.location.go(D,"",I)}}restoreHistory(C,T=!1){if("computed"===this.canceledNavigationResolution){const I=this.currentPageId-this.browserPageId;0!==I?this.location.historyGo(I):this.currentUrlTree===C.finalUrl&&0===I&&(this.resetState(C),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(T&&this.resetState(C),this.resetUrlToCurrentUrlTree())}resetState(C){var T;this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,null!==(T=C.finalUrl)&&void 0!==T?T:this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(C,T){return"computed"===this.canceledNavigationResolution?{navigationId:C,\u0275routerPageId:T}:{navigationId:C}}}return(y=_).\u0275fac=(()=>{let S;return function(T){return(S||(S=Nr(y)))(T||y)}})(),y.\u0275prov=At({token:y,factory:y.\u0275fac,providedIn:"root"}),_})();var Xu=function(y){return y[y.COMPLETE=0]="COMPLETE",y[y.FAILED=1]="FAILED",y[y.REDIRECTING=2]="REDIRECTING",y}(Xu||{});function nR(y,_){y.events.pipe(us(S=>S instanceof ds||S instanceof Gc||S instanceof Gh||S instanceof Kc),k(S=>S instanceof ds||S instanceof Kc?Xu.COMPLETE:S instanceof Gc&&(S.code===Ao.Redirect||S.code===Ao.SupersededByNewNavigation)?Xu.REDIRECTING:Xu.FAILED),us(S=>S!==Xu.REDIRECTING),jc(1)).subscribe(()=>{_()})}function b5(y){throw y}const S5={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},T5={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Uo=(()=>{var y;class _{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){var C,T;this.disposed=!1,this.isNgZoneEnabled=!1,this.console=at(_D),this.stateManager=at(tR),this.options=at(Zc,{optional:!0})||{},this.pendingTasks=at(Is),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=at(Zh),this.urlSerializer=at(qc),this.location=at(Su),this.urlHandlingStrategy=at(v_),this._events=new fr,this.errorHandler=this.options.errorHandler||b5,this.navigated=!1,this.routeReuseStrategy=at(v5),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=null!==(C=null===(T=at(el,{optional:!0}))||void 0===T?void 0:T.flat())&&void 0!==C?C:[],this.componentInputBindingEnabled=!!at(Jh,{optional:!0}),this.eventsSubscription=new Ze,this.isNgZoneEnabled=at(Pn)instanceof Pn&&Pn.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:D=>{this.console.warn(D)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){const C=this.navigationTransitions.events.subscribe(T=>{try{const D=this.navigationTransitions.currentTransition,I=this.navigationTransitions.currentNavigation;if(null!==D&&null!==I)if(this.stateManager.handleRouterEvent(T,I),T instanceof Gc&&T.code!==Ao.Redirect&&T.code!==Ao.SupersededByNewNavigation)this.navigated=!0;else if(T instanceof ds)this.navigated=!0;else if(T instanceof n_){const M=this.urlHandlingStrategy.merge(T.url,D.currentRawUrl),A={info:D.extras.info,skipLocationChange:D.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||y5(D.source)};this.scheduleNavigation(M,zu,null,A,{resolve:D.resolve,reject:D.reject,promise:D.promise})}(function D5(y){return!(y instanceof t_||y instanceof n_)})(T)&&this._events.next(T)}catch(D){this.navigationTransitions.transitionAbortSubject.next(D)}});this.eventsSubscription.add(C)}resetRootComponentType(C){this.routerState.root.component=C,this.navigationTransitions.rootComponentType=C}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),zu,this.stateManager.restoredState())}setUpLocationChangeListener(){var C;null!==(C=this.nonRouterCurrentEntryChangeSubscription)&&void 0!==C||(this.nonRouterCurrentEntryChangeSubscription=this.stateManager.registerNonRouterCurrentEntryChangeListener((T,D)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(T,"popstate",D)},0)}))}navigateToSyncWithBrowser(C,T,D){const I={replaceUrl:!0},M=null!=D&&D.navigationId?D:null;if(D){const R=se({},D);delete R.navigationId,delete R.\u0275routerPageId,0!==Object.keys(R).length&&(I.state=R)}const A=this.parseUrl(C);this.scheduleNavigation(A,T,M,I)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(C){this.config=C.map(d_),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(C,T={}){const{relativeTo:D,queryParams:I,fragment:M,queryParamsHandling:A,preserveFragment:R}=T,N=R?this.currentUrlTree.fragment:M;let F,O=null;switch(A){case"merge":O=se(se({},this.currentUrlTree.queryParams),I);break;case"preserve":O=this.currentUrlTree.queryParams;break;default:O=I||null}null!==O&&(O=this.removeEmptyProps(O));try{F=TA(D?D.snapshot:this.routerState.snapshot.root)}catch($){("string"!=typeof C[0]||!C[0].startsWith("/"))&&(C=[]),F=this.currentUrlTree.root}return EA(F,C,O,null!=N?N:null)}navigateByUrl(C,T={skipLocationChange:!1}){const D=Wc(C)?C:this.parseUrl(C),I=this.urlHandlingStrategy.merge(D,this.rawUrlTree);return this.scheduleNavigation(I,zu,null,T)}navigate(C,T={skipLocationChange:!1}){return function E5(y){for(let _=0;_<y.length;_++)if(null==y[_])throw new j(4008,!1)}(C),this.navigateByUrl(this.createUrlTree(C,T),T)}serializeUrl(C){return this.urlSerializer.serialize(C)}parseUrl(C){try{return this.urlSerializer.parse(C)}catch(T){return this.urlSerializer.parse("/")}}isActive(C,T){let D;if(D=!0===T?se({},S5):!1===T?se({},T5):T,Wc(C))return gA(this.currentUrlTree,C,D);const I=this.parseUrl(C);return gA(this.currentUrlTree,I,D)}removeEmptyProps(C){return Object.entries(C).reduce((T,[D,I])=>(null!=I&&(T[D]=I),T),{})}scheduleNavigation(C,T,D,I,M){if(this.disposed)return Promise.resolve(!1);let A,R,N;M?(A=M.resolve,R=M.reject,N=M.promise):N=new Promise((F,$)=>{A=F,R=$});const O=this.pendingTasks.add();return nR(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(O))}),this.navigationTransitions.handleNavigationRequest({source:T,restoredState:D,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:C,extras:I,resolve:A,reject:R,promise:N,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),N.catch(F=>Promise.reject(F))}}return(y=_).\u0275fac=function(C){return new(C||y)},y.\u0275prov=At({token:y,factory:y.\u0275fac,providedIn:"root"}),_})();class rR{}let A5=(()=>{var y;class _{constructor(C,T,D,I,M){this.router=C,this.injector=D,this.preloadingStrategy=I,this.loader=M}setUpPreloading(){this.subscription=this.router.events.pipe(us(C=>C instanceof ds),Bc(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(C,T){const D=[];for(const R of T){var I,M;R.providers&&!R._injector&&(R._injector=Nf(R.providers,C,"Route: ".concat(R.path)));const N=null!==(I=R._injector)&&void 0!==I?I:C,O=null!==(M=R._loadedInjector)&&void 0!==M?M:N;var A;(R.loadChildren&&!R._loadedRoutes&&void 0===R.canLoad||R.loadComponent&&!R._loadedComponent)&&D.push(this.preloadConfig(N,R)),(R.children||R._loadedRoutes)&&D.push(this.processRoutes(O,null!==(A=R.children)&&void 0!==A?A:R._loadedRoutes))}return br(D).pipe(Lu())}preloadConfig(C,T){return this.preloadingStrategy.preload(T,()=>{let D;D=T.loadChildren&&void 0===T.canLoad?this.loader.loadChildren(C,T):nn(null);const I=D.pipe(Hr(M=>{var A;return null===M?nn(void 0):(T._loadedRoutes=M.routes,T._loadedInjector=M.injector,this.processRoutes(null!==(A=M.injector)&&void 0!==A?A:C,M.routes))}));return T.loadComponent&&!T._loadedComponent?br([I,this.loader.loadComponent(T)]).pipe(Lu()):I})}}return(y=_).\u0275fac=function(C){return new(C||y)(Ft(Uo),Ft(MD),Ft(Qr),Ft(rR),Ft(y_))},y.\u0275prov=At({token:y,factory:y.\u0275fac,providedIn:"root"}),_})();const C_=new Mt("");let oR=(()=>{var y;class _{constructor(C,T,D,I,M={}){this.urlSerializer=C,this.transitions=T,this.viewportScroller=D,this.zone=I,this.options=M,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},this.environmentInjector=at(Qr),M.scrollPositionRestoration||(M.scrollPositionRestoration="disabled"),M.anchorScrolling||(M.anchorScrolling="disabled")}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(C=>{C instanceof qh?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=C.navigationTrigger,this.restoredId=C.restoredState?C.restoredState.navigationId:0):C instanceof ds?(this.lastId=C.id,this.scheduleScrollEvent(C,this.urlSerializer.parse(C.urlAfterRedirects).fragment)):C instanceof Kc&&C.code===Wh.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(C,this.urlSerializer.parse(C.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(C=>{C instanceof NA&&(C.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(C.position):C.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(C.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(C,T){var D=this;this.zone.runOutsideAngular((0,pe.A)(function*(){yield new Promise(I=>{setTimeout(()=>{I()}),Am(()=>{I()},{injector:D.environmentInjector})}),D.zone.run(()=>{D.transitions.events.next(new NA(C,"popstate"===D.lastSource?D.store[D.restoredId]:null,T))})}))}ngOnDestroy(){var C,T;null===(C=this.routerEventsSubscription)||void 0===C||C.unsubscribe(),null===(T=this.scrollEventsSubscription)||void 0===T||T.unsubscribe()}}return(y=_).\u0275fac=function(C){!function bb(){throw new Error("invalid")}()},y.\u0275prov=At({token:y,factory:y.\u0275fac}),_})();function xi(y,_){return{\u0275kind:y,\u0275providers:_}}function sR(){const y=at(Zr);return _=>{var S,C;const T=y.get(Rs);if(_!==T.components[0])return;const D=y.get(Uo),I=y.get(aR);1===y.get(w_)&&D.initialNavigation(),null===(S=y.get(cR,null,vn.Optional))||void 0===S||S.setUpPreloading(),null===(C=y.get(C_,null,vn.Optional))||void 0===C||C.init(),D.resetRootComponentType(T.componentTypes[0]),I.closed||(I.next(),I.complete(),I.unsubscribe())}}const aR=new Mt("",{factory:()=>new fr}),w_=new Mt("",{providedIn:"root",factory:()=>1}),cR=new Mt("");function O5(y){return xi(0,[{provide:cR,useExisting:A5},{provide:rR,useExisting:y}])}function x5(y){return xi(9,[{provide:ZA,useValue:g5},{provide:eR,useValue:se({skipNextTransition:!(null==y||!y.skipInitialTransition)},y)}])}const lR=new Mt("ROUTER_FORROOT_GUARD"),F5=[Su,{provide:qc,useClass:Qv},Uo,qu,{provide:Ea,useFactory:function iR(y){return y.routerState.root},deps:[Uo]},y_,[]];let L5=(()=>{var y;class _{constructor(C){}static forRoot(C,T){return{ngModule:_,providers:[F5,[],{provide:el,multi:!0,useValue:C},{provide:lR,useFactory:B5,deps:[[Uo,new Sd,new Td]]},{provide:Zc,useValue:T||{}},null!=T&&T.useHash?{provide:_a,useClass:nH}:{provide:_a,useClass:yI},{provide:C_,useFactory:()=>{const y=at(b3),_=at(Pn),S=at(Zc),C=at(Zh),T=at(qc);return S.scrollOffset&&y.setOffset(S.scrollOffset),new oR(T,C,y,_,S)}},null!=T&&T.preloadingStrategy?O5(T.preloadingStrategy).\u0275providers:[],null!=T&&T.initialNavigation?$5(T):[],null!=T&&T.bindToComponentInputs?xi(8,[VA,{provide:Jh,useExisting:VA}]).\u0275providers:[],null!=T&&T.enableViewTransitions?x5().\u0275providers:[],[{provide:uR,useFactory:sR},{provide:Py,multi:!0,useExisting:uR}]]}}static forChild(C){return{ngModule:_,providers:[{provide:el,multi:!0,useValue:C}]}}}return(y=_).\u0275fac=function(C){return new(C||y)(Ft(lR,8))},y.\u0275mod=Wo({type:y}),y.\u0275inj=Po({}),_})();function B5(y){return"guarded"}function $5(y){return["disabled"===y.initialNavigation?xi(3,[{provide:Ay,multi:!0,useFactory:()=>{const _=at(Uo);return()=>{_.setUpLocationChangeListener()}}},{provide:w_,useValue:2}]).\u0275providers:[],"enabledBlocking"===y.initialNavigation?xi(2,[{provide:w_,useValue:0},{provide:Ay,multi:!0,deps:[Zr],useFactory:_=>{const S=_.get(eH,Promise.resolve());return()=>S.then(()=>new Promise(C=>{const T=_.get(Uo),D=_.get(aR);nR(T,()=>{C(!0)}),_.get(Zh).afterPreactivation=()=>(C(!0),D.closed?nn(void 0):D),T.initialNavigation()}))}}]).\u0275providers:[]]}const uR=new Mt("");class ep{}class tp{}class Vo{constructor(_){this.normalizedNames=new Map,this.lazyUpdate=null,_?"string"==typeof _?this.lazyInit=()=>{this.headers=new Map,_.split("\n").forEach(S=>{const C=S.indexOf(":");if(C>0){const T=S.slice(0,C),D=T.toLowerCase(),I=S.slice(C+1).trim();this.maybeSetNormalizedName(T,D),this.headers.has(D)?this.headers.get(D).push(I):this.headers.set(D,[I])}})}:typeof Headers<"u"&&_ instanceof Headers?(this.headers=new Map,_.forEach((S,C)=>{this.setHeaderEntries(C,S)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(_).forEach(([S,C])=>{this.setHeaderEntries(S,C)})}:this.headers=new Map}has(_){return this.init(),this.headers.has(_.toLowerCase())}get(_){this.init();const S=this.headers.get(_.toLowerCase());return S&&S.length>0?S[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(_){return this.init(),this.headers.get(_.toLowerCase())||null}append(_,S){return this.clone({name:_,value:S,op:"a"})}set(_,S){return this.clone({name:_,value:S,op:"s"})}delete(_,S){return this.clone({name:_,value:S,op:"d"})}maybeSetNormalizedName(_,S){this.normalizedNames.has(S)||this.normalizedNames.set(S,_)}init(){this.lazyInit&&(this.lazyInit instanceof Vo?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(_=>this.applyUpdate(_)),this.lazyUpdate=null))}copyFrom(_){_.init(),Array.from(_.headers.keys()).forEach(S=>{this.headers.set(S,_.headers.get(S)),this.normalizedNames.set(S,_.normalizedNames.get(S))})}clone(_){const S=new Vo;return S.lazyInit=this.lazyInit&&this.lazyInit instanceof Vo?this.lazyInit:this,S.lazyUpdate=(this.lazyUpdate||[]).concat([_]),S}applyUpdate(_){const S=_.name.toLowerCase();switch(_.op){case"a":case"s":let C=_.value;if("string"==typeof C&&(C=[C]),0===C.length)return;this.maybeSetNormalizedName(_.name,S);const T=("a"===_.op?this.headers.get(S):void 0)||[];T.push(...C),this.headers.set(S,T);break;case"d":const D=_.value;if(D){let I=this.headers.get(S);if(!I)return;I=I.filter(M=>-1===D.indexOf(M)),0===I.length?(this.headers.delete(S),this.normalizedNames.delete(S)):this.headers.set(S,I)}else this.headers.delete(S),this.normalizedNames.delete(S)}}setHeaderEntries(_,S){const C=(Array.isArray(S)?S:[S]).map(D=>D.toString()),T=_.toLowerCase();this.headers.set(T,C),this.maybeSetNormalizedName(_,T)}forEach(_){this.init(),Array.from(this.normalizedNames.keys()).forEach(S=>_(this.normalizedNames.get(S),this.headers.get(S)))}}class q5{encodeKey(_){return dR(_)}encodeValue(_){return dR(_)}decodeKey(_){return decodeURIComponent(_)}decodeValue(_){return decodeURIComponent(_)}}const G5=/%(\d[a-f0-9])/gi,K5={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function dR(y){return encodeURIComponent(y).replace(G5,(_,S)=>{var C;return null!==(C=K5[S])&&void 0!==C?C:_})}function np(y){return"".concat(y)}class Ls{constructor(_={}){if(this.updates=null,this.cloneFrom=null,this.encoder=_.encoder||new q5,_.fromString){if(_.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function W5(y,_){const S=new Map;return y.length>0&&y.replace(/^\?/,"").split("&").forEach(T=>{const D=T.indexOf("="),[I,M]=-1==D?[_.decodeKey(T),""]:[_.decodeKey(T.slice(0,D)),_.decodeValue(T.slice(D+1))],A=S.get(I)||[];A.push(M),S.set(I,A)}),S}(_.fromString,this.encoder)}else _.fromObject?(this.map=new Map,Object.keys(_.fromObject).forEach(S=>{const C=_.fromObject[S],T=Array.isArray(C)?C.map(np):[np(C)];this.map.set(S,T)})):this.map=null}has(_){return this.init(),this.map.has(_)}get(_){this.init();const S=this.map.get(_);return S?S[0]:null}getAll(_){return this.init(),this.map.get(_)||null}keys(){return this.init(),Array.from(this.map.keys())}append(_,S){return this.clone({param:_,value:S,op:"a"})}appendAll(_){const S=[];return Object.keys(_).forEach(C=>{const T=_[C];Array.isArray(T)?T.forEach(D=>{S.push({param:C,value:D,op:"a"})}):S.push({param:C,value:T,op:"a"})}),this.clone(S)}set(_,S){return this.clone({param:_,value:S,op:"s"})}delete(_,S){return this.clone({param:_,value:S,op:"d"})}toString(){return this.init(),this.keys().map(_=>{const S=this.encoder.encodeKey(_);return this.map.get(_).map(C=>S+"="+this.encoder.encodeValue(C)).join("&")}).filter(_=>""!==_).join("&")}clone(_){const S=new Ls({encoder:this.encoder});return S.cloneFrom=this.cloneFrom||this,S.updates=(this.updates||[]).concat(_),S}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(_=>this.map.set(_,this.cloneFrom.map.get(_))),this.updates.forEach(_=>{switch(_.op){case"a":case"s":const S=("a"===_.op?this.map.get(_.param):void 0)||[];S.push(np(_.value)),this.map.set(_.param,S);break;case"d":if(void 0===_.value){this.map.delete(_.param);break}{let C=this.map.get(_.param)||[];const T=C.indexOf(np(_.value));-1!==T&&C.splice(T,1),C.length>0?this.map.set(_.param,C):this.map.delete(_.param)}}}),this.cloneFrom=this.updates=null)}}class J5{constructor(){this.map=new Map}set(_,S){return this.map.set(_,S),this}get(_){return this.map.has(_)||this.map.set(_,_.defaultValue()),this.map.get(_)}delete(_){return this.map.delete(_),this}has(_){return this.map.has(_)}keys(){return this.map.keys()}}function fR(y){return typeof ArrayBuffer<"u"&&y instanceof ArrayBuffer}function hR(y){return typeof Blob<"u"&&y instanceof Blob}function pR(y){return typeof FormData<"u"&&y instanceof FormData}class Yu{constructor(_,S,C,T){var D,I;let M;if(this.url=S,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=_.toUpperCase(),function Q5(y){switch(y){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||T?(this.body=void 0!==C?C:null,M=T):M=C,M&&(this.reportProgress=!!M.reportProgress,this.withCredentials=!!M.withCredentials,M.responseType&&(this.responseType=M.responseType),M.headers&&(this.headers=M.headers),M.context&&(this.context=M.context),M.params&&(this.params=M.params),this.transferCache=M.transferCache),null!==(D=this.headers)&&void 0!==D||(this.headers=new Vo),null!==(I=this.context)&&void 0!==I||(this.context=new J5),this.params){const A=this.params.toString();if(0===A.length)this.urlWithParams=S;else{const R=S.indexOf("?");this.urlWithParams=S+(-1===R?"?":R<S.length-1?"&":"")+A}}else this.params=new Ls,this.urlWithParams=S}serializeBody(){return null===this.body?null:"string"==typeof this.body||fR(this.body)||hR(this.body)||pR(this.body)||function X5(y){return typeof URLSearchParams<"u"&&y instanceof URLSearchParams}(this.body)?this.body:this.body instanceof Ls?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||pR(this.body)?null:hR(this.body)?this.body.type||null:fR(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Ls?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(_={}){var S,C,T,D;const I=_.method||this.method,M=_.url||this.url,A=_.responseType||this.responseType,R=null!==(S=_.transferCache)&&void 0!==S?S:this.transferCache,N=void 0!==_.body?_.body:this.body,O=null!==(C=_.withCredentials)&&void 0!==C?C:this.withCredentials,F=null!==(T=_.reportProgress)&&void 0!==T?T:this.reportProgress;let $=_.headers||this.headers,Q=_.params||this.params;const ae=null!==(D=_.context)&&void 0!==D?D:this.context;return void 0!==_.setHeaders&&($=Object.keys(_.setHeaders).reduce((Ce,Ee)=>Ce.set(Ee,_.setHeaders[Ee]),$)),_.setParams&&(Q=Object.keys(_.setParams).reduce((Ce,Ee)=>Ce.set(Ee,_.setParams[Ee]),Q)),new Yu(I,M,N,{params:Q,headers:$,context:ae,reportProgress:F,responseType:A,withCredentials:O,transferCache:R})}}var Us=function(y){return y[y.Sent=0]="Sent",y[y.UploadProgress=1]="UploadProgress",y[y.ResponseHeader=2]="ResponseHeader",y[y.DownloadProgress=3]="DownloadProgress",y[y.Response=4]="Response",y[y.User=5]="User",y}(Us||{});class b_{constructor(_,S=Zu.Ok,C="OK"){this.headers=_.headers||new Vo,this.status=void 0!==_.status?_.status:S,this.statusText=_.statusText||C,this.url=_.url||null,this.ok=this.status>=200&&this.status<300}}class rp extends b_{constructor(_={}){super(_),this.type=Us.ResponseHeader}clone(_={}){return new rp({headers:_.headers||this.headers,status:void 0!==_.status?_.status:this.status,statusText:_.statusText||this.statusText,url:_.url||this.url||void 0})}}class Da extends b_{constructor(_={}){super(_),this.type=Us.Response,this.body=void 0!==_.body?_.body:null}clone(_={}){return new Da({body:void 0!==_.body?_.body:this.body,headers:_.headers||this.headers,status:void 0!==_.status?_.status:this.status,statusText:_.statusText||this.statusText,url:_.url||this.url||void 0})}}class tl extends b_{constructor(_){super(_,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?"Http failure during parsing for ".concat(_.url||"(unknown url)"):"Http failure response for ".concat(_.url||"(unknown url)",": ").concat(_.status," ").concat(_.statusText),this.error=_.error||null}}var Zu=function(y){return y[y.Continue=100]="Continue",y[y.SwitchingProtocols=101]="SwitchingProtocols",y[y.Processing=102]="Processing",y[y.EarlyHints=103]="EarlyHints",y[y.Ok=200]="Ok",y[y.Created=201]="Created",y[y.Accepted=202]="Accepted",y[y.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",y[y.NoContent=204]="NoContent",y[y.ResetContent=205]="ResetContent",y[y.PartialContent=206]="PartialContent",y[y.MultiStatus=207]="MultiStatus",y[y.AlreadyReported=208]="AlreadyReported",y[y.ImUsed=226]="ImUsed",y[y.MultipleChoices=300]="MultipleChoices",y[y.MovedPermanently=301]="MovedPermanently",y[y.Found=302]="Found",y[y.SeeOther=303]="SeeOther",y[y.NotModified=304]="NotModified",y[y.UseProxy=305]="UseProxy",y[y.Unused=306]="Unused",y[y.TemporaryRedirect=307]="TemporaryRedirect",y[y.PermanentRedirect=308]="PermanentRedirect",y[y.BadRequest=400]="BadRequest",y[y.Unauthorized=401]="Unauthorized",y[y.PaymentRequired=402]="PaymentRequired",y[y.Forbidden=403]="Forbidden",y[y.NotFound=404]="NotFound",y[y.MethodNotAllowed=405]="MethodNotAllowed",y[y.NotAcceptable=406]="NotAcceptable",y[y.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",y[y.RequestTimeout=408]="RequestTimeout",y[y.Conflict=409]="Conflict",y[y.Gone=410]="Gone",y[y.LengthRequired=411]="LengthRequired",y[y.PreconditionFailed=412]="PreconditionFailed",y[y.PayloadTooLarge=413]="PayloadTooLarge",y[y.UriTooLong=414]="UriTooLong",y[y.UnsupportedMediaType=415]="UnsupportedMediaType",y[y.RangeNotSatisfiable=416]="RangeNotSatisfiable",y[y.ExpectationFailed=417]="ExpectationFailed",y[y.ImATeapot=418]="ImATeapot",y[y.MisdirectedRequest=421]="MisdirectedRequest",y[y.UnprocessableEntity=422]="UnprocessableEntity",y[y.Locked=423]="Locked",y[y.FailedDependency=424]="FailedDependency",y[y.TooEarly=425]="TooEarly",y[y.UpgradeRequired=426]="UpgradeRequired",y[y.PreconditionRequired=428]="PreconditionRequired",y[y.TooManyRequests=429]="TooManyRequests",y[y.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",y[y.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",y[y.InternalServerError=500]="InternalServerError",y[y.NotImplemented=501]="NotImplemented",y[y.BadGateway=502]="BadGateway",y[y.ServiceUnavailable=503]="ServiceUnavailable",y[y.GatewayTimeout=504]="GatewayTimeout",y[y.HttpVersionNotSupported=505]="HttpVersionNotSupported",y[y.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",y[y.InsufficientStorage=507]="InsufficientStorage",y[y.LoopDetected=508]="LoopDetected",y[y.NotExtended=510]="NotExtended",y[y.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",y}(Zu||{});function S_(y,_){return{body:_,headers:y.headers,context:y.context,observe:y.observe,params:y.params,reportProgress:y.reportProgress,responseType:y.responseType,withCredentials:y.withCredentials,transferCache:y.transferCache}}let T_=(()=>{var y;class _{constructor(C){this.handler=C}request(C,T,D={}){let I;if(C instanceof Yu)I=C;else{let R,N;R=D.headers instanceof Vo?D.headers:new Vo(D.headers),D.params&&(N=D.params instanceof Ls?D.params:new Ls({fromObject:D.params})),I=new Yu(C,T,void 0!==D.body?D.body:null,{headers:R,context:D.context,params:N,reportProgress:D.reportProgress,responseType:D.responseType||"json",withCredentials:D.withCredentials,transferCache:D.transferCache})}const M=nn(I).pipe(Bc(R=>this.handler.handle(R)));if(C instanceof Yu||"events"===D.observe)return M;const A=M.pipe(us(R=>R instanceof Da));switch(D.observe||"body"){case"body":switch(I.responseType){case"arraybuffer":return A.pipe(k(R=>{if(null!==R.body&&!(R.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return R.body}));case"blob":return A.pipe(k(R=>{if(null!==R.body&&!(R.body instanceof Blob))throw new Error("Response is not a Blob.");return R.body}));case"text":return A.pipe(k(R=>{if(null!==R.body&&"string"!=typeof R.body)throw new Error("Response is not a string.");return R.body}));default:return A.pipe(k(R=>R.body))}case"response":return A;default:throw new Error("Unreachable: unhandled observe type ".concat(D.observe,"}"))}}delete(C,T={}){return this.request("DELETE",C,T)}get(C,T={}){return this.request("GET",C,T)}head(C,T={}){return this.request("HEAD",C,T)}jsonp(C,T){return this.request("JSONP",C,{params:(new Ls).append(T,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(C,T={}){return this.request("OPTIONS",C,T)}patch(C,T,D={}){return this.request("PATCH",C,S_(D,T))}post(C,T,D={}){return this.request("POST",C,S_(D,T))}put(C,T,D={}){return this.request("PUT",C,S_(D,T))}}return(y=_).\u0275fac=function(C){return new(C||y)(Ft(ep))},y.\u0275prov=At({token:y,factory:y.\u0275fac}),_})();function mR(y,_){return _(y)}function nW(y,_){return(S,C)=>_.intercept(S,{handle:T=>y(T,C)})}const yR=new Mt(""),ed=new Mt(""),vR=new Mt(""),_R=new Mt("");function oW(){let y=null;return(_,S)=>{var C;null===y&&(y=(null!==(C=at(yR,{optional:!0}))&&void 0!==C?C:[]).reduceRight(nW,mR));const T=at(Is),D=T.add();return y(_,S).pipe(Uu(()=>T.remove(D)))}}let CR=(()=>{var y;class _ extends ep{constructor(C,T){super(),this.backend=C,this.injector=T,this.chain=null,this.pendingTasks=at(Is);const D=at(_R,{optional:!0});this.backend=null!=D?D:C}handle(C){if(null===this.chain){const D=Array.from(new Set([...this.injector.get(ed),...this.injector.get(vR,[])]));this.chain=D.reduceRight((I,M)=>function rW(y,_,S){return(C,T)=>ui(S,()=>_(C,D=>y(D,T)))}(I,M,this.injector),mR)}const T=this.pendingTasks.add();return this.chain(C,D=>this.backend.handle(D)).pipe(Uu(()=>this.pendingTasks.remove(T)))}}return(y=_).\u0275fac=function(C){return new(C||y)(Ft(tp),Ft(Qr))},y.\u0275prov=At({token:y,factory:y.\u0275fac}),_})();const lW=/^\)\]\}',?\n/;let bR=(()=>{var y;class _{constructor(C){this.xhrFactory=C}handle(C){if("JSONP"===C.method)throw new j(-2800,!1);const T=this.xhrFactory;return(T.\u0275loadImpl?br(T.\u0275loadImpl()):nn(null)).pipe(Lo(()=>new Kn(I=>{const M=T.build();if(M.open(C.method,C.urlWithParams),C.withCredentials&&(M.withCredentials=!0),C.headers.forEach((Ce,Ee)=>M.setRequestHeader(Ce,Ee.join(","))),C.headers.has("Accept")||M.setRequestHeader("Accept","application/json, text/plain, */*"),!C.headers.has("Content-Type")){const Ce=C.detectContentTypeHeader();null!==Ce&&M.setRequestHeader("Content-Type",Ce)}if(C.responseType){const Ce=C.responseType.toLowerCase();M.responseType="json"!==Ce?Ce:"text"}const A=C.serializeBody();let R=null;const N=()=>{if(null!==R)return R;const Ce=M.statusText||"OK",Ee=new Vo(M.getAllResponseHeaders()),Ae=function uW(y){return"responseURL"in y&&y.responseURL?y.responseURL:/^X-Request-URL:/m.test(y.getAllResponseHeaders())?y.getResponseHeader("X-Request-URL"):null}(M)||C.url;return R=new rp({headers:Ee,status:M.status,statusText:Ce,url:Ae}),R},O=()=>{let{headers:Ce,status:Ee,statusText:Ae,url:ht}=N(),vt=null;Ee!==Zu.NoContent&&(vt=typeof M.response>"u"?M.responseText:M.response),0===Ee&&(Ee=vt?Zu.Ok:0);let $t=Ee>=200&&Ee<300;if("json"===C.responseType&&"string"==typeof vt){const An=vt;vt=vt.replace(lW,"");try{vt=""!==vt?JSON.parse(vt):null}catch(Dn){vt=An,$t&&($t=!1,vt={error:Dn,text:vt})}}$t?(I.next(new Da({body:vt,headers:Ce,status:Ee,statusText:Ae,url:ht||void 0})),I.complete()):I.error(new tl({error:vt,headers:Ce,status:Ee,statusText:Ae,url:ht||void 0}))},F=Ce=>{const{url:Ee}=N(),Ae=new tl({error:Ce,status:M.status||0,statusText:M.statusText||"Unknown Error",url:Ee||void 0});I.error(Ae)};let $=!1;const Q=Ce=>{$||(I.next(N()),$=!0);let Ee={type:Us.DownloadProgress,loaded:Ce.loaded};Ce.lengthComputable&&(Ee.total=Ce.total),"text"===C.responseType&&M.responseText&&(Ee.partialText=M.responseText),I.next(Ee)},ae=Ce=>{let Ee={type:Us.UploadProgress,loaded:Ce.loaded};Ce.lengthComputable&&(Ee.total=Ce.total),I.next(Ee)};return M.addEventListener("load",O),M.addEventListener("error",F),M.addEventListener("timeout",F),M.addEventListener("abort",F),C.reportProgress&&(M.addEventListener("progress",Q),null!==A&&M.upload&&M.upload.addEventListener("progress",ae)),M.send(A),I.next({type:Us.Sent}),()=>{M.removeEventListener("error",F),M.removeEventListener("abort",F),M.removeEventListener("load",O),M.removeEventListener("timeout",F),C.reportProgress&&(M.removeEventListener("progress",Q),null!==A&&M.upload&&M.upload.removeEventListener("progress",ae)),M.readyState!==M.DONE&&M.abort()}})))}}return(y=_).\u0275fac=function(C){return new(C||y)(Ft(FI))},y.\u0275prov=At({token:y,factory:y.\u0275fac}),_})();const I_=new Mt(""),SR=new Mt("",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),TR=new Mt("",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class ER{}let hW=(()=>{var y;class _{constructor(C,T,D){this.doc=C,this.platform=T,this.cookieName=D,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const C=this.doc.cookie||"";return C!==this.lastCookieString&&(this.parseCount++,this.lastToken=II(C,this.cookieName),this.lastCookieString=C),this.lastToken}}return(y=_).\u0275fac=function(C){return new(C||y)(Ft(go),Ft(bs),Ft(SR))},y.\u0275prov=At({token:y,factory:y.\u0275fac}),_})();function pW(y,_){const S=y.url.toLowerCase();if(!at(I_)||"GET"===y.method||"HEAD"===y.method||S.startsWith("http://")||S.startsWith("https://"))return _(y);const C=at(ER).getToken(),T=at(TR);return null!=C&&!y.headers.has(T)&&(y=y.clone({headers:y.headers.set(T,C)})),_(y)}var Vs=function(y){return y[y.Interceptors=0]="Interceptors",y[y.LegacyInterceptors=1]="LegacyInterceptors",y[y.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",y[y.NoXsrfProtection=3]="NoXsrfProtection",y[y.JsonpSupport=4]="JsonpSupport",y[y.RequestsMadeViaParent=5]="RequestsMadeViaParent",y[y.Fetch=6]="Fetch",y}(Vs||{});function Ia(y,_){return{\u0275kind:y,\u0275providers:_}}function gW(...y){const _=[T_,bR,CR,{provide:ep,useExisting:CR},{provide:tp,useExisting:bR},{provide:ed,useValue:pW,multi:!0},{provide:I_,useValue:!0},{provide:ER,useClass:hW}];for(const S of y)_.push(...S.\u0275providers);return function dl(y){return{\u0275providers:y}}(_)}const DR=new Mt("");let yW=(()=>{var y;class _{}return(y=_).\u0275fac=function(C){return new(C||y)},y.\u0275mod=Wo({type:y}),y.\u0275inj=Po({providers:[gW(Ia(Vs.LegacyInterceptors,[{provide:DR,useFactory:oW},{provide:ed,useExisting:DR,multi:!0}]))]}),_})(),kR=(()=>{var y;class _{constructor(C,T){this._renderer=C,this._elementRef=T,this.onChange=D=>{},this.onTouched=()=>{}}setProperty(C,T){this._renderer.setProperty(this._elementRef.nativeElement,C,T)}registerOnTouched(C){this.onTouched=C}registerOnChange(C){this.onChange=C}setDisabledState(C){this.setProperty("disabled",C)}}return(y=_).\u0275fac=function(C){return new(C||y)(lt(ns),lt(So))},y.\u0275dir=rn({type:y}),_})(),Ma=(()=>{var y;class _ extends kR{}return(y=_).\u0275fac=(()=>{let S;return function(T){return(S||(S=Nr(y)))(T||y)}})(),y.\u0275dir=rn({type:y,features:[Ln]}),_})();const Fi=new Mt(""),EW={provide:Fi,useExisting:qt(()=>ip),multi:!0},IW=new Mt("");let ip=(()=>{var y;class _ extends kR{constructor(C,T,D){super(C,T),this._compositionMode=D,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function DW(){const y=Ns()?Ns().getUserAgent():"";return/android (\d+)/.test(y.toLowerCase())}())}writeValue(C){this.setProperty("value",null==C?"":C)}_handleInput(C){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(C)}_compositionStart(){this._composing=!0}_compositionEnd(C){this._composing=!1,this._compositionMode&&this.onChange(C)}}return(y=_).\u0275fac=function(C){return new(C||y)(lt(ns),lt(So),lt(IW,8))},y.\u0275dir=rn({type:y,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(C,T){1&C&&ur("input",function(I){return T._handleInput(I.target.value)})("blur",function(){return T.onTouched()})("compositionstart",function(){return T._compositionStart()})("compositionend",function(I){return T._compositionEnd(I.target.value)})},features:[sr([EW]),Ln]}),_})();const zr=new Mt(""),Bs=new Mt("");function qR(y){return null!=y}function WR(y){return vu(y)?br(y):y}function GR(y){let _={};return y.forEach(S=>{_=null!=S?se(se({},_),S):_}),0===Object.keys(_).length?null:_}function KR(y,_){return _.map(S=>S(y))}function JR(y){return y.map(_=>function AW(y){return!y.validate}(_)?_:S=>_.validate(S))}function M_(y){return null!=y?function QR(y){if(!y)return null;const _=y.filter(qR);return 0==_.length?null:function(S){return GR(KR(S,_))}}(JR(y)):null}function A_(y){return null!=y?function XR(y){if(!y)return null;const _=y.filter(qR);return 0==_.length?null:function(S){return function SW(...y){const _=oA(y),{args:S,keys:C}=iA(y),T=new Kn(D=>{const{length:I}=S;if(!I)return void D.complete();const M=new Array(I);let A=I,R=I;for(let N=0;N<I;N++){let O=!1;Ri(S[N]).subscribe(Te(D,F=>{O||(O=!0,R--),M[N]=F},()=>A--,void 0,()=>{(!A||!O)&&(R||D.next(C?aA(C,M):M),D.complete())}))}});return _?T.pipe(sA(_)):T}(KR(S,_).map(WR)).pipe(k(GR))}}(JR(y)):null}function YR(y,_){return null===y?[_]:Array.isArray(y)?[...y,_]:[y,_]}function R_(y){return y?Array.isArray(y)?y:[y]:[]}function ap(y,_){return Array.isArray(y)?y.includes(_):y===_}function tP(y,_){const S=R_(_);return R_(y).forEach(T=>{ap(S,T)||S.push(T)}),S}function nP(y,_){return R_(_).filter(S=>!ap(y,S))}class rP{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(_){this._rawValidators=_||[],this._composedValidatorFn=M_(this._rawValidators)}_setAsyncValidators(_){this._rawAsyncValidators=_||[],this._composedAsyncValidatorFn=A_(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(_){this._onDestroyCallbacks.push(_)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(_=>_()),this._onDestroyCallbacks=[]}reset(_=void 0){this.control&&this.control.reset(_)}hasError(_,S){return!!this.control&&this.control.hasError(_,S)}getError(_,S){return this.control?this.control.getError(_,S):null}}class oo extends rP{get formDirective(){return null}get path(){return null}}class $s extends rP{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class oP{constructor(_){this._cd=_}get isTouched(){var _;return!(null===(_=this._cd)||void 0===_||null===(_=_.control)||void 0===_||!_.touched)}get isUntouched(){var _;return!(null===(_=this._cd)||void 0===_||null===(_=_.control)||void 0===_||!_.untouched)}get isPristine(){var _;return!(null===(_=this._cd)||void 0===_||null===(_=_.control)||void 0===_||!_.pristine)}get isDirty(){var _;return!(null===(_=this._cd)||void 0===_||null===(_=_.control)||void 0===_||!_.dirty)}get isValid(){var _;return!(null===(_=this._cd)||void 0===_||null===(_=_.control)||void 0===_||!_.valid)}get isInvalid(){var _;return!(null===(_=this._cd)||void 0===_||null===(_=_.control)||void 0===_||!_.invalid)}get isPending(){var _;return!(null===(_=this._cd)||void 0===_||null===(_=_.control)||void 0===_||!_.pending)}get isSubmitted(){var _;return!(null===(_=this._cd)||void 0===_||!_.submitted)}}let iP=(()=>{var y;class _ extends oP{constructor(C){super(C)}}return(y=_).\u0275fac=function(C){return new(C||y)(lt($s,2))},y.\u0275dir=rn({type:y,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(C,T){2&C&&$f("ng-untouched",T.isUntouched)("ng-touched",T.isTouched)("ng-pristine",T.isPristine)("ng-dirty",T.isDirty)("ng-valid",T.isValid)("ng-invalid",T.isInvalid)("ng-pending",T.isPending)},features:[Ln]}),_})();const td="VALID",lp="INVALID",nl="PENDING",nd="DISABLED";function up(y){return null!=y&&!Array.isArray(y)&&"object"==typeof y}class x_{constructor(_,S){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(_),this._assignAsyncValidators(S)}get validator(){return this._composedValidatorFn}set validator(_){this._rawValidators=this._composedValidatorFn=_}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(_){this._rawAsyncValidators=this._composedAsyncValidatorFn=_}get parent(){return this._parent}get valid(){return this.status===td}get invalid(){return this.status===lp}get pending(){return this.status==nl}get disabled(){return this.status===nd}get enabled(){return this.status!==nd}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(_){this._assignValidators(_)}setAsyncValidators(_){this._assignAsyncValidators(_)}addValidators(_){this.setValidators(tP(_,this._rawValidators))}addAsyncValidators(_){this.setAsyncValidators(tP(_,this._rawAsyncValidators))}removeValidators(_){this.setValidators(nP(_,this._rawValidators))}removeAsyncValidators(_){this.setAsyncValidators(nP(_,this._rawAsyncValidators))}hasValidator(_){return ap(this._rawValidators,_)}hasAsyncValidator(_){return ap(this._rawAsyncValidators,_)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(_={}){this.touched=!0,this._parent&&!_.onlySelf&&this._parent.markAsTouched(_)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(_=>_.markAllAsTouched())}markAsUntouched(_={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(S=>{S.markAsUntouched({onlySelf:!0})}),this._parent&&!_.onlySelf&&this._parent._updateTouched(_)}markAsDirty(_={}){this.pristine=!1,this._parent&&!_.onlySelf&&this._parent.markAsDirty(_)}markAsPristine(_={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(S=>{S.markAsPristine({onlySelf:!0})}),this._parent&&!_.onlySelf&&this._parent._updatePristine(_)}markAsPending(_={}){this.status=nl,!1!==_.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!_.onlySelf&&this._parent.markAsPending(_)}disable(_={}){const S=this._parentMarkedDirty(_.onlySelf);this.status=nd,this.errors=null,this._forEachChild(C=>{C.disable(se(se({},_),{},{onlySelf:!0}))}),this._updateValue(),!1!==_.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(se(se({},_),{},{skipPristineCheck:S})),this._onDisabledChange.forEach(C=>C(!0))}enable(_={}){const S=this._parentMarkedDirty(_.onlySelf);this.status=td,this._forEachChild(C=>{C.enable(se(se({},_),{},{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:_.emitEvent}),this._updateAncestors(se(se({},_),{},{skipPristineCheck:S})),this._onDisabledChange.forEach(C=>C(!1))}_updateAncestors(_){this._parent&&!_.onlySelf&&(this._parent.updateValueAndValidity(_),_.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(_){this._parent=_}getRawValue(){return this.value}updateValueAndValidity(_={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===td||this.status===nl)&&this._runAsyncValidator(_.emitEvent)),!1!==_.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!_.onlySelf&&this._parent.updateValueAndValidity(_)}_updateTreeValidity(_={emitEvent:!0}){this._forEachChild(S=>S._updateTreeValidity(_)),this.updateValueAndValidity({onlySelf:!0,emitEvent:_.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?nd:td}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(_){if(this.asyncValidator){this.status=nl,this._hasOwnPendingAsyncValidator=!0;const S=WR(this.asyncValidator(this));this._asyncValidationSubscription=S.subscribe(C=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(C,{emitEvent:_})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(_,S={}){this.errors=_,this._updateControlsErrors(!1!==S.emitEvent)}get(_){let S=_;return null==S||(Array.isArray(S)||(S=S.split(".")),0===S.length)?null:S.reduce((C,T)=>C&&C._find(T),this)}getError(_,S){const C=S?this.get(S):this;return C&&C.errors?C.errors[_]:null}hasError(_,S){return!!this.getError(_,S)}get root(){let _=this;for(;_._parent;)_=_._parent;return _}_updateControlsErrors(_){this.status=this._calculateStatus(),_&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(_)}_initObservables(){this.valueChanges=new Hn,this.statusChanges=new Hn}_calculateStatus(){return this._allControlsDisabled()?nd:this.errors?lp:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(nl)?nl:this._anyControlsHaveStatus(lp)?lp:td}_anyControlsHaveStatus(_){return this._anyControls(S=>S.status===_)}_anyControlsDirty(){return this._anyControls(_=>_.dirty)}_anyControlsTouched(){return this._anyControls(_=>_.touched)}_updatePristine(_={}){this.pristine=!this._anyControlsDirty(),this._parent&&!_.onlySelf&&this._parent._updatePristine(_)}_updateTouched(_={}){this.touched=this._anyControlsTouched(),this._parent&&!_.onlySelf&&this._parent._updateTouched(_)}_registerOnCollectionChange(_){this._onCollectionChange=_}_setUpdateStrategy(_){up(_)&&null!=_.updateOn&&(this._updateOn=_.updateOn)}_parentMarkedDirty(_){return!_&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(_){return null}_assignValidators(_){this._rawValidators=Array.isArray(_)?_.slice():_,this._composedValidatorFn=function kW(y){return Array.isArray(y)?M_(y):y||null}(this._rawValidators)}_assignAsyncValidators(_){this._rawAsyncValidators=Array.isArray(_)?_.slice():_,this._composedAsyncValidatorFn=function xW(y){return Array.isArray(y)?A_(y):y||null}(this._rawAsyncValidators)}}const Aa=new Mt("CallSetDisabledState",{providedIn:"root",factory:()=>rd}),rd="always";function od(y,_,S=rd){var C,T;(function L_(y,_){const S=function ZR(y){return y._rawValidators}(y);null!==_.validator?y.setValidators(YR(S,_.validator)):"function"==typeof S&&y.setValidators([S]);const C=function eP(y){return y._rawAsyncValidators}(y);null!==_.asyncValidator?y.setAsyncValidators(YR(C,_.asyncValidator)):"function"==typeof C&&y.setAsyncValidators([C]);const T=()=>y.updateValueAndValidity();hp(_._rawValidators,T),hp(_._rawAsyncValidators,T)})(y,_),_.valueAccessor.writeValue(y.value),(y.disabled||"always"===S)&&(null===(C=(T=_.valueAccessor).setDisabledState)||void 0===C||C.call(T,y.disabled)),function UW(y,_){_.valueAccessor.registerOnChange(S=>{y._pendingValue=S,y._pendingChange=!0,y._pendingDirty=!0,"change"===y.updateOn&&lP(y,_)})}(y,_),function jW(y,_){const S=(C,T)=>{_.valueAccessor.writeValue(C),T&&_.viewToModelUpdate(C)};y.registerOnChange(S),_._registerOnDestroy(()=>{y._unregisterOnChange(S)})}(y,_),function VW(y,_){_.valueAccessor.registerOnTouched(()=>{y._pendingTouched=!0,"blur"===y.updateOn&&y._pendingChange&&lP(y,_),"submit"!==y.updateOn&&y.markAsTouched()})}(y,_),function LW(y,_){if(_.valueAccessor.setDisabledState){const S=C=>{_.valueAccessor.setDisabledState(C)};y.registerOnDisabledChange(S),_._registerOnDestroy(()=>{y._unregisterOnDisabledChange(S)})}}(y,_)}function hp(y,_){y.forEach(S=>{S.registerOnValidatorChange&&S.registerOnValidatorChange(_)})}function lP(y,_){y._pendingDirty&&y.markAsDirty(),y.setValue(y._pendingValue,{emitModelToViewChange:!1}),_.viewToModelUpdate(y._pendingValue),y._pendingChange=!1}function fP(y,_){const S=y.indexOf(_);S>-1&&y.splice(S,1)}function hP(y){return"object"==typeof y&&null!==y&&2===Object.keys(y).length&&"value"in y&&"disabled"in y}Promise.resolve();const pP=class extends x_{constructor(_=null,S,C){super(function O_(y){return(up(y)?y.validators:y)||null}(S),function k_(y,_){return(up(_)?_.asyncValidators:y)||null}(C,S)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(_),this._setUpdateStrategy(S),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),up(S)&&(S.nonNullable||S.initialValueIsDefault)&&(this.defaultValue=hP(_)?_.value:_)}setValue(_,S={}){this.value=this._pendingValue=_,this._onChange.length&&!1!==S.emitModelToViewChange&&this._onChange.forEach(C=>C(this.value,!1!==S.emitViewToModelChange)),this.updateValueAndValidity(S)}patchValue(_,S={}){this.setValue(_,S)}reset(_=this.defaultValue,S={}){this._applyFormState(_),this.markAsPristine(S),this.markAsUntouched(S),this.setValue(this.value,S),this._pendingChange=!1}_updateValue(){}_anyControls(_){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(_){this._onChange.push(_)}_unregisterOnChange(_){fP(this._onChange,_)}registerOnDisabledChange(_){this._onDisabledChange.push(_)}_unregisterOnDisabledChange(_){fP(this._onDisabledChange,_)}_forEachChild(_){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(_){hP(_)?(this.value=this._pendingValue=_.value,_.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=_}},KW={provide:$s,useExisting:qt(()=>$_)},yP=Promise.resolve();let $_=(()=>{var y;class _ extends $s{constructor(C,T,D,I,M,A){super(),this._changeDetectorRef=M,this.callSetDisabledState=A,this.control=new pP,this._registered=!1,this.name="",this.update=new Hn,this._parent=C,this._setValidators(T),this._setAsyncValidators(D),this.valueAccessor=function j_(y,_){if(!_)return null;let S,C,T;return Array.isArray(_),_.forEach(D=>{D.constructor===ip?S=D:function HW(y){return Object.getPrototypeOf(y.constructor)===Ma}(D)?C=D:T=D}),T||C||S||null}(0,I)}ngOnChanges(C){if(this._checkForErrors(),!this._registered||"name"in C){if(this._registered&&(this._checkName(),this.formDirective)){const T=C.name.previousValue;this.formDirective.removeControl({name:T,path:this._getPath(T)})}this._setUpControl()}"isDisabled"in C&&this._updateDisabled(C),function V_(y,_){if(!y.hasOwnProperty("model"))return!1;const S=y.model;return!!S.isFirstChange()||!Object.is(_,S.currentValue)}(C,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(C){this.viewModel=C,this.update.emit(C)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){od(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(C){yP.then(()=>{var T;this.control.setValue(C,{emitViewToModelChange:!1}),null===(T=this._changeDetectorRef)||void 0===T||T.markForCheck()})}_updateDisabled(C){const T=C.isDisabled.currentValue,D=0!==T&&function xc(y){return"boolean"==typeof y?y:null!=y&&"false"!==y}(T);yP.then(()=>{var I;D&&!this.control.disabled?this.control.disable():!D&&this.control.disabled&&this.control.enable(),null===(I=this._changeDetectorRef)||void 0===I||I.markForCheck()})}_getPath(C){return this._parent?function dp(y,_){return[..._.path,y]}(C,this._parent):[C]}}return(y=_).\u0275fac=function(C){return new(C||y)(lt(oo,9),lt(zr,10),lt(Bs,10),lt(Fi,10),lt(_u,8),lt(Aa,8))},y.\u0275dir=rn({type:y,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[tr.None,"disabled","isDisabled"],model:[tr.None,"ngModel","model"],options:[tr.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[sr([KW]),Ln,uo]}),_})();const H_=new Mt("");let xP=(()=>{var y;class _{}return(y=_).\u0275fac=function(C){return new(C||y)},y.\u0275mod=Wo({type:y}),y.\u0275inj=Po({}),_})(),CG=(()=>{var y;class _{static withConfig(C){var T;return{ngModule:_,providers:[{provide:Aa,useValue:null!==(T=C.callSetDisabledState)&&void 0!==T?T:rd}]}}}return(y=_).\u0275fac=function(C){return new(C||y)},y.\u0275mod=Wo({type:y}),y.\u0275inj=Po({imports:[xP]}),_})(),wG=(()=>{var y;class _{static withConfig(C){var T,D;return{ngModule:_,providers:[{provide:H_,useValue:null!==(T=C.warnOnNgModelWithFormControl)&&void 0!==T?T:"always"},{provide:Aa,useValue:null!==(D=C.callSetDisabledState)&&void 0!==D?D:rd}]}}}return(y=_).\u0275fac=function(C){return new(C||y)},y.\u0275mod=Wo({type:y}),y.\u0275inj=Po({imports:[xP]}),_})();function sd(y,_){var S={};for(var C in y)Object.prototype.hasOwnProperty.call(y,C)&&_.indexOf(C)<0&&(S[C]=y[C]);if(null!=y&&"function"==typeof Object.getOwnPropertySymbols){var T=0;for(C=Object.getOwnPropertySymbols(y);T<C.length;T++)_.indexOf(C[T])<0&&Object.prototype.propertyIsEnumerable.call(y,C[T])&&(S[C[T]]=y[C[T]])}return S}function Pa(y,_,S,C){return new(S||(S=Promise))(function(T,D){function I(R){try{A(C.next(R))}catch(N){D(N)}}function M(R){try{A(C.throw(R))}catch(N){D(N)}}function A(R){var N;R.done?T(R.value):(N=R.value,N instanceof S?N:new S(function(O){O(N)})).then(I,M)}A((C=C.apply(y,_||[])).next())})}"function"==typeof SuppressedError&&SuppressedError;const LP="2.0.1",gp=["teams.microsoft.com","teams.microsoft.us","gov.teams.microsoft.us","dod.teams.microsoft.us","int.teams.microsoft.com","outlook.office.com","outlook-sdf.office.com","outlook.office365.com","outlook-sdf.office365.com","outlook.office365.us","outlook-dod.office365.us","webmail.apps.mil","outlook.live.com","outlook-sdf.live.com","teams.live.com","local.teams.live.com","local.teams.live.com:8080","local.teams.office.com","local.teams.office.com:8080","devspaces.skype.com","*.www.office.com","www.office.com","word.office.com","excel.office.com","powerpoint.office.com","www.officeppe.com","*.www.microsoft365.com","www.microsoft365.com","bing.com","edgeservices.bing.com","work.bing.com","www.bing.com","www.staging-bing-int.com","*.cloud.microsoft","*.m365.cloud.microsoft","*.outlook.cloud.microsoft","chatuxmanager.svc.cloud.microsoft","copilot.microsoft.com","windows.msn.com","fa000000125.resources.office.net","fa000000129.resources.office.net","fa000000124.resources.office.net","fa000000128.resources.office.net","fa000000136.resources.office.net","fa000000125.officeapps.live.com","fa000000129.officeapps.live.com","fa000000124.officeapps.live.com","fa000000128.officeapps.live.com"],UP=1500,bG=new URL("https://res.cdn.office.net/teams-js/validDomains/json/validDomains.json"),SG=/^https:\/\//,mp="The library has not yet been initialized",TG="The runtime has not yet been initialized",EG="The runtime version is not supported";var VP,jP,BP,Q_,$P,HP,zP,X_,qP,WP,y;(y=VP||(VP={})).Inline="inline",y.Desktop="desktop",y.Web="web",function(y){y.M365Content="m365content"}(jP||(jP={})),function(y){y.DriveId="driveId",y.GroupId="groupId",y.SiteId="siteId",y.UserId="userId"}(BP||(BP={})),function(y){y[y.NOT_SUPPORTED_ON_PLATFORM=100]="NOT_SUPPORTED_ON_PLATFORM",y[y.INTERNAL_ERROR=500]="INTERNAL_ERROR",y[y.NOT_SUPPORTED_IN_CURRENT_CONTEXT=501]="NOT_SUPPORTED_IN_CURRENT_CONTEXT",y[y.PERMISSION_DENIED=1e3]="PERMISSION_DENIED",y[y.NETWORK_ERROR=2e3]="NETWORK_ERROR",y[y.NO_HW_SUPPORT=3e3]="NO_HW_SUPPORT",y[y.INVALID_ARGUMENTS=4e3]="INVALID_ARGUMENTS",y[y.UNAUTHORIZED_USER_OPERATION=5e3]="UNAUTHORIZED_USER_OPERATION",y[y.INSUFFICIENT_RESOURCES=6e3]="INSUFFICIENT_RESOURCES",y[y.THROTTLE=7e3]="THROTTLE",y[y.USER_ABORT=8e3]="USER_ABORT",y[y.OPERATION_TIMED_OUT=8001]="OPERATION_TIMED_OUT",y[y.OLD_PLATFORM=9e3]="OLD_PLATFORM",y[y.FILE_NOT_FOUND=404]="FILE_NOT_FOUND",y[y.SIZE_EXCEEDED=1e4]="SIZE_EXCEEDED"}(Q_||(Q_={})),function(y){y.GeoLocation="geolocation",y.Media="media"}($P||($P={})),function(y){y.BCAIS="bcais",y.BCWAF="bcwaf",y.BCWBF="bcwbf"}(HP||(HP={})),function(y){y.Faculty="faculty",y.Student="student",y.Other="other"}(zP||(zP={})),function(y){y.Adult="adult",y.MinorNoParentalConsentRequired="minorNoParentalConsentRequired",y.MinorWithoutParentalConsent="minorWithoutParentalConsent",y.MinorWithParentalConsent="minorWithParentalConsent",y.NotAdult="notAdult",y.NonAdult="notAdult"}(X_||(X_={})),function(y){y.HigherEducation="higherEducation",y.K12="k12",y.Other="other"}(qP||(qP={})),function(y){y.TextPlain="text/plain",y.TextHtml="text/html",y.ImagePNG="image/png",y.ImageJPEG="image/jpeg"}(WP||(WP={}));var GP={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};let yp;const DG=new Uint8Array(16);function IG(){if(!yp&&(yp=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!yp))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return yp(DG)}const kr=[];for(let y=0;y<256;++y)kr.push((y+256).toString(16).slice(1));function AG(y,_,S){if(GP.randomUUID&&!_&&!y)return GP.randomUUID();const C=(y=y||{}).random||(y.rng||IG)();return C[6]=15&C[6]|64,C[8]=63&C[8]|128,function MG(y,_=0){return kr[y[_+0]]+kr[y[_+1]]+kr[y[_+2]]+kr[y[_+3]]+"-"+kr[y[_+4]]+kr[y[_+5]]+"-"+kr[y[_+6]]+kr[y[_+7]]+"-"+kr[y[_+8]]+kr[y[_+9]]+"-"+kr[y[_+10]]+kr[y[_+11]]+kr[y[_+12]]+kr[y[_+13]]+kr[y[_+14]]+kr[y[_+15]]}(C)}var RG=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Y_(y,_){if("string"!=typeof y||"string"!=typeof _)return NaN;const S=y.split("."),C=_.split(".");function T(D){return/^\d+$/.test(D)}if(!S.every(T)||!C.every(T))return NaN;for(;S.length<C.length;)S.push("0");for(;C.length<S.length;)C.push("0");for(let D=0;D<S.length;++D)if(Number(S[D])!=Number(C[D]))return Number(S[D])>Number(C[D])?1:-1;return 0}function KP(y){return Object.keys(y).forEach(_=>{null!=y[_]&&"object"==typeof y[_]&&KP(y[_])}),Object.freeze(y)}function JP(y){return"https:"===y.protocol}function vp(){return typeof window>"u"}function Z_(y){return new RegExp("".concat(/<script[^>]*>|&lt;script[^&]*&gt;|%3Cscript[^%]*%3E/gi.source,"|").concat(/<\/script[^>]*>|&lt;\/script[^&]*&gt;|%3C\/script[^%]*%3E/gi.source),"gi").test(y)}const UG=!!performance&&"now"in performance;function e0(){return UG?performance.now()+performance.timeOrigin:void 0}function XP(y){var _,S;if(null===(S=null===(_=y.hostVersionsInfo)||void 0===_?void 0:_.appEligibilityInformation)||void 0===S||!S.ageGroup)return y;const C=y.hostVersionsInfo.appEligibilityInformation.ageGroup;return"nonadult"!==(null==C?void 0:C.toLowerCase())?y:Object.assign(Object.assign({},y),{hostVersionsInfo:Object.assign(Object.assign({},y.hostVersionsInfo),{appEligibilityInformation:Object.assign(Object.assign({},y.hostVersionsInfo.appEligibilityInformation),{ageGroup:X_.NotAdult})})})}class Na{constructor(_=function NG(){return AG()}()){this.uuid=_,function LG(y){if(!y)throw new Error("id must not be empty");if(!1===function PG(y){return"string"==typeof y&&RG.test(y)}(y))throw new Error("id must be a valid UUID")}(_)}toString(){return this.uuid}serialize(){return this.toString()}}class mn{}mn.initializeCalled=!1,mn.initializeCompleted=!1,mn.additionalValidOrigins=[],mn.initializePromise=void 0,mn.isFramelessWindow=!1,mn.frameContext=void 0,mn.hostClientType=void 0,mn.printCapabilityEnabled=!1,mn.teamsJsInstanceId=(new Na).toString();var YP,ZP,t0={exports:{}};!function(y,_){_.formatArgs=function(C){if(C[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+C[0]+(this.useColors?"%c ":" ")+"+"+y.exports.humanize(this.diff),!this.useColors)return;const T="color: "+this.color;C.splice(1,0,T,"color: inherit");let D=0,I=0;C[0].replace(/%[a-zA-Z%]/g,M=>{"%%"!==M&&(D++,"%c"===M&&(I=D))}),C.splice(I,0,T)},_.save=function(C){try{C?_.storage.setItem("debug",C):_.storage.removeItem("debug")}catch(T){}},_.load=function(){let C;try{C=_.storage.getItem("debug")}catch(T){}return!C&&typeof process<"u"&&"env"in process&&(C=process.env.DEBUG),C},_.useColors=function(){return!(!(typeof window<"u"&&window.process)||"renderer"!==window.process.type&&!window.process.__nwjs)||!(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&(typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},_.storage=function(){try{return localStorage}catch(C){}}(),_.destroy=(()=>{let C=!1;return()=>{C||(C=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),_.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],_.log=console.debug||console.log||(()=>{}),y.exports=function(y){function _(T){let D,I,M,A=null;function R(...N){if(!R.enabled)return;const O=R,F=Number(new Date);O.diff=F-(D||F),O.prev=D,O.curr=F,D=F,N[0]=_.coerce(N[0]),"string"!=typeof N[0]&&N.unshift("%O");let Q=0;N[0]=N[0].replace(/%([a-zA-Z%])/g,(ae,Ce)=>{if("%%"===ae)return"%";Q++;const Ee=_.formatters[Ce];return"function"==typeof Ee&&(ae=Ee.call(O,N[Q]),N.splice(Q,1),Q--),ae}),_.formatArgs.call(O,N),(O.log||_.log).apply(O,N)}return R.namespace=T,R.useColors=_.useColors(),R.color=_.selectColor(T),R.extend=S,R.destroy=_.destroy,Object.defineProperty(R,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==A?A:(I!==_.namespaces&&(I=_.namespaces,M=_.enabled(T)),M),set:N=>{A=N}}),"function"==typeof _.init&&_.init(R),R}function S(T,D){const I=_(this.namespace+(void 0===D?":":D)+T);return I.log=this.log,I}function C(T){return T.toString().substring(2,T.toString().length-2).replace(/\.\*\?$/,"*")}return _.debug=_,_.default=_,_.coerce=function(T){return T instanceof Error?T.stack||T.message:T},_.disable=function(){const T=[..._.names.map(C),..._.skips.map(C).map(D=>"-"+D)].join(",");return _.enable(""),T},_.enable=function(T){let D;_.save(T),_.namespaces=T,_.names=[],_.skips=[];const I=("string"==typeof T?T:"").split(/[\s,]+/),M=I.length;for(D=0;D<M;D++)I[D]&&("-"===(T=I[D].replace(/\*/g,".*?"))[0]?_.skips.push(new RegExp("^"+T.slice(1)+"$")):_.names.push(new RegExp("^"+T+"$")))},_.enabled=function(T){if("*"===T[T.length-1])return!0;let D,I;for(D=0,I=_.skips.length;D<I;D++)if(_.skips[D].test(T))return!1;for(D=0,I=_.names.length;D<I;D++)if(_.names[D].test(T))return!0;return!1},_.humanize=function VG(){if(ZP)return YP;ZP=1;var y=1e3,_=60*y,S=60*_,C=24*S;function I(M,A,R,N){var O=A>=1.5*R;return Math.round(M/R)+" "+N+(O?"s":"")}return YP=function(M,A){A=A||{};var N,O,R=typeof M;if("string"===R&&M.length>0)return function(N){if(!((N=String(N)).length>100)){var O=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(N);if(O){var F=parseFloat(O[1]);switch((O[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*F;case"weeks":case"week":case"w":return 6048e5*F;case"days":case"day":case"d":return F*C;case"hours":case"hour":case"hrs":case"hr":case"h":return F*S;case"minutes":case"minute":case"mins":case"min":case"m":return F*_;case"seconds":case"second":case"secs":case"sec":case"s":return F*y;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return F;default:return}}}}(M);if("number"===R&&isFinite(M))return A.long?(N=M,(O=Math.abs(N))>=C?I(N,O,C,"day"):O>=S?I(N,O,S,"hour"):O>=_?I(N,O,_,"minute"):O>=y?I(N,O,y,"second"):N+" ms"):function(N){var O=Math.abs(N);return O>=C?Math.round(N/C)+"d":O>=S?Math.round(N/S)+"h":O>=_?Math.round(N/_)+"m":O>=y?Math.round(N/y)+"s":N+"ms"}(M);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(M))}}(),_.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(y).forEach(T=>{_[T]=y[T]}),_.names=[],_.skips=[],_.formatters={},_.selectColor=function(T){let D=0;for(let I=0;I<T.length;I++)D=(D<<5)-D+T.charCodeAt(I),D|=0;return _.colors[Math.abs(D)%_.colors.length]},_.enable(_.load()),_}(_);const{formatters:S}=y.exports;S.j=function(C){try{return JSON.stringify(C)}catch(T){return"[UnexpectedJSONParseError]: "+T.message}}}(t0,t0.exports);var n0=t0.exports;const BG=new Na,$G=n0.debug.formatArgs;n0.debug.formatArgs=function(y){y[0]="(".concat((new Date).toISOString(),"): ").concat(y[0]," [").concat(BG.toString(),"]"),$G.call(this,y)};const HG=n0.debug("teamsJs");function Li(y){return HG.extend(y)}function ar(y,_){return"".concat(y,"_").concat(_)}function eN(y){return/^v\d+_[\w.]+$/.test(y)}var Mn,r0,jo,tN,nN,rN,oN,iN;(function(y){y.desktop="desktop",y.web="web",y.android="android",y.ios="ios",y.ipados="ipados",y.macos="macos",y.visionOS="visionOS",y.rigel="rigel",y.surfaceHub="surfaceHub",y.teamsRoomsWindows="teamsRoomsWindows",y.teamsRoomsAndroid="teamsRoomsAndroid",y.teamsPhones="teamsPhones",y.teamsDisplays="teamsDisplays"})(Mn||(Mn={})),function(y){y.office="Office",y.outlook="Outlook",y.outlookWin32="OutlookWin32",y.orange="Orange",y.places="Places",y.teams="Teams",y.teamsModern="TeamsModern"}(r0||(r0={})),function(y){y.settings="settings",y.content="content",y.authentication="authentication",y.remove="remove",y.task="task",y.sidePanel="sidePanel",y.stage="stage",y.meetingStage="meetingStage"}(jo||(jo={})),function(y){y.copilotSidePanel="copilotSidePanel",y.copilotMainPane="copilotMainPane",y.copilotFullScreen="copilotFullScreen"}(tN||(tN={})),function(y){y[y.Standard=0]="Standard",y[y.Edu=1]="Edu",y[y.Class=2]="Class",y[y.Plc=3]="Plc",y[y.Staff=4]="Staff"}(nN||(nN={})),function(y){y[y.Admin=0]="Admin",y[y.User=1]="User",y[y.Guest=2]="Guest"}(rN||(rN={})),function(y){y.Large="large",y.Medium="medium",y.Small="small"}(oN||(oN={})),function(y){y.Regular="Regular",y.Private="Private",y.Shared="Shared"}(iN||(iN={}));const zG={errorCode:Q_.NOT_SUPPORTED_ON_PLATFORM},sN={adaptiveCardSchemaVersion:{majorVersion:1,minorVersion:5}},aN=(new Error("Invalid input count: Must supply a valid image count (limit of 10)."),new Error("Invalid response: Received more images than the specified max limit in the response."),Li("runtime")),_p=4;function cN(y){return y.apiVersion===_p}let ii={apiVersion:-1,supports:{}};const WG={apiVersion:4,isNAAChannelRecommended:!1,isDeeplyNestedAuthSupported:!1,hostVersionsInfo:sN,isLegacyTeams:!0,supports:{appInstallDialog:{},appEntity:{},call:{},chat:{},conversations:{},dialog:{card:{bot:{}},url:{bot:{},parentCommunication:{}},update:{}},interactive:{},logs:{},meetingRoom:{},menus:{},monetization:{},notifications:{},pages:{config:{},backStack:{},fullTrust:{}},remoteCamera:{},teams:{fullTrust:{}},teamsCore:{},video:{sharedFrame:{}}}},lN=[Mn.desktop,Mn.web,Mn.rigel,Mn.surfaceHub,Mn.teamsRoomsWindows,Mn.teamsRoomsAndroid,Mn.teamsPhones,Mn.teamsDisplays],GG=[Mn.android,Mn.ios,Mn.ipados,Mn.visionOS],uN=[...lN,...GG],JG=[{versionToUpgradeFrom:1,upgradeToNextVersion:y=>{var _;return{apiVersion:2,hostVersionsInfo:void 0,isLegacyTeams:y.isLegacyTeams,supports:Object.assign(Object.assign({},y.supports),{dialog:y.supports.dialog?{card:void 0,url:y.supports.dialog,update:null===(_=y.supports.dialog)||void 0===_?void 0:_.update}:void 0})}}},{versionToUpgradeFrom:2,upgradeToNextVersion:y=>{const S=sd(y.supports,["appNotification"]);return Object.assign(Object.assign({},y),{apiVersion:3,supports:S})}},{versionToUpgradeFrom:3,upgradeToNextVersion:y=>{var _,S,C,T,D;return{apiVersion:4,hostVersionsInfo:y.hostVersionsInfo,isNAAChannelRecommended:y.isNAAChannelRecommended,isLegacyTeams:y.isLegacyTeams,supports:Object.assign(Object.assign({},y.supports),{dialog:y.supports.dialog?{card:null===(_=y.supports.dialog)||void 0===_?void 0:_.card,url:{bot:null===(C=null===(S=y.supports.dialog)||void 0===S?void 0:S.url)||void 0===C?void 0:C.bot,parentCommunication:null!==(T=y.supports.dialog)&&void 0!==T&&T.url?{}:void 0},update:null===(D=y.supports.dialog)||void 0===D?void 0:D.update}:void 0})}}}],QG={"1.0.0":[{capability:{pages:{appButton:{},tabs:{}},stageView:{}},hostClientTypes:lN}],"1.9.0":[{capability:{location:{}},hostClientTypes:uN}],"2.0.0":[{capability:{people:{}},hostClientTypes:uN},{capability:{sharing:{}},hostClientTypes:[Mn.desktop,Mn.web]}],"2.0.1":[{capability:{teams:{fullTrust:{joinedTeams:{}}}},hostClientTypes:[Mn.android,Mn.desktop,Mn.ios,Mn.teamsRoomsAndroid,Mn.teamsPhones,Mn.teamsDisplays,Mn.web]},{capability:{webStorage:{}},hostClientTypes:[Mn.desktop]}],"2.0.5":[{capability:{webStorage:{}},hostClientTypes:[Mn.android,Mn.ios]}],"2.0.8":[{capability:{sharing:{}},hostClientTypes:[Mn.android,Mn.ios]}],"2.1.1":[{capability:{nestedAppAuth:{}},hostClientTypes:[Mn.android,Mn.ios,Mn.ipados,Mn.visionOS]}],"2.1.2":[]},o0=aN.extend("generateBackCompatRuntimeConfig");function dN(y,_){const S=Object.assign({},y);for(const C in _)Object.prototype.hasOwnProperty.call(_,C)&&("object"!=typeof _[C]||Array.isArray(_[C])?C in y||(S[C]=_[C]):S[C]=dN(y[C]||{},_[C]));return S}function XG(y,_,S){o0("generating back compat runtime config for %s",y);let C=Object.assign({},_.supports);o0("Supported capabilities in config before updating based on highestSupportedVersion: %o",C),Object.keys(S).forEach(D=>{Y_(y,D)>=0&&S[D].forEach(I=>{void 0!==mn.hostClientType&&I.hostClientTypes.includes(mn.hostClientType)&&(C=dN(C,I.capability))})});const T={apiVersion:_p,hostVersionsInfo:sN,isLegacyTeams:!0,supports:C};return o0("Runtime config after updating based on highestSupportedVersion: %o",T),T}const s0=aN.extend("applyRuntimeConfig");function a0(y){"string"==typeof y.apiVersion&&(s0("Trying to apply runtime with string apiVersion, processing as v1: %o",y),y=Object.assign(Object.assign({},y),{apiVersion:1})),s0("Fast-forwarding runtime %o",y);const _=function KG(y){let _=y;if(_.apiVersion<_p&&JG.forEach(S=>{_.apiVersion===S.versionToUpgradeFrom&&(_=S.upgradeToNextVersion(_))}),cN(_))return _;throw new Error("Received a runtime that could not be upgraded to the latest version")}(y);s0("Applying runtime %o",_),ii=KP(_)}const fN="2.43.0",hN={childProxyingCommunication:!1};function pN(){return hN.childProxyingCommunication}let c0={disableEnforceOriginMatchForChildResponses:!1};const mN=y=>{const{uuid:_}=y,S=sd(y,["uuid"]),C=null==_?void 0:_.toString();return Object.assign(Object.assign({},S),{uuidAsString:C})},ZG=y=>{const{uuidAsString:_}=y,S=sd(y,["uuidAsString"]);return Object.assign(Object.assign({},S),{uuid:_?new Na(_):void 0})},e9=y=>{const{uuidAsString:_}=y,S=sd(y,["uuidAsString"]);return Object.assign(Object.assign({},S),{uuid:_?new Na(_):void 0})},t9=y=>{const{uuid:_}=y,S=sd(y,["uuid"]),C=null==_?void 0:_.toString();return Object.assign(Object.assign({},S),{uuidAsString:C})};function Bo(y){return void 0!==y.uuidAsString?"".concat(y.uuidAsString," (legacy id: ").concat(y.id,")"):void 0!==y.uuid?"".concat(y.uuid.toString()," (legacy id: ").concat(y.id,")"):"legacy id: ".concat(y.id," (no uuid)")}const n9=Li("flushMessageQueue");function l0(y,_,S,C){if(y&&_&&0!==S.length)for(;S.length>0;){const T=S.shift();if(T){const D=mN(T);n9("Flushing message %s from %s message queue via postMessage.",Bo(D),C),y.postMessage(D,_)}}}const yN=Li("internal"),r9=yN.extend("ensureInitializeCalled"),o9=yN.extend("ensureInitialized");function Hs(y,..._){if(!mn.initializeCompleted)throw o9("%s. initializeCalled: %s",mp,mn.initializeCalled.toString()),new Error(mp);if(_&&_.length>0){let S=!1;for(let C=0;C<_.length;C++)if(_[C]===mn.frameContext){S=!0;break}if(!S)throw new Error("This call is only allowed in following contexts: ".concat(JSON.stringify(_),'. Current context: "').concat(mn.frameContext,'".'))}return function qG(y){if(cN(y))return!0;throw-1===y.apiVersion?new Error(TG):new Error(EG)}(y)}function l9(){return function d9(y){return new Promise(_=>{if(Hs(ii),!function vN(){return!(!Hs(ii)||!ii.supports.pages||!ii.supports.pages.backStack)}())throw zG;_(function P9(y,_,S,...C){return Gs(y,_,C).then(([T,D])=>{if(!T)throw new Error(D||S)})}(y,"navigateBack","Back navigation is not supported in the current client or context."))})}(ar(Oa,"pages.backStack.navigateBack"))}const Oa="v2";function h9(){fs()?hs("backButtonPress",[]):l9()}const p9=Li("handlers");class un{static initializeHandlers(){un.handlers.themeChange=y9,un.handlers.load=v9,un.handlers.beforeUnload=_9,function f9(){zs(ar("v2","pages.backStack.registerBackButtonPressHandler"),"backButtonPress",h9,!1)}()}static uninitializeHandlers(){un.handlers={},un.themeChangeHandler=null,un.loadHandler=null,un.beforeUnloadHandler=null,un.beforeSuspendOrTerminateHandler=null,un.resumeHandler=null}}un.handlers={},un.themeChangeHandler=null,un.loadHandler=null,un.beforeUnloadHandler=null,un.beforeSuspendOrTerminateHandler=null,un.resumeHandler=null,un.hostToAppPerformanceMetricsHandler=null;const _N=p9.extend("callHandler");function CN(y,_){const S=un.handlers[y];return S?(_N("Invoking the registered handler for message %s with arguments %o",y,_),[!0,S.apply(this,_)]):fs()?(hs(y,_),[!1,void 0]):(_N("Handler for action message %s not found.",y),[!1,void 0])}function zs(y,_,S,C=!0,T=[]){S?(un.handlers[_]=S,C&&si(y,"registerHandler",[_,...T])):delete un.handlers[_]}function y9(y){un.themeChangeHandler&&un.themeChangeHandler(y),fs()&&hs("themeChange",[y])}function wN(y){un.hostToAppPerformanceMetricsHandler&&un.hostToAppPerformanceMetricsHandler(y)}function v9(y){const _={entityId:(S=y).entityId,contentUrl:new URL(S.contentUrl)};var S;un.resumeHandler?(un.resumeHandler(_),fs()&&hs("load",[_])):un.loadHandler&&(un.loadHandler(y),fs()&&hs("load",[y]))}function _9(){return Pa(this,void 0,void 0,function*(){const y=()=>{si(ar("v2","handleBeforeUnload"),"readyToUnload",[])};un.beforeSuspendOrTerminateHandler?(yield un.beforeSuspendOrTerminateHandler(),fs()?hs("beforeUnload"):y()):un.beforeUnloadHandler&&un.beforeUnloadHandler(y)||(fs()?hs("beforeUnload"):y())})}const C9=Li("childProxyingCommunication");class Wn{}function fs(){return!!pN()&&!!Wn.window}Wn.messageQueue=[];const ad=C9.extend("handleIncomingMessageFromChild");function bN(y,_,S,C){const T=Wn.window,I=t9(function(A,R,N,O){return{id:A,uuid:R,args:N||[],isPartialResponse:O}}(y,_,S,C)),M=Wn.origin;T&&M&&(ad("Sending message %s to %s via postMessage, args = %o",Bo(I),"child",I.args),T.postMessage(I,M))}function hs(y,_){const S=Wn.window,C=function(D,I){return{func:D,args:I||[]}}(y,_),T=Wn.origin;S&&T?S.postMessage(C,T):Wn.messageQueue.push(C)}class Ui{static storeCallbackInformation(_,S){Ui.callbackInformation.set(_,S)}static clearMessages(){Ui.callbackInformation.clear()}static deleteMessageInformation(_){Ui.callbackInformation.delete(_)}static handleOneWayPerformanceMetrics(_,S,C){const T=_.monotonicTimestamp;T&&C?wN({actionName:_.func,messageDelay:C-T,requestStartedAt:T}):S("Unable to send performance metrics for event %s",_.func)}static handlePerformanceMetrics(_,S,C,T){const D=Ui.callbackInformation.get(_);D&&S.monotonicTimestamp&&T?(wN({actionName:D.name,messageDelay:T-S.monotonicTimestamp,requestStartedAt:D.calledAt}),Ui.deleteMessageInformation(_)):C("Unable to send performance metrics for callback %s with arguments %o",_.toString(),S.args)}}Ui.callbackInformation=new Map;const SN=Li("nestedAppAuthUtils"),S9=SN.extend("tryPolyfillWithNestedAppAuthBridge"),T9="v2",D9=SN.extend("createNestedAppAuthBridge");let qs=[];const Ws=Li("validateOrigin");let cd;function TN(){return 0===qs.length}function EN(y=!1){return Pa(this,void 0,void 0,function*(){if(!TN()&&!y)return qs;if(cd)return cd;if(vp())return qs=gp,gp;{Ws("Initiating fetch call to acquire valid origins list from CDN");const _=new AbortController,S=setTimeout(()=>_.abort(),UP);return cd=fetch(bG,{signal:_.signal}).then(C=>{if(clearTimeout(S),!C.ok)throw new Error("Invalid Response from Fetch Call");return Ws("Fetch call completed and retrieved valid origins list from CDN"),C.json().then(T=>{if(function(D){let I=JSON.parse(D);try{I=JSON.parse(D)}catch(M){return!1}if(!I.validOrigins)return!1;for(const M of I.validOrigins)try{new URL("https://"+M)}catch(A){return Ws("isValidOriginsFromCDN call failed to validate origin: %s",M),!1}return!0}(JSON.stringify(T)))return qs=T.validOrigins,qs;throw new Error("Valid origins list retrieved from CDN is invalid")})}).catch(C=>("AbortError"===C.name?Ws("validOrigins fetch call to CDN failed due to Timeout of ".concat(UP," ms. Defaulting to fallback list")):Ws("validOrigins fetch call to CDN failed with error: %s. Defaulting to fallback list",C),qs=gp,qs)),cd}})}function DN(y,_){if("*."===y.substring(0,2)){const S=y.substring(1);if(_.length>S.length&&_.split(".").length===S.split(".").length&&_.substring(_.length-S.length)===S)return!0}else if(y===_)return!0;return!1}function IN(y,_){if(!JP(y))return Ws("Origin %s is invalid because it is not using https protocol. Protocol being used: %s",y,y.protocol),!1;const S=y.host;if(_.some(C=>DN(C,S)))return!0;for(const C of mn.additionalValidOrigins)if(DN("https://"===C.substring(0,8)?C.substring(8):C,S))return!0;return Ws("Origin %s is invalid because it is not an origin approved by this library or included in the call to app.initialize.\nOrigins approved by this library: %o\nOrigins included in app.initialize: %o",y,_,mn.additionalValidOrigins),!1}!function I9(){Pa(this,void 0,void 0,function*(){cd||(yield EN())})}();const ka=Li("communication");class Nt{}class hn{}function A9(y,_){if(hn.messageListener=S=>function(C){return Pa(this,void 0,void 0,function*(){if(!C||!C.data||"object"!=typeof C.data)return void RN("Unrecognized message format received by app, message being ignored. Message: %o",C);const T=C.source||C.originalEvent&&C.originalEvent.source,D=C.origin||C.originalEvent&&C.originalEvent.origin;return PN(T,D).then(I=>{var M,A;I?(M=T,A=D,mn.isFramelessWindow||Nt.parentWindow&&!Nt.parentWindow.closed&&M!==Nt.parentWindow||(Nt.parentWindow=M,Nt.parentOrigin=A),Nt.parentWindow&&Nt.parentWindow.closed&&(Nt.parentWindow=null,Nt.parentOrigin=null),l0(Nt.parentWindow,Nt.parentOrigin,hn.parentMessageQueue,"parent"),T!==Nt.parentWindow?function w9(y,_){return!!pN()&&(Wn.window&&!Wn.window.closed&&y!==Wn.window||(Wn.window=y,Wn.origin=_),Wn.window&&Wn.window.closed?(Wn.window=null,Wn.origin=null,!1):Wn.window===y)}(T,D)&&function b9(y,_,S,C){Pa(this,void 0,void 0,function*(){Wn.window===_&&(l0(Wn.window,Wn.origin,Wn.messageQueue,"child"),function(T,D,I){if(void 0===T.data.id||void 0===T.data.func)return;const M=ZG(T.data),[A,R]=CN(M.func,M.args);if(A&&void 0!==R)return ad("Handler called in response to message %s from child. Returning response from handler to child, action: %s.",Bo(M),M.func),void bN(M.id,M.uuid,Array.isArray(R)?R:[R]);ad("No handler for message %s from child found; relaying message on to parent, action: %s. Relayed message will have a new id.",Bo(M),M.func),function(N,O,F){const $=O(ar("v2","tasks.startTask"),N.func,N.args,!0,N.teamsJsInstanceId),Q=Wn.origin;F($.uuid,(...ae)=>{if(!Wn.window)return;if(!function gN(){return c0}().disableEnforceOriginMatchForChildResponses&&Q!==Wn.origin)return void ad("Origin of child window has changed, not sending response back to child window");const Ce=ae.pop();ad("Message from parent being relayed to child, id: %s",Bo(N)),bN(N.id,N.uuid,ae,Ce)})}(M,D,I)}(y,S,C))})}(C,T,Cp,(M,A)=>hn.callbacks.set(M,A)):ON(C)):RN("Message being ignored by app because it is either coming from the current window or a different window with an invalid origin, message: %o, source: %o, origin: %o",C,T,D)})})}(S),Nt.currentWindow=Nt.currentWindow||function kG(){if(vp())throw new Error("window object undefined at SSR check");return window}(),Nt.parentWindow=Nt.currentWindow.parent!==Nt.currentWindow.self?Nt.currentWindow.parent:Nt.currentWindow.opener,Nt.topWindow=Nt.currentWindow.top,(Nt.parentWindow||y)&&Nt.currentWindow.addEventListener("message",hn.messageListener,!1),!Nt.parentWindow){const S=Nt.currentWindow;if(!S.nativeInterface)return Promise.reject(new Error("Initialization Failed. No Parent window found."));mn.isFramelessWindow=!0,S.onNativeMessage=ON}try{return Nt.parentOrigin="*",Gs(_,"initialize",[fN,_p,y]).then(([S,C,T,D])=>(function E9(y,_,S){var C;const T=S9;if(mn.isFramelessWindow)return void T("Cannot polyfill nestedAppAuthBridge as current window is frameless");if(!_)return void T("Cannot polyfill nestedAppAuthBridge as current window does not exist");if(_.parent!==_.top)return void T("Default NAA bridge injection not supported in nested iframe. Use standalone NAA bridge instead.");const D=(()=>{try{return JSON.parse(y)}catch(A){return null}})();if(!D||null===(C=D.supports)||void 0===C||!C.nestedAppAuth)return void T("Cannot polyfill nestedAppAuthBridge as current hub does not support nested app auth");const I=_;if(I.nestedAppAuthBridge)return void T("nestedAppAuthBridge already exists on current window, skipping polyfill");const M=function(A,R){const N=D9;if(!A)return N("nestedAppAuthBridge cannot be created as current window does not exist"),null;const{onMessage:O,sendPostMessage:F}=R,$=Q=>ae=>O(ae,Q);return{addEventListener:(Q,ae)=>{"message"===Q?A.addEventListener(Q,$(ae)):N("Event ".concat(Q," is not supported by nestedAppAuthBridge"))},postMessage:Q=>{const ae=(()=>{try{return JSON.parse(Q)}catch(Ee){return null}})();if(!ae||"object"!=typeof ae||"NestedAppAuthRequest"!==ae.messageType)return void N("Unrecognized data format received by app, message being ignored. Message: %o",Q);const Ce=ar(T9,"nestedAppAuth.execute");F(Q,Ce)},removeEventListener:(Q,ae)=>{A.removeEventListener(Q,$(ae))}}}(I,S);M&&(I.nestedAppAuthBridge=M)}(D,Nt.currentWindow,{onMessage:L9,sendPostMessage:O9}),{context:S,clientType:C,runtimeConfig:T,clientSupportedSDKVersion:D}))}finally{Nt.parentOrigin=null}}function Gs(y,_,S=void 0){if(!eN(y))throw Error("apiVersionTag: ".concat(y," passed in doesn't follow the pattern starting with 'v' followed by digits, then underscore with words, please check."));return new Promise(C=>{const T=Cp(y,_,S);var D;C((D=T.uuid,new Promise(I=>{hn.promiseCallbacks.set(D,I)})))})}function si(y,_,S,C){let T;if(S instanceof Function?C=S:S instanceof Array&&(T=S),!eN(y))throw Error("apiVersionTag: ".concat(y," passed in doesn't follow the pattern starting with 'v' followed by digits, then underscore with words, please check."));const D=Cp(y,_,T);C&&hn.callbacks.set(D.uuid,C)}hn.parentMessageQueue=[],hn.topMessageQueue=[],hn.nextMessageId=0,hn.callbacks=new Map,hn.promiseCallbacks=new Map,hn.portCallbacks=new Map,hn.legacyMessageIdsToUuidMap={};const N9=ka.extend("sendNestedAuthRequestToTopWindow");function O9(y,_){const S=N9,C=Nt.topWindow,T=function(D,I){const M=hn.nextMessageId++,A=new Na;return hn.legacyMessageIdsToUuidMap[M]=A,{id:M,uuid:A,func:"nestedAppAuth.execute",timestamp:Date.now(),monotonicTimestamp:e0(),apiVersionTag:I,args:[],data:D}}(y,_);return S("Message %s information: %o",Bo(T),{actionName:T.func}),AN(C,T)}const k9=ka.extend("sendRequestToTargetWindowHelper");function AN(y,_){const S=k9,C=(D=y)===Nt.topWindow&&h0()?"top":D===Nt.parentWindow?"parent":null,T=mN(_);var D,I;if(mn.isFramelessWindow)Nt.currentWindow&&Nt.currentWindow.nativeInterface&&(S("Sending message %s to %s via framelessPostMessage interface",Bo(T),C),Nt.currentWindow.nativeInterface.framelessPostMessage(JSON.stringify(T)));else{const D=(I=y)===Nt.topWindow&&h0()?Nt.topOrigin:I===Nt.parentWindow?Nt.parentOrigin:null;y&&D?(S("Sending message %s to %s via postMessage",Bo(T),C),y.postMessage(T,D)):(S("Adding message %s to %s message queue",Bo(T),C),kN(y).push(_))}return _}const x9=ka.extend("sendMessageToParentHelper");function Cp(y,_,S,C,T){const D=x9,I=Nt.parentWindow,M=function(A,R,N,O,F){const $=hn.nextMessageId++,Q=new Na;hn.legacyMessageIdsToUuidMap[$]=Q;const ae=!0===O?F:mn.teamsJsInstanceId;return{id:$,uuid:Q,func:R,timestamp:Date.now(),monotonicTimestamp:e0(),args:N||[],apiVersionTag:A,isProxiedFromChild:null!=O&&O,teamsJsInstanceId:ae}}(y,_,S,C,T);return Ui.storeCallbackInformation(M.uuid,{name:_,calledAt:M.timestamp}),D("Message %s information: %o",Bo(M),{actionName:_,args:S}),AN(I,M)}const RN=ka.extend("processIncomingMessage"),F9=ka.extend("processAuthBridgeMessage");function L9(y,_){var S,C;const T=F9;if(!y||!y.data||"object"!=typeof y.data)return void T("Unrecognized message format received by app, message being ignored. Message: %o",y);const{args:D}=y.data,[,I]=null!=D?D:[],M=(()=>{try{return JSON.parse(I)}catch(N){return null}})();if(!M||"object"!=typeof M||"NestedAppAuthResponse"!==M.messageType)return void T("Unrecognized data format received by app, message being ignored. Message: %o",y);const A=y.source||(null===(S=null==y?void 0:y.originalEvent)||void 0===S?void 0:S.source),R=y.origin||(null===(C=null==y?void 0:y.originalEvent)||void 0===C?void 0:C.origin);A?PN(A,R)?(Nt.topWindow&&!Nt.topWindow.closed&&A!==Nt.topWindow||(Nt.topWindow=A,Nt.topOrigin=R),Nt.topWindow&&Nt.topWindow.closed&&(Nt.topWindow=null,Nt.topOrigin=null),l0(Nt.topWindow,Nt.topOrigin,hn.topMessageQueue,"top"),_(I)):T("Message being ignored by app because it is either coming from the current window or a different window with an invalid origin"):T("Message being ignored by app because it is coming for a target that is null")}const d0=ka.extend("shouldProcessIncomingMessage");function PN(y,_){return Pa(this,void 0,void 0,function*(){if(Nt.currentWindow&&y===Nt.currentWindow)return d0("Should not process message because it is coming from the current window"),!1;if(Nt.currentWindow&&Nt.currentWindow.location&&_&&_===Nt.currentWindow.location.origin)return!0;{let S;try{S=new URL(_)}catch(T){return d0("Message has an invalid origin of %s",_),!1}const C=yield function M9(y,_){const S=TN()?gp:qs;return IN(y,S)?Promise.resolve(!0):(Ws("Origin %s is not in the local valid origins list, fetching from CDN",y),EN(_).then(C=>IN(y,C)))}(S);return C||d0("Message has an invalid origin of %s",_),C}})}const NN=ka.extend("handleIncomingMessageFromParent");function wp(y,_){if(_){const S=[...y].find(([C,T])=>C.toString()===_.toString());if(S)return S[0]}}function f0(y,_){const S=wp(_,y.uuid);S&&_.delete(S),y.uuid?hn.legacyMessageIdsToUuidMap={}:delete hn.legacyMessageIdsToUuidMap[y.id]}function ON(y){const _=NN,S=e0();if("id"in y.data&&"number"==typeof y.data.id){const T=e9(y.data),D=function(I){const M=NN;if(!I.uuid)return hn.legacyMessageIdsToUuidMap[I.id];{const A=I.uuid,R=wp(hn.callbacks,A);if(R)return R;const N=wp(hn.promiseCallbacks,A);if(N)return N;const O=wp(hn.portCallbacks,A);if(O)return O}M("Received message %s that failed to produce a callbackId",Bo(I))}(T);if(D){const I=hn.callbacks.get(D);_("Received a response from parent for message %s",D.toString()),Ui.handlePerformanceMetrics(D,T,_,S),I&&(_("Invoking the registered callback for message %s with arguments %o",D.toString(),T.args),I.apply(null,[...T.args,T.isPartialResponse]),!0===y.data.isPartialResponse||(_("Removing registered callback for message %s",D.toString()),f0(T,hn.callbacks)));const M=hn.promiseCallbacks.get(D);M&&(_("Invoking the registered promise callback for message %s with arguments %o",D.toString(),T.args),M(T.args),_("Removing registered promise callback for message %s",D.toString()),f0(T,hn.promiseCallbacks));const A=hn.portCallbacks.get(D);if(A){let R;_("Invoking the registered port callback for message %s with arguments %o",D.toString(),T.args),y.ports&&y.ports[0]instanceof MessagePort&&(R=y.ports[0]),A(R,T.args),_("Removing registered port callback for message %s",D.toString()),f0(T,hn.portCallbacks)}T.uuid&&(hn.legacyMessageIdsToUuidMap={})}}else if("func"in y.data&&"string"==typeof y.data.func){const C=y.data;Ui.handleOneWayPerformanceMetrics(C,_,S),_('Received a message from parent %s, action: "%s"',Bo(C),C.func),CN(C.func,C.args)}else _("Received an unknown message: %O",y)}function h0(){return Nt.topWindow!==Nt.parentWindow}function kN(y){return y===Nt.topWindow&&h0()?hn.topMessageQueue:y===Nt.parentWindow?hn.parentMessageQueue:[]}function xN(y,_){let S;S=Nt.currentWindow.setInterval(()=>{0===kN(y).length&&(clearInterval(S),_())},100)}const p0="v2",V9=[];function j9(y){mn.frameContext&&(mn.frameContext===jo.task?V9.push(y):function m9(y){delete un.handlers[y]}("messageForChild"))}const ps="v2";var FN,LN;let g0,m0,y0,_0,C0;function H9(y){y0&&y0(y)||(Hs(ii),si(ar(ps,"menus.handleViewConfigItemPress"),"viewConfigItemPress",[y]))}function z9(y){g0&&g0(y)||(Hs(ii),si(ar(ps,"menus.handleNavBarMenuItemPress"),"handleNavBarMenuItemPress",[y]))}function q9(y){m0&&m0(y)||(Hs(ii),si(ar(ps,"menus.handleActionMenuItemPress"),"handleActionMenuItemPress",[y]))}function J9(y){const _=new Q9(y);_0?_0(_):fs()?hs("settings.save",[y]):_.notifySuccess()}!function(y){y[y.ifRoom=0]="ifRoom",y[y.overflowOnly=1]="overflowOnly"}(FN||(FN={})),function(y){y.dropDown="dropDown",y.popOver="popOver"}(LN||(LN={}));class Q9{constructor(_){this.notified=!1,this.result=_||{}}notifySuccess(){this.ensureNotNotified(),si(ar(Oa,"pages.saveEvent.notifySuccess"),"settings.save.success"),this.notified=!0}notifyFailure(_){this.ensureNotNotified(),si(ar(Oa,"pages.saveEvent.notifyFailure"),"settings.save.failure",[_]),this.notified=!0}ensureNotNotified(){if(this.notified)throw new Error("The SaveEvent may only notify success or failure once.")}}function X9(){const y=new Y9;C0?C0(y):fs()?hs("settings.remove",[]):y.notifySuccess()}class Y9{constructor(){this.notified=!1}notifySuccess(){this.ensureNotNotified(),si(ar(Oa,"pages.removeEvent.notifySuccess"),"settings.remove.success"),this.notified=!0}notifyFailure(_){this.ensureNotNotified(),si(ar(Oa,"pages.removeEvent.notifyFailure"),"settings.remove.failure",[_]),this.notified=!0}ensureNotNotified(){if(this.notified)throw new Error("The removeEventType may only notify success or failure once.")}}const UN=Li("app");const ld=UN.extend("initializeHelper");const jN=4,BN=256;class o7{constructor(_){this.idAsString=_,function t7(y){if(Z_(y))throw new Error("Potential app id (".concat(y,") is invalid; it contains script tags."));if(function r7(y){return[...y].some(_=>{const S=_.charCodeAt(0);return S<32||S>126})}(y))throw new Error("Potential app id (".concat(y,") is invalid; it contains non-printable characters."))}(_)}serialize(){return this.toString()}toString(){return this.idAsString}}class i7 extends o7{constructor(_){super(_),function e7(y){if(!function n7(y){return y.length<BN&&y.length>jN}(y))throw new Error("Potential app id (".concat(y,") is invalid; its length ").concat(y.length," is not within the length limits (").concat(jN,"-").concat(BN,")."))}(_)}toJSON(){return{appIdAsString:this.toString()}}}const b0=Li("app");var $N,HN;function bp(y){return function Z9(y,_){return vp()?(UN.extend("initialize")("window object undefined at initialization"),Promise.resolve()):function OG(y,_,S){return new Promise((C,T)=>{const D=setTimeout(T,_,S);y().then(I=>{clearTimeout(D),C(I)}).catch(I=>{clearTimeout(D),T(I)})})}(()=>{return S=y,C=_,new Promise(T=>{mn.initializeCalled||(mn.initializeCalled=!0,function g9(){un.initializeHandlers()}(),mn.initializePromise=A9(C,S).then(({context:D,clientType:I,runtimeConfig:M,clientSupportedSDKVersion:A=LP})=>{mn.frameContext=D,mn.hostClientType=I,mn.clientSupportedSDKVersion=A;try{ld("Parsing %s",M);let R=JSON.parse(M);if(ld("Checking if %o is a valid runtime object",null!=R?R:"null"),!R||!R.apiVersion)throw new Error("Received runtime config is invalid");R=XP(R),M&&a0(R)}catch(R){if(!(R instanceof SyntaxError))throw R;try{ld("Attempting to parse %s as an SDK version",M),isNaN(Y_(M,LP))||(mn.clientSupportedSDKVersion=M);let N=JSON.parse(A);if(ld("givenRuntimeConfig parsed to %o",null!=N?N:"null"),!N)throw new Error("givenRuntimeConfig string was successfully parsed. However, it parsed to value of null");N=XP(N),a0(N)}catch(N){if(!(N instanceof SyntaxError))throw N;a0(XG(mn.clientSupportedSDKVersion,WG,QG))}}mn.initializeCompleted=!0}),function $9(){zs(ar(ps,"menus.registerNavBarMenuItemPressHandler"),"navBarMenuItemPress",z9,!1),zs(ar(ps,"menus.registerActionMenuItemPressHandler"),"actionMenuItemPress",q9,!1),zs(ar(ps,"menus.registerSetModuleViewHandler"),"setModuleView",H9,!1)}(),function W9(){zs(ar(Oa,"pages.config.registerSettingsSaveHandler"),"settings.save",J9,!1),zs(ar(Oa,"pages.config.registerSettingsRemoveHandler"),"settings.remove",X9,!1)}(),function B9(){zs(ar(p0,"dialog.registerMessageForChildHandler"),"messageForChild",j9,!1)}()),Array.isArray(C)&&function c9(y){let _=mn.additionalValidOrigins.concat(y.filter(C=>"string"==typeof C&&SG.test(C)));const S={};_=_.filter(C=>!S[C]&&(S[C]=!0,!0)),mn.additionalValidOrigins=_}(C),void 0!==mn.initializePromise?T(mn.initializePromise):ld("GlobalVars.initializePromise is unexpectedly undefined")});var S,C},6e4,new Error("SDK initialization timed out."))}(ar("v2","app.initialize"),y)}(function(y){y.AuthFailed="AuthFailed",y.Timeout="Timeout",y.Other="Other"})($N||($N={})),function(y){y.PermissionError="PermissionError",y.NotFound="NotFound",y.Throttling="Throttling",y.Offline="Offline",y.Other="Other"}(HN||(HN={})),b0("teamsjs instance is version %s, starting at %s UTC (%s local)",fN,(new Date).toISOString(),(new Date).toLocaleString()),function(){if(vp())return;const y=document.getElementsByTagName("script"),_=y&&y[y.length-1]&&y[y.length-1].src,S="Today, teamsjs can only be used from a single script or you may see undefined behavior. This log line is used to help detect cases where teamsjs is loaded multiple times -- it is always written. The presence of the log itself does not indicate a multi-load situation, but multiples of these log lines will. If you would like to use teamjs from more than one script at the same time, please open an issue at https://github.com/OfficeDev/microsoft-teams-library-js/issues";_&&0!==_.length?b0("teamsjs is being used from %s. %s",_,S):b0("teamsjs is being used from a script tag embedded directly in your html. %s",S)}();let zN=(()=>{var y;class _{constructor(){}setCookie(C,T,D){let I="";if(D){const M=new Date;M.setTime(M.getTime()+24*D*60*60*1e3),I="; expires="+M.toUTCString()}document.cookie=C+"="+(T||"")+I+"; path=/; SameSite=None; Secure"}getCookie(C){const T=C+"=",D=document.cookie.split(";");for(let I=0;I<D.length;I++){let M=D[I];for(;" "===M.charAt(0);)M=M.substring(1,M.length);if(0===M.indexOf(T))return M.substring(T.length,M.length)}return null}removeCookie(C){document.cookie=C+"=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;"}}return(y=_).\u0275fac=function(C){return new(C||y)},y.\u0275prov=At({token:y,factory:y.\u0275fac,providedIn:"root"}),_})(),a7=(()=>{var y;class _{constructor(C){this.commonService=C,this.commonService.removeCookie("RedirectURL")}ngOnInit(){this.initializeTeams()}initializeTeams(){return(0,pe.A)(function*(){try{yield bp()}catch(C){console.error("Failed to initialize Teams SDK:",C)}})()}}return(y=_).\u0275fac=function(C){return new(C||y)(lt(zN))},y.\u0275cmp=Co({type:y,selectors:[["app-root"]],decls:2,vars:0,consts:[[1,"app-container"]],template:function(C,T){1&C&&(on(0,"div",0),Oo(1,"router-outlet"),dn())},dependencies:[Kh],styles:[".app-container[_ngcontent-%COMP%]{height:100vh;width:100vw}"]}),_})(),S0=(()=>{var y;class _{constructor(){this.teamsContextSubject=new rr({themeString:"default",teamsUserCredential:void 0}),this.teamsContext$=this.teamsContextSubject.asObservable(),this.initializeTeams()}initializeTeams(){return(0,pe.A)(function*(){try{yield bp()}catch(C){console.error("Failed to initialize Teams:",C)}})()}getTeamsContext(){return this.teamsContextSubject.value}getUserInfo(){return(0,pe.A)(function*(){try{const C=yield function s7(){return new Promise(y=>{(function i9(){if(!mn.initializeCalled)throw r9(mp),new Error(mp)})(),y(function R9(y,_,...S){return Gs(y,_,S).then(([C])=>C)}(ar("v2","app.getContext"),"getContext"))}).then(y=>{return{actionInfo:(_=y).actionInfo,app:{locale:_.locale,sessionId:_.appSessionId?_.appSessionId:"",theme:_.theme?_.theme:"default",iconPositionVertical:_.appIconPosition,osLocaleInfo:_.osLocaleInfo,messageId:_.messageId,parentMessageId:_.parentMessageId,userClickTime:_.userClickTime,userClickTimeV2:_.userClickTimeV2,userFileOpenPreference:_.userFileOpenPreference,host:{name:_.hostName?_.hostName:r0.teams,clientType:_.hostClientType?_.hostClientType:Mn.web,sessionId:_.sessionId?_.sessionId:"",ringId:_.ringId},appLaunchId:_.appLaunchId,appId:_.appId?new i7(_.appId):void 0,manifestVersion:_.manifestVersion},page:{id:_.entityId,frameContext:_.frameContext?_.frameContext:mn.frameContext,renderingSurface:_.renderingSurface?_.renderingSurface:void 0,subPageId:_.subEntityId,isFullScreen:_.isFullScreen,isMultiWindow:_.isMultiWindow,isBackgroundLoad:_.isBackgroundLoad,sourceOrigin:_.sourceOrigin},user:{id:null!==(S=_.userObjectId)&&void 0!==S?S:"",displayName:_.userDisplayName,isCallingAllowed:_.isCallingAllowed,isPSTNCallingAllowed:_.isPSTNCallingAllowed,licenseType:_.userLicenseType,loginHint:_.loginHint,userPrincipalName:_.userPrincipalName,tenant:_.tid?{id:_.tid,teamsSku:_.tenantSKU}:void 0},channel:_.channelId?{id:_.channelId,displayName:_.channelName,relativeUrl:_.channelRelativeUrl,membershipType:_.channelType,defaultOneNoteSectionId:_.defaultOneNoteSectionId,ownerGroupId:_.hostTeamGroupId,ownerTenantId:_.hostTeamTenantId}:void 0,chat:_.chatId?{id:_.chatId}:void 0,meeting:_.meetingId?{id:_.meetingId}:void 0,sharepoint:_.sharepoint,team:_.teamId?{internalId:_.teamId,displayName:_.teamName,type:_.teamType,groupId:_.groupId,templateId:_.teamTemplateId,isArchived:_.isTeamArchived,userRole:_.userTeamRole}:void 0,sharePointSite:_.teamSiteUrl||_.teamSiteDomain||_.teamSitePath||_.mySitePath||_.mySiteDomain?{teamSiteUrl:_.teamSiteUrl,teamSiteDomain:_.teamSiteDomain,teamSitePath:_.teamSitePath,teamSiteId:_.teamSiteId,mySitePath:_.mySitePath,mySiteDomain:_.mySiteDomain}:void 0,dialogParameters:_.dialogParameters||{}};var _,S})}();return C.user?{objectId:C.user.id,displayName:C.user.displayName}:(console.error("User context is undefined"),null)}catch(C){return console.error("Failed to get user info:",C),null}})()}}return(y=_).\u0275fac=function(C){return new(C||y)},y.\u0275prov=At({token:y,factory:y.\u0275fac,providedIn:"root"}),_})();var T0=Se(142);class ud extends Error{}ud.prototype.name="InvalidTokenError";const E0=y=>{const{exp:_}=function u7(y,_){if("string"!=typeof y)throw new ud("Invalid token specified: must be a string");_||(_={});const S=!0===_.header?0:1,C=y.split(".")[S];if("string"!=typeof C)throw new ud("Invalid token specified: missing part #".concat(S+1));let T;try{T=function l7(y){let _=y.replace(/-/g,"+").replace(/_/g,"/");switch(_.length%4){case 0:break;case 2:_+="==";break;case 3:_+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return function c7(y){return decodeURIComponent(atob(y).replace(/(.)/g,(_,S)=>{let C=S.charCodeAt(0).toString(16).toUpperCase();return C.length<2&&(C="0"+C),"%"+C}))}(_)}catch(S){return atob(_)}}(C)}catch(D){throw new ud("Invalid token specified: invalid base64 for part #".concat(S+1," (").concat(D.message,")"))}try{return JSON.parse(T)}catch(D){throw new ud("Invalid token specified: invalid json for part #".concat(S+1," (").concat(D.message,")"))}}(y);return{token:y,expiresOnTimestamp:1e3*_}},qN={token:"",expiresOnTimestamp:-10};class h7{constructor(_){this.expiringSoonIntervalInMs=6e5,this.refreshAfterLifetimePercentage=.5,this.activeTokenFetching=null,this.activeTokenUpdating=null,this.disposed=!1;const{tokenRefresher:S,token:C,refreshProactively:T}=_;this.refresh=S,this.currentToken=C?E0(C):qN,this.refreshProactively=null!=T&&T,this.refreshProactively&&this.scheduleRefresh()}getToken(_){var S=this;return(0,pe.A)(function*(){return S.isTokenExpiringSoon(S.currentToken)&&(S.isTokenValid(S.currentToken)||(yield S.updateTokenAndReschedule(null==_?void 0:_.abortSignal))),S.currentToken})()}dispose(){this.disposed=!0,this.activeTokenFetching=null,this.activeTokenUpdating=null,this.currentToken=qN,this.activeTimeout&&clearTimeout(this.activeTimeout)}updateTokenAndReschedule(_){var S=this;return(0,pe.A)(function*(){if(S.activeTokenUpdating)return S.activeTokenUpdating;S.activeTokenUpdating=S.refreshTokenAndReschedule(_);try{yield S.activeTokenUpdating}finally{S.activeTokenUpdating=null}})()}refreshTokenAndReschedule(_){var S=this;return(0,pe.A)(function*(){const C=yield S.refreshToken(_);if(!S.isTokenValid(C))throw new Error("The token returned from the tokenRefresher is expired.");S.currentToken=C,S.refreshProactively&&S.scheduleRefresh()})()}refreshToken(_){var S=this;return(0,pe.A)(function*(){try{return S.activeTokenFetching||(S.activeTokenFetching=S.refresh(_)),E0(yield S.activeTokenFetching)}finally{S.activeTokenFetching=null}})()}scheduleRefresh(){if(this.disposed)return;this.activeTimeout&&clearTimeout(this.activeTimeout);const _=this.currentToken.expiresOnTimestamp-Date.now();let S=null;S=this.isTokenExpiringSoon(this.currentToken)?_*this.refreshAfterLifetimePercentage:_-this.expiringSoonIntervalInMs,this.activeTimeout=setTimeout(()=>this.updateTokenAndReschedule(),S)}isTokenValid(_){return _&&Date.now()<_.expiresOnTimestamp}isTokenExpiringSoon(_){return!_||Date.now()>=_.expiresOnTimestamp-this.expiringSoonIntervalInMs}}class p7{constructor(_){this.token=_}getToken(){var _=this;return(0,pe.A)(function*(){return _.token})()}dispose(){}}var g7=Se(201),rl=Se(458),WN=Se(124);function GN(y){return y&&"function"==typeof y.getToken&&(void 0===y.signRequest||y.getToken.length>0)}const y7="ApiVersionPolicy",_7="keyCredentialAuthenticationPolicy";function b7(y,_,S={}){const C=(0,rl.createPipelineFromOptions)(S);return C.addPolicy(function v7(y){return{name:y7,sendRequest:(_,S)=>{const C=new URL(_.url);return!C.searchParams.get("api-version")&&y.apiVersion&&(_.url="".concat(_.url).concat(Array.from(C.searchParams.keys()).length>0?"&":"?","api-version=").concat(y.apiVersion)),S(_)}}}(S)),function w7(y,_,S={}){var C,T,D,I;const{credential:M,clientOptions:A}=S;if(M)if(GN(M)){const R=(0,rl.bearerTokenAuthenticationPolicy)({credential:M,scopes:null!==(T=null===(C=null==A?void 0:A.credentials)||void 0===C?void 0:C.scopes)&&void 0!==T?T:"".concat(_,"/.default")});y.addPolicy(R)}else if(function S7(y){return void 0!==y.key}(M)){if(null===(D=null==A?void 0:A.credentials)||void 0===D||!D.apiKeyHeaderName)throw new Error("Missing API Key Header Name");const R=function C7(y,_){return{name:_7,sendRequest:(S,C)=>(0,pe.A)(function*(){return S.headers.set(_,y.key),C(S)})()}}(M,null===(I=null==A?void 0:A.credentials)||void 0===I?void 0:I.apiKeyHeaderName);y.addPolicy(R)}}(C,y,{credential:_,clientOptions:S}),C}function Js(y){return y.onResponse?Object.assign(Object.assign({},y),{onResponse(_,S){var C;null===(C=y.onResponse)||void 0===C||C.call(y,_,S,S)}}):y}class N7{constructor(_){this.options=_,this.result={entraToken:void 0,acsToken:{token:"",expiresOnTimestamp:0}},this.client=function T7(y,_,S={}){let C;_&&(function E7(y){return function m7(y){return(0,WN.isObjectWithProperties)(y,["key"])&&"string"==typeof y.key}(y)||GN(y)}(_)?C=_:S=null!=_?_:{});const T=b7(y,C,S),D=(0,g7.KU)(y,Object.assign(Object.assign({},S),{pipeline:T})),I=(M,...A)=>({get:(R={})=>D.path(M,...A).get(Js(R)),post:(R={})=>D.path(M,...A).post(Js(R)),put:(R={})=>D.path(M,...A).put(Js(R)),patch:(R={})=>D.path(M,...A).patch(Js(R)),delete:(R={})=>D.path(M,...A).delete(Js(R)),head:(R={})=>D.path(M,...A).head(Js(R)),options:(R={})=>D.path(M,...A).options(Js(R)),trace:(R={})=>D.path(M,...A).trace(Js(R))});return{path:I,pathUnchecked:I,pipeline:D.pipeline}}(_.resourceEndpoint),this.httpClient=(0,rl.createDefaultHttpClient)(),this.options=_,this.options.scopes=this.options.scopes||["https://communication.azure.com/clients/.default"],this.isPending=this.getToken()}getToken(_){var S=this;return(0,pe.A)(function*(){var C;if(null!==(C=null==_?void 0:_.abortSignal)&&void 0!==C&&C.aborted)return{token:"",expiresOnTimestamp:0};S.isPending||(S.isPending=S.getTokenInternal(_));try{yield S.isPending}finally{S.isPending=null}return S.result.acsToken})()}getTokenInternal(_){var S=this;return(0,pe.A)(function*(){const C=null!=_&&_.abortSignal?{abortSignal:_.abortSignal}:void 0,T=yield S.options.tokenCredential.getToken(S.options.scopes?S.options.scopes:["https://communication.azure.com/clients/.default"],C),D=new Date,I=new Date(S.result.acsToken.expiresOnTimestamp);if(null===T)S.result={entraToken:void 0,acsToken:{token:"",expiresOnTimestamp:0}};else if(""===S.result.acsToken.token||T.token!==S.result.entraToken||I<D){const M=yield S.exchangeEntraToken(S.options.resourceEndpoint,T.token,C);S.result={entraToken:T.token,acsToken:M}}return S.result.acsToken})()}dispose(){this.result={entraToken:void 0,acsToken:{token:"",expiresOnTimestamp:0}}}exchangeEntraToken(_,S,C){var T=this;return(0,pe.A)(function*(){const D=(0,rl.createPipelineRequest)({url:T.createRequestUri(_),method:"POST",headers:(0,rl.createHttpHeaders)({Authorization:"Bearer ".concat(S),"Content-Type":"application/json",Accept:"application/json"}),abortSignal:null==C?void 0:C.abortSignal,body:JSON.stringify({})}),I=yield T.client.pipeline.sendRequest(T.httpClient,D);if(200!==I.status||!I.bodyAsText)throw new Error("Service request failed. Status: ".concat(I.status,", Body: ").concat(I.bodyAsText));const M=JSON.parse(I.bodyAsText);return{token:M.accessToken.token,expiresOnTimestamp:Date.parse(M.accessToken.expiresOn)}})()}createRequestUri(_){const[S,C]=this.determineEndpointAndApiVersion();return"".concat(_).concat(S,"?api-version=").concat(C)}determineEndpointAndApiVersion(){if(!this.options.scopes||0===this.options.scopes.length)throw new Error("Scopes validation failed. Ensure all scopes start with either {TeamsExtensionScopePrefix} or {CommunicationClientsScopePrefix}.");if(this.options.scopes.every(_=>_.startsWith("https://auth.msft.communication.azure.com/")))return["/access/teamsExtension/:exchangeAccessToken","2025-06-30"];if(this.options.scopes.every(_=>_.startsWith("https://communication.azure.com/clients/")))return["/access/entra/:exchangeAccessToken","2025-03-02-preview"];throw new Error("Scopes validation failed. Ensure all scopes start with either {TeamsExtensionScopePrefix} or {CommunicationClientsScopePrefix}.")}}class KN{constructor(_){this.disposed=!1,this.tokenCredential="string"==typeof _?new p7(E0(_)):"tokenRefresher"in _?new h7(_):new N7(_)}getToken(_){var S=this;return(0,pe.A)(function*(){S.throwIfDisposed();const C=yield S.tokenCredential.getToken(_);return S.throwIfDisposed(),C})()}dispose(){this.disposed=!0,this.tokenCredential.dispose()}throwIfDisposed(){if(this.disposed)throw new Error("User credential is disposed")}}globalThis;const QN=y=>(y=>"string"==typeof y.communicationUserId)(y)?Object.assign(Object.assign({},y),{kind:"communicationUser"}):(y=>"string"==typeof y.phoneNumber)(y)?Object.assign(Object.assign({},y),{kind:"phoneNumber"}):(y=>"string"==typeof y.microsoftTeamsUserId)(y)?Object.assign(Object.assign({},y),{kind:"microsoftTeamsUser"}):(y=>"string"==typeof y.teamsAppId)(y)?Object.assign(Object.assign({},y),{kind:"microsoftTeamsApp"}):(y=>"string"==typeof y.userId&&"string"==typeof y.tenantId&&"string"==typeof y.resourceId)(y)?Object.assign(Object.assign({},y),{kind:"teamsExtensionUser"}):Object.assign(Object.assign({},y),{kind:"unknown"}),dd=y=>{const _=QN(y);switch(_.kind){case"communicationUser":return _.communicationUserId;case"microsoftTeamsUser":{const{microsoftTeamsUserId:S,rawId:C,cloud:T,isAnonymous:D}=_;if(C)return C;if(D)return"8:teamsvisitor:".concat(S);switch(T){case"dod":return"8:dod:".concat(S);case"gcch":return"8:gcch:".concat(S);case"public":return"8:orgid:".concat(S)}return"8:orgid:".concat(S)}case"microsoftTeamsApp":{const{teamsAppId:S,rawId:C,cloud:T}=_;if(C)return C;switch(T){case"dod":return"28:dod:".concat(S);case"gcch":return"28:gcch:".concat(S)}return"28:orgid:".concat(S)}case"phoneNumber":{const{phoneNumber:S,rawId:C}=_;return C||"4:".concat(S)}case"teamsExtensionUser":{const{userId:S,tenantId:C,resourceId:T,rawId:D,cloud:I}=_;if(D)return D;switch(I){case"dod":return"8:dod-acs:".concat(T,"_").concat(C,"_").concat(S);case"gcch":return"8:gcch-acs:".concat(T,"_").concat(C,"_").concat(S)}return"8:acs:".concat(T,"_").concat(C,"_").concat(S)}case"unknown":return _.id}},qr=(y,_)=>{const S=Object.keys(y)[0],C=y[S];if(_ in C)return C[_];throw new Error("Property ".concat(_," is required for identifier of type ").concat(S,"."))},XN=y=>{var _,S,C,T,D,I,M,A,R;const N=QN(y);switch(N.kind){case"communicationUser":return{rawId:dd(N),communicationUser:{id:N.communicationUserId}};case"phoneNumber":return{rawId:null!==(_=N.rawId)&&void 0!==_?_:dd(N),phoneNumber:{value:N.phoneNumber,isAnonymous:null!==(S=N.isAnonymous)&&void 0!==S&&S,assertedId:N.assertedId}};case"microsoftTeamsUser":return{rawId:null!==(C=N.rawId)&&void 0!==C?C:dd(N),microsoftTeamsUser:{userId:N.microsoftTeamsUserId,isAnonymous:null!==(T=N.isAnonymous)&&void 0!==T&&T,cloud:null!==(D=N.cloud)&&void 0!==D?D:"public"}};case"microsoftTeamsApp":return{rawId:null!==(I=N.rawId)&&void 0!==I?I:dd(N),microsoftTeamsApp:{appId:N.teamsAppId,cloud:null!==(M=N.cloud)&&void 0!==M?M:"public"}};case"teamsExtensionUser":return{rawId:null!==(A=N.rawId)&&void 0!==A?A:dd(N),teamsExtensionUser:{userId:N.userId,tenantId:N.tenantId,resourceId:N.resourceId,cloud:null!==(R=N.cloud)&&void 0!==R?R:"public"}};case"unknown":return{rawId:N.id};default:throw new Error("Can't serialize an identifier with kind ".concat(N.kind))}},fd=y=>{var _,S;(y=>{const _=[];if(void 0!==y.communicationUser&&_.push("communicationUser"),void 0!==y.microsoftTeamsUser&&_.push("microsoftTeamsUser"),void 0!==y.microsoftTeamsApp&&_.push("microsoftTeamsApp"),void 0!==y.phoneNumber&&_.push("phoneNumber"),void 0!==y.teamsExtensionUser&&_.push("teamsExtensionUser"),_.length>1)throw new Error("Only one of the properties in ".concat(JSON.stringify(_)," should be present."))})(y);const C=y.communicationUser,T=y.microsoftTeamsUser,D=y.microsoftTeamsApp,I=y.phoneNumber,M=y.teamsExtensionUser,A=null!==(_=y.kind)&&void 0!==_?_:(y=>y.communicationUser?"communicationUser":y.phoneNumber?"phoneNumber":y.microsoftTeamsUser?"microsoftTeamsUser":y.microsoftTeamsApp?"microsoftTeamsApp":y.teamsExtensionUser?"teamsExtensionUser":"unknown")(y);return"communicationUser"===A&&C?{kind:"communicationUser",communicationUserId:qr({communicationUser:C},"id")}:"phoneNumber"===A&&I?{kind:"phoneNumber",phoneNumber:qr({phoneNumber:I},"value"),rawId:qr({phoneNumber:y},"rawId"),isAnonymous:null!==(S=I.isAnonymous)&&void 0!==S&&S,assertedId:I.assertedId}:"microsoftTeamsUser"===A&&T?{kind:"microsoftTeamsUser",microsoftTeamsUserId:qr({microsoftTeamsUser:T},"userId"),isAnonymous:qr({microsoftTeamsUser:T},"isAnonymous"),cloud:qr({microsoftTeamsUser:T},"cloud"),rawId:qr({microsoftTeamsUser:y},"rawId")}:"microsoftTeamsApp"===A&&D?{kind:"microsoftTeamsApp",teamsAppId:qr({microsoftTeamsApp:D},"appId"),cloud:qr({microsoftTeamsApp:D},"cloud"),rawId:qr({microsoftTeamsApp:y},"rawId")}:"teamsExtensionUser"===A&&M?{kind:"teamsExtensionUser",userId:qr({teamsExtensionUser:M},"userId"),tenantId:qr({teamsExtensionUser:M},"tenantId"),resourceId:qr({teamsExtensionUser:M},"resourceId"),cloud:qr({teamsExtensionUser:M},"cloud"),rawId:qr({teamsExtensionUser:y},"rawId")}:{kind:"unknown",id:qr({unknown:y},"rawId")}},YN=y=>{const{id:_}=y,S=Ii(y,["id"]);return Object.assign(Object.assign({},S),{communicationIdentifier:XN(_)})},R0=y=>{const{communicationIdentifier:_}=y,S=Ii(y,["communicationIdentifier"]);return Object.assign(Object.assign({},S),{id:fd(_)})},K7=y=>{const{participants:_,initiatorCommunicationIdentifier:S}=y,C=Ii(y,["participants","initiatorCommunicationIdentifier"]);let T=Object.assign({},C);if(S){const D=fd(S);T=Object.assign(Object.assign({},T),{initiator:D})}return _&&(T=Object.assign(Object.assign({},T),{participants:null==_?void 0:_.map(D=>R0(D))})),T},Sp=y=>{const{content:_,senderCommunicationIdentifier:S}=y,C=Ii(y,["content","senderCommunicationIdentifier"]);let T=Object.assign({},C);if(_&&(T=Object.assign(Object.assign({},T),{content:K7(_)})),S){const D=fd(S);T=Object.assign(Object.assign({},T),{sender:D})}return T},J7=y=>{if("threadCreationDate"===y.kind||"none"===y.kind)return y;throw new Error("Retention Policy ".concat(y.kind," is not supported"))},ZN=y=>{const{createdByCommunicationIdentifier:_,retentionPolicy:S}=y,C=Ii(y,["createdByCommunicationIdentifier","retentionPolicy"]);let T=Object.assign({},C);return _&&(T=Object.assign(Object.assign({},T),{createdBy:fd(_)})),S&&(T=Object.assign(Object.assign({},T),{retentionPolicy:J7(S)})),T},eO=y=>{const{senderCommunicationIdentifier:_}=y,S=Ii(y,["senderCommunicationIdentifier"]);return Object.assign(Object.assign({},S),{sender:fd(_)})};var P0=Se(114);const Cn=(0,Se(838).y)({namespace:"Azure.Communication",packageName:"@azure/communication-chat",packageVersion:"1.6.0"}),N0={type:{name:"Composite",className:"ChatMessageReadReceiptsCollection",modelProperties:{value:{serializedName:"value",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatMessageReadReceipt"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},tK={type:{name:"Composite",className:"ChatMessageReadReceipt",modelProperties:{senderCommunicationIdentifier:{serializedName:"senderCommunicationIdentifier",type:{name:"Composite",className:"CommunicationIdentifierModel"}},chatMessageId:{serializedName:"chatMessageId",required:!0,type:{name:"String"}},readOn:{serializedName:"readOn",required:!0,type:{name:"DateTime"}}}}},tO={type:{name:"Composite",className:"CommunicationIdentifierModel",modelProperties:{kind:{serializedName:"kind",type:{name:"String"}},rawId:{serializedName:"rawId",type:{name:"String"}},communicationUser:{serializedName:"communicationUser",type:{name:"Composite",className:"CommunicationUserIdentifierModel"}},phoneNumber:{serializedName:"phoneNumber",type:{name:"Composite",className:"PhoneNumberIdentifierModel"}},microsoftTeamsUser:{serializedName:"microsoftTeamsUser",type:{name:"Composite",className:"MicrosoftTeamsUserIdentifierModel"}},microsoftTeamsApp:{serializedName:"microsoftTeamsApp",type:{name:"Composite",className:"MicrosoftTeamsAppIdentifierModel"}}}}},nK={type:{name:"Composite",className:"CommunicationUserIdentifierModel",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}}}}},rK={type:{name:"Composite",className:"PhoneNumberIdentifierModel",modelProperties:{value:{serializedName:"value",required:!0,type:{name:"String"}}}}},oK={type:{name:"Composite",className:"MicrosoftTeamsUserIdentifierModel",modelProperties:{userId:{serializedName:"userId",required:!0,type:{name:"String"}},isAnonymous:{serializedName:"isAnonymous",type:{name:"Boolean"}},cloud:{serializedName:"cloud",type:{name:"String"}}}}},iK={type:{name:"Composite",className:"MicrosoftTeamsAppIdentifierModel",modelProperties:{appId:{serializedName:"appId",required:!0,type:{name:"String"}},cloud:{serializedName:"cloud",type:{name:"String"}}}}},Et={type:{name:"Composite",className:"CommunicationErrorResponse",modelProperties:{error:{serializedName:"error",type:{name:"Composite",className:"ChatError"}}}}},sK={type:{name:"Composite",className:"ChatError",modelProperties:{code:{serializedName:"code",required:!0,type:{name:"String"}},message:{serializedName:"message",required:!0,type:{name:"String"}},target:{serializedName:"target",readOnly:!0,type:{name:"String"}},details:{serializedName:"details",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatError"}}}},innerError:{serializedName:"innererror",type:{name:"Composite",className:"ChatError"}}}}},nO={type:{name:"Composite",className:"SendReadReceiptRequest",modelProperties:{chatMessageId:{serializedName:"chatMessageId",required:!0,type:{name:"String"}}}}},rO={type:{name:"Composite",className:"SendChatMessageRequest",modelProperties:{content:{serializedName:"content",required:!0,type:{name:"String"}},senderDisplayName:{serializedName:"senderDisplayName",type:{name:"String"}},type:{serializedName:"type",type:{name:"Enum",allowedValues:["text","html","topicUpdated","participantAdded","participantRemoved"]}},metadata:{serializedName:"metadata",type:{name:"Dictionary",value:{type:{name:"String"}}}}}}},oO={type:{name:"Composite",className:"SendChatMessageResult",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}}}}},O0={type:{name:"Composite",className:"ChatMessagesCollection",modelProperties:{value:{serializedName:"value",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatMessage"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},iO={type:{name:"Composite",className:"ChatMessage",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}},type:{serializedName:"type",required:!0,type:{name:"Enum",allowedValues:["text","html","topicUpdated","participantAdded","participantRemoved"]}},sequenceId:{serializedName:"sequenceId",required:!0,type:{name:"String"}},version:{serializedName:"version",required:!0,type:{name:"String"}},content:{serializedName:"content",type:{name:"Composite",className:"ChatMessageContent"}},senderDisplayName:{serializedName:"senderDisplayName",type:{name:"String"}},createdOn:{serializedName:"createdOn",required:!0,type:{name:"DateTime"}},senderCommunicationIdentifier:{serializedName:"senderCommunicationIdentifier",type:{name:"Composite",className:"CommunicationIdentifierModel"}},deletedOn:{serializedName:"deletedOn",type:{name:"DateTime"}},editedOn:{serializedName:"editedOn",type:{name:"DateTime"}},metadata:{serializedName:"metadata",type:{name:"Dictionary",value:{type:{name:"String"}}}}}}},aK={type:{name:"Composite",className:"ChatMessageContent",modelProperties:{message:{serializedName:"message",type:{name:"String"}},topic:{serializedName:"topic",type:{name:"String"}},participants:{serializedName:"participants",type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatParticipant"}}}},attachments:{serializedName:"attachments",type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatAttachment"}}}},initiatorCommunicationIdentifier:{serializedName:"initiatorCommunicationIdentifier",type:{name:"Composite",className:"CommunicationIdentifierModel"}}}}},cK={type:{name:"Composite",className:"ChatParticipant",modelProperties:{communicationIdentifier:{serializedName:"communicationIdentifier",type:{name:"Composite",className:"CommunicationIdentifierModel"}},displayName:{serializedName:"displayName",type:{name:"String"}},shareHistoryTime:{serializedName:"shareHistoryTime",type:{name:"DateTime"}},metadata:{serializedName:"metadata",type:{name:"Dictionary",value:{type:{name:"String"}}}}}}},lK={type:{name:"Composite",className:"ChatAttachment",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}},attachmentType:{serializedName:"attachmentType",required:!0,type:{name:"Enum",allowedValues:["image","file"]}},name:{serializedName:"name",type:{name:"String"}},url:{serializedName:"url",type:{name:"String"}},previewUrl:{serializedName:"previewUrl",type:{name:"String"}}}}},sO={type:{name:"Composite",className:"UpdateChatMessageRequest",modelProperties:{content:{serializedName:"content",type:{name:"String"}},metadata:{serializedName:"metadata",type:{name:"Dictionary",value:{type:{name:"String"}}}}}}},k0={type:{name:"Composite",className:"ChatParticipantsCollection",modelProperties:{value:{serializedName:"value",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatParticipant"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},aO={type:{name:"Composite",className:"AddChatParticipantsRequest",modelProperties:{participants:{serializedName:"participants",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatParticipant"}}}}}}},cO={type:{name:"Composite",className:"AddChatParticipantsResult",modelProperties:{invalidParticipants:{serializedName:"invalidParticipants",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatError"}}}}}}},lO={type:{name:"Composite",className:"CreateChatThreadRequest",modelProperties:{topic:{serializedName:"topic",required:!0,type:{name:"String"}},participants:{serializedName:"participants",type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatParticipant"}}}},metadata:{serializedName:"metadata",type:{name:"Dictionary",value:{type:{name:"String"}}}},retentionPolicy:{serializedName:"retentionPolicy",type:{name:"Composite",className:"ChatRetentionPolicy"}}}}},ol={type:{name:"Composite",className:"ChatRetentionPolicy",uberParent:"ChatRetentionPolicy",polymorphicDiscriminator:{serializedName:"kind",clientName:"kind"},modelProperties:{kind:{serializedName:"kind",required:!0,type:{name:"String"}}}}},uO={type:{name:"Composite",className:"CreateChatThreadResult",modelProperties:{chatThread:{serializedName:"chatThread",type:{name:"Composite",className:"ChatThreadProperties"}},invalidParticipants:{serializedName:"invalidParticipants",readOnly:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatError"}}}}}}},dO={type:{name:"Composite",className:"ChatThreadProperties",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}},topic:{serializedName:"topic",required:!0,type:{name:"String"}},createdOn:{serializedName:"createdOn",required:!0,type:{name:"DateTime"}},createdByCommunicationIdentifier:{serializedName:"createdByCommunicationIdentifier",type:{name:"Composite",className:"CommunicationIdentifierModel"}},deletedOn:{serializedName:"deletedOn",type:{name:"DateTime"}},metadata:{serializedName:"metadata",type:{name:"Dictionary",value:{type:{name:"String"}}}},retentionPolicy:{serializedName:"retentionPolicy",type:{name:"Composite",className:"ChatRetentionPolicy"}}}}},x0={type:{name:"Composite",className:"ChatThreadsItemCollection",modelProperties:{value:{serializedName:"value",required:!0,type:{name:"Sequence",element:{type:{name:"Composite",className:"ChatThreadItem"}}}},nextLink:{serializedName:"nextLink",readOnly:!0,type:{name:"String"}}}}},uK={type:{name:"Composite",className:"ChatThreadItem",modelProperties:{id:{serializedName:"id",required:!0,type:{name:"String"}},topic:{serializedName:"topic",required:!0,type:{name:"String"}},deletedOn:{serializedName:"deletedOn",type:{name:"DateTime"}},lastMessageReceivedOn:{serializedName:"lastMessageReceivedOn",readOnly:!0,type:{name:"DateTime"}}}}},fO={type:{name:"Composite",className:"UpdateChatThreadRequest",modelProperties:{topic:{serializedName:"topic",type:{name:"String"}},metadata:{serializedName:"metadata",type:{name:"Dictionary",value:{type:{name:"String"}}}},retentionPolicy:{serializedName:"retentionPolicy",type:{name:"Composite",className:"ChatRetentionPolicy"}}}}},hO={type:{name:"Composite",className:"SendTypingNotificationRequest",modelProperties:{senderDisplayName:{serializedName:"senderDisplayName",type:{name:"String"}}}}},pO={serializedName:"threadCreationDate",type:{name:"Composite",className:"ThreadCreationDateRetentionPolicy",uberParent:"ChatRetentionPolicy",polymorphicDiscriminator:ol.type.polymorphicDiscriminator,modelProperties:Object.assign(Object.assign({},ol.type.modelProperties),{deleteThreadAfterDays:{serializedName:"deleteThreadAfterDays",required:!0,type:{name:"Number"}}})}},gO={serializedName:"none",type:{name:"Composite",className:"NoneRetentionPolicy",uberParent:"ChatRetentionPolicy",polymorphicDiscriminator:ol.type.polymorphicDiscriminator,modelProperties:Object.assign({},ol.type.modelProperties)}};let dK={ChatRetentionPolicy:ol,"ChatRetentionPolicy.threadCreationDate":pO,"ChatRetentionPolicy.none":gO};const Sr={parameterPath:"accept",mapper:{defaultValue:"application/json",isConstant:!0,serializedName:"Accept",type:{name:"String"}}},Tr={parameterPath:"endpoint",mapper:{serializedName:"endpoint",required:!0,type:{name:"String"}},skipEncoding:!0},xr={parameterPath:"chatThreadId",mapper:{serializedName:"chatThreadId",required:!0,type:{name:"String"}}},Tp={parameterPath:["options","maxPageSize"],mapper:{serializedName:"maxPageSize",type:{name:"Number"}}},mO={parameterPath:["options","skip"],mapper:{serializedName:"skip",type:{name:"Number"}}},Wr={parameterPath:"apiVersion",mapper:{defaultValue:"2025-03-15",isConstant:!0,serializedName:"api-version",type:{name:"String"}}},il={parameterPath:["options","contentType"],mapper:{defaultValue:"application/json",isConstant:!0,serializedName:"Content-Type",type:{name:"String"}}},fK={parameterPath:"sendReadReceiptRequest",mapper:nO},hK={parameterPath:"sendChatMessageRequest",mapper:rO},yO={parameterPath:["options","startTime"],mapper:{serializedName:"startTime",type:{name:"DateTime"}}},F0={parameterPath:"chatMessageId",mapper:{serializedName:"chatMessageId",required:!0,type:{name:"String"}}},vO={parameterPath:["options","contentType"],mapper:{defaultValue:"application/merge-patch+json",isConstant:!0,serializedName:"Content-Type",type:{name:"String"}}},pK={parameterPath:"updateChatMessageRequest",mapper:sO},gK={parameterPath:"participantCommunicationIdentifier",mapper:tO},mK={parameterPath:"addChatParticipantsRequest",mapper:aO},yK={parameterPath:"updateChatThreadRequest",mapper:fO},vK={parameterPath:["options","sendTypingNotificationRequest"],mapper:hO},Ep={parameterPath:"nextLink",mapper:{serializedName:"nextLink",required:!0,type:{name:"String"}},skipEncoding:!0},_K={parameterPath:"createChatThreadRequest",mapper:lO};class wK{constructor(_){this.client=_}listChatReadReceipts(_,S){var C=this;return(0,pe.A)(function*(){return Cn.withSpan("ChatApiClient.listChatReadReceipts",null!=S?S:{},function(){var T=(0,pe.A)(function*(D){return C.client.sendOperationRequest({chatThreadId:_,options:D},bK)});return function(D){return T.apply(this,arguments)}}())})()}sendChatReadReceipt(_,S,C){var T=this;return(0,pe.A)(function*(){return Cn.withSpan("ChatApiClient.sendChatReadReceipt",null!=C?C:{},function(){var D=(0,pe.A)(function*(I){return T.client.sendOperationRequest({chatThreadId:_,sendReadReceiptRequest:S,options:I},SK)});return function(I){return D.apply(this,arguments)}}())})()}sendChatMessage(_,S,C){var T=this;return(0,pe.A)(function*(){return Cn.withSpan("ChatApiClient.sendChatMessage",null!=C?C:{},function(){var D=(0,pe.A)(function*(I){return T.client.sendOperationRequest({chatThreadId:_,sendChatMessageRequest:S,options:I},TK)});return function(I){return D.apply(this,arguments)}}())})()}listChatMessages(_,S){var C=this;return(0,pe.A)(function*(){return Cn.withSpan("ChatApiClient.listChatMessages",null!=S?S:{},function(){var T=(0,pe.A)(function*(D){return C.client.sendOperationRequest({chatThreadId:_,options:D},EK)});return function(D){return T.apply(this,arguments)}}())})()}getChatMessage(_,S,C){var T=this;return(0,pe.A)(function*(){return Cn.withSpan("ChatApiClient.getChatMessage",null!=C?C:{},function(){var D=(0,pe.A)(function*(I){return T.client.sendOperationRequest({chatThreadId:_,chatMessageId:S,options:I},DK)});return function(I){return D.apply(this,arguments)}}())})()}updateChatMessage(_,S,C,T){var D=this;return(0,pe.A)(function*(){return Cn.withSpan("ChatApiClient.updateChatMessage",null!=T?T:{},function(){var I=(0,pe.A)(function*(M){return D.client.sendOperationRequest({chatThreadId:_,chatMessageId:S,updateChatMessageRequest:C,options:M},IK)});return function(M){return I.apply(this,arguments)}}())})()}deleteChatMessage(_,S,C){var T=this;return(0,pe.A)(function*(){return Cn.withSpan("ChatApiClient.deleteChatMessage",null!=C?C:{},function(){var D=(0,pe.A)(function*(I){return T.client.sendOperationRequest({chatThreadId:_,chatMessageId:S,options:I},MK)});return function(I){return D.apply(this,arguments)}}())})()}listChatParticipants(_,S){var C=this;return(0,pe.A)(function*(){return Cn.withSpan("ChatApiClient.listChatParticipants",null!=S?S:{},function(){var T=(0,pe.A)(function*(D){return C.client.sendOperationRequest({chatThreadId:_,options:D},AK)});return function(D){return T.apply(this,arguments)}}())})()}removeChatParticipant(_,S,C){var T=this;return(0,pe.A)(function*(){return Cn.withSpan("ChatApiClient.removeChatParticipant",null!=C?C:{},function(){var D=(0,pe.A)(function*(I){return T.client.sendOperationRequest({chatThreadId:_,participantCommunicationIdentifier:S,options:I},RK)});return function(I){return D.apply(this,arguments)}}())})()}addChatParticipants(_,S,C){var T=this;return(0,pe.A)(function*(){return Cn.withSpan("ChatApiClient.addChatParticipants",null!=C?C:{},function(){var D=(0,pe.A)(function*(I){return T.client.sendOperationRequest({chatThreadId:_,addChatParticipantsRequest:S,options:I},PK)});return function(I){return D.apply(this,arguments)}}())})()}updateChatThreadProperties(_,S,C){var T=this;return(0,pe.A)(function*(){return Cn.withSpan("ChatApiClient.updateChatThreadProperties",null!=C?C:{},function(){var D=(0,pe.A)(function*(I){return T.client.sendOperationRequest({chatThreadId:_,updateChatThreadRequest:S,options:I},NK)});return function(I){return D.apply(this,arguments)}}())})()}getChatThreadProperties(_,S){var C=this;return(0,pe.A)(function*(){return Cn.withSpan("ChatApiClient.getChatThreadProperties",null!=S?S:{},function(){var T=(0,pe.A)(function*(D){return C.client.sendOperationRequest({chatThreadId:_,options:D},OK)});return function(D){return T.apply(this,arguments)}}())})()}sendTypingNotification(_,S){var C=this;return(0,pe.A)(function*(){return Cn.withSpan("ChatApiClient.sendTypingNotification",null!=S?S:{},function(){var T=(0,pe.A)(function*(D){return C.client.sendOperationRequest({chatThreadId:_,options:D},kK)});return function(D){return T.apply(this,arguments)}}())})()}listChatReadReceiptsNext(_,S,C){var T=this;return(0,pe.A)(function*(){return Cn.withSpan("ChatApiClient.listChatReadReceiptsNext",null!=C?C:{},function(){var D=(0,pe.A)(function*(I){return T.client.sendOperationRequest({chatThreadId:_,nextLink:S,options:I},xK)});return function(I){return D.apply(this,arguments)}}())})()}listChatMessagesNext(_,S,C){var T=this;return(0,pe.A)(function*(){return Cn.withSpan("ChatApiClient.listChatMessagesNext",null!=C?C:{},function(){var D=(0,pe.A)(function*(I){return T.client.sendOperationRequest({chatThreadId:_,nextLink:S,options:I},FK)});return function(I){return D.apply(this,arguments)}}())})()}listChatParticipantsNext(_,S,C){var T=this;return(0,pe.A)(function*(){return Cn.withSpan("ChatApiClient.listChatParticipantsNext",null!=C?C:{},function(){var D=(0,pe.A)(function*(I){return T.client.sendOperationRequest({chatThreadId:_,nextLink:S,options:I},LK)});return function(I){return D.apply(this,arguments)}}())})()}}const Gr=P0.createSerializer(je,!1),bK={path:"/chat/threads/{chatThreadId}/readReceipts",httpMethod:"GET",responses:{200:{bodyMapper:N0},401:{bodyMapper:Et,isError:!0},403:{bodyMapper:Et,isError:!0},429:{bodyMapper:Et,isError:!0},503:{bodyMapper:Et,isError:!0}},queryParameters:[Tp,mO,Wr],urlParameters:[Tr,xr],headerParameters:[Sr],serializer:Gr},SK={path:"/chat/threads/{chatThreadId}/readReceipts",httpMethod:"POST",responses:{200:{},401:{bodyMapper:Et,isError:!0},403:{bodyMapper:Et,isError:!0},429:{bodyMapper:Et,isError:!0},503:{bodyMapper:Et,isError:!0}},requestBody:fK,queryParameters:[Wr],urlParameters:[Tr,xr],headerParameters:[Sr,il],mediaType:"json",serializer:Gr},TK={path:"/chat/threads/{chatThreadId}/messages",httpMethod:"POST",responses:{201:{bodyMapper:oO},401:{bodyMapper:Et,isError:!0},403:{bodyMapper:Et,isError:!0},429:{bodyMapper:Et,isError:!0},503:{bodyMapper:Et,isError:!0}},requestBody:hK,queryParameters:[Wr],urlParameters:[Tr,xr],headerParameters:[Sr,il],mediaType:"json",serializer:Gr},EK={path:"/chat/threads/{chatThreadId}/messages",httpMethod:"GET",responses:{200:{bodyMapper:O0},401:{bodyMapper:Et,isError:!0},403:{bodyMapper:Et,isError:!0},429:{bodyMapper:Et,isError:!0},503:{bodyMapper:Et,isError:!0}},queryParameters:[Tp,Wr,yO],urlParameters:[Tr,xr],headerParameters:[Sr],serializer:Gr},DK={path:"/chat/threads/{chatThreadId}/messages/{chatMessageId}",httpMethod:"GET",responses:{200:{bodyMapper:iO},401:{bodyMapper:Et,isError:!0},403:{bodyMapper:Et,isError:!0},429:{bodyMapper:Et,isError:!0},503:{bodyMapper:Et,isError:!0}},queryParameters:[Wr],urlParameters:[Tr,xr,F0],headerParameters:[Sr],serializer:Gr},IK={path:"/chat/threads/{chatThreadId}/messages/{chatMessageId}",httpMethod:"PATCH",responses:{204:{},401:{bodyMapper:Et,isError:!0},403:{bodyMapper:Et,isError:!0},429:{bodyMapper:Et,isError:!0},503:{bodyMapper:Et,isError:!0}},requestBody:pK,queryParameters:[Wr],urlParameters:[Tr,xr,F0],headerParameters:[Sr,vO],mediaType:"json",serializer:Gr},MK={path:"/chat/threads/{chatThreadId}/messages/{chatMessageId}",httpMethod:"DELETE",responses:{204:{},401:{bodyMapper:Et,isError:!0},403:{bodyMapper:Et,isError:!0},429:{bodyMapper:Et,isError:!0},503:{bodyMapper:Et,isError:!0}},queryParameters:[Wr],urlParameters:[Tr,xr,F0],headerParameters:[Sr],serializer:Gr},AK={path:"/chat/threads/{chatThreadId}/participants",httpMethod:"GET",responses:{200:{bodyMapper:k0},401:{bodyMapper:Et,isError:!0},403:{bodyMapper:Et,isError:!0},429:{bodyMapper:Et,isError:!0},503:{bodyMapper:Et,isError:!0}},queryParameters:[Tp,mO,Wr],urlParameters:[Tr,xr],headerParameters:[Sr],serializer:Gr},RK={path:"/chat/threads/{chatThreadId}/participants/:remove",httpMethod:"POST",responses:{204:{},401:{bodyMapper:Et,isError:!0},403:{bodyMapper:Et,isError:!0},429:{bodyMapper:Et,isError:!0},503:{bodyMapper:Et,isError:!0}},requestBody:gK,queryParameters:[Wr],urlParameters:[Tr,xr],headerParameters:[Sr,il],mediaType:"json",serializer:Gr},PK={path:"/chat/threads/{chatThreadId}/participants/:add",httpMethod:"POST",responses:{201:{bodyMapper:cO},401:{bodyMapper:Et,isError:!0},403:{bodyMapper:Et,isError:!0},429:{bodyMapper:Et,isError:!0},503:{bodyMapper:Et,isError:!0}},requestBody:mK,queryParameters:[Wr],urlParameters:[Tr,xr],headerParameters:[Sr,il],mediaType:"json",serializer:Gr},NK={path:"/chat/threads/{chatThreadId}",httpMethod:"PATCH",responses:{204:{},401:{bodyMapper:Et,isError:!0},403:{bodyMapper:Et,isError:!0},429:{bodyMapper:Et,isError:!0},503:{bodyMapper:Et,isError:!0}},requestBody:yK,queryParameters:[Wr],urlParameters:[Tr,xr],headerParameters:[Sr,vO],mediaType:"json",serializer:Gr},OK={path:"/chat/threads/{chatThreadId}",httpMethod:"GET",responses:{200:{bodyMapper:dO},401:{bodyMapper:Et,isError:!0},403:{bodyMapper:Et,isError:!0},429:{bodyMapper:Et,isError:!0},503:{bodyMapper:Et,isError:!0}},queryParameters:[Wr],urlParameters:[Tr,xr],headerParameters:[Sr],serializer:Gr},kK={path:"/chat/threads/{chatThreadId}/typing",httpMethod:"POST",responses:{200:{},401:{bodyMapper:Et,isError:!0},403:{bodyMapper:Et,isError:!0},429:{bodyMapper:Et,isError:!0},503:{bodyMapper:Et,isError:!0}},requestBody:vK,queryParameters:[Wr],urlParameters:[Tr,xr],headerParameters:[Sr,il],mediaType:"json",serializer:Gr},xK={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:N0},401:{bodyMapper:Et,isError:!0},403:{bodyMapper:Et,isError:!0},429:{bodyMapper:Et,isError:!0},503:{bodyMapper:Et,isError:!0}},urlParameters:[Tr,xr,Ep],headerParameters:[Sr],serializer:Gr},FK={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:O0},401:{bodyMapper:Et,isError:!0},403:{bodyMapper:Et,isError:!0},429:{bodyMapper:Et,isError:!0},503:{bodyMapper:Et,isError:!0}},urlParameters:[Tr,xr,Ep],headerParameters:[Sr],serializer:Gr},LK={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:k0},401:{bodyMapper:Et,isError:!0},403:{bodyMapper:Et,isError:!0},429:{bodyMapper:Et,isError:!0},503:{bodyMapper:Et,isError:!0}},urlParameters:[Tr,xr,Ep],headerParameters:[Sr],serializer:Gr};class UK{constructor(_){this.client=_}createChatThread(_,S){var C=this;return(0,pe.A)(function*(){return Cn.withSpan("ChatApiClient.createChatThread",null!=S?S:{},function(){var T=(0,pe.A)(function*(D){return C.client.sendOperationRequest({createChatThreadRequest:_,options:D},VK)});return function(D){return T.apply(this,arguments)}}())})()}listChatThreads(_){var S=this;return(0,pe.A)(function*(){return Cn.withSpan("ChatApiClient.listChatThreads",null!=_?_:{},function(){var C=(0,pe.A)(function*(T){return S.client.sendOperationRequest({options:T},jK)});return function(T){return C.apply(this,arguments)}}())})()}deleteChatThread(_,S){var C=this;return(0,pe.A)(function*(){return Cn.withSpan("ChatApiClient.deleteChatThread",null!=S?S:{},function(){var T=(0,pe.A)(function*(D){return C.client.sendOperationRequest({chatThreadId:_,options:D},BK)});return function(D){return T.apply(this,arguments)}}())})()}listChatThreadsNext(_,S){var C=this;return(0,pe.A)(function*(){return Cn.withSpan("ChatApiClient.listChatThreadsNext",null!=S?S:{},function(){var T=(0,pe.A)(function*(D){return C.client.sendOperationRequest({nextLink:_,options:D},$K)});return function(D){return T.apply(this,arguments)}}())})()}}const Dp=P0.createSerializer(je,!1),VK={path:"/chat/threads",httpMethod:"POST",responses:{201:{bodyMapper:uO},401:{bodyMapper:Et,isError:!0},403:{bodyMapper:Et,isError:!0},429:{bodyMapper:Et,isError:!0},503:{bodyMapper:Et,isError:!0}},requestBody:_K,queryParameters:[Wr],urlParameters:[Tr],headerParameters:[Sr,il,{parameterPath:["options","repeatabilityRequestId"],mapper:{serializedName:"repeatability-request-id",type:{name:"String"}}}],mediaType:"json",serializer:Dp},jK={path:"/chat/threads",httpMethod:"GET",responses:{200:{bodyMapper:x0},401:{bodyMapper:Et,isError:!0},403:{bodyMapper:Et,isError:!0},429:{bodyMapper:Et,isError:!0},503:{bodyMapper:Et,isError:!0}},queryParameters:[Tp,Wr,yO],urlParameters:[Tr],headerParameters:[Sr],serializer:Dp},BK={path:"/chat/threads/{chatThreadId}",httpMethod:"DELETE",responses:{204:{},401:{bodyMapper:Et,isError:!0},403:{bodyMapper:Et,isError:!0},429:{bodyMapper:Et,isError:!0},503:{bodyMapper:Et,isError:!0}},queryParameters:[Wr],urlParameters:[Tr,xr],headerParameters:[Sr],serializer:Dp},$K={path:"{nextLink}",httpMethod:"GET",responses:{200:{bodyMapper:x0},401:{bodyMapper:Et,isError:!0},403:{bodyMapper:Et,isError:!0},429:{bodyMapper:Et,isError:!0},503:{bodyMapper:Et,isError:!0}},urlParameters:[Tr,Ep],headerParameters:[Sr],serializer:Dp};class _O extends P0.ServiceClient{constructor(_,S){var C,T;if(void 0===_)throw new Error("'endpoint' cannot be null");S||(S={});const I="azsdk-js-communication-chat/1.6.0",M=S.userAgentOptions&&S.userAgentOptions.userAgentPrefix?"".concat(S.userAgentOptions.userAgentPrefix," ").concat(I):"".concat(I);super(Object.assign(Object.assign(Object.assign({},{requestContentType:"application/json; charset=utf-8"}),S),{userAgentOptions:{userAgentPrefix:M},endpoint:null!==(T=null!==(C=S.endpoint)&&void 0!==C?C:S.baseUri)&&void 0!==T?T:"{endpoint}"})),this.endpoint=_,this.apiVersion=S.apiVersion||"2025-03-15",this.chatThread=new wK(this),this.chat=new UK(this),this.addCustomApiVersionPolicy(S.apiVersion)}addCustomApiVersionPolicy(_){_&&this.pipeline.addPolicy({name:"CustomApiVersionPolicy",sendRequest:(C,T)=>(0,pe.A)(function*(){const D=C.url.split("?");if(D.length>1){const I=D[1].split("&").map(M=>M.indexOf("api-version")>-1?"api-version="+_:M);C.url=D[0]+"?"+I.join("&")}return T(C)})()})}}const hd=(0,Se(992).KV)("communication-chat"),CO=y=>(0,rl.bearerTokenAuthenticationPolicy)({credential:{getToken:(S,C)=>y.getToken({abortSignal:null==C?void 0:C.abortSignal})},scopes:[]});class qK{constructor(_,S,C,T={}){this.endpoint=_,this.timeOfLastTypingRequest=void 0,this.threadId=S,this.tokenCredential=C;const D=Object.assign(Object.assign({},T),{loggingOptions:{logger:hd.info}});this.client=new _O(this.endpoint,Object.assign({endpoint:this.endpoint},D));const I=CO(this.tokenCredential);this.client.pipeline.addPolicy(I)}getProperties(_={}){var S=this;return Cn.withSpan("ChatClient-GetProperties",_,function(){var C=(0,pe.A)(function*(T){const D=yield S.client.chatThread.getChatThreadProperties(S.threadId,T);return ZN(D)});return function(T){return C.apply(this,arguments)}}())}updateTopic(_,S={}){var C=this;return Cn.withSpan("ChatThreadClient-UpdateTopic",S,function(){var T=(0,pe.A)(function*(D){yield C.client.chatThread.updateChatThreadProperties(C.threadId,{topic:_},D)});return function(D){return T.apply(this,arguments)}}())}updateProperties(_={}){var S=this;return Cn.withSpan("ChatThreadClient-UpdateProperties",_,function(){var C=(0,pe.A)(function*(T){yield S.client.chatThread.updateChatThreadProperties(S.threadId,_,T)});return function(T){return C.apply(this,arguments)}}())}sendMessage(_,S={}){var C=this;return Cn.withSpan("ChatThreadClient-SendMessage",S,function(){var T=(0,pe.A)(function*(D){return C.timeOfLastTypingRequest=void 0,yield C.client.chatThread.sendChatMessage(C.threadId,Object.assign(Object.assign({},_),S),D)});return function(D){return T.apply(this,arguments)}}())}getMessage(_,S={}){var C=this;return Cn.withSpan("ChatThreadClient-GetMessage",S,function(){var T=(0,pe.A)(function*(D){const I=yield C.client.chatThread.getChatMessage(C.threadId,_,D);return Sp(I)});return function(D){return T.apply(this,arguments)}}())}listMessagesPage(_){return Mi(this,arguments,function*(C,T={}){if(!C.continuationToken){const D=yield Sn(this.client.chatThread.listChatMessages(this.threadId,T));C.continuationToken=D.nextLink,D.value&&(yield yield Sn(D.value.map(Sp,this)))}for(;C.continuationToken;){const D=yield Sn(this.client.chatThread.listChatMessagesNext(this.threadId,C.continuationToken,T));if(C.continuationToken=D.nextLink,!D.value)break;yield yield Sn(D.value.map(Sp,this))}})}listMessagesAll(_){return Mi(this,arguments,function*(){var C,T,D,I;try{for(var R,M=!0,A=Ai(this.listMessagesPage({},_));!(C=(R=yield Sn(A.next())).done);M=!0)I=R.value,M=!1,yield Sn(yield*yd(xu(Ai(I))))}catch(N){T={error:N}}finally{try{!M&&!C&&(D=A.return)&&(yield Sn(D.call(A)))}finally{if(T)throw T.error}}})}listMessages(_={}){const{span:S,updatedOptions:C}=Cn.startSpan("ChatThreadClient-ListMessages",_);try{const T=this.listMessagesAll(C);return{next:()=>T.next(),[Symbol.asyncIterator](){return this},byPage:(D={})=>this.listMessagesPage(D,C)}}catch(T){throw S.setStatus({status:"error",error:T}),T}finally{S.end()}}deleteMessage(_,S={}){var C=this;return Cn.withSpan("ChatThreadClient-DeleteMessage",S,function(){var T=(0,pe.A)(function*(D){yield C.client.chatThread.deleteChatMessage(C.threadId,_,D)});return function(D){return T.apply(this,arguments)}}())}updateMessage(_){var S=this;return(0,pe.A)(function*(C,T={}){return Cn.withSpan("ChatThreadClient-UpdateMessage",T,function(){var D=(0,pe.A)(function*(I){yield S.client.chatThread.updateChatMessage(S.threadId,C,T,I)});return function(I){return D.apply(this,arguments)}}())}).apply(this,arguments)}addParticipants(_){var S=this;return(0,pe.A)(function*(C,T={}){return Cn.withSpan("ChatThreadClient-AddParticipants",T,function(){var D=(0,pe.A)(function*(I){return yield S.client.chatThread.addChatParticipants(S.threadId,(y=>{var _;return{participants:null===(_=y.participants)||void 0===_?void 0:_.map(S=>YN(S))}})(C),I)});return function(I){return D.apply(this,arguments)}}())}).apply(this,arguments)}listParticipantsPage(_){return Mi(this,arguments,function*(C,T={}){if(!C.continuationToken){const D=yield Sn(this.client.chatThread.listChatParticipants(this.threadId,T));C.continuationToken=D.nextLink,D.value&&(yield yield Sn(D.value.map(R0,this)))}for(;C.continuationToken;){const D=yield Sn(this.client.chatThread.listChatParticipantsNext(this.threadId,C.continuationToken,T));if(C.continuationToken=D.nextLink,!D.value)break;yield yield Sn(D.value.map(R0,this))}})}listParticipantsAll(_){return Mi(this,arguments,function*(){var C,T,D,I;try{for(var R,M=!0,A=Ai(this.listParticipantsPage({},_));!(C=(R=yield Sn(A.next())).done);M=!0)I=R.value,M=!1,yield Sn(yield*yd(xu(Ai(I))))}catch(N){T={error:N}}finally{try{!M&&!C&&(D=A.return)&&(yield Sn(D.call(A)))}finally{if(T)throw T.error}}})}listParticipants(_={}){const{span:S,updatedOptions:C}=Cn.startSpan("ChatThreadClient-ListParticipants",_);try{const T=this.listParticipantsAll(C);return{next:()=>T.next(),[Symbol.asyncIterator](){return this},byPage:(D={})=>this.listParticipantsPage(D,C)}}catch(T){throw S.setStatus({status:"error",error:T}),T}finally{S.end()}}removeParticipant(_){var S=this;return(0,pe.A)(function*(C,T={}){return Cn.withSpan("ChatThreadClient-RemoveParticipant",T,function(){var D=(0,pe.A)(function*(I){yield S.client.chatThread.removeChatParticipant(S.threadId,XN(C),I)});return function(I){return D.apply(this,arguments)}}())}).apply(this,arguments)}sendTypingNotification(){var _=this;return(0,pe.A)(function*(S={}){return Cn.withSpan("ChatThreadClient-SendTypingNotification",S,function(){var C=(0,pe.A)(function*(T){const D=new Date,{senderDisplayName:I}=T,M=Ii(T,["senderDisplayName"]);return _.canPostTypingNotification(D)?(_.timeOfLastTypingRequest=D,yield _.client.chatThread.sendTypingNotification(_.threadId,Object.assign({sendTypingNotificationRequest:{senderDisplayName:I}},M)),!0):(hd.info("Typing Notification NOT Send. [thread_id=".concat(_.threadId,"]")),!1)});return function(T){return C.apply(this,arguments)}}())}).apply(this,arguments)}sendReadReceipt(_){var S=this;return(0,pe.A)(function*(C,T={}){return Cn.withSpan("ChatThreadClient-SendReadReceipt",T,function(){var D=(0,pe.A)(function*(I){yield S.client.chatThread.sendChatReadReceipt(S.threadId,C,I)});return function(I){return D.apply(this,arguments)}}())}).apply(this,arguments)}listReadReceiptsPage(_){return Mi(this,arguments,function*(C,T={}){if(!C.continuationToken){const D=yield Sn(this.client.chatThread.listChatReadReceipts(this.threadId,T));C.continuationToken=D.nextLink,D.value&&(yield yield Sn(D.value.map(eO,this)))}for(;C.continuationToken;){const D=yield Sn(this.client.chatThread.listChatReadReceiptsNext(this.threadId,C.continuationToken,T));if(C.continuationToken=D.nextLink,!D.value)break;yield yield Sn(D.value.map(eO,this))}})}listReadReceiptsAll(_){return Mi(this,arguments,function*(){var C,T,D,I;try{for(var R,M=!0,A=Ai(this.listReadReceiptsPage({},_));!(C=(R=yield Sn(A.next())).done);M=!0)I=R.value,M=!1,yield Sn(yield*yd(xu(Ai(I))))}catch(N){T={error:N}}finally{try{!M&&!C&&(D=A.return)&&(yield Sn(D.call(A)))}finally{if(T)throw T.error}}})}listReadReceipts(_={}){const{span:S,updatedOptions:C}=Cn.startSpan("ChatThreadClient-ListChatReadReceipts",_);try{const T=this.listReadReceiptsAll(C);return{next:()=>T.next(),[Symbol.asyncIterator](){return this},byPage:(D={})=>this.listReadReceiptsPage(D,C)}}catch(T){throw S.setStatus({status:"error",error:T}),T}finally{S.end()}}canPostTypingNotification(_){return!(this.timeOfLastTypingRequest&&_.getTime()-this.timeOfLastTypingRequest.getTime()<8e3&&(hd.info("Typing interval check failed. [last_request=".concat(this.timeOfLastTypingRequest,"]")),1))}}var WK=Se(356);class wO{constructor(_,S,C={}){this.endpoint=_,this.signalingClient=void 0,this.emitter=new WK.EventEmitter,this.isRealtimeNotificationsStarted=!1,this.tokenCredential=S;const T=Object.assign(Object.assign({},C),{loggingOptions:{logger:hd.info}});this.client=new _O(this.endpoint,Object.assign({endpoint:this.endpoint},T));const D=CO(this.tokenCredential);this.client.pipeline.addPolicy(D),this.clientOptions=Object.assign({},C),this.clientOptions.signalingClientOptions=Object.assign(Object.assign({},this.clientOptions.signalingClientOptions),{resourceEndpoint:this.endpoint,gatewayApiVersion:this.client.apiVersion}),this.signalingClient=((y,_,S)=>{var C,T,D,I;return new T0.CommunicationSignalingClient(y,_,{resourceEndpoint:null!==(C=null==S?void 0:S.resourceEndpoint)&&void 0!==C?C:void 0,gatewayApiVersion:null!==(T=null==S?void 0:S.gatewayApiVersion)&&void 0!==T?T:void 0,additionalPolicies:null!==(D=null==S?void 0:S.additionalPolicies)&&void 0!==D?D:void 0,userAgentOptions:null!==(I=null==S?void 0:S.userAgentOptions)&&void 0!==I?I:void 0})})(S,hd,this.clientOptions.signalingClientOptions)}getChatThreadClient(_){return new qK(this.endpoint,_,this.tokenCredential,this.clientOptions)}createChatThread(_){var S=this;return(0,pe.A)(function*(C,T={}){return Cn.withSpan("ChatClient-CreateChatThread",T,function(){var D=(0,pe.A)(function*(I){var M,A;I.idempotencyToken=null!==(M=I.idempotencyToken)&&void 0!==M?M:function GK(){return(0,WN.randomUUID)()}();const R=(y=>{const{idempotencyToken:S}=y,C=Ii(y,["participants","idempotencyToken"]);return Object.assign({repeatabilityRequestId:S},C)})(I);return(y=>{const{chatThread:_}=y,S=Ii(y,["chatThread"]);return _?Object.assign(Object.assign({},S),{chatThread:ZN(_)}):Object.assign({},S)})(yield S.client.chat.createChatThread({topic:C.topic,participants:null===(A=T.participants)||void 0===A?void 0:A.map(O=>YN(O)),metadata:T.metadata,retentionPolicy:T.retentionPolicy},R))});return function(I){return D.apply(this,arguments)}}())}).apply(this,arguments)}listChatThreadsPage(_){return Mi(this,arguments,function*(C,T={}){if(!C.continuationToken){const D=yield Sn(this.client.chat.listChatThreads(T));C.continuationToken=D.nextLink,D.value&&(yield yield Sn(D.value))}for(;C.continuationToken;){const D=yield Sn(this.client.chat.listChatThreadsNext(C.continuationToken,T));if(C.continuationToken=D.nextLink,!D.value)break;yield yield Sn(D.value)}})}listChatThreadsAll(_){return Mi(this,arguments,function*(){var C,T,D,I;try{for(var R,M=!0,A=Ai(this.listChatThreadsPage({},_));!(C=(R=yield Sn(A.next())).done);M=!0)I=R.value,M=!1,yield Sn(yield*yd(xu(Ai(I))))}catch(N){T={error:N}}finally{try{!M&&!C&&(D=A.return)&&(yield Sn(D.call(A)))}finally{if(T)throw T.error}}})}listChatThreads(_={}){const{span:S,updatedOptions:C}=Cn.startSpan("ChatClient-ListChatThreads",_);try{const T=this.listChatThreadsAll(C);return{next:()=>T.next(),[Symbol.asyncIterator](){return this},byPage:(D={})=>this.listChatThreadsPage(D,C)}}catch(T){throw S.setStatus({error:T,status:"error"}),T}finally{S.end()}}deleteChatThread(_){var S=this;return(0,pe.A)(function*(C,T={}){return Cn.withSpan("ChatClient-DeleteChatThread",T,function(){var D=(0,pe.A)(function*(I){yield S.client.chat.deleteChatThread(C,I)});return function(I){return D.apply(this,arguments)}}())}).apply(this,arguments)}startRealtimeNotifications(){var _=this;return(0,pe.A)(function*(){if(void 0===_.signalingClient)throw new Error("Realtime notifications are not supported in node js.");_.isRealtimeNotificationsStarted||(_.isRealtimeNotificationsStarted=!0,yield _.signalingClient.start(),_.subscribeToSignalingEvents())})()}stopRealtimeNotifications(){var _=this;return(0,pe.A)(function*(){if(void 0===_.signalingClient)throw new Error("Realtime notifications are not supported in node js.");_.isRealtimeNotificationsStarted=!1,yield _.signalingClient.stop(),_.emitter.removeAllListeners()})()}on(_,S){if(void 0===this.signalingClient)throw new Error("Realtime notifications are only supported in the browser.");if(!this.isRealtimeNotificationsStarted&&"realTimeNotificationConnected"!==_&&"realTimeNotificationDisconnected"!==_)throw new Error("You must call startRealtimeNotifications before you can subscribe to events.");this.emitter.on(_,S)}off(_,S){if(void 0===this.signalingClient)throw new Error("Realtime notifications are only supported in the browser.");this.emitter.removeListener(_,S)}subscribeToSignalingEvents(){if(void 0===this.signalingClient)throw new Error("Realtime notifications are only supported in the browser.");this.signalingClient.on("connectionChanged",_=>{_===T0.ConnectionState.Connected?this.emitter.emit("realTimeNotificationConnected"):_===T0.ConnectionState.Disconnected&&this.emitter.emit("realTimeNotificationDisconnected")}),this.signalingClient.on("chatMessageReceived",_=>{this.emitter.emit("chatMessageReceived",_)}),this.signalingClient.on("chatMessageEdited",_=>{this.emitter.emit("chatMessageEdited",_)}),this.signalingClient.on("chatMessageDeleted",_=>{this.emitter.emit("chatMessageDeleted",_)}),this.signalingClient.on("typingIndicatorReceived",_=>{this.emitter.emit("typingIndicatorReceived",_)}),this.signalingClient.on("readReceiptReceived",_=>{this.emitter.emit("readReceiptReceived",_)}),this.signalingClient.on("chatThreadCreated",_=>{this.emitter.emit("chatThreadCreated",_)}),this.signalingClient.on("chatThreadDeleted",_=>{this.emitter.emit("chatThreadDeleted",_)}),this.signalingClient.on("chatThreadPropertiesUpdated",_=>{this.emitter.emit("chatThreadPropertiesUpdated",_)}),this.signalingClient.on("participantsAdded",_=>{this.emitter.emit("participantsAdded",_)}),this.signalingClient.on("participantsRemoved",_=>{this.emitter.emit("participantsRemoved",_)})}}const bO=(y,_)=>{const S=JK(y,_);if(S)return S.id;{const C=y.find(T=>T.id!==_&&T.status===mo.ACTIVE);return null==C?void 0:C.id}},JK=(y,_)=>{const S=y.findIndex(C=>C.id===_);if(-1!==S&&y.length>S+1)return y.slice(S+1).find(T=>T.status===mo.ACTIVE)};function xa(y,_){const S="object"==typeof _;return new Promise((C,T)=>{const D=new yo({next:I=>{C(I),D.unsubscribe()},error:T,complete:()=>{S?C(_.defaultValue):T(new Fu)}});y.subscribe(D)})}let SO=(()=>{var y;class _{constructor(C){this.http=C}getAgentWorkItems(){var C=this;return(0,pe.A)(function*(){try{return(yield xa(C.http.get("http://localhost:8080/agentWorkItem")))||[]}catch(T){return console.error("Failed to get agent work items:",T),[]}})()}createAgentWorkItem(C,T){var D=this;return(0,pe.A)(function*(){try{yield xa(D.http.post("http://localhost:8080/agentWorkItem",{id:C,status:T}))}catch(I){console.error("Failed to create agent work item:",I)}})()}updateAgentWorkItem(C,T){var D=this;return(0,pe.A)(function*(){try{yield xa(D.http.put("http://localhost:8080/api/agent/work-items/".concat(C),{status:T}))}catch(I){console.error("Failed to update agent work item:",I)}})()}}return(y=_).\u0275fac=function(C){return new(C||y)(Ft(T_))},y.\u0275prov=At({token:y,factory:y.\u0275fac,providedIn:"root"}),_})();var mo=function(y){return y.ACTIVE="active",y.RESOLVED="resolved",y}(mo||{});let QK=(()=>{var y;class _{constructor(C){this.agentWorkItemService=C,this.threadsSubject=new rr([]),this.selectedThreadIdSubject=new rr(void 0),this.resolvedThreadIdSubject=new rr(void 0),this.isLoadingSubject=new rr(!0),this.threads$=this.threadsSubject.asObservable(),this.selectedThreadId$=this.selectedThreadIdSubject.asObservable(),this.resolvedThreadId$=this.resolvedThreadIdSubject.asObservable(),this.isLoading$=this.isLoadingSubject.asObservable()}initializeChatClient(C,T,D){var I=this;return(0,pe.A)(function*(){try{const M=new KN(T);I.chatClient=new wO(D,M),yield I.chatClient.startRealtimeNotifications(),I.addChatClientListeners(C),yield I.fetchThreads(!0)}catch(M){console.error("Failed to initialize chat client:",M)}})()}addChatClientListeners(C){this.chatClient&&(this.chatClient.on("chatThreadCreated",T=>{this.fetchThreads(!1)}),this.chatClient.on("chatMessageReceived",T=>{const D=T.threadId;this.updateThreadLastMessage(D,new Date),T.sender.communicationUserId!==C&&this.reactivateThreadIfResolved(D),this.emitMessageReceived(D,T)}))}emitMessageReceived(C,T){const D=new CustomEvent("messageReceived",{detail:{threadId:C,event:T}});window.dispatchEvent(D)}fetchThreads(C){var T=this;return(0,pe.A)(function*(){if(T.chatClient)try{T.isLoadingSubject.next(!0);const M=(yield T.chatClient.listChatThreads().byPage().next()).value.map(A=>({id:A.id,topic:A.topic,lastMessageReceivedOn:A.lastMessageReceivedOn}));for(const A of M)A.status=mo.ACTIVE;M.sort((A,R)=>R.lastMessageReceivedOn.getTime()-A.lastMessageReceivedOn.getTime()),T.threadsSubject.next(M),T.autoSelectFirstActiveThread(M)}catch(D){console.error("Failed to fetch threads:",D)}finally{T.isLoadingSubject.next(!1)}})()}autoSelectFirstActiveThread(C){if(!this.selectedThreadIdSubject.value&&C.length>0){const T=C.find(D=>D.status===mo.ACTIVE);this.setSelectedThreadId(T?T.id:C[0].id)}}addNewThread(C){const T=this.threadsSubject.value;if(-1===T.findIndex(I=>I.id===C.id)){const I=[C,...T];this.threadsSubject.next(I),1===I.length&&this.setSelectedThreadId(C.id)}}updateThreadStatus(C,T){const D=this.threadsSubject.value,I=D.findIndex(M=>M.id===C);if(-1!==I){const M=[...D];if(M[I]=se(se({},M[I]),{},{status:T}),T===mo.RESOLVED){const[A]=M.splice(I,1);M.push(A)}else if(T===mo.ACTIVE){const[A]=M.splice(I,1);M.unshift(A)}if(M.sort((A,R)=>R.lastMessageReceivedOn.getTime()-A.lastMessageReceivedOn.getTime()),this.threadsSubject.next(M),T===mo.RESOLVED&&this.selectedThreadIdSubject.value===C){const A=bO(M,C);A&&this.setSelectedThreadId(A)}}}updateThreadLastMessage(C,T){const D=this.threadsSubject.value,I=D.findIndex(M=>M.id===C);if(-1!==I){const M=[...D];M[I]=se(se({},M[I]),{},{lastMessageReceivedOn:T});const[A]=M.splice(I,1);M.unshift(A);const R=M.slice(1);R.sort((O,F)=>F.lastMessageReceivedOn.getTime()-O.lastMessageReceivedOn.getTime());const N=[A,...R];this.threadsSubject.next(N)}}reactivateThreadIfResolved(C){const T=this.threadsSubject.value,D=T.findIndex(I=>I.id===C);if(-1!==D&&T[D].status===mo.RESOLVED){const I=[...T];I[D]=se(se({},I[D]),{},{status:mo.ACTIVE});const[M]=I.splice(D,1);I.unshift(M);const A=I.slice(1);A.sort((N,O)=>O.lastMessageReceivedOn.getTime()-N.lastMessageReceivedOn.getTime());const R=[M,...A];this.threadsSubject.next(R),this.resolvedThreadIdSubject.value===C&&this.setResolvedThreadId(void 0)}}setSelectedThreadId(C){!C||this.threadsSubject.value.some(D=>D.id===C)?this.selectedThreadIdSubject.next(C):console.warn("Thread ".concat(C," not found in threads list"))}setResolvedThreadId(C){this.resolvedThreadIdSubject.next(C)}getNextActiveThreadIdFromService(C){return bO(this.threadsSubject.value,C)}updateThreadStatusExternal(C,T){var D=this;return(0,pe.A)(function*(){try{T===mo.RESOLVED?yield D.agentWorkItemService.updateAgentWorkItem(C,T):yield D.agentWorkItemService.createAgentWorkItem(C,T),D.updateThreadStatus(C,T)}catch(I){throw console.error("Failed to update thread ".concat(C," status:"),I),I}})()}}return(y=_).\u0275fac=function(C){return new(C||y)(Ft(SO))},y.\u0275prov=At({token:y,factory:y.\u0275fac,providedIn:"root"}),_})();const pd_apiBaseUrl="https://10.0.0.6/app/service/api/";let XK=(()=>{var y;class _{constructor(C){this.http=C}getSalesRepInfo(C){var T=this;return(0,pe.A)(function*(){try{return yield xa(T.http.post("".concat(pd_apiBaseUrl,"TeamsChat/getSalesRepInfo"),{aadObjectId:C}))}catch(D){return void console.error("Failed to get teams sales Rep Information:",D)}})()}getAgentACSUser(C){var T=this;return(0,pe.A)(function*(){try{return(yield xa(T.http.get("".concat(pd_apiBaseUrl,"TeamsChat/agentACSUser/?teamsUserId=").concat(C)))).data}catch(D){return void console.error("Failed to get ACS user:",D)}})()}getEndpointUrl(){var C=this;return(0,pe.A)(function*(){try{const T=yield xa(C.http.get("".concat(pd_apiBaseUrl,"TeamsChat/getEndpointUrl")));return(null==T?void 0:T.data)||""}catch(T){return console.error("Failed to get endpoint URL:",T),""}})()}getToken(C){var T=this;return(0,pe.A)(function*(){try{return(yield xa(T.http.post("".concat(pd_apiBaseUrl,"TeamsChat/salesAgent-token"),{SalesRepAcsUserId:C}))).data||{token:""}}catch(D){return console.error("Failed to get token:",D),{token:"mock-token"}}})()}}return(y=_).\u0275fac=function(C){return new(C||y)(Ft(T_))},y.\u0275prov=At({token:y,factory:y.\u0275fac,providedIn:"root"}),_})(),YK=(()=>{var y;class _{constructor(){this.personaName="",this.threadStatus="",this.onResolveChat=new Hn}handleResolveChat(){this.onResolveChat.emit()}getStatusClass(){return"active"===this.threadStatus?"active":"resolved"}getStatusText(){return"active"===this.threadStatus?"Active":"Resolved"}}return(y=_).\u0275fac=function(C){return new(C||y)},y.\u0275cmp=Co({type:y,selectors:[["app-chat-header"]],inputs:{personaName:"personaName",threadStatus:"threadStatus"},outputs:{onResolveChat:"onResolveChat"},decls:8,vars:2,consts:[[1,"chat-header"],[1,"header-content"],[1,"persona-info"],[1,"avatar"],[1,"persona-details"],[1,"persona-name"]],template:function(C,T){1&C&&(on(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),ir(4),dn(),on(5,"div",4)(6,"div",5),ir(7),dn()()()()()),2&C&&(Bn(4),Ei(T.personaName.charAt(0).toUpperCase()),Bn(3),Ei(T.personaName))},styles:[".chat-header[_ngcontent-%COMP%]{padding:16px;border-bottom:1px solid #e1dfdd;background-color:#fff}.header-content[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center}.persona-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.avatar[_ngcontent-%COMP%]{width:40px;height:40px;border-radius:50%;background-color:#0078d4;color:#fff;display:flex;align-items:center;justify-content:center;font-weight:600;font-size:16px}.persona-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.persona-name[_ngcontent-%COMP%]{font-weight:600;font-size:16px;color:#323130}.thread-status[_ngcontent-%COMP%]{font-size:12px;font-weight:500;padding:2px 8px;border-radius:12px;text-transform:uppercase;letter-spacing:.5px}.thread-status.active[_ngcontent-%COMP%]{background-color:#dff6dd;color:#107c10}.thread-status.resolved[_ngcontent-%COMP%]{background-color:#fce4ec;color:#c2185b}.resolve-button[_ngcontent-%COMP%]{background-color:#0078d4;color:#fff;border:none;padding:8px 16px;border-radius:4px;cursor:pointer;font-weight:500;transition:background-color .2s}.resolve-button[_ngcontent-%COMP%]:hover{background-color:#106ebe}.resolve-button[_ngcontent-%COMP%]:active{background-color:#005a9e}"]}),_})();const ZK=y=>({"dark-mode":y}),eJ=y=>({"own-message":y});function tJ(y,_){1&y&&(on(0,"div",11),Oo(1,"div",12),on(2,"div"),ir(3,"Loading messages..."),dn()())}function nJ(y,_){1&y&&(on(0,"div",13)(1,"div",14),ir(2,"\u{1f4ac}"),dn(),on(3,"div"),ir(4,"No messages yet. Start the conversation!"),dn()())}function rJ(y,_){if(1&y&&(on(0,"div",15)(1,"div",16)(2,"div",17),ir(3),dn(),Oo(4,"div",18),on(5,"div",19),ir(6),dn()()()),2&y){const S=_.$implicit,C=Rr();zn("ngClass",_y(4,eJ,S.sender===C.userId)),Bn(3),Ei(S.senderDisplayName||"Unknown"),Bn(),zn("innerHTML",S.content,Jw),Bn(2),Ei(C.formatMessageTime(S.createdOn))}}let oJ=(()=>{var y;class _{constructor(){this.isDarkMode=!1,this.threadId="",this.userId="",this.token="",this.endpointUrl="",this.displayName="",this.destroy$=new fr,this.messages=[],this.messageText="",this.isLoading=!1,this.canSendMessage=!1}ngOnInit(){console.log("ChatComponentsComponent ngOnInit with inputs:",{threadId:this.threadId,userId:this.userId,hasToken:!!this.token,hasEndpointUrl:!!this.endpointUrl,displayName:this.displayName}),this.threadId&&this.userId&&this.token&&this.endpointUrl&&this.displayName?(console.log("All required inputs available, initializing chat"),this.initializeChatThreadClient(),this.loadMessages()):console.log("Some required inputs are missing, waiting for changes"),window.addEventListener("resize",this.handleResize.bind(this)),window.addEventListener("messageReceived",this.handleMessageReceived.bind(this)),console.log("ChatComponentsComponent initialized with threadId:",this.threadId)}handleMessageReceived(C){const T=C,{threadId:D}=T.detail;D===this.threadId&&(console.log("Real-time message received for current thread:",D),this.refreshMessages())}handleResize(){this.ensureInputVisible()}ngOnChanges(C){if(console.log("ChatComponentsComponent ngOnChanges:",C),C.threadId&&!C.threadId.firstChange){const A=C.threadId.currentValue,R=C.threadId.previousValue;A&&A!==R&&(console.log("Thread changed from",R,"to",A),this.handleThreadChange(A))}if(C.userId||C.token||C.endpointUrl||C.displayName){var T,D,I,M;const A=(null===(T=C.userId)||void 0===T?void 0:T.currentValue)||this.userId,R=(null===(D=C.token)||void 0===D?void 0:D.currentValue)||this.token,N=(null===(I=C.endpointUrl)||void 0===I?void 0:I.currentValue)||this.endpointUrl,O=(null===(M=C.displayName)||void 0===M?void 0:M.currentValue)||this.displayName;A&&R&&N&&this.threadId&&O&&(console.log("Critical inputs changed, reinitializing chat"),this.handleThreadChange(this.threadId))}}handleThreadChange(C){var T=this;return(0,pe.A)(function*(){console.log("Handling thread change to:",C),T.messages=[],T.messageText="",T.isLoading=!0,T.canSendMessage=!1,T.disposeChatThreadClient(),yield new Promise(D=>setTimeout(D,100));try{yield T.initializeChatThreadClient(),T.chatThreadClient&&(yield T.loadMessages())}catch(D){console.error("Failed to initialize new thread:",D),T.isLoading=!1}})()}disposeChatThreadClient(){this.chatThreadClient&&(console.log("Disposing of old chat thread client"),this.chatThreadClient=void 0)}refreshMessages(){var C=this;return(0,pe.A)(function*(){console.log("Manually refreshing messages"),C.chatThreadClient?yield C.loadMessages():(console.log("No chat thread client available, reinitializing first"),yield C.initializeChatThreadClient(),C.chatThreadClient&&(yield C.loadMessages()))})()}forceRefreshMessages(){var C=this;return(0,pe.A)(function*(){console.log("Force refreshing messages for thread:",C.threadId),C.messages=[],C.isLoading=!0;try{yield C.initializeChatThreadClient(),C.chatThreadClient&&(yield C.loadMessages())}catch(T){console.error("Failed to force refresh messages:",T),C.isLoading=!1}})()}ensureInputVisible(){setTimeout(()=>{const C=document.querySelector(".chat-components-container");C&&(C.scrollTop=C.scrollHeight)},100)}resolveChatThread(){var C=this;return(0,pe.A)(function*(){if(C.chatThreadClient)try{console.log("Resolving chat thread:",C.threadId),C.canSendMessage=!1,yield C.chatThreadClient.updateProperties({metadata:{isResolvedByAgent:"true"}}),console.log("Chat thread metadata updated successfully"),C.showSuccessMessage("Chat resolved successfully"),C.canSendMessage=!0}catch(T){console.error("Failed to update chat thread metadata:",T),C.canSendMessage=!0,C.showErrorMessage("Failed to resolve chat. Please try again.")}else console.error("No chat thread client available to resolve thread")})()}showSuccessMessage(C){const T=document.createElement("div");T.className="success-message",T.textContent=C,T.style.cssText="\n      position: fixed;\n      top: 20px;\n      left: 50%;\n      transform: translateX(-50%);\n      background-color: #107c10;\n      color: white;\n      padding: 12px 20px;\n      border-radius: 4px;\n      z-index: 1000;\n      font-size: 14px;\n    ",document.body.appendChild(T),setTimeout(()=>{T.parentNode&&T.parentNode.removeChild(T)},3e3)}ngOnDestroy(){console.log("ChatComponentsComponent destroying, cleaning up resources"),this.disposeChatThreadClient(),this.messages=[],this.messageText="",this.isLoading=!1,this.canSendMessage=!1,this.destroy$.next(),this.destroy$.complete(),window.removeEventListener("resize",this.handleResize.bind(this)),window.removeEventListener("messageReceived",this.handleMessageReceived.bind(this))}initializeChatThreadClient(){var C=this;return(0,pe.A)(function*(){try{if(console.log("Initializing chat thread client with:",{endpointUrl:C.endpointUrl,threadId:C.threadId,userId:C.userId,displayName:C.displayName}),!(C.endpointUrl&&C.token&&C.threadId&&C.userId))return console.error("Missing required parameters for chat initialization"),void(C.canSendMessage=!1);const T=C.threadId,D=new KN(C.token),I=new wO(C.endpointUrl,D);if(yield I.startRealtimeNotifications(),C.threadId!==T)return void console.log("Thread ID changed during initialization, aborting");C.chatThreadClient=I.getChatThreadClient(C.threadId),C.canSendMessage=!0,console.log("Chat thread client initialized successfully for thread:",C.threadId)}catch(T){console.error("Failed to initialize chat thread client:",T),C.canSendMessage=!1,C.chatThreadClient=void 0}})()}loadMessages(){var C=this;return(0,pe.A)(function*(){if(!C.chatThreadClient)return void console.log("No chat thread client available, cannot load messages");const T=C.threadId;try{C.isLoading=!0,console.log("Loading messages for thread:",C.threadId);const D=yield C.chatThreadClient.listMessages().byPage().next();if(C.threadId!==T)return void console.log("Thread ID changed during message loading, aborting");if(console.log("Raw messages from ACS:",D.value),console.log("Current user ID:",C.userId),console.log("Current user display name:",C.displayName),!D.value||0===D.value.length)return console.log("No messages found in thread"),C.messages=[],void C.ensureInputVisible();const I=D.value.filter(M=>{var A;return(null===(A=M.content)||void 0===A?void 0:A.message)&&M.content.message.trim().length>0}).map(M=>{var A;let R="",N="Unknown";if(console.log("Processing message:",M),console.log("Message sender:",M.sender),console.log("Message senderDisplayName:",M.senderDisplayName),M.sender&&("communicationUserId"in M.sender?(R=M.sender.communicationUserId,console.log("Found communicationUserId:",R),R===C.userId?(N=C.displayName||"You",console.log("Current user message, using displayName:",N)):(N=M.senderDisplayName||"Customer",console.log("Other user message, using senderDisplayName:",N))):"kind"in M.sender&&"communicationUser"===M.sender.kind?(R=M.sender.communicationUserId,console.log("Found communicationUser kind with ID:",R),N=R===C.userId?C.displayName||"You":M.senderDisplayName||"Customer"):(console.log("Unknown sender type:",M.sender),M.senderDisplayName&&(N=M.senderDisplayName))),!R&&M.sender)if("string"==typeof M.sender)R=M.sender;else if("object"==typeof M.sender){const F=M.sender;R=F.id||F.communicationUserId||F.userId||""}const O={id:M.id,content:(null===(A=M.content)||void 0===A?void 0:A.message)||"",sender:R,senderDisplayName:N,createdOn:M.createdOn,type:"text"};return console.log("Created message item:",O),O});I.sort((M,A)=>M.createdOn.getTime()-A.createdOn.getTime()),C.messages=I,console.log("Final processed messages:",I),console.log("Messages loaded successfully, count:",I.length),C.ensureInputVisible()}catch(D){console.error("Failed to load messages:",D),C.messages=[],C.ensureInputVisible(),C.showErrorMessage("Failed to load messages. Please refresh and try again.")}finally{C.isLoading=!1}})()}sendMessage(){var C=this;return(0,pe.A)(function*(){if(!C.messageText.trim()||!C.chatThreadClient||!C.canSendMessage)return void console.log("Cannot send message:",{hasText:!!C.messageText.trim(),hasClient:!!C.chatThreadClient,canSend:C.canSendMessage});const T=C.messageText.trim();try{console.log("Sending message:",T),C.messageText="",C.canSendMessage=!1,yield C.chatThreadClient.sendMessage({content:T}),console.log("Message sent successfully"),yield C.loadMessages(),C.canSendMessage=!0}catch(D){console.error("Failed to send message:",D),C.messageText=T,C.canSendMessage=!0,C.showErrorMessage("Failed to send message. Please try again.")}})()}showErrorMessage(C){const T=document.createElement("div");T.className="error-message",T.textContent=C,T.style.cssText="\n      position: fixed;\n      top: 20px;\n      left: 50%;\n      transform: translateX(-50%);\n      background-color: #d13438;\n      color: white;\n      padding: 12px 20px;\n      border-radius: 4px;\n      z-index: 1000;\n      font-size: 14px;\n    ",document.body.appendChild(T),setTimeout(()=>{T.parentNode&&T.parentNode.removeChild(T)},3e3)}formatMessageTime(C){return new Date(C).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}}return(y=_).\u0275fac=function(C){return new(C||y)},y.\u0275cmp=Co({type:y,selectors:[["app-chat-components"]],inputs:{isDarkMode:"isDarkMode",threadId:"threadId",userId:"userId",token:"token",endpointUrl:"endpointUrl",displayName:"displayName"},features:[uo],decls:12,vars:9,consts:[[1,"chat-components-container",3,"ngClass"],[1,"chat-messages"],[1,"message-list"],["class","loading-messages",4,"ngIf"],["class","no-messages",4,"ngIf"],["class","message-item",3,"ngClass",4,"ngFor","ngForOf"],[1,"chat-input"],[1,"input-container"],["type","text","placeholder","Type a message...",1,"message-input",3,"ngModelChange","keyup.enter","ngModel","disabled"],[1,"send-button",3,"click","disabled"],[1,"send-text"],[1,"loading-messages"],[1,"loading-spinner"],[1,"no-messages"],[1,"no-messages-icon"],[1,"message-item",3,"ngClass"],[1,"message-content"],[1,"message-sender"],[1,"message-text",3,"innerHTML"],[1,"message-time"]],template:function(C,T){1&C&&(on(0,"div",0)(1,"div",1)(2,"div",2),$r(3,tJ,4,0,"div",3)(4,nJ,5,0,"div",4)(5,rJ,7,6,"div",5),dn()(),on(6,"div",6)(7,"div",7)(8,"input",8),py("ngModelChange",function(I){return function JE(y,_){const S=TS(y);return S&&y.set(_),S}(T.messageText,I)||(T.messageText=I),I}),ur("keyup.enter",function(){return T.sendMessage()}),dn(),on(9,"button",9),ur("click",function(){return T.sendMessage()}),on(10,"span",10),ir(11,"Send"),dn()()()()()),2&C&&(zn("ngClass",_y(7,ZK,T.isDarkMode)),Bn(3),zn("ngIf",T.isLoading),Bn(),zn("ngIf",!T.isLoading&&0===T.messages.length),Bn(),zn("ngForOf",T.messages),Bn(3),hy("ngModel",T.messageText),zn("disabled",!T.canSendMessage),Bn(),zn("disabled",!T.canSendMessage||!T.messageText.trim()))},dependencies:[Ch,ev,Lc,ip,iP,$_],styles:['[_nghost-%COMP%]{--font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;--font-size-xs: 11px;--font-size-sm: 12px;--font-size-md: 14px;--font-size-lg: 16px;--line-height-normal: 1.5;--font-weight-normal: 400;--font-weight-medium: 500;--font-weight-semibold: 600}.chat-components-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100vh;background-color:#fff;min-height:400px;overflow:hidden;font-family:var(--font-family);font-size:var(--font-size-md);line-height:var(--line-height-normal);-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.chat-components-container.dark-mode[_ngcontent-%COMP%]{background-color:#1b1a19;color:#fff}.chat-messages[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:16px;display:flex;flex-direction:column;-webkit-overflow-scrolling:touch}.message-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;min-height:-webkit-min-content;min-height:min-content}.loading-messages[_ngcontent-%COMP%], .no-messages[_ngcontent-%COMP%]{text-align:center;color:#666;padding:20px;display:flex;flex-direction:column;align-items:center;gap:16px;flex:1;justify-content:center;min-height:200px}.dark-mode[_ngcontent-%COMP%]   .loading-messages[_ngcontent-%COMP%], .dark-mode[_ngcontent-%COMP%]   .no-messages[_ngcontent-%COMP%]{color:#ccc}.loading-spinner[_ngcontent-%COMP%]{width:32px;height:32px;border:3px solid #f3f2f1;border-top:3px solid #0078d4;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}.no-messages-icon[_ngcontent-%COMP%]{font-size:48px;opacity:.6}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}.message-item[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;margin-bottom:8px}.message-item.own-message[_ngcontent-%COMP%]{justify-content:flex-end}.message-content[_ngcontent-%COMP%]{max-width:70%;background-color:#f3f2f1;color:#323130;padding:12px 16px;border-radius:18px 18px 18px 4px;box-shadow:0 1px 3px #0000001a}.own-message[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]{background-color:#0078d4;color:#fff;border-bottom-left-radius:18px;border-bottom-right-radius:4px}.dark-mode[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]{background-color:#3b3a39;color:#fff}.dark-mode[_ngcontent-%COMP%]   .own-message[_ngcontent-%COMP%]   .message-content[_ngcontent-%COMP%]{background-color:#106ebe}.message-sender[_ngcontent-%COMP%]{font-size:var(--font-size-sm);font-weight:var(--font-weight-semibold);margin-bottom:4px;opacity:.8;letter-spacing:.1px}.message-text[_ngcontent-%COMP%]{font-size:var(--font-size-md);margin-bottom:4px;line-height:var(--line-height-normal);word-wrap:break-word;white-space:pre-wrap;font-weight:var(--font-weight-normal)}.message-time[_ngcontent-%COMP%]{font-size:var(--font-size-xs);opacity:.8;text-align:right;font-weight:var(--font-weight-normal);letter-spacing:.1px}.chat-input[_ngcontent-%COMP%]{padding:16px;border-top:1px solid #e1dfdd;background-color:#fff;height:80px;display:flex;align-items:center;box-shadow:0 -2px 8px #0000000d;flex-shrink:0}.dark-mode[_ngcontent-%COMP%]   .chat-input[_ngcontent-%COMP%]{background-color:#1b1a19;border-top-color:#3b3a39;box-shadow:0 -2px 8px #0003}.input-container[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center;width:100%;max-width:100%}.message-input[_ngcontent-%COMP%]{flex:1;padding:12px 16px;border:1px solid #e1dfdd;border-radius:24px;font-family:var(--font-family);font-size:var(--font-size-md);font-weight:var(--font-weight-normal);line-height:var(--line-height-normal);outline:none;transition:border-color .2s,box-shadow .2s;min-width:0;max-width:100%}.dark-mode[_ngcontent-%COMP%]   .message-input[_ngcontent-%COMP%]{background-color:#3b3a39;border-color:#605e5c;color:#fff}.message-input[_ngcontent-%COMP%]:focus{border-color:#0078d4;box-shadow:0 0 0 2px #0078d41a}.dark-mode[_ngcontent-%COMP%]   .message-input[_ngcontent-%COMP%]:focus{border-color:#106ebe;box-shadow:0 0 0 2px #106ebe1a}.message-input[_ngcontent-%COMP%]:disabled{background-color:#f3f2f1;color:#605e5c;cursor:not-allowed}.dark-mode[_ngcontent-%COMP%]   .message-input[_ngcontent-%COMP%]:disabled{background-color:#3b3a39;color:#605e5c}.send-button[_ngcontent-%COMP%]{background-color:#0078d4;color:#fff;border:none;padding:12px 20px;border-radius:24px;cursor:pointer;font-family:var(--font-family);font-size:var(--font-size-md);font-weight:var(--font-weight-medium);line-height:var(--line-height-normal);transition:background-color .2s,box-shadow .2s;display:flex;align-items:center;gap:8px;white-space:nowrap;min-width:-webkit-fit-content;min-width:-moz-fit-content;min-width:fit-content;flex-shrink:0}.dark-mode[_ngcontent-%COMP%]   .send-button[_ngcontent-%COMP%]{background-color:#106ebe}.send-button[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#106ebe;box-shadow:0 2px 4px #0000001a}.dark-mode[_ngcontent-%COMP%]   .send-button[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#005a9e;box-shadow:0 2px 4px #0003}.send-button[_ngcontent-%COMP%]:disabled{background-color:#c8c6c4;cursor:not-allowed;opacity:.6}.dark-mode[_ngcontent-%COMP%]   .send-button[_ngcontent-%COMP%]:disabled{background-color:#605e5c}.send-icon[_ngcontent-%COMP%]{font-size:var(--font-size-lg)}.send-text[_ngcontent-%COMP%]{font-size:var(--font-size-md);font-weight:var(--font-weight-medium)}@media (max-width: 768px){.chat-messages[_ngcontent-%COMP%]{padding:12px;max-height:calc(100vh - 160px)}.message-content[_ngcontent-%COMP%]{max-width:85%}.chat-input[_ngcontent-%COMP%]{padding:12px;min-height:70px}.input-container[_ngcontent-%COMP%]{gap:8px}.send-button[_ngcontent-%COMP%]{padding:10px 16px}.send-text[_ngcontent-%COMP%]{display:none}.loading-messages[_ngcontent-%COMP%], .no-messages[_ngcontent-%COMP%]{min-height:150px;padding:16px}}@media (max-width: 480px){.chat-components-container[_ngcontent-%COMP%]{min-height:300px}.chat-messages[_ngcontent-%COMP%]{padding:8px;max-height:calc(100vh - 80px)}.message-content[_ngcontent-%COMP%]{max-width:90%;padding:10px 14px}.message-input[_ngcontent-%COMP%]{padding:10px 14px;font-size:16px}.chat-input[_ngcontent-%COMP%]{padding:8px;min-height:60px}.loading-messages[_ngcontent-%COMP%], .no-messages[_ngcontent-%COMP%]{min-height:120px;padding:12px}}@media screen{.chat-messages[_ngcontent-%COMP%]{max-height:calc(100vh - 120px);height:auto;min-height:100px}.chat-input[_ngcontent-%COMP%]{position:fixed;bottom:0;left:0;right:0;background-color:#fff;border-top:1px solid #e1dfdd;z-index:100;width:100%;padding:12px 16px}.dark-mode[_ngcontent-%COMP%]   .chat-input[_ngcontent-%COMP%]{background-color:#1b1a19;border-top-color:#3b3a39}.chat-components-container[_ngcontent-%COMP%]{padding-bottom:80px}}']}),_})(),TO=(()=>{var y;class _{}return(y=_).\u0275fac=function(C){return new(C||y)},y.\u0275cmp=Co({type:y,selectors:[["app-loading-spinner"]],decls:4,vars:0,consts:[[1,"loading-container"],[1,"spinner"],[1,"loading-text"]],template:function(C,T){1&C&&(on(0,"div",0),Oo(1,"div",1),on(2,"div",2),ir(3,"Loading..."),dn()())},styles:[".loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;gap:16px}.spinner[_ngcontent-%COMP%]{width:40px;height:40px;border:4px solid #f3f3f3;border-top:4px solid #0078d4;border-radius:50%;animation:_ngcontent-%COMP%_spin 1s linear infinite}.loading-text[_ngcontent-%COMP%]{color:#605e5c;font-size:14px;font-weight:500}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}"]}),_})();function iJ(y,_){if(1&y){const S=ga();Mc(0),on(1,"app-chat-header",3),ur("onResolveChat",function(){return Ji(S),Qi(Rr().handleOnResolveChat())}),dn(),on(2,"div",4),Oo(3,"app-chat-components",5),dn(),Ac()}if(2&y){const S=Rr();Bn(),zn("personaName",S.receiverName)("threadStatus",S.threadStatus),Bn(2),zn("isDarkMode",S.isDarkMode)("threadId",S.threadId)("userId",S.userId)("token",S.token)("endpointUrl",S.endpointUrl)("displayName",S.displayName)}}function sJ(y,_){1&y&&Oo(0,"app-loading-spinner")}let aJ=(()=>{var y;class _{constructor(C,T){this.teamsFxService=C,this.agentWorkItemService=T,this.token="",this.userId="",this.displayName="",this.endpointUrl="",this.threadId="",this.receiverName="",this.threadStatus="",this.onResolveChat=new Hn,this.destroy$=new fr,this.isLoading=!0,this.isDarkMode=!1}ngOnInit(){this.initializeChat(),this.subscribeToTheme()}ngOnChanges(C){(C.token||C.userId||C.endpointUrl||C.threadId)&&this.initializeChat()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),document.body.style.overflow="auto"}initializeChat(){var C=this;return(0,pe.A)(function*(){try{document.body.style.overflow="hidden",C.isLoading=!1}catch(T){console.error("Failed to initialize chat screen:",T),C.isLoading=!1}})()}subscribeToTheme(){this.teamsFxService.teamsContext$.pipe($c(this.destroy$)).subscribe(C=>{this.isDarkMode="dark"===C.themeString})}handleOnResolveChat(){var C=this;return(0,pe.A)(function*(){try{yield C.agentWorkItemService.updateAgentWorkItem(C.threadId,mo.RESOLVED),C.onResolveChat.emit(C.threadId)}catch(T){console.error("Failed to resolve chat:",T)}})()}}return(y=_).\u0275fac=function(C){return new(C||y)(lt(S0),lt(SO))},y.\u0275cmp=Co({type:y,selectors:[["app-chat-screen"]],inputs:{token:"token",userId:"userId",displayName:"displayName",endpointUrl:"endpointUrl",threadId:"threadId",receiverName:"receiverName",threadStatus:"threadStatus"},outputs:{onResolveChat:"onResolveChat"},features:[uo],decls:4,vars:2,consts:[["loadingTemplate",""],[1,"chat-screen-container"],[4,"ngIf","ngIfElse"],[3,"onResolveChat","personaName","threadStatus"],[1,"chat-content"],[3,"isDarkMode","threadId","userId","token","endpointUrl","displayName"]],template:function(C,T){if(1&C&&(on(0,"div",1),$r(1,iJ,4,8,"ng-container",2),dn(),$r(2,sJ,1,0,"ng-template",null,0,Xf)),2&C){const D=Kf(3);Bn(),zn("ngIf",!T.isLoading)("ngIfElse",D)}},dependencies:[Lc,YK,oJ,TO],styles:[".chat-screen-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;min-height:400px;max-height:100vh;background-color:#fff;overflow:hidden}.chat-content[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;overflow:hidden;min-height:0}@media (max-width: 768px){.chat-screen-container[_ngcontent-%COMP%]{min-height:300px}}@media (max-width: 480px){.chat-screen-container[_ngcontent-%COMP%]{min-height:250px}}"]}),_})();function lJ(y,_){if(1&y){const S=ga();on(0,"div",8),ur("click",function(){const T=Ji(S).$implicit;return Qi(Rr(3).handleOnThreadSelected(T.id))}),on(1,"div",9)(2,"div",10)(3,"div",11),ir(4),dn(),on(5,"div",12),ir(6),dn()(),on(7,"div",13),ir(8),dn()()()}if(2&y){const S=_.$implicit,C=Rr(3);zn("ngClass",C.getThreadItemContainerStyle(S.id)),Bn(4),Ei(S.topic.charAt(0).toUpperCase()),Bn(2),Ei(S.topic),Bn(2),Jf(" ",C.formatTimestampForThread(S.lastMessageReceivedOn,C.currentDate)," ")}}function uJ(y,_){if(1&y&&(Mc(0),on(1,"div",5),ir(2,"Assigned to me"),dn(),on(3,"div",6),$r(4,lJ,9,4,"div",7),dn(),Ac()),2&y){const S=Rr(2);Bn(4),zn("ngForOf",S.getCurrentStatusThreads())}}function dJ(y,_){if(1&y&&(Mc(0),$r(1,uJ,5,1,"ng-container",4),Ac()),2&y){const S=Rr(),C=Kf(6);Bn(),zn("ngIf",S.getCurrentStatusThreads().length>0)("ngIfElse",C)}}function fJ(y,_){1&y&&Oo(0,"app-loading-spinner")}function hJ(y,_){1&y&&(on(0,"div",14),ir(1,"No threads"),dn())}let pJ=(()=>{var y;class _{constructor(){this.threads=[],this.isLoading=!1,this.tabs=[],this.selectedTab="",this.onThreadSelected=new Hn,this.onStatusTabSelected=new Hn,this.destroy$=new fr,this.currentDate=new Date}ngOnInit(){if(!this.selectedThreadId&&this.threads&&this.threads.length>0){const C=this.threads.find(T=>T.status===this.selectedTab.toLowerCase());C&&this.handleOnThreadSelected(C.id)}}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}handleOnThreadSelected(C){this.onThreadSelected.emit(C)}handleOnStatusTabSelected(C){this.onStatusTabSelected.emit(C)}getCurrentStatusThreads(){return this.threads.filter(C=>C.status===this.selectedTab.toLowerCase())}getThreadItemContainerStyle(C){return C===this.selectedThreadId?"selected":"unselected"}formatTimestampForThread(C,T){return function cJ(y,_){if(!y)return"";const S=_.getTime()-y.getTime(),C=Math.floor(S/6e4),T=Math.floor(S/36e5),D=Math.floor(S/864e5);return C<1?"Just now":C<60?"".concat(C,"m ago"):T<24?"".concat(T,"h ago"):D<7?"".concat(D,"d ago"):y.toLocaleDateString()}(C,T)}}return(y=_).\u0275fac=function(C){return new(C||y)},y.\u0275cmp=Co({type:y,selectors:[["app-thread-list"]],inputs:{threads:"threads",isLoading:"isLoading",selectedThreadId:"selectedThreadId",tabs:"tabs",selectedTab:"selectedTab"},outputs:{onThreadSelected:"onThreadSelected",onStatusTabSelected:"onStatusTabSelected"},decls:7,vars:2,consts:[["loadingTemplate",""],["noThreadsTemplate",""],[1,"thread-list-container"],[1,"thread-list-content"],[4,"ngIf","ngIfElse"],[1,"assigned-to-me-label"],[1,"thread-list"],["class","thread-item",3,"ngClass","click",4,"ngFor","ngForOf"],[1,"thread-item",3,"click","ngClass"],[1,"thread-item-content"],[1,"persona"],[1,"avatar"],[1,"persona-name"],[1,"timestamp"],[1,"no-threads-label"]],template:function(C,T){if(1&C&&(on(0,"div",2)(1,"div",3),$r(2,dJ,2,2,"ng-container",4),dn()(),$r(3,fJ,1,0,"ng-template",null,0,Xf)(5,hJ,2,0,"ng-template",null,1,Xf)),2&C){const D=Kf(4);Bn(2),zn("ngIf",!T.isLoading)("ngIfElse",D)}},dependencies:[Ch,ev,Lc,TO],styles:[".thread-list-container[_ngcontent-%COMP%]{width:300px;min-width:250px;max-width:350px;border-right:1px solid #e1dfdd;display:flex;flex-direction:column;background-color:#faf9f8;height:100vh;overflow:hidden}.thread-list-content[_ngcontent-%COMP%]{flex:1;overflow-y:auto;scrollbar-width:thin;-ms-overflow-style:-ms-autohiding-scrollbar}.thread-list-content[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.thread-list-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background-color:#c8c6c4;border-radius:3px}.thread-list-content[_ngcontent-%COMP%]::-webkit-scrollbar-track{background-color:transparent}.assigned-to-me-label[_ngcontent-%COMP%]{padding:16px;font-weight:600;color:#605e5c;border-bottom:1px solid #e1dfdd;position:-webkit-sticky;position:-webkit-sticky;position:sticky;top:0;background-color:#faf9f8;z-index:1}.thread-list[_ngcontent-%COMP%]{padding:0}.thread-item[_ngcontent-%COMP%]{padding:12px 16px;cursor:pointer;border-bottom:1px solid #e1dfdd;transition:background-color .2s}.thread-item[_ngcontent-%COMP%]:hover{background-color:#f3f2f1}.thread-item.selected[_ngcontent-%COMP%]{background-color:#deecf9;border-left:3px solid #0078d4}.thread-item.unselected[_ngcontent-%COMP%]{background-color:transparent}.thread-item-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.persona[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.avatar[_ngcontent-%COMP%]{width:32px;height:32px;border-radius:50%;background-color:#0078d4;color:#fff;display:flex;align-items:center;justify-content:center;font-weight:600;font-size:14px}.persona-name[_ngcontent-%COMP%]{font-weight:500;color:#323130;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:200px}.timestamp[_ngcontent-%COMP%]{font-size:12px;color:#605e5c;margin-left:44px}.no-threads-label[_ngcontent-%COMP%]{padding:16px;text-align:center;color:#605e5c;font-style:italic}"]}),_})(),gJ=(()=>{var y;class _{constructor(){this.errorMessage="An unexpected error occurred."}retry(){window.location.reload()}}return(y=_).\u0275fac=function(C){return new(C||y)},y.\u0275cmp=Co({type:y,selectors:[["app-error-screen"]],inputs:{errorMessage:"errorMessage"},decls:10,vars:1,consts:[[1,"error-container"],[1,"error-content"],[1,"error-icon"],[1,"error-title"],[1,"error-message"],[1,"retry-button",3,"click"]],template:function(C,T){1&C&&(on(0,"div",0)(1,"div",1)(2,"div",2),ir(3,"\u26a0\ufe0f"),dn(),on(4,"h2",3),ir(5,"Something went wrong"),dn(),on(6,"p",4),ir(7),dn(),on(8,"button",5),ur("click",function(){return T.retry()}),ir(9,"Try Again"),dn()()()),2&C&&(Bn(7),Ei(T.errorMessage))},styles:[".error-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;height:100vh;background-color:#faf9f8}.error-content[_ngcontent-%COMP%]{text-align:center;max-width:400px;padding:32px}.error-icon[_ngcontent-%COMP%]{font-size:48px;margin-bottom:16px}.error-title[_ngcontent-%COMP%]{color:#323130;margin-bottom:16px;font-size:24px;font-weight:600}.error-message[_ngcontent-%COMP%]{color:#605e5c;margin-bottom:24px;line-height:1.5}.retry-button[_ngcontent-%COMP%]{background-color:#0078d4;color:#fff;border:none;padding:12px 24px;border-radius:4px;cursor:pointer;font-weight:500;transition:background-color .2s}.retry-button[_ngcontent-%COMP%]:hover{background-color:#106ebe}"]}),_})();function mJ(y,_){if(1&y){const S=ga();on(0,"div",1)(1,"div",2)(2,"div",3)(3,"div",4),ir(4,"\u2705"),dn(),on(5,"div",5)(6,"div",6),ir(7,"Chat Resolved"),dn(),on(8,"div",7),ir(9),dn()(),on(10,"button",8),ur("click",function(){return Ji(S),Qi(Rr().hideToast())}),ir(11,"\xd7"),dn()(),on(12,"div",9)(13,"button",10),ur("click",function(){return Ji(S),Qi(Rr().handleViewThread())}),ir(14," View Thread "),dn()()()()}if(2&y){const S=Rr();Bn(9),Ei(S.toastBodyMessage)}}let yJ=(()=>{var y;class _{constructor(){this.toasterId="",this.showToast=!1,this.toastBodyMessage="",this.onViewThread=new Hn}ngOnInit(){this.showToast&&setTimeout(()=>{this.hideToast()},5e3)}hideToast(){this.showToast=!1}handleViewThread(){this.onViewThread.emit(this.toasterId),this.hideToast()}}return(y=_).\u0275fac=function(C){return new(C||y)},y.\u0275cmp=Co({type:y,selectors:[["app-toast-notification"]],inputs:{toasterId:"toasterId",showToast:"showToast",toastBodyMessage:"toastBodyMessage"},outputs:{onViewThread:"onViewThread"},decls:1,vars:1,consts:[["class","toast-container",4,"ngIf"],[1,"toast-container"],[1,"toast"],[1,"toast-content"],[1,"toast-icon"],[1,"toast-message"],[1,"toast-title"],[1,"toast-body"],[1,"toast-close",3,"click"],[1,"toast-actions"],[1,"view-thread-button",3,"click"]],template:function(C,T){1&C&&$r(0,mJ,15,1,"div",0),2&C&&zn("ngIf",T.showToast)},dependencies:[Lc],styles:[".toast-container[_ngcontent-%COMP%]{position:fixed;top:20px;right:20px;z-index:1000;animation:_ngcontent-%COMP%_slideIn .3s ease-out}.toast[_ngcontent-%COMP%]{background-color:#fff;border:1px solid #e1dfdd;border-radius:8px;box-shadow:0 4px 12px #00000026;min-width:300px;max-width:400px}.toast-content[_ngcontent-%COMP%]{display:flex;align-items:flex-start;padding:16px;gap:12px}.toast-icon[_ngcontent-%COMP%]{font-size:20px;margin-top:2px}.toast-message[_ngcontent-%COMP%]{flex:1}.toast-title[_ngcontent-%COMP%]{font-weight:600;color:#323130;margin-bottom:4px}.toast-body[_ngcontent-%COMP%]{color:#605e5c;font-size:14px;line-height:1.4}.toast-close[_ngcontent-%COMP%]{background:none;border:none;font-size:20px;color:#605e5c;cursor:pointer;padding:0;width:24px;height:24px;display:flex;align-items:center;justify-content:center;border-radius:4px;transition:background-color .2s}.toast-close[_ngcontent-%COMP%]:hover{background-color:#f3f2f1}.toast-actions[_ngcontent-%COMP%]{padding:12px 16px 16px;border-top:1px solid #e1dfdd}.view-thread-button[_ngcontent-%COMP%]{background-color:#0078d4;color:#fff;border:none;padding:8px 16px;border-radius:4px;cursor:pointer;font-weight:500;transition:background-color .2s;width:100%}.view-thread-button[_ngcontent-%COMP%]:hover{background-color:#106ebe}@keyframes _ngcontent-%COMP%_slideIn{0%{transform:translate(100%);opacity:0}to{transform:translate(0);opacity:1}}"]}),_})();function vJ(y,_){if(1&y&&(on(0,"div",2),Oo(1,"app-error-screen",3),dn()),2&y){const S=Rr();Bn(),zn("errorMessage",S.errorMessage)}}function _J(y,_){if(1&y){const S=ga();on(0,"app-toast-notification",9),ur("onViewThread",function(T){return Ji(S),Qi(Rr(2).handleOnViewThread(T))}),dn()}if(2&y){const S=Rr(2);zn("toasterId",S.resolvedThreadId)("showToast",!!S.resolvedThreadId)("toastBodyMessage",S.resolvedThreadCustomerDisplayName||"")}}function CJ(y,_){if(1&y){const S=ga();on(0,"app-chat-screen",10),ur("onResolveChat",function(T){return Ji(S),Qi(Rr(2).handleOnResolveChat(T))}),dn()}if(2&y){const S=Rr(2);zn("token",S.token)("userId",S.userId)("displayName",S.displayName)("endpointUrl",S.endpointUrl)("threadId",S.selectedThreadId)("receiverName",S.getReceiverName())("threadStatus",S.getThreadStatus())}}function wJ(y,_){if(1&y){const S=ga();on(0,"div",4),$r(1,_J,1,3,"app-toast-notification",5),on(2,"app-thread-list",6),ur("onThreadSelected",function(T){return Ji(S),Qi(Rr().setSelectedThreadId(T))})("onStatusTabSelected",function(T){return Ji(S),Qi(Rr().handleOnStatusTabSelected(T))}),dn(),on(3,"div",7),$r(4,CJ,1,7,"app-chat-screen",8),dn()()}if(2&y){const S=Rr();Bn(),zn("ngIf",S.resolvedThreadId),Bn(),zn("selectedThreadId",S.selectedThreadId)("threads",S.threads)("isLoading",!S.endpointUrl||S.isLoading)("tabs",S.tabs)("selectedTab",S.selectedTab),Bn(2),zn("ngIf",S.selectedThreadId&&S.token&&S.endpointUrl&&S.userId&&S.displayName)}}let bJ=(()=>{var y;class _{constructor(C,T,D){this.teamsFxService=C,this.threadsService=T,this.agentService=D,this.destroy$=new fr,this.token="",this.userId="",this.displayName="",this.endpointUrl="",this.tabs=["Active","Resolved"],this.selectedTab="Active",this.threads=[],this.isLoading=!1}ngOnInit(){this.initializeScreen(),this.subscribeToThreads()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}initializeScreen(){var C=this;return(0,pe.A)(function*(){try{const T=yield C.teamsFxService.getUserInfo();if(!T)return void(C.errorMessage="Failed to get Teams user info");if(!(yield C.agentService.getSalesRepInfo(T.objectId)))return void(C.errorMessage="Failed to get sales rep info");const I=yield C.agentService.getAgentACSUser(T.objectId);if(!I)return void(C.errorMessage="Failed to link to ACS user");C.endpointUrl="https://teamspocbot.unitedstates.communication.azure.com";const M=yield C.agentService.getToken(I.acsUserId);C.token=M.token,C.userId=I.acsUserId,C.displayName=I.displayName,yield C.threadsService.initializeChatClient(C.userId,C.token,C.endpointUrl)}catch(T){console.error("Failed to set screen state due to error: ",T),C.errorMessage="Failed to initialize screen"}})()}showErrorMessage(C){const T=document.createElement("div");T.className="error-message",T.textContent=C,T.style.cssText="\n      position: fixed;\n      top: 20px;\n      left: 50%;\n      transform: translateX(-50%);\n      background-color: #d13438;\n      color: white;\n      padding: 12px 20px;\n      border-radius: 4px;\n      z-index: 1000;\n      font-size: 14px;\n    ",document.body.appendChild(T),setTimeout(()=>{T.parentNode&&T.parentNode.removeChild(T)},3e3)}subscribeToThreads(){this.threadsService.threads$.pipe($c(this.destroy$)).subscribe(C=>{this.threads=C}),this.threadsService.selectedThreadId$.pipe($c(this.destroy$)).subscribe(C=>{this.selectedThreadId=C}),this.threadsService.resolvedThreadId$.pipe($c(this.destroy$)).subscribe(C=>{console.log("Resolved thread ID changed to:",C),this.resolvedThreadId=C}),this.threadsService.isLoading$.pipe($c(this.destroy$)).subscribe(C=>{this.isLoading=C})}setSelectedThreadId(C){console.log("Setting selected thread ID:",C),this.threadsService.setSelectedThreadId(C)}handleOnResolveChat(C){console.log("Resolving chat for thread:",C),this.threadsService.updateThreadStatusExternal(C,mo.RESOLVED);const T=this.threadsService.getNextActiveThreadIdFromService(C);T?(console.log("Auto-selecting next active thread:",T),this.setSelectedThreadId(T)):console.log("No next active thread found")}handleOnViewThread(C){console.log("Viewing resolved thread:",C),this.setSelectedThreadId(C);const T=this.threads.find(D=>D.id===C);T&&T.status===mo.RESOLVED&&(this.selectedTab=this.tabs[1]),this.resolvedThreadId===C&&this.threadsService.setResolvedThreadId(void 0)}handleOnStatusTabSelected(C){console.log("Status tab selected:",C),this.selectedTab=C;const T=C.toLowerCase(),D=this.threads.find(I=>I.status===T);D?(console.log("Selecting first thread of status:",T,D.id),this.setSelectedThreadId(D.id)):(console.log("No threads found for status:",T),this.selectedThreadId=void 0)}getReceiverName(){if(!this.selectedThreadId)return"";const C=this.threads.find(T=>T.id===this.selectedThreadId);return(null==C?void 0:C.topic)||""}getThreadStatus(){if(!this.selectedThreadId)return"active";const C=this.threads.find(T=>T.id===this.selectedThreadId);return(null==C?void 0:C.status)||"active"}get resolvedThreadCustomerDisplayName(){if(!this.resolvedThreadId)return;const C=this.threads.find(T=>T.id===this.resolvedThreadId);return null==C?void 0:C.topic}}return(y=_).\u0275fac=function(C){return new(C||y)(lt(S0),lt(QK),lt(XK))},y.\u0275cmp=Co({type:y,selectors:[["app-agent-screen"]],decls:3,vars:2,consts:[["class","error-container",4,"ngIf"],["class","agent-screen-container",4,"ngIf"],[1,"error-container"],[3,"errorMessage"],[1,"agent-screen-container"],[3,"toasterId","showToast","toastBodyMessage","onViewThread",4,"ngIf"],[3,"onThreadSelected","onStatusTabSelected","selectedThreadId","threads","isLoading","tabs","selectedTab"],[1,"chat-container"],[3,"token","userId","displayName","endpointUrl","threadId","receiverName","threadStatus","onResolveChat",4,"ngIf"],[3,"onViewThread","toasterId","showToast","toastBodyMessage"],[3,"onResolveChat","token","userId","displayName","endpointUrl","threadId","receiverName","threadStatus"]],template:function(C,T){1&C&&(on(0,"div"),$r(1,vJ,2,1,"div",0)(2,wJ,5,7,"div",1),dn()),2&C&&(Bn(),zn("ngIf",T.errorMessage),Bn(),zn("ngIf",!T.errorMessage))},dependencies:[Lc,aJ,pJ,gJ,yJ],styles:[".agent-screen-container[_ngcontent-%COMP%]{display:flex;height:100vh;min-height:500px;max-height:100vh;overflow:hidden}.chat-container[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;min-height:0;overflow:hidden}.error-container[_ngcontent-%COMP%]{height:100vh;display:flex;align-items:center;justify-content:center}@media (max-width: 768px){.agent-screen-container[_ngcontent-%COMP%]{min-height:400px}}@media (max-width: 480px){.agent-screen-container[_ngcontent-%COMP%]{min-height:300px}}"]}),_})(),SJ=(()=>{var y;class _{constructor(C,T){this.teamsFxService=C,this.router=T,this.themeClass="light"}ngOnInit(){this.teamsFxService.teamsContext$.subscribe(C=>{this.themeClass="default"===C.themeString?"light":"dark"===C.themeString?"contrast":"dark"})}}return(y=_).\u0275fac=function(C){return new(C||y)(lt(S0),lt(Uo))},y.\u0275cmp=Co({type:y,selectors:[["app-tab"]],decls:3,vars:1,consts:[[3,"ngClass"]],template:function(C,T){1&C&&(on(0,"div",0),Oo(1,"router-outlet")(2,"app-agent-screen"),dn()),2&C&&zn("ngClass",T.themeClass)},dependencies:[Ch,Kh,bJ],styles:["[_nghost-%COMP%]{display:block;height:100%}.nav-header[_ngcontent-%COMP%]{background-color:#f8f9fa;padding:15px 20px;border-bottom:1px solid #dee2e6}.nav-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 10px;color:#333}nav[_ngcontent-%COMP%]{display:flex;gap:20px}nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{text-decoration:none;color:#0078d4;padding:8px 16px;border-radius:4px;transition:background-color .2s}nav[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{background-color:#e3f2fd}nav[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{background-color:#0078d4;color:#fff}"]}),_})();let Ip;function EO(y,_){Hs(ii,jo.authentication),si(ar(_?"v1":"v2","authentication.notifyFailure"),"authentication.authenticate.failure",[y]),xN(Nt.parentWindow,()=>setTimeout(()=>Nt.currentWindow.close(),200))}var DO;!function(y){y.Public="public",y.EUDB="eudb",y.Other="other"}(DO||(DO={}));let DJ=(()=>{var y;class _{constructor(C){this.commonService=C,this.isInitialized=!1,this.initializeTeams()}initializeTeams(){var C=this;return(0,pe.A)(function*(){if(!C.isInitialized)try{yield bp(),C.isInitialized=!0}catch(T){console.error("Failed to initialize Teams SDK:",T)}})()}openLoginDialog(){var C=this;return(0,pe.A)(function*(){try{yield C.initializeTeams();const T=new URL("https://10.0.0.6/jstore/Login.aspx");return new Promise(D=>{!function TJ(y){const _=void 0!==y,S=_?y:Ip;if(!S)throw new Error("No parameters are provided for authentication");return Hs(ii,jo.content,jo.sidePanel,jo.settings,jo.remove,jo.task,jo.stage,jo.meetingStage),function(C,T){return Pa(this,void 0,void 0,function*(){const D=function FG(y){const _=document.createElement("a");return _.href=y,new URL(_.href)}(T.url);return function xG(y,_){const S=y.toString().toLocaleLowerCase();if(Z_(S))throw new Error("Invalid Url");if(S.length>2048)throw new Error("Url exceeds the maximum size of 2048 characters");if(!JP(y))throw new Error("Url should be a valid https url")}(D),Gs(C,"authentication.authenticate",[D.href,T.width,T.height,T.isExternal]).then(([I,M])=>{if(I)return M;throw new Error(M)})})}(ar(S.successCallback||S.failureCallback?"v1":"v2","authentication.authenticate"),S).then(C=>{try{return S&&S.successCallback?(S.successCallback(C),""):C}finally{_||(Ip=void 0)}}).catch(C=>{try{if(S&&S.failureCallback)return S.failureCallback(C.message),"";throw C}finally{_||(Ip=void 0)}})}({url:T.toString(),width:500,height:600,successCallback:I=>{console.log("Login dialog closed, checking authentication...");const M=JSON.parse(I);D(null==M?void 0:M.jenneToken)},failureCallback:I=>{console.error("Login dialog was cancelled or failed:",I),D("")}})})}catch(T){return console.error("Failed to open login dialog:",T),""}})()}}return(y=_).\u0275fac=function(C){return new(C||y)(Ft(zN))},y.\u0275prov=At({token:y,factory:y.\u0275fac,providedIn:"root"}),_})(),IJ=(()=>{var y;class _{constructor(C){this.teamsAuthService=C,this.token=""}intercept(C,T){let D=this.addAuthHeaders(C);return T.handle(D).pipe(xs(I=>401!==I.status||this.token?ks(()=>I):this.handleUnauthorized(C,T)))}handleUnauthorized(C,T){return this.token?ks(()=>new Error("Authentication already in progress")):br(this.teamsAuthService.openLoginDialog()).pipe(Lo(D=>{if(this.token=D,this.token){const I=this.addAuthHeaders(C);return T.handle(I)}return console.error("Login failed or was cancelled"),ks(()=>new Error("Authentication failed"))}),xs(D=>(this.token="",ks(()=>D))))}addAuthHeaders(C){const T={};return this.token&&(T.token="".concat(this.token)),Object.keys(T).length>0?C.clone({setHeaders:T}):C}}return(y=_).\u0275fac=function(C){return new(C||y)(Ft(DJ))},y.\u0275prov=At({token:y,factory:y.\u0275fac}),_})();const MJ=[{path:"tab",component:SJ},{path:"teams-auth-end",component:(()=>{var y;class _{constructor(C){this.route=C}ngOnInit(){bp().then(()=>{this.route.queryParams.subscribe(C=>{const T=C.teamsreturntoken;T&&"null"!==T?function EJ(y,_){Hs(ii,jo.authentication),si(ar(_?"v1":"v2","authentication.notifySuccess"),"authentication.authenticate.success",[y]),xN(Nt.parentWindow,()=>setTimeout(()=>Nt.currentWindow.close(),200))}(JSON.stringify({jenneToken:T})):EO("Token not found or is null")})}).catch(C=>{console.error("Teams SDK initialization failed",C),EO("SDK Initialization Failed")})}ngOnDestroy(){}}return(y=_).\u0275fac=function(C){return new(C||y)(lt(Ea))},y.\u0275cmp=Co({type:y,selectors:[["teams-auth-end"]],decls:0,vars:0,template:function(C,T){},encapsulation:2,data:{animation:[]}}),_})()},{path:"",redirectTo:"/tab",pathMatch:"full"}];let AJ=(()=>{var y;class _{}return(y=_).\u0275fac=function(C){return new(C||y)},y.\u0275mod=Wo({type:y,bootstrap:[a7]}),y.\u0275inj=Po({providers:[{provide:yR,useClass:IJ,multi:!0}],imports:[rM,w8,L5.forRoot(MJ,{useHash:!0}),yW,CG,wG]}),_})();_z().bootstrapModule(AJ).catch(y=>console.error(y))},356:Kt=>{var je,ft="object"==typeof Reflect?Reflect:null,Se=ft&&"function"==typeof ft.apply?ft.apply:function(Xe,xe,it){return Function.prototype.apply.call(Xe,xe,it)};je=ft&&"function"==typeof ft.ownKeys?ft.ownKeys:Object.getOwnPropertySymbols?function(Xe){return Object.getOwnPropertyNames(Xe).concat(Object.getOwnPropertySymbols(Xe))}:function(Xe){return Object.getOwnPropertyNames(Xe)};var st=Number.isNaN||function(Xe){return Xe!=Xe};function Je(){Je.init.call(this)}Kt.exports=Je,Kt.exports.once=function bt(Ve,Xe){return new Promise(function(xe,it){function gt(ot){Ve.removeListener(Xe,It),it(ot)}function It(){"function"==typeof Ve.removeListener&&Ve.removeListener("error",gt),xe([].slice.call(arguments))}pt(Ve,Xe,It,{once:!0}),"error"!==Xe&&function Dt(Ve,Xe,xe){"function"==typeof Ve.on&&pt(Ve,"error",Xe,xe)}(Ve,gt,{once:!0})})},Je.EventEmitter=Je,Je.prototype._events=void 0,Je.prototype._eventsCount=0,Je.prototype._maxListeners=void 0;var ct=10;function Ue(Ve){if("function"!=typeof Ve)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof Ve)}function se(Ve){return void 0===Ve._maxListeners?Je.defaultMaxListeners:Ve._maxListeners}function pe(Ve,Xe,xe,it){var gt,It,ot;if(Ue(xe),void 0===(It=Ve._events)?(It=Ve._events=Object.create(null),Ve._eventsCount=0):(void 0!==It.newListener&&(Ve.emit("newListener",Xe,xe.listener?xe.listener:xe),It=Ve._events),ot=It[Xe]),void 0===ot)ot=It[Xe]=xe,++Ve._eventsCount;else if("function"==typeof ot?ot=It[Xe]=it?[xe,ot]:[ot,xe]:it?ot.unshift(xe):ot.push(xe),(gt=se(Ve))>0&&ot.length>gt&&!ot.warned){ot.warned=!0;var Ot=new Error("Possible EventEmitter memory leak detected. "+ot.length+" "+String(Xe)+" listeners added. Use emitter.setMaxListeners() to increase limit");Ot.name="MaxListenersExceededWarning",Ot.emitter=Ve,Ot.type=Xe,Ot.count=ot.length,function nt(Ve){console&&console.warn&&console.warn(Ve)}(Ot)}return Ve}function yt(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function Ke(Ve,Xe,xe){var it={fired:!1,wrapFn:void 0,target:Ve,type:Xe,listener:xe},gt=yt.bind(it);return gt.listener=xe,it.wrapFn=gt,gt}function Qe(Ve,Xe,xe){var it=Ve._events;if(void 0===it)return[];var gt=it[Xe];return void 0===gt?[]:"function"==typeof gt?xe?[gt.listener||gt]:[gt]:xe?function Pt(Ve){for(var Xe=new Array(Ve.length),xe=0;xe<Xe.length;++xe)Xe[xe]=Ve[xe].listener||Ve[xe];return Xe}(gt):_t(gt,gt.length)}function Be(Ve){var Xe=this._events;if(void 0!==Xe){var xe=Xe[Ve];if("function"==typeof xe)return 1;if(void 0!==xe)return xe.length}return 0}function _t(Ve,Xe){for(var xe=new Array(Xe),it=0;it<Xe;++it)xe[it]=Ve[it];return xe}function pt(Ve,Xe,xe,it){if("function"==typeof Ve.on)it.once?Ve.once(Xe,xe):Ve.on(Xe,xe);else{if("function"!=typeof Ve.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof Ve);Ve.addEventListener(Xe,function gt(It){it.once&&Ve.removeEventListener(Xe,gt),xe(It)})}}Object.defineProperty(Je,"defaultMaxListeners",{enumerable:!0,get:function(){return ct},set:function(Ve){if("number"!=typeof Ve||Ve<0||st(Ve))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+Ve+".");ct=Ve}}),Je.init=function(){(void 0===this._events||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},Je.prototype.setMaxListeners=function(Xe){if("number"!=typeof Xe||Xe<0||st(Xe))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+Xe+".");return this._maxListeners=Xe,this},Je.prototype.getMaxListeners=function(){return se(this)},Je.prototype.emit=function(Xe){for(var xe=[],it=1;it<arguments.length;it++)xe.push(arguments[it]);var gt="error"===Xe,It=this._events;if(void 0!==It)gt=gt&&void 0===It.error;else if(!gt)return!1;if(gt){var ot;if(xe.length>0&&(ot=xe[0]),ot instanceof Error)throw ot;var Ot=new Error("Unhandled error."+(ot?" ("+ot.message+")":""));throw Ot.context=ot,Ot}var ln=It[Xe];if(void 0===ln)return!1;if("function"==typeof ln)Se(ln,this,xe);else{var Jt=ln.length,Lt=_t(ln,Jt);for(it=0;it<Jt;++it)Se(Lt[it],this,xe)}return!0},Je.prototype.on=Je.prototype.addListener=function(Xe,xe){return pe(this,Xe,xe,!1)},Je.prototype.prependListener=function(Xe,xe){return pe(this,Xe,xe,!0)},Je.prototype.once=function(Xe,xe){return Ue(xe),this.on(Xe,Ke(this,Xe,xe)),this},Je.prototype.prependOnceListener=function(Xe,xe){return Ue(xe),this.prependListener(Xe,Ke(this,Xe,xe)),this},Je.prototype.off=Je.prototype.removeListener=function(Xe,xe){var it,gt,It,ot,Ot;if(Ue(xe),void 0===(gt=this._events))return this;if(void 0===(it=gt[Xe]))return this;if(it===xe||it.listener===xe)0==--this._eventsCount?this._events=Object.create(null):(delete gt[Xe],gt.removeListener&&this.emit("removeListener",Xe,it.listener||xe));else if("function"!=typeof it){for(It=-1,ot=it.length-1;ot>=0;ot--)if(it[ot]===xe||it[ot].listener===xe){Ot=it[ot].listener,It=ot;break}if(It<0)return this;0===It?it.shift():function tt(Ve,Xe){for(;Xe+1<Ve.length;Xe++)Ve[Xe]=Ve[Xe+1];Ve.pop()}(it,It),1===it.length&&(gt[Xe]=it[0]),void 0!==gt.removeListener&&this.emit("removeListener",Xe,Ot||xe)}return this},Je.prototype.removeAllListeners=function(Xe){var xe,it,gt;if(void 0===(it=this._events))return this;if(void 0===it.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==it[Xe]&&(0==--this._eventsCount?this._events=Object.create(null):delete it[Xe]),this;if(0===arguments.length){var ot,It=Object.keys(it);for(gt=0;gt<It.length;++gt)"removeListener"!==(ot=It[gt])&&this.removeAllListeners(ot);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(xe=it[Xe]))this.removeListener(Xe,xe);else if(void 0!==xe)for(gt=xe.length-1;gt>=0;gt--)this.removeListener(Xe,xe[gt]);return this},Je.prototype.listeners=function(Xe){return Qe(this,Xe,!0)},Je.prototype.rawListeners=function(Xe){return Qe(this,Xe,!1)},Je.listenerCount=function(Ve,Xe){return"function"==typeof Ve.listenerCount?Ve.listenerCount(Xe):Be.call(Ve,Xe)},Je.prototype.listenerCount=Be,Je.prototype.eventNames=function(){return this._eventsCount>0?je(this._events):[]}},204:(Kt,ft,Se)=>{Se.r(ft),Se.d(ft,{NIL:()=>J,parse:()=>pt,stringify:()=>Ke,v1:()=>bt,v3:()=>ye,v4:()=>Y,v5:()=>z,validate:()=>Ue,version:()=>_e});var je,nt=new Uint8Array(16);function st(){if(!je&&!(je=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return je(nt)}const Je=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,Ue=function ct(B){return"string"==typeof B&&Je.test(B)};for(var se=[],pe=0;pe<256;++pe)se.push((pe+256).toString(16).substr(1));const Ke=function yt(B){var W=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,G=(se[B[W+0]]+se[B[W+1]]+se[B[W+2]]+se[B[W+3]]+"-"+se[B[W+4]]+se[B[W+5]]+"-"+se[B[W+6]]+se[B[W+7]]+"-"+se[B[W+8]]+se[B[W+9]]+"-"+se[B[W+10]]+se[B[W+11]]+se[B[W+12]]+se[B[W+13]]+se[B[W+14]]+se[B[W+15]]).toLowerCase();if(!Ue(G))throw TypeError("Stringified UUID is invalid");return G};var Qe,Be,_t=0,tt=0;const bt=function Pt(B,W,G){var ne=W&&G||0,Z=W||new Array(16),ee=(B=B||{}).node||Qe,re=void 0!==B.clockseq?B.clockseq:Be;if(null==ee||null==re){var We=B.random||(B.rng||st)();null==ee&&(ee=Qe=[1|We[0],We[1],We[2],We[3],We[4],We[5]]),null==re&&(re=Be=16383&(We[6]<<8|We[7]))}var Ge=void 0!==B.msecs?B.msecs:Date.now(),qe=void 0!==B.nsecs?B.nsecs:tt+1,Ze=Ge-_t+(qe-tt)/1e4;if(Ze<0&&void 0===B.clockseq&&(re=re+1&16383),(Ze<0||Ge>_t)&&void 0===B.nsecs&&(qe=0),qe>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");_t=Ge,tt=qe,Be=re;var Ht=(1e4*(268435455&(Ge+=122192928e5))+qe)%4294967296;Z[ne++]=Ht>>>24&255,Z[ne++]=Ht>>>16&255,Z[ne++]=Ht>>>8&255,Z[ne++]=255&Ht;var zt=Ge/4294967296*1e4&268435455;Z[ne++]=zt>>>8&255,Z[ne++]=255&zt,Z[ne++]=zt>>>24&15|16,Z[ne++]=zt>>>16&255,Z[ne++]=re>>>8|128,Z[ne++]=255&re;for(var X=0;X<6;++X)Z[ne+X]=ee[X];return W||Ke(Z)},pt=function Dt(B){if(!Ue(B))throw TypeError("Invalid UUID");var W,G=new Uint8Array(16);return G[0]=(W=parseInt(B.slice(0,8),16))>>>24,G[1]=W>>>16&255,G[2]=W>>>8&255,G[3]=255&W,G[4]=(W=parseInt(B.slice(9,13),16))>>>8,G[5]=255&W,G[6]=(W=parseInt(B.slice(14,18),16))>>>8,G[7]=255&W,G[8]=(W=parseInt(B.slice(19,23),16))>>>8,G[9]=255&W,G[10]=(W=parseInt(B.slice(24,36),16))/1099511627776&255,G[11]=W/4294967296&255,G[12]=W>>>24&255,G[13]=W>>>16&255,G[14]=W>>>8&255,G[15]=255&W,G};function it(B,W,G){function ne(Z,ee,re,We){if("string"==typeof Z&&(Z=function Ve(B){B=unescape(encodeURIComponent(B));for(var W=[],G=0;G<B.length;++G)W.push(B.charCodeAt(G));return W}(Z)),"string"==typeof ee&&(ee=pt(ee)),16!==ee.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var Ge=new Uint8Array(16+Z.length);if(Ge.set(ee),Ge.set(Z,ee.length),(Ge=G(Ge))[6]=15&Ge[6]|W,Ge[8]=63&Ge[8]|128,re){We=We||0;for(var qe=0;qe<16;++qe)re[We+qe]=Ge[qe];return re}return Ke(Ge)}try{ne.name=B}catch(Z){}return ne.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",ne.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",ne}function ot(B){return 14+(B+64>>>9<<4)+1}function Jt(B,W){var G=(65535&B)+(65535&W);return(B>>16)+(W>>16)+(G>>16)<<16|65535&G}function St(B,W,G,ne,Z,ee){return Jt(function Lt(B,W){return B<<W|B>>>32-W}(Jt(Jt(W,B),Jt(ne,ee)),Z),G)}function ut(B,W,G,ne,Z,ee,re){return St(W&G|~W&ne,B,W,Z,ee,re)}function ke(B,W,G,ne,Z,ee,re){return St(W&ne|G&~ne,B,W,Z,ee,re)}function de(B,W,G,ne,Z,ee,re){return St(W^G^ne,B,W,Z,ee,re)}function De(B,W,G,ne,Z,ee,re){return St(G^(W|~ne),B,W,Z,ee,re)}const ye=it("v3",48,function gt(B){if("string"==typeof B){var W=unescape(encodeURIComponent(B));B=new Uint8Array(W.length);for(var G=0;G<W.length;++G)B[G]=W.charCodeAt(G)}return function It(B){for(var W=[],G=32*B.length,ne="0123456789abcdef",Z=0;Z<G;Z+=8){var ee=B[Z>>5]>>>Z%32&255,re=parseInt(ne.charAt(ee>>>4&15)+ne.charAt(15&ee),16);W.push(re)}return W}(function Ot(B,W){B[W>>5]|=128<<W%32,B[ot(W)-1]=W;for(var G=1732584193,ne=-271733879,Z=-1732584194,ee=271733878,re=0;re<B.length;re+=16){var We=G,Ge=ne,qe=Z,Ze=ee;G=ut(G,ne,Z,ee,B[re],7,-680876936),ee=ut(ee,G,ne,Z,B[re+1],12,-389564586),Z=ut(Z,ee,G,ne,B[re+2],17,606105819),ne=ut(ne,Z,ee,G,B[re+3],22,-1044525330),G=ut(G,ne,Z,ee,B[re+4],7,-176418897),ee=ut(ee,G,ne,Z,B[re+5],12,1200080426),Z=ut(Z,ee,G,ne,B[re+6],17,-1473231341),ne=ut(ne,Z,ee,G,B[re+7],22,-45705983),G=ut(G,ne,Z,ee,B[re+8],7,1770035416),ee=ut(ee,G,ne,Z,B[re+9],12,-1958414417),Z=ut(Z,ee,G,ne,B[re+10],17,-42063),ne=ut(ne,Z,ee,G,B[re+11],22,-1990404162),G=ut(G,ne,Z,ee,B[re+12],7,1804603682),ee=ut(ee,G,ne,Z,B[re+13],12,-40341101),Z=ut(Z,ee,G,ne,B[re+14],17,-1502002290),G=ke(G,ne=ut(ne,Z,ee,G,B[re+15],22,1236535329),Z,ee,B[re+1],5,-165796510),ee=ke(ee,G,ne,Z,B[re+6],9,-1069501632),Z=ke(Z,ee,G,ne,B[re+11],14,643717713),ne=ke(ne,Z,ee,G,B[re],20,-373897302),G=ke(G,ne,Z,ee,B[re+5],5,-701558691),ee=ke(ee,G,ne,Z,B[re+10],9,38016083),Z=ke(Z,ee,G,ne,B[re+15],14,-660478335),ne=ke(ne,Z,ee,G,B[re+4],20,-405537848),G=ke(G,ne,Z,ee,B[re+9],5,568446438),ee=ke(ee,G,ne,Z,B[re+14],9,-1019803690),Z=ke(Z,ee,G,ne,B[re+3],14,-187363961),ne=ke(ne,Z,ee,G,B[re+8],20,1163531501),G=ke(G,ne,Z,ee,B[re+13],5,-1444681467),ee=ke(ee,G,ne,Z,B[re+2],9,-51403784),Z=ke(Z,ee,G,ne,B[re+7],14,1735328473),G=de(G,ne=ke(ne,Z,ee,G,B[re+12],20,-1926607734),Z,ee,B[re+5],4,-378558),ee=de(ee,G,ne,Z,B[re+8],11,-2022574463),Z=de(Z,ee,G,ne,B[re+11],16,1839030562),ne=de(ne,Z,ee,G,B[re+14],23,-35309556),G=de(G,ne,Z,ee,B[re+1],4,-1530992060),ee=de(ee,G,ne,Z,B[re+4],11,1272893353),Z=de(Z,ee,G,ne,B[re+7],16,-155497632),ne=de(ne,Z,ee,G,B[re+10],23,-1094730640),G=de(G,ne,Z,ee,B[re+13],4,681279174),ee=de(ee,G,ne,Z,B[re],11,-358537222),Z=de(Z,ee,G,ne,B[re+3],16,-722521979),ne=de(ne,Z,ee,G,B[re+6],23,76029189),G=de(G,ne,Z,ee,B[re+9],4,-640364487),ee=de(ee,G,ne,Z,B[re+12],11,-421815835),Z=de(Z,ee,G,ne,B[re+15],16,530742520),G=De(G,ne=de(ne,Z,ee,G,B[re+2],23,-995338651),Z,ee,B[re],6,-198630844),ee=De(ee,G,ne,Z,B[re+7],10,1126891415),Z=De(Z,ee,G,ne,B[re+14],15,-1416354905),ne=De(ne,Z,ee,G,B[re+5],21,-57434055),G=De(G,ne,Z,ee,B[re+12],6,1700485571),ee=De(ee,G,ne,Z,B[re+3],10,-1894986606),Z=De(Z,ee,G,ne,B[re+10],15,-1051523),ne=De(ne,Z,ee,G,B[re+1],21,-2054922799),G=De(G,ne,Z,ee,B[re+8],6,1873313359),ee=De(ee,G,ne,Z,B[re+15],10,-30611744),Z=De(Z,ee,G,ne,B[re+6],15,-1560198380),ne=De(ne,Z,ee,G,B[re+13],21,1309151649),G=De(G,ne,Z,ee,B[re+4],6,-145523070),ee=De(ee,G,ne,Z,B[re+11],10,-1120210379),Z=De(Z,ee,G,ne,B[re+2],15,718787259),ne=De(ne,Z,ee,G,B[re+9],21,-343485551),G=Jt(G,We),ne=Jt(ne,Ge),Z=Jt(Z,qe),ee=Jt(ee,Ze)}return[G,ne,Z,ee]}(function ln(B){if(0===B.length)return[];for(var W=8*B.length,G=new Uint32Array(ot(W)),ne=0;ne<W;ne+=8)G[ne>>5]|=(255&B[ne/8])<<ne%32;return G}(B),8*B.length))}),Y=function Oe(B,W,G){var ne=(B=B||{}).random||(B.rng||st)();if(ne[6]=15&ne[6]|64,ne[8]=63&ne[8]|128,W){G=G||0;for(var Z=0;Z<16;++Z)W[G+Z]=ne[Z];return W}return Ke(ne)};function K(B,W,G,ne){switch(B){case 0:return W&G^~W&ne;case 1:case 3:return W^G^ne;case 2:return W&G^W&ne^G&ne}}function q(B,W){return B<<W|B>>>32-W}const z=it("v5",80,function ie(B){var W=[1518500249,1859775393,2400959708,3395469782],G=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof B){var ne=unescape(encodeURIComponent(B));B=[];for(var Z=0;Z<ne.length;++Z)B.push(ne.charCodeAt(Z))}else Array.isArray(B)||(B=Array.prototype.slice.call(B));B.push(128);for(var re=Math.ceil((B.length/4+2)/16),We=new Array(re),Ge=0;Ge<re;++Ge){for(var qe=new Uint32Array(16),Ze=0;Ze<16;++Ze)qe[Ze]=B[64*Ge+4*Ze]<<24|B[64*Ge+4*Ze+1]<<16|B[64*Ge+4*Ze+2]<<8|B[64*Ge+4*Ze+3];We[Ge]=qe}We[re-1][14]=8*(B.length-1)/Math.pow(2,32),We[re-1][14]=Math.floor(We[re-1][14]),We[re-1][15]=8*(B.length-1)&4294967295;for(var Ht=0;Ht<re;++Ht){for(var zt=new Uint32Array(80),X=0;X<16;++X)zt[X]=We[Ht][X];for(var x=16;x<80;++x)zt[x]=q(zt[x-3]^zt[x-8]^zt[x-14]^zt[x-16],1);for(var te=G[0],me=G[1],ue=G[2],be=G[3],Le=G[4],Rt=0;Rt<80;++Rt){var Tt=Math.floor(Rt/20),Ct=q(te,5)+K(Tt,me,ue,be)+Le+W[Tt]+zt[Rt]>>>0;Le=be,be=ue,ue=q(me,30)>>>0,me=te,te=Ct}G[0]=G[0]+te>>>0,G[1]=G[1]+me>>>0,G[2]=G[2]+ue>>>0,G[3]=G[3]+be>>>0,G[4]=G[4]+Le>>>0}return[G[0]>>24&255,G[0]>>16&255,G[0]>>8&255,255&G[0],G[1]>>24&255,G[1]>>16&255,G[1]>>8&255,255&G[1],G[2]>>24&255,G[2]>>16&255,G[2]>>8&255,255&G[2],G[3]>>24&255,G[3]>>16&255,G[3]>>8&255,255&G[3],G[4]>>24&255,G[4]>>16&255,G[4]>>8&255,255&G[4]]}),J="00000000-0000-0000-0000-000000000000",_e=function fe(B){if(!Ue(B))throw TypeError("Invalid UUID");return parseInt(B.substr(14,1),16)}},114:(Kt,ft,Se)=>{function nt(k){let U="";for(let H=0;H<k.length;H++)U+=String.fromCharCode(k[H]);return btoa(U)}function st(k){const U=atob(k),H=new Uint8Array(U.length);for(let j=0;j<U.length;j++)H[j]=U.charCodeAt(j);return H}function Je(k){return atob(k)}Se.r(ft),Se.d(ft,{MapperTypeNames:()=>ie,ServiceClient:()=>qi,XML_ATTRKEY:()=>ct,XML_CHARKEY:()=>Ue,authorizeRequestOnClaimChallenge:()=>Zs,authorizeRequestOnTenantChallenge:()=>ys,createClientPipeline:()=>Ct,createSerializer:()=>Pt,deserializationPolicy:()=>ee,deserializationPolicyName:()=>Z,serializationPolicy:()=>ue,serializationPolicyName:()=>me});const ct="$",Ue="_";function se(k,U){return"Composite"!==U&&"Dictionary"!==U&&("string"==typeof k||"number"==typeof k||"boolean"==typeof k||null!==(null==U?void 0:U.match(/^(Date|DateTime|DateTimeRfc1123|UnixTime|ByteArray|Base64Url)$/i))||null==k)}const pe=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,Ke=/^[0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}$/i;function _t(k,U){var H,j;const ge=k.parsedHeaders;if("HEAD"===k.request.method)return Object.assign(Object.assign({},ge),{body:k.parsedBody});const Ie=U&&U.bodyMapper,ve=!(null==Ie||!Ie.nullable),Ne=null==Ie?void 0:Ie.type.name;if("Stream"===Ne)return Object.assign(Object.assign({},ge),{blobBody:k.blobBody,readableStreamBody:k.readableStreamBody});const He="Composite"===Ne&&Ie.type.modelProperties||{},Re=Object.keys(He).some(Fe=>""===He[Fe].serializedName);if("Sequence"===Ne||Re){const Fe=null!==(H=k.parsedBody)&&void 0!==H?H:[];for(const dt of Object.keys(He))He[dt].serializedName&&(Fe[dt]=null===(j=k.parsedBody)||void 0===j?void 0:j[dt]);if(ge)for(const dt of Object.keys(ge))Fe[dt]=ge[dt];return!ve||k.parsedBody||ge||0!==Object.getOwnPropertyNames(He).length?Fe:null}return function Be(k){const U=Object.assign(Object.assign({},k.headers),k.body);return k.hasNullableType&&0===Object.getOwnPropertyNames(U).length?k.shouldWrapBody?{body:null}:null:k.shouldWrapBody?Object.assign(Object.assign({},k.headers),{body:k.body}):U}({body:k.parsedBody,headers:ge,hasNullableType:ve,shouldWrapBody:se(k.parsedBody,Ne)})}class tt{constructor(U={},H=!1){this.modelMappers=U,this.isXML=H}validateConstraints(U,H,j){const ge=(Ie,ve)=>{throw new Error('"'.concat(j,'" with value "').concat(H,'" should satisfy the constraint "').concat(Ie,'": ').concat(ve,"."))};if(U.constraints&&null!=H){const{ExclusiveMaximum:Ie,ExclusiveMinimum:ve,InclusiveMaximum:Ne,InclusiveMinimum:He,MaxItems:Re,MaxLength:Fe,MinItems:dt,MinLength:mt,MultipleOf:Ut,Pattern:Qt,UniqueItems:bn}=U.constraints;if(void 0!==Ie&&H>=Ie&&ge("ExclusiveMaximum",Ie),void 0!==ve&&H<=ve&&ge("ExclusiveMinimum",ve),void 0!==Ne&&H>Ne&&ge("InclusiveMaximum",Ne),void 0!==He&&H<He&&ge("InclusiveMinimum",He),void 0!==Re&&H.length>Re&&ge("MaxItems",Re),void 0!==Fe&&H.length>Fe&&ge("MaxLength",Fe),void 0!==dt&&H.length<dt&&ge("MinItems",dt),void 0!==mt&&H.length<mt&&ge("MinLength",mt),void 0!==Ut&&H%Ut!=0&&ge("MultipleOf",Ut),Qt){const pn="string"==typeof Qt?new RegExp(Qt):Qt;("string"!=typeof H||null===H.match(pn))&&ge("Pattern",Qt)}bn&&H.some((pn,Me,Pe)=>Pe.indexOf(pn)!==Me)&&ge("UniqueItems",bn)}}serialize(U,H,j,ge={xml:{}}){var Ie,ve,Ne;const He={xml:{rootName:null!==(Ie=ge.xml.rootName)&&void 0!==Ie?Ie:"",includeRoot:null!==(ve=ge.xml.includeRoot)&&void 0!==ve&&ve,xmlCharKey:null!==(Ne=ge.xml.xmlCharKey)&&void 0!==Ne?Ne:Ue}};let Re={};const Fe=U.type.name;j||(j=U.serializedName),null!==Fe.match(/^Sequence$/i)&&(Re=[]),U.isConstant&&(H=U.defaultValue);const{required:dt,nullable:mt}=U;if(dt&&mt&&void 0===H)throw new Error("".concat(j," cannot be undefined."));if(dt&&!mt&&null==H)throw new Error("".concat(j," cannot be null or undefined."));if(!dt&&!1===mt&&null===H)throw new Error("".concat(j," cannot be null."));return null==H||null!==Fe.match(/^any$/i)?Re=H:null!==Fe.match(/^(Number|String|Boolean|Object|Stream|Uuid)$/i)?Re=function it(k,U,H){if(null!=H)if(null!==k.match(/^Number$/i)){if("number"!=typeof H)throw new Error("".concat(U," with value ").concat(H," must be of type number."))}else if(null!==k.match(/^String$/i)){if("string"!=typeof H.valueOf())throw new Error("".concat(U,' with value "').concat(H,'" must be of type string.'))}else if(null!==k.match(/^Uuid$/i)){if("string"!=typeof H.valueOf()||!function Qe(k){return Ke.test(k)}(H))throw new Error("".concat(U,' with value "').concat(H,'" must be of type string and a valid uuid.'))}else if(null!==k.match(/^Boolean$/i)){if("boolean"!=typeof H)throw new Error("".concat(U," with value ").concat(H," must be of type boolean."))}else if(null!==k.match(/^Stream$/i)){const j=typeof H;if(!("string"===j||"function"==typeof H.pipe||"function"==typeof H.tee||H instanceof ArrayBuffer||ArrayBuffer.isView(H)||("function"==typeof Blob||"object"==typeof Blob)&&H instanceof Blob||"function"===j))throw new Error("".concat(U," must be a string, Blob, ArrayBuffer, ArrayBufferView, ReadableStream, or () => ReadableStream."))}return H}(Fe,j,H):null!==Fe.match(/^Enum$/i)?Re=function gt(k,U,H){if(!U)throw new Error("Please provide a set of allowedValues to validate ".concat(k," as an Enum Type."));if(!U.some(ge=>"string"==typeof ge.valueOf()?ge.toLowerCase()===H.toLowerCase():ge===H))throw new Error("".concat(H," is not a valid value for ").concat(k,". The valid values are: ").concat(JSON.stringify(U),"."));return H}(j,U.type.allowedValues,H):null!==Fe.match(/^(Date|DateTime|TimeSpan|DateTimeRfc1123|UnixTime)$/i)?Re=function Ot(k,U,H){if(null!=U)if(null!==k.match(/^Date$/i)){if(!(U instanceof Date||"string"==typeof U.valueOf()&&!isNaN(Date.parse(U))))throw new Error("".concat(H," must be an instanceof Date or a string in ISO8601 format."));U=U instanceof Date?U.toISOString().substring(0,10):new Date(U).toISOString().substring(0,10)}else if(null!==k.match(/^DateTime$/i)){if(!(U instanceof Date||"string"==typeof U.valueOf()&&!isNaN(Date.parse(U))))throw new Error("".concat(H," must be an instanceof Date or a string in ISO8601 format."));U=U instanceof Date?U.toISOString():new Date(U).toISOString()}else if(null!==k.match(/^DateTimeRfc1123$/i)){if(!(U instanceof Date||"string"==typeof U.valueOf()&&!isNaN(Date.parse(U))))throw new Error("".concat(H," must be an instanceof Date or a string in RFC-1123 format."));U=U instanceof Date?U.toUTCString():new Date(U).toUTCString()}else if(null!==k.match(/^UnixTime$/i)){if(!(U instanceof Date||"string"==typeof U.valueOf()&&!isNaN(Date.parse(U))))throw new Error("".concat(H," must be an instanceof Date or a string in RFC-1123/ISO8601 format ")+"for it to be serialized in UnixTime/Epoch format.");U=function Xe(k){if(k)return"string"==typeof k.valueOf()&&(k=new Date(k)),Math.floor(k.getTime()/1e3)}(U)}else if(null!==k.match(/^TimeSpan$/i)&&!function yt(k){return pe.test(k)}(U))throw new Error("".concat(H,' must be a string in ISO 8601 format. Instead was "').concat(U,'".'));return U}(Fe,H,j):null!==Fe.match(/^ByteArray$/i)?Re=function It(k,U){if(null!=U){if(!(U instanceof Uint8Array))throw new Error("".concat(k," must be of type Uint8Array."));U=nt(U)}return U}(j,H):null!==Fe.match(/^Base64Url$/i)?Re=function ot(k,U){if(null!=U){if(!(U instanceof Uint8Array))throw new Error("".concat(k," must be of type Uint8Array."));U=function Dt(k){if(!k)return;if(!(k instanceof Uint8Array))throw new Error("Please provide an input of type Uint8Array for converting to Base64Url.");return function bt(k,U){let H=k.length;for(;H-1>=0&&k[H-1]===U;)--H;return k.substr(0,H)}(nt(k),"=").replace(/\+/g,"-").replace(/\//g,"_")}(U)}return U}(j,H):null!==Fe.match(/^Sequence$/i)?Re=function ln(k,U,H,j,ge,Ie){var ve;if(!Array.isArray(H))throw new Error("".concat(j," must be of type Array."));let Ne=U.type.element;if(!Ne||"object"!=typeof Ne)throw new Error('element" metadata for an Array must be defined in the '+'mapper and it must of type "object" in '.concat(j,"."));"Composite"===Ne.type.name&&Ne.type.className&&(Ne=null!==(ve=k.modelMappers[Ne.type.className])&&void 0!==ve?ve:Ne);const He=[];for(let Re=0;Re<H.length;Re++){const Fe=k.serialize(Ne,H[Re],j,Ie);if(ge&&Ne.xmlNamespace){const dt=Ne.xmlNamespacePrefix?"xmlns:".concat(Ne.xmlNamespacePrefix):"xmlns";"Composite"===Ne.type.name?(He[Re]=Object.assign({},Fe),He[Re][ct]={[dt]:Ne.xmlNamespace}):(He[Re]={},He[Re][Ie.xml.xmlCharKey]=Fe,He[Re][ct]={[dt]:Ne.xmlNamespace})}else He[Re]=Fe}return He}(this,U,H,j,!!this.isXML,He):null!==Fe.match(/^Dictionary$/i)?Re=function Jt(k,U,H,j,ge,Ie){if("object"!=typeof H)throw new Error("".concat(j," must be of type object."));const ve=U.type.value;if(!ve||"object"!=typeof ve)throw new Error('"value" metadata for a Dictionary must be defined in the '+'mapper and it must of type "object" in '.concat(j,"."));const Ne={};for(const He of Object.keys(H)){const Re=k.serialize(ve,H[He],j,Ie);Ne[He]=de(ve,Re,ge,Ie)}if(ge&&U.xmlNamespace){const He=U.xmlNamespacePrefix?"xmlns:".concat(U.xmlNamespacePrefix):"xmlns",Re=Ne;return Re[ct]={[He]:U.xmlNamespace},Re}return Ne}(this,U,H,j,!!this.isXML,He):null!==Fe.match(/^Composite$/i)&&(Re=function ke(k,U,H,j,ge,Ie){if(K(k,U)&&(U=Y(k,U,H,"clientName")),null!=H){const ve={},Ne=ut(k,U,j);for(const Re of Object.keys(Ne)){const Fe=Ne[Re];if(Fe.readOnly)continue;let dt,mt=ve;if(k.isXML)dt=Fe.xmlIsWrapped?Fe.xmlName:Fe.xmlElementName||Fe.xmlName;else{const Ut=Ve(Fe.serializedName);dt=Ut.pop();for(const Qt of Ut)null==mt[Qt]&&(null!=H[Re]||void 0!==Fe.defaultValue)&&(mt[Qt]={}),mt=mt[Qt]}if(null!=mt){if(ge&&U.xmlNamespace){const Me=U.xmlNamespacePrefix?"xmlns:".concat(U.xmlNamespacePrefix):"xmlns";mt[ct]=Object.assign(Object.assign({},mt[ct]),{[Me]:U.xmlNamespace})}const Ut=""!==Fe.serializedName?j+"."+Fe.serializedName:j;let Qt=H[Re];const bn=K(k,U);bn&&bn.clientName===Re&&null==Qt&&(Qt=U.serializedName);const pn=k.serialize(Fe,Qt,Ut,Ie);if(void 0!==pn&&null!=dt){const Me=de(Fe,pn,ge,Ie);ge&&Fe.xmlIsAttribute?(mt[ct]=mt[ct]||{},mt[ct][dt]=pn):mt[dt]=ge&&Fe.xmlIsWrapped?{[Fe.xmlElementName]:Me}:Me}}}const He=function Lt(k,U,H){const j=U.type.additionalProperties;if(!j&&U.type.className){const ge=St(k,U,H);return null==ge?void 0:ge.type.additionalProperties}return j}(k,U,j);if(He){const Re=Object.keys(Ne);for(const Fe in H)Re.every(mt=>mt!==Fe)&&(ve[Fe]=k.serialize(He,H[Fe],j+'["'+Fe+'"]',Ie))}return ve}return H}(this,U,H,j,!!this.isXML,He)),Re}deserialize(U,H,j,ge={xml:{}}){var Ie,ve,Ne,He;const Re={xml:{rootName:null!==(Ie=ge.xml.rootName)&&void 0!==Ie?Ie:"",includeRoot:null!==(ve=ge.xml.includeRoot)&&void 0!==ve&&ve,xmlCharKey:null!==(Ne=ge.xml.xmlCharKey)&&void 0!==Ne?Ne:Ue},ignoreUnknownProperties:null!==(He=ge.ignoreUnknownProperties)&&void 0!==He&&He};if(null==H)return this.isXML&&"Sequence"===U.type.name&&!U.xmlIsWrapped&&(H=[]),void 0!==U.defaultValue&&(H=U.defaultValue),H;let Fe;const dt=U.type.name;if(j||(j=U.serializedName),null!==dt.match(/^Composite$/i))Fe=function le(k,U,H,j,ge){var Ie,ve;const Ne=null!==(Ie=ge.xml.xmlCharKey)&&void 0!==Ie?Ie:Ue;K(k,U)&&(U=Y(k,U,H,"serializedName"));const He=ut(k,U,j);let Re={};const Fe=[];for(const mt of Object.keys(He)){const Ut=He[mt],Qt=Ve(He[mt].serializedName);Fe.push(Qt[0]);const{serializedName:bn,xmlName:pn,xmlElementName:Me}=Ut;let Pe=j;""!==bn&&void 0!==bn&&(Pe=j+"."+bn);const Ye=Ut.headerCollectionPrefix;if(Ye){const et={};for(const rt of Object.keys(H))rt.startsWith(Ye)&&(et[rt.substring(Ye.length)]=k.deserialize(Ut.type.value,H[rt],Pe,ge)),Fe.push(rt);Re[mt]=et}else if(k.isXML)if(Ut.xmlIsAttribute&&H[ct])Re[mt]=k.deserialize(Ut,H[ct][pn],Pe,ge);else if(Ut.xmlIsMsText)void 0!==H[Ne]?Re[mt]=H[Ne]:"string"==typeof H&&(Re[mt]=H);else{const et=Me||pn||bn;if(Ut.xmlIsWrapped){const rt=H[pn],Bt=null!==(ve=null==rt?void 0:rt[Me])&&void 0!==ve?ve:[];Re[mt]=k.deserialize(Ut,Bt,Pe,ge),Fe.push(pn)}else Re[mt]=k.deserialize(Ut,H[et],Pe,ge),Fe.push(et)}else{let et,rt=H,Bt=0;for(const Un of Qt){if(!rt)break;Bt++,rt=rt[Un]}null===rt&&Bt<Qt.length&&(rt=void 0),et=rt;const xt=U.type.polymorphicDiscriminator;let Tn;if(xt&&mt===xt.clientName&&null==et&&(et=U.serializedName),Array.isArray(H[mt])&&""===He[mt].serializedName){et=H[mt];const Un=k.deserialize(Ut,et,Pe,ge);for(const[Vn,qt]of Object.entries(Re))Object.prototype.hasOwnProperty.call(Un,Vn)||(Un[Vn]=qt);Re=Un}else(void 0!==et||void 0!==Ut.defaultValue)&&(Tn=k.deserialize(Ut,et,Pe,ge),Re[mt]=Tn)}}const dt=U.type.additionalProperties;if(dt){const mt=Ut=>{for(const Qt in He)if(Ve(He[Qt].serializedName)[0]===Ut)return!1;return!0};for(const Ut in H)mt(Ut)&&(Re[Ut]=k.deserialize(dt,H[Ut],j+'["'+Ut+'"]',ge))}else if(H&&!ge.ignoreUnknownProperties)for(const mt of Object.keys(H))void 0===Re[mt]&&!Fe.includes(mt)&&!De(mt,ge)&&(Re[mt]=H[mt]);return Re}(this,U,H,j,Re);else{if(this.isXML){const mt=Re.xml.xmlCharKey;void 0!==H[ct]&&void 0!==H[mt]&&(H=H[mt])}null!==dt.match(/^Number$/i)?(Fe=parseFloat(H),isNaN(Fe)&&(Fe=H)):null!==dt.match(/^Boolean$/i)?Fe="true"===H||"false"!==H&&H:null!==dt.match(/^(String|Enum|Object|Stream|Uuid|TimeSpan|any)$/i)?Fe=H:null!==dt.match(/^(Date|DateTime|DateTimeRfc1123)$/i)?Fe=new Date(H):null!==dt.match(/^UnixTime$/i)?Fe=function xe(k){if(k)return new Date(1e3*k)}(H):null!==dt.match(/^ByteArray$/i)?Fe=st(H):null!==dt.match(/^Base64Url$/i)?Fe=function pt(k){if(k){if(k&&"string"!=typeof k.valueOf())throw new Error("Please provide an input of type string for converting to Uint8Array");return st(k=k.replace(/-/g,"+").replace(/_/g,"/"))}}(H):null!==dt.match(/^Sequence$/i)?Fe=function ye(k,U,H,j,ge){var Ie;let ve=U.type.element;if(!ve||"object"!=typeof ve)throw new Error('element" metadata for an Array must be defined in the '+'mapper and it must of type "object" in '.concat(j));if(H){Array.isArray(H)||(H=[H]),"Composite"===ve.type.name&&ve.type.className&&(ve=null!==(Ie=k.modelMappers[ve.type.className])&&void 0!==Ie?Ie:ve);const Ne=[];for(let He=0;He<H.length;He++)Ne[He]=k.deserialize(ve,H[He],"".concat(j,"[").concat(He,"]"),ge);return Ne}return H}(this,U,H,j,Re):null!==dt.match(/^Dictionary$/i)&&(Fe=function we(k,U,H,j,ge){const Ie=U.type.value;if(!Ie||"object"!=typeof Ie)throw new Error('"value" metadata for a Dictionary must be defined in the '+'mapper and it must of type "object" in '.concat(j));if(H){const ve={};for(const Ne of Object.keys(H))ve[Ne]=k.deserialize(Ie,H[Ne],j,ge);return ve}return H}(this,U,H,j,Re))}return U.isConstant&&(Fe=U.defaultValue),Fe}}function Pt(k={},U=!1){return new tt(k,U)}function Ve(k){const U=[];let H="";if(k){const j=k.split(".");for(const ge of j)"\\"===ge.charAt(ge.length-1)?H+=ge.substr(0,ge.length-1)+".":(H+=ge,U.push(H),H="")}return U}function St(k,U,H){const j=U.type.className;if(!j)throw new Error('Class name for model "'.concat(H,'" is not provided in the mapper "').concat(JSON.stringify(U,void 0,2),'".'));return k.modelMappers[j]}function ut(k,U,H){let j=U.type.modelProperties;if(!j){const ge=St(k,U,H);if(!ge)throw new Error('mapper() cannot be null or undefined for model "'.concat(U.type.className,'".'));if(j=null==ge?void 0:ge.type.modelProperties,!j)throw new Error("modelProperties cannot be null or undefined in the "+'mapper "'.concat(JSON.stringify(ge),'" of type "').concat(U.type.className,'" for object "').concat(H,'".'))}return j}function de(k,U,H,j){if(!H||!k.xmlNamespace)return U;const Ie={[k.xmlNamespacePrefix?"xmlns:".concat(k.xmlNamespacePrefix):"xmlns"]:k.xmlNamespace};if(["Composite"].includes(k.type.name)){if(U[ct])return U;{const Ne=Object.assign({},U);return Ne[ct]=Ie,Ne}}const ve={};return ve[j.xml.xmlCharKey]=U,ve[ct]=Ie,ve}function De(k,U){return[ct,U.xml.xmlCharKey].includes(k)}function Y(k,U,H,j){var ge;const Ie=K(k,U);if(Ie){let ve=Ie[j];if(ve){"serializedName"===j&&(ve=ve.replace(/\\/gi,""));const Ne=H[ve],He=null!==(ge=U.type.uberParent)&&void 0!==ge?ge:U.type.className;if("string"==typeof Ne&&He){const Re=function Oe(k,U,H){const j=[H];for(;j.length;){const ge=j.shift(),Ie=U===ge?U:ge+"."+U;if(Object.prototype.hasOwnProperty.call(k,Ie))return k[Ie];for(const[ve,Ne]of Object.entries(k))ve.startsWith(ge+".")&&Ne.type.uberParent===ge&&Ne.type.className&&j.push(Ne.type.className)}}(k.modelMappers.discriminators,Ne,He);Re&&(U=Re)}}}return U}function K(k,U){return U.type.polymorphicDiscriminator||q(k,U.type.uberParent)||q(k,U.type.className)}function q(k,U){return U&&k.modelMappers[U]&&k.modelMappers[U].type.polymorphicDiscriminator}const ie={Base64Url:"Base64Url",Boolean:"Boolean",ByteArray:"ByteArray",Composite:"Composite",Date:"Date",DateTime:"DateTime",DateTimeRfc1123:"DateTimeRfc1123",Dictionary:"Dictionary",Enum:"Enum",Number:"Number",Object:"Object",Sequence:"Sequence",String:"String",Stream:"Stream",TimeSpan:"TimeSpan",UnixTime:"UnixTime"};var oe=Se(467),L=Se(458);const z={operationRequestMap:new WeakMap};function J(k,U,H){let j=U.parameterPath;const ge=U.mapper;let Ie;if("string"==typeof j&&(j=[j]),Array.isArray(j)){if(j.length>0)if(ge.isConstant)Ie=ge.defaultValue;else{let ve=fe(k,j);!ve.propertyFound&&H&&(ve=fe(H,j));let Ne=!1;ve.propertyFound||(Ne=ge.required||"options"===j[0]&&2===j.length),Ie=Ne?ge.defaultValue:ve.propertyValue}}else{ge.required&&(Ie={});for(const ve in j){const Re=J(k,{parameterPath:j[ve],mapper:ge.type.modelProperties[ve]},H);void 0!==Re&&(Ie||(Ie={}),Ie[ve]=Re)}}return Ie}function fe(k,U){const H={propertyFound:!1};let j=0;for(;j<U.length;++j){const ge=U[j];if(!k||!(ge in k))break;k=k[ge]}return j===U.length&&(H.propertyValue=k,H.propertyFound=!0),H}const _e=Symbol.for("@azure/core-client original request");function W(k){if(function B(k){return _e in k}(k))return W(k[_e]);let U=z.operationRequestMap.get(k);return U||(U={},z.operationRequestMap.set(k,U)),U}const G=["application/json","text/json"],ne=["application/xml","application/atom+xml"],Z="deserializationPolicy";function ee(k={}){var U,H,j,ge,Ie,ve,Ne;const He=null!==(H=null===(U=k.expectedContentTypes)||void 0===U?void 0:U.json)&&void 0!==H?H:G,Re=null!==(ge=null===(j=k.expectedContentTypes)||void 0===j?void 0:j.xml)&&void 0!==ge?ge:ne,Fe=k.parseXML,dt=k.serializerOptions,mt={xml:{rootName:null!==(Ie=null==dt?void 0:dt.xml.rootName)&&void 0!==Ie?Ie:"",includeRoot:null!==(ve=null==dt?void 0:dt.xml.includeRoot)&&void 0!==ve&&ve,xmlCharKey:null!==(Ne=null==dt?void 0:dt.xml.xmlCharKey)&&void 0!==Ne?Ne:Ue}};return{name:Z,sendRequest:(Ut,Qt)=>(0,oe.A)(function*(){const bn=yield Qt(Ut);return function Ge(k,U,H,j,ge){return qe.apply(this,arguments)}(He,Re,bn,mt,Fe)})()}}function qe(){return qe=(0,oe.A)(function*(k,U,H,j,ge){const Ie=yield function zt(k,U,H,j,ge){return X.apply(this,arguments)}(k,U,H,j,ge);if(!function We(k){const H=W(k.request),j=null==H?void 0:H.shouldDeserialize;let ge;return ge=void 0===j||("boolean"==typeof j?j:j(k)),ge}(Ie))return Ie;const ve=W(Ie.request),Ne=null==ve?void 0:ve.operationSpec;if(!Ne||!Ne.responses)return Ie;const He=function re(k){let U;const j=W(k.request),ge=null==j?void 0:j.operationSpec;return ge&&(U=null!=j&&j.operationResponseGetter?null==j?void 0:j.operationResponseGetter(ge,k):ge.responses[k.status]),U}(Ie),{error:Re,shouldReturnResponse:Fe}=function Ht(k,U,H,j){var ge,Ie,ve,Ne,He;const Re=200<=k.status&&k.status<300;if(function Ze(k){const U=Object.keys(k.responses);return 0===U.length||1===U.length&&"default"===U[0]}(U)?Re:H){if(!H)return{error:null,shouldReturnResponse:!1};if(!H.isError)return{error:null,shouldReturnResponse:!1}}const dt=null!=H?H:U.responses.default,mt=null!==(ge=k.request.streamResponseStatusCodes)&&void 0!==ge&&ge.has(k.status)?"Unexpected status code: ".concat(k.status):k.bodyAsText,Ut=new L.RestError(mt,{statusCode:k.status,request:k.request,response:k});if(!(dt||null!==(ve=null===(Ie=k.parsedBody)||void 0===Ie?void 0:Ie.error)&&void 0!==ve&&ve.code&&null!==(He=null===(Ne=k.parsedBody)||void 0===Ne?void 0:Ne.error)&&void 0!==He&&He.message))throw Ut;const Qt=null==dt?void 0:dt.bodyMapper,bn=null==dt?void 0:dt.headersMapper;try{if(k.parsedBody){const pn=k.parsedBody;let Me;if(Qt){let Ye=pn;if(U.isXML&&Qt.type.name===ie.Sequence){Ye=[];const et=Qt.xmlElementName;"object"==typeof pn&&et&&(Ye=pn[et])}Me=U.serializer.deserialize(Qt,Ye,"error.response.parsedBody",j)}const Pe=pn.error||Me||pn;Ut.code=Pe.code,Pe.message&&(Ut.message=Pe.message),Qt&&(Ut.response.parsedBody=Me)}k.headers&&bn&&(Ut.response.parsedHeaders=U.serializer.deserialize(bn,k.headers.toJSON(),"operationRes.parsedHeaders"))}catch(pn){Ut.message='Error "'.concat(pn.message,'" occurred in deserializing the responseBody - "').concat(k.bodyAsText,'" for the default response.')}return{error:Ut,shouldReturnResponse:!1}}(Ie,Ne,He,j);if(Re)throw Re;if(Fe)return Ie;if(He){if(He.bodyMapper){let dt=Ie.parsedBody;Ne.isXML&&He.bodyMapper.type.name===ie.Sequence&&(dt="object"==typeof dt?dt[He.bodyMapper.xmlElementName]:[]);try{Ie.parsedBody=Ne.serializer.deserialize(He.bodyMapper,dt,"operationRes.parsedBody",j)}catch(mt){throw new L.RestError("Error ".concat(mt," occurred in deserializing the responseBody - ").concat(Ie.bodyAsText),{statusCode:Ie.status,request:Ie.request,response:Ie})}}else"HEAD"===Ne.httpMethod&&(Ie.parsedBody=H.status>=200&&H.status<300);He.headersMapper&&(Ie.parsedHeaders=Ne.serializer.deserialize(He.headersMapper,Ie.headers.toJSON(),"operationRes.parsedHeaders",{xml:{},ignoreUnknownProperties:!0}))}return Ie}),qe.apply(this,arguments)}function X(){return(X=(0,oe.A)(function*(k,U,H,j,ge){var Ie;if((null===(Ie=H.request.streamResponseStatusCodes)||void 0===Ie||!Ie.has(H.status))&&H.bodyAsText){const ve=H.bodyAsText,Ne=H.headers.get("Content-Type")||"",He=Ne?Ne.split(";").map(Re=>Re.toLowerCase()):[];try{if(0===He.length||He.some(Re=>-1!==k.indexOf(Re)))return H.parsedBody=JSON.parse(ve),H;if(He.some(Re=>-1!==U.indexOf(Re))){if(!ge)throw new Error("Parsing XML not supported.");const Re=yield ge(ve,j.xml);return H.parsedBody=Re,H}}catch(Re){const Fe='Error "'.concat(Re,'" occurred while parsing the response body - ').concat(H.bodyAsText,".");throw new L.RestError(Fe,{code:Re.code||L.RestError.PARSE_ERROR,statusCode:H.status,request:H.request,response:H})}}return H})).apply(this,arguments)}function te(k){const{parameterPath:U,mapper:H}=k;let j;return j="string"==typeof U?U:Array.isArray(U)?U.join("."):H.serializedName,j}const me="serializationPolicy";function ue(k={}){const U=k.stringifyXML;return{name:me,sendRequest:(H,j)=>(0,oe.A)(function*(){const ge=W(H),Ie=null==ge?void 0:ge.operationSpec,ve=null==ge?void 0:ge.operationArguments;return Ie&&ve&&(function be(k,U,H){var j,ge;if(H.headerParameters)for(const ve of H.headerParameters){let Ne=J(U,ve);if(null!=Ne||ve.mapper.required){Ne=H.serializer.serialize(ve.mapper,Ne,te(ve));const He=ve.mapper.headerCollectionPrefix;if(He)for(const Re of Object.keys(Ne))k.headers.set(He+Re,Ne[Re]);else k.headers.set(ve.mapper.serializedName||te(ve),Ne)}}const Ie=null===(ge=null===(j=U.options)||void 0===j?void 0:j.requestOptions)||void 0===ge?void 0:ge.customHeaders;if(Ie)for(const ve of Object.keys(Ie))k.headers.set(ve,Ie[ve])}(H,ve,Ie),function Le(k,U,H,j=function(){throw new Error("XML serialization unsupported!")}){var ge,Ie,ve,Ne,He;const Re=null===(ge=U.options)||void 0===ge?void 0:ge.serializerOptions,Fe={xml:{rootName:null!==(Ie=null==Re?void 0:Re.xml.rootName)&&void 0!==Ie?Ie:"",includeRoot:null!==(ve=null==Re?void 0:Re.xml.includeRoot)&&void 0!==ve&&ve,xmlCharKey:null!==(Ne=null==Re?void 0:Re.xml.xmlCharKey)&&void 0!==Ne?Ne:Ue}},dt=Fe.xml.xmlCharKey;if(H.requestBody&&H.requestBody.mapper){k.body=J(U,H.requestBody);const mt=H.requestBody.mapper,{required:Ut,serializedName:Qt,xmlName:bn,xmlElementName:pn,xmlNamespace:Me,xmlNamespacePrefix:Pe,nullable:Ye}=mt,et=mt.type.name;try{if(null!=k.body||Ye&&null===k.body||Ut){const rt=te(H.requestBody);k.body=H.serializer.serialize(mt,k.body,rt,Fe);const Bt=et===ie.Stream;if(H.isXML){const xt=Pe?"xmlns:".concat(Pe):"xmlns",Tn=function Rt(k,U,H,j,ge){if(k&&!["Composite","Sequence","Dictionary"].includes(H)){const Ie={};return Ie[ge.xml.xmlCharKey]=j,Ie[ct]={[U]:k},Ie}return j}(Me,xt,et,k.body,Fe);et===ie.Sequence?k.body=j(function Tt(k,U,H,j){if(Array.isArray(k)||(k=[k]),!H||!j)return{[U]:k};const ge={[U]:k};return ge[ct]={[H]:j},ge}(Tn,pn||bn||Qt,xt,Me),{rootName:bn||Qt,xmlCharKey:dt}):Bt||(k.body=j(Tn,{rootName:bn||Qt,xmlCharKey:dt}))}else{if(et===ie.String&&(null!==(He=H.contentType)&&void 0!==He&&He.match("text/plain")||"text"===H.mediaType))return;Bt||(k.body=JSON.stringify(k.body))}}}catch(rt){throw new Error('Error "'.concat(rt.message,'" occurred in serializing the payload - ').concat(JSON.stringify(Qt,void 0,"  "),"."))}}else if(H.formDataParameters&&H.formDataParameters.length>0){k.formData={};for(const mt of H.formDataParameters){const Ut=J(U,mt);if(null!=Ut){const Qt=mt.mapper.serializedName||te(mt);k.formData[Qt]=H.serializer.serialize(mt.mapper,Ut,te(mt),Fe)}}}}(H,ve,Ie,U)),j(H)})()}}function Ct(k={}){const U=(0,L.createPipelineFromOptions)(null!=k?k:{});return k.credentialOptions&&U.addPolicy((0,L.bearerTokenAuthenticationPolicy)({credential:k.credentialOptions.credential,scopes:k.credentialOptions.credentialScopes})),U.addPolicy(ue(k.serializationOptions),{phase:"Serialize"}),U.addPolicy(ee(k.deserializationOptions),{phase:"Deserialize"}),U}let jt;const kn={CSV:",",SSV:" ",Multi:"Multi",TSV:"\t",Pipes:"|"};function nr(k,U){let H=k;for(const[j,ge]of U)H=H.split(j).join(ge);return H}const so=(0,Se(992).KV)("core-client");class qi{constructor(U={}){var H,j;if(this._requestContentType=U.requestContentType,this._endpoint=null!==(H=U.endpoint)&&void 0!==H?H:U.baseUri,U.baseUri&&so.warning("The baseUri option for SDK Clients has been deprecated, please use endpoint instead."),this._allowInsecureConnection=U.allowInsecureConnection,this._httpClient=U.httpClient||function yn(){return jt||(jt=(0,L.createDefaultHttpClient)()),jt}(),this.pipeline=U.pipeline||function gs(k){const U=function Kn(k){if(k.credentialScopes)return k.credentialScopes;if(k.endpoint)return"".concat(k.endpoint,"/.default");if(k.baseUri)return"".concat(k.baseUri,"/.default");if(k.credential&&!k.credentialScopes)throw new Error("When using credentials, the ServiceClientOptions must contain either a endpoint or a credentialScopes. Unable to create a bearerTokenAuthenticationPolicy")}(k),H=k.credential&&U?{credentialScopes:U,credential:k.credential}:void 0;return Ct(Object.assign(Object.assign({},k),{credentialOptions:H}))}(U),null!==(j=U.additionalPolicies)&&void 0!==j&&j.length)for(const{policy:ge,position:Ie}of U.additionalPolicies)this.pipeline.addPolicy(ge,{afterPhase:"perRetry"===Ie?"Sign":void 0})}sendRequest(U){var H=this;return(0,oe.A)(function*(){return H.pipeline.sendRequest(H._httpClient,U)})()}sendOperationRequest(U,H){var j=this;return(0,oe.A)(function*(){const ge=H.baseUrl||j._endpoint;if(!ge)throw new Error("If operationSpec.baseUrl is not specified, then the ServiceClient must have a endpoint string property that contains the base URL to use.");const Ie=function Gn(k,U,H,j){const ge=function $i(k,U,H){var j;const ge=new Map;if(null!==(j=k.urlParameters)&&void 0!==j&&j.length)for(const Ie of k.urlParameters){let ve=J(U,Ie,H);const Ne=te(Ie);ve=k.serializer.serialize(Ie.mapper,ve,Ne),Ie.skipEncoding||(ve=encodeURIComponent(ve)),ge.set("{".concat(Ie.mapper.serializedName||Ne,"}"),ve)}return ge}(U,H,j);let Ie=!1,ve=nr(k,ge);if(U.path){let Re=nr(U.path,ge);"/{nextLink}"===U.path&&Re.startsWith("/")&&(Re=Re.substring(1)),function yo(k){return k.includes("://")}(Re)?(ve=Re,Ie=!0):ve=function Ho(k,U){if(!U)return k;const H=new URL(k);let j=H.pathname;j.endsWith("/")||(j="".concat(j,"/")),U.startsWith("/")&&(U=U.substring(1));const ge=U.indexOf("?");if(-1!==ge){const Ie=U.substring(0,ge),ve=U.substring(ge+1);j+=Ie,ve&&(H.search=H.search?"".concat(H.search,"&").concat(ve):ve)}else j+=U;return H.pathname=j,H.toString()}(ve,Re)}const{queryParams:Ne,sequenceParams:He}=function Xs(k,U,H){var j;const ge=new Map,Ie=new Set;if(null!==(j=k.queryParameters)&&void 0!==j&&j.length)for(const ve of k.queryParameters){"Sequence"===ve.mapper.type.name&&ve.mapper.serializedName&&Ie.add(ve.mapper.serializedName);let Ne=J(U,ve,H);if(null!=Ne||ve.mapper.required){Ne=k.serializer.serialize(ve.mapper,Ne,te(ve));const He=ve.collectionFormat?kn[ve.collectionFormat]:"";if(Array.isArray(Ne)&&(Ne=Ne.map(Re=>null==Re?"":Re)),"Multi"===ve.collectionFormat&&0===Ne.length)continue;Array.isArray(Ne)&&("SSV"===ve.collectionFormat||"TSV"===ve.collectionFormat)&&(Ne=Ne.join(He)),ve.skipEncoding||(Ne=Array.isArray(Ne)?Ne.map(Re=>encodeURIComponent(Re)):encodeURIComponent(Ne)),Array.isArray(Ne)&&("CSV"===ve.collectionFormat||"Pipes"===ve.collectionFormat)&&(Ne=Ne.join(He)),ge.set(ve.mapper.serializedName||te(ve),Ne)}}return{queryParams:ge,sequenceParams:Ie}}(U,H,j);return ve=function Ys(k,U,H,j=!1){if(0===U.size)return k;const ge=new URL(k),Ie=function Hi(k){const U=new Map;if(!k||"?"!==k[0])return U;const H=(k=k.slice(1)).split("&");for(const j of H){const[ge,Ie]=j.split("=",2),ve=U.get(ge);ve?Array.isArray(ve)?ve.push(Ie):U.set(ge,[ve,Ie]):U.set(ge,Ie)}return U}(ge.search);for(const[Ne,He]of U){const Re=Ie.get(Ne);if(Array.isArray(Re))if(Array.isArray(He)){Re.push(...He);const Fe=new Set(Re);Ie.set(Ne,Array.from(Fe))}else Re.push(He);else Re?(Array.isArray(He)?He.unshift(Re):H.has(Ne)&&Ie.set(Ne,[Re,He]),j||Ie.set(Ne,He)):Ie.set(Ne,He)}const ve=[];for(const[Ne,He]of Ie)if("string"==typeof He)ve.push("".concat(Ne,"=").concat(He));else if(Array.isArray(He))for(const Re of He)ve.push("".concat(Ne,"=").concat(Re));else ve.push("".concat(Ne,"=").concat(He));return ge.search=ve.length?"?".concat(ve.join("&")):"",ge.toString()}(ve,Ne,He,Ie),ve}(ge,H,U,j),ve=(0,L.createPipelineRequest)({url:Ie});ve.method=H.httpMethod;const Ne=W(ve);Ne.operationSpec=H,Ne.operationArguments=U;const He=H.contentType||j._requestContentType;He&&H.requestBody&&ve.headers.set("Content-Type",He);const Re=U.options;if(Re){const Fe=Re.requestOptions;Fe&&(Fe.timeout&&(ve.timeout=Fe.timeout),Fe.onUploadProgress&&(ve.onUploadProgress=Fe.onUploadProgress),Fe.onDownloadProgress&&(ve.onDownloadProgress=Fe.onDownloadProgress),void 0!==Fe.shouldDeserialize&&(Ne.shouldDeserialize=Fe.shouldDeserialize),Fe.allowInsecureConnection&&(ve.allowInsecureConnection=!0)),Re.abortSignal&&(ve.abortSignal=Re.abortSignal),Re.tracingOptions&&(ve.tracingOptions=Re.tracingOptions)}j._allowInsecureConnection&&(ve.allowInsecureConnection=!0),void 0===ve.streamResponseStatusCodes&&(ve.streamResponseStatusCodes=function x(k){const U=new Set;for(const H in k.responses){const j=k.responses[H];j.bodyMapper&&j.bodyMapper.type.name===ie.Stream&&U.add(Number(H))}return U}(H));try{const Fe=yield j.sendRequest(ve),dt=_t(Fe,H.responses[Fe.status]);return null!=Re&&Re.onResponse&&Re.onResponse(Fe,dt),dt}catch(Fe){if("object"==typeof Fe&&null!=Fe&&Fe.response){const dt=Fe.response,mt=_t(dt,H.responses[Fe.statusCode]||H.responses.default);Fe.details=mt,null!=Re&&Re.onResponse&&Re.onResponse(dt,mt,Fe)}throw Fe}})()}}function Zs(k){return Wi.apply(this,arguments)}function Wi(){return(Wi=(0,oe.A)(function*(k){var U;const{scopes:H,response:j}=k,ge=k.logger||so,Ie=j.headers.get("WWW-Authenticate");if(!Ie)return ge.info("The WWW-Authenticate header was missing. Failed to perform the Continuous Access Evaluation authentication flow."),!1;const Ne=(function ms(k){return", ".concat(k.trim()).split(", Bearer ").filter(H=>H).map(H=>"".concat(H.trim(),", ").split('", ').filter(Ie=>Ie).map(Ie=>(([ve,Ne])=>({[ve]:Ne}))(Ie.trim().split('="'))).reduce((Ie,ve)=>Object.assign(Object.assign({},Ie),ve),{}))}(Ie)||[]).find(Re=>Re.claims);if(!Ne)return ge.info('The WWW-Authenticate header was missing the necessary "claims" to perform the Continuous Access Evaluation authentication flow.'),!1;const He=yield k.getAccessToken(Ne.scope?[Ne.scope]:H,{claims:Je(Ne.claims)});return!!He&&(k.request.headers.set("Authorization","".concat(null!==(U=He.tokenType)&&void 0!==U?U:"Bearer"," ").concat(He.token)),!0)})).apply(this,arguments)}const Jr_HeaderConstants_AUTHORIZATION="authorization",ys=function(){var k=(0,oe.A)(function*(U){var H;const j=function $e(k){return{abortSignal:k.abortSignal,requestOptions:{timeout:k.timeout},tracingOptions:k.tracingOptions}}(U.request),ge=function he(k){const U=k.headers.get("WWW-Authenticate");if(401===k.status&&U)return U}(U.response);if(ge){const Ie=function Te(k){const U=k.slice(7);return"".concat(U.trim()," ").split(" ").filter(ge=>ge).map(ge=>(([Ie,ve])=>({[Ie]:ve}))(ge.trim().split("="))).reduce((ge,Ie)=>Object.assign(Object.assign({},ge),Ie),{})}(ge),ve=function ce(k,U){if(!U.resource_id)return k.scopes;const H=new URL(U.resource_id);H.pathname="/.default";let j=H.toString();return"https://disk.azure.com/.default"===j&&(j="https://disk.azure.com//.default"),[j]}(U,Ie),Ne=function rr(k){const j=new URL(k.authorization_uri).pathname.split("/")[1];if(j&&function fr(k){return/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/.test(k)}(j))return j}(Ie);if(!Ne)return!1;const He=yield U.getAccessToken(ve,Object.assign(Object.assign({},j),{tenantId:Ne}));return!!He&&(U.request.headers.set(Jr_HeaderConstants_AUTHORIZATION,"".concat(null!==(H=He.tokenType)&&void 0!==H?H:"Bearer"," ").concat(He.token)),!0)}return!1});return function(H){return k.apply(this,arguments)}}()},458:(Kt,ft,Se)=>{Se.r(ft),Se.d(ft,{RestError:()=>Tt,agentPolicy:()=>ue,agentPolicyName:()=>me,auxiliaryAuthenticationHeaderPolicy:()=>pn,auxiliaryAuthenticationHeaderPolicyName:()=>mt,bearerTokenAuthenticationPolicy:()=>Ne,bearerTokenAuthenticationPolicyName:()=>$e,createDefaultHttpClient:()=>zi,createEmptyPipeline:()=>nt,createFile:()=>G,createFileFromStream:()=>W,createHttpHeaders:()=>so,createPipelineFromOptions:()=>Ys,createPipelineRequest:()=>qi,decompressResponsePolicy:()=>re,decompressResponsePolicyName:()=>ee,defaultRetryPolicy:()=>Ge,exponentialRetryPolicy:()=>Kn,exponentialRetryPolicyName:()=>gs,formDataPolicy:()=>Ze,formDataPolicyName:()=>qe,getDefaultProxySettings:()=>zt,isRestError:()=>Ct,logPolicy:()=>Ot,logPolicyName:()=>ot,multipartPolicy:()=>Z,multipartPolicyName:()=>ne,ndJsonPolicy:()=>dt,ndJsonPolicyName:()=>Fe,proxyPolicy:()=>X,proxyPolicyName:()=>Ht,redirectPolicy:()=>Jt,redirectPolicyName:()=>ln,retryPolicy:()=>ys,setClientRequestIdPolicy:()=>te,setClientRequestIdPolicyName:()=>x,systemErrorRetryPolicy:()=>Zs,systemErrorRetryPolicyName:()=>ms,throttlingRetryPolicy:()=>Jr,throttlingRetryPolicyName:()=>Wi,tlsPolicy:()=>Le,tlsPolicyName:()=>be,tracingPolicy:()=>kn,tracingPolicyName:()=>yn,userAgentPolicy:()=>oe,userAgentPolicyName:()=>ie});var je=Se(201);function nt(){return(0,je.O8)()}var st=Se(992);const Je=(0,st.KV)("core-rest-pipeline");var ct=Se(970),Ue=Se(879),se=Se(978),pe=Se(362),yt=Se(709),Ke=Se(875);const _t="systemErrorRetryPolicy";var Pt=Se(396);const bt="throttlingRetryPolicy";var pt=Se(121),Ve=Se(885),Xe=Se(535),xe=Se(248),it=Se(767),gt=Se(70);Se(489);const ot=Ve.G;function Ot(Me={}){return(0,Ve.r)(Object.assign({logger:Je.info},Me))}const ln=it.O;function Jt(Me={}){return(0,it.x)(Me)}var Lt=Se(467);function De(){return(De=(0,Lt.A)(function*(Me){const Pe=globalThis.navigator;let Ye="unknown";if(null!=Pe&&Pe.userAgentData){const et=yield Pe.userAgentData.getHighEntropyValues(["architecture","platformVersion"]);Ye="".concat(et.architecture,"-").concat(et.platform,"-").concat(et.platformVersion);const rt=function ke(Me){const Pe=["Google Chrome","Microsoft Edge","Opera","Brave","Chromium"];for(const Ye of Pe){const et=Me.find(rt=>rt.brand===Ye);if(et)return et}}(Pe.userAgentData.brands);rt&&Me.set(rt.brand,rt.version)}else if(null!=Pe&&Pe.platform){Ye=Pe.platform;const et=function ut(Me){const Pe=[{name:"Firefox",regex:/Firefox\/([\d.]+)/},{name:"Safari",regex:/Version\/([\d.]+).*Safari/}];for(const Ye of Pe){const et=Me.match(Ye.regex);if(et)return{brand:Ye.name,version:et[1]}}}(Pe.userAgent);et&&Me.set(et.brand,et.version)}else"string"==typeof globalThis.EdgeRuntime&&Me.set("EdgeRuntime",globalThis.EdgeRuntime);Me.set("OS",Ye)})).apply(this,arguments)}const le="1.22.0",we=3;function Y(Me){return K.apply(this,arguments)}function K(){return K=(0,Lt.A)(function*(Me){const Pe=new Map;Pe.set("core-rest-pipeline",le),yield function de(Me){return De.apply(this,arguments)}(Pe);const Ye=function ye(Me){const Pe=[];for(const[Ye,et]of Me){const rt=et?"".concat(Ye,"/").concat(et):Ye;Pe.push(rt)}return Pe.join(" ")}(Pe);return Me?"".concat(Me," ").concat(Ye):Ye}),K.apply(this,arguments)}const q="x-ms-useragent",ie="userAgentPolicy";function oe(Me={}){const Pe=Y(Me.userAgentPrefix);return{name:ie,sendRequest:(Ye,et)=>(0,Lt.A)(function*(){return Ye.headers.has(q)||Ye.headers.set(q,yield Pe),et(Ye)})()}}var L=Se(124);const J={arrayBuffer:()=>{throw new Error("Not implemented")},bytes:()=>{throw new Error("Not implemented")},slice:()=>{throw new Error("Not implemented")},text:()=>{throw new Error("Not implemented")}},fe=Symbol("rawContent");function _e(Me){return"function"==typeof Me[fe]}function B(Me){return _e(Me)?Me[fe]():Me}function W(Me,Pe,Ye={}){var et,rt,Bt,xt;return Object.assign(Object.assign({},J),{type:null!==(et=Ye.type)&&void 0!==et?et:"",lastModified:null!==(rt=Ye.lastModified)&&void 0!==rt?rt:(new Date).getTime(),webkitRelativePath:null!==(Bt=Ye.webkitRelativePath)&&void 0!==Bt?Bt:"",size:null!==(xt=Ye.size)&&void 0!==xt?xt:-1,name:Pe,stream:()=>{const Tn=Me();if(function z(Me){return!(!Me||"function"!=typeof Me.pipe)}(Tn))throw new Error("Not supported: a Node stream was provided as input to createFileFromStream.");return Tn},[fe]:Me})}function G(Me,Pe,Ye={}){var et,rt,Bt,xt;return L.isNodeLike?Object.assign(Object.assign({},J),{type:null!==(et=Ye.type)&&void 0!==et?et:"",lastModified:null!==(rt=Ye.lastModified)&&void 0!==rt?rt:(new Date).getTime(),webkitRelativePath:null!==(Bt=Ye.webkitRelativePath)&&void 0!==Bt?Bt:"",size:Me.byteLength,name:Pe,arrayBuffer:(xt=(0,Lt.A)(function*(){return Me.buffer}),function(){return xt.apply(this,arguments)}),stream:()=>new Blob([Me]).stream(),[fe]:()=>Me}):new File([Me],Pe,Ye)}const ne=Xe.u;function Z(){const Me=(0,Xe.J)();return{name:ne,sendRequest:(Pe=(0,Lt.A)(function*(Ye,et){if(Ye.multipartBody)for(const rt of Ye.multipartBody.parts)_e(rt.body)&&(rt.body=B(rt.body));return Me.sendRequest(Ye,et)}),function(et,rt){return Pe.apply(this,arguments)})};var Pe}const ee=Ue.e;function re(){return(0,Ue.r)()}function Ge(Me={}){return(0,se.u)(Me)}const qe=pt.s;function Ze(){return(0,pt.j)()}const Ht=xe.uX;function zt(Me){return(0,xe.nV)(Me)}function X(Me,Pe){return(0,xe.Ll)(Me,Pe)}const x="setClientRequestIdPolicy";function te(Me="x-ms-client-request-id"){return{name:x,sendRequest:(Pe,Ye)=>(0,Lt.A)(function*(){return Pe.headers.has(Me)||Pe.headers.set(Me,Pe.requestId),Ye(Pe)})()}}const me=ct.B;function ue(Me){return(0,ct.e)(Me)}const be=gt.T;function Le(Me){return(0,gt.i)(Me)}var Rt=Se(838);const Tt=je.pj;function Ct(Me){return(0,je.T0)(Me)}var jt=Se(403);const yn="tracingPolicy";function kn(Me={}){const Pe=Y(Me.userAgentPrefix),Ye=new jt.If({additionalAllowedQueryParameters:Me.additionalAllowedQueryParameters}),et=function Gn(){try{return(0,Rt.y)({namespace:"",packageName:"@azure/core-rest-pipeline",packageVersion:le})}catch(Me){return void Je.warning("Error when creating the TracingClient: ".concat((0,L.getErrorMessage)(Me)))}}();return{name:yn,sendRequest:(rt,Bt)=>(0,Lt.A)(function*(){var xt;if(!et)return Bt(rt);const Tn=yield Pe,Un={"http.url":Ye.sanitizeUrl(rt.url),"http.method":rt.method,"http.user_agent":Tn,requestId:rt.requestId};Tn&&(Un["http.user_agent"]=Tn);const{span:Vn,tracingContext:qt}=null!==(xt=function nr(Me,Pe,Ye){try{const{span:et,updatedOptions:rt}=Me.startSpan("HTTP ".concat(Pe.method),{tracingOptions:Pe.tracingOptions},{spanKind:"client",spanAttributes:Ye});if(!et.isRecording())return void et.end();const Bt=Me.createRequestHeaders(rt.tracingOptions.tracingContext);for(const[xt,Tn]of Object.entries(Bt))Pe.headers.set(xt,Tn);return{span:et,tracingContext:rt.tracingOptions.tracingContext}}catch(et){return void Je.warning("Skipping creating a tracing span due to an error: ".concat((0,L.getErrorMessage)(et)))}}(et,rt,Un))&&void 0!==xt?xt:{};if(!Vn||!qt)return Bt(rt);try{const kt=yield et.withContext(qt,Bt,rt);return function yo(Me,Pe){try{Me.setAttribute("http.status_code",Pe.status);const Ye=Pe.headers.get("x-ms-request-id");Ye&&Me.setAttribute("serviceRequestId",Ye),Pe.status>=400&&Me.setStatus({status:"error"}),Me.end()}catch(Ye){Je.warning("Skipping tracing span processing due to an error: ".concat((0,L.getErrorMessage)(Ye)))}}(Vn,kt),kt}catch(kt){throw function $i(Me,Pe){try{Me.setStatus({status:"error",error:(0,L.isError)(Pe)?Pe:void 0}),Ct(Pe)&&Pe.statusCode&&Me.setAttribute("http.status_code",Pe.statusCode),Me.end()}catch(Ye){Je.warning("Skipping tracing span processing due to an error: ".concat((0,L.getErrorMessage)(Ye)))}}(Vn,kt),kt}})()}}function Ho(Me){if(Me instanceof AbortSignal)return{abortSignal:Me};if(Me.aborted)return{abortSignal:AbortSignal.abort(Me.reason)};const Pe=new AbortController;let Ye=!0;function et(){Ye&&(Me.removeEventListener("abort",rt),Ye=!1)}function rt(){Pe.abort(Me.reason),et()}return Me.addEventListener("abort",rt),{abortSignal:Pe.signal,cleanup:et}}const Xs="wrapAbortSignalLikePolicy";function Ys(Me){var Pe;const Ye=nt();return L.isNodeLike&&(Me.agent&&Ye.addPolicy(ue(Me.agent)),Me.tlsOptions&&Ye.addPolicy(Le(Me.tlsOptions)),Ye.addPolicy(X(Me.proxyOptions)),Ye.addPolicy(re())),Ye.addPolicy(function Hi(){return{name:Xs,sendRequest:(Me=(0,Lt.A)(function*(Pe,Ye){if(!Pe.abortSignal)return Ye(Pe);const{abortSignal:et,cleanup:rt}=Ho(Pe.abortSignal);Pe.abortSignal=et;try{return yield Ye(Pe)}finally{null==rt||rt()}}),function(Ye,et){return Me.apply(this,arguments)})};var Me}()),Ye.addPolicy(Ze(),{beforePolicies:[ne]}),Ye.addPolicy(oe(Me.userAgentOptions)),Ye.addPolicy(te(null===(Pe=Me.telemetryOptions)||void 0===Pe?void 0:Pe.clientRequestIdHeaderName)),Ye.addPolicy(Z(),{afterPhase:"Deserialize"}),Ye.addPolicy(Ge(Me.retryOptions),{phase:"Retry"}),Ye.addPolicy(kn(Object.assign(Object.assign({},Me.userAgentOptions),Me.loggingOptions)),{afterPhase:"Retry"}),L.isNodeLike&&Ye.addPolicy(Jt(Me.redirectOptions),{afterPhase:"Retry"}),Ye.addPolicy(Ot(Me.loggingOptions),{afterPhase:"Sign"}),Ye}function zi(){const Me=(0,je.fl)();return{sendRequest:Pe=>(0,Lt.A)(function*(){const{abortSignal:Ye,cleanup:et}=Pe.abortSignal?Ho(Pe.abortSignal):{};try{return Pe.abortSignal=Ye,yield Me.sendRequest(Pe)}finally{null==et||et()}})()}}function so(Me){return(0,je.Nc)(Me)}function qi(Me){return(0,je.G6)(Me)}const gs="exponentialRetryPolicy";function Kn(Me={}){return function Be(Me={}){var Pe;return(0,yt.J)([(0,pe.xB)(Object.assign(Object.assign({},Me),{ignoreSystemErrors:!0}))],{maxRetries:null!==(Pe=Me.maxRetries)&&void 0!==Pe?Pe:Ke.o})}(Me)}const ms=_t;function Zs(Me={}){return function tt(Me={}){var Pe;return{name:_t,sendRequest:(0,yt.J)([(0,pe.xB)(Object.assign(Object.assign({},Me),{ignoreHttpStatusCodes:!0}))],{maxRetries:null!==(Pe=Me.maxRetries)&&void 0!==Pe?Pe:Ke.o}).sendRequest}}(Me)}const Wi=bt;function Jr(Me={}){return function Dt(Me={}){var Pe;return{name:bt,sendRequest:(0,yt.J)([(0,Pt.P)()],{maxRetries:null!==(Pe=Me.maxRetries)&&void 0!==Pe?Pe:Ke.o}).sendRequest}}(Me)}const fr=(0,st.KV)("core-rest-pipeline retryPolicy");function ys(Me,Pe={maxRetries:we}){return(0,yt.J)(Me,Object.assign({logger:fr},Pe))}const rr={forcedRefreshWindowInMs:1e3,retryIntervalInMs:3e3,refreshWindowInMs:12e4};function he(){return he=(0,Lt.A)(function*(Me,Pe,Ye){function et(){return rt.apply(this,arguments)}function rt(){return(rt=(0,Lt.A)(function*(){if(!(Date.now()<Ye)){const xt=yield Me();if(null===xt)throw new Error("Failed to refresh access token.");return xt}try{return yield Me()}catch(xt){return null}})).apply(this,arguments)}let Bt=yield et();for(;null===Bt;)yield(0,L.delay)(Pe),Bt=yield et();return Bt}),he.apply(this,arguments)}function Te(Me,Pe){let rt,Ye=null,et=null;const Bt=Object.assign(Object.assign({},rr),Pe),xt={get isRefreshing(){return null!==Ye},get shouldRefresh(){var Un;return!xt.isRefreshing&&(!!(null!=et&&et.refreshAfterTimestamp&&et.refreshAfterTimestamp<Date.now())||(null!==(Un=null==et?void 0:et.expiresOnTimestamp)&&void 0!==Un?Un:0)-Bt.refreshWindowInMs<Date.now())},get mustRefresh(){return null===et||et.expiresOnTimestamp-Bt.forcedRefreshWindowInMs<Date.now()}};function Tn(Un,Vn){var qt;return xt.isRefreshing||(Ye=function ce(Me,Pe,Ye){return he.apply(this,arguments)}(()=>Me.getToken(Un,Vn),Bt.retryIntervalInMs,null!==(qt=null==et?void 0:et.expiresOnTimestamp)&&void 0!==qt?qt:Date.now()).then(er=>(Ye=null,et=er,rt=Vn.tenantId,et)).catch(er=>{throw Ye=null,et=null,rt=void 0,er})),Ye}return function(){var Un=(0,Lt.A)(function*(Vn,qt){const kt=!!qt.claims;return kt&&(et=null),rt!==qt.tenantId||kt||xt.mustRefresh?Tn(Vn,qt):(xt.shouldRefresh&&Tn(Vn,qt),et)});return function(Vn,qt){return Un.apply(this,arguments)}}()}const $e="bearerTokenAuthenticationPolicy";function k(Me,Pe){return U.apply(this,arguments)}function U(){return(U=(0,Lt.A)(function*(Me,Pe){try{return[yield Pe(Me),void 0]}catch(Ye){if(Ct(Ye)&&Ye.response)return[Ye.response,Ye];throw Ye}})).apply(this,arguments)}function H(Me){return j.apply(this,arguments)}function j(){return(j=(0,Lt.A)(function*(Me){const{scopes:Pe,getAccessToken:Ye,request:et}=Me,rt={abortSignal:et.abortSignal,tracingOptions:et.tracingOptions,enableCae:!0},Bt=yield Ye(Pe,rt);Bt&&Me.request.headers.set("Authorization","Bearer ".concat(Bt.token))})).apply(this,arguments)}function ge(Me){return 401===Me.status&&Me.headers.has("WWW-Authenticate")}function Ie(Me,Pe){return ve.apply(this,arguments)}function ve(){return(ve=(0,Lt.A)(function*(Me,Pe){var Ye;const{scopes:et}=Me,rt=yield Me.getAccessToken(et,{enableCae:!0,claims:Pe});return!!rt&&(Me.request.headers.set("Authorization","".concat(null!==(Ye=rt.tokenType)&&void 0!==Ye?Ye:"Bearer"," ").concat(rt.token)),!0)})).apply(this,arguments)}function Ne(Me){var Pe,Ye,et;const{credential:rt,scopes:Bt,challengeCallbacks:xt}=Me,Tn=Me.logger||Je,Un={authorizeRequest:null!==(Ye=null===(Pe=null==xt?void 0:xt.authorizeRequest)||void 0===Pe?void 0:Pe.bind(xt))&&void 0!==Ye?Ye:H,authorizeRequestOnChallenge:null===(et=null==xt?void 0:xt.authorizeRequestOnChallenge)||void 0===et?void 0:et.bind(xt)},Vn=rt?Te(rt):()=>Promise.resolve(null);return{name:$e,sendRequest:(qt,kt)=>(0,Lt.A)(function*(){if(!qt.url.toLowerCase().startsWith("https://"))throw new Error("Bearer token authentication is not permitted for non-TLS protected (non-https) URLs.");let er,hr,ea;if(yield Un.authorizeRequest({scopes:Array.isArray(Bt)?Bt:[Bt],request:qt,getAccessToken:Vn,logger:Tn}),[er,hr]=yield k(qt,kt),ge(er)){let Gi=Re(er.headers.get("WWW-Authenticate"));if(Gi){let La;try{La=atob(Gi)}catch(ci){return Tn.warning('The WWW-Authenticate header contains "claims" that cannot be parsed. Unable to perform the Continuous Access Evaluation authentication flow. Unparsable claims: '.concat(Gi)),er}ea=yield Ie({scopes:Array.isArray(Bt)?Bt:[Bt],response:er,request:qt,getAccessToken:Vn,logger:Tn},La),ea&&([er,hr]=yield k(qt,kt))}else if(Un.authorizeRequestOnChallenge&&(ea=yield Un.authorizeRequestOnChallenge({scopes:Array.isArray(Bt)?Bt:[Bt],request:qt,response:er,getAccessToken:Vn,logger:Tn}),ea&&([er,hr]=yield k(qt,kt)),ge(er)&&(Gi=Re(er.headers.get("WWW-Authenticate")),Gi))){let La;try{La=atob(Gi)}catch(ci){return Tn.warning('The WWW-Authenticate header contains "claims" that cannot be parsed. Unable to perform the Continuous Access Evaluation authentication flow. Unparsable claims: '.concat(Gi)),er}ea=yield Ie({scopes:Array.isArray(Bt)?Bt:[Bt],response:er,request:qt,getAccessToken:Vn,logger:Tn},La),ea&&([er,hr]=yield k(qt,kt))}}if(hr)throw hr;return er})()}}function Re(Me){var Pe;return Me?null===(Pe=function He(Me){const Pe=/(\w+)\s+((?:\w+=(?:"[^"]*"|[^,]*),?\s*)+)/g,Ye=/(\w+)="([^"]*)"/g,et=[];let rt;for(;null!==(rt=Pe.exec(Me));){const Bt=rt[1],xt=rt[2],Tn={};let Un;for(;null!==(Un=Ye.exec(xt));)Tn[Un[1]]=Un[2];et.push({scheme:Bt,params:Tn})}return et}(Me).find(et=>"Bearer"===et.scheme&&et.params.claims&&"insufficient_claims"===et.params.error))||void 0===Pe?void 0:Pe.params.claims:void 0}const Fe="ndJsonPolicy";function dt(){return{name:Fe,sendRequest:(Me,Pe)=>(0,Lt.A)(function*(){if("string"==typeof Me.body&&Me.body.startsWith("[")){const Ye=JSON.parse(Me.body);Array.isArray(Ye)&&(Me.body=Ye.map(et=>JSON.stringify(et)+"\n").join(""))}return Pe(Me)})()}}const mt="auxiliaryAuthenticationHeaderPolicy",Ut="x-ms-authorization-auxiliary";function Qt(Me){return bn.apply(this,arguments)}function bn(){return(bn=(0,Lt.A)(function*(Me){var Pe,Ye;const{scopes:et,getAccessToken:rt,request:Bt}=Me,xt={abortSignal:Bt.abortSignal,tracingOptions:Bt.tracingOptions};return null!==(Ye=null===(Pe=yield rt(et,xt))||void 0===Pe?void 0:Pe.token)&&void 0!==Ye?Ye:""})).apply(this,arguments)}function pn(Me){const{credentials:Pe,scopes:Ye}=Me,et=Me.logger||Je,rt=new WeakMap;return{name:mt,sendRequest:(Bt,xt)=>(0,Lt.A)(function*(){if(!Bt.url.toLowerCase().startsWith("https://"))throw new Error("Bearer token authentication for auxiliary header is not permitted for non-TLS protected (non-https) URLs.");if(!Pe||0===Pe.length)return et.info("".concat(mt," header will not be set due to empty credentials.")),xt(Bt);const Tn=[];for(const Vn of Pe){let qt=rt.get(Vn);qt||(qt=Te(Vn),rt.set(Vn,qt)),Tn.push(Qt({scopes:Array.isArray(Ye)?Ye:[Ye],request:Bt,getAccessToken:qt,logger:et}))}const Un=(yield Promise.all(Tn)).filter(Vn=>!!Vn);return 0===Un.length?(et.warning("None of the auxiliary tokens are valid. ".concat(Ut," header will not be set.")),xt(Bt)):(Bt.headers.set(Ut,Un.map(Vn=>"Bearer ".concat(Vn)).join(", ")),xt(Bt))})()}}},838:(Kt,ft,Se)=>{Se.d(ft,{y:()=>Ke});const je={span:Symbol.for("@azure/core-tracing span"),namespace:Symbol.for("@azure/core-tracing namespace")};function nt(Qe={}){let Be=new st(Qe.parentContext);return Qe.span&&(Be=Be.setValue(je.span,Qe.span)),Qe.namespace&&(Be=Be.setValue(je.namespace,Qe.namespace)),Be}class st{constructor(Be){this._contextMap=Be instanceof st?new Map(Be._contextMap):new Map}setValue(Be,_t){const tt=new st(this);return tt._contextMap.set(Be,_t),tt}getValue(Be){return this._contextMap.get(Be)}deleteValue(Be){const _t=new st(this);return _t._contextMap.delete(Be),_t}}const Je={instrumenterImplementation:void 0};function pe(){return Je.instrumenterImplementation||(Je.instrumenterImplementation=function Ue(){return{createRequestHeaders:()=>({}),parseTraceparentHeader:()=>{},startSpan:(Qe,Be)=>({span:{end:()=>{},isRecording:()=>!1,recordException:()=>{},setAttribute:()=>{},setStatus:()=>{},addEvent:()=>{}},tracingContext:nt({parentContext:Be.tracingContext})}),withContext:(Qe,Be,..._t)=>Be(..._t)}}()),Je.instrumenterImplementation}var yt=Se(467);function Ke(Qe){const{namespace:Be,packageName:_t,packageVersion:tt}=Qe;function Pt(xe,it,gt){var It;const ot=pe().startSpan(xe,Object.assign(Object.assign({},gt),{packageName:_t,packageVersion:tt,tracingContext:null===(It=null==it?void 0:it.tracingOptions)||void 0===It?void 0:It.tracingContext}));let Ot=ot.tracingContext;const ln=ot.span;return Ot.getValue(je.namespace)||(Ot=Ot.setValue(je.namespace,Be)),ln.setAttribute("az.namespace",Ot.getValue(je.namespace)),{span:ln,updatedOptions:Object.assign({},it,{tracingOptions:Object.assign(Object.assign({},null==it?void 0:it.tracingOptions),{tracingContext:Ot})})}}function Dt(){return(Dt=(0,yt.A)(function*(xe,it,gt,It){const{span:ot,updatedOptions:Ot}=Pt(xe,it,It);try{const ln=yield pt(Ot.tracingOptions.tracingContext,()=>Promise.resolve(gt(Ot,ot)));return ot.setStatus({status:"success"}),ln}catch(ln){throw ot.setStatus({status:"error",error:ln}),ln}finally{ot.end()}})).apply(this,arguments)}function pt(xe,it,...gt){return pe().withContext(xe,it,...gt)}return{startSpan:Pt,withSpan:function bt(xe,it,gt,It){return Dt.apply(this,arguments)},withContext:pt,parseTraceparentHeader:function Ve(xe){return pe().parseTraceparentHeader(xe)},createRequestHeaders:function Xe(xe){return pe().createRequestHeaders(xe)}}}},124:(Kt,ft,Se)=>{Se.r(ft),Se.d(ft,{calculateRetryDelay:()=>tt,cancelablePromiseRace:()=>st,computeSha256Hash:()=>Pt,computeSha256Hmac:()=>bt,createAbortablePromise:()=>Ue,delay:()=>pe,getErrorMessage:()=>Ke,getRandomIntegerInclusive:()=>Dt,isBrowser:()=>xe,isBun:()=>it,isDefined:()=>Qe,isDeno:()=>gt,isError:()=>pt,isNode:()=>It,isNodeLike:()=>ot,isNodeRuntime:()=>Ot,isObject:()=>Ve,isObjectWithProperties:()=>Be,isReactNative:()=>ln,isWebWorker:()=>Jt,objectHasProperty:()=>_t,randomUUID:()=>Xe,stringToUint8Array:()=>St,uint8ArrayToString:()=>Lt});var je=Se(403),nt=Se(467);function st(ut,ke){return Je.apply(this,arguments)}function Je(){return(Je=(0,nt.A)(function*(ut,ke){var de,De;const le=new AbortController;function we(){le.abort()}null===(de=null==ke?void 0:ke.abortSignal)||void 0===de||de.addEventListener("abort",we);try{return yield Promise.race(ut.map(ye=>ye({abortSignal:le.signal})))}finally{le.abort(),null===(De=null==ke?void 0:ke.abortSignal)||void 0===De||De.removeEventListener("abort",we)}})).apply(this,arguments)}class ct extends Error{constructor(ke){super(ke),this.name="AbortError"}}function Ue(ut,ke){const{cleanupBeforeAbort:de,abortSignal:De,abortErrorMsg:le}=null!=ke?ke:{};return new Promise((we,ye)=>{function Oe(){ye(new ct(null!=le?le:"The operation was aborted."))}function Y(){null==De||De.removeEventListener("abort",K)}function K(){null==de||de(),Y(),Oe()}if(null!=De&&De.aborted)return Oe();try{ut(q=>{Y(),we(q)},q=>{Y(),ye(q)})}catch(q){ye(q)}null==De||De.addEventListener("abort",K)})}const se="The delay was aborted.";function pe(ut,ke){let de;const{abortSignal:De,abortErrorMsg:le}=null!=ke?ke:{};return Ue(we=>{de=setTimeout(we,ut)},{cleanupBeforeAbort:()=>clearTimeout(de),abortSignal:De,abortErrorMsg:null!=le?le:se})}function Ke(ut){if((0,je.bJ)(ut))return ut.message;{let ke;try{ke="object"==typeof ut&&ut?JSON.stringify(ut):String(ut)}catch(de){ke="[unable to stringify input]"}return"Unknown error ".concat(ke)}}function Qe(ut){return typeof ut<"u"&&null!==ut}function Be(ut,ke){if(!Qe(ut)||"object"!=typeof ut)return!1;for(const de of ke)if(!_t(ut,de))return!1;return!0}function _t(ut,ke){return Qe(ut)&&"object"==typeof ut&&ke in ut}function tt(ut,ke){return je.gE(ut,ke)}function Pt(ut,ke){return je.Z4(ut,ke)}function bt(ut,ke,de){return je.g8(ut,ke,de)}function Dt(ut,ke){return je.Wq(ut,ke)}function pt(ut){return je.bJ(ut)}function Ve(ut){return je.Gv(ut)}function Xe(){return je.N4()}const xe=je.Bd,it=je.Qg,gt=je.N6,It=je.qx,ot=je.qx,Ot=je.tX,ln=je.lV,Jt=je.p7;function Lt(ut,ke){return je.SW(ut,ke)}function St(ut,ke){return je.Al(ut,ke)}},992:(Kt,ft,Se)=>{Se.d(ft,{KV:()=>Ue});const nt=(0,Se(899).MX)({logLevelEnvVarName:"AZURE_LOG_LEVEL",namespace:"azure"});function Ue(se){return nt.createClientLogger(se)}},20:(Kt,ft,Se)=>{Se.d(ft,{l:()=>je});class je extends Error{constructor(st){super(st),this.name="AbortError"}}},875:(Kt,ft,Se)=>{Se.d(ft,{M:()=>je,o:()=>nt});const je="0.3.0",nt=3},72:(Kt,ft,Se)=>{function je(ct){return ct.toLowerCase()}Se.d(ft,{N:()=>Je});class st{constructor(Ue){if(this._headersMap=new Map,Ue)for(const se of Object.keys(Ue))this.set(se,Ue[se])}set(Ue,se){this._headersMap.set(je(Ue),{name:Ue,value:String(se).trim()})}get(Ue){var se;return null===(se=this._headersMap.get(je(Ue)))||void 0===se?void 0:se.value}has(Ue){return this._headersMap.has(je(Ue))}delete(Ue){this._headersMap.delete(je(Ue))}toJSON(Ue={}){const se={};if(Ue.preserveCase)for(const pe of this._headersMap.values())se[pe.name]=pe.value;else for(const[pe,yt]of this._headersMap)se[pe]=yt.value;return se}toString(){return JSON.stringify(this.toJSON({preserveCase:!0}))}[Symbol.iterator](){return function*nt(ct){for(const Ue of ct.values())yield[Ue.name,Ue.value]}(this._headersMap)}}function Je(ct){return new st(ct)}},201:(Kt,ft,Se)=>{Se.d(ft,{pj:()=>tt,fl:()=>de,O8:()=>yt,Nc:()=>st.N,G6:()=>Ue,KU:()=>Wi,T0:()=>Pt});var je=Se(20),st=(Se(899),Se(72)),Je=Se(233);class ct{constructor(he){var Te,$e,k,U,H,j,ge;this.url=he.url,this.body=he.body,this.headers=null!==(Te=he.headers)&&void 0!==Te?Te:(0,st.N)(),this.method=null!==($e=he.method)&&void 0!==$e?$e:"GET",this.timeout=null!==(k=he.timeout)&&void 0!==k?k:0,this.multipartBody=he.multipartBody,this.formData=he.formData,this.disableKeepAlive=null!==(U=he.disableKeepAlive)&&void 0!==U&&U,this.proxySettings=he.proxySettings,this.streamResponseStatusCodes=he.streamResponseStatusCodes,this.withCredentials=null!==(H=he.withCredentials)&&void 0!==H&&H,this.abortSignal=he.abortSignal,this.onUploadProgress=he.onUploadProgress,this.onDownloadProgress=he.onDownloadProgress,this.requestId=he.requestId||(0,Je.N)(),this.allowInsecureConnection=null!==(j=he.allowInsecureConnection)&&void 0!==j&&j,this.enableBrowserStreams=null!==(ge=he.enableBrowserStreams)&&void 0!==ge&&ge,this.requestOverrides=he.requestOverrides,this.authSchemes=he.authSchemes}}function Ue(ce){return new ct(ce)}const se=new Set(["Deserialize","Serialize","Retry","Sign"]);class pe{constructor(he){var Te;this._policies=[],this._policies=null!==(Te=null==he?void 0:he.slice(0))&&void 0!==Te?Te:[],this._orderedPolicies=void 0}addPolicy(he,Te={}){if(Te.phase&&Te.afterPhase)throw new Error("Policies inside a phase cannot specify afterPhase.");if(Te.phase&&!se.has(Te.phase))throw new Error("Invalid phase name: ".concat(Te.phase));if(Te.afterPhase&&!se.has(Te.afterPhase))throw new Error("Invalid afterPhase name: ".concat(Te.afterPhase));this._policies.push({policy:he,options:Te}),this._orderedPolicies=void 0}removePolicy(he){const Te=[];return this._policies=this._policies.filter($e=>!(he.name&&$e.policy.name===he.name||he.phase&&$e.options.phase===he.phase)||(Te.push($e.policy),!1)),this._orderedPolicies=void 0,Te}sendRequest(he,Te){return this.getOrderedPolicies().reduceRight((U,H)=>j=>H.sendRequest(j,U),U=>he.sendRequest(U))(Te)}getOrderedPolicies(){return this._orderedPolicies||(this._orderedPolicies=this.orderPolicies()),this._orderedPolicies}clone(){return new pe(this._policies)}static create(){return new pe}orderPolicies(){const he=[],Te=new Map;function $e(Fe){return{name:Fe,policies:new Set,hasRun:!1,hasAfterPolicies:!1}}const k=$e("Serialize"),U=$e("None"),H=$e("Deserialize"),j=$e("Retry"),ge=$e("Sign"),Ie=[k,U,H,j,ge];function ve(Fe){return"Retry"===Fe?j:"Serialize"===Fe?k:"Deserialize"===Fe?H:"Sign"===Fe?ge:U}for(const Fe of this._policies){const dt=Fe.policy,mt=Fe.options,Ut=dt.name;if(Te.has(Ut))throw new Error("Duplicate policy names not allowed in pipeline");const Qt={policy:dt,dependsOn:new Set,dependants:new Set};mt.afterPhase&&(Qt.afterPhase=ve(mt.afterPhase),Qt.afterPhase.hasAfterPolicies=!0),Te.set(Ut,Qt),ve(mt.phase).policies.add(Qt)}for(const Fe of this._policies){const{policy:dt,options:mt}=Fe,Ut=dt.name,Qt=Te.get(Ut);if(!Qt)throw new Error("Missing node for policy ".concat(Ut));if(mt.afterPolicies)for(const bn of mt.afterPolicies){const pn=Te.get(bn);pn&&(Qt.dependsOn.add(pn),pn.dependants.add(Qt))}if(mt.beforePolicies)for(const bn of mt.beforePolicies){const pn=Te.get(bn);pn&&(pn.dependsOn.add(Qt),Qt.dependants.add(pn))}}function Ne(Fe){Fe.hasRun=!0;for(const dt of Fe.policies)if((!dt.afterPhase||dt.afterPhase.hasRun&&!dt.afterPhase.policies.size)&&0===dt.dependsOn.size){he.push(dt.policy);for(const mt of dt.dependants)mt.dependsOn.delete(dt);Te.delete(dt.policy.name),Fe.policies.delete(dt)}}function He(){for(const Fe of Ie){if(Ne(Fe),Fe.policies.size>0&&Fe!==U)return void(U.hasRun||Ne(U));Fe.hasAfterPolicies&&Ne(U)}}let Re=0;for(;Te.size>0;){Re++;const Fe=he.length;if(He(),he.length<=Fe&&Re>1)throw new Error("Cannot satisfy policy dependencies due to requirements cycle.")}return he}}function yt(){return pe.create()}var Ke=Se(377);const Qe=Symbol(),_t=new(Se(956).I);let tt=(()=>{class ce extends Error{constructor(Te,$e={}){super(Te),this.name="RestError",this.code=$e.code,this.statusCode=$e.statusCode,Object.defineProperty(this,"request",{value:$e.request,enumerable:!1}),Object.defineProperty(this,"response",{value:$e.response,enumerable:!1}),Object.defineProperty(this,Qe,{value:()=>"RestError: ".concat(this.message," \n ").concat(_t.sanitize(Object.assign(Object.assign({},this),{request:this.request,response:this.response}))),enumerable:!1}),Object.setPrototypeOf(this,ce.prototype)}}return ce.REQUEST_SEND_ERROR="REQUEST_SEND_ERROR",ce.PARSE_ERROR="PARSE_ERROR",ce})();function Pt(ce){return ce instanceof tt||(0,Ke.b)(ce)&&"RestError"===ce.name}var bt=Se(110),Dt=Se(467),pt=Se(509);class Xe{sendRequest(he){return(0,Dt.A)(function*(){if("https:"!==new URL(he.url).protocol&&!he.allowInsecureConnection)throw new Error("Cannot connect to ".concat(he.url," while allowInsecureConnection is false."));if(he.proxySettings)throw new Error("HTTP proxy is not supported in browser environment");try{return yield function xe(ce){return it.apply(this,arguments)}(he)}catch(k){throw function Ot(ce,he){var Te;return ce&&"AbortError"===(null==ce?void 0:ce.name)?ce:new tt("Error sending request: ".concat(ce.message),{code:null!==(Te=null==ce?void 0:ce.code)&&void 0!==Te?Te:tt.REQUEST_SEND_ERROR,request:he})}(k,he)}})()}}function it(){return it=(0,Dt.A)(function*(ce){const{abortController:he,abortControllerCleanup:Te}=function ot(ce){const he=new AbortController;let Te,$e;if(ce.abortSignal){if(ce.abortSignal.aborted)throw new je.l("The operation was aborted. Request has already been canceled.");$e=k=>{"abort"===k.type&&he.abort()},ce.abortSignal.addEventListener("abort",$e),Te=()=>{var k;$e&&(null===(k=ce.abortSignal)||void 0===k||k.removeEventListener("abort",$e))}}return ce.timeout>0&&setTimeout(()=>{he.abort()},ce.timeout),{abortController:he,abortControllerCleanup:Te}}(ce);try{const $e=function ln(ce){const he=new Headers;for(const[Te,$e]of ce)he.append(Te,$e);return he}(ce.headers),{streaming:k,body:U}=function Lt(ce){const he="function"==typeof ce.body?ce.body():ce.body;if((0,pt.vB)(he))throw new Error("Node streams are not supported in browser environment.");return(0,pt.xU)(he)?{streaming:!0,body:St(he,{onProgress:ce.onUploadProgress})}:{streaming:!1,body:he}}(ce),H=Object.assign(Object.assign({body:U,method:ce.method,headers:$e,signal:he.signal},"credentials"in Request.prototype?{credentials:ce.withCredentials?"include":"same-origin"}:{}),"cache"in Request.prototype?{cache:"no-store"}:{});k&&(H.duplex="half");const j=yield fetch(ce.url,Object.assign(Object.assign({},H),ce.requestOverrides));return function Ve(ce){return("function"==typeof Blob||"object"==typeof Blob)&&ce instanceof Blob}(ce.body)&&ce.onUploadProgress&&ce.onUploadProgress({loadedBytes:ce.body.size}),function gt(ce,he,Te){return It.apply(this,arguments)}(j,ce,Te)}catch($e){throw null==Te||Te(),$e}}),it.apply(this,arguments)}function It(){return(It=(0,Dt.A)(function*(ce,he,Te){var $e,k;const U=function Jt(ce){const he=(0,st.N)();for(const[Te,$e]of ce.headers)he.set(Te,$e);return he}(ce),H={request:he,headers:U,status:ce.status},j=(0,pt.xU)(ce.body)?St(ce.body,{onProgress:he.onDownloadProgress,onEnd:Te}):ce.body;if(null!==($e=he.streamResponseStatusCodes)&&void 0!==$e&&$e.has(Number.POSITIVE_INFINITY)||null!==(k=he.streamResponseStatusCodes)&&void 0!==k&&k.has(H.status))if(he.enableBrowserStreams)H.browserStreamBody=null!=j?j:void 0;else{const ge=new Response(j);H.blobBody=ge.blob(),null==Te||Te()}else{const ge=new Response(j);H.bodyAsText=yield ge.text(),null==Te||Te()}return H})).apply(this,arguments)}function St(ce,he={}){let Te=0;const{onProgress:$e,onEnd:k}=he;if(function ke(ce){return void 0!==ce.pipeThrough&&void 0!==self.TransformStream}(ce))return ce.pipeThrough(new TransformStream({transform(U,H){null!==U?(H.enqueue(U),Te+=U.length,$e&&$e({loadedBytes:Te})):H.terminate()},flush(){null==k||k()}}));{const U=ce.getReader();return new ReadableStream({pull:H=>(0,Dt.A)(function*(){var j;const{done:ge,value:Ie}=yield U.read();if(ge||!Ie)return null==k||k(),H.close(),void U.releaseLock();Te+=null!==(j=null==Ie?void 0:Ie.length)&&void 0!==j?j:0,H.enqueue(Ie),$e&&$e({loadedBytes:Te})})(),cancel:H=>(null==k||k(),U.cancel(H))})}}function de(){return function ut(){return new Xe}()}var De=Se(885),le=Se(767),we=Se(489),ye=Se(879),Oe=Se(978),Y=Se(121),K=Se(674),q=Se(248),ie=Se(970),oe=Se(70),L=Se(535);const J="ApiVersionPolicy";var ne=Se(784);let Z=!1;function We(ce,he){if(!ce.url.toLowerCase().startsWith("https://")){if(!function ee(ce,he){if(he.allowInsecureConnection&&ce.allowInsecureConnection){const Te=new URL(ce.url);if("localhost"===Te.hostname||"127.0.0.1"===Te.hostname)return!0}return!1}(ce,he))throw new Error("Authentication is not permitted for non-TLS protected (non-https) URLs when allowInsecureConnection is false.");!function re(){const ce="Sending token over insecure transport. Assume any token issued is compromised.";ne.v.warning(ce),"function"==typeof(null==process?void 0:process.emitWarning)&&!Z&&(Z=!0,process.emitWarning(ce))}()}}const Ge="apiKeyAuthenticationPolicy",Ze="bearerAuthenticationPolicy",zt="bearerAuthenticationPolicy",x="oauth2AuthenticationPolicy";let me;function Le(ce,he){if(ce.headers){const Te=Object.keys(ce.headers).find($e=>$e.toLowerCase()===he.toLowerCase());if(Te)return ce.headers[Te]}}function Tt(ce){return JSON.stringify(ce)}function yn(ce){var he;const Te=function Rt(ce){const he=Le(ce,"content-type");if(he)return he;if(null===ce.contentType)return;if(ce.contentType)return ce.contentType;const{body:Te}=ce;return null!=Te?"string"==typeof Te||"number"==typeof Te||"boolean"==typeof Te?"text/plain; charset=UTF-8":Te instanceof Blob?Te.type||"application/octet-stream":(0,pt.CY)(Te)?"application/octet-stream":"application/json":void 0}(ce),$e=function Ct(ce){var he;const Te=Le(ce,"content-disposition");if(Te)return Te;if(void 0===ce.dispositionType&&void 0===ce.name&&void 0===ce.filename)return;let U,k=null!==(he=ce.dispositionType)&&void 0!==he?he:"form-data";if(ce.name&&(k+="; name=".concat(Tt(ce.name))),ce.filename)U=ce.filename;else if(typeof File<"u"&&ce.body instanceof File){const H=ce.body.name;""!==H&&(U=H)}return U&&(k+="; filename=".concat(Tt(U))),k}(ce),k=(0,st.N)(null!==(he=ce.headers)&&void 0!==he?he:{});Te&&k.set("content-type",Te),$e&&k.set("content-disposition",$e);const U=function jt(ce,he){if(void 0===ce)return new Uint8Array([]);if((0,pt.CY)(ce))return ce;if("string"==typeof ce||"number"==typeof ce||"boolean"==typeof ce)return(0,bt.Al)(String(ce),"utf-8");if(he&&/application\/(.+\+)?json(;.+)?/i.test(String(he)))return(0,bt.Al)(JSON.stringify(ce),"utf-8");throw new tt("Unsupported body/content-type combination: ".concat(ce,", ").concat(he))}(ce.body,Te);return{headers:k,body:U}}function kn(ce){return{parts:ce.map(yn)}}function Gn(ce,he,Te){return nr.apply(this,arguments)}function nr(){return(nr=(0,Dt.A)(function*(ce,he,Te,$e={},k){var U;const H=null!=k?k:function be(){return me||(me=de()),me}(),j=function Ho(ce,he,Te={}){var $e,k,U;const H=function $i(ce={}){var he,Te,$e;return null!==($e=null!==(he=ce.contentType)&&void 0!==he?he:null===(Te=ce.headers)||void 0===Te?void 0:Te["content-type"])&&void 0!==$e?$e:function yo(ce){if(ArrayBuffer.isView(ce))return"application/octet-stream";if("string"==typeof ce)try{return JSON.parse(ce),"application/json"}catch(he){return}return"application/json"}(ce.body)}(Te),{body:j,multipartBody:ge}=function Xs(ce,he=""){if(void 0===ce)return{body:void 0};if(typeof FormData<"u"&&ce instanceof FormData)return{body:ce};if((0,pt.H1)(ce))return{body:ce};if(ArrayBuffer.isView(ce))return{body:ce instanceof Uint8Array?ce:JSON.stringify(ce)};switch(he.split(";")[0]){case"application/json":return{body:JSON.stringify(ce)};case"multipart/form-data":return Array.isArray(ce)?{multipartBody:kn(ce)}:{body:JSON.stringify(ce)};case"text/plain":return{body:String(ce)};default:return"string"==typeof ce?{body:ce}:{body:JSON.stringify(ce)}}}(Te.body,H),Ie=void 0!==j||void 0!==ge;return Ue({url:he,method:ce,body:j,multipartBody:ge,headers:(0,st.N)(Object.assign(Object.assign(Object.assign({},Te.headers?Te.headers:{}),{accept:null!==(U=null!==($e=Te.accept)&&void 0!==$e?$e:null===(k=Te.headers)||void 0===k?void 0:k.accept)&&void 0!==U?U:"application/json"}),Ie&&H&&{"content-type":H})),allowInsecureConnection:Te.allowInsecureConnection,abortSignal:Te.abortSignal,onUploadProgress:Te.onUploadProgress,onDownloadProgress:Te.onDownloadProgress,timeout:Te.timeout,enableBrowserStreams:!0,streamResponseStatusCodes:Te.responseAsStream?new Set([Number.POSITIVE_INFINITY]):void 0})}(ce,he,$e);try{const ge=yield Te.sendRequest(H,j),Ie=ge.headers.toJSON(),ve=null!==(U=ge.readableStreamBody)&&void 0!==U?U:ge.browserStreamBody,Ne=$e.responseAsStream||void 0!==ve?void 0:function Hi(ce){var he,Te;const k=(null!==(he=ce.headers.get("content-type"))&&void 0!==he?he:"").split(";")[0],U=null!==(Te=ce.bodyAsText)&&void 0!==Te?Te:"";if("text/plain"===k)return String(U);try{return U?JSON.parse(U):void 0}catch(H){if("application/json"===k)throw function Ys(ce,he){var Te;const $e='Error "'.concat(he,'" occurred while parsing the response body - ').concat(ce.bodyAsText,"."),k=null!==(Te=he.code)&&void 0!==Te?Te:tt.PARSE_ERROR;return new tt($e,{code:k,statusCode:ce.status,request:ce.request,response:ce})}(ce,H);return String(U)}}(ge),He=null!=ve?ve:Ne;return null!=$e&&$e.onResponse&&$e.onResponse(Object.assign(Object.assign({},ge),{request:j,rawHeaders:Ie,parsedBody:Ne})),{request:j,headers:Ie,status:"".concat(ge.status),body:He}}catch(ge){if(Pt(ge)&&ge.response&&$e.onResponse){const{response:Ie}=ge,ve=Ie.headers.toJSON();null==$e||$e.onResponse(Object.assign(Object.assign({},Ie),{request:j,rawHeaders:ve}),ge)}throw ge}})).apply(this,arguments)}function zi(ce){const he=ce.value;return void 0!==he&&void 0!==he.toString&&"function"==typeof he.toString}function qi(ce,he,Te,$e){let k,U;k="pipeDelimited"===Te?"|":"spaceDelimited"===Te?"%20":",",U=Array.isArray($e)?$e:"object"==typeof $e&&$e.toString===Object.prototype.toString?Object.entries($e).flat():[$e];const H=U.map(j=>{if(null==j)return"";if(!j.toString||"function"!=typeof j.toString)throw new Error("Query parameters must be able to be represented as string, ".concat(ce," can't"));const ge=void 0!==j.toISOString?j.toISOString():j.toString();return he?ge:encodeURIComponent(ge)}).join(k);return"".concat(he?ce:encodeURIComponent(ce),"=").concat(H)}function Zs(ce,he,Te){return ce&&he?ce.split(he).join(Te||""):ce}function Wi(ce,he={}){var Te,$e,k;const U=null!==(Te=he.pipeline)&&void 0!==Te?Te:function ue(ce={}){const he=function z(ce){const he=yt();return K.qx&&(ce.agent&&he.addPolicy((0,ie.e)(ce.agent)),ce.tlsOptions&&he.addPolicy((0,oe.i)(ce.tlsOptions)),he.addPolicy((0,q.Ll)(ce.proxyOptions)),he.addPolicy((0,ye.r)())),he.addPolicy((0,Y.j)(),{beforePolicies:[L.u]}),he.addPolicy((0,we.z)(ce.userAgentOptions)),he.addPolicy((0,L.J)(),{afterPhase:"Deserialize"}),he.addPolicy((0,Oe.u)(ce.retryOptions),{phase:"Retry"}),K.qx&&he.addPolicy((0,le.x)(ce.redirectOptions),{afterPhase:"Retry"}),he.addPolicy((0,De.r)(ce.loggingOptions),{afterPhase:"Sign"}),he}(ce);he.addPolicy(function fe(ce){return{name:J,sendRequest:(he,Te)=>{const $e=new URL(he.url);return!$e.searchParams.get("api-version")&&ce.apiVersion&&(he.url="".concat(he.url).concat(Array.from($e.searchParams.keys()).length>0?"&":"?","api-version=").concat(ce.apiVersion)),Te(he)}}}(ce));const{credential:Te,authSchemes:$e,allowInsecureConnection:k}=ce;return Te&&(function G(ce){return"key"in ce}(Te)?he.addPolicy(function qe(ce){return{name:Ge,sendRequest:(he,Te)=>(0,Dt.A)(function*(){var $e,k;We(he,ce);const U=null===(k=null!==($e=he.authSchemes)&&void 0!==$e?$e:ce.authSchemes)||void 0===k?void 0:k.find(H=>"apiKey"===H.kind);if(!U)return Te(he);if("header"!==U.apiKeyLocation)throw new Error("Unsupported API key location: ".concat(U.apiKeyLocation));return he.headers.set(U.name,ce.credential.key),Te(he)})()}}({authSchemes:$e,credential:Te,allowInsecureConnection:k})):function W(ce){return"username"in ce&&"password"in ce}(Te)?he.addPolicy(function Ht(ce){return{name:Ze,sendRequest:(he,Te)=>(0,Dt.A)(function*(){var $e,k;if(We(he,ce),!(null===(k=null!==($e=he.authSchemes)&&void 0!==$e?$e:ce.authSchemes)||void 0===k?void 0:k.find(Ie=>"http"===Ie.kind&&"basic"===Ie.scheme)))return Te(he);const{username:H,password:j}=ce.credential,ge=(0,bt.SW)((0,bt.Al)("".concat(H,":").concat(j),"utf-8"),"base64");return he.headers.set("Authorization","Basic ".concat(ge)),Te(he)})()}}({authSchemes:$e,credential:Te,allowInsecureConnection:k})):function B(ce){return"getBearerToken"in ce}(Te)?he.addPolicy(function X(ce){return{name:zt,sendRequest:(he,Te)=>(0,Dt.A)(function*(){var $e,k;if(We(he,ce),!(null===(k=null!==($e=he.authSchemes)&&void 0!==$e?$e:ce.authSchemes)||void 0===k?void 0:k.find(j=>"http"===j.kind&&"bearer"===j.scheme)))return Te(he);const H=yield ce.credential.getBearerToken({abortSignal:he.abortSignal});return he.headers.set("Authorization","Bearer ".concat(H)),Te(he)})()}}({authSchemes:$e,credential:Te,allowInsecureConnection:k})):function _e(ce){return"getOAuth2Token"in ce}(Te)&&he.addPolicy(function te(ce){return{name:x,sendRequest:(he,Te)=>(0,Dt.A)(function*(){var $e,k;We(he,ce);const U=null===(k=null!==($e=he.authSchemes)&&void 0!==$e?$e:ce.authSchemes)||void 0===k?void 0:k.find(j=>"oauth2"===j.kind);if(!U)return Te(he);const H=yield ce.credential.getOAuth2Token(U.flows,{abortSignal:he.abortSignal});return he.headers.set("Authorization","Bearer ".concat(H)),Te(he)})()}}({authSchemes:$e,credential:Te,allowInsecureConnection:k}))),he}(he);if(null!==($e=he.additionalPolicies)&&void 0!==$e&&$e.length)for(const{policy:ve,position:Ne}of he.additionalPolicies)U.addPolicy(ve,{afterPhase:"perRetry"===Ne?"Sign":void 0});const{allowInsecureConnection:H,httpClient:j}=he,ge=null!==(k=he.endpoint)&&void 0!==k?k:ce,Ie=(ve,...Ne)=>{const He=Re=>function so(ce,he,Te,$e={}){if(he.startsWith("https://")||he.startsWith("http://"))return he;ce=function Kn(ce,he){var Te;if(!he.pathParameters)return ce;const $e=he.pathParameters;for(const[k,U]of Object.entries($e)){if(null==U)throw new Error("Path parameters ".concat(k," must not be undefined or null"));if(!U.toString||"function"!=typeof U.toString)throw new Error("Path parameters must be able to be represented as string, ".concat(k," can't"));let H=void 0!==U.toISOString?U.toISOString():String(U);he.skipUrlEncoding||(H=encodeURIComponent(U)),ce=null!==(Te=Zs(ce,"{".concat(k,"}"),H))&&void 0!==Te?Te:""}return ce}(ce,$e),he=function ms(ce,he,Te={}){var $e;for(const k of he){const U="object"==typeof k&&null!==($e=k.allowReserved)&&void 0!==$e&&$e;let H="object"==typeof k?k.value:k;!Te.skipUrlEncoding&&!U&&(H=encodeURIComponent(H)),ce=ce.replace(/\{[\w-]+\}/,String(H))}return ce}(he,Te,$e);const k=function gs(ce,he={}){var Te,$e,k,U;if(!he.queryParameters)return ce;const H=new URL(ce),j=he.queryParameters,ge=[];for(const Ie of Object.keys(j)){const ve=j[Ie];if(null==ve)continue;const Ne=zi(ve),He=Ne?ve.value:ve,Re=!(!Ne||null===(Te=ve.explode)||void 0===Te)&&Te,Fe=Ne&&ve.style?ve.style:"form";if(Re)if(Array.isArray(He))for(const dt of He)ge.push(qi(Ie,null!==($e=he.skipUrlEncoding)&&void 0!==$e&&$e,Fe,dt));else{if("object"!=typeof He)throw new Error("explode can only be set to true for objects and arrays");for(const[dt,mt]of Object.entries(He))ge.push(qi(dt,null!==(k=he.skipUrlEncoding)&&void 0!==k&&k,Fe,mt))}else ge.push(qi(Ie,null!==(U=he.skipUrlEncoding)&&void 0!==U&&U,Fe,He))}return""!==H.search&&(H.search+="&"),H.search+=ge.join("&"),H.toString()}("".concat(ce,"/").concat(he),$e);return new URL(k).toString().replace(/([^:]\/)\/+/g,"$1")}(ge,ve,Ne,Object.assign({allowInsecureConnection:H},Re));return{get:(Re={})=>Jr("GET",He(Re),U,Re,H,j),post:(Re={})=>Jr("POST",He(Re),U,Re,H,j),put:(Re={})=>Jr("PUT",He(Re),U,Re,H,j),patch:(Re={})=>Jr("PATCH",He(Re),U,Re,H,j),delete:(Re={})=>Jr("DELETE",He(Re),U,Re,H,j),head:(Re={})=>Jr("HEAD",He(Re),U,Re,H,j),options:(Re={})=>Jr("OPTIONS",He(Re),U,Re,H,j),trace:(Re={})=>Jr("TRACE",He(Re),U,Re,H,j)}};return{path:Ie,pathUnchecked:Ie,pipeline:U}}function Jr(ce,he,Te,$e,k,U){var H;return k=null!==(H=$e.allowInsecureConnection)&&void 0!==H?H:k,{then:function(j,ge){return Gn(ce,he,Te,Object.assign(Object.assign({},$e),{allowInsecureConnection:k}),U).then(j,ge)},asBrowserStream:()=>(0,Dt.A)(function*(){if(K.qx)throw new Error("`asBrowserStream` is supported only in the browser environment. Use `asNodeStream` instead to obtain the response body stream. If you require a Web stream of the response in Node, consider using `Readable.toWeb` on the result of `asNodeStream`.");return Gn(ce,he,Te,Object.assign(Object.assign({},$e),{allowInsecureConnection:k,responseAsStream:!0}),U)})(),asNodeStream:()=>(0,Dt.A)(function*(){if(K.qx)return Gn(ce,he,Te,Object.assign(Object.assign({},$e),{allowInsecureConnection:k,responseAsStream:!0}),U);throw new Error("`isNodeStream` is not supported in the browser environment. Use `asBrowserStream` to obtain the response body stream.")})()}}},784:(Kt,ft,Se)=>{Se.d(ft,{v:()=>nt});const nt=(0,Se(899).KV)("ts-http-runtime")},899:(Kt,ft,Se)=>{Se.d(ft,{KV:()=>It,MX:()=>Ve});const nt=typeof process<"u"&&process.env&&process.env.DEBUG||void 0;let st,Je=[],ct=[];const Ue=[];nt&&pe(nt);const se=Object.assign(ot=>Qe(ot),{enable:pe,enabled:yt,disable:function Ke(){const ot=st||"";return pe(""),ot},log:function je(...ot){if(ot.length>0){const Ot=String(ot[0]);Ot.includes(":error")?console.error(...ot):Ot.includes(":warning")?console.warn(...ot):Ot.includes(":info")?console.info(...ot):(Ot.includes(":verbose"),console.debug(...ot))}}});function pe(ot){st=ot,Je=[],ct=[];const Ot=/\*/g,ln=ot.split(",").map(Jt=>Jt.trim().replace(Ot,".*?"));for(const Jt of ln)Jt.startsWith("-")?ct.push(new RegExp("^".concat(Jt.substr(1),"$"))):Je.push(new RegExp("^".concat(Jt,"$")));for(const Jt of Ue)Jt.enabled=yt(Jt.namespace)}function yt(ot){if(ot.endsWith("*"))return!0;for(const Ot of ct)if(Ot.test(ot))return!1;for(const Ot of Je)if(Ot.test(ot))return!0;return!1}function Qe(ot){const Ot=Object.assign(function ln(...Jt){Ot.enabled&&(Jt.length>0&&(Jt[0]="".concat(ot," ").concat(Jt[0])),Ot.log(...Jt))},{enabled:yt(ot),destroy:Be,log:se.log,namespace:ot,extend:_t});return Ue.push(Ot),Ot}function Be(){const ot=Ue.indexOf(this);return ot>=0&&(Ue.splice(ot,1),!0)}function _t(ot){const Ot=Qe("".concat(this.namespace,":").concat(ot));return Ot.log=this.log,Ot}const tt=se,Pt=["verbose","info","warning","error"],bt={verbose:400,info:300,warning:200,error:100};function Dt(ot,Ot){Ot.log=(...ln)=>{ot.log(...ln)}}function pt(ot){return Pt.includes(ot)}function Ve(ot){const Ot=new Set,ln=typeof process<"u"&&process.env&&process.env[ot.logLevelEnvVarName]||void 0;let Jt;const Lt=tt(ot.namespace);function St(le){if(le&&!pt(le))throw new Error("Unknown log level '".concat(le,"'. Acceptable values: ").concat(Pt.join(",")));Jt=le;const we=[];for(const ye of Ot)ut(ye)&&we.push(ye.namespace);tt.enable(we.join(","))}function ut(le){return!!(Jt&&bt[le.level]<=bt[Jt])}function ke(le,we){const ye=Object.assign(le.extend(we),{level:we});if(Dt(le,ye),ut(ye)){const Oe=tt.disable();tt.enable(Oe+","+ye.namespace)}return Ot.add(ye),ye}return Lt.log=(...le)=>{tt.log(...le)},ln&&(pt(ln)?St(ln):console.error("".concat(ot.logLevelEnvVarName," set to unknown log level '").concat(ln,"'; logging is not enabled. Acceptable values: ").concat(Pt.join(", "),"."))),{setLogLevel:St,getLogLevel:function de(){return Jt},createClientLogger:function De(le){const we=Lt.extend(le);return Dt(Lt,we),{error:ke(we,"error"),warning:ke(we,"warning"),info:ke(we,"info"),verbose:ke(we,"verbose")}},logger:Lt}}const Xe=Ve({logLevelEnvVarName:"TYPESPEC_RUNTIME_LOG_LEVEL",namespace:"typeSpecRuntime"});function It(ot){return Xe.createClientLogger(ot)}},970:(Kt,ft,Se)=>{Se.d(ft,{B:()=>nt,e:()=>st});var je=Se(467);const nt="agentPolicy";function st(Je){return{name:nt,sendRequest:(ct=(0,je.A)(function*(Ue,se){return Ue.agent||(Ue.agent=Je),se(Ue)}),function(se,pe){return ct.apply(this,arguments)})};var ct}},879:(Kt,ft,Se)=>{Se.d(ft,{e:()=>je,r:()=>nt});const je="decompressResponsePolicy";function nt(){throw new Error("decompressResponsePolicy is not supported in browser environment")}},978:(Kt,ft,Se)=>{Se.d(ft,{u:()=>Ue});var je=Se(362),nt=Se(396),st=Se(709),Je=Se(875);const ct="defaultRetryPolicy";function Ue(se={}){var pe;return{name:ct,sendRequest:(0,st.J)([(0,nt.P)(),(0,je.xB)(se)],{maxRetries:null!==(pe=se.maxRetries)&&void 0!==pe?pe:Je.o}).sendRequest}}},121:(Kt,ft,Se)=>{Se.d(ft,{j:()=>se,s:()=>ct});var je=Se(467),nt=Se(110),st=Se(674),Je=Se(72);const ct="formDataPolicy";function se(){return{name:ct,sendRequest:(Qe,Be)=>(0,je.A)(function*(){if(st.qx&&typeof FormData<"u"&&Qe.body instanceof FormData&&(Qe.formData=function Ue(Qe){var Be;const _t={};for(const[tt,Pt]of Qe.entries())null!==(Be=_t[tt])&&void 0!==Be||(_t[tt]=[]),_t[tt].push(Pt);return _t}(Qe.body),Qe.body=void 0),Qe.formData){const _t=Qe.headers.get("Content-Type");_t&&-1!==_t.indexOf("application/x-www-form-urlencoded")?Qe.body=function pe(Qe){const Be=new URLSearchParams;for(const[_t,tt]of Object.entries(Qe))if(Array.isArray(tt))for(const Pt of tt)Be.append(_t,Pt.toString());else Be.append(_t,tt.toString());return Be.toString()}(Qe.formData):yield function yt(Qe,Be){return Ke.apply(this,arguments)}(Qe.formData,Qe),Qe.formData=void 0}return Be(Qe)})()}}function Ke(){return(Ke=(0,je.A)(function*(Qe,Be){const _t=Be.headers.get("Content-Type");if(_t&&!_t.startsWith("multipart/form-data"))return;Be.headers.set("Content-Type",null!=_t?_t:"multipart/form-data");const tt=[];for(const[Pt,bt]of Object.entries(Qe))for(const Dt of Array.isArray(bt)?bt:[bt])if("string"==typeof Dt)tt.push({headers:(0,Je.N)({"Content-Disposition":'form-data; name="'.concat(Pt,'"')}),body:(0,nt.Al)(Dt,"utf-8")});else{if(null==Dt||"object"!=typeof Dt)throw new Error("Unexpected value for key ".concat(Pt,": ").concat(Dt,". Value should be serialized to string first."));{const pt=Dt.name||"blob",Ve=(0,Je.N)();Ve.set("Content-Disposition",'form-data; name="'.concat(Pt,'"; filename="').concat(pt,'"')),Ve.set("Content-Type",Dt.type||"application/octet-stream"),tt.push({headers:Ve,body:Dt})}}Be.multipartBody={parts:tt}})).apply(this,arguments)}},885:(Kt,ft,Se)=>{Se.d(ft,{G:()=>Je,r:()=>ct});var je=Se(467),nt=Se(784),st=Se(956);const Je="logPolicy";function ct(Ue={}){var se;const pe=null!==(se=Ue.logger)&&void 0!==se?se:nt.v.info,yt=new st.I({additionalAllowedHeaderNames:Ue.additionalAllowedHeaderNames,additionalAllowedQueryParameters:Ue.additionalAllowedQueryParameters});return{name:Je,sendRequest:(Ke,Qe)=>(0,je.A)(function*(){if(!pe.enabled)return Qe(Ke);pe("Request: ".concat(yt.sanitize(Ke)));const Be=yield Qe(Ke);return pe("Response status code: ".concat(Be.status)),pe("Headers: ".concat(yt.sanitize(Be.headers))),Be})()}}},535:(Kt,ft,Se)=>{Se.d(ft,{J:()=>Xe,u:()=>bt});var je=Se(467),nt=Se(110),st=Se(509),Je=Se(233);function Ue(xe){return se.apply(this,arguments)}function se(){return(se=(0,je.A)(function*(xe){if(xe instanceof Blob||xe instanceof Uint8Array)return xe;if((0,st.xU)(xe))return function ct(xe){return new Response(xe).blob()}(xe);throw new Error("Unsupported source type. Only Blob, Uint8Array, and ReadableStream are supported in browser.")})).apply(this,arguments)}function yt(){return(yt=(0,je.A)(function*(xe){const it=[];for(const gt of xe)it.push(yield Ue("function"==typeof gt?gt():gt));return new Blob(it)})).apply(this,arguments)}function Qe(xe){let it="";for(const[gt,It]of xe)it+="".concat(gt,": ").concat(It,"\r\n");return it}function Be(xe){return xe instanceof Uint8Array?xe.byteLength:(0,st.qf)(xe)?-1===xe.size?void 0:xe.size:void 0}function Pt(){return Pt=(0,je.A)(function*(xe,it,gt){const It=[(0,nt.Al)("--".concat(gt),"utf-8"),...it.flatMap(Ot=>[(0,nt.Al)("\r\n","utf-8"),(0,nt.Al)(Qe(Ot.headers),"utf-8"),(0,nt.Al)("\r\n","utf-8"),Ot.body,(0,nt.Al)("\r\n--".concat(gt),"utf-8")]),(0,nt.Al)("--\r\n\r\n","utf-8")],ot=function _t(xe){let it=0;for(const gt of xe){const It=Be(gt);if(void 0===It)return;it+=It}return it}(It);ot&&xe.headers.set("Content-Length",ot),xe.body=yield function pe(xe){return yt.apply(this,arguments)}(It)}),Pt.apply(this,arguments)}const bt="multipartPolicy",Dt=70,pt=new Set("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789'()+,-./:=?");function Xe(){return{name:bt,sendRequest:(xe,it)=>(0,je.A)(function*(){var gt;if(!xe.multipartBody)return it(xe);if(xe.body)throw new Error("multipartBody and regular body cannot be set at the same time");let It=xe.multipartBody.boundary;const ot=null!==(gt=xe.headers.get("Content-Type"))&&void 0!==gt?gt:"multipart/mixed",Ot=ot.match(/^(multipart\/[^ ;]+)(?:; *boundary=(.+))?$/);if(!Ot)throw new Error("Got multipart request body, but content-type header was not multipart: ".concat(ot));const[,ln,Jt]=Ot;if(Jt&&It&&Jt!==It)throw new Error("Multipart boundary was specified as ".concat(Jt," in the header, but got ").concat(It," in the request body"));return null!=It||(It=Jt),It?function Ve(xe){if(xe.length>Dt)throw new Error('Multipart boundary "'.concat(xe,'" exceeds maximum length of 70 characters'));if(Array.from(xe).some(it=>!pt.has(it)))throw new Error('Multipart boundary "'.concat(xe,'" contains invalid characters'))}(It):It=function Ke(){return"----AzSDKFormBoundary".concat((0,Je.N)())}(),xe.headers.set("Content-Type","".concat(ln,"; boundary=").concat(It)),yield function tt(xe,it,gt){return Pt.apply(this,arguments)}(xe,xe.multipartBody.parts,It),xe.multipartBody=void 0,it(xe)})()}}},248:(Kt,ft,Se)=>{Se.d(ft,{Ll:()=>Je,nV:()=>st,uX:()=>je});const je="proxyPolicy",nt="proxyPolicy is not supported in browser environment";function st(){throw new Error(nt)}function Je(){throw new Error(nt)}},767:(Kt,ft,Se)=>{Se.d(ft,{O:()=>nt,x:()=>Je});var je=Se(467);const nt="redirectPolicy",st=["GET","HEAD"];function Je(se={}){const{maxRetries:pe=20}=se;return{name:nt,sendRequest:(yt,Ke)=>(0,je.A)(function*(){const Qe=yield Ke(yt);return ct(Ke,Qe,pe)})()}}function ct(se,pe,yt){return Ue.apply(this,arguments)}function Ue(){return(Ue=(0,je.A)(function*(se,pe,yt,Ke=0){const{request:Qe,status:Be,headers:_t}=pe,tt=_t.get("location");if(tt&&(300===Be||301===Be&&st.includes(Qe.method)||302===Be&&st.includes(Qe.method)||303===Be&&"POST"===Qe.method||307===Be)&&Ke<yt){const Pt=new URL(tt,Qe.url);Qe.url=Pt.toString(),303===Be&&(Qe.method="GET",Qe.headers.delete("Content-Length"),delete Qe.body),Qe.headers.delete("Authorization");const bt=yield se(Qe);return ct(se,bt,yt,Ke+1)}return pe})).apply(this,arguments)}},709:(Kt,ft,Se)=>{Se.d(ft,{J:()=>pe});var je=Se(467),nt=Se(597),st=Se(20),Je=Se(899),ct=Se(875);const Ue=(0,Je.KV)("ts-http-runtime retryPolicy"),se="retryPolicy";function pe(yt,Ke={maxRetries:ct.o}){const Qe=Ke.logger||Ue;return{name:se,sendRequest:(Be,_t)=>(0,je.A)(function*(){var tt,Pt;let bt,Dt,pt=-1;e:for(;;){pt+=1,bt=void 0,Dt=void 0;try{Qe.info("Retry ".concat(pt,": Attempting to send request"),Be.requestId),bt=yield _t(Be),Qe.info("Retry ".concat(pt,": Received a response from request"),Be.requestId)}catch(Ve){if(Qe.error("Retry ".concat(pt,": Received an error from request"),Be.requestId),Dt=Ve,!Ve||"RestError"!==Dt.name)throw Ve;bt=Dt.response}if(null!==(tt=Be.abortSignal)&&void 0!==tt&&tt.aborted)throw Qe.error("Retry ".concat(pt,": Request aborted.")),new st.l;if(pt>=(null!==(Pt=Ke.maxRetries)&&void 0!==Pt?Pt:ct.o)){if(Qe.info("Retry ".concat(pt,": Maximum retries reached. Returning the last received response, or throwing the last received error.")),Dt)throw Dt;if(bt)return bt;throw new Error("Maximum retries reached with no response or error to throw")}Qe.info("Retry ".concat(pt,": Processing ").concat(yt.length," retry strategies."));t:for(const Ve of yt){const Xe=Ve.logger||Qe;Xe.info("Retry ".concat(pt,": Processing retry strategy ").concat(Ve.name,"."));const xe=Ve.retry({retryCount:pt,response:bt,responseError:Dt});if(xe.skipStrategy){Xe.info("Retry ".concat(pt,": Skipped."));continue t}const{errorToThrow:it,retryAfterInMs:gt,redirectTo:It}=xe;if(it)throw Xe.error("Retry ".concat(pt,": Retry strategy ").concat(Ve.name," throws error:"),it),it;if(gt||0===gt){Xe.info("Retry ".concat(pt,": Retry strategy ").concat(Ve.name," retries after ").concat(gt)),yield(0,nt.c)(gt,void 0,{abortSignal:Be.abortSignal});continue e}if(It){Xe.info("Retry ".concat(pt,": Retry strategy ").concat(Ve.name," redirects to ").concat(It)),Be.url=It;continue e}}if(Dt)throw Qe.info("None of the retry strategies could work with the received error. Throwing it."),Dt;if(bt)return Qe.info("None of the retry strategies could work with the received response. Returning it."),bt}})()}}},70:(Kt,ft,Se)=>{Se.d(ft,{T:()=>nt,i:()=>st});var je=Se(467);const nt="tlsPolicy";function st(Je){return{name:nt,sendRequest:(ct=(0,je.A)(function*(Ue,se){return Ue.tlsSettings||(Ue.tlsSettings=Je),se(Ue)}),function(se,pe){return ct.apply(this,arguments)})};var ct}},489:(Kt,ft,Se)=>{Se.d(ft,{z:()=>tt});var je=Se(467);function Ue(){return(Ue=(0,je.A)(function*(Pt){const bt=globalThis.navigator;let Dt="unknown";if(null!=bt&&bt.userAgentData){const pt=yield bt.userAgentData.getHighEntropyValues(["architecture","platformVersion"]);Dt="".concat(pt.architecture,"-").concat(pt.platform,"-").concat(pt.platformVersion);const Ve=function Je(Pt){const bt=["Google Chrome","Microsoft Edge","Opera","Brave","Chromium"];for(const Dt of bt){const pt=Pt.find(Ve=>Ve.brand===Dt);if(pt)return pt}}(bt.userAgentData.brands);Ve&&Pt.set(Ve.brand,Ve.version)}else if(null!=bt&&bt.platform){Dt=bt.platform;const pt=function st(Pt){const bt=[{name:"Firefox",regex:/Firefox\/([\d.]+)/},{name:"Safari",regex:/Version\/([\d.]+).*Safari/}];for(const Dt of bt){const pt=Pt.match(Dt.regex);if(pt)return{brand:Dt.name,version:pt[1]}}}(bt.userAgent);pt&&Pt.set(pt.brand,pt.version)}else"string"==typeof globalThis.EdgeRuntime&&Pt.set("EdgeRuntime",globalThis.EdgeRuntime);Pt.set("OS",Dt)})).apply(this,arguments)}var se=Se(875);function Qe(){return Qe=(0,je.A)(function*(Pt){const bt=new Map;bt.set("ts-http-runtime",se.M),yield function ct(Pt){return Ue.apply(this,arguments)}(bt);const Dt=function pe(Pt){const bt=[];for(const[Dt,pt]of Pt){const Ve=pt?"".concat(Dt,"/").concat(pt):Dt;bt.push(Ve)}return bt.join(" ")}(bt);return Pt?"".concat(Pt," ").concat(Dt):Dt}),Qe.apply(this,arguments)}const Be="x-ms-useragent",_t="userAgentPolicy";function tt(Pt={}){const bt=function Ke(Pt){return Qe.apply(this,arguments)}(Pt.userAgentPrefix);return{name:_t,sendRequest:(Dt,pt)=>(0,je.A)(function*(){return Dt.headers.has(Be)||Dt.headers.set(Be,yield bt),pt(Dt)})()}}},362:(Kt,ft,Se)=>{Se.d(ft,{xB:()=>ct});var je=Se(140),nt=Se(396);const st=1e3,Je=64e3;function ct(pe={}){var yt,Ke;const Qe=null!==(yt=pe.retryDelayInMs)&&void 0!==yt?yt:st,Be=null!==(Ke=pe.maxRetryDelayInMs)&&void 0!==Ke?Ke:Je;return{name:"exponentialRetryStrategy",retry({retryCount:_t,response:tt,responseError:Pt}){const bt=function se(pe){return!!pe&&("ETIMEDOUT"===pe.code||"ESOCKETTIMEDOUT"===pe.code||"ECONNREFUSED"===pe.code||"ECONNRESET"===pe.code||"ENOENT"===pe.code||"ENOTFOUND"===pe.code)}(Pt),Dt=bt&&pe.ignoreSystemErrors,pt=function Ue(pe){return!(!pe||void 0===pe.status||!(pe.status>=500||408===pe.status)||501===pe.status||505===pe.status)}(tt),Ve=pt&&pe.ignoreHttpStatusCodes;return tt&&((0,nt.$)(tt)||!pt)||Ve||Dt?{skipStrategy:!0}:!Pt||bt||pt?(0,je.g)(_t,{retryDelayInMs:Qe,maxRetryDelayInMs:Be}):{errorToThrow:Pt}}}}},396:(Kt,ft,Se)=>{Se.d(ft,{$:()=>ct,P:()=>Ue});var je=Se(597);const nt="Retry-After",st=["retry-after-ms","x-ms-retry-after-ms",nt];function Je(se){if(se&&[429,503].includes(se.status))try{for(const Qe of st){const Be=(0,je.H)(se,Qe);if(0===Be||Be)return Be*(Qe===nt?1e3:1)}const pe=se.headers.get(nt);if(!pe)return;const Ke=Date.parse(pe)-Date.now();return Number.isFinite(Ke)?Math.max(0,Ke):void 0}catch(pe){return}}function ct(se){return Number.isFinite(Je(se))}function Ue(){return{name:"throttlingRetryStrategy",retry({response:se}){const pe=Je(se);return Number.isFinite(pe)?{retryAfterInMs:pe}:{skipStrategy:!0}}}}},110:(Kt,ft,Se)=>{function je(Be,_t){switch(_t){case"utf-8":return function ct(Be){return(new TextDecoder).decode(Be)}(Be);case"base64":return st(Be);case"base64url":return function Je(Be){return st(Be).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}(Be);case"hex":return function Ue(Be){return[...Be].map(_t=>_t.toString(16).padStart(2,"0")).join("")}(Be)}}function nt(Be,_t){switch(_t){case"utf-8":return function se(Be){return(new TextEncoder).encode(Be)}(Be);case"base64":return pe(Be);case"base64url":return function yt(Be){return pe(Be.replace(/-/g,"+").replace(/_/g,"/"))}(Be);case"hex":return function Qe(Be){const _t=new Uint8Array(Be.length/2);for(let tt=0;tt<Be.length/2;++tt){const Pt=Be[2*tt],bt=Be[2*tt+1];if(!Ke.has(Pt)||!Ke.has(bt))return _t.slice(0,tt);_t[tt]=parseInt("".concat(Pt).concat(bt),16)}return _t}(Be)}}function st(Be){return btoa([...Be].map(_t=>String.fromCharCode(_t)).join(""))}function pe(Be){return new Uint8Array([...atob(Be)].map(_t=>_t.charCodeAt(0)))}Se.d(ft,{Al:()=>nt,SW:()=>je});const Ke=new Set("0123456789abcdefABCDEF")},674:(Kt,ft,Se)=>{var je,nt,st,Je;Se.d(ft,{Bd:()=>ct,N6:()=>se,Qg:()=>pe,lV:()=>Qe,p7:()=>Ue,qx:()=>yt,tX:()=>Ke});const ct=typeof window<"u"&&typeof window.document<"u",Ue="object"==typeof self&&"function"==typeof(null==self?void 0:self.importScripts)&&("DedicatedWorkerGlobalScope"===(null===(je=self.constructor)||void 0===je?void 0:je.name)||"ServiceWorkerGlobalScope"===(null===(nt=self.constructor)||void 0===nt?void 0:nt.name)||"SharedWorkerGlobalScope"===(null===(st=self.constructor)||void 0===st?void 0:st.name)),se=typeof Deno<"u"&&typeof Deno.version<"u"&&typeof Deno.version.deno<"u",pe=typeof Bun<"u"&&typeof Bun.version<"u",yt=typeof globalThis.process<"u"&&!!globalThis.process.version&&!(null===(Je=globalThis.process.versions)||void 0===Je||!Je.node),Ke=yt&&!pe&&!se,Qe=typeof navigator<"u"&&"ReactNative"===(null==navigator?void 0:navigator.product)},140:(Kt,ft,Se)=>{Se.d(ft,{g:()=>nt});var je=Se(900);function nt(st,Je){const ct=Je.retryDelayInMs*Math.pow(2,st),Ue=Math.min(Je.maxRetryDelayInMs,ct);return{retryAfterInMs:Ue/2+(0,je.W)(0,Ue/2)}}},377:(Kt,ft,Se)=>{Se.d(ft,{b:()=>nt});var je=Se(652);function nt(st){return!!(0,je.G)(st)&&("string"==typeof st.name&&"string"==typeof st.message)}},597:(Kt,ft,Se)=>{Se.d(ft,{H:()=>Je,c:()=>st});var je=Se(20);const nt="The operation was aborted.";function st(ct,Ue,se){return new Promise((pe,yt)=>{let Ke,Qe;const Be=()=>yt(new je.l(null!=se&&se.abortErrorMsg?null==se?void 0:se.abortErrorMsg:nt)),_t=()=>{null!=se&&se.abortSignal&&Qe&&se.abortSignal.removeEventListener("abort",Qe)};if(Qe=()=>(Ke&&clearTimeout(Ke),_t(),Be()),null!=se&&se.abortSignal&&se.abortSignal.aborted)return Be();Ke=setTimeout(()=>{_t(),pe(Ue)},ct),null!=se&&se.abortSignal&&se.abortSignal.addEventListener("abort",Qe)})}function Je(ct,Ue){const se=ct.headers.get(Ue);if(!se)return;const pe=Number(se);return Number.isNaN(pe)?void 0:pe}},403:(Kt,ft,Se)=>{Se.d(ft,{If:()=>Pt.I,gE:()=>je.g,Z4:()=>Qe,g8:()=>yt,Wq:()=>nt.W,Bd:()=>tt.Bd,Qg:()=>tt.Qg,N6:()=>tt.N6,bJ:()=>Je.b,qx:()=>tt.qx,tX:()=>tt.tX,Gv:()=>st.G,lV:()=>tt.lV,p7:()=>tt.p7,N4:()=>_t.N,Al:()=>Ue.Al,SW:()=>Ue.SW});var je=Se(140),nt=Se(900),st=Se(652),Je=Se(377),ct=Se(467),Ue=Se(110);let se;function pe(){if(se)return se;if(!self.crypto||!self.crypto.subtle)throw new Error("Your browser environment does not support cryptography functions.");return se=self.crypto.subtle,se}function yt(bt,Dt,pt){return Ke.apply(this,arguments)}function Ke(){return(Ke=(0,ct.A)(function*(bt,Dt,pt){const Ve=pe(),Xe=(0,Ue.Al)(bt,"base64"),xe=(0,Ue.Al)(Dt,"utf-8"),it=yield Ve.importKey("raw",Xe,{name:"HMAC",hash:{name:"SHA-256"}},!1,["sign"]),gt=yield Ve.sign({name:"HMAC",hash:{name:"SHA-256"}},it,xe);return(0,Ue.SW)(new Uint8Array(gt),pt)})).apply(this,arguments)}function Qe(bt,Dt){return Be.apply(this,arguments)}function Be(){return(Be=(0,ct.A)(function*(bt,Dt){const pt=(0,Ue.Al)(bt,"utf-8"),Ve=yield pe().digest({name:"SHA-256"},pt);return(0,Ue.SW)(new Uint8Array(Ve),Dt)})).apply(this,arguments)}var _t=Se(233),tt=Se(674),Pt=Se(956)},652:(Kt,ft,Se)=>{function je(nt){return!("object"!=typeof nt||null===nt||Array.isArray(nt)||nt instanceof RegExp||nt instanceof Date)}Se.d(ft,{G:()=>je})},900:(Kt,ft,Se)=>{function je(nt,st){return nt=Math.ceil(nt),st=Math.floor(st),Math.floor(Math.random()*(st-nt+1))+nt}Se.d(ft,{W:()=>je})},956:(Kt,ft,Se)=>{Se.d(ft,{I:()=>ct});var je=Se(652);const nt="REDACTED",st=["x-ms-client-request-id","x-ms-return-client-request-id","x-ms-useragent","x-ms-correlation-request-id","x-ms-request-id","client-request-id","ms-cv","return-client-request-id","traceparent","Access-Control-Allow-Credentials","Access-Control-Allow-Headers","Access-Control-Allow-Methods","Access-Control-Allow-Origin","Access-Control-Expose-Headers","Access-Control-Max-Age","Access-Control-Request-Headers","Access-Control-Request-Method","Origin","Accept","Accept-Encoding","Cache-Control","Connection","Content-Length","Content-Type","Date","ETag","Expires","If-Match","If-Modified-Since","If-None-Match","If-Unmodified-Since","Last-Modified","Pragma","Request-Id","Retry-After","Server","Transfer-Encoding","User-Agent","WWW-Authenticate"],Je=["api-version"];class ct{constructor({additionalAllowedHeaderNames:se=[],additionalAllowedQueryParameters:pe=[]}={}){se=st.concat(se),pe=Je.concat(pe),this.allowedHeaderNames=new Set(se.map(yt=>yt.toLowerCase())),this.allowedQueryParameters=new Set(pe.map(yt=>yt.toLowerCase()))}sanitize(se){const pe=new Set;return JSON.stringify(se,(yt,Ke)=>{if(Ke instanceof Error)return Object.assign(Object.assign({},Ke),{name:Ke.name,message:Ke.message});if("headers"===yt)return this.sanitizeHeaders(Ke);if("url"===yt)return this.sanitizeUrl(Ke);if("query"===yt)return this.sanitizeQuery(Ke);if("body"!==yt&&"response"!==yt&&"operationSpec"!==yt){if(Array.isArray(Ke)||(0,je.G)(Ke)){if(pe.has(Ke))return"[Circular]";pe.add(Ke)}return Ke}},2)}sanitizeUrl(se){if("string"!=typeof se||null===se||""===se)return se;const pe=new URL(se);if(!pe.search)return se;for(const[yt]of pe.searchParams)this.allowedQueryParameters.has(yt.toLowerCase())||pe.searchParams.set(yt,nt);return pe.toString()}sanitizeHeaders(se){const pe={};for(const yt of Object.keys(se))pe[yt]=this.allowedHeaderNames.has(yt.toLowerCase())?se[yt]:nt;return pe}sanitizeQuery(se){if("object"!=typeof se||null===se)return se;const pe={};for(const yt of Object.keys(se))pe[yt]=this.allowedQueryParameters.has(yt.toLowerCase())?se[yt]:nt;return pe}}},509:(Kt,ft,Se)=>{function je(Ue){return!(!Ue||"function"!=typeof Ue.pipe)}function nt(Ue){return!(!Ue||"function"!=typeof Ue.getReader||"function"!=typeof Ue.tee)}function st(Ue){return void 0!==Ue&&(Ue instanceof Uint8Array||Je(Ue)||"function"==typeof Ue||Ue instanceof Blob)}function Je(Ue){return je(Ue)||nt(Ue)}function ct(Ue){return"function"==typeof Ue.stream}Se.d(ft,{CY:()=>st,H1:()=>Je,qf:()=>ct,vB:()=>je,xU:()=>nt})},233:(Kt,ft,Se)=>{var st;Se.d(ft,{N:()=>ct});const Je="function"==typeof(null===(st=null==globalThis?void 0:globalThis.crypto)||void 0===st?void 0:st.randomUUID)?globalThis.crypto.randomUUID.bind(globalThis.crypto):function je(){let Ue="";for(let se=0;se<32;se++){const pe=Math.floor(16*Math.random());Ue+=12===se?"4":16===se?3&pe|8:pe.toString(16),(7===se||11===se||15===se||19===se)&&(Ue+="-")}return Ue};function ct(){return Je()}},467:(Kt,ft,Se)=>{function je(st,Je,ct,Ue,se,pe,yt){try{var Ke=st[pe](yt),Qe=Ke.value}catch(Be){return void ct(Be)}Ke.done?Je(Qe):Promise.resolve(Qe).then(Ue,se)}function nt(st){return function(){var Je=this,ct=arguments;return new Promise(function(Ue,se){var pe=st.apply(Je,ct);function yt(Qe){je(pe,Ue,se,yt,Ke,"next",Qe)}function Ke(Qe){je(pe,Ue,se,yt,Ke,"throw",Qe)}yt(void 0)})}}Se.d(ft,{A:()=>nt})}},Kt=>{Kt(Kt.s=968)}]);